/*!
 * jQuery JavaScript Library v1.8.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 30 2012 17:17:22 GMT-0400 (Eastern Daylight Time)
 */
function launchComponent(e,t,n){var r=Ext.ComponentQuery.query("#app")[0];window.history.pushState("","Faster Notes","/"+t),r.loadNetzkeComponent({name:e,container:r.mainPanel,params:{component_params:n}})}function launchPatientWindow(e){var t=Ext.ComponentQuery.query("#app")[0];e.hasOwnProperty("height")||(e.height="40%"),e.hasOwnProperty("width")||(e.width="60%"),t.loadNetzkeComponent({name:"patient_window",params:{component_params:e}})}function launchComponentInWindow(e,t){var n=Ext.ComponentQuery.query("#app")[0],r=new Ext.window.Window({height:500,width:600,modal:!0,layout:"fit",buttons:[{text:"OK",listeners:{click:function(){g.sendUpdatedReferralReceivedDate(r,"#{record.id}")}}},{text:"Cancel",listeners:{click:function(){r.close()}}}],xtitle:"Referral Received Date"});r.show(),n.loadNetzkeComponent({name:e,params:{component_params:t},container:r,callback:function(e){e.show()}})}function onDocumentApprove(e){e.approveDocument({},function(t){if(t==0){var n="ROC HIPPS Code is not same as RC HIPPS Code. Discharge the Patient.";Ext.MessageBox.alert("<b><i>Warning:</i></b>",n)}else{var r=Ext.ComponentQuery.query("#"+e.gridItemId)[0];r.store.load(),e.up("window").close()}},e)}function onDocumentEdit(e,t,n,r){var i=r.down("#field_signature_not_required"),s=Ext.ComponentQuery.query("#super_visory_visits_id")[0],o="Editing this document will delete all field staff signature(s). The field staff(s) will need to re-sign";o+=" the document in order for the signature(s) to appear on the printed document. Do you still want to edit this document?",s?changeDocStatus(e,t,n,!1,r):i.value?changeDocStatus(e,t,n,!0,r):Ext.MessageBox.confirm("<b><i>Warning:</i></b>",o,function(n){(n=="yes"||n=="ok")&&changeDocStatus(e,t,!1,!1,r)},r)}function changeDocStatus(e,t,n,r,i){e.hide(),t.hide();if(r){n.setText("Submit for QA");var s=i.up("window");s.actions.saveDraft.show()}i.changeDocumentStatusToDraft({},function(){var e=i.up("form"),t=i.up("window"),n=Ext.ComponentQuery.query("#"+i.gridItemId)[0];n.store.load(),i.loadNetzkeComponent({name:"add_document",params:{},container:t,callback:function(){},scope:i})},i)}function onPrint(e){e.isDirty()?Ext.MessageBox.confirm("Confirmation","Do you want to save the changes and print?",function(t){t=="yes"?(e.saveAndPrint=!0,e.onApply({draft_save:!0})):e.viewReport({record_id:e.record.id})},e):e.viewReport({record_id:e.record.id})}function launchDocumentReport(e){var t=e[0];t=window.location.protocol+"//"+window.location.host+t;var n=e[1];Ext.isGecko?window.location=t:(Ext.create("Ext.window.Window",{width:800,height:600,layout:"fit",title:n,items:[{xtype:"component",id:"myIframe",autoEl:{tag:"iframe",href:""}}]}).show(),Ext.getDom("myIframe").src=t)}function onAfterRender(e){freeFormTemplateWindowEvents(e),e.setLoading(!0);var t=e.query("netzkeremotecombo");Ext.each(t,function(e,t){e.triggerAction="query",e.value&&(e.store.load({params:{query:e.value}}),e.setValue(e.value))},e),e.setLoading(!1),e.setContext({document_id:e.record.id});var n=Ext.ComponentQuery.query("#view_medications")[0];n&&n.on("click",function(){e.onMedicationsClick()});var r=Ext.ComponentQuery.query("#view_orders")[0];r&&r.on("click",function(){e.onViewOrders()});var i=Ext.ComponentQuery.query("#correction_request")[0];i&&i.events.click.isEvent==undefined&&i.on("click",function(){var t=new Ext.window.Window({width:300,height:370,bbar:!1,fbar:!1,modal:!0,border:!1,layout:"fit",title:"Correction Request",itemId:"correction_request_window",buttons:!1,modal:!1,alwaysOnTop:!0});t.show(),t.setPosition(800,80),e.loadNetzkeComponent({name:"document_notes",params:{component_params:{document_id:e.record.id}},container:t,callback:function(e){e.show()}})},e);var s=e.up("window");s.on("close",function(){var e=Ext.ComponentQuery.query("#correction_request_window")[0];e&&e.close()},e);var o=Ext.ComponentQuery.query("#gem")[0];o&&o.events.click.isEvent==undefined&&e.displayGemWindow(o,e,e.record.id);var s=e.up("window");s.on("close",function(){var e=Ext.ComponentQuery.query("#gem_window")[0];e&&e.close()},e)}function documentOnApply(e,t){var n=t.down("#super_main"),r=t.down("#validate_all"),i=e.draft_save,s=t.down("#field_signature_not_required");s&&s.value?n&&typeof (n.onValidateAll=="function")&&i==undefined?n.validateIndividualPanels(!0):applyChanges(i,"Your record has been saved.",t):applyChanges(i,"Your record has been saved.",t)}function applyChanges(e,t,n){if(n.fireEvent("apply",n)){var r=[];Ext.each(n.getForm().getFields().items,function(e,t){e.disabled&&(r.push(e),e.setDisabled(!1))},n);var i=n.getForm().getValues();Ext.each(n.query("combo"),function(e,t){i[e.name]==null&&(i[e.name]=null)},n),Ext.each(r,function(e,t){if(e.xtype=="radiofield"&&i[e.name]==null)i[e.name]=null;else if(e.xtype=="radiogroup"){var n=e.down("radiofield");n&&(i[n.name]=n.getGroupValue())}else(e.xtype=="netzkeremotecombo"||e.xtype=="combo")&&i[e.name]==null&&(i[e.name]=null)},n);for(var s in i){var o=n.getForm().findField(s);(!o||o.disabled)&&delete i[s],o&&o.name.indexOf("__")!==-1&&(o.readOnly||!o.isXType("combobox"))&&!o.nestedAttribute&&delete i[s],o.isXType("displayfield")&&delete i[s],o.displayOnly&&delete i[s]}if(n.signDateAndPasswordRequired){var u=n.up("window"),a=u.down("#sign_date"),f=u.down("#sign_password");i.signature_date=a.value,i.sign_password=f.value}i.draft_save=e==1,n.fileUpload?n.getForm().submit({url:n.endpointUrl("netzke_submit"),params:{data:Ext.encode(i)},failure:function(e,t){try{var i=Ext.decode(t.response.responseText);delete i.success,n.bulkExecute(i),n.fireEvent("submitsuccess"),Ext.each(r,function(e,t){e.setDisabled(!0)},n)}catch(s){Ext.Msg.alert("File upload error",t.response.responseText)}n.applyMaskCmp&&n.applyMaskCmp.hide()},success:function(e,t){try{var r=Ext.decode(t.response.responseText);delete r.success,n.bulkExecute(r),n.fireEvent("submitsuccess")}catch(i){Ext.Msg.alert("File upload error",t.response.responseText)}n.applyMaskCmp&&n.applyMaskCmp.hide()},scope:n}):n.netzkeSubmit(Ext.apply(n.baseParams||{},{data:Ext.encode(i)}),function(e){e==1?(n.mode=="lockable"&&n.setReadonlyMode(!0),n.saveAndPrint?(n.saveAndPrint=!1,n.viewReport({record_id:n.record.id})):n.notifyOnSave==undefined||n.notifyOnSave==1?Ext.MessageBox.alert("Success",t,function(){n.fireEvent("submitsuccess")},n):n.fireEvent("submitsuccess")):Ext.each(r,function(e,t){e.setDisabled(!0)},n),n.applyMaskCmp&&n.applyMaskCmp.hide()},n)}n.fireEvent("afterApply",n)}function registerOasisFormEvents(e){var t=Ext.ComponentQuery.query("#super_main")[0],n=t.up("window");e.title=n.title,e.correctionNumber!=0&&(e.title=e.title+" Correction: "+e.correctionNumber+" "),n.down("#card-prev").on("click",function(){n.down("#item_chooser").select(comboPreviousItem(n.down("#item_chooser"))),n.down("#item_chooser").fireEvent("select",n.down("#item_chooser"))},e),n.down("#card-next").on("click",function(){var t=n.down("#item_chooser").getRawValue();if(e.asstDateConditionRequired&&n.down("#item_chooser").getValue()>2){var r=Ext.ComponentQuery.query("[name=m0090_info_completed_dt]")[0];r.value==null||r.value==""||r.isValid()==0?(n.down("#item_chooser").select(n.down("#item_chooser").store.getAt(2)),Ext.MessageBox.alert("Message","Please enter the assessment completed date in 'M0090'.")):(n.down("#item_chooser").select(comboNextItem(n.down("#item_chooser"))),n.down("#item_chooser").fireEvent("select",n.down("#item_chooser")))}else n.down("#item_chooser").select(comboNextItem(n.down("#item_chooser"))),n.down("#item_chooser").fireEvent("select",n.down("#item_chooser"))},e),n.down("#item_chooser").on("select",function(r){dummyRequest();var i=n.down("#item_chooser").getRawValue();if(e.asstDateConditionRequired&&r.value>2){var s=Ext.ComponentQuery.query("[name=m0090_info_completed_dt]")[0];s.value==null||s.value==""?(r.select(r.store.getAt(2)),t.down("#main").getLayout().setActiveItem(2),n.setTitle(e.title+"[Clinical Record Items1 (M0080 - M0090)]"),Ext.MessageBox.alert("Message","Please enter the assessment completed date in 'M0090'.")):changeActivePanel(r,e)}else changeActivePanel(r,e)},e);var r=e.query("textfield, textarea, datefield, numberfield, checkboxgroup, radiogroup, label");Ext.each(r,function(e,t){e.isHeader!=0&&e.addCls("oasis_heading")},e),Ext.defer(function(){e.up("window").down("#item_chooser").setReadOnly(!1)},1e3,e);var i=e.down("#extended_oasis_check");i&&i.on("change",function(t){resetComboItemsAndValue(t,e)},e),e.docIsInInitDraft||makePocPagesReadOnlyIfRequired(e)}function onPopulateValidSample(e){e.setLoading(!0),Ext.MessageBox.prompt("OASIS","Please enter HIPPS CODE:",function(t,n){t=="ok"?n.match(/[12345]{1}[ABC]{1}[FGH]{1}[KLMNP]{1}[STUVWX]{1}/)?e.getOasisSampleFormValues({hipps_code:n},function(t){var n=t[0],r=t[1];Ext.each(n,function(t,n){var i=e.down("[name="+t+"]");i&&(t.indexOf("_icd")==-1||i.xtype!="combo"&&i.xtype!="netzkeremotecombo"?i.setValue(r[n]):(i.store.load({params:{query:r[n]}}),i.setValue(r[n])))},e),e.setLoading(!1)},e):(Ext.MessageBox.alert("Status","HIPPS Code is invalid."),e.setLoading(!1)):e.setLoading(!0)},e)}function onValidate(e,t){var n=e.down("#main").getLayout().getActiveItem();if(typeof n.onValidate=="function"){var r=n.onValidate(e),i=getServerSideValidationFields(n,e),s=e.up("window").down("[name=m0100_assmt_reason]").value,o=e.up("window").down("[name=treatment_episode_id]"),u=null;o&&(u=o.value),i[0].length>0?e.checkServerValidationForFields({fields:i[0],values:i[1],suffixes:i[2],doc_type:s,episode_id:u},function(i){r=r.concat(i),errorsDisplay(r,n,e,t)},e):errorsDisplay(r,n,e,t)}else Ext.MessageBox.alert("Information","No Errors Found")}function errorsDisplay(e,t,n,r){e.length==0?Ext.MessageBox.alert("Information","No Errors Found"):(Ext.each(e,function(n,r){e[r].push(t.name.split("_").reverse()[0])},n),n.launchErrorsGrid([e,e.length,r]))}function getServerSideValidationFields(e,t){var n=[],r=[],i=[];return typeof e.serverValidationRequiredFields=="function"&&(n=e.serverValidationRequiredFields(),typeof e.serverValidationRequiredFieldsSuffix=="function"&&(i=e.serverValidationRequiredFieldsSuffix()),Ext.each(n,function(e,n){var i=t.down("[name="+e+"]"),s=i.value;if(s==null||s==undefined)s=i.rawValue;r.push(s)},t)),[n,r,i]}function getPanelHavingValidateMethod(e,t){if(e.name.indexOf("panel_")!=0)return null;var n=e.query("panel"),r=null;return Ext.each(n,function(e,t){typeof e.onValidate=="function"&&(r=e)},t),r}function validateIndividualPanels(e,t,n,r){var i=[],s=[[],[],[],[]];Ext.each(t.down("#main").items.items,function(e){var n=e;n&&(individual_panel_fields=getServerSideValidationFields(n,t),s[0]=s[0].concat(individual_panel_fields[0]),s[1]=s[1].concat(individual_panel_fields[1]),s[2]=s[2].concat(individual_panel_fields[2]),Ext.each(individual_panel_fields[0],function(t,n){s[3].push(e.name.split("_").reverse()[0])},t))},t);var o=t.up("window").down("[name=m0100_assmt_reason]").value,u=t.up("window").down("[name=treatment_episode_id]"),a=null;u&&(a=u.value),t.checkServerValidationForFields({fields:s[0],values:s[1],suffixes:s[2],panel_numbers:s[3],doc_type:o,episode_id:a},function(s){i=i.concat(s);var o=t.down("#main").items.items;Ext.each(o,function(e){var n=e;if(n&&typeof n.onValidate=="function"){var r=n.onValidate(t);Ext.each(r,function(t,n){r[n].push(e.name.split("_").reverse()[0])},t),i=i.concat(r)}},t),t.down("#valid").setValue(i.length===0);if(i.length==0)if(e){var u="",a=t.up("window"),f=a.items.first();f.documentIsInDraftStatus==1?u="Your document has been submitted for QA.":u="Your record has been saved.",applyChanges(!1,u,f)}else r==1?t.launchErrorsGrid([i,i.length,n,r]):Ext.MessageBox.alert("Information","No Errors Found");else t.launchErrorsGrid([i,i.length,n,r])},t)}function launchErrorsGrid(e,t){var n=new Ext.data.ArrayStore({fields:[{name:"field"},{name:"msg"},{name:"panel_num"}]});n.loadData(e[0]);var r=new Ext.grid.GridPanel({header:!1,border:!1,modal:!0,itemId:"errors_grid",flex:1,split:!0,columns:[{id:"field",header:"Field Name",width:80,sortable:!0,dataIndex:"field"},{id:"msg",header:"Error Message",flex:1,sortable:!0,dataIndex:"msg",tdCls:"wrap"},{id:"panel_num",header:"Panel Num",hidden:!0,dataIndex:"panel_num"}],store:n,layout:"fit",autoScroll:!0});r.on("itemdblclick",function(e,n){var i=t.up("window");i.down("#item_chooser").setValue(parseInt(n.get("panel_num"))),i.down("#item_chooser").fireEvent("select",i.down("#item_chooser")),r.up("window").close()},t);var i=t.up("window"),s=i.items.first();if(s.isDirty())var o=s.getForm().getValues();s.getForm().getFields().each(function(e){e.resetOriginalValue()});var u=t.up("window").down("[name=treatment_episode_id]"),a=null;u&&(a=u.value);if(e[2]==1&&e[3]==1){var f=new Ext.window.Window({width:"70%",height:"80%",modal:!0,header:!0,itemId:"hhrg",layout:{type:"vbox",align:"stretch"},buttons:[{text:"",tooltip:"OK",iconCls:"cancel_icon",listeners:{click:function(){f.close()}}}],listeners:{afterRender:function(e){errorsGrid=Ext.ComponentQuery.query("#errors_grid")[0],gridHeight=e.getHeight()-276,errorsGrid.setHeight(gridHeight)}}});f.show(),t.loadNetzkeComponent({name:"hipps_grouper_chart",params:{component_params:{values:o,episode_id:a}},container:f,callback:function(e){e.add(r)}},t)}else{var f=new Ext.window.Window({width:"60%",height:"60%",modal:!0,layout:"fit",items:r,buttons:[{text:"",tooltip:"OK",iconCls:"cancel_icon",listeners:{click:function(){f.close()}}}],title:"Errors - No. of errors: "+e[1]});f.show()}}function dummyRequest(){Ext.Ajax.request({async:!1,url:"/welcome/switching_tabs",method:"GET"})}function makePocPagesReadOnlyIfRequired(e){if(e.pocFieldsReadOnly){var t=e.query("panel");Ext.each(t,function(t,n){if(t.pocPage){var r=t.query("slider, textfield, textarea, datefield, numberfield,checkboxfield, radiofield, checkboxgroup, radiogroup");Ext.each(r,function(t,n){t.setReadOnly(e.pocFieldsReadOnly)},e)}},e)}else if(e.pocFieldsReadOnly==0){var t=e.query("panel");Ext.each(t,function(t,n){if(t.oasisPage){var r=t.query("slider, textfield, textarea, datefield, numberfield,checkboxfield, radiofield, checkboxgroup, radiogroup");Ext.each(r,function(t,n){t.setReadOnly(!e.pocFieldsReadOnly)},e)}},e)}}function resetComboItemsAndValue(e,t){var n=t.up("window").down("#item_chooser"),r=comboCurrentIndex(n),i=n.store.getAt(r).raw[1],s=i.split(" ");s=s.join(""),s=s.replace(/\//,"","gi"),s=s.toLowerCase();var o=t.pageListPosition[s];n.store.removeAll(),e.value?(o=o[1],n.store.add(t.extendedOasisPageList)):(o=o[0],n.store.add(t.normalOasisPageList)),n.setValue(n.store.getAt(o)),n.fireEvent("select",n)}function comboNextItem(e){var t=e.getStore(),n=comboCurrentIndex(e)+1;return t.getAt(n)}function comboPreviousItem(e){var t=e.getStore(),n=comboCurrentIndex(e)-1;return t.getAt(n)}function comboCurrentIndex(e){var t=e.getStore(),n=e.getValue();return t.find(e.valueField,n)}function changeActivePanel(e,t){var n=Ext.ComponentQuery.query("#super_main")[0],r=n.up("window");n.down("#main").getLayout().setActiveItem(e.value),r.setTitle(t.title+"["+e.getRawValue()+"]"),comboCurrentIndex(e)==e.store.count()-1?r.down("#card-next").disable():r.down("#card-next").enable(),e.value==0?r.down("#card-prev").disable():r.down("#card-prev").enable()}function skipHasPageSignin(){var e=!1,t=window.location.href.split("/"),n=t[t.length-1];if(n=="signin"||n=="multiple_tab.html")e=!0;return e}function currentNumberOfTabs(){var e=0,t=document.cookie;return $.each(t.split(/; */),function(){var t=this.split("=");t[0]=="numberOfTabs"&&(e=t[1])}),parseInt(e)}function tE(e,t){g=Ext.ComponentQuery.query("#episodes_list")[0],g.selectTreatmentAndEvent({episode_id:e,event_name:t},function(){var n;console.log("event_name"+t),t=="recertification"?activityFormLoading("recertification_form",g):(t=="unhold"||t=="discharge"||t=="hold")&&activityFormLoading("treatment_activity_form",g),t=="undo"&&g.undoTreatment({episode_id:e,event_name:t},function(){g.store.load()},g)},g)}function activityFormLoading(e,t){t.loadNetzkeComponent({name:e,callback:function(e){e.show(),e.on("close",function(){e.closeRes==="ok"&&t.store.load()},t)},scope:t})}function tR(e,t){g=Ext.ComponentQuery.query("#episodes_list")[0];if(t=="mark_as_referral_received"){var n=new Ext.window.Window({width:"25%",height:"18%",modal:!0,layout:"fit",buttons:[{text:"",tooltip:"OK",iconCls:"ok_icon",listeners:{click:function(){g.sendUpdatedReferralReceivedDate(n,e)}}},{text:"",tooltip:"Cancel",iconCls:"cancel_icon",listeners:{click:function(){n.close()}}}],title:"Referral Received Date"});n.show(),g.loadNetzkeComponent({name:"date_component",container:n,callback:function(e){e.show()}})}else if(t=="admit"){var n=new Ext.window.Window({width:"25%",height:"18%",modal:!0,layout:"fit",buttons:[{text:"",tooltip:"OK",iconCls:"ok_icon",listeners:{click:function(){g.setStartOfCareDate(n,e)}}},{text:"",tooltip:"Cancel",iconCls:"cancel_icon",listeners:{click:function(){n.close()}}}],title:"SOC Date"});n.show(),g.loadNetzkeComponent({name:"soc_date_component",container:n,callback:function(e){e.show()}})}else t=="finalize_staffing"?(Ext.MessageBox.alert("Success","Your staffing has been finalized."),g.triggerReferralEvent({record_id:e,action:t})):g.triggerReferralEvent({record_id:e,action:t})}function cookieExist(e){var t=!1,n=document.cookie;return $.each(n.split(/; */),function(){var n=this.split("=");n[0]==e&&(t=!0)}),t}function registerVisitedEventHandlers(e,t){e.on("afterrender",function(){Ext.each(t,function(e,t){var n=Ext.ComponentQuery.query(e)[0],r=n.tools.pin;r.on("click",function(){n.header.addCls("visited")}),elements=n.query("textfield, textarea, combobox, radiofield, checkboxfield, slider"),Ext.each(elements,function(e,t){e.on("change",function(){n.header.addCls("visited")})})})})}function registerContentChangeEventHandlers(e,t){Ext.each(t,function(e,t){var n=e.query("textarea");Ext.each(n,function(t,n){t.on("change",function(){var n=t.up().query("textarea"),r=!1;for(var i=0;i<n.length;i++)if(n[i].getValue()!=""){r=!0;break}r?e.addCls("non-empty"):e.removeCls("non-empty")})})})}function assignTotalScore(){var e=0,t=0,n=0,r=Ext.ComponentQuery.query("#balance_panel")[0],i=r.query("radiogroup");e=getScore(i);var s=Ext.ComponentQuery.query("#gait_panel")[0],i=s.query("radiogroup");t=getScore(i),n=e+t,Ext.ComponentQuery.query("#balance_score")[0].setValue(e),Ext.ComponentQuery.query("#gait_score")[0].setValue(t),Ext.ComponentQuery.query("#total_score")[0].setValue(n)}function getScore(e){var t=0;return Ext.each(e,function(e,n){radioButtons=e.query("radiofield"),Ext.each(radioButtons,function(e,n){e.value&&(t+=parseInt(e.score))})}),t}function copyTextToTextarea(e,t){var n=Ext.ComponentQuery.query("#free_form_template_details")[0];t.value?t.setValue(t.value+"\n"+n.value):t.setValue(n.value),e.close()}function freeFormTemplateWindowEvents(e){var t=Ext.ComponentQuery.query("textarea, textfield");Ext.each(t,function(t,n){if(e.freeFormTemplate==undefined||e.freeFormTemplate==1)t.enableKeyEvents=!0,Ext.QuickTips.register({target:t.getEl(),text:"Press F2 to select from existing template",dismissDelay:1e6}),t.on("keydown",function(n,r,i){if(r.keyCode==113){e.selectTemplateCategory({template_category:t.filter});var s=new Ext.window.Window({width:800,height:400,modal:!0,layout:"fit",buttons:[{text:"Ok",listeners:{click:function(){copyTextToTextarea(s,t)}}},{text:"Cancel",listeners:{click:function(){s.close()}}}],title:"Templates"});s.show(),e.loadNetzkeComponent({name:"free_form_template_explorer_component",container:s,callback:function(e){e.show()}})}})})}function createWoundPanel(e,t,n){var r=new Ext.Panel(t);r.title="Wound Description "+n,r.itemId="wound_description_"+n,r.hidden=!1;var i=r.query("textfield, numberfield, radiofield, datefield, timefield");Ext.each(i,function(e,t){e.name=e.name+n}),e.add(r)}function enableDisableActions(e,t,n){Ext.each(e,function(e){n.actions[e].setDisabled(t)})}function findChild(e,t){function r(e){var i=e.childNodes;for(var s=0;s<i.length;s++){var o=i[s];if(o.raw.text.indexOf(t)!=-1){n=o;break}o.isLeaf()==0&&(o.expand(),r(o,t))}}var n=null;return r(e),n}function getTreeNode(e,t,n){var r=e.getRootNode(),i=null;return n!=""?(i=findChild(r,n),i&&(i=findChild(i,t))):i=findChild(r,t),i}function formattedAmount(e){return Ext.util.Format.usMoney(e)}function isNumberKey(e){var t=e.which?e.which:event.keyCode;return t>31&&(t<48||t>57)?!1:!0}(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Gt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){
return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":e.toString().replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||s.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return typeof e=="object"?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length||!r)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||++v.uuid:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")===0&&(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>-1)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p=(v._data(this,"events")||{})[n.type]||[],d=p.delegateCount,m=[].slice.call(arguments),g=!n.exclusive&&!n.namespace,y=v.event.special[n.type]||{},b=[];m[0]=n,n.delegateTarget=this;if(y.preDispatch&&y.preDispatch.call(this,n)===!1)return;if(d&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<d;r++)l=p[r],c=l.selector,u[c]===t&&(u[c]=v(c,this).index(s)>=0),u[c]&&f.push(l);f.length&&b.push({elem:s,matches:f})}p.length>d&&b.push({elem:this,matches:p.slice(d)});for(r=0;r<b.length&&!n.isPropagationStopped();r++){a=b[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){l=a.matches[i];if(g||!n.namespace&&!l.namespace||n.namespace_re&&n.namespace_re.test(l.namespace))n.data=l.data,n.handleObj=l,o=((v.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,m),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return y.postDispatch&&y.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu"
.split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function Y(e,t,n,r){n=n||[],t=t||m;var i,s,o,f,l=t.nodeType;if(l!==1&&l!==9)return[];if(!e||typeof e!="string")return n;o=u(t);if(!o&&!r)if(i=j.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&a(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return w.apply(n,b.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&K&&t.getElementsByClassName)return w.apply(n,b.call(t.getElementsByClassName(f),0)),n}return lt(e,t,n,r,o)}function Z(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function et(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function tt(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function nt(e,t,n,r){var i,o,u,a,f,l,c,h,p,v,g=!n&&t!==m,y=(g?"<s>":"")+e.replace(D,"$1<s>"),w=T[d][y];if(w)return r?0:b.call(w,0);f=e,l=[],h=0,p=s.preFilter,v=s.filter;while(f){if(!i||(o=P.exec(f)))o&&(f=f.slice(o[0].length),u.selector=c),l.push(u=[]),c="",g&&(f=" "+f);i=!1;if(o=H.exec(f))c+=o[0],f=f.slice(o[0].length),i=u.push({part:o.pop().replace(D," "),string:o[0],captures:o});for(a in v)(o=W[a].exec(f))&&(!p[a]||(o=p[a](o,t,n)))&&(c+=o[0],f=f.slice(o[0].length),i=u.push({part:a,string:o.shift(),captures:o}));if(!i)break}return c&&(u.selector=c),r?f.length:f?Y.error(e):b.call(T(y,l),0)}function rt(e,t,i,s){var o=t.dir,u=y++;return e||(e=function(e){return e===i}),t.first?function(t){while(t=t[o])if(t.nodeType===1)return e(t)&&t}:s?function(t){while(t=t[o])if(t.nodeType===1&&e(t))return t}:function(t){var i,s=u+"."+n,a=s+"."+r;while(t=t[o])if(t.nodeType===1){if((i=t[d])===a)return t.sizset;if(typeof i=="string"&&i.indexOf(s)===0){if(t.sizset)return t}else{t[d]=a;if(e(t))return t.sizset=!0,t;t.sizset=!1}}}}function it(e,t){return e?function(n){var r=t(n);return r&&e(r===!0?n:r)}:t}function st(e,t,n){var r,i,o=0;for(;r=e[o];o++)s.relative[r.part]?i=rt(i,s.relative[r.part],t,n):i=it(i,s.filter[r.part].apply(null,r.captures.concat(t,n)));return i}function ot(e){return function(t){var n,r=0;for(;n=e[r];r++)if(n(t))return!0;return!1}}function ut(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)Y(e,t[i],n,r)}function at(e,t,n,r,i,o){var u,a=s.setFilters[t.toLowerCase()];return a||Y.error(t),(e||!(u=i))&&ut(e||"*",r,u=[],i),u.length>0?a(u,n,o):[]}function ft(e,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m,g,y=0,b=e.length,E=W.POS,S=new RegExp("^"+E.source+"(?!"+C+")","i"),x=function(){var e=1,n=arguments.length-2;for(;e<n;e++)arguments[e]===t&&(p[e]=t)};for(;y<b;y++){s=e[y],o="",h=i;for(u=0,a=s.length;u<a;u++){f=s[u],l=f.string;if(f.part==="PSEUDO"){E.exec(""),c=0;while(p=E.exec(l)){d=!0,v=E.lastIndex=p.index+p[0].length;if(v>c){o+=l.slice(c,p.index),c=v,m=[n],H.test(o)&&(h&&(m=h),h=i);if(g=q.test(o))o=o.slice(0,-5).replace(H,"$&*"),c++;p.length>1&&p[0].replace(S,x),h=at(o,p[1],p[2],m,h,g)}o=""}}d||(o+=l),d=!1}o?H.test(o)?ut(o,h||[n],r,i):Y(o,n,r,i?i.concat(h):h):w.apply(r,h)}return b===1?r:Y.uniqueSort(r)}function lt(e,t,i,o,u){e=e.replace(D,"$1");var a,l,c,h,p,d,v,m,g,y,E=nt(e,t,u),S=t.nodeType;if(W.POS.test(e))return ft(E,t,i,o);if(o)a=b.call(o,0);else if(E.length===1){if((d=b.call(E[0],0)).length>2&&(v=d[0]).part==="ID"&&S===9&&!u&&s.relative[d[1].part]){t=s.find.ID(v.captures[0].replace(z,""),t,u)[0];if(!t)return i;e=e.slice(d.shift().string.length)}g=(E=I.exec(d[0].string))&&!E.index&&t.parentNode||t,m="";for(p=d.length-1;p>=0;p--){v=d[p],y=v.part,m=v.string+m;if(s.relative[y])break;if(s.order.test(y)){a=s.find[y](v.captures[0].replace(z,""),g,u);if(a==null)continue;e=e.slice(0,e.length-m.length)+m.replace(W[y],""),e||w.apply(i,b.call(a,0));break}}}if(e){l=f(e,t,u),n=l.dirruns++,a==null&&(a=s.find.TAG("*",I.test(e)&&t.parentNode||t));for(p=0;h=a[p];p++)r=l.runs++,l(h)&&i.push(h)}return i}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=e.document,g=m.documentElement,y=0,b=[].slice,w=[].push,E=function(e,t){return e[d]=t||!0,e},S=function(){var e={},t=[];return E(function(n,r){return t.push(n)>s.cacheLength&&delete e[t.shift()],e[n]=r},e)},x=S(),T=S(),N=S(),C="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",L=k.replace("w","w#"),A="([*^$|!~]?=)",O="\\["+C+"*("+k+")"+C+"*(?:"+A+C+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+L+")|)|)"+C+"*\\]",M=":("+k+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+O+")|[^:]|\\\\.)*|.*))\\)|)",_=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",D=new RegExp("^"+C+"+|((?:^|[^\\\\])(?:\\\\.)*)"+C+"+$","g"),P=new RegExp("^"+C+"*,"+C+"*"),H=new RegExp("^"+C+"*([\\x20\\t\\r\\n\\f>+~])"+C+"*"),B=new RegExp(M),j=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,F=/^:not/,I=/[\x20\t\r\n\f]*[+~]/,q=/:not\($/,R=/h\d/i,U=/input|select|textarea|button/i,z=/\\(?!\\)/g,W={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),NAME:new RegExp("^\\[name=['\"]?("+k+")['\"]?\\]"),TAG:new RegExp("^("+k.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+C+"*(even|odd|(([+-]|)(\\d*)n|)"+C+"*(?:([+-]|)"+C+"*(\\d+)|))"+C+"*\\)|)","i"),POS:new RegExp(_,"ig"),needsContext:new RegExp("^"+C+"*[>+~]|"+_,"i")},X=function(e){var t=m.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},V=X(function(e){return e.appendChild(m.createComment("")),!e.getElementsByTagName("*").length}),$=X(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),J=X(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),K=X(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),Q=X(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",g.insertBefore(e,g.firstChild);var t=m.getElementsByName&&m.getElementsByName(d).length===2+m.getElementsByName(d+0).length;return i=!m.getElementById(d),g.removeChild(e),t});try{b.call(g.childNodes,0)[0].nodeType}catch(G){b=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}Y.matches=function(e,t){return Y(e,null,null,t)},Y.matchesSelector=function(e,t){return Y(t,null,null,[e]).length>0},o=Y.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},u=Y.isXML=function(t){var n=t&&(t.ownerDocument||t).documentElement;return n?n.nodeName!=="HTML":!1},a=Y.contains=g.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:g.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},Y.attr=function(e,t){var n,r=u(e);return r||(t=t.toLowerCase()),s.attrHandle[t]?s.attrHandle[t](e):J||r?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},s=Y.selectors={cacheLength:50,createPseudo:E,match:W,order:new RegExp("ID|TAG"+(Q?"|NAME":"")+(K?"|CLASS":"")),attrHandle:$?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:i?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:V?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(z,""),e[3]=(e[4]||e[5]||"").replace(z,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||Y.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&Y.error(e[0]),e},PSEUDO:function(e,t,n){var r,i;if(W.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(r=e[4])B.test(r)&&(i=nt(r,t,n,!0))&&(i=r.indexOf(")",r.length-i)-r.length)&&(r=r.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=r;return e.slice(0,3)}},filter:{ID:i?function(e){return e=e.replace(z,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(z,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(z,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=x[d][e];return t||(t=x(e,new RegExp("(^|"+C+")"+e+"("+C+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return t?function(r){var i=Y.attr(r,e),s=i+"";if(i==null)return t==="!=";switch(t){case"=":return s===n;case"!=":return s!==n;case"^=":return n&&s.indexOf(n)===0;case"*=":return n&&s.indexOf(n)>-1;case"$=":return n&&s.substr(s.length-n.length)===n;case"~=":return(" "+s+" ").indexOf(n)>-1;case"|=":return s===n||s.substr(0,n.length+1)===n+"-"}}:function(t){return Y.attr(t,e)!=null}},CHILD:function(e,t,n,r){if(e==="nth"){var i=y++;return function(e){var t,s,o=0,u=e;if(n===1&&r===0)return!0;t=e.parentNode;if(t&&(t[d]!==i||!e.sizset)){for(u=t.firstChild;u;u=u.nextSibling)if(u.nodeType===1){u.sizset=++o;if(u===e)break}t[d]=i}return s=e.sizset-r,n===0?s===0:s%n===0&&s/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t,n,r){var i,o=s.pseudos[e]||s.pseudos[e.toLowerCase()];return o||Y.error("unsupported pseudo: "+e),o[d]?o(t,n,r):o.length>1?(i=[e,e,"",t],function(e){return o(e,0,i)}):o}},pseudos:{not:E(function(e,t,n){var r=f(e.replace(D,"$1"),t,n);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!s.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},contains:E(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),has:E(function(e){return function(t){return Y(e,t).length>0}}),header:function(e){return R.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:Z("radio"),checkbox:Z("checkbox"),file:Z("file"),password:Z("password"),image:Z("image"),submit:et("submit"),reset:et("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return U.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]},last:function(e,t,n){var r=e.pop();return n?e:[r]},even:function(e,t,n){var r=[],i=n?1:0,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},odd:function(e,t,n){var r=[],i=n?0:1,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var r=e.splice(+t,1);return n?e:r}}},l=g.compareDocumentPosition?function(e,t){return e===t?(c=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return c=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return tt(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return tt(i[f],s[f]);return f===n?tt(e,s[f],-1):tt(i[f],t,1)},[0,0].sort(l),h=!c,Y.uniqueSort=function(e){var t,n=1;c=h,e.sort(l);if(c)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},Y.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},f=Y.compile=function(e,t,n){var r,i,s,o=N[d][e];if(o&&o.context===t)return o;r=nt(e,t,n);for(i=0,s=r.length;i<s;i++)r[i]=st(r[i],t,n);return o=N(e,ot(r)),o.context=t,o.runs=o.dirruns=0,o},m.querySelectorAll&&function(){var e,t=lt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[],s=[":active"],o=g.matchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.oMatchesSelector||g.msMatchesSelector;X(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+C+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),X(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+C+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=i.length&&new RegExp(i.join("|")),lt=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e)))if(r.nodeType===9)try{return w.apply(s,b.call(r.querySelectorAll(e),0)),s}catch(a){}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f,l,c,h=r.getAttribute("id"),p=h||d,v=I.test(e)&&r.parentNode||r;h?p=p.replace(n,"\\$&"):r.setAttribute("id",p),f=nt(e,r,u),p="[id='"+p+"']";for(l=0,c=f.length;l<c;l++)f[l]=p+f[l].selector;try{return w.apply(s,b.call(v.querySelectorAll(f.join(",")),0)),s}catch(a){}finally{h||r.removeAttribute("id")}}return t(e,r,s,o,u)},o&&(X(function(t){e=o.call(t,"div");try{o.call(t,"[test!='']:sizzle"),s.push(W.PSEUDO.source,W.POS.source,"!=")}catch(n){}}),s=new RegExp(s.join("|")),Y.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!u(t)&&!s.test(n)&&(!i||!i.test(n)))try{var a=o.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return Y(n,null,null,[t]).length>0})}(),s.setFilters.nth=s.setFilters.eq,s.filters=s.pseudos,Y.attr=v.attr,v.find=Y,v.expr=Y.selectors,v.expr[":"]=v.expr.pseudos,v.unique=Y.uniqueSort,v.text=Y.getText,v.isXMLDoc=Y.isXML,v.contains=Y.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this
.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{ln=s.href}catch(Nn){ln=i.createElement("a"),ln.href="",ln=ln.href}cn=wn.exec(ln.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:ln,isLocal:dn.test(cn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=""+(n||T),l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,cn[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]==cn[1]&&a[2]==cn[2]&&(a[3]||(a[1]==="http:"?80:443))==(cn[3]||(cn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i,s=this.createTween(e,t),o=zn.exec(t),u=s.cur(),a=+u||0,f=1;if(o){n=+o[2],r=o[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&a){a=v.css(s.elem,e,!0)||n||1;do i=f=f||".5",a/=f,v.style(s.elem,e,a+r),f=s.cur()/u;while(f!==1&&f!==i)}s.unit=r,s.start=a,s.end=o[1]?a+(o[1]+1)*n:n}return s}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f,l,c,h=this[0],p=h&&h.ownerDocument;if(!p)return;return(i=p.body)===h?v.offset.bodyOffset(h):(r=p.documentElement,v.contains(r,h)?(n=h.getBoundingClientRect(),s=tr(p),o=r.clientTop||i.clientTop||0,u=r.clientLeft||i.clientLeft||0,a=s.pageYOffset||r.scrollTop,f=s.pageXOffset||r.scrollLeft,l=n.top+a-o,c=n.left+f-u,{top:l,left:c}):{top:0,left:0})},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val();if(!o==!r){if(s.is(":radio")&&a.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),function(e,t,n){function i(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,u,a){if(u!==n){a=e.extend({},o.defaults,a),u===null&&(a.expires=-1);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return u=o.json?JSON.stringify(u):String(u),t.cookie=[encodeURIComponent(r),"=",o.raw?u:encodeURIComponent(u),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=o.raw?i:s,h=t.cookie.split("; ");for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");if(c(v.shift())===r){var m=c(v.join("="));return o.json?JSON.parse(m):m}}return null};o.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document);var jstz=function(){"use strict";var e="s",t=function(e){var t=-e.getTimezoneOffset();return t!==null?t:0},n=function(){return t(new Date(2010,0,1,0,0,0,0))},r=function(){return t(new Date(2010,5,1,0,0,0,0))},i=function(e){var i=e.getMonth()>5?r():n(),s=t(e);return i-s!==0},s=function(){var t=n(),i=r(),s=n()-r();return s<0?t+",1":s>0?i+",1,"+e:t+",0"},o=function(){var e=s();return new jstz.TimeZone(jstz.olson.timezones[e])};return{determine_timezone:function(){return typeof console!="undefined"&&console.log("jstz.determine_timezone() is deprecated and will be removed in an upcoming version. Please use jstz.determine() instead."),o()},determine:o,date_is_dst:i}}();jstz.TimeZone=function(e){"use strict";var t=null,n=function(){return t},r=function(){var e=jstz.olson.ambiguity_list[t],n=e.length,r=0,i=e[0];for(;r<n;r+=1){i=e[r];if(jstz.date_is_dst(jstz.olson.dst_start_dates[i])){t=i;return}}},i=function(){return typeof jstz.olson.ambiguity_list[t]!="undefined"};return t=e,i()&&r(),{name:n}},jstz.olson={},jstz.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},jstz.olson.dst_start_dates={"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"Atlantic/Stanley":new Date(2011,8,4,7,0,0,0),"America/Asuncion":new Date(2011,9,2,3,0,0,0),"America/Santiago":new Date(2011,9,9,3,0,0,0),"America/Campo_Grande":new Date(2011,9,16,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2011,2,13,2,0,0,0),"America/New_York":new Date(2011,2,13,7,0,0,0),"Asia/Gaza":new Date(2011,2,26,23,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Minsk":new Date(2011,2,27,2,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Africa/Cairo":new Date(2010,3,30,4,0,0,0),"Asia/Yerevan":new Date(2011,2,27,4,0,0,0),"Asia/Baku":new Date(2011,2,27,8,0,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0)},jstz.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Asuncion":["Atlantic/Stanley","America/Asuncion","America/Santiago","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Gaza","Asia/Beirut","Europe/Minsk","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Africa/Cairo"],"Asia/Yerevan":["Asia/Yerevan","Asia/Baku"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"]},function(){window.BrowserTZone||(window.BrowserTZone={}),BrowserTZone.setCookie=function(){return $.cookie("browser.timezone",jstz.determine().name(),{expires:365,path:"/"})},jQuery(function(){return BrowserTZone.setCookie()})}.call(this);var Ext=Ext||{};Ext._startTime=(new Date).getTime(),function(){var e=this,t=Object.prototype,n=t.toString,r=!0,i={toString:1},s=function(){},o=function(){var e=o.caller.caller;return e.$owner.prototype[e.$name].apply(this,arguments)},u,a=/\S/,f,l=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/;Ext.global=e;for(u in i)r=null;r&&(r=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),Ext.enumerables=r,Ext.apply=function(e,t,n){n&&Ext.apply(e,n);if(e&&t&&typeof t=="object"){var i,s,o;for(i in t)e[i]=t[i];if(r)for(s=r.length;s--;)o=r[s],t.hasOwnProperty(o)&&(e[o]=t[o])}return e},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{name:Ext.sandboxName||"Ext",emptyFn:s,identityFn:function(e){return e},emptyString:new String,baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,applyIf:function(e,t){var n;if(e)for(n in t)e[n]===undefined&&(e[n]=t[n]);return e},iterate:function(e,t,n){if(Ext.isEmpty(e))return;n===undefined&&(n=e),Ext.isIterable(e)?Ext.Array.each.call(Ext.Array,e,t,n):Ext.Object.each.call(Ext.Object,e,t,n)}}),Ext.apply(Ext,{extend:function(){var e=t.constructor,n=function(e){for(var t in e){if(!e.hasOwnProperty(t))continue;this[t]=e[t]}};return function(t,r,i){Ext.isObject(r)&&(i=r,r=t,t=i.constructor!==e?i.constructor:function(){r.apply(this,arguments)});var s=function(){},o,u=r.prototype;return s.prototype=u,o=t.prototype=new s,o.constructor=t,t.superclass=u,u.constructor===e&&(u.constructor=r),t.override=function(e){Ext.override(t,e)},o.override=n,o.proto=o,t.override(i),t.extend=function(e){return Ext.extend(t,e)},t}}(),override:function(e,t){if(e.$isClass)e.override(t);else if(typeof e=="function")Ext.apply(e.prototype,t);else{var n=e.self,r,i;if(n&&n.$isClass)for(r in t)t.hasOwnProperty(r)&&(i=t[r],typeof i=="function"&&(i.$name=r,i.$owner=n,i.$previous=e.hasOwnProperty(r)?e[r]:o),e[r]=i);else Ext.apply(e,t)}return e}}),Ext.apply(Ext,{valueFrom:function(e,t,n){return Ext.isEmpty(e,n)?t:e},typeOf:function(e){var t,r;if(e===null)return"null";t=typeof e;if(t==="undefined"||t==="string"||t==="number"||t==="boolean")return t;r=n.call(e);switch(r){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(t==="function")return"function";if(t==="object")return e.nodeType!==undefined?e.nodeType===3?a.test(e.nodeValue)?"textnode":"whitespace":"element":"object"},coerce:function(e,t){var n=Ext.typeOf(e),r=Ext.typeOf(t),i=typeof e=="string";if(n!==r)switch(r){case"string":return String(e);case"number":return Number(e);case"boolean":return i&&(!e||e==="false")?!1:Boolean(e);case"null":return i&&(!e||e==="null")?null:e;case"undefined":return i&&(!e||e==="undefined")?undefined:e;case"date":return i&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(Number(e))}return e},isEmpty:function(e,t){return e===null||e===undefined||(t?!1:e==="")||Ext.isArray(e)&&e.length===0},isArray:"isArray"in Array?Array.isArray:function(e){return n.call(e)==="[object Array]"},isDate:function(e){return n.call(e)==="[object Date]"},isObject:n.call(null)==="[object Object]"?function(e){return e!==null&&e!==undefined&&n.call(e)==="[object Object]"&&e.ownerDocument===undefined}:function(e){return n.call(e)==="[object Object]"},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var t=typeof e;return t==="string"||t==="number"||t==="boolean"},isFunction:typeof document!="undefined"&&typeof document.getElementsByTagName("body")=="function"?function(e){return!!e&&n.call(e)==="[object Function]"}:function(e){return!!e&&typeof e=="function"},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return typeof e=="string"},isBoolean:function(e){return typeof e=="boolean"},isElement:function(e){return e?e.nodeType===1:!1},isTextNode:function(e){return e?e.nodeName==="#text":!1},isDefined:function(e){return typeof e!="undefined"},isIterable:function(e){return!e||typeof e.length!="number"||typeof e=="string"||Ext.isFunction(e)?!1:e.propertyIsEnumerable?e.hasOwnProperty("length")&&!e.propertyIsEnumerable("length")?!0:l.test(n.call(e)):!!e.item}}),Ext.apply(Ext,{clone:function(e){var t,i,s,o,u,a;if(e===null||e===undefined)return e;if(e.nodeType&&e.cloneNode)return e.cloneNode(!0);t=n.call(e);if(t==="[object Date]")return new Date(e.getTime());if(t==="[object Array]"){i=e.length,u=[];while(i--)u[i]=Ext.clone(e[i])}else if(t==="[object Object]"&&e.constructor===Object){u={};for(a in e)u[a]=Ext.clone(e[a]);if(r)for(s=r.length;s--;)o=r[s],e.hasOwnProperty(o)&&(u[o]=e[o])}return u||e},getUniqueGlobalNamespace:function(){var e=this.uniqueGlobalNamespace,t;if(e===undefined){t=0;do e="ExtBox"+ ++t;while(Ext.global[e]!==undefined);Ext.global[e]=Ext,this.uniqueGlobalNamespace=e}return e},functionFactoryCache:{},cacheableFunctionFactory:function(){var e=this,t=Array.prototype.slice.call(arguments),n=e.functionFactoryCache,r,i,s;return Ext.isSandboxed&&(s=t.length,s>0&&(s--,t[s]="var Ext=window."+
Ext.name+";"+t[s])),r=t.join(""),i=n[r],i||(i=Function.prototype.constructor.apply(Function.prototype,t),n[r]=i),i},functionFactory:function(){var e=this,t=Array.prototype.slice.call(arguments),n;return Ext.isSandboxed&&(n=t.length,n>0&&(n--,t[n]="var Ext=window."+Ext.name+";"+t[n])),Function.prototype.constructor.apply(Function.prototype,t)},Logger:{verbose:s,log:s,info:s,warn:s,error:function(e){throw new Error(e)},deprecate:s}}),Ext.type=Ext.typeOf,f=Ext.app,f||(f=Ext.app={}),Ext.apply(f,{namespaces:{},collectNamespaces:function(e){var t=Ext.app.namespaces,n;for(n in e)e.hasOwnProperty(n)&&(t[n]=!0)},addNamespaces:function(e){var t=Ext.app.namespaces,n,r;Ext.isArray(e)||(e=[e]);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(e){var t=Ext.app.namespaces,n="",r;for(r in t)t.hasOwnProperty(r)&&r.length>n.length&&r+"."===e.substring(0,r.length+1)&&(n=r);return n===""?undefined:n}})}(),Ext.globalEval=Ext.global.execScript?function(e){execScript(e)}:function($$code){(function(){var Ext=this.Ext;eval($$code)})()},function(){var e="4.2.2.1144",t=[""],n=/([^\d\.])/,r=/[^\d]/g,i=/[\-+]/g,s=/\s/g,o=/_/g,u;Ext.Version=u=Ext.extend(Object,{isVersion:!0,padModes:{"~":NaN,"^":Infinity},release:"",constructor:function(e,t){var s=this,a=s.padModes,f,l,c,h,p,d,v;if(e.isVersion)return e;s.version=v=String(e).toLowerCase().replace(o,".").replace(i,""),f=v.charAt(0),f in a?(v=v.substring(1),c=a[f]):c=t?a[t]:0,s.pad=c,d=v.search(n),s.shortVersion=v,d!==-1&&(s.release=p=v.substr(d,e.length),s.shortVersion=v.substr(0,d),p=u.releaseValueMap[p]||p),s.releaseValue=p||c,s.shortVersion=s.shortVersion.replace(r,""),s.parts=h=v.split(".");for(l=h.length;l--;)h[l]=parseInt(h[l],10);return c===Infinity&&h.push(c),s.major=h[0]||c,s.minor=h[1]||c,s.patch=h[2]||c,s.build=h[3]||c,s},compareTo:function(e){var t=this,n=t.pad,r=t.parts,i=r.length,s=e.isVersion?e:new u(e),o=s.pad,a=s.parts,f=a.length,l=Math.max(i,f),c,h,p;for(c=0;c<l;c++){h=c<i?r[c]:n,p=c<f?a[c]:o;if(h<p)return-1;if(h>p)return 1}return h=t.releaseValue,p=s.releaseValue,h<p?-1:h>p?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(e){return this.compareTo(e)>0},isGreaterThanOrEqual:function(e){return this.compareTo(e)>=0},isLessThan:function(e){return this.compareTo(e)<0},isLessThanOrEqual:function(e){return this.compareTo(e)<=0},equals:function(e){return this.compareTo(e)===0},match:function(e){return e=String(e),this.version.substr(0,e.length)===e},toArray:function(){var e=this;return[e.getMajor(),e.getMinor(),e.getPatch(),e.getBuild(),e.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(e){return this.compareTo(e)>0},lt:function(e){return this.compareTo(e)<0},gtEq:function(e){return this.compareTo(e)>=0},ltEq:function(e){return this.compareTo(e)<=0}}),Ext.apply(u,{releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(e){return e?isNaN(e)?this.releaseValueMap[e]||e:parseInt(e,10):0},compare:function(e,t){var n=e.isVersion?e:new u(e);return n.compareTo(t)}}),Ext.apply(Ext,{versions:{},lastRegisteredVersion:null,setVersion:function(e,t){return Ext.lastRegisteredVersion=Ext.versions[e]=new u(t),this},getVersion:function(e){return e===undefined?Ext.lastRegisteredVersion:Ext.versions[e]},checkVersion:function(e,n){var r=Ext.isArray(e),i=r?e:t,o=i.length,a=Ext.versions,f=a.ext||a.touch,l,c,h,p,d,v,m,g;r||(t[0]=e);for(l=0;l<o;++l){if(!Ext.isString(v=i[l]))h=Ext.checkVersion(v.and||v.or,!v.or),v.not&&(h=!h);else{v.indexOf(" ")>=0&&(v=v.replace(s,"")),c=v.indexOf("@");if(c<0)m=v,g=f;else{if(!(g=a[v.substring(0,c)])){if(n)return!1;continue}m=v.substring(c+1)}c=m.indexOf("-"),c<0?m.charAt(c=m.length-1)==="+"?(p=m.substring(0,c),d=null):p=d=m:c>0?(p=m.substring(0,c),d=m.substring(c+1)):(p=null,d=m.substring(c+1)),h=!0,p&&(p=new u(p,"~"),h=p.ltEq(g)),h&&d&&(d=new u(d,"~"),h=d.gtEq(g))}if(h){if(!n)return!0}else if(n)return!1}return!!n},deprecate:function(e,t,n,r){u.compare(Ext.getVersion(e),t)<1&&n.call(r)}}),Ext.setVersion("core",e)}(),Ext.String=function(){var e=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,t=/('|\\)/g,n=/\{(\d+)\}/g,r=/([-.*+?\^${}()|\[\]\/\\])/g,i=/^\s+|\s+$/g,s=/\s+/,o=/(^[^a-z]*|[^\w])/gi,u,a,f,l,c=function(e,t){return u[t]},h=function(e,t){return t in a?a[t]:String.fromCharCode(parseInt(t.substr(2),10))},p=function(e,t){return e===null||e===undefined||t===null||t===undefined?!1:t.length<=e.length};return{insert:function(e,t,n){if(!e)return t;if(!t)return e;var r=e.length;return!n&&n!==0&&(n=r),n<0&&(n*=-1,n>=r?n=0:n=r-n),n===0?e=t+e:n>=e.length?e+=t:e=e.substr(0,n)+t+e.substr(n),e},startsWith:function(e,t,n){var r=p(e,t);return r&&(n&&(e=e.toLowerCase(),t=t.toLowerCase()),r=e.lastIndexOf(t,0)===0),r},endsWith:function(e,t,n){var r=p(e,t);return r&&(n&&(e=e.toLowerCase(),t=t.toLowerCase()),r=e.indexOf(t,e.length-t.length)!==-1),r},createVarName:function(e){return e.replace(o,"")},htmlEncode:function(e){return e?String(e).replace(f,c):e},htmlDecode:function(e){return e?String(e).replace(l,h):e},hasHtmlCharacters:function(e){return f.test(e)},addCharacterEntities:function(e){var t=[],n=[],r,i;for(r in e)i=e[r],a[r]=i,u[i]=r,t.push(i),n.push(r);f=new RegExp("("+t.join("|")+")","g"),l=new RegExp("("+n.join("|")+"|&#[0-9]{1,5};"+")","g")},resetCharacterEntities:function(){u={},a={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(e,t){return Ext.isEmpty(t)?e:e+(e.indexOf("?")===-1?"?":"&")+t},trim:function(t){return t.replace(e,"")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.substr(1)},ellipsis:function(e,t,n){if(e&&e.length>t){if(n){var r=e.substr(0,t-2),i=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));if(i!==-1&&i>=t-15)return r.substr(0,i)+"..."}return e.substr(0,t-3)+"..."}return e},escapeRegex:function(e){return e.replace(r,"\\$1")},escape:function(e){return e.replace(t,"\\$1")},toggle:function(e,t,n){return e===t?n:t},leftPad:function(e,t,n){var r=String(e);n=n||" ";while(r.length<t)r=n+r;return r},format:function(e){var t=Ext.Array.toArray(arguments,1);return e.replace(n,function(e,n){return t[n]})},repeat:function(e,t,n){t<1&&(t=0);for(var r=[],i=t;i--;)r.push(e);return r.join(n||"")},splitWords:function(e){return e&&typeof e=="string"?e.replace(i,"").split(s):e||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Number=new function(){var e=this,t=.9.toFixed()!=="1",n=Math;Ext.apply(this,{constrain:function(e,t,n){var r=parseFloat(e);return r<t?t:r>n?n:r},snap:function(t,n,r,i){var s;return t===undefined||t<r?r||0:(n&&(s=t%n,s!==0&&(t-=s,s*2>=n?t+=n:s*2<-n&&(t-=n))),e.constrain(t,r,i))},snapInRange:function(t,n,r,i){var s;return r=r||0,t===undefined||t<r?r:(n&&(s=(t-r)%n)&&(t-=s,s*=2,s>=n&&(t+=n)),i!==undefined&&t>(i=e.snapInRange(i,n,r))&&(t=i),t)},toFixed:t?function(e,t){t=t||0;var r=n.pow(10,t);return(n.round(e*r)/r).toFixed(t)}:function(e,t){return e.toFixed(t)},from:function(e,t){return isFinite(e)&&(e=parseFloat(e)),isNaN(e)?t:e},randomInt:function(e,t){return n.floor(n.random()*(t-e+1)+e)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}}),Ext.num=function(){return e.from.apply(this,arguments)}},function(){function m(e,t){return t<0?Math.max(0,e.length+t):Math.min(e.length,t)}function g(e,t,n,r){var i=r?r.length:0,s=e.length,o=m(e,t),u,a,f,l,c,h;if(o===s)i&&e.push.apply(e,r);else{u=Math.min(n,s-o),a=o+u,f=a+i-u,l=s-a,c=s-u;if(f<a)for(h=0;h<l;++h)e[f+h]=e[a+h];else if(f>a)for(h=l;h--;)e[f+h]=e[a+h];if(i&&o===c)e.length=c,e.push.apply(e,r);else{e.length=c+i;for(h=0;h<i;++h)e[o+h]=r[h]}}return e}function y(e,t,n,r){return r&&r.length?t===0&&!n?e.unshift.apply(e,r):t<e.length?e.splice.apply(e,[t,n].concat(r)):e.push.apply(e,r):e.splice(t,n),e}function b(e,t,n){return g(e,t,n)}function w(e,t,n){return e.splice(t,n),e}function E(e,n,r){var i=m(e,n),s=e.slice(n,m(e,i+r));return arguments.length<4?g(e,i,r):g(e,i,r,t.call(arguments,3)),s}function S(e){return e.splice.apply(e,t.call(arguments,1))}var e=Array.prototype,t=e.slice,n=function(){var e=[],t,n=20;if(!e.splice)return!1;while(n--)e.push("A");return e.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),t=e.length,e.splice(13,0,"XXX"),t+1!=e.length?!1:!0}(),r="forEach"in e,i="map"in e,s="indexOf"in e,o="every"in e,u="some"in e,a="filter"in e,f=function(){var e=[1,2,3,4,5].sort(function(){return 0});return e[0]===1&&e[1]===2&&e[2]===3&&e[3]===4&&e[4]===5}(),l=!0,c,h,p,d;try{typeof document!="undefined"&&t.call(document.getElementsByTagName("body"))}catch(v){l=!1}h=n?w:b,p=n?y:g,d=n?S:E,c=Ext.Array={each:function(e,t,n,r){e=c.from(e);var i,s=e.length;if(r!==!0){for(i=0;i<s;i++)if(t.call(n||e[i],e[i],i,e)===!1)return i}else for(i=s-1;i>-1;i--)if(t.call(n||e[i],e[i],i,e)===!1)return i;return!0},forEach:r?function(e,t,n){e.forEach(t,n)}:function(e,t,n){var r=0,i=e.length;for(;r<i;r++)t.call(n,e[r],r,e)},indexOf:s?function(t,n,r){return e.indexOf.call(t,n,r)}:function(e,t,n){var r,i=e.length;for(r=n<0?Math.max(0,i+n):n||0;r<i;r++)if(e[r]===t)return r;return-1},contains:s?function(t,n){return e.indexOf.call(t,n)!==-1}:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},toArray:function(e,n,r){if(!e||!e.length)return[];typeof e=="string"&&(e=e.split(""));if(l)return t.call(e,n||0,r||e.length);var i=[],s;n=n||0,r=r?r<0?e.length+r:r:e.length;for(s=n;s<r;s++)i.push(e[s]);return i},pluck:function(e,t){var n=[],r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],n.push(s[t]);return n},map:i?function(e,t,n){return e.map(t,n)}:function(e,t,n){var r=[],i=0,s=e.length;for(;i<s;i++)r[i]=t.call(n,e[i],i,e);return r},every:o?function(e,t,n){return e.every(t,n)}:function(e,t,n){var r=0,i=e.length;for(;r<i;++r)if(!t.call(n,e[r],r,e))return!1;return!0},some:u?function(e,t,n){return e.some(t,n)}:function(e,t,n){var r=0,i=e.length;for(;r<i;++r)if(t.call(n,e[r],r,e))return!0;return!1},equals:function(e,t){var n=e.length,r=t.length,i;if(e===t)return!0;if(n!==r)return!1;for(i=0;i<n;++i)if(e[i]!==t[i])return!1;return!0},clean:function(e){var t=[],n=0,r=e.length,i;for(;n<r;n++)i=e[n],Ext.isEmpty(i)||t.push(i);return t},unique:function(e){var t=[],n=0,r=e.length,i;for(;n<r;n++)i=e[n],c.indexOf(t,i)===-1&&t.push(i);return t},filter:a?function(e,t,n){return e.filter(t,n)}:function(e,t,n){var r=[],i=0,s=e.length;for(;i<s;i++)t.call(n,e[i],i,e)&&r.push(e[i]);return r},findBy:function(e,t,n){var r=0,i=e.length;for(;r<i;r++)if(t.call(n||e,e[r],r))return e[r];return null},from:function(e,n){if(e===undefined||e===null)return[];if(Ext.isArray(e))return n?t.call(e):e;var r=typeof e;return e&&e.length!==undefined&&r!=="string"&&(r!=="function"||!e.apply)?c.toArray(e):[e]},remove:function(e,t){var n=c.indexOf(e,t);return n!==-1&&h(e,n,1),e},include:function(e,t){c.contains(e,t)||e.push(t)},clone:function(e){return t.call(e)},merge:function(){var e=t.call(arguments),n=[],r,i;for(r=0,i=e.length;r<i;r++)n=n.concat(e[r]);return c.unique(n)},intersect:function(){var e=[],n=t.call(arguments),r,i,s,o,u,a,f,l,p,d,v,m,g;if(!n.length)return e;r=n.length;for(v=u=0;v<r;v++){a=n[v];if(!o||a.length<o.length)o=a,u=v}o=c.unique(o),h(n,u,1),f=o.length,r=n.length;for(v=0;v<f;v++){l=o[v],d=0;for(m=0;m<r;m++){i=n[m],s=i.length;for(g=0;g<s;g++){p=i[g];if(l===p){d++;break}}}d===r&&e.push(l)}return e},difference:function(e,n){var r=t.call(e),i=r.length,s,o,u;for(s=0,u=n.length;s<u;s++)for(o=0;o<i;o++)r[o]===n[s]&&(h(r,o,1),o--,i--);return r},slice:[1,2].slice(1,undefined).length?function(e,n,r){return t.call(e,n,r)}:function(e,n,r){return typeof n=="undefined"?t.call(e):typeof r=="undefined"?t.call(e,n):t.call(e,n,r)},sort:f?function(e,t){return t?e.sort(t):e.sort()}:function(e,t){var n=e.length,r=0,i,s,o,u;for(;r<n;r++){o=r;for(s=r+1;s<n;s++)t?(i=t(e[s],e[o]),i<0&&(o=s)):e[s]<e[o]&&(o=s);o!==r&&(u=e[r],e[r]=e[o],e[o]=u)}return e},flatten:function(e){function n(e){var r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],Ext.isArray(s)?n(s):t.push(s);return t}var t=[];return n(e)},min:function(e,t){var n=e[0],r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],t?t(n,s)===1&&(n=s):s<n&&(n=s);return n},max:function(e,t){var n=e[0],r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],t?t(n,s)===-1&&(n=s):s>n&&(n=s);return n},mean:function(e){return e.length>0?c.sum(e)/e.length:undefined},sum:function(e){var t=0,n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],t+=i;return t},toMap:function(e,t,n){var r={},i=e.length;if(!t)while(i--)r[e[i]]=i+1;else if(typeof t=="string")while(i--)r[e[i][t]]=i+1;else while(i--)r[t.call(n,e[i])]=i+1;return r},toValueMap:function(e,t,n){var r={},i=e.length;if(!t)while(i--)r[e[i]]=e[i];else if(typeof t=="string")while(i--)r[e[i][t]]=e[i];else while(i--)r[t.call(n,e[i])]=e[i];return r},erase:h,insert:function(e,t,n){return p(e,t,0,n)},replace:p,splice:d,push:function(e){var t=arguments.length,n=1,r;e===undefined?e=[]:Ext.isArray(e)||(e=[e]);for(;n<t;n++)r=arguments[n],Array.prototype.push[Ext.isIterable(r)?"apply":"call"](e,r);return e}},Ext.each=c.each,c.union=c.merge,Ext.min=c.min,Ext.max=c.max,Ext.sum=c.sum,Ext.mean=c.mean,Ext.flatten=c.flatten,Ext.clean=c.clean,Ext.unique=c.unique,Ext.pluck=c.pluck,Ext.toArray=function(){return c.toArray.apply(c,arguments)}}(),Ext.Function={flexSetter:function(e){return function(t,n){var r,i;if(t===null)return this;if(typeof t!="string"){for(r in t)t.hasOwnProperty(r)&&e.call(this,r,t[r]);if(Ext.enumerables)for(i=Ext.enumerables.length;i--;)r=Ext.enumerables[i],t.hasOwnProperty(r)&&e.call(this,r,t[r])}else e.call(this,t,n);return this}},bind:function(e,t,n,r){if(arguments.length===2)return function(){return e.apply(t,arguments)};var i=e,s=Array.prototype.slice;return function(){var e=n||arguments;return r===!0?(e=s.call(arguments,0),e=e.concat(n)):typeof r=="number"&&(e=s.call(arguments,0),Ext.Array.insert(e,r,n)),i.apply(t||Ext.global,e)}},pass:function(e,t,n){return Ext.isArray(t)||(Ext.isIterable(t)?t=Ext.Array.clone(t):t=t!==undefined?[t]:[]),function(){var r=[].concat(t);return r.push.apply(r,arguments),e.apply(n||this,r)}},alias:function(e,t){return function(){return e[t].apply(e,arguments)}},clone:function(e){return function(){return e.apply(this,arguments)}},createInterceptor:function(e,t,n,r){var i=e;return Ext.isFunction(t)?(r=Ext.isDefined(r)?r:null,function(){var i=this,s=arguments;return t.target=i,t.method=e,t.apply(n||i||Ext.global,s)!==!1?e.apply(i||Ext.global,s):r}):e},createDelayed:function(e,t,n,r,i){if(n||r)e=Ext.Function.bind(e,n,r,i);return function(){var n=this,r=Array.prototype.slice.call(arguments);setTimeout(function(){e.apply(n,r)},t)}},defer:function(e,t,n,r,i){return e=Ext.Function.bind(e,n,r,i),t>0?setTimeout(Ext.supports.TimeoutActualLateness?function(){e()}:e,t):(e(),0)},createSequence:function(e,t,n){return t?function(){var r=e.apply(this,arguments);return t.apply(n||this,arguments),r}:e},createBuffered:function(e,t,n,r){var i;return function(){var s=r||Array.prototype.slice.call(arguments,0),o=n||this;i&&clearTimeout(i),i=setTimeout(function(){e.apply(o,s)},t)}},createThrottled:function(e,t,n){var r,i,s,o,u=function(){e.apply(n||this,s),r=Ext.Date.now()};return function(){i=Ext.Date.now()-r,s=arguments,clearTimeout(o),!r||i>=t?u():o=setTimeout(u,t-i)}},interceptBefore:function(e,t,n,r){var i=e[t]||Ext.emptyFn;return e[t]=function(){var e=n.apply(r||this,arguments);return i.apply(this,arguments),e}},interceptAfter:function(e,t,n,r){var i=e[t]||Ext.emptyFn;return e[t]=function(){return i.apply(this,arguments),n.apply(r||this,arguments)}}},Ext.defer=Ext.Function.alias(Ext.Function,"defer"),Ext.pass=Ext.Function.alias(Ext.Function,"pass"),Ext.bind=Ext.Function.alias(Ext.Function,"bind"),function(){var e=function(){},t=Ext.Object={chain:Object.create||function(t){e.prototype=t;var n=new e;return e.prototype=null,n},clear:function(e){var n=t.getKeys(e),r=n.length;while(r--)delete e[n[r]];return e},toQueryObjects:function(e,n,r){var i=t.toQueryObjects,s=[],o,u;if(Ext.isArray(n))for(o=0,u=n.length;o<u;o++)r?s=s.concat(i(e+"["+o+"]",n[o],!0)):s.push({name:e,value:n[o]});else if(Ext.isObject(n))for(o in n)n.hasOwnProperty(o)&&(r?s=s.concat(i(e+"["+o+"]",n[o],!0)):s.push({name:e,value:n[o]}));else s.push({name:e,value:n});return s},toQueryString:function(e,n){var r=[],i=[],s,o,u,a,f;for(s in e)e.hasOwnProperty(s)&&(r=r.concat(t.toQueryObjects(s,e[s],n)));for(o=0,u=r.length;o<u;o++)a=r[o],f=a.value,Ext.isEmpty(f)?f="":Ext.isDate(f)&&(f=Ext.Date.toString(f)),i.push(encodeURIComponent(a.name)+"="+encodeURIComponent(String(f)));return i.join("&")},fromQueryString:function(e,t){var n=e.replace(/^\?/,"").split("&"),r={},i,s,o,u,a,f,l,c,h,p,d,v,m,g;for(a=0,f=n.length;a<f;a++){l=n[a];if(l.length>0){s=l.split("="),o=decodeURIComponent(s[0]),u=s[1]!==undefined?decodeURIComponent(s[1]):"";if(!t)r.hasOwnProperty(o)?(Ext.isArray(r[o])||(r[o]=[r[o]]),r[o].push(u)):r[o]=u;else{p=o.match(/(\[):?([^\]]*)\]/g),d=o.match(/^([^\[]+)/),o=d[0],v=[];if(p===null){r[o]=u;continue}for(c=0,h=p.length;c<h;c++)m=p[c],m=m.length===2?"":m.substring(1,m.length-1),v.push(m);v.unshift(o),i=r;for(c=0,h=v.length;c<h;c++){m=v[c];if(c===h-1)Ext.isArray(i)&&m===""?i.push(u):i[m]=u;else{if(i[m]===undefined||typeof i[m]=="string")g=v[c+1],i[m]=Ext.isNumeric(g)||g===""?[]:{};i=i[m]}}}}}return r},each:function(e,t,n){for(var r in e)if(e.hasOwnProperty(r)&&t.call(n||e,r,e[r],e)===!1)return},merge:function(e){var n=1,r=arguments.length,i=t.merge,s=Ext.clone,o,u,a,f;for(;n<r;n++){o=arguments[n];for(u in o)a=o[u],a&&a.constructor===Object?(f=e[u],f&&f.constructor===Object?i(f,a):e[u]=s(a)):e[u]=a}return e},mergeIf:function(e){var t=1,n=arguments.length,r=Ext.clone,i,s,o;for(;t<n;t++){i=arguments[t];for(s in i)s in e||(o=i[s],o&&o.constructor===Object?e[s]=r(o):e[s]=o)}return e},getKey:function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return null},getValues:function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},getKeys:typeof Object.keys=="function"?function(e){return e?Object.keys(e):[]}:function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t},getSize:function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},equals:function(){var e=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0};return function(t,n){return t===n?!0:t&&n?e(t,n)&&e(n,t):!t&&!n?t===n:!1}}(),classify:function(e){var n=e,r=[],i={},s=function(){var e=0,t=r.length,n;for(;e<t;e++)n=r[e],this[n]=new i[n]},o,u;for(o in e)e.hasOwnProperty(o)&&(u=e[o],u&&u.constructor===Object&&(r.push(o),i[o]=t.classify(u)));return s.prototype=n,s}};Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf,Ext.urlEncode=function(){var e=Ext.Array.from(arguments),n="";return typeof e[1]=="string"&&(n=e[1]+"&",e[1]=!1),n+t.toQueryString.apply(t,e)},Ext.urlDecode=function(){return t.fromQueryString.apply(t,arguments)}}(),Ext.Date=new function(){function a(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(s,function(e,n){return t[n]})}var e=this,t=/(\\.)/g,n=/([gGhHisucUOPZ]|MS)/,r=/([djzmnYycU]|MS)/,i=/\\/gi,s=/\{(\d+)\}/g,o=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),u=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear(),","jan4 = new Date(year, 0, 4, 0, 0, 0),","week1monday = new Date(jan4.getTime() - ((jan4.getDay() - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");Ext.apply(e,{now:Date.now||function(){return+(new Date)},toString:function(e){var t=Ext.String.leftPad;return e.getFullYear()+"-"+t(e.getMonth()+1,2,"0")+"-"+t(e.getDate(),2,"0")+"T"+t(e.getHours(),2,"0")+":"+t(e.getMinutes(),2,"0")+":"+t(e.getSeconds(),2,"0")},getElapsed:function(t,n){return Math.abs(t-(n||e.now()))},useStrict:!1,formatCodeToRegex:function(t,n){var r=e.parseCodes[t];return r&&(r=typeof r=="function"?r():r,e.parseCodes[t]=r),r?Ext.applyIf({c:r.c?a(r.c,n||"{0}"):r.c},r):{g:0,c:null,s:Ext.String.escapeRegex(t)}},parseFunctions:{MS:function(e,t){var n=(e||"").match(o);return n?new Date(((n[1]||"")+n[2])*1):null},time:function(e,t){var n=parseInt(e,10);return n||n===0?new Date(n):null},timestamp:function(e,t){var n=parseInt(e,10);return n||n===0?new Date(n*1e3):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return e.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(e){return Ext.Date.monthNames[e].substring(0,3)},getShortDayName:function(e){return Ext.Date.dayNames[e].substring(0,3)},getMonthNumber:function(e){return Ext.Date.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(e){return n.test(e.replace(t,""))},formatContainsDateInfo:function(e){return r.test(e.replace(t,""))},unescapeFormat:function(e){return e.replace(i,"")},formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){var t,n,r,i,s;for(t="Y-m-dTH:i:sP",n=[],r=0,i=t.length;r<i;++r)s=t.charAt(r),n.push(s=="T"?"'T'":e.getFormatCode(s));return n.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(t,n,r,i,s,o,u){i=i||0,s=s||0,o=o||0,u=u||0;var a=e.add(new Date(t<100?100:t,n-1,r,i,s,o,u),e.YEAR,t<100?t-100:0);return t==a.getFullYear()&&n==a.getMonth()+1&&r==a.getDate()&&i==a.getHours()&&s==a.getMinutes()&&o==a.getSeconds()&&u==a.getMilliseconds()},parse:function(t,n,r){var i=e.parseFunctions;return i[n]==null&&e.createParser(n),i[n].call(e,t,Ext.isDefined(r)?r:e.useStrict)},parseDate:function(t,n,r){return e.parse(t,n,r)},getFormatCode:function(t){var n=e.formatCodes[t];return n&&(n=typeof n=="function"?n():n,e.formatCodes[t]=n),n||"'"+Ext.String.escape(t)+"'"},createFormat:function(t){var n=[],r=!1,i="",s;for(s=0;s<t.length;++s)i=t.charAt(s),!r&&i=="\\"?r=!0:r?(r=!1,n.push("'"+Ext.String.escape(i)+"'")):n.push(e.getFormatCode(i));e.formatFunctions[t]=Ext.functionFactory("return "+n.join("+"))},createParser:function(t){var n=e.parseRegexes.length,r=1,i=[],s=[],o=!1,f="",l=0,c=t.length,h=[],p;for(;l<c;++l)f=t.charAt(l),!o&&f=="\\"?o=!0:o?(o=!1,s.push(Ext.String.escape(f))):(p=e.formatCodeToRegex(f,r),r+=p.g,s.push(p.s),p.g&&p.c&&(p.calcAtEnd?h.push(p.c):i.push(p.c)));i=i.concat(h),e.parseRegexes[n]=new RegExp("^"+s.join("")+"$","i"),e.parseFunctions[t]=Ext.functionFactory("input","strict",a(u,n,i.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var t=[],n=0;n<7;t.push(e.getShortDayName(n)),++n);return{g:0,c:null,s:"(?:"+t.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+e.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+e.monthNames.join("|")+")"}},M:function(){for(var t=[],n=0;n<12;t.push(e.getShortMonthName(n)),++n);return Ext.applyIf({s:"("+t.join("|")+")"},e.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var t=[],n=[e.formatCodeToRegex("Y",1),e.formatCodeToRegex("m",2),e.formatCodeToRegex("d",3),e.formatCodeToRegex("H",4),e.formatCodeToRegex("i",5),e.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",e.formatCodeToRegex("P",8).c,"}else{",e.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],r,i;for(r=0,i=n.length;r<i;++r)t.push(n[r].c);return{g:1,c:t.join(""),s:[n[0].s,"(?:","-",n[1].s,"(?:","-",n[2].s,"(?:","(?:T| )?",n[3].s,":",n[4].s,"(?::",n[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(t,n){return e.format(t,n)},isEqual:function(e,t){return e&&t?e.getTime()===t.getTime():!e&&!t},format:function(t,n){var r=e.formatFunctions;return Ext.isDate(t)?(r[n]==null&&e.createFormat(n),r[n].call(t)+""):""},getTimezone:function(e){return e.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(e,t){var n=e.getTimezoneOffset();return(n>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(n)/60),2,"0")+(t?":":"")+Ext.String.leftPad(Math.abs(n%60),2,"0")},getDayOfYear:function(t){var n=0,r=Ext.Date.clone(t),i=t.getMonth(),s;for(s=0,r.setDate(1),r.setMonth(0);s<i;r.setMonth(++s))n+=e.getDaysInMonth(r);return n+t.getDate()-1},getWeekOfYear:function(){var e=864e5,t=7*e;return function(n){var r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()+3)/e,i=Math.floor(r/7),s=(new Date(i*t)).getUTCFullYear();return i-Math.floor(Date.UTC(s,0,7)/t)+1}}(),isLeapYear:function(e){var t=e.getFullYear();return(t&3)==0&&!!(t%100||t%400==0&&t)},getFirstDayOfMonth:function(e){var t=(e.getDay()-(e.getDate()-1))%7;return t<0?t+7:t},getLastDayOfMonth:function(t){return e.getLastDateOfMonth(t).getDay()},getFirstDateOfMonth:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},getLastDateOfMonth:function(t){return new Date(t.getFullYear(),t.getMonth(),e.getDaysInMonth(t))},getDaysInMonth:function(){var t=[31,28,31,30,31,30,31,31,30,31,30,31];return function(n){var r=n.getMonth();return r==1&&e.isLeapYear(n)?29:t[r]}}(),getSuffix:function(e){switch(e.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(e){return new Date(e.getTime())},isDST:function(e){return(new Date(e.getFullYear(),0,1)).getTimezoneOffset()!=e.getTimezoneOffset()},clearTime:function(t,n){if(n)return Ext.Date.clearTime(Ext.Date.clone(t));var r=t.getDate(),i,s;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);if(t.getDate()!=r){for(i=1,s=e.add(t,Ext.Date.HOUR,i);s.getDate()!=r;i++,s=e.add(t,Ext.Date.HOUR,i));t.setDate(r),t.setHours(s.getHours())}return t},add:function(t,n,r){var i=Ext.Date.clone(t),s=Ext.Date,o,u,a=0;if(!n||r===0)return i;u=r-parseInt(r,10),r=parseInt(r,10);if(r)switch(n.toLowerCase()){case Ext.Date.MILLI:i.setTime(i.getTime()+r);break;case Ext.Date.SECOND:i.setTime(i.getTime()+r*1e3);break;case Ext.Date.MINUTE:i.setTime(i.getTime()+r*60*1e3);break;case Ext.Date.HOUR:i.setTime(i.getTime()+r*60*60*1e3);break;case Ext.Date.DAY:i.setDate(i.getDate()+r);break;case Ext.Date.MONTH:o=t.getDate(),o>28&&(o=Math.min(o,Ext.Date
.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(t),Ext.Date.MONTH,r)).getDate())),i.setDate(o),i.setMonth(t.getMonth()+r);break;case Ext.Date.YEAR:o=t.getDate(),o>28&&(o=Math.min(o,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(t),Ext.Date.YEAR,r)).getDate())),i.setDate(o),i.setFullYear(t.getFullYear()+r)}if(u){switch(n.toLowerCase()){case Ext.Date.MILLI:a=1;break;case Ext.Date.SECOND:a=1e3;break;case Ext.Date.MINUTE:a=6e4;break;case Ext.Date.HOUR:a=36e5;break;case Ext.Date.DAY:a=864e5;break;case Ext.Date.MONTH:o=e.getDaysInMonth(i),a=864e5*o;break;case Ext.Date.YEAR:o=e.isLeapYear(i)?366:365,a=864e5*o}a&&i.setTime(i.getTime()+a*u)}return i},subtract:function(t,n,r){return e.add(t,n,-r)},between:function(e,t,n){var r=e.getTime();return t.getTime()<=r&&r<=n.getTime()},compat:function(){var t=window.Date,n,r=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],i=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],s=r.length,o=i.length,u,a,f;for(f=0;f<s;f++)u=r[f],t[u]=e[u];for(n=0;n<o;n++)a=i[n],t.prototype[a]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),e[a].apply(e,t)}}})},function(e){var t=[],n=function(){},r=function(e,t,n,r){var i=function(){var t=this.callParent(arguments);return e.apply(this,arguments),t};return i.$name=n,i.$owner=r,t&&(i.$previous=t.$previous,t.$previous=i),i};Ext.apply(n,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},extend:function(e){var t=e.prototype,n,r,i,s,o,u;r=this.prototype=Ext.Object.chain(t),r.self=this,this.superclass=r.superclass=t;if(!e.$isClass){n=Ext.Base.prototype;for(i in n)i in r&&(r[i]=n[i])}u=t.$inheritableStatics;if(u)for(i=0,s=u.length;i<s;i++)o=u[i],this.hasOwnProperty(o)||(this[o]=e[o]);e.$onExtended&&(this.$onExtended=e.$onExtended.slice()),r.config=new r.configClass,r.initConfigList=r.initConfigList.slice(),r.initConfigMap=Ext.clone(r.initConfigMap),r.configMap=Ext.Object.chain(r.configMap)},$onExtended:[],triggerExtended:function(){var e=this.$onExtended,t=e.length,n,r;if(t>0)for(n=0;n<t;n++)r=e[n],r.fn.apply(r.scope||this,arguments)},onExtended:function(e,t){return this.$onExtended.push({fn:e,scope:t}),this},addConfig:function(e,t){var n=this.prototype,r=Ext.Class.configNameCache,i=n.configMap,s=n.initConfigList,o=n.initConfigMap,u=n.config,a,f,l;for(f in e)e.hasOwnProperty(f)&&(i[f]||(i[f]=!0),l=e[f],a=r[f].initialized,!o[f]&&l!==null&&!n[a]&&(o[f]=!0,s.push(f)));t?Ext.merge(u,e):Ext.mergeIf(u,e),n.configClass=Ext.Object.classify(u)},addStatics:function(e){var t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],typeof t=="function"&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn&&(t.$owner=this,t.$name=n),this[n]=t);return this},addInheritableStatics:function(e){var t,n,r=this.prototype,i,s;t=r.$inheritableStatics,n=r.$hasInheritableStatics,t||(t=r.$inheritableStatics=[],n=r.$hasInheritableStatics={});for(i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s,n[i]||(n[i]=!0,t.push(i)));return this},addMembers:function(e){var t=this.prototype,n=Ext.enumerables,r=[],i,s,o,u;for(o in e)r.push(o);n&&r.push.apply(r,n);for(i=0,s=r.length;i<s;i++)o=r[i],e.hasOwnProperty(o)&&(u=e[o],typeof u=="function"&&!u.$isClass&&u!==Ext.emptyFn&&u!==Ext.identityFn&&(u.$owner=this,u.$name=o),t[o]=u);return this},addMember:function(e,t){return typeof t=="function"&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn&&(t.$owner=this,t.$name=e),this.prototype[e]=t,this},implement:function(){this.addMembers.apply(this,arguments)},borrow:function(e,t){var n=this.prototype,r=e.prototype,i,s,o,u,a;t=Ext.Array.from(t);for(i=0,s=t.length;i<s;i++)o=t[i],a=r[o],typeof a=="function"?(u=Ext.Function.clone(a),u.$owner=this,u.$name=o,n[o]=u):n[o]=a;return this},override:function(e){var t=this,n=Ext.enumerables,r=t.prototype,i=Ext.Function.clone,s,o,u,a,f,l;arguments.length===2&&(s=e,e={},e[s]=arguments[1],n=null);do{f=[],a=null;for(s in e)s=="statics"?a=e[s]:s=="inheritableStatics"?t.addInheritableStatics(e[s]):s=="config"?t.addConfig(e[s],!0):f.push(s);n&&f.push.apply(f,n);for(o=f.length;o--;)s=f[o],e.hasOwnProperty(s)&&(u=e[s],typeof u=="function"&&!u.$className&&u!==Ext.emptyFn&&u!==Ext.identityFn&&(typeof u.$owner!="undefined"&&(u=i(u)),u.$owner=t,u.$name=s,l=r.hasOwnProperty(s)&&r[s],l&&(u.$previous=l)),r[s]=u);r=t,e=a}while(e);return this},callParent:function(e){var n;return(n=this.callParent.caller)&&(n.$previous||(n=n.$owner?n:n.caller)&&n.$owner.superclass.self[n.$name]).apply(this,e||t)},callSuper:function(e){var n;return(n=this.callSuper.caller)&&((n=n.$owner?n:n.caller)&&n.$owner.superclass.self[n.$name]).apply(this,e||t)},mixin:function(e,t){var n=this,i=t.prototype,s=n.prototype,o,u,a,f,l,c,h,p;typeof i.onClassMixedIn!="undefined"&&i.onClassMixedIn.call(t,n),s.hasOwnProperty("mixins")||("mixins"in s?s.mixins=Ext.Object.chain(s.mixins):s.mixins={});for(o in i){c=i[o];if(o==="mixins")Ext.merge(s.mixins,c);else if(o==="xhooks")for(h in c)p=c[h],p.$previous=Ext.emptyFn,s.hasOwnProperty(h)?r(p,s[h],h,n):s[h]=r(p,null,h,n);else o!=="mixinId"&&o!=="config"&&s[o]===undefined&&(s[o]=c)}u=i.$inheritableStatics;if(u)for(a=0,f=u.length;a<f;a++)l=u[a],n.hasOwnProperty(l)||(n[l]=t[l]);return"config"in i&&n.addConfig(i.config,!1),s.mixins[e]=i,n},getName:function(){return Ext.getClassName(this)},createAlias:e(function(e,t){this.override(e,function(){return this[t].apply(this,arguments)})}),addXtype:function(e){var t=this.prototype,n=t.xtypesMap,r=t.xtypes,i=t.xtypesChain;return t.hasOwnProperty("xtypesMap")||(n=t.xtypesMap=Ext.merge({},t.xtypesMap||{}),r=t.xtypes=t.xtypes?[].concat(t.xtypes):[],i=t.xtypesChain=t.xtypesChain?[].concat(t.xtypesChain):[],t.xtype=e),n[e]||(n[e]=!0,r.push(e),i.push(e),Ext.ClassManager.setAlias(this,"widget."+e)),this}}),n.implement({isInstance:!0,$className:"Ext.Base",configClass:Ext.emptyFn,initConfigList:[],configMap:{},initConfigMap:{},statics:function(){var e=this.statics.caller,t=this.self;return e?e.$owner:t},callParent:function(e){var n,r=(n=this.callParent.caller)&&(n.$previous||(n=n.$owner?n:n.caller)&&n.$owner.superclass[n.$name]);return r.apply(this,e||t)},callSuper:function(e){var n,r=(n=this.callSuper.caller)&&(n=n.$owner?n:n.caller)&&n.$owner.superclass[n.$name];return r.apply(this,e||t)},self:n,constructor:function(){return this},initConfig:function(e){var t=e,n=Ext.Class.configNameCache,r=new this.configClass,i=this.initConfigList,s=this.configMap,o,u,a,f,l;this.initConfig=Ext.emptyFn,this.initialConfig=t||{},this.config=e=t?Ext.merge(r,e):r;if(t){i=i.slice();for(f in t)s[f]&&t[f]!==null&&(i.push(f),this[n[f].initialized]=!1)}for(u=0,a=i.length;u<a;u++)f=i[u],o=n[f],l=o.initialized,this[l]||(this[l]=!0,this[o.set].call(this,e[f]));return this},hasConfig:function(e){return Boolean(this.configMap[e])},setConfig:function(e,t){if(!e)return this;var n=Ext.Class.configNameCache,r=this.config,i=this.configMap,s=this.initialConfig,o,u;t=Boolean(t);for(o in e){if(t&&s.hasOwnProperty(o))continue;u=e[o],r[o]=u,i[o]&&this[n[o].set](u)}return this},getConfig:function(e){var t=Ext.Class.configNameCache;return this[t[e].get]()},getInitialConfig:function(e){var t=this.config;return e?t[e]:t},onConfigUpdate:function(e,t,n){var r=this.self,i,s,o,u,a,f;e=Ext.Array.from(e),n=n||this;for(i=0,s=e.length;i<s;i++)o=e[i],u="update"+Ext.String.capitalize(o),a=this[u]||Ext.emptyFn,f=function(){a.apply(this,arguments),n[t].apply(n,arguments)},f.$name=u,f.$owner=r,this[u]=f},destroy:function(){this.destroy=Ext.emptyFn}}),n.prototype.callOverridden=n.prototype.callParent,Ext.Base=n}(Ext.Function.flexSetter),function(){function s(e){function t(){return this.constructor.apply(this,arguments)||null}return t}var e,t=Ext.Base,n=[],r,i;for(r in t)t.hasOwnProperty(r)&&n.push(r);i=n.length,Ext.Class=e=function(t,n,r){return typeof t!="function"&&(r=n,n=t,t=null),n||(n={}),t=e.create(t,n),e.process(t,n,r),t},Ext.apply(e,{onBeforeCreated:function(e,t,n){e.addMembers(t),n.onCreated.call(e,e)},create:function(e,r){var o,u;e||(e=s());for(u=0;u<i;u++)o=n[u],e[o]=t[o];return e},process:function(t,n,r){var i=n.preprocessors||e.defaultPreprocessors,s=this.preprocessors,o={onBeforeCreated:this.onBeforeCreated},u=[],a,f,l,c,h,p,d;delete n.preprocessors;for(l=0,c=i.length;l<c;l++){a=i[l];if(typeof a=="string"){a=s[a],f=a.properties;if(f===!0)u.push(a.fn);else if(f)for(h=0,p=f.length;h<p;h++){d=f[h];if(n.hasOwnProperty(d)){u.push(a.fn);break}}}else u.push(a)}o.onCreated=r?r:Ext.emptyFn,o.preprocessors=u,this.doProcess(t,n,o)},doProcess:function(e,t,n){var r=this,i=n.preprocessors,s=i.shift(),o=r.doProcess;for(;s;s=i.shift())if(s.call(r,e,t,n,o)===!1)return;n.onBeforeCreated.apply(r,arguments)},preprocessors:{},registerPreprocessor:function(e,t,n,r,i){return r||(r="last"),n||(n=[e]),this.preprocessors[e]={name:e,properties:n||!1,fn:t},this.setDefaultPreprocessorPosition(e,r,i),this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){return this.defaultPreprocessors=Ext.Array.from(e),this},setDefaultPreprocessorPosition:function(e,t,n){var r=this.defaultPreprocessors,i;if(typeof t=="string"){if(t==="first")return r.unshift(e),this;if(t==="last")return r.push(e),this;t=t==="after"?1:-1}return i=Ext.Array.indexOf(r,n),i!==-1&&Ext.Array.splice(r,Math.max(0,i+t),0,e),this},configNameCache:{},getConfigNameMap:function(e){var t=this.configNameCache,n=t[e],r;return n||(r=e.charAt(0).toUpperCase()+e.substr(1),n=t[e]={internal:e,initialized:"_is"+r+"Initialized",apply:"apply"+r,update:"update"+r,set:"set"+r,get:"get"+r,doSet:"doSet"+r,changeEvent:e.toLowerCase()+"change"}),n}}),e.registerPreprocessor("extend",function(e,t,n){var r=Ext.Base,i=r.prototype,s=t.extend,o,u,a;delete t.extend,s&&s!==Object?o=s:o=r,u=o.prototype;if(!o.$isClass)for(a in i)u[a]||(u[a]=i[a]);e.extend(o),e.triggerExtended.apply(e,arguments),t.onClassExtended&&(e.onExtended(t.onClassExtended,e),delete t.onClassExtended)},!0),e.registerPreprocessor("statics",function(e,t){e.addStatics(t.statics),delete t.statics}),e.registerPreprocessor("inheritableStatics",function(e,t){e.addInheritableStatics(t.inheritableStatics),delete t.inheritableStatics}),e.registerPreprocessor("config",function(t,n){var r=n.config,i=t.prototype;delete n.config,Ext.Object.each(r,function(t,r){var s=e.getConfigNameMap(t),o=s.internal,u=s.initialized,a=s.apply,f=s.update,l=s.set,c=s.get,h=l in i||n.hasOwnProperty(l),p=a in i||n.hasOwnProperty(a),d=f in i||n.hasOwnProperty(f),v,m;r===null||!h&&!p&&!d?(i[o]=r,i[u]=!0):i[u]=!1,h||(n[l]=function(e){var t=this[o],n=this[a],r=this[f];return this[u]||(this[u]=!0),n&&(e=n.call(this,e,t)),typeof e!="undefined"&&(this[o]=e,r&&e!==t&&r.call(this,e,t)),this});if(!(c in i)||n.hasOwnProperty(c))m=n[c]||!1,m?v=function(){return m.apply(this,arguments)}:v=function(){return this[o]},n[c]=function(){var e;return this[u]||(this[u]=!0,this[l](this.config[t])),e=this[c],"$previous"in e?e.$previous=v:this[c]=v,v.apply(this,arguments)}}),t.addConfig(r,!0)}),e.registerPreprocessor("mixins",function(e,t,n){var r=t.mixins,i,s,o,u;delete t.mixins,Ext.Function.interceptBefore(n,"onCreated",function(){if(r instanceof Array)for(o=0,u=r.length;o<u;o++)s=r[o],i=s.prototype.mixinId||s.$className,e.mixin(i,s);else for(var t in r)r.hasOwnProperty(t)&&e.mixin(t,r[t])})}),Ext.extend=function(t,n,r){arguments.length===2&&Ext.isObject(n)&&(r=n,n=t,t=null);var i;if(!n)throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return r.extend=n,r.preprocessors=["extend","statics","inheritableStatics","mixins","config"],t?(i=new e(t,r),i.prototype.constructor=t):i=new e(r),i.prototype.override=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},i}}(),function(e,t,n,r,i){function s(){function e(){return this.constructor.apply(this,arguments)||null}return e}var o=Ext.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{},nameToAlternates:{}},enableNamespaceParseCache:!0,namespaceParseCache:{},instantiators:[],isCreated:function(e){var t=this.existCache,n,r,s,o,u;if(this.classes[e]||t[e])return!0;o=i,u=this.parseNamespace(e);for(n=0,r=u.length;n<r;n++){s=u[n];if(typeof s!="string")o=s;else{if(!o||!o[s])return!1;o=o[s]}}return t[e]=!0,this.triggerCreated(e),!0},createdListeners:[],nameCreatedListeners:{},triggerCreated:function(e){var t=this.createdListeners,n=this.nameCreatedListeners,r=this.maps.nameToAlternates[e],i=[e],s,o,u,a,f,l;for(s=0,o=t.length;s<o;s++)f=t[s],f.fn.call(f.scope,e);r&&i.push.apply(i,r);for(s=0,o=i.length;s<o;s++){l=i[s],t=n[l];if(t){for(u=0,a=t.length;u<a;u++)f=t[u],f.fn.call(f.scope,l);delete n[l]}}},onCreated:function(e,t,n){var r=this.createdListeners,i=this.nameCreatedListeners,s={fn:e,scope:t};if(n){if(this.isCreated(n)){e.call(t,n);return}i[n]||(i[n]=[]),i[n].push(s)}else r.push(s)},parseNamespace:function(e){var t=this.namespaceParseCache,n,r,s,o,u,a,f,l,c;if(this.enableNamespaceParseCache&&t.hasOwnProperty(e))return t[e];n=[],r=this.namespaceRewrites,s=i,o=e;for(l=0,c=r.length;l<c;l++){u=r[l],a=u.from,f=u.to;if(o===a||o.substring(0,a.length)===a){o=o.substring(a.length),typeof f!="string"?s=f:n=n.concat(f.split("."));break}}return n.push(s),n=n.concat(o.split(".")),this.enableNamespaceParseCache&&(t[e]=n),n},setNamespace:function(e,t){var n=i,r=this.parseNamespace(e),s=r.length-1,o=r[s],u,a;for(u=0;u<s;u++)a=r[u],typeof a!="string"?n=a:(n[a]||(n[a]={}),n=n[a]);return n[o]=t,n[o]},createNamespaces:function(){var e=i,t,n,r,s,o,u;for(r=0,o=arguments.length;r<o;r++){t=this.parseNamespace(arguments[r]);for(s=0,u=t.length;s<u;s++)n=t[s],typeof n!="string"?e=n:(e[n]||(e[n]={}),e=e[n])}return e},set:function(e,t){var n=this,r=n.maps,i=r.nameToAlternates,s=n.getName(t),o;return n.classes[e]=n.setNamespace(e,t),s&&s!==e&&(r.alternateToName[e]=s,o=i[s]||(i[s]=[]),o.push(e)),this},get:function(e){var t=this.classes,n,r,s,o,u;if(t[e])return t[e];n=i,r=this.parseNamespace(e);for(o=0,u=r.length;o<u;o++){s=r[o];if(typeof s!="string")n=s;else{if(!n||!n[s])return null;n=n[s]}}return n},setAlias:function(e,t){var n=this.maps.aliasToName,r=this.maps.nameToAliases,i;return typeof e=="string"?i=e:i=this.getName(e),t&&n[t]!==i&&(n[t]=i),r[i]||(r[i]=[]),t&&Ext.Array.include(r[i],t),this},addNameAliasMappings:function(e){var t=this.maps.aliasToName,n=this.maps.nameToAliases,r,i,s,o;for(r in e){i=n[r]||(n[r]=[]);for(o=0;o<e[r].length;o++)s=e[r][o],t[s]||(t[s]=r,i.push(s))}return this},addNameAlternateMappings:function(e){var t=this.maps.alternateToName,n=this.maps.nameToAlternates,r,i,s,o;for(r in e){i=n[r]||(n[r]=[]);for(o=0;o<e[r].length;o++)s=e[r][o],t[s]||(t[s]=r,i.push(s))}return this},getByAlias:function(e){return this.get(this.getNameByAlias(e))},getNameByAlias:function(e){return this.maps.aliasToName[e]||""},getNameByAlternate:function(e){return this.maps.alternateToName[e]||""},getAliasesByName:function(e){return this.maps.nameToAliases[e]||[]},getName:function(e){return e&&e.$className||""},getClass:function(e){return e&&e.self||null},create:function(t,n,r){var i=s();return typeof n=="function"&&(n=n(i)),n.$className=t,new e(i,n,function(){var e=n.postprocessors||o.defaultPostprocessors,i=o.postprocessors,s=[],u,a,f,l,c,h,p;delete n.postprocessors;for(a=0,f=e.length;a<f;a++){u=e[a];if(typeof u=="string"){u=i[u],h=u.properties;if(h===!0)s.push(u.fn);else if(h)for(l=0,c=h.length;l<c;l++){p=h[l];if(n.hasOwnProperty(p)){s.push(u.fn);break}}}else s.push(u)}n.postprocessors=s,n.createdFn=r,o.processCreate(t,this,n)})},processCreate:function(e,t,n){var r=this,i=n.postprocessors.shift(),s=n.createdFn;if(!i){e&&r.set(e,t),s&&s.call(t,t),e&&r.triggerCreated(e);return}i.call(r,e,t,n,r.processCreate)!==!1&&r.processCreate(e,t,n)},createOverride:function(e,t,n){var r=this,i=t.override,s=t.requires,o=t.uses,u=t.compatibility,a=function(){var u,f;s?(f=s,s=null,Ext.Loader.require(f,a)):(u=r.get(i),delete t.override,delete t.compatibility,delete t.requires,delete t.uses,Ext.override(u,t),r.triggerCreated(e),o&&Ext.Loader.addUsedClasses(o),n&&n.call(u))};return r.existCache[e]=!0,(!u||Ext.checkVersion(u))&&r.onCreated(a,r,i),r},instantiateByAlias:function(){var e=arguments[0],t=n.call(arguments),r=this.getNameByAlias(e);return r||(r=this.maps.aliasToName[e],Ext.syncRequire(r)),t[0]=r,this.instantiate.apply(this,t)},instantiate:function(){var e=arguments[0],t=typeof e,r=n.call(arguments,1),i=e,s,o;return t!="function"?(t!="string"&&r.length===0&&(r=[e],e=e.xclass),o=this.get(e)):o=e,o||(s=this.getNameByAlias(e),s&&(e=s,o=this.get(e))),o||(s=this.getNameByAlternate(e),s&&(e=s,o=this.get(e))),o||(Ext.syncRequire(e),o=this.get(e)),this.getInstantiator(r.length)(o,r)},dynInstantiate:function(e,t){return t=r(t,!0),t.unshift(e),this.instantiate.apply(this,t)},getInstantiator:function(e){var t=this.instantiators,n,r,i;n=t[e];if(!n){r=e,i=[];for(r=0;r<e;r++)i.push("a["+r+"]");n=t[e]=new Function("c","a","return new c("+i.join(",")+")")}return n},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(e,t,n,r,i){return r||(r="last"),n||(n=[e]),this.postprocessors[e]={name:e,properties:n||!1,fn:t},this.setDefaultPostprocessorPosition(e,r,i),this},setDefaultPostprocessors:function(e){return this.defaultPostprocessors=r(e),this},setDefaultPostprocessorPosition:function(e,t,n){var r=this.defaultPostprocessors,i;if(typeof t=="string"){if(t==="first")return r.unshift(e),this;if(t==="last")return r.push(e),this;t=t==="after"?1:-1}return i=Ext.Array.indexOf(r,n),i!==-1&&Ext.Array.splice(r,Math.max(0,i+t),0,e),this},getNamesByExpression:function(e){var t=this.maps.nameToAliases,n=[],r,i,s,o,u,a,f;if(e.indexOf("*")!==-1){e=e.replace(/\*/g,"(.*?)"),u=new RegExp("^"+e+"$");for(r in t)if(t.hasOwnProperty(r)){s=t[r];if(r.search(u)!==-1)n.push(r);else for(a=0,f=s.length;a<f;a++){i=s[a];if(i.search(u)!==-1){n.push(r);break}}}}else o=this.getNameByAlias(e),o?n.push(o):(o=this.getNameByAlternate(e),o?n.push(o):n.push(e));return n}};o.registerPostprocessor("alias",function(e,n,r){var i=r.alias,s,o;for(s=0,o=i.length;s<o;s++)t=i[s],this.setAlias(n,t)},["xtype","alias"]),o.registerPostprocessor("singleton",function(e,t,n,r){return n.singleton?(r.call(this,e,new t,n),!1):!0}),o.registerPostprocessor("alternateClassName",function(e,t,n){var r=n.alternateClassName,i,s,o;r instanceof Array||(r=[r]);for(i=0,s=r.length;i<s;i++)o=r[i],this.set(o,t)}),Ext.apply(Ext,{create:t(o,"instantiate"),widget:function(e,t){var n=e,r,i,s,u;return typeof n!="string"?(t=e,n=t.xtype):t=t||{},t.isComponent?t:(r="widget."+n,i=o.getNameByAlias(r),i||(u=!0),s=o.get(i),u||!s?o.instantiateByAlias(r,t):new s(t))},createByAlias:t(o,"instantiateByAlias"),define:function(e,t,n){return t.override?o.createOverride.apply(o,arguments):o.create.apply(o,arguments)},undefine:function(e){var t=o.classes,n=o.maps,r=n.aliasToName,i=n.nameToAliases,s=n.alternateToName,u=n.nameToAlternates,a=i[e],f=u[e],l,c,h,p;delete o.namespaceParseCache[e],delete i[e],delete u[e],delete t[e];if(a)for(p=a.length;p--;)delete r[a[p]];if(f)for(p=f.length;p--;)delete s[f[p]];l=o.parseNamespace(e),c=l.length-1,h=l[0];for(p=1;p<c;p++){h=h[l[p]];if(!h)return}try{delete h[l[c]]}catch(d){h[l[c]]=undefined}},getClassName:t(o,"getName"),getDisplayName:function(e){if(e){if(e.displayName)return e.displayName;if(e.$name&&e.$class)return Ext.getClassName(e.$class)+"#"+e.$name;if(e.$className)return e.$className}return"Anonymous"},getClass:t(o,"getClass"),namespace:t(o,"createNamespaces")}),Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,e.registerPreprocessor("className",function(e,t){t.$className&&(e.$className=t.$className)},!0,"first"),e.registerPreprocessor("alias",function(e,t){var n=e.prototype,i=r(t.xtype),s=r(t.alias),o="widget.",u=o.length,a=Array.prototype.slice.call(n.xtypesChain||[]),f=Ext.merge({},n.xtypesMap||{}),l,c,h,p;for(l=0,c=s.length;l<c;l++)h=s[l],h.substring(0,u)===o&&(p=h.substring(u),Ext.Array.include(i,p));e.xtype=t.xtype=i[0],t.xtypes=i;for(l=0,c=i.length;l<c;l++)p=i[l],f[p]||(f[p]=!0,a.push(p));t.xtypesChain=a,t.xtypesMap=f,Ext.Function.interceptAfter(t,"onClassCreated",function(){var e=n.mixins,t,r;for(t in e)if(e.hasOwnProperty(t)){r=e[t],i=r.xtypes;if(i)for(l=0,c=i.length;l<c;l++)p=i[l],f[p]||(f[p]=!0,a.push(p))}});for(l=0,c=i.length;l<c;l++)p=i[l],Ext.Array.include(s,o+p);t.alias=s},["xtype","alias"])}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),Ext._alternatesMetadata&&(Ext.ClassManager.addNameAlternateMappings(Ext._alternatesMetadata),Ext._alternatesMetadata=null),Ext._aliasMetadata&&(Ext.ClassManager.addNameAliasMappings(Ext._aliasMetadata),Ext._aliasMetadata=null),Ext.Loader=new function(){var e=this,t=Ext.ClassManager,n=Ext.Class,r=Ext.Function.flexSetter,i=Ext.Function.alias,s=Ext.Function.pass,o=Ext.Function.defer,u=Ext.Array.erase,a=["extend","mixins","requires"],f={},l=[],c=/\/\.\//g,h=/\./g,p=0;Ext.apply(e,{isInHistory:f,history:l,config:{enabled:!1,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",garbageCollect:!1,paths:{Ext:"."},preserveScripts:!0,scriptCharset:undefined},setConfig:function(t,n){return Ext.isObject(t)&&arguments.length===1?(Ext.merge(e.config,t),"paths"in t&&Ext.app.collectNamespaces(t.paths)):(e.config[t]=Ext.isObject(n)?Ext.merge(e.config[t],n):n,t==="paths"&&Ext.app.collectNamespaces(n)),e},getConfig:function(t){return t?e.config[t]:e.config},setPath:r(function(t,n){return e.config.paths[t]=n,Ext.app.namespaces[t]=!0,p++,e}),addClassPathMappings:function(t){var n;if(p==0)e.config.paths=t;else for(n in t)e.config.paths[n]=t[n];return p++,e},getPath:function(t){var n="",r=e.config.paths,i=e.getPrefix(t);if(i.length>0){if(i===t)return r[i];n=r[i],t=t.substring(i.length+1)}return n.length>0&&(n+="/"),n.replace(c,"/")+t.replace(h,"/")+".js"},getPrefix:function(t){var n=e.config.paths,r,i="";if(n.hasOwnProperty(t))return t;for(r in n)n.hasOwnProperty(r)&&r+"."===t.substring(0,r.length+1)&&r.length>i.length&&(i=r);return i},isAClassNameWithAKnownPrefix:function(t){var n=e.getPrefix(t);return n!==""&&n!==t},require:function(e,t,n,r){t&&t.call(n)},syncRequire:function(){},exclude:function(t){return{require:function(n,r,i){return e.require(n,r,i,t)},syncRequire:function(n,r,i){return e.syncRequire(n,r,i,t)}}},onReady:function(e,t,n,r){var i;n!==!1&&Ext.onDocumentReady&&(i=e,e=function(){Ext.onDocumentReady(i,t,r)}),e.call(t)}});var d=[],v={},m={},g={},y={},b=[],w=[],E={},S=function(e,t){return t.priority-e.priority};Ext.apply(e,{documentHead:typeof document!="undefined"&&(document.head||document.getElementsByTagName("head")[0]),isLoading:!1,queue:d,isClassFileLoaded:v,isFileLoaded:m,readyListeners:b,optionalRequires:w,requiresMap:E,numPendingFiles:0,numLoadedFiles:0,hasFileLoadError:!1,classNameToFilePathMap:g,scriptsLoading:0,syncModeEnabled:!1,scriptElements:y,refreshQueue:function(){var n=d.length,r,i,s,o;if(!n&&!e.scriptsLoading)return e.triggerReady();for(r=0;r<n;r++){i=d[r];if(i){o=i.requires;if(o.length>e.numLoadedFiles)continue;for(s=0;s<o.length;)t.isCreated(o[s])?u(o,s,1):s++;if(i.requires.length===0){u(d,r,1),i.callback.call(i.scope),e.refreshQueue();break}}}return e},injectScriptElement:function(t,n,r,i,s){var u=document.createElement("script"),a=!1,f=e.config,l=function(){a||(a=!0,u.onload=u.onreadystatechange=u.onerror=null,typeof f.scriptChainDelay=="number"?o(n,f.scriptChainDelay,i):n.call(i),e.cleanupScriptElement(u,f.preserveScripts===!1,f.garbageCollect))},c=function(t){o(r,1,i),e.cleanupScriptElement(u,f.preserveScripts===!1,f.garbageCollect)};return u.type="text/javascript",u.onerror=c,s=s||f.scriptCharset,s&&(u.charset=s),"addEventListener"in u?u.onload=l:"readyState"in u?u.onreadystatechange=function(){(this.readyState=="loaded"||this.readyState=="complete")&&l()}:u.onload=l,u.src=t,(e.documentHead||document.getElementsByTagName("head")[0]).appendChild(u),u},removeScriptElement:function(t){return y[t]&&(e.cleanupScriptElement(y[t],!0,!!e.getConfig("garbageCollect")),delete y[t]),e},cleanupScriptElement:function(t,n,r){var i;t.onload=t.onreadystatechange=t.onerror=null;if(n){Ext.removeNode(t);if(r)for(i in t)try{i!="src"&&(t[i]=null),delete t[i]}catch(s){}}return e},loadScript:function(t){var n=e.getConfig(),r=typeof t=="string",i=r?t:t.url,s=!r&&t.onError,o=!r&&t.onLoad,u=!r&&t.scope,a=function(){e.numPendingFiles--,e.scriptsLoading--,s&&s.call(u,"Failed loading '"+i+"', please verify that the file exists"),e.numPendingFiles+e.scriptsLoading===0&&e.refreshQueue()},f=function(){e.numPendingFiles--,e.scriptsLoading--,o&&o.call(u),e.numPendingFiles+e.scriptsLoading===0&&e.refreshQueue()},l;e.isLoading=!0,e.numPendingFiles++,e.scriptsLoading++,l=n.disableCaching?i+"?"+n.disableCachingParam+"="+Ext.Date.now():i,y[i]=e.injectScriptElement(l,f,a)},loadScriptFile:function(t,n,r,i,s){if(m[t])return e;var o=e.getConfig(),u=t+(o.disableCaching?"?"+o.disableCachingParam+"="+Ext.Date.now():""),a=!1,f,l,c,h="";i=i||e,e.isLoading=!0;if(!s)c=function(){},y[t]=e.injectScriptElement(u,n,c,i);else{typeof XMLHttpRequest!="undefined"?f=new XMLHttpRequest:f=new ActiveXObject("Microsoft.XMLHTTP");try{f.open("GET",u,!1),f.send(null)}catch(p){a=!0}l=f.status===1223?204:f.status!==0||(self.location||{}).protocol!="file:"&&(self.location||{}).protocol!="ionp:"?f.status:200,a=a||l===0,!a&&(l>=200&&l<300||l===304)&&(Ext.isIE||(h="\n//@ sourceURL="+t),Ext.globalEval(f.responseText+h),n.call(i)),f=null}},syncRequire:function(){var t=e.syncModeEnabled;t||(e.syncModeEnabled=!0),e.require.apply(e,arguments),t||(e.syncModeEnabled=!1),e.refreshQueue()},require:function(n,r,i,o){var u={},a={},f=[],l=[],c=[],h=[],p,m,y,b,w,E,S,x,T,N,C;if(o){o=typeof o=="string"?[o]:o;for(x=0,N=o.length;x<N;x++){w=o[x];if(typeof w=="string"&&w.length>0){f=t.getNamesByExpression(w);for(T=0,C=f.length;T<C;T++)u[f[T]]=!0}}}n=typeof n=="string"?[n]:n?n:[],r?r.length>0?p=function(){var e=[],n,i;for(n=0,i=h.length;n<i;n++)e.push(t.get(h[n]));return r.apply(this,e)}:p=r:p=Ext.emptyFn,i=i||Ext.global;for(x=0,N=n.length;x<N;x++){b=n[x];if(typeof b=="string"&&b.length>0){l=t.getNamesByExpression(b),C=l.length;for(T=0;T<C;T++)S=l[T],u[S]!==!0&&(h.push(S),!t.isCreated(S)&&!a[S]&&(a[S]=!0,c.push(S)))}}if(c.length>0){if(!e.config.enabled)throw new Error("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(c.length>1?"es":"")+": "+c.join(", "));m=e.syncModeEnabled,m||d.push({requires:c.slice(),callback:p,scope:i}),N=c.length;for(x=0;x<N;x++)E=c[x],y=e.getPath(E),m&&v.hasOwnProperty(E)&&(v[E]||(e.numPendingFiles--,e.removeScriptElement(y),delete v[E])),v.hasOwnProperty(E)||(v[E]=!1,g[E]=y,e.numPendingFiles++,e.loadScriptFile(y,s(e.onFileLoaded,[E,y],e),s(e.onFileLoadError,[E,y],e),e,m));if(m){p.call(i);if(N===1)return t.get(E)}return e}return p.call(i),e},onFileLoaded:function(t,n){var r=v[t];e.numLoadedFiles++,v[t]=!0,m[n]=!0,r||e.numPendingFiles--,e.numPendingFiles===0&&e.refreshQueue()},onFileLoadError:function(t,n,r,i){e.numPendingFiles--,e.hasFileLoadError=!0},addUsedClasses:function(t){var n,r,i;if(t){t=typeof t=="string"?[t]:t;for(r=0,i=t.length;r<i;r++)n=t[r],typeof n=="string"&&!Ext.Array.contains(w,n)&&w.push(n)}return e},triggerReady:function(){var t,n=w;if(e.isLoading){e.isLoading=!1;if(n.length!==0)return n=n.slice(),w.length=0,e.require(n,e.triggerReady,e),e}Ext.Array.sort(b,S);while(b.length&&!e.isLoading)t=b.shift(),t.fn.call(t.scope);return e},onReady:function(t,n,r,i){var s;r!==!1&&Ext.onDocumentReady&&(s=t,t=function(){Ext.onDocumentReady(s,n,i)}),e.isLoading?b.push({fn:t,scope:n,priority:i&&i.priority||0}):t.call(n)},historyPush:function(t){return t&&v.hasOwnProperty(t)&&!f[t]&&(f[t]=!0,l.push(t)),e}}),Ext.disableCacheBuster=function(e,t){var n=new Date;n.setTime(n.getTime()+(e?3650:-1)*24*60*60*1e3),n=n.toGMTString(),document.cookie="ext-cache=1; expires="+n+"; path="+(t||"/")},Ext.require=i(e,"require"),Ext.syncRequire=i(e,"syncRequire"),Ext.exclude=i(e,"exclude"),Ext.onReady=function(t,n,r){e.onReady(t,n,!0,r)},n.registerPreprocessor("loader",function(n,r,i,s){var o=this,u=[],f,l=t.getName(n),c,h,p,d,v,m,g,y,b;for(c=0,p=a.length;c<p;c++){m=a[c];if(r.hasOwnProperty(m)){g=r[m];if(typeof g=="string")u.push(g);else if(g instanceof Array)for(h=0,d=g.length;h<d;h++)v=g[h],typeof v=="string"&&u.push(v);else if(typeof g!="function")for(h in g)g.hasOwnProperty(h)&&(v=g[h],typeof v=="string"&&u.push(v))}}if(u.length===0)return;return e.require(u,function(){for(c=0,p=a.length;c<p;c++){m=a[c];if(r.hasOwnProperty(m)){g=r[m];if(typeof g=="string")r[m]=t.get(g);else if(g instanceof Array)for(h=0,d=g.length;h<d;h++)v=g[h],typeof v=="string"&&(r[m][h]=t.get(v));else if(typeof g!="function")for(var e in g)g.hasOwnProperty(e)&&(v=g[e],typeof v=="string"&&(r[m][e]=t.get(v)))}}s.call(o,n,r,i)}),!1},!0,"after","className"),t.registerPostprocessor("uses",function(t,n,r){var i=r.uses;i&&e.addUsedClasses(i)}),t.onCreated(e.historyPush)},Ext._classPathMetadata&&(Ext.Loader.addClassPathMappings(Ext._classPathMetadata),Ext._classPathMetadata=null),function(){var e=document.getElementsByTagName("script"),t=e[e.length-1],n=t.src,r=n.substring(0,n.lastIndexOf("/")+1),i=Ext.Loader;i.setConfig({enabled:!0,disableCaching:!0,paths:{Ext:r+"src"}})}(),Ext._endTime=(new Date).getTime(),Ext._beforereadyhandler&&Ext._beforereadyhandler(),Ext.Error=Ext.extend(Error,{statics:{ignore:!1,raise:function(e){e=e||{},Ext.isString(e)&&(e={msg:e});var t=this.raise.caller,n;t&&(t.$name&&(e.sourceMethod=t.$name),t.$owner&&(e.sourceClass=t.$owner.$className));if(Ext.Error.handle(e)!==!0)throw n=Ext.Error.prototype.toString.call(e),Ext.log({msg:n,level:"error",dump:e,stack:!0}),new Ext.Error(e)},handle:function(){return Ext.Error.ignore}},name:"Ext.Error",constructor:function(e){Ext.isString(e)&&(e={msg:e});var t=this;Ext.apply(t,e),t.message=t.message||t.msg},toString:function(){var e=this,t=e.sourceClass?e.sourceClass:"",n=e.sourceMethod?"."+e.sourceMethod+"(): ":"",r=e.msg||"(No description provided)";return t+n+r}}),Ext.deprecated=function(e){return Ext.emptyFn},Ext.JSON=new function(){var me=this,encodingFunction,decodingFunction,useNative=null,useHasOwn=!!{}.hasOwnProperty,isNative=function(){return useNative===null&&(useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"),useNative},pad=function(e){return e<10?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e,t){return e===null||e===undefined?"null":Ext.isDate(e)?Ext.JSON.encodeDate(e):Ext.isString(e)?Ext.JSON.encodeString(e):typeof e=="number"?isFinite(e)?String(e):"null":Ext.isBoolean(e)?String(e):e.toJSON?e.toJSON():Ext.isArray(e)?encodeArray(e,t):Ext.isObject(e)?encodeObject(e,t):typeof e=="function"?"null":"undefined"},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(e){return'"'+e.replace(charToReplace,function(e){var t=m[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(e,t){var n=["[",""],r=e.length,i;for(i=0;i<r;i+=1)n.push(Ext.JSON.encodeValue(e[i]),",");return n[n.length-1]="]",n.join("")},encodeObject=function(e,t){var n=["{",""],r,i;for(r in e){i=e[r];if(!useHasOwn||e.hasOwnProperty(r)){if(typeof i=="function"||i===undefined)continue;n.push(Ext.JSON.encodeValue(r),":",Ext.JSON.encodeValue(i),",")}}return n[n.length-1]="}",n.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},me.encode=function(e){return encodingFunction||(encodingFunction=isNative()?JSON.stringify:me.encodeValue),encodingFunction(e)},me.decode=function(e,t){decodingFunction||(decodingFunction=isNative()?JSON.parse:doDecode);try{return decodingFunction(e)}catch(n){if(t===!0)return null;Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+e})}}},Ext.encode=Ext.JSON.encode,Ext.decode=Ext.JSON.decode
,Ext.apply(Ext,{userAgent:navigator.userAgent.toLowerCase(),cache:{},idSeed:1e3,windowId:"ext-window",documentId:"ext-document",isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!0,rootHierarchyState:{},addCacheEntry:function(e,t,n){n=n||t.dom;var r=Ext.cache,i=e||t&&t.id||n.id,s=r[i]||(r[i]={data:{},events:{},dom:n,skipGarbageCollection:!!n.getElementById||!!n.navigator});return t&&(t.$cache=s,s.el=t),s},updateCacheEntry:function(e,t){return e.dom=t,e.el&&(e.el.dom=t),e},id:function(e,t){var n=this,r="";return e=Ext.getDom(e,!0)||{},e===document?e.id=n.documentId:e===window&&(e.id=n.windowId),e.id||(n.isSandboxed&&(r=Ext.sandboxName.toLowerCase()+"-"),e.id=r+(t||"ext-gen")+ ++Ext.idSeed),e.id},escapeId:function(){var e=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,t=/([\W]{1})/g,n=/^(\d)/g,r=function(e,t){return"\\"+t},i=function(e,t){return"\\00"+t.charCodeAt(0).toString(16)+" "};return function(s){return e.test(s)?s:s.replace(t,r).replace(n,i)}}(),getBody:function(){var e;return function(){return e||(e=Ext.get(document.body))}}(),getHead:function(){var e;return function(){return e||(e=Ext.get(document.getElementsByTagName("head")[0]))}}(),getDoc:function(){var e;return function(){return e||(e=Ext.get(document))}}(),getOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},destroy:function(){var e=arguments.length,t,n;for(t=0;t<e;t++)n=arguments[t],n&&(Ext.isArray(n)?this.destroy.apply(this,n):n.isStore?n.destroyStore():Ext.isFunction(n.destroy)?n.destroy():n.dom&&n.remove())},callback:function(e,t,n,r){var i,s;return Ext.isFunction(e)?i=e:t&&Ext.isString(e)&&(i=t[e]),i&&(n=n||[],t=t||window,r?Ext.defer(i,r,t,n):s=i.apply(t,n)),s},resolveMethod:function(e,t){return Ext.isFunction(e)?e:t[e]},htmlEncode:function(e){return Ext.String.htmlEncode(e)},htmlDecode:function(e){return Ext.String.htmlDecode(e)},urlAppend:function(e,t){return Ext.String.urlAppend(e,t)}}),Ext.ns=Ext.namespace,window.undefined=window.undefined,function(){var e=function(e){return e.test(Ext.userAgent)},t=document.compatMode=="CSS1Compat",n=function(e,t){var n;return e&&(n=t.exec(Ext.userAgent))?parseFloat(n[1]):0},r=document.documentMode,i=e(/opera/),s=i&&e(/version\/10\.5/),o=e(/\bchrome\b/),u=e(/webkit/),a=!o&&e(/safari/),f=a&&e(/applewebkit\/4/),l=a&&e(/version\/3/),c=a&&e(/version\/4/),h=a&&e(/version\/5\.0/),p=a&&e(/version\/5/),d=!i&&(e(/msie/)||e(/trident/)),v=d&&(e(/msie 7/)&&r!=8&&r!=9&&r!=10||r==7),m=d&&(e(/msie 8/)&&r!=7&&r!=9&&r!=10||r==8),g=d&&(e(/msie 9/)&&r!=7&&r!=8&&r!=10||r==9),y=d&&(e(/msie 10/)&&r!=7&&r!=8&&r!=9||r==10),b=d&&(e(/trident\/7\.0/)&&r!=7&&r!=8&&r!=9&&r!=10||r==11),w=d&&e(/msie 6/),E=!u&&!d&&e(/gecko/),S=E&&e(/rv:1\.9/),x=E&&e(/rv:2\.0/),T=E&&e(/rv:5\./),N=E&&e(/rv:10\./),C=S&&e(/rv:1\.9\.0/),k=S&&e(/rv:1\.9\.1/),L=S&&e(/rv:1\.9\.2/),A=e(/windows|win32/),O=e(/macintosh|mac os x/),M=e(/linux/),_=null,D=n(!0,/\bchrome\/(\d+\.\d+)/),P=n(!0,/\bfirefox\/(\d+\.\d+)/),H=n(d,/msie (\d+\.\d+)/),B=n(i,/version\/(\d+\.\d+)/),j=n(a,/version\/(\d+\.\d+)/),F=n(u,/webkit\/(\d+\.\d+)/),I=/^https/i.test(window.location.protocol),q;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(R){}q=function(){},q.info=q.warn=q.error=Ext.emptyFn,Ext.setVersion("ext","4.2.2.1144"),Ext.setVersion("extjs","4.2.2.1144"),Ext.apply(Ext,{SSL_SECURE_URL:I&&d?"javascript:''":"about:blank",plainTableCls:Ext.buildSettings.baseCSSPrefix+"table-plain",plainListCls:Ext.buildSettings.baseCSSPrefix+"list-plain",enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,getDom:function(e,t){if(!e||!document)return null;if(e.dom)return e.dom;if(typeof e=="string"){var n=Ext.getElementById(e);return n&&d&&t?e==n.getAttribute("id")?n:null:n}return e},removeNode:w||v||m?function(){var e;return function(t){if(t&&t.tagName.toUpperCase()!="BODY"){Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(t):Ext.EventManager.removeAll(t);var n=Ext.cache,r=t.id;n[r]&&(delete n[r].dom,delete n[r]),m&&t.parentNode&&t.parentNode.removeChild(t),e=e||document.createElement("div"),e.appendChild(t),e.innerHTML=""}}}():function(e){if(e&&e.parentNode&&e.tagName.toUpperCase()!="BODY"){Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(e):Ext.EventManager.removeAll(e);var t=Ext.cache,n=e.id;t[n]&&(delete t[n].dom,delete t[n]),e.parentNode.removeChild(e)}},isStrict:t,isIEQuirks:d&&!t&&(w||v||m||g),isOpera:i,isOpera10_5:s,isWebKit:u,isChrome:o,isSafari:a,isSafari3:l,isSafari4:c,isSafari5:p,isSafari5_0:h,isSafari2:f,isIE:d,isIE6:w,isIE7:v,isIE7m:w||v,isIE7p:d&&!w,isIE8:m,isIE8m:w||v||m,isIE8p:d&&!w&&!v,isIE9:g,isIE9m:w||v||m||g,isIE9p:d&&!(w||v||m),isIE10:y,isIE10m:w||v||m||g||y,isIE10p:d&&!(w||v||m||g),isIE11:b,isIE11m:w||v||m||g||y||b,isIE11p:d&&!(w||v||m||g||y),isGecko:E,isGecko3:S,isGecko4:x,isGecko5:T,isGecko10:N,isFF3_0:C,isFF3_5:k,isFF3_6:L,isFF4:4<=P&&P<5,isFF5:5<=P&&P<6,isFF10:10<=P&&P<11,isLinux:M,isWindows:A,isMac:O,chromeVersion:D,firefoxVersion:P,ieVersion:H,operaVersion:B,safariVersion:j,webKitVersion:F,isSecure:I,BLANK_IMAGE_URL:w||v?"//www.sencha.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",value:function(e,t,n){return Ext.isEmpty(e,n)?t:e},escapeRe:function(e){return e.replace(/([-.*+?\^${}()|\[\]\/\\])/g,"\\$1")},addBehaviors:function(e){if(!Ext.isReady)Ext.onReady(function(){Ext.addBehaviors(e)});else{var t={},n,r,i;for(r in e)(n=r.split("@"))[1]&&(i=n[0],t[i]||(t[i]=Ext.select(i)),t[i].on(n[1],e[r]));t=null}},getScrollbarSize:function(e){if(!Ext.isReady)return{};if(e||!_){var t=document.body,n=document.createElement("div");n.style.width=n.style.height="100px",n.style.overflow="scroll",n.style.position="absolute",t.appendChild(n),_={width:n.offsetWidth-n.clientWidth,height:n.offsetHeight-n.clientHeight},t.removeChild(n)}return _},getScrollBarWidth:function(e){var t=Ext.getScrollbarSize(e);return t.width+2},copyTo:function(e,t,n,r){typeof n=="string"&&(n=n.split(/[,;\s]/));var i,s=n?n.length:0,o;for(i=0;i<s;i++){o=n[i];if(r||t.hasOwnProperty(o))e[o]=t[o]}return e},destroyMembers:function(e){for(var t=1,n=arguments,r=n.length;t<r;t++)Ext.destroy(e[n[t]]),delete e[n[t]]},log:q,partition:function(e,t){var n=[[],[]],r,i,s=e.length;for(r=0;r<s;r++)i=e[r],n[t&&t(i,r,e)||!t&&i?0:1].push(i);return n},invoke:function(e,t){var n=[],r=Array.prototype.slice.call(arguments,2),i,s,o=e.length;for(i=0;i<o;i++)s=e[i],s&&typeof s[t]=="function"?n.push(s[t].apply(s,r)):n.push(undefined);return n},zip:function(){var e=Ext.partition(arguments,function(e){return typeof e!="function"}),t=e[0],n=e[1][0],r=Ext.max(Ext.pluck(t,"length")),i=[],s,o,u;for(s=0;s<r;s++){i[s]=[];if(n)i[s]=n.apply(n,Ext.pluck(t,s));else for(o=0,u=t.length;o<u;o++)i[s].push(t[o][s])}return i},toSentence:function(e,t){var n=e.length,r,i;return n<=1?e[0]:(r=e.slice(0,n-1),i=e[n-1],Ext.util.Format.format("{0} {1} {2}",r.join(", "),t||"and",i))},setGlyphFontFamily:function(e){Ext._glyphFontFamily=e},useShims:w})}(),Ext.application=function(e){var t,n,r,i=function(){Ext.onReady(function(){Ext.app.Application.instance=new t})};if(typeof e=="string")Ext.require(e,function(){t=Ext.ClassManager.get(e),i()});else{Ext.Loader.setPath(e.name,e.appFolder||"app");if(n=e.paths)for(r in n)n.hasOwnProperty(r)&&Ext.Loader.setPath(r,n[r]);e["paths processed"]=!0,Ext.define(e.name+".$application",Ext.apply({extend:"Ext.app.Application"},e),function(){t=this,i()})}},function(){Ext.ns("Ext.util");var e=Ext.util.Format={},t=/<\/?[^>]+>/gi,n=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,r=/\r?\n/g,i=/^#+$/,s=/[\d,\.#]+/,o=/[^\d\.#]/g,u,a={};Ext.apply(e,{thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencyAtEnd:!1,undef:function(e){return e!==undefined?e:""},defaultValue:function(e,t){return e!==undefined&&e!==""?e:t},substr:"ab".substr(-1)!="b"?function(e,t,n){var r=String(e);return t<0?r.substr(Math.max(r.length+t,0),n):r.substr(t,n)}:function(e,t,n){return String(e).substr(t,n)},lowercase:function(e){return String(e).toLowerCase()},uppercase:function(e){return String(e).toUpperCase()},usMoney:function(t){return e.currency(t,"$",2)},currency:function(t,n,r,i){var s="",o=",0",u=0;t-=0,t<0&&(t=-t,s="-"),r=Ext.isDefined(r)?r:e.currencyPrecision,o+=r>0?".":"";for(;u<r;u++)o+="0";return t=e.number(t,o),(i||e.currencyAtEnd)===!0?Ext.String.format("{0}{1}{2}",s,t,n||e.currencySign):Ext.String.format("{0}{1}{2}",s,n||e.currencySign,t)},date:function(e,t){return e?(Ext.isDate(e)||(e=new Date(Date.parse(e))),Ext.Date.dateFormat(e,t||Ext.Date.defaultFormat)):""},dateRenderer:function(t){return function(n){return e.date(n,t)}},stripTags:function(e){return e?String(e).replace(t,""):e},stripScripts:function(e){return e?String(e).replace(n,""):e},fileSize:function(){var e=1024,t=1048576,n=1073741824;return function(r){var i;return r<e?r===1?i="1 byte":i=r+" bytes":r<t?i=Math.round(r*10/e)/10+" KB":r<n?i=Math.round(r*10/t)/10+" MB":i=Math.round(r*10/n)/10+" GB",i}}(),math:function(){var e={};return function(t,n){return e[n]||(e[n]=Ext.functionFactory("v","return v "+n+";")),e[n](t)}}(),round:function(e,t){var n=Number(e);return typeof t=="number"&&(t=Math.pow(10,t),n=Math.round(e*t)/t),n},number:function(t,n){if(!n)return t;var r=a[n];if(!r){var f=n,l=e.thousandSeparator,c=e.decimalSeparator,h=0,p="",d,v,m,g,y,b;n.substr(n.length-2)=="/i"?(u||(u=new RegExp("[^\\d\\"+e.decimalSeparator+"]","g")),n=n.substr(0,n.length-2),d=n.indexOf(l)!=-1,v=n.replace(u,"").split(c)):(d=n.indexOf(",")!=-1,v=n.replace(o,"").split(".")),m=n.replace(s,""),v.length>2||v.length===2&&(h=v[1].length,y=i.test(v[1]),y&&(p='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "?0+$")')),b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(d?",thousandSeparator,thousands=[],j,n,i":"")+(m?',formatString="'+n+'",formatPattern=/[\\d,\\.#]+/':"")+",trailingZeroes;"+"return function(v){"+'if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";'+"neg=v<0;","absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+h+");",p,";"],d?(h&&(b[b.length]='parts=fnum.split(".");',b[b.length]="fnum=parts[0];"),b[b.length]="if(absVal>=1000) {",b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",h&&(b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];")):h&&(b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),y&&(b[b.length]='fnum=fnum.replace(trailingZeroes,"");'),b[b.length]='if(neg&&fnum!=="'+(h?"0."+Ext.String.repeat("0",h):"0")+'")fnum="-"+fnum;',b[b.length]="return ",m?b[b.length]="formatString.replace(formatPattern, fnum);":b[b.length]="fnum;",b[b.length]="};",r=a[f]=Ext.functionFactory("Ext",b.join(""))(Ext)}return r(t)},numberRenderer:function(t){return function(n){return e.number(n,t)}},attributes:function(e){if(typeof e=="object"){var t=[],n;for(n in e)t.push(n,'="',n==="style"?Ext.DomHelper.generateStyles(e[n],null,!0):Ext.htmlEncode(e[n]),'"');e=t.join("")}return e||""},plural:function(e,t,n){return e+" "+(e==1?t:n?n:t+"s")},nl2br:function(e){return Ext.isEmpty(e)?"":e.replace(r,"<br/>")},capitalize:Ext.String.capitalize,ellipsis:Ext.String.ellipsis,format:Ext.String.format,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,trim:Ext.String.trim,parseBox:function(e){e=e||0;if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};var t=e.split(" "),n=t.length;return n==1?t[1]=t[2]=t[3]=t[0]:n==2?(t[2]=t[0],t[3]=t[1]):n==3&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}},escapeRegex:function(e){return e.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")}})}(),Ext.define("Ext.util.TaskRunner",{interval:10,timerId:null,constructor:function(e){var t=this;typeof e=="number"?t.interval=e:e&&Ext.apply(t,e),t.tasks=[],t.timerFn=Ext.Function.bind(t.onTick,t)},newTask:function(e){var t=new Ext.util.TaskRunner.Task(e);return t.manager=this,t},start:function(e){var t=this,n=Ext.Date.now();return e.pending||(t.tasks.push(e),e.pending=!0),e.stopped=!1,e.taskStartTime=n,e.taskRunTime=e.fireOnStart!==!1?0:e.taskStartTime,e.taskRunCount=0,t.firing||(e.fireOnStart!==!1?t.startTimer(0,n):t.startTimer(e.interval,n)),e},stop:function(e){return e.stopped||(e.stopped=!0,e.onStop&&e.onStop.call(e.scope||e,e)),e},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1e99,onTick:function(){var e=this,t=e.tasks,n=Ext.Date.now(),r=1e99,i=t.length,s,o,u,a,f,l;e.timerId=null,e.firing=!0;for(u=0;u<i||u<(i=t.length);++u){a=t[u];if(!(l=a.stopped)){s=a.taskRunTime+a.interval;if(s<=n){f=1;try{f=a.run.apply(a.scope||a,a.args||[++a.taskRunCount])}catch(c){try{a.onError&&(f=a.onError.call(a.scope||a,a,c))}catch(h){}}a.taskRunTime=n,f===!1||a.taskRunCount===a.repeat?(e.stop(a),l=!0):(l=a.stopped,s=n+a.interval)}!l&&a.duration&&a.duration<=n-a.taskStartTime&&(e.stop(a),l=!0)}l?(a.pending=!1,o||(o=t.slice(0,u))):(o&&o.push(a),r>s&&(r=s))}o&&(e.tasks=o),e.firing=!1,e.tasks.length&&e.startTimer(r-n,Ext.Date.now()),e.fireIdleEvent!==!1&&Ext.EventManager.idleEvent.fire()},startTimer:function(e,t){var n=this,r=t+e,i=n.timerId;i&&n.nextExpires-r>n.interval&&(clearTimeout(i),i=null),i||(e<n.interval&&(e=n.interval),n.timerId=setTimeout(n.timerFn,e),n.nextExpires=r)}},function(){var e=this,t=e.prototype;t.destroy=t.stopAll,Ext.util.TaskManager=Ext.TaskManager=new e,e.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(e){Ext.apply(this,e)},restart:function(e){e!==undefined&&(this.interval=e),this.manager.start(this)},start:function(e){this.stopped&&this.restart(e)},stop:function(){this.manager.stop(this)}}),t=e.Task.prototype,t.destroy=t.stop}),Ext.define("Ext.util.TaskManager",{extend:Ext.util.TaskRunner,alternateClassName:["Ext.TaskManager"],singleton:!0}),Ext.define("Ext.perf.Accumulator",function(){function i(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function s(t){var n=t?t:r()-this.time,s=this,o=s.accum;++o.count,--o.depth||i(o.total,n),i(o.pure,n-s.childTime),e=s.parent,e&&(++e.accum.childCount,e.childTime+=n)}function o(){return{min:Number.MAX_VALUE,max:0,sum:0}}function u(e,t){return function(){var n=e.enter(),r=t.apply(this,arguments);return n.leave(),r}}function a(e){return Math.round(e*100)/100}function f(e,t,n,r){var i={avg:0,min:r.min,max:r.max,sum:0};return e&&(n=n||0,i.sum=r.sum-t*n,i.avg=i.sum/e),i}var e=null,t=Ext.global.chrome,n,r=function(){r=function(){return(new Date).getTime()};var e,n;if(Ext.isChrome&&t&&t.Interval)e=new t.Interval,e.start(),r=function(){return e.microseconds()/1e3};else if(window.ActiveXObject)try{n=new ActiveXObject("SenchaToolbox.Toolbox"),Ext.senchaToolbox=n,r=function(){return n.milliseconds}}catch(i){}else Date.now&&(r=Date.now);return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=r,r()};return{constructor:function(e){var t=this;t.count=t.childCount=t.depth=t.maxDepth=0,t.pure=o(),t.total=o(),t.name=e},statics:{getTimestamp:r},format:function(e){n||(n=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(e){return Math.round(e*100)/100}}));var t=this.getData(e);return t.name=this.name,t.pure.type="Pure",t.total.type="Total",t.times=[t.pure,t.total],n.apply(t)},getData:function(e){var t=this;return{count:t.count,childCount:t.childCount,depth:t.maxDepth,pure:f(t.count,t.childCount,e,t.pure),total:f(t.count,t.childCount,e,t.total)}},enter:function(){var t=this,n={accum:t,leave:s,childTime:0,parent:e};return++t.depth,t.maxDepth<t.depth&&(t.maxDepth=t.depth),e=n,n.time=r(),n},monitor:function(e,t,n){var r=this.enter();n?e.apply(t,n):e.call(t),r.leave()},report:function(){Ext.log(this.format())},tap:function(e,t){var n=this,r=typeof t=="string"?[t]:t,i,s,o,a,f,l,c,h;return h=function(){if(typeof e=="string"){i=Ext.global,a=e.split(".");for(o=0,f=a.length;o<f;++o)i=i[a[o]]}else i=e;for(o=0,f=r.length;o<f;++o)l=r[o],s=l.charAt(0)=="!",s?l=l.substring(1):s=!(l in i.prototype),c=s?i:i.prototype,c[l]=u(n,c[l])},Ext.ClassManager.onCreated(h,n,e),n}}}(),function(){Ext.perf.getTimestamp=this.getTimestamp}),Ext.define("Ext.perf.Monitor",{singleton:!0,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[],this.accumulatorsByName={}},calibrate:function(){var e=new Ext.perf.Accumulator("$"),t=e.total,n=Ext.perf.Accumulator.getTimestamp,r=0,i,s,o;o=n();do i=e.enter(),i.leave(),++r;while(t.sum<100);return s=n(),(s-o)/r},get:function(e){var t=this,n=t.accumulatorsByName[e];return n||(t.accumulatorsByName[e]=n=new Ext.perf.Accumulator(e),t.accumulators.push(n)),n},enter:function(e){return this.get(e).enter()},monitor:function(e,t,n){this.get(e).monitor(t,n)},report:function(){var e=this,t=e.accumulators,n=e.calibrate();t.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),e.updateGC(),Ext.log("Calibration: "+Math.round(n*100)/100+" msec/sample"),Ext.each(t,function(e){Ext.log(e.format(n))})},getData:function(e){var t={},n=this.accumulators;return Ext.each(n,function(n){if(e||n.count)t[n.name]=n.getData()}),t},reset:function(){Ext.each(this.accumulators,function(e){var t=e;t.count=t.childCount=t.depth=t.maxDepth=0,t.pure={min:Number.MAX_VALUE,max:0,sum:0},t.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var e=this.accumulatorsByName.GC,t=Ext.senchaToolbox,n;e&&(e.count=t.garbageCollectionCounter||0,e.count&&(n=e.pure,e.total.sum=n.sum=t.garbageCollectionMilliseconds,n.min=n.max=n.sum/e.count,n=e.total,n.min=n.max=n.sum/e.count))},watchGC:function(){Ext.perf.getTimestamp();var e=Ext.senchaToolbox;e&&(this.get("GC"),e.watchGarbageCollector(!1))},setup:function(e){e||(e={render:{"Ext.AbstractComponent":"render"},layout:{"Ext.layout.Context":"run"}}),this.currentConfig=e;var t,n,r,i,s;for(t in e)if(e.hasOwnProperty(t)){n=e[t],r=Ext.Perf.get(t);for(i in n)n.hasOwnProperty(i)&&(s=n[i],r.tap(i,s))}this.watchGC()}}),Ext.is={init:function(e){var t=this.platforms,n=t.length,r,i;e=e||window.navigator;for(r=0;r<n;r++)i=t[r],this[i.identity]=i.regex.test(e[i.property]);this.Desktop=this.Mac||this.Windows||this.Linux&&!this.Android,this.Tablet=this.iPad,this.Phone=!this.Desktop&&!this.Tablet,this.iOS=this.iPhone||this.iPad||this.iPod,this.Standalone=!!window.navigator.standalone},platforms:[{property:"platform",regex:/iPhone/i,identity:"iPhone"},{property:"platform",regex:/iPod/i,identity:"iPod"},{property:"userAgent",regex:/iPad/i,identity:"iPad"},{property:"userAgent",regex:/Blackberry/i,identity:"Blackberry"},{property:"userAgent",regex:/Android/i,identity:"Android"},{property:"platform",regex:/Mac/i,identity:"Mac"},{property:"platform",regex:/Win/i,identity:"Windows"},{property:"platform",regex:/Linux/i,identity:"Linux"}]},Ext.is.init(),function(){function n(){var e=Ext.isIE6?"IE6":Ext.isIE7?"IE7":Ext.isIE8?"IE8":Ext.isIE9?"IE9":Ext.isIE10?"IE10":"";return e?e+(Ext.isStrict?"-strict":"-quirks"):""}var e=function(e,t){var n=e.ownerDocument.defaultView,r=(n?n.getComputedStyle(e,null):e.currentStyle)||e.style;return r[t]},t={"IE6-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0],"IE6-strict":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,1,1,0,0,1,0,1,0,0,0],"IE7-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0],"IE7-strict":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,1,0,0,1,0,1,0,0,0],"IE8-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0],"IE8-strict":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,1,0,1,0,0,1],"IE9-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0],"IE9-strict":[0,1,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,1],"IE10-quirks":[1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1],"IE10-strict":[1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1]};Ext.supports={init:function(){var e=this,r=document,i=e.toRun||e.tests,s=i.length,o=s&&Ext.isReady&&r.createElement("div"),u=[],a=n(),f,l,c;o&&(o.innerHTML=['<div style="height:30px;width:50px;">','<div style="height:20px;width:20px;"></div>',"</div>",'<div style="width: 200px; height: 200px; position: relative; padding: 5px;">','<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>',"</div>",'<div style="position: absolute; left: 10%; top: 10%;"></div>','<div style="float:left; background-color:transparent;"></div>'].join(""),r.body.appendChild(o)),l=t[a];while(s--)f=i[s],c=l&&l[s],c!==undefined?e[f.identity]=c:o||f.early?e[f.identity]=f.fn.call(e,r,o):u.push(f);o&&r.body.removeChild(o),e.toRun=u},PointerEvents:"pointerEvents"in document.documentElement.style,LocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return!1}}(),CSS3BoxShadow:"boxShadow"in document.documentElement.style||"WebkitBoxShadow"in document.documentElement.style||"MozBoxShadow"in document.documentElement.style,ClassList:!!document.documentElement.classList,OrientationChange:typeof window.orientation!="undefined"&&"onorientationchange"in window,DeviceMotion:"ondevicemotion"in window,Touch:"ontouchstart"in window&&!Ext.is.Desktop,TimeoutActualLateness:function(){setTimeout(function(){Ext.supports.TimeoutActualLateness=arguments.length!==0},0)}(),tests:[{identity:"Transitions",fn:function(t,n){var r=["webkit","Moz","o","ms","khtml"],i="TransitionEnd",s=[r[0]+i,"transitionend",r[2]+i,r[3]+i,r[4]+i],o=r.length,u=0,a=!1;for(;u<o;u++)if(e(n,r[u]+"TransitionProperty")){Ext.supports.CSS3Prefix=r[u],Ext.supports.CSS3TransitionEnd=s[u],a=!0;break}return a}},{identity:"RightMargin",fn:function(e,t){var n=e.defaultView;return!n||n.getComputedStyle(t.firstChild.firstChild,null).marginRight=="0px"}},{identity:"DisplayChangeInputSelectionBug",early:!0,fn:function(){var e=Ext.webKitVersion;return 0<e&&e<533}},{identity:"DisplayChangeTextAreaSelectionBug",early:!0,fn:function(){var e=Ext.webKitVersion;return 0<e&&e<534.24}},{identity:"TransparentColor",fn:function(e,t,n){return n=e.defaultView,!n||n.getComputedStyle(t.lastChild,null).backgroundColor=="transparent"}},{identity:"ComputedStyle",fn:function(e,t,n){return n=e.defaultView,n&&n.getComputedStyle}},{identity:"Svg",fn:function(e){return!!e.createElementNS&&!!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{identity:"Canvas",fn:function(e){return!!e.createElement("canvas").getContext}},{identity:"Vml",fn:function(e){var t=e.createElement("div");return t.innerHTML="<!--[if vml]><br/><br/><![endif]-->",t.childNodes.length==2}},{identity:"Float",fn:function(e,t){return!!t.lastChild.style.cssFloat}},{identity:"AudioTag",fn:function(e){return!!e.createElement("audio").canPlayType}},{identity:"History",fn:function(){var e=window.history;return!!e&&!!e.pushState}},{identity:"CSS3DTransform",fn:function(){return typeof WebKitCSSMatrix!="undefined"&&(new WebKitCSSMatrix).hasOwnProperty("m41")}},{identity:"CSS3LinearGradient",fn:function(e,t){var n="background-image:",r="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",i="linear-gradient(left top, black, white)",s="-moz-"+i,o="-ms-"+i,u="-o-"+i,a=[n+r,n+i,n+s,n+o,n+u];return t.style.cssText=a.join(";"),(""+t.style.backgroundImage).indexOf("gradient")!==-1&&!Ext.isIE9}},{identity:"CSS3BorderRadius",fn:function(e,t){var n=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],r=!1,i;for(i=0;i<n.length;i++)if(document.body.style[n[i]]!==undefined)return!0;return r}},{identity:"GeoLocation",fn:function(){return typeof navigator!="undefined"&&"geolocation"in navigator||typeof google!="undefined"&&typeof google.gears!="undefined"}},{identity:"MouseEnterLeave",fn:function(e,t){return"onmouseenter"in t&&"onmouseleave"in t}},{identity:"MouseWheel",fn:function(e,t){return"onmousewheel"in t}},{identity:"Opacity",fn:function(e,t){return Ext.isIE6||Ext.isIE7||Ext.isIE8?!1:(t.firstChild.style.cssText="opacity:0.73",t.firstChild.style.opacity=="0.73")}},{identity:"Placeholder",fn:function(e){return"placeholder"in e.createElement("input")}},{identity:"Direct2DBug",fn:function(){return Ext.isString(document.body.style.msTransformOrigin)&&Ext.isIE10m}},{identity:"BoundingClientRect",fn:function(e,t){return Ext.isFunction(t.getBoundingClientRect)}},{identity:"RotatedBoundingClientRect",fn:function(){var e=document.body,t=!1,n=document.createElement("div"),r=n.style;return n.getBoundingClientRect&&(r.WebkitTransform=r.MozTransform=r.OTransform=r.transform="rotate(90deg)",r.width="100px",r.height="30px",e.appendChild(n),t=n.getBoundingClientRect().height!==100,e.removeChild(n)),t}},{identity:"IncludePaddingInWidthCalculation",fn:function(e,t){return t.childNodes[1].firstChild.offsetWidth==210}},{identity:"IncludePaddingInHeightCalculation",fn:function(e,t){return t.childNodes[1].firstChild.offsetHeight==210}},{identity:"ArraySort",fn:function(){var e=[1,2,3,4,5].sort(function(){return 0});return e[0]===1&&e[1]===2&&e[2]===3&&e[3]===4&&e[4]===5}},{identity:"Range",fn:function(){return!!document.createRange}},{identity:"CreateContextualFragment",fn:function(){var e=Ext.supports.Range?document.createRange():!1;return e&&!!e.createContextualFragment}},{identity:"WindowOnError",fn:function(){return Ext.isIE||Ext.isGecko||Ext.webKitVersion>=534.16}},{identity:"TextAreaMaxLength",fn:function(){var e=document.createElement("textarea");return"maxlength"in e}},{identity:"GetPositionPercentage",fn:function(t,n){return e(n.childNodes[2],"left")=="10%"}},{identity:"PercentageHeightOverflowBug",fn:function(e){var t=!1,n,r;return Ext.getScrollbarSize().height&&(r=e.createElement("div"),n=r.style,n.height="50px",n.width="50px",n.overflow="auto",n.position="absolute",r.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join(""),e.body.appendChild(r),r.firstChild.offsetHeight===50&&(t=!0),e.body.removeChild(r)),t}},{identity:"xOriginBug",fn:function(e,t){t.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var n=document.getElementById("b1").getBoundingClientRect(),r=document.getElementById("b2").getBoundingClientRect(),i=document.getElementById("b3").getBoundingClientRect();return r.left!==n.left&&i.right!==n.right}},{identity:"ScrollWidthInlinePaddingBug",fn:function(e){var t=!1,n,r;return r=e.createElement("div"),n=r.style,n.height="50px",n.width="50px",n.padding="10px",n.overflow="hidden",n.position="absolute",r.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',e.body.appendChild(r),r.scrollWidth===70&&(t=!0),e.body.removeChild(r),t}}]}}(),Ext.supports.init(),Ext.util.DelayedTask=function(e,t,n,r){var i=this,s,o=function(){clearInterval(i.id),i.id=null,e.apply(t,n||[]),Ext.EventManager.idleEvent.fire()};r=typeof r=="boolean"?r:!0,i.id=null,i.delay=function(u,a,f,l){r&&i.cancel(),typeof u=="number"&&(s=u),e=a||e,t=f||t,n=l||n,i.id||(i.id=setInterval(o,s))},i.cancel=function(){i.id&&(clearInterval(i.id),i.id=null)}},Ext.define("Ext.util.Event",function(){var e=Array.prototype.slice,t=Ext.Array.insert,n=Ext.Array.toArray,r=Ext.util.DelayedTask;return{isEvent:!0,suspended:0,noOptions:{},constructor:function(e,t){this.name=t,this.observable=e,this.listeners=[]},addListener:function(e,n,r){var i=this,s,o,u,a,f,l,c,h,p,d;n=n||i.observable;if(!i.isListening(e,n)){o=i.createListener(e,n,r),i.firing&&(i.listeners=i.listeners.slice(0)),s=i.listeners,h=c=s.length,u=r&&r.priority,f=i._highestNegativePriorityIndex,l=f!==undefined;if(u){a=u<0;if(!a||l)for(p=a?f:0;p<c;p++){d=s[p].o?s[p].o.priority||0:0;if(d<u){h=p;break}}else i._highestNegativePriorityIndex=h}else l&&(h=f);!a&&h<=f&&i._highestNegativePriorityIndex++,h===c?i.listeners[c]=o:t(i.listeners,h,[o])}},createListener:function(e,t,n){t=t||this.observable;var r=this,i={fn:e,scope:t,ev:r},s=e;return n&&(i.o=n,n.single&&(s=r.createSingle(s,i,n,t)),n.target&&(s=r.createTargeted(s,i,n,t)),n.delay&&(s=r.createDelayed(s,i,n,t)),n.buffer&&(s=r.createBuffered(s,i,n,t))),i.fireFn=s,i},findListener:function(e,t){var n=this.listeners,r=n.length,i,s;while(r--){i=n[r];if(i){s=i.scope;if(i.fn==e&&s==(t||this.observable))return r}}return-1},isListening:function(e,t){return this.findListener(e,t)!==-1},removeListener:function(e,t){var n=this,r,i,s,o;r=n.findListener(e,t);if(r!=-1){i=n.listeners[r],s=n._highestNegativePriorityIndex,n.firing&&(n.listeners=n.listeners.slice(0)),i.task&&(i.task.cancel(),delete i.task),o=i.tasks&&i.tasks.length;if(o){while(o--)i.tasks[o].cancel();delete i.tasks}return n.listeners.splice(r,1),s&&(r<s?n._highestNegativePriorityIndex--:r===s&&r===n.listeners.length&&delete n._highestNegativePriorityIndex),!0}return!1},clearListeners:function(){var e=this.listeners,t=e.length;while(t--)this.removeListener(e[t].fn,e[t].scope)},suspend:function(){this.suspended+=1},resume:function(){this.suspended&&this.suspended--},fire:function(){var t=this,n=t.listeners,r=n.length,i,s,o,u;if(!t.suspended&&r>0){t.firing=!0,s=arguments.length?e.call(arguments,0):[],u=s.length;for(i=0;i<r;i++){o=n[i],o.o&&(s[u]=o.o);if(o&&o.fireFn.apply(o.scope||t.observable,s)===!1)return t.firing=!1}}return t.firing=!1,!0},createTargeted:function(e,t,n,r){return function(){n.target===arguments[0]&&e.apply(r,arguments)}},createBuffered:function(e,t,i,s){return t.task=new r,function(){t.task.delay(i.buffer,e,s,n(arguments))}},createDelayed:function(e,t,i,s){return function(){var u=new r;t.tasks||(t.tasks=[]),t.tasks.push(u),u.delay(i.delay||10,e,s,n(arguments))}},createSingle:function(e,t,n,r){return function(){var n=t.ev;return n.removeListener(t.fn,r)&&n.observable&&n.observable.hasListeners[n.name]--,e.apply(r,arguments)}}}}),Ext.EventManager=new function(){var e=this,t=document,n=window,r=/\\/g,i=Ext.baseCSSPrefix,s=!Ext.isIE9&&"addEventListener"in t,o,u=function(){function a(e){n.push(i+e)}var e=t.body||t.getElementsByTagName("body")[0],n=[],r=[],s=Ext.supports.CSS3LinearGradient,o=Ext.supports.CSS3BorderRadius,u;return Ext.scopeCss||n.push(i+"body"),e?(u=e.parentNode,Ext.isIE&&Ext.isIE9m&&(a("ie"),Ext.isIE6?a("ie6"):(a("ie7p"),Ext.isIE7?a("ie7"):(a("ie8p"),Ext.isIE8?a("ie8"):(a("ie9p"),Ext.isIE9&&a("ie9")))),Ext.isIE7m&&a("ie7m"),Ext.isIE8m&&a("ie8m"),Ext.isIE9m&&a("ie9m"),(Ext.isIE7||Ext.isIE8)&&a("ie78")),Ext.isIE10&&a("ie10"),Ext.isGecko&&(a("gecko"),Ext.isGecko3&&a("gecko3"),Ext.isGecko4&&a("gecko4"),Ext.isGecko5&&a("gecko5")),Ext.isOpera&&a("opera"),Ext.isWebKit&&a("webkit"),Ext.isSafari&&(a("safari"),Ext.isSafari2&&a("safari2"),Ext.isSafari3&&a("safari3"),Ext.isSafari4&&a("safari4"),Ext.isSafari5&&a("safari5"),Ext.isSafari5_0&&a("safari5_0")),Ext.isChrome&&a("chrome"),Ext.isMac&&a("mac"),Ext.isLinux&&a("linux"),o||a("nbr"),s||a("nlg"),u&&(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)?Ext.isBorderBox=!1:Ext.isBorderBox=!0,Ext.isBorderBox||r.push(i+"content-box"),Ext.isStrict?r.push(i+"strict"):r.push(i+"quirks"),Ext.fly(u,"_internal").addCls(r)),Ext.fly(e,"_internal").addCls(n),!0):!1};Ext.apply(e,{hasBoundOnReady:!1,hasFiredReady:!1,deferReadyEvent:1,onReadyChain:[],readyEvent:function(){return o=new Ext.util.Event,o.fire=function(){Ext._beforeReadyTime=Ext._beforeReadyTime||(new Date).getTime(),o.self.prototype.fire.apply(o,arguments),Ext._afterReadytime=(new Date).getTime()},o}(),idleEvent:new Ext.util.Event,isReadyPaused:function(){return/[?&]ext-pauseReadyFire\b/i.test(location.search)&&!Ext._continueFireReady},bindReadyEvent:function(){if(e.hasBoundOnReady)return;t.readyState=="complete"?e.onReadyEvent({type:t.readyState||"body"}):(t.addEventListener("DOMContentLoaded",e.onReadyEvent,!1),n.addEventListener("load",e.onReadyEvent,!1),e.hasBoundOnReady=!0)},onReadyEvent:function(r){r&&r.type&&e.onReadyChain.push(r.type),e.hasBoundOnReady&&(t.removeEventListener("DOMContentLoaded",e.onReadyEvent,!1),n.removeEventListener("load",e.onReadyEvent,!1)),Ext.isReady||e.fireDocReady()},fireDocReady:function(){Ext.isReady||(Ext._readyTime=(new Date).getTime(),Ext.isReady=!0,Ext.supports.init(),e.onWindowUnload(),o.onReadyChain=e.onReadyChain,Ext.isNumber(e.deferReadyEvent)?(Ext.Function.defer(e.fireReadyEvent,e.deferReadyEvent),e.hasDocReadyTimer=!0):e.fireReadyEvent
())},fireReadyEvent:function(){e.hasDocReadyTimer=!1,e.isFiring=!0;while(o.listeners.length&&!e.isReadyPaused())o.fire();e.isFiring=!1,e.hasFiredReady=!0,Ext.EventManager.idleEvent.fire()},onDocumentReady:function(t,n,r){r=r||{},r.single=!0,o.addListener(t,n,r),!e.isFiring&&!e.hasDocReadyTimer&&(Ext.isReady?e.fireReadyEvent():e.bindReadyEvent())},stoppedMouseDownEvent:new Ext.util.Event,propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(e){var r;return e=Ext.getDom(e),e===t||e===n?r=e===t?Ext.documentId:Ext.windowId:r=Ext.id(e),Ext.cache[r]||Ext.addCacheEntry(r,null,e),r},prepareListenerConfig:function(t,n,r){var i=e.propRe,s,o,u;for(s in n)n.hasOwnProperty(s)&&(i.test(s)||(o=n[s],typeof o=="function"?u=[t,s,o,n.scope,n]:u=[t,s,o.fn,o.scope,o],r?e.removeListener.apply(e,u):e.addListener.apply(e,u)))},mouseEnterLeaveRe:/mouseenter|mouseleave/,normalizeEvent:function(t,n){return e.mouseEnterLeaveRe.test(t)&&!Ext.supports.MouseEnterLeave?(n&&(n=Ext.Function.createInterceptor(n,e.contains)),t=t=="mouseenter"?"mouseover":"mouseout"):t=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera&&(t="DOMMouseScroll"),{eventName:t,fn:n}},contains:function(t){t=t.browserEvent||t;var n=t.currentTarget,r=e.getRelatedTarget(t);if(n&&n.firstChild)while(r){if(r===n)return!1;r=r.parentNode,r&&r.nodeType!=1&&(r=null)}return!0},addListener:function(n,r,i,o,u){if(typeof r!="string"){e.prepareListenerConfig(n,r);return}var a=n.dom||Ext.getDom(n),f,l,c,h,p,d,v;typeof i=="string"&&(i=Ext.resolveMethod(i,o||n)),u=u||{},l=e.normalizeEvent(r,i),c=e.createListenerWrap(a,r,l.fn,o,u),h=e.getEventListenerCache(n.dom?n:a,r),r=l.eventName,f=s||Ext.isIE9&&!a.attachEvent,f||(p=e.normalizeId(a),p&&(d=Ext.cache[p][r],d&&d.firing&&(h=e.cloneEventListenerCache(a,r)))),v=!!u.capture,h.push({fn:i,wrap:c,scope:o,capture:v}),f?a.addEventListener(r,c,v):h.length===1&&(p=e.normalizeId(a,!0),i=Ext.Function.bind(e.handleSingleEvent,e,[p,r],!0),Ext.cache[p][r]={firing:!1,fn:i},a.attachEvent("on"+r,i)),a==t&&r=="mousedown"&&e.stoppedMouseDownEvent.addListener(c)},normalizeId:function(t,n){var r;return t===document?r=Ext.documentId:t===window?r=Ext.windowId:r=t.id,!r&&n&&(r=e.getId(t)),r},handleSingleEvent:function(t,n,r){var i=e.getEventListenerCache(n,r),s=Ext.cache[n][r],o,u;if(s.firing)return;s.firing=!0;for(u=0,o=i.length;u<o;++u)i[u].wrap(t);s.firing=!1},removeListener:function(n,r,i,o){if(typeof r!="string"){e.prepareListenerConfig(n,r,!0);return}var u=Ext.getDom(n),a,f=n.dom?n:Ext.get(u),l=e.getEventListenerCache(f,r),c=e.normalizeEvent(r).eventName,h=l.length,p,d,v,m,g;if(!u)return;v=s||Ext.isIE9&&!u.detachEvent,typeof i=="string"&&(i=Ext.resolveMethod(i,o||n));while(h--){m=l[h];if(m&&(!i||m.fn==i)&&(!o||m.scope===o)){g=m.wrap,g.task&&(clearTimeout(g.task),delete g.task),p=g.tasks&&g.tasks.length;if(p){while(p--)clearTimeout(g.tasks[p]);delete g.tasks}v?u.removeEventListener(c,g,m.capture):(a=e.normalizeId(u,!0),d=Ext.cache[a][c],d&&d.firing&&(l=e.cloneEventListenerCache(u,c)),l.length===1&&(i=d.fn,delete Ext.cache[a][c],u.detachEvent("on"+c,i))),g&&u==t&&r=="mousedown"&&e.stoppedMouseDownEvent.removeListener(g),Ext.Array.erase(l,h,1)}}},removeAll:function(t){var n=typeof t=="string"?t:t.id,r,i,s;if(n&&(r=Ext.cache[n])){i=r.events;for(s in i)i.hasOwnProperty(s)&&e.removeListener(t,s);r.events={}}},purgeElement:function(t,n){var r=Ext.getDom(t),i=0,s,o;n?e.removeListener(t,n):e.removeAll(t);if(r&&r.childNodes){o=r.childNodes;for(s=o.length;i<s;i++)e.purgeElement(o[i],n)}},createListenerWrap:function(t,n,i,s,o){o=o||{};var u,a=function(f,l){var c;return u||(c=["if(!"+Ext.name+") {return;}"],o.buffer||o.delay||o.freezeEvent?(o.freezeEvent&&c.push("e = X.EventObject.setEvent(e);"),c.push("e = new X.EventObjectImpl(e, "+(o.freezeEvent?"true":"false")+");")):c.push("e = X.EventObject.setEvent(e);"),o.delegate?(c.push('var result, t = e.getTarget("'+(o.delegate+"").replace(r,"\\\\")+'", this);'),c.push("if(!t) {return;}")):c.push("var t = e.target, result;"),o.target&&c.push("if(e.target !== options.target) {return;}"),o.stopEvent?c.push("e.stopEvent();"):(o.preventDefault&&c.push("e.preventDefault();"),o.stopPropagation&&c.push("e.stopPropagation();")),o.normalized===!1&&c.push("e = e.browserEvent;"),o.buffer&&(c.push("(wrap.task && clearTimeout(wrap.task));"),c.push("wrap.task = setTimeout(function() {")),o.delay&&(c.push("wrap.tasks = wrap.tasks || [];"),c.push("wrap.tasks.push(setTimeout(function() {")),c.push("result = fn.call(scope || dom, e, t, options);"),o.single&&c.push("evtMgr.removeListener(dom, ename, fn, scope);"),n!=="mousemove"&&n!=="unload"&&(c.push("if (evtMgr.idleEvent.listeners.length) {"),c.push("evtMgr.idleEvent.fire();"),c.push("}")),o.delay&&c.push("}, "+o.delay+"));"),o.buffer&&c.push("}, "+o.buffer+");"),c.push("return result;"),u=Ext.cacheableFunctionFactory("e","options","fn","scope","ename","dom","wrap","args","X","evtMgr",c.join("\n"))),u.call(t,f,o,i,s,n,t,a,l,Ext,e)};return a},getEventCache:function(t){var n,r,i;return t?(t.$cache?n=t.$cache:(typeof t=="string"?i=t:i=e.getId(t),n=Ext.cache[i]),r=n.events||(n.events={}),r):[]},getEventListenerCache:function(t,n){var r=e.getEventCache(t);return r[n]||(r[n]=[])},cloneEventListenerCache:function(t,n){var r=e.getEventCache(t),i;return r[n]?i=r[n].slice(0):i=[],r[n]=i,i},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(t){e.stopPropagation(t),e.preventDefault(t)},stopPropagation:function(e){e=e.browserEvent||e,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e=e.browserEvent||e;if(e.preventDefault)e.preventDefault();else{e.returnValue=!1;try{if(e.ctrlKey||e.keyCode>111&&e.keyCode<124)e.keyCode=-1}catch(t){}}},getRelatedTarget:function(t){t=t.browserEvent||t;var n=t.relatedTarget;return n||(e.mouseLeaveRe.test(t.type)?n=t.toElement:e.mouseEnterRe.test(t.type)&&(n=t.fromElement)),e.resolveTextNode(n)},getPageX:function(t){return e.getPageXY(t)[0]},getPageY:function(t){return e.getPageXY(t)[1]},getPageXY:function(e){e=e.browserEvent||e;var n=e.pageX,r=e.pageY,i=t.documentElement,s=t.body;return!n&&n!==0&&(n=e.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),r=e.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),[n,r]},getTarget:function(t){return t=t.browserEvent||t,e.resolveTextNode(t.target||t.srcElement)},resolveTextNode:Ext.isGecko?function(e){if(e){var t=HTMLElement.prototype.toString.call(e);if(t!=="[xpconnect wrapped native prototype]"&&t!=="[object XULElement]")return e.nodeType==3?e.parentNode:e}}:function(e){return e&&e.nodeType==3?e.parentNode:e},curWidth:0,curHeight:0,onWindowResize:function(t,r,i){var s=e.resizeEvent;s||(e.resizeEvent=s=new Ext.util.Event,e.on(n,"resize",e.fireResize,null,{buffer:100})),s.addListener(t,r,i)},fireResize:function(){var t=Ext.Element.getViewWidth(),n=Ext.Element.getViewHeight();if(e.curHeight!=n||e.curWidth!=t)e.curHeight=n,e.curWidth=t,e.resizeEvent.fire(t,n)},removeResizeListener:function(t,n){var r=e.resizeEvent;r&&r.removeListener(t,n)},onWindowUnload:function(t,r,i){var s=e.unloadEvent;s||(e.unloadEvent=s=new Ext.util.Event,e.addListener(n,"unload",e.fireUnload)),t&&s.addListener(t,r,i)},fireUnload:function(){try{t=n=undefined;var r,i,s,o,u;e.unloadEvent.fire();if(Ext.isGecko3){r=Ext.ComponentQuery.query("gridview"),i=0,s=r.length;for(;i<s;i++)r[i].scrollToTop()}u=Ext.cache;for(o in u)u.hasOwnProperty(o)&&e.removeAll(o)}catch(a){}},removeUnloadListener:function(t,n){var r=e.unloadEvent;r&&r.removeListener(t,n)},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera&&Ext.operaVersion<12),getKeyEvent:function(){return e.useKeyDown?"keydown":"keypress"}}),!s&&document.attachEvent&&Ext.apply(e,{pollScroll:function(){var t=!0;try{document.documentElement.doScroll("left")}catch(n){t=!1}return t&&document.body?e.onReadyEvent({type:"doScroll"}):e.scrollTimeout=setTimeout(e.pollScroll,20),t},scrollTimeout:null,readyStatesRe:/complete/i,checkReadyState:function(){var t=document.readyState;e.readyStatesRe.test(t)&&e.onReadyEvent({type:t})},bindReadyEvent:function(){var n=!0;if(e.hasBoundOnReady)return;try{n=window.frameElement===undefined}catch(r){n=!1}if(!n||!t.documentElement.doScroll)e.pollScroll=Ext.emptyFn;if(e.pollScroll()===!0)return;t.readyState=="complete"?e.onReadyEvent({type:"already "+(t.readyState||"body")}):(t.attachEvent("onreadystatechange",e.checkReadyState),window.attachEvent("onload",e.onReadyEvent),e.hasBoundOnReady=!0)},onReadyEvent:function(t){t&&t.type&&e.onReadyChain.push(t.type),e.hasBoundOnReady&&(document.detachEvent("onreadystatechange",e.checkReadyState),window.detachEvent("onload",e.onReadyEvent)),Ext.isNumber(e.scrollTimeout)&&(clearTimeout(e.scrollTimeout),delete e.scrollTimeout),Ext.isReady||e.fireDocReady()},onReadyChain:[]}),Ext.onReady=function(e,t,n){Ext.Loader.onReady(e,t,!0,n)},Ext.onDocumentReady=e.onDocumentReady,e.on=e.addListener,e.un=e.removeListener,Ext.onReady(u)},Ext.define("Ext.util.Observable",function(e){var t=Ext.emptyFn,n=[],r=Array.prototype,i=r.slice,s=Ext.util.Event,o=function(e){if(e instanceof o)return e;this.observable=e,arguments[1].isObservable&&(this.managedListeners=!0),this.args=i.call(arguments,1)};return o.prototype.destroy=function(){this.observable[this.managedListeners?"mun":"un"].apply(this.observable,this.args)},{statics:{releaseCapture:function(e){e.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,t,n){var r=function(e,r){return t.apply(n,[e].concat(r))};this.captureArgs(e,r,n)},captureArgs:function(e,t,n){e.fireEventArgs=Ext.Function.createInterceptor(e.fireEventArgs,t,n)},observe:function(e,t){return e&&(e.isObservable||(Ext.applyIf(e,new this),this.captureArgs(e.prototype,e.fireEventArgs,e)),Ext.isObject(t)&&e.on(t)),e},prepareClass:function(t,n){if(!t.HasListeners){var r=function(){},i=t.superclass.HasListeners||n&&n.HasListeners||e.HasListeners;t.prototype.HasListeners=t.HasListeners=r,r.prototype=t.hasListeners=new i}}},isObservable:!0,eventsSuspended:0,constructor:function(e){var t=this;Ext.apply(t,e),t.hasListeners||(t.hasListeners=new t.HasListeners),t.events=t.events||{},t.listeners&&(t.on(t.listeners),t.listeners=null),t.bubbleEvents&&t.enableBubble(t.bubbleEvents)},onClassExtended:function(t){t.HasListeners||e.prepareClass(t)},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|destroyable|vertical|horizontal|freezeEvent|priority)$/,addManagedListener:function(e,n,r,i,s,u){var a=this,f=a.managedListeners=a.managedListeners||[],l,c;if(typeof n!="string"){c=arguments.length>4?s:n,s=n;for(n in s)s.hasOwnProperty(n)&&(l=s[n],a.eventOptionsRe.test(n)||a.addManagedListener(e,n,l.fn||l,l.scope||s.scope||i,l.fn?l:c,!0));if(s&&s.destroyable)return new o(a,e,s)}else{typeof r=="string"&&(i=i||a,r=Ext.resolveMethod(r,i));if(r!==t){f.push({item:e,ename:n,fn:r,scope:i,options:s}),e.on(n,r,i,s);if(!u&&s&&s.destroyable)return new o(a,e,n,r,i)}}},removeManagedListener:function(e,t,n,r){var i=this,s,o,u,a,f;if(typeof t!="string"){s=t;for(t in s)s.hasOwnProperty(t)&&(o=s[t],i.eventOptionsRe.test(t)||i.removeManagedListener(e,t,o.fn||o,o.scope||s.scope||r))}else{u=i.managedListeners?i.managedListeners.slice():[],typeof n=="string"&&(r=r||i,n=Ext.resolveMethod(n,r));for(f=0,a=u.length;f<a;f++)i.removeManagedListenerItem(!1,u[f],e,t,n,r)}},fireEvent:function(e){return this.fireEventArgs(e,i.call(arguments,1))},fireEventArgs:function(e,t){e=e.toLowerCase();var r=this,i=r.events,s=i&&i[e],o=!0;return s&&r.hasListeners[e]&&(o=r.continueFireEvent(e,t||n,s.bubble)),o},continueFireEvent:function(e,t,n){var r=this,i,s,o=!0;do{if(r.eventsSuspended)return(i=r.eventQueue)&&i.push([e,t,n]),o;s=r.events[e];if(s&&s!==!0&&(o=s.fire.apply(s,t))===!1)break}while(n&&(r=r.getBubbleParent()));return o},getBubbleParent:function(){var e=this,t=e.getBubbleTarget&&e.getBubbleTarget();return t&&t.isObservable?t:null},addListener:function(e,n,r,i){var u=this,a,f,l=0;if(typeof e!="string"){i=e;for(e in i)i.hasOwnProperty(e)&&(a=i[e],u.eventOptionsRe.test(e)||u.addListener(e,a.fn||a,a.scope||i.scope,a.fn?a:i));if(i&&i.destroyable)return new o(u,i)}else{e=e.toLowerCase(),f=u.events[e],f&&f.isEvent?l=f.listeners.length:u.events[e]=f=new s(u,e),typeof n=="string"&&(r=r||u,n=Ext.resolveMethod(n,r));if(n!==t){f.addListener(n,r,i),f.listeners.length!==l&&u.hasListeners._incr_(e);if(i&&i.destroyable)return new o(u,e,n,r,i)}}},removeListener:function(e,t,n){var r=this,i,s,o;if(typeof e!="string"){o=e;for(e in o)o.hasOwnProperty(e)&&(i=o[e],r.eventOptionsRe.test(e)||r.removeListener(e,i.fn||i,i.scope||o.scope))}else e=e.toLowerCase(),s=r.events[e],s&&s.isEvent&&(typeof t=="string"&&(n=n||r,t=Ext.resolveMethod(t,n)),s.removeListener(t,n)&&r.hasListeners._decr_(e))},clearListeners:function(){var e=this.events,t=this.hasListeners,n,r;for(r in e)e.hasOwnProperty(r)&&(n=e[r],n.isEvent&&(delete t[r],n.clearListeners()));this.clearManagedListeners()},clearManagedListeners:function(){var e=this.managedListeners||[],t=0,n=e.length;for(;t<n;t++)this.removeManagedListenerItem(!0,e[t]);this.managedListeners=[]},removeManagedListenerItem:function(e,t,n,r,i,s){if(e||t.item===n&&t.ename===r&&(!i||t.fn===i)&&(!s||t.scope===s))t.item.un(t.ename,t.fn,t.scope),e||Ext.Array.remove(this.managedListeners,t)},addEvents:function(e){var t=this,n=t.events||(t.events={}),r,i,s;if(typeof e=="string")for(i=arguments,s=i.length;s--;)r=i[s],n[r]||(n[r]=!0);else Ext.applyIf(t.events,e)},hasListener:function(e){return!!this.hasListeners[e.toLowerCase()]},suspendEvents:function(e){this.eventsSuspended+=1,e&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(e){var t=arguments.length,n,r;for(n=0;n<t;n++)r=this.events[arguments[n]],r&&r.suspend&&r.suspend()},resumeEvent:function(){var e=arguments.length,t,n;for(t=0;t<e;t++)n=this.events[arguments[t]],n&&n.resume&&n.resume()},resumeEvents:function(){var e=this,t=e.eventQueue,n,r;if(e.eventsSuspended&&!--e.eventsSuspended){delete e.eventQueue;if(t){n=t.length;for(r=0;r<n;r++)e.continueFireEvent.apply(e,t[r])}}},relayEvents:function(e,t,n){var r=this,i=t.length,s=0,u,a={};for(;s<i;s++)u=t[s],a[u]=r.createRelayer(n?n+u:u);return r.mon(e,a,null,null,undefined),new o(r,e,a)},createRelayer:function(e,t){var n=this;return function(){return n.fireEventArgs.call(n,e,t?i.apply(arguments,t):arguments)}},enableBubble:function(e){if(e){var t=this,n=typeof e=="string"?arguments:e,r=n.length,i=t.events,o,u,a;for(a=0;a<r;++a){o=n[a].toLowerCase(),u=i[o];if(!u||typeof u=="boolean")i[o]=u=new s(t,o);t.hasListeners._incr_(o),u.bubble=!0}}}}},function(){function s(e){var t=(this.methodEvents=this.methodEvents||{})[e],n,r,i,s=this,o;return t||(this.methodEvents[e]=t={},t.originalFn=this[e],t.methodName=e,t.before=[],t.after=[],o=function(e,t,o){(r=e.apply(t||s,o))!==undefined&&(typeof r=="object"?(r.returnValue!==undefined?n=r.returnValue:n=r,i=!!r.cancel):r===!1?i=!0:n=r)},this[e]=function(){var e=Array.prototype.slice.call(arguments,0),u,a,f;n=r=undefined,i=!1;for(a=0,f=t.before.length;a<f;a++){u=t.before[a],o(u.fn,u.scope,e);if(i)return n}(r=t.originalFn.apply(s,e))!==undefined&&(n=r);for(a=0,f=t.after.length;a<f;a++){u=t.after[a],o(u.fn,u.scope,e);if(i)return n}return n}),t}var e=this,t=e.prototype,n=function(){},r=function(t){if(!t.HasListeners){var n=t.prototype;e.prepareClass(t,this),t.onExtended(function(t){e.prepareClass(t)}),n.onClassMixedIn?Ext.override(t,{onClassMixedIn:function(e){r.call(this,e),this.callParent(arguments)}}):n.onClassMixedIn=function(e){r.call(this,e)}}},i;n.prototype={_decr_:function(e){--this[e]||delete this[e]},_incr_:function(e){this.hasOwnProperty(e)?++this[e]:this[e]=1}},t.HasListeners=e.HasListeners=n,e.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"}),e.observeClass=e.observe,Ext.globalEvents=i=new e({events:{idle:Ext.EventManager.idleEvent,ready:Ext.EventManager.readyEvent}}),Ext.on=function(){return i.addListener.apply(i,arguments)},Ext.un=function(){return i.removeListener.apply(i,arguments)},Ext.apply(t,{onClassMixedIn:r,beforeMethod:function(e,t,n){s.call(this,e).before.push({fn:t,scope:n})},afterMethod:function(e,t,n){s.call(this,e).after.push({fn:t,scope:n})},removeMethodListener:function(e,t,n){var r=this.getMethodEvent(e),i,s;for(i=0,s=r.before.length;i<s;i++)if(r.before[i].fn==t&&r.before[i].scope==n){Ext.Array.erase(r.before,i,1);return}for(i=0,s=r.after.length;i<s;i++)if(r.after[i].fn==t&&r.after[i].scope==n){Ext.Array.erase(r.after,i,1);return}},toggleEventLogging:function(e){Ext.util.Observable[e?"capture":"releaseCapture"](this,function(e){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(e,arguments)})}})}),Ext.define("Ext.EventObjectImpl",{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var e;return Ext.isGecko?e=3:Ext.isMac?(Ext.isSafari&&Ext.webKitVersion>=532?e=120:e=12,e*=3):e=120,e}(),clickRe:/(dbl)?click/,safariKeys:{3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap:Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2},constructor:function(e,t){e&&this.setEvent(e.browserEvent||e,t)},setEvent:function(e,t){var n=this,r;return e===n||e&&e.browserEvent?e:(n.browserEvent=e,e?(r=e.button?n.btnMap[e.button]:e.which?e.which-1:-1,n.clickRe.test(e.type)&&r==-1&&(r=0),n.type=e.type,n.button=r,n.shiftKey=e.shiftKey,n.ctrlKey=e.ctrlKey||e.metaKey||!1,n.altKey=e.altKey,n.keyCode=e.keyCode,n.charCode=e.charCode,n.target=Ext.EventManager.getTarget(e),n.relatedTarget=Ext.EventManager.getRelatedTarget(e),n.currentTarget=e.currentTarget,n.xy=t?n.getXY():null):(n.button=-1,n.shiftKey=!1,n.ctrlKey=!1,n.altKey=!1,n.keyCode=0,n.charCode=0,n.target=null,n.xy=[0,0]),n)},clone:function(){return new this.self(this.browserEvent,this)},stopEvent:function(){this.stopPropagation(),this.preventDefault()},preventDefault:function(){this.browserEvent&&Ext.EventManager.preventDefault(this.browserEvent)},stopPropagation:function(){var e=this.browserEvent;e&&(e.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),Ext.EventManager.stopPropagation(e))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(e){return Ext.isWebKit?this.safariKeys[e]||e:e},getPageX:function(){return this.getX()},getPageY:function(){return this.getY()},getX:function(){return this.getXY()[0]},getY:function(){return this.getXY()[1]},getXY:function(){return this.xy||(this.xy=Ext.EventManager.getPageXY(this.browserEvent)),this.xy},getTarget:function(e,t,n){return e?Ext.fly(this.target).findParent(e,t,n):n?Ext.get(this.target):this.target},getRelatedTarget:function(e,t,n){return e&&this.relatedTarget?Ext.fly(this.relatedTarget).findParent(e,t,n):n?Ext.get(this.relatedTarget):this.relatedTarget},correctWheelDelta:function(e){var t=this.WHEEL_SCALE,n=Math.round(e/t);return!n&&e&&(n=e<0?-1:1),n},getWheelDeltas:function(){var e=this,t=e.browserEvent,n=0,r=0;return Ext.isDefined(t.wheelDeltaX)?(n=t.wheelDeltaX,r=t.wheelDeltaY):t.wheelDelta?r=t.wheelDelta:t.detail&&(r=-t.detail,r>100?r=3:r<-100&&(r=-3),Ext.isDefined(t.axis)&&t.axis===t.HORIZONTAL_AXIS&&(n=r,r=0)),{x:e.correctWheelDelta(n),y:e.correctWheelDelta(r)}},getWheelDelta:function(){var e=this.getWheelDeltas();return e.y},within:function(e,t,n){if(e){var r=t?this.getRelatedTarget():this.getTarget(),i;if(r)return i=Ext.fly(e,"_internal").contains(r),!i&&n&&(i=r==Ext.getDom(e)),i}return!1},isNavKeyPress:function(){var e=this,t=this.normalizeKey(e.keyCode);return t>=33&&t<=40||t==e.RETURN||t==e.TAB||t==e.ESC},isSpecialKey:function(){var e=this.normalizeKey(this.keyCode);return this.type=="keypress"&&this.ctrlKey||this.isNavKeyPress()||e==this.BACKSPACE||e>=16&&e<=20||e>=44&&e<=46},getPoint:function(){var e=this.getXY();return new Ext.util.Point(e[0],e[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey||this.metaKey},injectEvent:function(){function r(t,n){var r=t!="mousemove";return function(i,s){var o=s.getXY(),u=e.createMouseEvent(i.ownerDocument,t,!0,r,n,o[0],o[1],s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget);e.fireEvent(i,t,u)}}function i(e,t){}var e,t={},n;return!Ext.isIE9m&&document.createEvent?e={createHtmlEvent:function(e,t,n,r){var i=e.createEvent("HTMLEvents");return i.initEvent(t,n,r),i},createMouseEvent:function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.createEvent("MouseEvents"),d=e.defaultView||window;return p.initMouseEvent?p.initMouseEvent(t,n,r,d,i,s,o,s,o,u,a,f,l,c,h):(p=e.createEvent("UIEvents"),p.initEvent(t,n,r),p.view=d,p.detail=i,p.screenX=s,p.screenY=o,p.clientX=s,p.clientY=o,p.ctrlKey=u,p.altKey=a,p.metaKey=l,p.shiftKey=f,p.button=c,p.relatedTarget=h),p},createUIEvent:function(e,t,n,r,i){var s=e.createEvent("UIEvents"),o=e.defaultView||window;return s.initUIEvent(t,n,r,o,i),s},fireEvent:function(e,t,n){e.dispatchEvent(n)},fixTarget:function(e){return e==window&&!e.dispatchEvent?document:e}}:document.createEventObject&&(n={0:1,1:4,2:2},e={createHtmlEvent:function(e,t,n,r){var i=e.createEventObject();return i.bubbles=n,i.cancelable=r,i},createMouseEvent:function(e,t,r,i,s,o,u,a,f,l,c,h,p){var d=e.createEventObject();return d.bubbles=r,d.cancelable=i,d.detail=s,d.screenX=o,d.screenY=u,d.clientX=o,d.clientY=u,d.ctrlKey=a,d.altKey=f,d.shiftKey=l,d.metaKey=c,d.button=n[h]||h,d.relatedTarget=p,d},createUIEvent:function(e,t,n,r,i){var s=e.createEventObject();return s.bubbles=n,s.cancelable=r,s},fireEvent:function(e,t,n){e.fireEvent("on"+t,n)},fixTarget:function(e){return e==document?document.documentElement:e}}),Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(n,r){var i=r[0],s=r[1];t[n]=function(t,r){var o=e.createHtmlEvent(n,i,s);e.fireEvent(t,n,o)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(e){t[e]=r(e,1)}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(n,r){var i=r[0],s=r[1];t[n]=function(t,r){var o=e.createUIEvent(t.ownerDocument,n,i,s,1);e.fireEvent(t,n,o)}}),e||(t={},e={fixTarget:Ext.identityFn}),function(n){var r=this,s=t[r.type]||i,o=n?n.dom||n:r.getTarget();o=e.fixTarget(o),s(o,r)}}()},function(){Ext.EventObject=new Ext.EventObjectImpl}),Ext.define("Ext.dom.AbstractQuery",{select:function(e,t){var n=[],r,i,s,o,u;t=t||document,typeof t=="string"&&(t=document.getElementById(t)),e=e.split(",");for(i=0,o=e.length;i<o;i++)if(typeof e[i]=="string")if(typeof e[i][0]=="@")r=t.getAttributeNode(e[i].substring(1)),n.push(r);else{r=t.querySelectorAll(e[i]);for(s=0,u=r.length;s<u;s++)n.push(r[s])}return n},selectNode:function(e,t){return this.select(e,t)[0]},is:function(e,t){return typeof e=="string"&&(e=document.getElementById(e)),this.select(t).indexOf(e)!==-1}}),Ext.define("Ext.dom.AbstractHelper",{emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,styleSepRe:/\s*(?::|;)\s*/,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},decamelizeName:function(){function n(e,t,n){return t+"-"+n.toLowerCase()}var e=/([a-z])([A-Z])/g,t={};return function(r){return t[r]||(t[r]=r.replace(e,n))}}(),generateMarkup:function(e,t){var n=this,r=typeof e,i,s,o,u,a;if(r=="string"||r=="number")t.push(e);else if(Ext.isArray(e))for(u=0;u<e.length;u++)e[u]&&n.generateMarkup(e[u],t);else{o=e.tag||"div",t.push("<",o);for(i in e)e.hasOwnProperty(i)&&(s=e[i],n.confRe.test(i)||(typeof s=="object"?(t.push(" ",i,'="'),n.generateStyles(s,t,!0).push('"')):t.push(" ",n.attributeTransform[i]||i,'="',s,'"')));n.emptyTags.test(o)?t.push("/>"):(t.push(">"),(s=e.tpl)&&s.applyOut(e.tplData,t),(s=e.html)&&t.push(s),(s=e.cn||e.children)&&n.generateMarkup(s,t),a=n.closeTags,t.push(a[o]||(a[o]="</"+o+">")))}return t},generateStyles:function(e,t,n){var r=t||[],i,s;for(i in e)e.hasOwnProperty(i)&&(s=e[i],i=this.decamelizeName(i),n&&Ext.String.hasHtmlCharacters(s)&&(s=Ext.String.htmlEncode(s)),r.push(i,":",s,";"));return t||r.join("")},markup:function(e){if(typeof e=="string")return e;var t=this.generateMarkup(e,[]);return t.join("")},applyStyles:function(e,t){if(t){var n=0,r;e=Ext.fly(e,"_applyStyles"),typeof t=="function"&&(t=t.call());if(typeof t=="string"){t=Ext.util.Format.trim(t).split(this.styleSepRe);for(r=t.length;n<r;)e.setStyle(t[n++],t[n++])}else Ext.isObject(t)&&e.setStyle(t)}},insertHtml:function(e,t,n){var r={},i,s,o,u;return e=e.toLowerCase(),r.beforebegin=["BeforeBegin","previousSibling"],r.afterend=["AfterEnd","nextSibling"],s=t.ownerDocument.createRange(),i="setStart"+(this.endRe.test(e)?"After":"Before"),r[e]?(s[i](t),o=s.createContextualFragment(n),t.parentNode.insertBefore(o,e=="beforebegin"?t:t.nextSibling),t[(e=="beforebegin"?"previous":"next")+"Sibling"]):(u=(e=="afterbegin"?"first":"last")+"Child",t.firstChild?(s[i](t[u]),o=s.createContextualFragment(n),e=="afterbegin"?t.insertBefore(o,t.firstChild):t.appendChild(o)):t.innerHTML=n,t[u])},insertBefore:function(e,t,n){return this.doInsert(e,t,n,"beforebegin")},insertAfter:function(e,t,n){return this.doInsert(e,t,n,"afterend","nextSibling")},insertFirst:function(e,t,n){return this.doInsert(e,t,n,"afterbegin","firstChild")},append:function(e,t,n){return this.doInsert(e,t,n,"beforeend","",!0)},overwrite:function(e,t,n){return e=Ext.getDom(e),e.innerHTML=this.markup(t),n?Ext.get(e.firstChild):e.firstChild},doInsert:function(e,t,n,r,i,s){var o=this.insertHtml(r,Ext.getDom(e),this.markup(t));return n?Ext.get(o,!0):o}}),Ext.define("Ext.dom.AbstractElement_static",{override:"Ext.dom.AbstractElement",inheritableStatics:{unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,msRe:/^-ms-/,cssRe:/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*)?;?/gi,opacityRe:/alpha\(opacity=(.*)\)/i,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:function(e,t){return typeof e=="number"?e+(t||this.defaultUnit||"px"):e===""||e=="auto"||e===undefined||e===null?e||"":this.unitRe.test(e)?e:e||""},isAncestor:function(e,t){var n=!1;e=Ext.getDom(e),t=Ext.getDom(t);if(e&&t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(e.compareDocumentPosition(t)&16);while(t=t.parentNode)n=t==e||n}return n},parseBox:function(e){e=e||0;var t=typeof e,n,r;return t==="number"?{top:e,right:e,bottom:e,left:e}:t!=="string"?e:(n=e.split(" "),r=n.length,r==1?n[1]=n[2]=n[3]=n[0]:r==2?(n[2]=n[0],n[3]=n[1]):r==3&&(n[3]=n[1]),{top:parseFloat(n[0])||0,right:parseFloat(n[1])||0,bottom:parseFloat(n[2])||0,left:parseFloat(n[3])||0})},unitizeBox:function(e,t){var n=this.addUnits,r=this.parseBox(e);return n(r.top,t)+" "+n(r.right,t)+" "+n(r.bottom,t)+" "+n(r.left,t)},camelReplaceFn:function(e,t){return t.charAt(1).toUpperCase()},normalize:function(e){return e=="float"&&(e=Ext.supports.Float?"cssFloat":"styleFloat"),this.propertyCache[e]||(this.propertyCache[e]=e.replace(this.msRe,"ms-").replace(this.camelRe,this.camelReplaceFn))},getDocumentHeight:function(){return Math.max(Ext.isStrict?document.documentElement.scrollHeight:document.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?document.documentElement.scrollWidth:document.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getViewSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getOrientation:function(){return Ext.supports.OrientationChange?window.orientation==0?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape"},fromPoint:function(e,t){return Ext.get(document.elementFromPoint(e,t))},parseStyles:function(e){var t={},n=this.cssRe,r;if(e){n.lastIndex=0;while(r=n.exec(e))t[r[1]]=r[2]||""}return t}}},function(){function r(e,t,n){return function(){e.selectionStart=t,e.selectionEnd=n}}var e=document,t=null,n=e.compatMode=="CSS1Compat";!("activeElement"in e)&&e.addEventListener&&e.addEventListener("focus",function(n){n&&n.target&&(t=n.target==e?null:n.target)},!0),this.addInheritableStatics({getActiveElement:function(){var n;try{n=e.activeElement}catch(r){}return n=n||t,n||(n=t=document.body),n},getRightMarginFixCleaner:function(n){var i=Ext.supports,s=i.DisplayChangeInputSelectionBug,o=i.DisplayChangeTextAreaSelectionBug,u,a,f,l;if(s||o){u=e.activeElement||t,a=u&&u.tagName;if(o&&a=="TEXTAREA"||s&&a=="INPUT"&&u.type=="text")if(Ext.dom.Element.isAncestor(n,u)){f=u.selectionStart,l=u.selectionEnd;if(Ext.isNumber(f)&&Ext.isNumber(l))return r(u,f,l)}}return Ext.emptyFn},getViewWidth:function(e){return e?Ext.dom.Element.getDocumentWidth():Ext.dom.Element.getViewportWidth()},getViewHeight:function(e){return e?Ext.dom.Element.getDocumentHeight():Ext.dom.Element.getViewportHeight()},getDocumentHeight:function(){return Math.max(n?e.documentElement.scrollHeight:e.body.scrollHeight,Ext.dom.Element.getViewportHeight())},getDocumentWidth:function(){return Math.max(n?e.documentElement.scrollWidth:e.body.scrollWidth,Ext.dom.Element.getViewportWidth())},getViewportHeight:function(){return Ext.isIE9m?Ext.isStrict?e.documentElement.clientHeight:e.body.clientHeight:self.innerHeight},getViewportWidth:function(){return!Ext.isStrict&&!Ext.isOpera?e.body.clientWidth:Ext.isIE9m?e.documentElement.clientWidth:self.innerWidth},serializeForm:function(e){var t=e.elements||(document.forms[e]||Ext.getDom(e)).elements,n=!1,r=encodeURIComponent,i="",s=t.length,o,u,a,f,l,c,h,p,d;for(c=0;c<s;c++){o=t[c],u=o.name,a=o.type,f=o.options;if(!o.disabled&&u)if(/select-(one|multiple)/i.test(a)){p=f.length;for(h=0;h<p;h++)d=f[h],d.selected&&(l=d.hasAttribute?d.hasAttribute("value"):d.getAttributeNode("value").specified,i+=Ext.String.format("{0}={1}&",r(u),r(l?d.value:d.text)))}else/file|undefined|reset|button/i.test(a)||(!/radio|checkbox/i.test(a)||!!o.checked)&&(a!="submit"||!n)&&(i+=r(u)+"="+r(o.value)+"&",n=/submit/i.test(a))}return i.substr(0,i.length-1)}})}),Ext.define("Ext.dom.AbstractElement_insertion",{override:"Ext.dom.AbstractElement",appendChild:function(e,t){var n=this,r,i,s,o;if(e.nodeType||e.dom||typeof e=="string")return e=Ext.getDom(e),n.dom.appendChild(e),t?e:Ext.get(e);if(e.length){r=Ext.fly(document.createDocumentFragment(),"_internal"),i=e.length,Ext.DomHelper.useDom=!0;for(s=0;s<i;s++)r.appendChild(e[s],t);return Ext.DomHelper.useDom=o,n.dom.appendChild(r.dom),t?r.dom:r}return n.createChild(e,null,t)},appendTo:function(e){return Ext.getDom(e).appendChild(this.dom),this},insertBefore:function(e){return e=Ext.getDom(e),e.parentNode.insertBefore(this.dom,e),this},insertAfter:function(e){return e=Ext.getDom(e),e.parentNode.insertBefore(this.dom,e.nextSibling),this},insertFirst:function(e,t){return e=e||{},e.nodeType||e.dom||typeof e=="string"?(e=Ext.getDom(e),this.dom.insertBefore(e,this.dom.firstChild),t?e:Ext.get(e)):this.createChild(e,this.dom.firstChild,t)},insertSibling:function(e,t,n){var r=this,i=Ext.core.DomHelper,s=i.useDom,o=(t||"before").toLowerCase()=="after",u,a,f,l;if(Ext.isArray(e)){a=Ext.fly(document.createDocumentFragment(),"_internal"),f=e.length,i.useDom=!0;for(l=0;l<f;l++)u=a.appendChild(e[l],n);return i.useDom=s,r.dom.parentNode.insertBefore(a.dom,o?r.dom.nextSibling:r.dom),u}return e=e||{},e.nodeType||e.dom?(u=r.dom.parentNode.insertBefore(Ext.getDom(e),o?r.dom.nextSibling:r.dom),n||(u=Ext.get(u))):o&&!r.dom.nextSibling?u=i.append(r.dom.parentNode,e,!n):u=i[o?"insertAfter":"insertBefore"](r.dom,e,!n),u},replace:function(e){return e=Ext.get(e),this.insertBefore(e),e.remove(),this
},replaceWith:function(e){var t=this;return e.nodeType||e.dom||typeof e=="string"?(e=Ext.get(e),t.dom.parentNode.insertBefore(e.dom,t.dom)):e=Ext.core.DomHelper.insertBefore(t.dom,e),delete Ext.cache[t.id],Ext.removeNode(t.dom),t.id=Ext.id(t.dom=e),Ext.dom.AbstractElement.addToCache(t.isFlyweight?new Ext.dom.AbstractElement(t.dom):t),t},createChild:function(e,t,n){return e=e||{tag:"div"},t?Ext.core.DomHelper.insertBefore(t,e,n!==!0):Ext.core.DomHelper.append(this.dom,e,n!==!0)},wrap:function(e,t,n){var r=Ext.core.DomHelper.insertBefore(this.dom,e||{tag:"div"},!0),i=r;return n&&(i=Ext.DomQuery.selectNode(n,r.dom)),i.appendChild(this.dom),t?r.dom:r},insertHtml:function(e,t,n){var r=Ext.core.DomHelper.insertHtml(e,this.dom,t);return n?Ext.get(r):r}}),Ext.define("Ext.dom.AbstractElement_style",{override:"Ext.dom.AbstractElement"},function(){var e=this,t=/\w/g,n=/\s+/,r=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,i=Ext.supports.ClassList,s="padding",o="margin",u="border",a="-left",f="-right",l="-top",c="-bottom",h="-width",p={l:u+a+h,r:u+f+h,t:u+l+h,b:u+c+h},d={l:s+a,r:s+f,t:s+l,b:s+c},v={l:o+a,r:o+f,t:o+l,b:o+c},m=new e.Fly;Ext.override(e,{styleHooks:{},addStyles:function(e,n){var r=0,i=(e||"").match(t),s,o=i.length,u,a=[];if(o==1)r=Math.abs(parseFloat(this.getStyle(n[i[0]]))||0);else if(o){for(s=0;s<o;s++)u=i[s],a.push(n[u]);a=this.getStyle(a);for(s=0;s<o;s++)u=i[s],r+=Math.abs(parseFloat(a[n[u]])||0)}return r},addCls:function(){var e=function(e){var r=this,i=r.dom,s=r.trimRe,o=e,u,a,f,l,c;typeof e=="string"&&(e=e.replace(s,"").split(n));if(i&&e&&!!(l=e.length))if(!i.className)i.className=e.join(" ");else{u=i.classList;if(u){for(f=0;f<l;++f)c=e[f],c&&(u.contains(c)||(a?a.push(c):(a=i.className.replace(s,""),a=a?[a,c]:[c])));a&&(i.className=a.join(" "))}else t(o)}return r},t=function(e){var t=this,n=t.dom,r;return n&&e&&e.length&&(r=Ext.Element.mergeClsList(n.className,e),r.changed&&(n.className=r.join(" "))),t};return i?e:t}(),removeCls:function(e){var t=this,r=t.dom,i,s,o;return typeof e=="string"&&(e=e.replace(t.trimRe,"").split(n)),r&&r.className&&e&&!!(s=e.length)&&(i=r.classList,s===1&&i?e[0]&&i.remove(e[0]):(o=Ext.Element.removeCls(r.className,e),o.changed&&(r.className=o.join(" ")))),t},radioCls:function(e){var t=this.dom.parentNode.childNodes,n,r,i;e=Ext.isArray(e)?e:[e];for(r=0,i=t.length;r<i;r++)n=t[r],n&&n.nodeType==1&&m.attach(n).removeCls(e);return this.addCls(e)},toggleCls:function(){var e=function(e){var n=this,r=n.dom,i;return r&&(e=e.replace(n.trimRe,""),e&&(i=r.classList,i?i.toggle(e):t(e))),n},t=function(e){return this.hasCls(e)?this.removeCls(e):this.addCls(e)};return i?e:t}(),hasCls:function(){var e=function(e){var n=this.dom,r=!1,i;return n&&e&&(i=n.classList,i?r=i.contains(e):r=t(e)),r},t=function(e){var t=this.dom;return t?e&&(" "+t.className+" ").indexOf(" "+e+" ")!==-1:!1};return i?e:t}(),replaceCls:function(e,t){return this.removeCls(e).addCls(t)},isStyle:function(e,t){return this.getStyle(e)==t},getStyle:function(t,n){var r=this,i=r.dom,s=typeof t!="string",o=r.styleHooks,u=t,a=u,f=1,l,c,h,p,d,v,m;if(s){h={},u=a[0],m=0;if(!(f=a.length))return h}if(!i||i.documentElement)return h||"";l=i.style,n?v=l:(v=i.ownerDocument.defaultView.getComputedStyle(i,null),v||(n=!0,v=l));do{p=o[u],p||(o[u]=p={name:e.normalize(u)}),p.get?d=p.get(i,r,n,v):(c=p.name,d=v[c]);if(!s)return d;h[u]=d,u=a[++m]}while(m<f);return h},getStyles:function(){var e=Ext.Array.slice(arguments),t=e.length,n;return t&&typeof e[t-1]=="boolean"&&(n=e.pop()),this.getStyle(e,n)},isTransparent:function(e){var t=this.getStyle(e);return t?r.test(t):!1},setStyle:function(t,n){var r=this,i=r.dom,s=r.styleHooks,o=i.style,u=t,a;if(typeof u=="string")a=s[u],a||(s[u]=a={name:e.normalize(u)}),n=n==null?"":n,a.set?a.set(i,n,r):o[a.name]=n,a.afterSet&&a.afterSet(i,n,r);else for(u in t)t.hasOwnProperty(u)&&(a=s[u],a||(s[u]=a={name:e.normalize(u)}),n=t[u],n=n==null?"":n,a.set?a.set(i,n,r):o[a.name]=n,a.afterSet&&a.afterSet(i,n,r));return r},getHeight:function(e){var t=this.dom,n=e?t.clientHeight-this.getPadding("tb"):t.offsetHeight;return n>0?n:0},getWidth:function(e){var t=this.dom,n=e?t.clientWidth-this.getPadding("lr"):t.offsetWidth;return n>0?n:0},setWidth:function(t){var n=this;return n.dom.style.width=e.addUnits(t),n},setHeight:function(t){var n=this;return n.dom.style.height=e.addUnits(t),n},getBorderWidth:function(e){return this.addStyles(e,p)},getPadding:function(e){return this.addStyles(e,d)},margins:v,applyStyles:function(t){if(t){var n,r,i=this.dom;typeof t=="function"&&(t=t.call());if(typeof t=="string"){t=Ext.util.Format.trim(t).split(/\s*(?::|;)\s*/);for(n=0,r=t.length;n<r;)i.style[e.normalize(t[n++])]=t[n++]}else typeof t=="object"&&this.setStyle(t)}},setSize:function(t,n){var r=this,i=r.dom.style;return Ext.isObject(t)&&(n=t.height,t=t.width),i.width=e.addUnits(t),i.height=e.addUnits(n),r},getViewSize:function(){var t=document,n=this.dom;return n==t||n==t.body?{width:e.getViewportWidth(),height:e.getViewportHeight()}:{width:n.clientWidth,height:n.clientHeight}},getSize:function(e){var t=this.dom;return{width:Math.max(0,e?t.clientWidth-this.getPadding("lr"):t.offsetWidth),height:Math.max(0,e?t.clientHeight-this.getPadding("tb"):t.offsetHeight)}},repaint:function(){var e=this.dom;return this.addCls(Ext.baseCSSPrefix+"repaint"),setTimeout(function(){m.attach(e).removeCls(Ext.baseCSSPrefix+"repaint")},1),this},getMargin:function(e){var t=this,n={t:"top",l:"left",r:"right",b:"bottom"},r,i,s;if(!e){s=[];for(r in t.margins)t.margins.hasOwnProperty(r)&&s.push(t.margins[r]);i=t.getStyle(s);if(i&&typeof i=="object")for(r in t.margins)t.margins.hasOwnProperty(r)&&(i[n[r]]=parseFloat(i[t.margins[r]])||0);return i}return t.addStyles(e,t.margins)},mask:function(e,t,n){var r=this,i=r.dom,s=(r.$cache||r.getCache()).data,o=s.mask,u,a,f="",l=Ext.baseCSSPrefix;r.addCls(l+"masked"),r.getStyle("position")=="static"&&r.addCls(l+"masked-relative"),o&&o.remove(),t&&typeof t=="string"?f=" "+t:f=" "+l+"mask-gray",u=r.createChild({role:"presentation",cls:l+"mask"+(n!==!1?"":" "+l+"mask-gray"),html:e?'<div class="'+(t||l+"mask-message")+'" role="presentation">'+e+"</div>":""}),a=r.getSize(),s.mask=u,i===document.body&&(a.height=window.innerHeight,r.orientationHandler&&Ext.EventManager.unOrientationChange(r.orientationHandler,r),r.orientationHandler=function(){a=r.getSize(),a.height=window.innerHeight,u.setSize(a)},Ext.EventManager.onOrientationChange(r.orientationHandler,r)),u.setSize(a),Ext.is.iPad&&Ext.repaint()},unmask:function(){var e=this,t=(e.$cache||e.getCache()).data,n=t.mask,r=Ext.baseCSSPrefix;n&&(n.remove(),delete t.mask),e.removeCls([r+"masked",r+"masked-relative"]),e.dom===document.body&&(Ext.EventManager.unOrientationChange(e.orientationHandler,e),delete e.orientationHandler)}}),Ext.onReady(function(){function a(e,t,n,i){var s=i[this.name]||"";return r.test(s)?"transparent":s}function f(e,t,n,r){var i=r.marginRight,s,o;return i!="0px"&&(s=e.style,o=s.display,s.display="inline-block",i=(n?r:e.ownerDocument.defaultView.getComputedStyle(e,null)).marginRight,s.display=o),i}function l(t,n,r,i){var s=i.marginRight,o,u,a;return s!="0px"&&(o=t.style,u=e.getRightMarginFixCleaner(t),a=o.display,o.display="inline-block",s=(r?i:t.ownerDocument.defaultView.getComputedStyle(t,"")).marginRight,o.display=a,u()),s}var t=Ext.supports,n,i,s,o,u;n=e.prototype.styleHooks,t.init&&t.init(),t.RightMargin||(n.marginRight=n["margin-right"]={name:"marginRight",get:t.DisplayChangeInputSelectionBug||t.DisplayChangeTextAreaSelectionBug?l:f});if(!t.TransparentColor){i=["background-color","border-color","color","outline-color"];for(s=i.length;s--;)o=i[s],u=e.normalize(o),n[o]=n[u]={name:u,get:a}}})}),Ext.define("Ext.dom.AbstractElement_traversal",{override:"Ext.dom.AbstractElement",findParent:function(e,t,n){var r=this.dom,i=document.documentElement,s=0,o;t=t||50,isNaN(t)&&(o=Ext.getDom(t),t=Number.MAX_VALUE);while(r&&r.nodeType==1&&s<t&&r!=i&&r!=o){if(Ext.DomQuery.is(r,e))return n?Ext.get(r):r;s++,r=r.parentNode}return null},findParentNode:function(e,t,n){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(e,t,n):null},up:function(e,t,n){return this.findParentNode(e,t,!n)},select:function(e,t){return Ext.dom.Element.select(e,this.dom,t)},query:function(e){return Ext.DomQuery.select(e,this.dom)},down:function(e,t){var n=Ext.DomQuery.selectNode(e,this.dom);return t?n:Ext.get(n)},child:function(e,t){var n,r=this,i;return i=Ext.id(r.dom),i=Ext.escapeId(i),n=Ext.DomQuery.selectNode("#"+i+" > "+e,r.dom),t?n:Ext.get(n)},parent:function(e,t){return this.matchNode("parentNode","parentNode",e,t)},next:function(e,t){return this.matchNode("nextSibling","nextSibling",e,t)},prev:function(e,t){return this.matchNode("previousSibling","previousSibling",e,t)},first:function(e,t){return this.matchNode("nextSibling","firstChild",e,t)},last:function(e,t){return this.matchNode("previousSibling","lastChild",e,t)},matchNode:function(e,t,n,r){if(!this.dom)return null;var i=this.dom[t];while(i){if(i.nodeType==1&&(!n||Ext.DomQuery.is(i,n)))return r?i:Ext.get(i);i=i[e]}return null},isAncestor:function(e){return this.self.isAncestor.call(this.self,this.dom,e)}}),Ext.define("Ext.dom.AbstractElement",{trimRe:/^\s+|\s+$/g,whitespaceRe:/\s/,inheritableStatics:{trimRe:/^\s+|\s+$/g,whitespaceRe:/\s/,get:function(e){var t=this,n=window.document,r=Ext.dom.Element,i,s,o,u,a;if(!e)return null;e.isFly&&(e=e.dom);if(typeof e=="string")return e==Ext.windowId?r.get(window):e==Ext.documentId?r.get(n):(i=Ext.cache[e],i&&i.skipGarbageCollection?(o=i.el,o):(u=n.getElementById(e))?(i&&i.el?o=Ext.updateCacheEntry(i,u).el:o=new r(u,!!i),o):null);return e.tagName?((a=e.id)||(a=Ext.id(e)),i=Ext.cache[a],i&&i.el?o=Ext.updateCacheEntry(i,e).el:o=new r(e,!!i),o):e instanceof t?(e!=t.docEl&&e!=t.winEl&&(a=e.id,i=Ext.cache[a],i&&Ext.updateCacheEntry(i,n.getElementById(a)||e.dom)),e):e.isComposite?e:Ext.isArray(e)?t.select(e):e===n?(t.docEl||(s=t.docEl=Ext.Object.chain(r.prototype),s.dom=n,s.el=s,s.id=Ext.id(n),t.addToCache(s)),t.docEl):e===window?(t.winEl||(t.winEl=Ext.Object.chain(r.prototype),t.winEl.dom=window,t.winEl.id=Ext.id(window),t.addToCache(t.winEl)),t.winEl):null},addToCache:function(e,t){return e&&Ext.addCacheEntry(t,e),e},addMethods:function(){this.override.apply(this,arguments)},mergeClsList:function(){var e,t={},n,r,i,s,o,u=[],a=!1,f=this.trimRe,l=this.whitespaceRe;for(n=0,r=arguments.length;n<r;n++){e=arguments[n],Ext.isString(e)&&(e=e.replace(f,"").split(l));if(e)for(i=0,s=e.length;i<s;i++)o=e[i],t[o]||(n&&(a=!0),t[o]=!0)}for(o in t)u.push(o);return u.changed=a,u},removeCls:function(e,t){var n={},r,i,s,o=[],u=!1,a=this.whitespaceRe;if(e){Ext.isString(e)&&(e=e.replace(this.trimRe,"").split(a));for(r=0,i=e.length;r<i;r++)n[e[r]]=!0}if(t){Ext.isString(t)&&(t=t.split(a));for(r=0,i=t.length;r<i;r++)s=t[r],n[s]&&(u=!0,delete n[s])}for(s in n)o.push(s);return o.changed=u,o},VISIBILITY:1,DISPLAY:2,OFFSETS:3,ASCLASS:4},constructor:function(e,t){var n=this,r=typeof e=="string"?document.getElementById(e):e,i;n.el=n;if(!r)return null;i=r.id;if(!t&&i&&Ext.cache[i])return Ext.cache[i].el;n.dom=r,n.id=i||Ext.id(r),n.self.addToCache(n)},set:function(e,t){var n=this.dom,r,i;for(r in e)e.hasOwnProperty(r)&&(i=e[r],r=="style"?this.applyStyles(i):r=="cls"?n.className=i:t!==!1?i===undefined?n.removeAttribute(r):n.setAttribute(r,i):n[r]=i);return this},defaultUnit:"px",is:function(e){return Ext.DomQuery.is(this.dom,e)},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},remove:function(){var e=this,t=e.dom;e.isAnimate&&e.stopAnimation(),t&&(Ext.removeNode(t),delete e.dom)},contains:function(){var e=function(e){var t;try{e=e.dom||e}catch(n){return!0}return t=HTMLElement.prototype.toString.call(e),t==="[xpconnect wrapped native prototype]"||t==="[object XULElement]"};return function(t){if(!t||Ext.isGecko3&&e(t))return!1;var n=this,r=t.dom||t;return r===n.dom||Ext.dom.AbstractElement.isAncestor(n.dom,r)}}(),getAttribute:function(e,t){var n=this.dom;return n.getAttributeNS(t,e)||n.getAttribute(t+":"+e)||n.getAttribute(e)||n[e]},update:function(e){return this.dom&&(this.dom.innerHTML=e),this},setHTML:function(e){return this.dom&&(this.dom.innerHTML=e),this},getHTML:function(){return this.dom?this.dom.innerHTML:""},hide:function(){return this.setVisible(!1),this},show:function(){return this.setVisible(!0),this},setVisible:function(e,t){var n=this,r=n.self,i=n.getVisibilityMode(),s=Ext.baseCSSPrefix;switch(i){case r.VISIBILITY:n.removeCls([s+"hidden-display",s+"hidden-offsets"]),n[e?"removeCls":"addCls"](s+"hidden-visibility");break;case r.DISPLAY:n.removeCls([s+"hidden-visibility",s+"hidden-offsets"]),n[e?"removeCls":"addCls"](s+"hidden-display");break;case r.OFFSETS:n.removeCls([s+"hidden-visibility",s+"hidden-display"]),n[e?"removeCls":"addCls"](s+"hidden-offsets")}return n},getVisibilityMode:function(){var e=(this.$cache||this.getCache()).data,t=e.visibilityMode;return t===undefined&&(e.visibilityMode=t=this.self.DISPLAY),t},setVisibilityMode:function(e){return(this.$cache||this.getCache()).data.visibilityMode=e,this},getCache:function(){var e=this,t=e.dom.id||Ext.id(e.dom);return e.$cache=Ext.cache[t]||Ext.addCacheEntry(t,null,e.dom),e.$cache}},function(){var e=this;Ext.getDetachedBody=function(){var t=e.detachedBodyEl;return t||(t=document.createElement("div"),e.detachedBodyEl=t=new e.Fly(t),t.isDetachedBody=!0),t},Ext.getElementById=function(t){var n=document.getElementById(t),r;return!n&&(r=e.detachedBodyEl)&&(n=r.dom.querySelector("#"+Ext.escapeId(t))),n},Ext.get=function(e){return Ext.dom.Element.get(e)},this.addStatics({Fly:new Ext.Class({extend:e,isFly:!0,constructor:function(e){this.dom=e,this.el=this},attach:function(e){return this.dom=e,this.$cache=e&&e.id?Ext.cache[e.id]:null,this}}),_flyweights:{},fly:function(t,n){var r=null,i=e._flyweights;return n=n||"_global",t=Ext.getDom(t),t&&(r=i[n]||(i[n]=new e.Fly),r.dom=t,r.$cache=t.id?Ext.cache[t.id]:null),r}}),Ext.fly=function(){return e.fly.apply(e,arguments)},function(e){e.destroy=e.remove,document.querySelector?e.getById=function(e,t){var n=document.getElementById(e)||this.dom.querySelector("#"+Ext.escapeId(e));return t?n:n?Ext.get(n):null}:e.getById=function(e,t){var n=document.getElementById(e);return t?n:n?Ext.get(n):null}}(this.prototype)}),Ext.define("Ext.dom.Helper",function(){var e="afterbegin",t="afterend",n="beforebegin",r="beforeend",i="<table>",s="</table>",o=i+"<tbody>",u="</tbody>"+s,a=o+"<tr>",f="</tr>"+u,l=document.createElement("div"),c=["BeforeBegin","previousSibling"],h=["AfterEnd","nextSibling"],p={beforebegin:c,afterend:h},d={beforebegin:c,afterend:h,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{extend:Ext.dom.AbstractHelper,tableRe:/^(?:table|thead|tbody|tr|td)$/i,tableElRe:/td|tr|tbody|thead/i,useDom:!1,createDom:function(e,t){var n,r=document,i,s,o,u,a,f;if(Ext.isArray(e)){n=r.createDocumentFragment();for(a=0,f=e.length;a<f;a++)this.createDom(e[a],n)}else if(typeof e=="string")n=r.createTextNode(e);else{n=r.createElement(e.tag||"div"),i=!!n.setAttribute;for(s in e)this.confRe.test(s)||(o=e[s],s=="cls"?n.className=o:i?n.setAttribute(s,o):n[s]=o);Ext.DomHelper.applyStyles(n,e.style),(u=e.children||e.cn)?this.createDom(u,n):e.html&&(n.innerHTML=e.html)}return t&&t.appendChild(n),n},ieTable:function(e,t,n,r){l.innerHTML=[t,n,r].join("");var i=-1,s=l,o;while(++i<e)s=s.firstChild;o=s.nextSibling;if(o){o=s,s=document.createDocumentFragment();while(o)nx=o.nextSibling,s.appendChild(o),o=nx}return s},insertIntoTable:function(l,c,h,p){var d,v,m=c==n,g=c==e,y=c==r,b=c==t;if(l=="td"&&(g||y)||!this.tableElRe.test(l)&&(m||b))return null;v=m?h:b?h.nextSibling:g?h.firstChild:null;if(m||b)h=h.parentNode;return l=="td"||l=="tr"&&(y||g)?d=this.ieTable(4,a,p,f):(l=="tbody"||l=="thead")&&(y||g)||l=="tr"&&(m||b)?d=this.ieTable(3,o,p,u):d=this.ieTable(2,i,p,s),h.insertBefore(d,v),d},createContextualFragment:function(e){var t=document.createDocumentFragment(),n,r;l.innerHTML=e,r=l.childNodes,n=r.length;while(n--)t.appendChild(r[0]);return t},applyStyles:function(e,t){t&&(typeof t=="function"&&(t=t.call()),typeof t=="string"&&(t=Ext.dom.Element.parseStyles(t)),typeof t=="object"&&Ext.fly(e,"_applyStyles").setStyle(t))},createHtml:function(e){return this.markup(e)},doInsert:function(e,t,n,r,i,s){e=e.dom||Ext.getDom(e);var o;return this.useDom?(o=this.createDom(t,null),s?e.appendChild(o):(i=="firstChild"?e:e.parentNode).insertBefore(o,e[i]||e)):o=this.insertHtml(r,e,this.markup(t)),n?Ext.get(o,!0):o},overwrite:function(e,t,n){var r;e=Ext.getDom(e),t=this.markup(t);if(Ext.isIE&&this.tableRe.test(e.tagName)){while(e.firstChild)e.removeChild(e.firstChild);return t?(r=this.insertHtml("afterbegin",e,t),n?Ext.get(r):r):null}return e.innerHTML=t,n?Ext.get(e.firstChild):e.firstChild},insertHtml:function(t,r,i){var s,o,u,a,f;t=t.toLowerCase();if(!r.insertAdjacentHTML)return r.nodeType===3&&(t=t==="afterbegin"?"beforebegin":t,t=t==="beforeend"?"afterend":t),o=Ext.supports.CreateContextualFragment?r.ownerDocument.createRange():undefined,a="setStart"+(this.endRe.test(t)?"After":"Before"),p[t]?(o?(o[a](r),f=o.createContextualFragment(i)):f=this.createContextualFragment(i),r.parentNode.insertBefore(f,t==n?r:r.nextSibling),r[(t==n?"previous":"next")+"Sibling"]):(u=(t==e?"first":"last")+"Child",r.firstChild?(o?(o[a](r[u]),f=o.createContextualFragment(i)):f=this.createContextualFragment(i),t==e?r.insertBefore(f,r.firstChild):r.appendChild(f)):r.innerHTML=i,r[u]);if(Ext.isIE&&this.tableRe.test(r.tagName)&&(f=this.insertIntoTable(r.tagName.toLowerCase(),t,r,i)))return f;if(s=d[t])return Ext.global.MSApp&&Ext.global.MSApp.execUnsafeLocalFunction?MSApp.execUnsafeLocalFunction(function(){r.insertAdjacentHTML(s[0],i)}):r.insertAdjacentHTML(s[0],i),r[s[1]]},createTemplate:function(e){var t=this.markup(e);return new Ext.Template(t)}}}(),function(){Ext.ns("Ext.core"),Ext.DomHelper=Ext.core.DomHelper=new this}),Ext.define("Ext.Template",{inheritableStatics:{from:function(e,t){return e=Ext.getDom(e),new this(e.value||e.innerHTML,t||"")}},constructor:function(e){var t=this,n=arguments,r=[],i=0,s=n.length,o;t.initialConfig={},s===1&&Ext.isArray(e)&&(n=e,s=n.length);if(s>1)for(;i<s;i++)o=n[i],typeof o=="object"?(Ext.apply(t.initialConfig,o),Ext.apply(t,o)):r.push(o);else r.push(e);t.html=r.join(""),t.compiled&&t.compile()},isTemplate:!0,disableFormats:!1,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,apply:function(e){function o(t,s,o,u){return o&&n?(u?u=[e[s]].concat(Ext.functionFactory("return ["+u+"];")()):u=[e[s]],o.substr(0,5)=="this."?i[o.substr(5)].apply(i,u):r[o].apply(r,u)):e[s]!==undefined?e[s]:""}var t=this,n=t.disableFormats!==!0,r=Ext.util.Format,i=t,s;return t.compiled?t.compiled(e).join(""):(s=t.html.replace(t.re,o),s)},applyOut:function(e,t){var n=this;return n.compiled?t.push.apply(t,n.compiled(e)):t.push(n.apply(e)),t},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(e,t){var n=this;return n.html=e,n.compiled=null,t?n.compile():n},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){function fn(e,t,n,r){return n&&useFormat?(r=r?","+r:"",n.substr(0,5)!="this."?n="fm."+n+"(":n="this."+n.substr(5)+"("):(r="",n="(values['"+t+"'] == undefined ? '' : "),"',"+n+"values['"+t+"']"+r+") ,'"}var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==!0,body,bodyReturn;return bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn),body="this.compiled = function(values){ return ['"+bodyReturn+"'];};",eval(body),me},insertFirst:function(e,t,n){return this.doInsert("afterBegin",e,t,n)},insertBefore:function(e,t,n){return this.doInsert("beforeBegin",e,t,n)},insertAfter:function(e,t,n){return this.doInsert("afterEnd",e,t,n)},append:function(e,t,n){return this.doInsert("beforeEnd",e,t,n)},doInsert:function(e,t,n,r){var i=Ext.DomHelper.insertHtml(e,Ext.getDom(t),this.apply(n));return r?Ext.get(i):i},overwrite:function(e,t,n){var r=Ext.DomHelper.overwrite(Ext.getDom(e),this.apply(t));return n?Ext.get(r):r}}),Ext.define("Ext.XTemplateParser",{constructor:function(e){Ext.apply(this,e)},doTpl:Ext.emptyFn,parse:function(e){var t=this,n=e.length,r={elseif:"elif"},i=t.topRe,s=t.actionsRe,o,u,a,f,l,c,h,p,d,v,m,g;t.level=0,t.stack=u=[];for(o=0;o<n;o=v){i.lastIndex=o,f=i.exec(e);if(!f){t.doText(e.substring(o,n));break}d=f.index,v=i.lastIndex,o<d&&t.doText(e.substring(o,d));if(f[1])v=e.indexOf("%}",d+2),t.doEval(e.substring(d+2,v)),v+=2;else if(f[2])v=e.indexOf("]}",d+2),t.doExpr(e.substring(d+2,v)),v+=2;else if(f[3])t.doTag(f[3]);else if(f[4]){m=null;while((p=s.exec(f[4]))!==null)a=p[2]||p[3],a&&(a=Ext.String.htmlDecode(a),l=p[1],l=r[l]||l,m=m||{},c=m[l],typeof c=="string"?m[l]=[c,a]:c?m[l].push(a):m[l]=a);if(!m)t.elseRe.test(f[4])?t.doElse():t.defaultRe.test(f[4])?t.doDefault():(t.doTpl(),u.push({type:"tpl"}));else if(m["if"])t.doIf(m["if"],m),u.push({type:"if"});else if(m["switch"])t.doSwitch(m["switch"],m),u.push({type:"switch"});else if(m["case"])t.doCase(m["case"],m);else if(m.elif)t.doElseIf(m.elif,m);else if(m["for"]){++t.level;if(g=t.propRe.exec(f[4]))m.propName=g[1]||g[2];t.doFor(m["for"],m),u.push({type:"for",actions:m})}else if(m.foreach){++t.level;if(g=t.propRe.exec(f[4]))m.propName=g[1]||g[2];t.doForEach(m.foreach,m),u.push({type:"foreach",actions:m})}else m.exec&&(t.doExec(m.exec,m),u.push({type:"exec",actions:m}))}else f[0].length===5?u.push({type:"tpl"}):(h=u.pop(),t.doEnd(h.type,h.actions),(h.type=="for"||h.type=="foreach")&&--t.level)}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/}),Ext.define("Ext.XTemplateCompiler",{extend:Ext.XTemplateParser,useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(e){var t=this,n=t.generate(e);return t.useEval?t.evalTpl(n):(new Function("Ext",n))(Ext)},generate:function(e){var t=this,n="var fm=Ext.util.Format,ts=Object.prototype.toString;",r;return t.maxLevel=0,t.body=["var c0=values, a0="+t.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"],t.definitions?typeof t.definitions=="string"?t.definitions=[t.definitions,n]:t.definitions.push(n):t.definitions=[n],t.switches=[],t.parse(e),t.definitions.push((t.useEval?"$=":"return")+" function ("+t.fnArgs+") {",t.body.join(""),"}"),r=t.definitions.join("\n"),t.definitions.length=t.body.length=t.switches.length=0,delete t.definitions,delete t.body,delete t.switches,r},doText:function(e){var t=this,n=t.body;e=e.replace(t.aposRe,"\\'").replace(t.newLineRe,"\\n"),t.useIndex?n.push("out[out.length]='",e,"'\n"):n.push("out.push('",e,"')\n")},doExpr:function(e){var t=this.body;t.push("if ((v="+e+") != null) out"),this.useIndex?t.push("[out.length]=v+''\n"):t.push(".push(v+'')\n")},doTag:function(e){var t=this.parseTag(e);t?this.doExpr(t):this.doText("{"+e+"}")},doElse:function(){this.body.push("} else {\n")},doEval:function(e){this.body.push(e,"\n")},doIf:function(e,t){var n=this;e==="."?n.body.push("if (values) {\n"):n.propNameRe.test(e)?n.body.push("if (",n.parseTag(e),") {\n"):n.body.push("if (",n.addFn(e),n.callFn,") {\n"),t.exec&&n.doExec(t.exec)},doElseIf:function(e,t){var n=this;e==="."?n.body.push("else if (values) {\n"):n.propNameRe.test(e)?n.body.push("} else if (",n.parseTag(e),") {\n"):n.body.push("} else if (",n.addFn(e),n.callFn,") {\n"),t.exec&&n.doExec(t.exec)},doSwitch:function(e){var t=this;e==="."?t.body.push("switch (values) {\n"):t.propNameRe.test(e)?t.body.push("switch (",t.parseTag(e),") {\n"):t.body.push("switch (",t.addFn(e),t.callFn,") {\n"),t.switches.push(0)},doCase:function(e){var t=this,n=Ext.isArray(e)?e:[e],r=t.switches.length-1,i,s;t.switches[r]?t.body.push("break;\n"):t.switches[r]++;for(s=0,r=n.length;s<r;++s)i=t.intRe.exec(n[s]),n[s]=i?i[1]:"'"+n[s].replace(t.aposRe,"\\'")+"'";t.body.push("case ",n.join(": case "),":\n")},doDefault:function(){var e=this,t=e.switches.length-1;e.switches[t]?e.body.push("break;\n"):e.switches[t]++,e.body.push("default:\n")},doEnd:function(e,t){var n=this,r=n.level-1;e=="for"||e=="foreach"?(t.exec&&n.doExec(t.exec),n.body.push("}\n"),n.body.push("parent=p",r,";values=r",r+1,";xcount=n"+r+";xindex=i",r,"+1;xkey=k",r,";\n")):(e=="if"||e=="switch")&&n.body.push("}\n")},doFor:function(e,t){var n=this,r,i=n.level,s=i-1,o;e==="."?r="values":n.propNameRe.test(e)?r=n.parseTag(e):r=n.addFn(e)+n.callFn,n.maxLevel<i&&(n.maxLevel=i,n.body.push("var ")),e=="."?o="c"+i:o="a"+s+"?c"+s+"[i"+s+"]:c"+s,n.body.push("i",i,"=0,n",i,"=0,c",i,"=",r,",a",i,"=",n.createArrayTest(i),",r",i,"=values,p",i,",k",i,";\n","p",i,"=parent=",o,"\n","if (c",i,"){if(a",i,"){n",i,"=c",i,".length;}else if (c",i,".isMixedCollection){c",i,"=c",i,".items;n",i,"=c",i,".length;}else if(c",i,".isStore){c",i,"=c",i,".data.items;n",i,"=c",i,".length;}else{c",i,"=[c",i,"];n",i,"=1;}}\n","for (xcount=n",i,";i",i,"<n"+i+";++i",i,"){\n","values=c",i,"[i",i,"]"),t.propName&&n.body.push(".",t.propName),n.body.push("\n","xindex=i",i,"+1\n"),t.between&&n.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},doForEach:function(e,t){var n=this,r,i=n.level,s=i-1,o;e==="."?r="values":n.propNameRe.test(e)?r=n.parseTag(e):r=n.addFn(e)+n.callFn,n.maxLevel<i&&(n.maxLevel=i,n.body.push("var ")),e=="."?o="c"+i:o="a"+s+"?c"+s+"[i"+s+"]:c"+s,n.body.push("i",i,"=-1,n",i,"=0,c",i,"=",r,",a",i,"=",n.createArrayTest(i),",r",i,"=values,p",i,",k",i,";\n","p",i,"=parent=",o,"\n","for(k",i," in c",i,"){\n","xindex=++i",i,"+1;\n","xkey=k",i,";\n","values=c",i,"[k",i,"];"),t.propName&&n.body.push(".",t.propName),t.between&&n.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},createArrayTest:"isArray"in Array?function(e){return"Array.isArray(c"+e+")"}:function(e){return"ts.call(c"+e+')==="[object Array]"'},doExec:function(e,t){var n=this,r="f"+n.definitions.length;n.definitions.push("function "+r+"("+n.fnArgs+") {"," try { with(values) {","  "+e," }} catch(e) {","}","}"),n.body.push(r+n.callFn+"\n")},addFn:function(e){var t=this,n="f"+t.definitions.length;return e==="."?t.definitions.push("function "+n+"("+t.fnArgs+") {"," return values","}"):e===".."?t.definitions.push("function "+n+"("+t.fnArgs+") {"," return parent","}"):t.definitions.push("function "+n+"("+t.fnArgs+") {"," try { with(values) {","  return("+e+")"," }} catch(e) {","}","}"),n},parseTag:function(e){var t=this,n=t.tagRe.exec(e),r,i,s,o,u;return n?(r=n[1],i=n[2],s=n[3],o=n[4],r=="."?(t.validTypes||(t.definitions.push("var validTypes={string:1,number:1,boolean:1};"),t.validTypes=!0),u='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):r=="#"?u="xindex":r=="$"?u="xkey":r.substr(0,7)=="parent."?u=r:isNaN(r)&&r.indexOf("-")==-1&&r.indexOf(".")!=-1?u="values."+r:u="values['"+r+"']",o&&(u="("+u+o+")"),!i||!t.useFormat?u:(s=s?","+s:"",i.substr(0,5)!="this."?i="fm."+i+"(":i+="(",i+u+s+")")):null},evalTpl:function($){return eval($),$},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},function(){var e=this.prototype;e.fnArgs="out,values,parent,xindex,xcount,xkey",e.callFn=".call(this,"+e.fnArgs+")"}),Ext.define("Ext.XTemplate",{extend:Ext.Template,emptyObj:{},apply:function(e,t){return this.applyOut(e,[],t).join("")},applyOut:function(e,t,n){var r=this,i;r.fn||(i=new Ext.XTemplateCompiler({useFormat:r.disableFormats!==!0,definitions:r.definitions}),r.fn=i.compile(r.html));try{r.fn(t,e,n||r.emptyObj,1,1)}catch(s){}return t},compile:function(){return this},statics:{getTpl:function(e,t){var n=e[t],r;if(n&&!n.isTemplate){n=Ext.ClassManager.dynInstantiate("Ext.XTemplate",n);if(e.hasOwnProperty(t))r=e;else for(r=e.self.prototype;r&&!r.hasOwnProperty(t);r=r.superclass);r[t]=n,n.owner=r}return n||null}}}),Ext.ns("Ext.core"),Ext.dom.Query=Ext.core.DomQuery=Ext.DomQuery=function(){function children(e){var t=e.firstChild,n=-1,r;while(t)r=t.nextSibling,t.nodeType==3&&!nonSpace.test(t.nodeValue)?e.removeChild(t):t.nodeIndex=++n,t=r;return this}function attrValue(e,t){return!e.tagName&&typeof e.length!="undefined"&&(e=e[0]),e?t=="for"?e.htmlFor:t=="class"||t=="className"?e.className:e.getAttribute(t)||e[t]:null}function getNodes(e,t,n){var r=[],i=-1,s,o,u,a,f,l,c,h,p;if(!e)return r;n=n.replace("|",":")||"*",typeof e.getElementsByTagName!="undefined"&&(e=[e]);if(!t){n=unescapeCssSelector(n);if(!supportsColonNsSeparator&&DQ.isXml(e[0])&&n.indexOf(":")!==-1)for(o=0;u=e[o];o++){s=u.getElementsByTagName(n.split(":").pop());for(a=0;f=s[a];a++)f.tagName===n&&(r[++i]=f)}else for(o=0;u=e[o];o++){s=u.getElementsByTagName(n);for(a=0;f=s[a];a++)r[++i]=f}}else if(t=="/"||t==">"){c=n.toUpperCase();for(o=0;u=e[o];o++){l=u.childNodes;for(a=0;p=l[a];a++)if(p.nodeName==c||p.nodeName==n||n=="*")r[++i]=p}}else if(t=="+"){c=n.toUpperCase();for(o=0;h=e[o];o++){while((h=h.nextSibling)&&h.nodeType!=1);h&&(h.nodeName==c||h.nodeName==n||n=="*")&&(r[++i]=h)}}else if(t=="~"){c=n.toUpperCase();for(o=0;h=e[o];o++)while(h=h.nextSibling)if(h.nodeName==c||h.nodeName==n||n=="*")r[++i]=h}return r}function concat(e,t){return e.push.apply(e,t),e}function byTag(e,t){if(e.tagName||e===doc)e=[e];if(!t)return e;var n=[],r=-1,i,s;t=t.toLowerCase();for(i=0;s=e[i];i++)s.nodeType==1&&s.tagName.toLowerCase()==t&&(n[++r]=s);return n}function byId(e,t){t=unescapeCssSelector(t);if(e.tagName||e===doc)e=[e];if(!t)return e;var n=[],r=-1,i,s;for(i=0;s=e[i];i++)if(s&&s.id==t)return n[++r]=s,n;return n}function byAttribute(e,t,n,r,i){var s=[],o=-1,u=i=="{",a=DQ.operators[r],f,l,c,h,p;n=unescapeCssSelector(n);for(h=0;p=e[h];h++)if(p.nodeType===1){c||(l=DQ.isXml(p),c=!0),l?f=p.getAttribute(t):u?f=DQ.getStyle(p,t):t=="class"||t=="className"?f=p.className:t=="for"?f=p.htmlFor:t=="href"?f=p.getAttribute("href",2):f=p.getAttribute(t);if(a&&a(f,n)||!a&&f)s[++o]=p}return s}function byPseudo(e,t,n){return n=unescapeCssSelector(n),DQ.pseudos[t](e,n)}function nodupIEXml(e){var t=++key,n,r,i,s;e[0].setAttribute("_nodup",t),n=[e[0]];for(r=1,i=e.length;r<i;r++)s=e[r],!s.getAttribute("_nodup")!=t&&(s.setAttribute("_nodup",t),n[n.length]=s);for(r=0,i=e.length;r<i;r++)e[r].removeAttribute("_nodup");return n}function nodup(e){if(!e)return[];var t=e.length,n,r,i=e,s,o=-1,u,a;if(!t||typeof e.nodeType!="undefined"||t==1)return e;if(isIE&&typeof e[0].selectSingleNode!="undefined")return nodupIEXml(e);u=++key,e[0]._nodup=u;for(r=1;n=e[r];r++){if(n._nodup==u){i=[];for(a=0;a<r;a++)i[++o]=e[a];for(a=r+1;s=e[a];a++)s._nodup!=u&&(s._nodup=u,i[++o]=s);return i}n._nodup=u}return i}function quickDiffIEXml(e,t){var n=++key,r=[],i,s;for(i=0,s=e.length;i<s;i++)e[i].setAttribute("_qdiff",n);for(i=0,s=t.length;i<s;i++)t[i].getAttribute("_qdiff")!=n&&(r[r.length]=t[i]);for(i=0,s=e.length;i<s;i++)e[i].removeAttribute("_qdiff");return r}function quickDiff(e,t){var n=e.length,r=++key,i=[],s,o;if(!n)return t;if(isIE&&typeof e[0].selectSingleNode!="undefined")return quickDiffIEXml(e,t);for(s=0;s<n;s++)e[s]._qdiff=r;for(s=0,o=t.length;s<o;s++)t[s]._qdiff!=r&&(i[i.length]=t[s]);return i}function quickId(e,t,n,r){if(e==n){r=unescapeCssSelector(r);var i=n.ownerDocument||n;return i.getElementById(r)}return e=getNodes(e,t,"*"),byId(e,r)}var DQ,doc=document,cache={},simpleCache={},valueCache={},useClassList=!!doc.documentElement.classList,useElementPointer=!!doc.documentElement.firstElementChild,useChildrenCollection=function(){var e=doc.createElement("div");return e.innerHTML="<!-- -->text<!-- -->",e.children&&e.children.length===0}(),nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*\|\\]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*#/,isIE=window.ActiveXObject?!0:!1,key=30803,longHex=/\\([0-9a-fA-F]{6})/g,shortHex=/\\([0-9a-fA-F]{1,6})\s{0,1}/g,nonHex=/\\([^0-9a-fA-F]{1})/g,escapes=/\\/g,num,hasEscapes,supportsColonNsSeparator=function(){var e,t='<r><a:b xmlns:a="n"></a:b></r>';return window.DOMParser?e=(new DOMParser).parseFromString(t,"application/xml"):(e=new ActiveXObject("Microsoft.XMLDOM"),e.loadXML(t)),!!e.getElementsByTagName("a:b").length}(),longHexToChar=function(e,t){return String.fromCharCode(parseInt(t,16))},shortToLongHex=function(e,t){while(t.length<6)t="0"+t;return"\\"+t},charToLongHex=function(e,t){return num=t.charCodeAt(0).toString(16),num.length===1&&(num="0"+num),"\\0000"+num},unescapeCssSelector=function(e){return hasEscapes?e.replace(longHex,longHexToChar):e},setupEscapes=function(e){return hasEscapes=e.indexOf("\\")>-1,hasEscapes&&(e=e.replace(shortHex,shortToLongHex).replace(nonHex,charToLongHex
).replace(escapes,"\\\\")),e};return eval("var batch = 30803, child, next, prev, byClassName;"),child=useChildrenCollection?function(t,n){return t.children[n]}:function(t,n){var r=0,i=t.firstChild;while(i){if(i.nodeType==1&&++r==n)return i;i=i.nextSibling}return null},next=useElementPointer?function(e){return e.nextElementSibling}:function(e){while((e=e.nextSibling)&&e.nodeType!=1);return e},prev=useElementPointer?function(e){return e.previousElementSibling}:function(e){while((e=e.previousSibling)&&e.nodeType!=1);return e},byClassName=useClassList?function(e,t){t=unescapeCssSelector(t);if(!t)return e;var n=[],r=-1,i,s,o;for(i=0;s=e[i];i++)o=s.classList,o?o.contains(t)&&(n[++r]=s):(" "+s.className+" ").indexOf(t)!==-1&&(n[++r]=s);return n}:function(e,t){t=unescapeCssSelector(t);if(!t)return e;var n=[],r=-1,i,s;for(i=0;s=e[i];i++)(" "+s.className+" ").indexOf(t)!==-1&&(n[++r]=s);return n},DQ={getStyle:function(e,t){return Ext.fly(e,"_DomQuery").getStyle(t)},compile:function(path,type){type=type||"select";var fn=["var f = function(root) {\n var mode; ++batch; var n = root || document;\n"],lastPath,matchers=DQ.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe),tokenMatch,matched,j,t,m;path=setupEscapes(path),lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));while(path.substr(0,1)=="/")path=path.substr(1);while(path&&lastPath!=path){lastPath=path,tokenMatch=path.match(tagTokenRe),type=="select"?tokenMatch?(tokenMatch[1]=="#"?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):path.substr(0,1)!="@"&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&(tokenMatch[1]=="#"?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));while(!(modeMatch=path.match(modeRe))){matched=!1;for(j=0;j<matchersLn;j++){t=matchers[j],m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(e,t){return m[t]}),path=path.replace(m[0],""),matched=!0;break}}matched||Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"compile",msg:'Error parsing selector. Parsing failed at "'+path+'"'})}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(e,t,n){t=t||doc,typeof t=="string"&&(t=doc.getElementById(t));var r=e.split(","),i=[],s,o,u,a;for(s=0,o=r.length;s<o;s++)u=r[s].replace(trimRe,""),cache[u]?setupEscapes(u):(cache[u]=DQ.compile(u,n),cache[u]||Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"jsSelect",msg:u+" is not a valid selector"})),a=cache[u](t),a&&a!==doc&&(i=i.concat(a));return r.length>1?nodup(i):i},isXml:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1},select:doc.querySelectorAll?function(e,t,n,r){t=t||doc;if(!DQ.isXml(t))try{return t.parentNode&&t.nodeType!==9&&e.indexOf(",")===-1&&!startIdRe.test(e)&&(e="#"+Ext.escapeId(Ext.id(t))+" "+e,t=t.parentNode),r?[t.querySelector(e)]:Ext.Array.toArray(t.querySelectorAll(e))}catch(i){}return DQ.jsSelect.call(this,e,t,n)}:function(e,t,n){return DQ.jsSelect.call(this,e,t,n)},selectNode:function(e,t){return Ext.DomQuery.select(e,t,null,!0)[0]},selectValue:function(e,t,n){e=e.replace(trimRe,""),valueCache[e]?setupEscapes(e):valueCache[e]=DQ.compile(e,"select");var r=valueCache[e](t),i;return r=r[0]?r[0]:r,typeof r.normalize=="function"&&r.normalize(),i=r&&r.firstChild?r.firstChild.nodeValue:null,i===null||i===undefined||i===""?n:i},selectNumber:function(e,t,n){var r=DQ.selectValue(e,t,n||0);return parseFloat(r)},is:function(e,t){typeof e=="string"&&(e=doc.getElementById(e));var n=Ext.isArray(e),r=DQ.filter(n?e:[e],t);return n?r.length==e.length:r.length>0},filter:function(e,t,n){t=t.replace(trimRe,""),simpleCache[t]?setupEscapes(t):simpleCache[t]=DQ.compile(t,"simple");var r=simpleCache[t](e);return n?quickDiff(r,e):r},matchers:[{re:/^\.([\w\-\\]+)/,select:useClassList?'n = byClassName(n, "{1}");':'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w\-\\]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-\.]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&e.indexOf(t)!==-1},"%=":function(e,t){return e%t===0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&(" "+e+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(e){var t=[],n=-1,r,i,s;for(i=0;s=r=e[i];i++){while((r=r.previousSibling)&&r.nodeType!=1);r||(t[++n]=s)}return t},"last-child":function(e){var t=[],n=-1,r,i,s;for(i=0;s=r=e[i];i++){while((r=r.nextSibling)&&r.nodeType!=1);r||(t[++n]=s)}return t},"nth-child":function(e,t){var n=[],r=-1,i=nthRe.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!nthRe2.test(t)&&"n+"+t||t),s=(i[1]||1)-0,o=i[2]-0,u,a,f,l,c;for(u=0;a=e[u];u++){c=a.parentNode;if(batch!=c._batch){f=0;for(l=c.firstChild;l;l=l.nextSibling)l.nodeType==1&&(l.nodeIndex=++f);c._batch=batch}if(s==1){if(o===0||a.nodeIndex==o)n[++r]=a}else(a.nodeIndex+o)%s===0&&(n[++r]=a)}return n},"only-child":function(e){var t=[],n=-1,r,i;for(r=0;i=e[r];r++)!prev(i)&&!next(i)&&(t[++n]=i);return t},empty:function(e){var t=[],n=-1,r,i,s,o,u,a;for(r=0;i=e[r];r++){s=i.childNodes,o=0,a=!0;while(u=s[o]){++o;if(u.nodeType==1||u.nodeType==3){a=!1;break}}a&&(t[++n]=i)}return t},contains:function(e,t){var n=[],r=-1,i,s;for(i=0;s=e[i];i++)(s.textContent||s.innerText||s.text||"").indexOf(t)!=-1&&(n[++r]=s);return n},nodeValue:function(e,t){var n=[],r=-1,i,s;for(i=0;s=e[i];i++)s.firstChild&&s.firstChild.nodeValue==t&&(n[++r]=s);return n},checked:function(e){var t=[],n=-1,r,i;for(r=0;i=e[r];r++)i.checked===!0&&(t[++n]=i);return t},not:function(e,t){return DQ.filter(e,t,!0)},any:function(e,t){var n=t.split("|"),r=[],i=-1,s,o,u,a;for(o=0;u=e[o];o++)for(a=0;s=n[a];a++)if(DQ.is(u,s)){r[++i]=u;break}return r},odd:function(e){return this["nth-child"](e,"odd")},even:function(e){return this["nth-child"](e,"even")},nth:function(e,t){return e[t-1]||[]},first:function(e){return e[0]||[]},last:function(e){return e[e.length-1]||[]},has:function(e,t){var n=DQ.select,r=[],i=-1,s,o;for(s=0;o=e[s];s++)n(t,o).length>0&&(r[++i]=o);return r},next:function(e,t){var n=DQ.is,r=[],i=-1,s,o,u;for(s=0;o=e[s];s++)u=next(o),u&&n(u,t)&&(r[++i]=o);return r},prev:function(e,t){var n=DQ.is,r=[],i=-1,s,o,u;for(s=0;o=e[s];s++)u=prev(o),u&&n(u,t)&&(r[++i]=o);return r},focusable:function(e){var t=e.length,n=[],r=0,i;for(;r<t;r++)i=e[r],Ext.fly(i,"_DomQuery").isFocusable()&&n.push(i);return n},visible:function(e,t){var n=e.length,r=[],i=0,s;for(;i<n;i++)s=e[i],Ext.fly(s,"_DomQuery").isVisible(t)&&r.push(s);return r}}}}(),Ext.query=Ext.DomQuery.select,Ext.define("Ext.dom.Element_anim",{override:"Ext.dom.Element",animate:function(e){var t=this,n=t.dom.id||Ext.id(t.dom),r,i,s;return Ext.fx.Manager.hasFxBlock(n)||(e.listeners&&(r=e.listeners,delete e.listeners),e.internalListeners&&(e.listeners=e.internalListeners,delete e.internalListeners),s=e.autoEnd,delete e.autoEnd,i=new Ext.fx.Anim(t.anim(e)),r&&i.on(r),Ext.fx.Manager.queueFx(i),s&&i.jumpToEnd()),t},anim:function(e){if(!Ext.isObject(e))return e?{}:!1;var t=this,n=e.duration||Ext.fx.Anim.prototype.duration,r=e.easing||"ease",i;return e.stopAnimation&&t.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(t.id)),Ext.fx.Manager.setFxDefaults(t.id,{delay:0}),i={target:t.dom,remove:e.remove,alternate:e.alternate||!1,duration:n,easing:r,callback:e.callback,listeners:e.listeners,iterations:e.iterations||1,scope:e.scope,block:e.block,concurrent:e.concurrent,delay:e.delay||0,paused:!0,keyframes:e.keyframes,from:e.from||{},to:Ext.apply({},e)},Ext.apply(i.to,e.to),delete i.to.to,delete i.to.from,delete i.to.remove,delete i.to.alternate,delete i.to.keyframes,delete i.to.iterations,delete i.to.listeners,delete i.to.target,delete i.to.paused,delete i.to.callback,delete i.to.scope,delete i.to.duration,delete i.to.easing,delete i.to.concurrent,delete i.to.block,delete i.to.stopAnimation,delete i.to.delay,i},slideIn:function(e,t,n){var r=this,i=r.dom,s=i.style,o,u,a,f;return e=e||"t",t=t||{},o=function(){var o=this,l=t.listeners,c=Ext.fly(i,"_anim"),h,p,d,v;n||c.fixDisplay(),h=c.getBox(),e!="t"&&e!="b"||h.height!==0?(e=="l"||e=="r")&&h.width===0&&(h.width=i.scrollWidth):h.height=i.scrollHeight,p=c.getStyles("width","height","left","right","top","bottom","position","z-index",!0),c.setSize(h.width,h.height),t.preserveScroll&&(a=c.cacheScrollValues()),v=c.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+c.dom.id,style:{visibility:n?"visible":"hidden"}}),f=v.dom.parentNode,v.setPositioning(c.getPositioning(!0)),v.isStyle("position","static")&&v.position("relative"),c.clearPositioning("auto"),v.clip(),a&&a(),c.setStyle({visibility:"",position:"absolute"}),n&&v.setSize(h.width,h.height);switch(e){case"t":d={from:{width:h.width+"px",height:"0px"},to:{width:h.width+"px",height:h.height+"px"}},s.bottom="0px";break;case"l":d={from:{width:"0px",height:h.height+"px"},to:{width:h.width+"px",height:h.height+"px"}},r.anchorAnimX(e);break;case"r":d={from:{x:h.x+h.width,width:"0px",height:h.height+"px"},to:{x:h.x,width:h.width+"px",height:h.height+"px"}},r.anchorAnimX(e);break;case"b":d={from:{y:h.y+h.height,width:h.width+"px",height:"0px"},to:{y:h.y,width:h.width+"px",height:h.height+"px"}};break;case"tl":d={from:{x:h.x,y:h.y,width:"0px",height:"0px"},to:{width:h.width+"px",height:h.height+"px"}},s.bottom="0px",r.anchorAnimX("l");break;case"bl":d={from:{y:h.y+h.height,width:"0px",height:"0px"},to:{y:h.y,width:h.width+"px",height:h.height+"px"}},r.anchorAnimX("l");break;case"br":d={from:{x:h.x+h.width,y:h.y+h.height,width:"0px",height:"0px"},to:{x:h.x,y:h.y,width:h.width+"px",height:h.height+"px"}},r.anchorAnimX("r");break;case"tr":d={from:{x:h.x+h.width,width:"0px",height:"0px"},to:{x:h.x,width:h.width+"px",height:h.height+"px"}},s.bottom="0px",r.anchorAnimX("r")}v.show(),u=Ext.apply({},t),delete u.listeners,u=new Ext.fx.Anim(Ext.applyIf(u,{target:v,duration:500,easing:"ease-out",from:n?d.to:d.from,to:n?d.from:d.to})),u.on("afteranimate",function(){var e=Ext.fly(i,"_anim");e.setStyle(p),n&&(t.useDisplay?e.setDisplayed(!1):e.hide()),v.dom&&(v.dom.parentNode?v.dom.parentNode.insertBefore(e.dom,v.dom):f.appendChild(e.dom),v.remove()),a&&a(),o.end()}),l&&u.on(l)},r.animate({duration:t.duration?Math.max(t.duration,500)*2:1e3,listeners:{beforeanimate:o}}),r},slideOut:function(e,t){return this.slideIn(e,t,!0)},puff:function(e){var t=this,n=t.dom,r,i=t.getBox(),s=t.getStyles("width","height","left","right","top","bottom","position","z-index","font-size","opacity",!0);return e=Ext.applyIf(e||{},{easing:"ease-out",duration:500,useDisplay:!1}),r=function(){var t=Ext.fly(n,"_anim");t.clearOpacity(),t.show(),this.to={width:i.width*2,height:i.height*2,x:i.x-i.width/2,y:i.y-i.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){var t=Ext.fly(n,"_anim");t&&(e.useDisplay?t.setDisplayed(!1):t.hide(),t.setStyle(s),Ext.callback(e.callback,e.scope))})},t.animate({duration:e.duration,easing:e.easing,listeners:{beforeanimate:{fn:r}}}),t},switchOff:function(e){var t=this,n=t.dom,r;return e=Ext.applyIf(e||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),r=function(){var t=Ext.fly(n,"_anim"),r=this,i=t.getSize(),s=t.getXY(),o,u;t.clearOpacity(),t.clip(),u=t.getPositioning(),o=new Ext.fx.Animator({target:n,duration:e.duration,easing:e.easing,keyframes:{33:{opacity:.3},66:{height:1,y:s[1]+i.height/2},100:{width:1,x:s[0]+i.width/2}}}),o.on("afteranimate",function(){var t=Ext.fly(n,"_anim");e.useDisplay?t.setDisplayed(!1):t.hide(),t.clearOpacity(),t.setPositioning(u),t.setSize(i),r.end()})},t.animate({duration:Math.max(e.duration,500)*2,listeners:{beforeanimate:{fn:r}},callback:e.callback,scope:e.scope}),t},frame:function(e,t,n){var r=this,i=r.dom,s;return e=e||"#C3DAF9",t=t||1,n=n||{},s=function(){var r=Ext.fly(i,"_anim"),s=this,o,u,a;r.show(),o=r.getBox(),u=Ext.getBody().createChild({role:"presentation",id:r.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+e}}),a=new Ext.fx.Anim({target:u,duration:n.duration||1e3,iterations:t,from:{top:o.y,left:o.x,borderWidth:0,opacity:1,height:o.height,width:o.width},to:{top:o.y-20,left:o.x-20,borderWidth:10,opacity:0,height:o.height+40,width:o.width+40}}),a.on("afteranimate",function(){u.remove(),s.end()})},r.animate({duration:Math.max(n.duration,500)*2||2e3,listeners:{beforeanimate:{fn:s}},callback:n.callback,scope:n.scope}),r},ghost:function(e,t){var n=this,r=n.dom,i;return e=e||"b",i=function(){var t=Ext.fly(r,"_anim"),n=t.getWidth(),i=t.getHeight(),s=t.getXY(),o=t.getPositioning(),u={opacity:0};switch(e){case"t":u.y=s[1]-i;break;case"l":u.x=s[0]-n;break;case"r":u.x=s[0]+n;break;case"b":u.y=s[1]+i;break;case"tl":u.x=s[0]-n,u.y=s[1]-i;break;case"bl":u.x=s[0]-n,u.y=s[1]+i;break;case"br":u.x=s[0]+n,u.y=s[1]+i;break;case"tr":u.x=s[0]+n,u.y=s[1]-i}this.to=u,this.on("afteranimate",function(){var e=Ext.fly(r,"_anim");e&&(e.hide(),e.clearOpacity(),e.setPositioning(o))})},n.animate(Ext.applyIf(t||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:i}})),n},highlight:function(e,t){var n=this,r=n.dom,i={},s,o,u,a,f,l;return r.tagName.match(n.tableTagRe)?n.select("div").highlight(e,t):(t=t||{},a=t.listeners||{},u=t.attr||"backgroundColor",i[u]=e||"ffff9c",t.to?o=t.to:(o={},o[u]=t.endColor||n.getColor(u,"ffffff","")),t.listeners=Ext.apply(Ext.apply({},a),{beforeanimate:function(){s=r.style[u];var e=Ext.fly(r,"_anim");e.clearOpacity(),e.show(),f=a.beforeanimate;if(f)return l=f.fn||f,l.apply(f.scope||a.scope||window,arguments)},afteranimate:function(){r&&(r.style[u]=s),f=a.afteranimate,f&&(l=f.fn||f,l.apply(f.scope||a.scope||window,arguments))}}),n.animate(Ext.apply({},t,{duration:1e3,easing:"ease-in",from:i,to:o})),n)},pause:function(e){var t=this;return Ext.fx.Manager.setFxDefaults(t.id,{delay:e}),t},fadeIn:function(e){var t=this,n=t.dom;return t.animate(Ext.apply({},e,{opacity:1,internalListeners:{beforeanimate:function(e){var t=Ext.fly(n,"_anim");t.isStyle("display","none")?t.setDisplayed(""):t.show()}}})),this},fadeOut:function(e){var t=this,n=t.dom;return e=Ext.apply({opacity:0,internalListeners:{afteranimate:function(t){if(n&&t.to.opacity===0){var r=Ext.fly(n,"_anim");e.useDisplay?r.setDisplayed(!1):r.hide()}}}},e),t.animate(e),t},scale:function(e,t,n){return this.animate(Ext.apply({},n,{width:e,height:t})),this},shift:function(e){return this.animate(e),this},anchorAnimX:function(e){var t=e==="l"?"right":"left";this.dom.style[t]="0px"}}),Ext.define("Ext.dom.Element_dd",{override:"Ext.dom.Element",initDD:function(e,t,n){var r=new Ext.dd.DD(Ext.id(this.dom),e,t);return Ext.apply(r,n)},initDDProxy:function(e,t,n){var r=new Ext.dd.DDProxy(Ext.id(this.dom),e,t);return Ext.apply(r,n)},initDDTarget:function(e,t,n){var r=new Ext.dd.DDTarget(Ext.id(this.dom),e,t);return Ext.apply(r,n)}}),Ext.define("Ext.dom.Element_fx",{override:"Ext.dom.Element"},function(){var e=Ext.dom.Element,t="visibility",n="display",r="none",i="hidden",s="visible",o="offsets",u="asclass",a="nosize",f="originalDisplay",l="visibilityMode",c="isVisible",h=Ext.baseCSSPrefix+"hide-offsets",p=function(e){var t=(e.$cache||e.getCache()).data,n=t[f];return n===undefined&&(t[f]=n=""),n},d=function(t){var n=(t.$cache||t.getCache()).data,r=n[l];return r===undefined&&(n[l]=r=e.VISIBILITY),r};e.override({originalDisplay:"",visibilityMode:1,setVisible:function(r,s){var f=this,l=f.dom,p=d(f);if(typeof s=="string"){switch(s){case n:p=e.DISPLAY;break;case t:p=e.VISIBILITY;break;case o:p=e.OFFSETS;break;case a:case u:p=e.ASCLASS}f.setVisibilityMode(p),s=!1}if(!s||!f.anim){if(p==e.DISPLAY)return f.setDisplayed(r);p==e.OFFSETS?f[r?"removeCls":"addCls"](h):p==e.VISIBILITY?(f.fixDisplay(),l.style.visibility=r?"":i):p==e.ASCLASS&&f[r?"removeCls":"addCls"](f.visibilityCls||e.visibilityCls)}else r&&(f.setOpacity(.01),f.setVisible(!0)),Ext.isObject(s)||(s={duration:350,easing:"ease-in"}),f.animate(Ext.applyIf({callback:function(){r||Ext.fly(l,"_internal").setVisible(!1).setOpacity(1)},to:{opacity:r?1:0}},s));return(f.$cache||f.getCache()).data[c]=r,f},hasMetrics:function(){var t=d(this);return this.isVisible()||t==e.OFFSETS||t==e.VISIBILITY},toggle:function(e){var t=this;return t.setVisible(!t.isVisible(),t.anim(e)),t},setDisplayed:function(e){return typeof e=="boolean"&&(e=e?p(this):r),this.setStyle(n,e),this},fixDisplay:function(){var e=this;e.isStyle(n,r)&&(e.setStyle(t,i),e.setStyle(n,p(e)),e.isStyle(n,r)&&e.setStyle(n,"block"))},hide:function(e){return typeof e=="string"?(this.setVisible(!1,e),this):(this.setVisible(!1,this.anim(e)),this)},show:function(e){return typeof e=="string"?(this.setVisible(!0,e),this):(this.setVisible(!0,this.anim(e)),this)}})}),Ext.define("Ext.dom.Element_position",{override:"Ext.dom.Element"},function(){var e,t=this,n="left",r="right",i="top",s="bottom",o="position",u="static",a="relative",f="z-index",l="BODY",c="padding",h="border",p="-left",d="-right",v="-top",m="-bottom",g="-width",y={l:h+p+g,r:h+d+g,t:h+v+g,b:h+m+g},b={l:c+p,r:c+d,t:c+v,b:c+m},w=[b.l,b.r,b.t,b.b],E=[y.l,y.r,y.t,y.b],S=Math.round,x=document,T=function(t){return e||(e=new Ext.Element.Fly),e.attach(t),e};t.override({pxRe:/^\d+(?:\.\d*)?px$/i,inheritableStatics:{getX:function(e){return t.getXY(e)[0]},getXY:function(e){var t=x.body,n=x.documentElement,r=0,i=0,s=[0,0],o,u;e=Ext.getDom(e);if(e!=x&&e!=t){if(Ext.isIE)try{o=e.getBoundingClientRect(),i=n.clientTop||t.clientTop,r=n.clientLeft||t.clientLeft}catch(a){o={left:0,top:0}}else o=e.getBoundingClientRect();u=T(x).getScroll(),s=[S(o.left+u.left-r),S(o.top+u.top-i)]}return s},getY:function(e){return t.getXY(e)[1]},setX:function(e,n){t.setXY(e,[n,!1])},setXY:function(e,t){(e=Ext.fly(e,"_setXY")).position();var n=e.translatePoints(t),r=e.dom.style,i;r.right="auto";for(i in n)isNaN(n[i])||(r[i]=n[i]+"px")},setY:function(e,n){t.setXY(e,[!1,n])}},center:function(e){return this.alignTo(e||x,"c-c")},clearPositioning:function(e){return e=e||"",this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:u})},getAnchorToXY:function(e,t,n,r){return e.getAnchorXY(t,n,r)},getBottom:function(e){return(e?this.getLocalY():this.getY())+this.getHeight()},getBorderPadding:function(){var e=this.getStyle(w),t=this.getStyle(E);return{beforeX:(parseFloat(t[y.l])||0)+(parseFloat(e[b.l])||0),afterX:(parseFloat(t[y.r])||0)+(parseFloat(e[b.r])||0),beforeY:(parseFloat(t[y.t])||0)+(parseFloat(e[b.t])||0),afterY:(parseFloat(t[y.b])||0)+(parseFloat(e[b.b])||0)}},getCenterXY:function(){return this.getAlignToXY(x,"c-c")},getLeft:function(e){return e?this.getLocalX():this.getX()},getLocalX:function(){var e=this,n=e.dom.offsetParent,r=e.getStyle("left");return!r||r==="auto"?r=0:e.pxRe.test(r)?r=parseFloat(r):(r=e.getX(),n&&(r-=t.getX(n))),r},getLocalXY:function(){var e=this,n=e.dom.offsetParent,r=e.getStyle(["left","top"]),i=r.left,s=r.top;return!i||i==="auto"?i=0:e.pxRe.test(i)?i=parseFloat(i):(i=e.getX(),n&&(i-=t.getX(n))),!s||s==="auto"?s=0:e.pxRe.test(s)?s=parseFloat(s):(s=e.getY(),n&&(s-=t.getY(n))),[i,s]},getLocalY:function(){var e=this,n=e.dom.offsetParent,r=e.getStyle("top");return!r||r==="auto"?r=0:e.pxRe.test(r)?r=parseFloat(r):(r=e.getY(),n&&(r-=t.getY(n))),r},getPageBox:function(e){var t=this,n=t.dom,r=n.nodeName==l,i=r?Ext.Element.getViewWidth():n.offsetWidth,s=r?Ext.Element.getViewHeight():n.offsetHeight,o=t.getXY(),u=o[1],a=o[0]+i,f=o[1]+s,c=o[0];return e?new Ext.util.Region(u,a,f,c):{left:c,top:u,width:i,height:s,right:a,bottom:f}},getPositioning:function(e){var t=this.getStyle(["left","top","position","z-index"]),n=this.dom;return e&&(t.left==="auto"&&(t.left=n.offsetLeft+"px"),t.top==="auto"&&(t.top=n.offsetTop+"px")),t},getRight:function(e){return(e?this.getLocalX():this.getX())+this.getWidth()},getTop:function(e){return e?this.getLocalY():this.getY()},getX:function(){return t.getX(this.dom)},getXY:function(){return t.getXY(this.dom)},getY:function(){return t.getY(this.dom)},moveTo:function(e,t,n){return this.setXY([e,t],n)},position:function(e,t,n,r){var i=this;!e&&i.isStyle(o,u)?i.setStyle(o,a):e&&i.setStyle(o,e),t&&i.setStyle(f,t),(n||r)&&i.setXY([n||!1,r||!1])},setBottom:function(e){return this.dom.style[s]=this.addUnits(e),this},setBounds:function(e,t,n,r,i){return this.setBox({x:e,y:t,width:n,height:r},i)},setLeft:function(e){return this.dom.style[n]=this.addUnits(e),this},setLeftTop:function(e,t){var n=this,r=n.dom.style;return r.left=n.addUnits(e),r.top=n.addUnits(t),n},setLocalX:function(e){var t=this.dom.style;t.right="auto",t.left=e===null?"auto":e+"px"},setLocalXY:function(e,t){var n=this.dom.style;n.right="auto",e&&e.length&&(t=e[1],e=e[0]),e===null?n.left="auto":e!==undefined&&(n.left=e+"px"),t===null?n.top="auto":t!==undefined&&(n.top=t+"px")},setLocalY:function(e){this.dom.style.top=e===null?"auto":e+"px"},setLocation:function(e,t,n){return this.setXY([e,t],n)},setPositioning:function(e){return this.setStyle(e)},setRight:function(e){return this.dom.style[r]=this.addUnits(e),this},setTop:function(e){return this.dom.style[i]=this.addUnits(e),this},setX:function(e,t){return this.setXY([e,this.getY()],t)},setXY:function(e,n){var r=this;return!n||!r.anim?t.setXY(r.dom,e):(Ext.isObject(n)||(n={}),r.animate(Ext.applyIf({to:{x:e[0],y:e[1]}},n))),this},setY:function(e,t){return this.setXY([this.getX(),e],t)}}),t.getTrueXY=t.getXY}),Ext.define("Ext.dom.Element_scroll",{override:"Ext.dom.Element",isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},getScroll:function(){var e=this,t=e.dom,n=document,r=n.body,i=n.documentElement,s,o;return t===n||t===r?(s=i.scrollLeft||(r?r.scrollLeft:0),o=i.scrollTop||(r?r.scrollTop:0)):(s=t.scrollLeft,o=t.scrollTop),{left:s,top:o}},getScrollLeft:function(){var e=this.dom,t=document;return e===t||e===t.body?this.getScroll().left:e.scrollLeft},getScrollTop:function(){var e=this.dom,t=document;return e===t||e===t.body?this.getScroll().top:e.scrollTop},setScrollLeft:function(e){return this.dom.scrollLeft=e,this},setScrollTop:function(e){return this.dom.scrollTop=e,this},scrollBy:function(e,t,n){var r=this,i=r.dom;return e.length?(n=t,t=e[1],e=e[0]):typeof e!="number"&&(n=t,t=e.y,e=e.x),e&&r.scrollTo("left",r.constrainScrollLeft(i.scrollLeft+e),n),t&&r.scrollTo("top",r.constrainScrollTop(i.scrollTop+t),n),r},scrollTo:function(e,t,n){var r=/top/i.test(e),i=this,s=r?"scrollTop":"scrollLeft",o=i.dom,u;return!n||!i.anim?(o[s]=t,o[s]=t):(u={to:{}},u.to[s]=t,Ext.isObject(n)&&Ext.applyIf(u,n),i.animate(u)),i},scrollIntoView:function(e,t,n,r){var i=this,s=i.dom,o=i.getOffsetsTo(e=Ext.getDom(e)||Ext.getBody().dom),u=o[0]+e.scrollLeft,a=o[1]+e.scrollTop,f=a+s.offsetHeight,l=u+s.offsetWidth,c=e.clientHeight,h=parseInt(e.scrollTop,10),p=parseInt(e.scrollLeft,10),d=h+c,v=p+e.clientWidth,m;return r&&(n?n=Ext.apply({listeners:{afteranimate:function(){i.scrollChildFly.attach(s).highlight()}}},n):i.scrollChildFly.attach(s).highlight()),s.offsetHeight>c||a<h?m=a:f>d&&(m=f-c),m!=null&&i.scrollChildFly.attach(e).scrollTo("top",m,n),t!==!1&&(m=null,s.offsetWidth>e.clientWidth||u<p?m=u:l>v&&(m=l-e.clientWidth),m!=null&&i.scrollChildFly.attach(e).scrollTo("left",m,n)),i},scrollChildIntoView:function(e,t){this.scrollChildFly.attach(Ext.getDom(e)).scrollIntoView(this,t)},scroll:function(e,t,n){if(!this.isScrollable())return!1;e=e.charAt(0);var r=this,i=r.dom,s=e==="r"||e==="l"?"left":"top",o=!1,u,a;if(e==="l"||e==="t"||e==="u")t=-t;return s==="left"?(u=i.scrollLeft,a=r.constrainScrollLeft(u+t)):(u=i.scrollTop,a=r.constrainScrollTop(u+t)),a!==u&&(this.scrollTo(s,a,n),o=!0),o},constrainScrollLeft:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollWidth-t.clientWidth),0)},constrainScrollTop:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollHeight-t.clientHeight),0)}},function(){this.prototype.scrollChildFly=new this.Fly,this.prototype.scrolltoFly=new this.Fly}),Ext.define("Ext.dom.Element_style",{override:"Ext.dom.Element"},function(){var e=this,t=document.defaultView,n=/table-row|table-.*-group/,r="_internal",i="hidden",s="height",o="width",u="isClipped",a="overflow",f="overflow-x",l="overflow-y",c="originalClip",h=/#document|body/i,p,d,v,m,g,y,b;if(!t||!t.getComputedStyle)e.prototype.getStyle=function(t,n){var r=this,i=r.dom,s=typeof t!="string",o=r.styleHooks,u=t,a=u,f=1,l=n,c,h,p,d,v,m,g;if(s){p={},u=a[0],g=0;if(!(f=a.length))return p}if(!i||i.documentElement)return p||"";h=i.style,n?m=h:(m=i.currentStyle,m||(l=!0,m=h));do{d=o[u],d||(o[u]=d={name:e.normalize(u)});if(d.get)v=d.get(i,r,l,m);else{c=d.name;if(d.canThrow)try{v=m[c]}catch(y){v=""}else v=m?m[c]:""}if(!s)return v;p[u]=v,u=a[++g]}while(g<f);return p};e.override({getHeight:function(e,t){var n=this,r=n.isStyle("display","none"),i,o;return r?0:(i=n.dom.offsetHeight,Ext.supports.Direct2DBug&&(o=n.adjustDirect2DDimension(s),t?i+=o:o>0&&o<.5&&i++),e&&(i-=n.getBorderWidth("tb")+n.getPadding("tb")),i<0?0:i)},getWidth:function(e,t){var n=this,r=n.dom,i=n.isStyle("display","none"),s,u,a;return i?0:(Ext.supports.BoundingClientRect?(s=r.getBoundingClientRect(),u=n.vertical&&!Ext.isIE9&&!Ext.supports.RotatedBoundingClientRect?s.bottom-s.top:s.right-s.left,u=t?u:Math.ceil(u)):u=r.offsetWidth,Ext.supports.Direct2DBug&&!n.vertical&&(a=n.adjustDirect2DDimension(o),t?u+=a:a>0&&a<.5&&u++),e&&(u-=n.getBorderWidth("lr")+n.getPadding("lr")),u<0?0:u)},setWidth:function(e,t){var n=this;return e=n.adjustWidth(e),!t||!n.anim?n.dom.style.width=n.addUnits(e):(Ext.isObject(t)||(t={}),n.animate(Ext.applyIf({to:{width:e}},t))),n},setHeight:function(e,t){var n=this;return e=n.adjustHeight(e),!t||!n.anim?n.dom.style.height=n.addUnits(e):(Ext.isObject(t)||(t={}),n.animate(Ext.applyIf({to:{height:e}},t))),n},applyStyles:function(e){return Ext.DomHelper.applyStyles(this.dom,e),this},setSize:function(e,t,n){var r=this;return Ext.isObject(e)&&(n=t,t=e.height,e=e.width),e=r.adjustWidth(e),t=r.adjustHeight(t),!n||!r.anim?(r.dom.style.width=r.addUnits(e),r.dom.style.height=r.addUnits(t)):(n===!0&&(n={}),r.animate(Ext.applyIf({to:{width:e,height:t}},n))),r},getViewSize:function(){var t=this,n=t.dom,r=h.test(n.nodeName),i;return r?i={width:e.getViewWidth(),height:e.getViewHeight()}:i={width:n.clientWidth,height:n.clientHeight},i},getSize:function(e){return{width:this.getWidth(e),height:this.getHeight(e)}},adjustWidth:function(e){var t=this,n=typeof e=="number";return n&&t.autoBoxAdjust&&!t.isBorderBox()&&(e-=t.getBorderWidth("lr")+t.getPadding("lr")),n&&e<0?0:e},adjustHeight:function(e){var t=this,n=typeof e=="number";return n&&t.autoBoxAdjust&&!t.isBorderBox()&&(e-=t.getBorderWidth("tb")+t.getPadding("tb")),n&&e<0?0:e},getColor:function(e,t,n){var r=this.getStyle(e),i=n||n===""?n:"#",s,o,u=0;if(!r||/transparent|inherit/.test(r))return t;if(/^r/.test(r)){r=r.slice(4,r.length-1).split(","),o=r.length;for(;u<o;u++)s=parseInt(r[u],10),i+=(s<16?"0":"")+s.toString(16)}else r=r.replace("#",""),i+=r.length==3?r.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):r;return i.length>5?i.toLowerCase():t},setOpacity:function(e,t){var n=this;return n.dom?(!t||!n.anim?n.setStyle("opacity",e):(typeof t!="object"&&(t={duration:350,easing:"ease-in"}),n.animate(Ext.applyIf({to:{opacity:e}},t))),n):n},clearOpacity:function(){return this.setOpacity("")},adjustDirect2DDimension:function(e){var t=this,r=t.dom,i=t.getStyle("display"),s=r.style.display,u=r.style.position,a=e===o?0:1,f=r.currentStyle,l;return i==="inline"&&(r.style.display="inline-block"),r.style.position=i.match(n)?"absolute":"static",l=(parseFloat(f[e])||parseFloat(f.msTransformOrigin.split(" ")[a])*2)%1,r.style.position=u,i==="inline"&&(r.style.display=s),l},clip:function(){var e=this,t=(e.$cache||e.getCache()).data,n;return t[u]||(t[u]=!0,n=e.getStyle([a,f,l]),t[c]={o:n[a],x:n[f],y:n[l]},e.setStyle(a,i),e.setStyle(f,i),e.setStyle(l,i)),e},unclip:function(){var e=this,t=(e.$cache||e.getCache()).data,n;return t[u]&&(t[u]=!1,n=t[c],n.o&&e.setStyle(a,n.o),n.x&&e.setStyle(f,n.x),n.y&&e.setStyle(l,n.y)),e},boxWrap:function(t){t=t||Ext.baseCSSPrefix+"box";var n=Ext.get(this.insertHtml("beforeBegin","<div class='"+t+"' role='presentation'>"+Ext.String.format(e.boxMarkup,t)+"</div>"));return Ext.DomQuery.selectNode("."+t+"-mc",n.dom).appendChild(this.dom),n},getComputedHeight:function(){var e=this,t=Math.max(e.dom.offsetHeight,e.dom.clientHeight);return t||(t=parseFloat(e.getStyle(s))||0,e.isBorderBox()||(t+=e.getFrameWidth("tb"))),t},getComputedWidth:function(){var e=this,t=Math.max(e.dom.offsetWidth,e.dom.clientWidth);return t||(t=parseFloat(e.getStyle(o))||0,e.isBorderBox()||(t+=e.getFrameWidth("lr"))),t},getFrameWidth:function(e,t){return t&&this.isBorderBox()?0:this.getPadding(e)+this.getBorderWidth(e)},addClsOnOver:function(e,t,n){var i=this,s=i.dom,o=Ext.isFunction(t);return i.hover(function(){if(o&&t.call(n||i,i)===!1)return;Ext.fly(s,r).addCls(e)},function(){Ext.fly(s,r).removeCls(e)}),i},addClsOnFocus:function(e,t,n){var i=this,s=i.dom,o=Ext.isFunction(t);return i.on("focus",function(){if(o&&t.call(n||i,i)===!1)return!1;Ext.fly(s,r).addCls(e)}),i.on("blur",function(){Ext.fly(s,r).removeCls(e)}),i},addClsOnClick:function(e,t,n){var i=this,s=i.dom,o=Ext.isFunction(t);return i.on("mousedown",function(){if(o&&t.call(n||i,i)===!1)return!1;Ext.fly(s,r).addCls(e);var u=Ext.getDoc(),a=function(){Ext.fly(s,r).removeCls(e),u.removeListener("mouseup",a)};u.on("mouseup",a)}),i},getStyleSize:function(){var t=this,n=this.dom,r=h.test(n.nodeName),i,u,a;return r?{width:e.getViewWidth(),height:e.getViewHeight()}:(i=t.getStyle([s,o],!0),i.width&&i.width!="auto"&&(u=parseFloat(i.width),t.isBorderBox()&&(u-=t.getFrameWidth("lr"))),i.height&&i.height!="auto"&&(a=parseFloat(i.height),t.isBorderBox()&&(a-=t.getFrameWidth("tb"))),{width:u||t.getWidth(!0),height:a||t.getHeight(!0)})},statics:{selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable"},selectable:function(){var t=this;return t.dom.unselectable="",t.removeCls(e.unselectableCls),t.addCls(e.selectableCls),t},unselectable:function(){var t=this;return Ext.isOpera&&(t.dom.unselectable="on"),t.removeCls(e.selectableCls),t.addCls(e.unselectableCls),t},setVertical:function(t,n){var r=this,i=e.prototype,s;r.vertical=!0,n&&r.addCls(r.verticalCls=n),r.setWidth=i.setHeight,r.setHeight=i.setWidth,Ext.isIE9m||(r.getWidth=i.getHeight,r.getHeight=i.getWidth),r.styleHooks=t===270?e.prototype.verticalStyleHooks270:e.prototype.verticalStyleHooks90},setHorizontal:function(){var e=this,t=e.verticalCls;delete e.vertical,t&&(delete e.verticalCls,e.removeCls(t)),delete e.setWidth,delete e.setHeight,Ext.isIE9m||(delete e.getWidth,delete e.getHeight),delete e.styleHooks}}),e.prototype.styleHooks=p=Ext.dom.AbstractElement.prototype.styleHooks,e.prototype.verticalStyleHooks90=d=Ext.Object.chain(e.prototype.styleHooks),e.prototype.verticalStyleHooks270=v=Ext.Object.chain(e.prototype.styleHooks),d.width={name:"height"},d.height={name:"width"},d["margin-top"]={name:"marginLeft"},d["margin-right"]={name:"marginTop"},d["margin-bottom"]={name:"marginRight"},d["margin-left"]={name:"marginBottom"},d["padding-top"]={name:"paddingLeft"},d["padding-right"]={name:"paddingTop"},d["padding-bottom"]={name:"paddingRight"},d["padding-left"]={name:"paddingBottom"},d["border-top"]={name:"borderLeft"},d["border-right"]={name:"borderTop"},d["border-bottom"]={name:"borderRight"},d["border-left"]={name:"borderBottom"},v.width={name:"height"},v.height={name:"width"},v["margin-top"]={name:"marginRight"},v["margin-right"]={name:"marginBottom"},v["margin-bottom"]={name:"marginLeft"},v["margin-left"]={name:"marginTop"},v["padding-top"]={name:"paddingRight"},v["padding-right"]={name:"paddingBottom"},v["padding-bottom"]={name:"paddingLeft"},v["padding-left"]={name:"paddingTop"},v["border-top"]={name:"borderRight"},v["border-right"]={name:"borderBottom"},v["border-bottom"]={name:"borderLeft"},v["border-left"]={name:"borderTop"},Ext.isIE7m&&(p.fontSize=p["font-size"]={name:"fontSize",canThrow:!0},p.fontStyle=p["font-style"]={name:"fontStyle",canThrow:!0},p.fontFamily=p["font-family"]={name:"fontFamily",canThrow:!0});if(Ext.isIEQuirks||Ext.isIE&&Ext.ieVersion<=8){function w(e,t,n,r){return r[this.styleName]=="none"?"0px"
:r[this.name]}m=["Top","Right","Bottom","Left"],g=m.length;while(g--)y=m[g],b="border"+y+"Width",p["border-"+y.toLowerCase()+"-width"]=p[b]={name:b,styleName:"border"+y+"Style",get:w}}Ext.getDoc().on("selectstart",function(t,n){var r=document.documentElement,i=e.selectableCls,s=e.unselectableCls,o=n&&n.tagName;o=o&&o.toLowerCase();if(o==="input"||o==="textarea")return;while(n&&n.nodeType===1&&n!==r){var u=Ext.fly(n);if(u.hasCls(i))return;if(u.hasCls(s)){t.stopEvent();return}n=n.parentNode}})}),Ext.onReady(function(){var e=/alpha\(opacity=(.*)\)/i,t=/^\s+|\s+$/g,n=Ext.dom.Element.prototype.styleHooks;n.opacity={name:"opacity",afterSet:function(e,t,n){n.isLayer&&n.onOpacitySet(t)}},!Ext.supports.Opacity&&Ext.isIE&&Ext.apply(n.opacity,{get:function(t){var n=t.style.filter,r,i;if(n.match){r=n.match(e);if(r){i=parseFloat(r[1]);if(!isNaN(i))return i?i/100:0}}return 1},set:function(n,r){var i=n.style,s=i.filter.replace(e,"").replace(t,"");i.zoom=1,typeof r=="number"&&r>=0&&r<1?(r*=100,i.filter=s+(s.length?" ":"")+"alpha(opacity="+r+")"):i.filter=s}})}),Ext.define("Ext.util.Positionable",{_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)(\?)?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(e,t){var n=this.getConstrainVector(t,e);return n&&(e[0]+=n[0],e[1]+=n[1]),e},alignTo:function(e,t,n,r){var i=this,s=i.el;return i.setXY(i.getAlignToXY(e,t,n),s.anim&&!!r?s.anim(r):!1)},anchorTo:function(e,t,n,r,i,s){var o=this,u=!Ext.isEmpty(i),a=function(){o.alignTo(e,t,n,r),Ext.callback(s,o)},f=o.getAnchor();return o.removeAnchor(),Ext.apply(f,{fn:a,scroll:u}),Ext.EventManager.onWindowResize(a,null),u&&Ext.EventManager.on(window,"scroll",a,null,{buffer:isNaN(i)?50:i}),a(),o},calculateAnchorXY:function(e,t,n,r){var i=this,s=i.el,o=document,u=s.dom==o.body||s.dom==o,a=Math.round,f,l,c;e=(e||"tl").toLowerCase(),r=r||{},l=r.width||u?Ext.Element.getViewWidth():i.getWidth(),c=r.height||u?Ext.Element.getViewHeight():i.getHeight();switch(e){case"tl":f=[0,0];break;case"bl":f=[0,c];break;case"tr":f=[l,0];break;case"c":f=[a(l*.5),a(c*.5)];break;case"t":f=[a(l*.5),0];break;case"l":f=[0,a(c*.5)];break;case"r":f=[l,a(c*.5)];break;case"b":f=[a(l*.5),c];break;case"tc":f=[a(l*.5),0];break;case"bc":f=[a(l*.5),c];break;case"br":f=[l,c]}return[f[0]+t,f[1]+n]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(e,t,n){var r=this,i=Ext.Element.getViewWidth()-10,s=Ext.Element.getViewHeight()-10,o=document,u=o.documentElement,a=o.body,f=u.scrollLeft||a.scrollLeft||0,l=u.scrollTop||a.scrollTop||0,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;return e=Ext.get(e.el||e),!e||!e.dom,n=n||[0,0],t=(!t||t=="?"?"tl-bl?":!/-/.test(t)&&t!==""?"tl-"+t:t||"tl-bl").toLowerCase(),t=r.convertPositionSpec(t),c=t.match(r._alignRe),w=c[1],E=c[2],b=!!c[3],h=r.getAnchorXY(w,!0),p=r.getAnchorToXY(e,E,!1),C=p[0]-h[0]+n[0],k=p[1]-h[1]+n[1],b&&(d=r.getWidth(),v=r.getHeight(),m=e.getRegion(),S=w.charAt(0),x=w.charAt(w.length-1),T=E.charAt(0),N=E.charAt(E.length-1),g=S=="t"&&T=="b"||S=="b"&&T=="t",y=x=="r"&&N=="l"||x=="l"&&N=="r",C+d>i+f&&(C=y?m.left-d:i+f-d),C<f&&(C=y?m.right:f),k+v>s+l&&(k=g?m.top-v:s+l-v),k<l&&(k=g?m.bottom:l)),[C,k]},getAnchor:function(){var e=this.el,t=(e.$cache||e.getCache()).data,n;if(!e.dom)return;return n=t._anchor,n||(n=t._anchor={}),n},getAnchorXY:function(e,t,n){var r=this,i=r.getXY(),s=r.el,o=document,u=s.dom==o.body||s.dom==o,a=s.getScroll(),f=u?a.left:t?0:i[0],l=u?a.top:t?0:i[1];return r.calculateAnchorXY(e,f,l,n)},getBox:function(e,t){var n=this,r=t?n.getLocalXY():n.getXY(),i=r[0],s=r[1],o=n.getWidth(),u=n.getHeight(),a,f,l;return e&&(a=n.getBorderPadding(),f=a.beforeX,l=a.beforeY,i+=f,s+=l,o-=f+a.afterX,u-=l+a.afterY),{x:i,left:i,0:i,y:s,top:s,1:s,width:o,height:u,right:i+o,bottom:s+u}},calculateConstrainedPosition:function(e,t,n,r){var i=this,s,o=i.floatParent,u=o?o.getTargetEl():null,a,f,l,c=!1;return n&&o?(a=u.getXY(),f=u.getBorderPadding(),a[0]+=f.beforeX,a[1]+=f.beforeY,t&&(l=[t[0]+a[0],t[1]+a[1]])):l=t,e=e||i.constrainTo||u||i.container||i.el.parent(),s=(i.constrainHeader?i.header:i).getConstrainVector(e,l,r),s&&(c=t||i.getPosition(n),c[0]+=s[0],c[1]+=s[1]),c},getConstrainVector:function(e,t,n){var r=this.getRegion(),i=[0,0],s=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.shadow.getShadowSize():undefined,o=!1,u=this.constraintInsets;return e instanceof Ext.util.Region||(e=Ext.get(e.el||e).getViewRegion()),u&&(u=Ext.isObject(u)?u:Ext.Element.parseBox(u),e.adjust(u.top,u.right,u.bottom,u.length)),t&&r.translateBy(t[0]-r.x,t[1]-r.y),n&&(r.right=r.left+n[0],r.bottom=r.top+n[1]),s&&e.adjust(s[0],-s[1],-s[2],s[3]),r.right>e.right&&(o=!0,i[0]=e.right-r.right),r.left+i[0]<e.left&&(o=!0,i[0]=e.left-r.left),r.bottom>e.bottom&&(o=!0,i[1]=e.bottom-r.bottom),r.top+i[1]<e.top&&(o=!0,i[1]=e.top-r.top),o?i:!1},getOffsetsTo:function(e){var t=this.getXY(),n=Ext.fly(e.el||e,"_internal").getXY();return[t[0]-n[0],t[1]-n[1]]},getRegion:function(){var e=this.getBox();return new Ext.util.Region(e.top,e.right,e.bottom,e.left)},getViewRegion:function(){var e=this,t=e.el,n=t.dom.nodeName==="BODY",r,i,s,o,u,a,f;return n?(i=t.getScroll(),u=i.left,o=i.top,a=Ext.dom.AbstractElement.getViewportWidth(),f=Ext.dom.AbstractElement.getViewportHeight()):(r=e.getBorderPadding(),s=e.getXY(),u=s[0]+r.beforeX,o=s[1]+r.beforeY,a=e.getWidth(!0),f=e.getHeight(!0)),new Ext.util.Region(o,u+a,o+f,u)},move:function(e,t,n){var r=this,i=r.getXY(),s=i[0],o=i[1],u=[s-t,o],a=[s+t,o],f=[s,o-t],l=[s,o+t],c={l:u,left:u,r:a,right:a,t:f,top:f,up:f,b:l,bottom:l,down:l};e=e.toLowerCase(),r.setXY([c[e][0],c[e][1]],n)},removeAnchor:function(){var e=this.getAnchor();return e&&e.fn&&(Ext.EventManager.removeResizeListener(e.fn),e.scroll&&Ext.EventManager.un(window,"scroll",e.fn),delete e.fn),this},setBox:function(e,t){var n=this,r=n.el,i=e.x,s=e.y,o=[i,s],u=e.width,a=e.height,f=n.constrain||n.constrainHeader,l=f&&n.calculateConstrainedPosition(null,[i,s],!1,[u,a]);return l&&(i=l[0],s=l[1]),!t||!r.anim?(n.setSize(u,a),n.setXY([i,s]),n.afterSetPosition(i,s)):n.animate(Ext.applyIf({to:{x:i,y:s,width:r.adjustWidth(u),height:r.adjustHeight(a)},listeners:{afteranimate:Ext.Function.bind(n.afterSetPosition,n,[i,s])}},t)),n},setRegion:function(e,t){return this.setBox({x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top},t)},translatePoints:function(e,t){var n=this.translateXY(e,t);return{left:n.x,top:n.y}},translateXY:function(e,t){var n=this,r=n.el,i=r.getStyle(n._positionTopLeft),s=i.position=="relative",o=parseFloat(i.left),u=parseFloat(i.top),a=n.getXY();return Ext.isArray(e)&&(t=e[1],e=e[0]),isNaN(o)&&(o=s?0:r.dom.offsetLeft),isNaN(u)&&(u=s?0:r.dom.offsetTop),o=typeof e=="number"?e-a[0]+o:undefined,u=typeof t=="number"?t-a[1]+u:undefined,{x:o,y:u}}}),Ext.define("Ext.dom.Element",function(e){var t="hidden",n=document,r="visibility",i="display",s="none",o=Ext.baseCSSPrefix+"masked",u=Ext.baseCSSPrefix+"masked-relative",a=Ext.baseCSSPrefix+"mask-msg",f=/^body/i,l,c=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1},h=function(e){var t=[],n=-1,r,i;for(r=0;i=e[r];r++)if(i.scrollTop>0||i.scrollLeft>0)t[++n]=i;return t};return{extend:Ext.dom.AbstractElement,alternateClassName:["Ext.Element","Ext.core.Element"],tableTagRe:/^(?:tr|td|table|tbody)$/i,mixins:[Ext.util.Positionable],addUnits:function(){return e.addUnits.apply(e,arguments)},focus:function(e,t){var n=this;t=t||n.dom;try{Number(e)?Ext.defer(n.focus,e,n,[null,t]):t.focus()}catch(r){}return n},blur:function(){var e=this,t=e.dom;if(t!==document.body){try{t.blur()}catch(n){}return e}return e.focus(undefined,t)},isBorderBox:function(){var e=Ext.isBorderBox;return e&&Ext.isIE7m&&(e=!((this.dom.tagName||"").toLowerCase()in c)),e},hover:function(e,t,n,r){var i=this;return i.on("mouseenter",e,n||i.dom,r),i.on("mouseleave",t,n||i.dom,r),i},getAttributeNS:function(e,t){return this.getAttribute(t,e)},getAttribute:Ext.isIE&&!(Ext.isIE9p&&n.documentMode>=9)?function(e,t){var n=this.dom,r;return t?(r=typeof n[t+":"+e],r!="undefined"&&r!="unknown"?n[t+":"+e]||null:null):(e==="for"&&(e="htmlFor"),n[e]||null)}:function(e,t){var n=this.dom;return t?n.getAttributeNS(t,e)||n.getAttribute(t+":"+e):n.getAttribute(e)||n[e]||null},cacheScrollValues:function(){var e=this,t,n,r,i=[],s=function(){for(r=0;r<t.length;r++)n=t[r],n.scrollLeft=i[r][0],n.scrollTop=i[r][1]};Ext.DomQuery.pseudos.isScrolled||(Ext.DomQuery.pseudos.isScrolled=h),t=e.query(":isScrolled");for(r=0;r<t.length;r++)n=t[r],i[r]=[n.scrollLeft,n.scrollTop];return s},autoBoxAdjust:!0,isVisible:function(n){var o=this,u=o.dom,a=u.ownerDocument.documentElement;l||(l=new e.Fly);while(u!==a){if(!u||u.nodeType===11||l.attach(u).isStyle(r,t)||l.isStyle(i,s))return!1;if(!n)break;u=u.parentNode}return!0},isDisplayed:function(){return!this.isStyle(i,s)},enableDisplayMode:function(t){var n=this;return n.setVisibilityMode(e.DISPLAY),Ext.isEmpty(t)||((n.$cache||n.getCache()).data.originalDisplay=t),n},mask:function(e,t,r){var i=this,s=i.dom,l=s.style.setExpression,c=(i.$cache||i.getCache()).data,h=c.maskShimEl,p=c.maskEl,d=c.maskMsg,v,m,g,y;(!f.test(s.tagName)||i.getStyle("position")!="static")&&i.addCls(u),p&&p.remove(),d&&d.remove(),h&&h.remove(),Ext.isIE6&&(h=Ext.DomHelper.append(s,{tag:"iframe",role:"presentation",cls:Ext.baseCSSPrefix+"shim "+Ext.baseCSSPrefix+"mask-shim"},!0),c.maskShimEl=h,h.setDisplayed(!0)),Ext.DomHelper.append(s,[{role:"presentation",cls:Ext.baseCSSPrefix+"mask",style:"top:0;left:0;"},{role:"presentation",cls:t?a+" "+t:a,cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-inner",cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-text",html:e||""}}}]),d=Ext.get(s.lastChild),p=Ext.get(d.dom.previousSibling),c.maskMsg=d,c.maskEl=p,i.addCls(o),p.setDisplayed(!0),typeof e=="string"?(d.setDisplayed(!0),d.center(i)):d.setDisplayed(!1),Ext.isStrict&&!Ext.isIE6&&s===n.body&&p.addCls(Ext.baseCSSPrefix+"mask-fixed");if(s!==n.body||Ext.isIE6||Ext.isIEQuirks){if(!Ext.supports.IncludePaddingInWidthCalculation&&l)try{p.dom.style.setExpression("width",'this.parentNode.clientWidth + "px"'),v='this.parentNode.clientWidth + "px"',h&&h.dom.style.setExpression("width",v),p.dom.style.setExpression("width",v)}catch(b){}if(!Ext.supports.IncludePaddingInHeightCalculation&&l)try{m="this.parentNode."+(s==n.body?"scrollHeight":"offsetHeight")+' + "px"',h&&h.dom.style.setExpression("height",m),p.dom.style.setExpression("height",m)}catch(b){}else Ext.isIE9m&&(!Ext.isIE7||!Ext.isStrict)&&i.getStyle("height")=="auto"&&(Ext.isIE6&&Ext.isStrict&&(g=s.parentNode,y=Math.max(g.clientHeight,g.scrollHeight)),h&&h.setSize(undefined,r||y||i.getHeight()),p.setSize(undefined,r||y||i.getHeight()))}return p},unmask:function(){var e=this,t=(e.$cache||e.getCache()).data,n=t.maskEl,r=t.maskShimEl,i=t.maskMsg,s;n&&(s=n.dom.style,s.clearExpression&&(s.clearExpression("width"),s.clearExpression("height")),n&&(n.remove(),delete t.maskEl),i&&(i.remove(),delete t.maskMsg),e.removeCls([o,u]),r&&(s=r.dom.style,s.clearExpression&&(s.clearExpression("width"),s.clearExpression("height")),r.remove(),delete t.maskShimEl))},isMasked:function(){var e=this,t=(e.$cache||e.getCache()).data,n=t.maskEl,r=t.maskMsg,i=!1;return n&&n.isVisible()&&(r&&r.center(e),i=!0),i},createShim:function(){var e=n.createElement("iframe"),t;return e.frameBorder="0",e.className=Ext.baseCSSPrefix+"shim",e.src=Ext.SSL_SECURE_URL,e.setAttribute("role","presentation"),t=Ext.get(this.dom.parentNode.insertBefore(e,this.dom)),t.autoBoxAdjust=!1,t},addKeyListener:function(e,t,n){var r;return typeof e!="object"||Ext.isArray(e)?r={target:this,key:e,fn:t,scope:n}:r={target:this,key:e.key,shift:e.shift,ctrl:e.ctrl,alt:e.alt,fn:t,scope:n},new Ext.util.KeyMap(r)},addKeyMap:function(e){return new Ext.util.KeyMap(Ext.apply({target:this},e))},on:function(e,t,n,r){return Ext.EventManager.on(this,e,t,n||this,r),this},un:function(e,t,n){return Ext.EventManager.un(this,e,t,n||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this),this},select:function(t){return e.select(t,!1,this.dom)}}},function(){function h(){if(!Ext.enableGarbageCollector)clearInterval(n.collectorThreadId);else{var e,r,i,s;for(e in t){if(!t.hasOwnProperty(e))continue;i=t[e];if(i.skipGarbageCollection)continue;r=i.dom,r&&(!r.parentNode||!r.offsetParent&&!Ext.getElementById(e))&&(Ext.enableListenerCollection&&Ext.EventManager.removeAll(r),delete t[e])}if(Ext.isIE){s={};for(e in t){if(!t.hasOwnProperty(e))continue;s[e]=t[e]}t=Ext.cache=s}}}var e=document,t=Ext.cache,n=this,r=Ext.dom.AbstractElement,i=/^a|button|embed|iframe|input|object|select|textarea$/i,s=/\S/,o=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,u=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,a=/\ssrc=([\'\"])(.*?)\1/i,f=/\stype=([\'\"])(.*?)\1/i,l=!Ext.isIE8m,c;n.boxMarkup=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),n.collectorThreadId=setInterval(h,3e4),n.addMethods({monitorMouseLeave:function(e,t,n){var r=this,i,s={mouseleave:function(s){i=setTimeout(Ext.Function.bind(t,n||r,[s]),e)},mouseenter:function(){clearTimeout(i)},freezeEvent:!0};return r.on(s),s},swallowEvent:function(e,t){var n=this,r,i,s=function(e){e.stopPropagation(),t&&e.preventDefault()};if(Ext.isArray(e)){i=e.length;for(r=0;r<i;r++)n.on(e[r],s);return n}return n.on(e,s),n},relayEvent:function(e,t){this.on(e,function(n){t.fireEvent(e,n)})},clean:function(e){var t=this,n=t.dom,r=(t.$cache||t.getCache()).data,i=n.firstChild,o=-1,u;if(r.isCleaned&&e!==!0)return t;while(i)u=i.nextSibling,i.nodeType==3?s.test(i.nodeValue)?u&&u.nodeType==3&&(i.appendData(Ext.String.trim(u.data)),n.removeChild(u),u=i.nextSibling,i.nodeIndex=++o):n.removeChild(i):(c.attach(i).clean(),i.nodeIndex=++o),i=u;return r.isCleaned=!0,t},load:function(e){return this.getLoader().load(e),this},getLoader:function(){var e=this,t=(e.$cache||e.getCache()).data,n=t.loader;return n||(t.loader=n=new Ext.ElementLoader({target:e})),n},syncContent:function(e){e=Ext.getDom(e);var t=e.childNodes,n=t.length,r=this.dom,i=r.childNodes,s=i.length,o,u,a,f,l,h,p;if(Ext.isIE9m&&r.mergeAttributes)r.mergeAttributes(e,!0),r.src=e.src;else{l=e.attributes,h=l.length;for(o=0;o<h;o++)p=l[o].name,p!=="id"&&r.setAttribute(p,l[o].value)}if(n!==s){r.innerHTML=e.innerHTML;return}for(o=0;o<n;o++){a=t[o],u=i[o],f=a.nodeType;if(f!==u.nodeType||f===1&&a.tagName!==u.tagName){r.innerHTML=e.innerHTML;return}f===3?u.data=a.data:(a.id&&u.id!==a.id&&(u.id=a.id),u.style.cssText=a.style.cssText,u.className=a.className,c.attach(u).syncContent(a))}},update:function(t,n,r){var i=this,s,l,c;return i.dom?(t=t||"",l=i.dom,n!==!0?(l.innerHTML=t,Ext.callback(r,i),i):(s=Ext.id(),t+='<span id="'+s+'" role="presentation"></span>',c=setInterval(function(){var n,u,l,h,p,d,v;if(!(d=e.getElementById(s)))return!1;clearInterval(c),Ext.removeNode(d),n=Ext.getHead().dom;while(u=o.exec(t))l=u[1],h=l?l.match(a):!1,h&&h[2]?(v=e.createElement("script"),v.src=h[2],p=l.match(f),p&&p[2]&&(v.type=p[2]),n.appendChild(v)):u[2]&&u[2].length>0&&(window.execScript?window.execScript(u[2]):window.eval(u[2]));Ext.callback(r,i)},20),l.innerHTML=t.replace(u,""),i)):i},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},createProxy:function(e,t,r){e=typeof e=="object"?e:{tag:"div",role:"presentation",cls:e};var i=this,s=t?Ext.DomHelper.append(t,e,!0):Ext.DomHelper.insertBefore(i.dom,e,!0);return s.setVisibilityMode(n.DISPLAY),s.hide(),r&&i.setBox&&i.getBox&&s.setBox(i.getBox()),s},needsTabIndex:function(){if(this.dom)return this.dom.nodeName==="a"&&!this.dom.href?!0:!i.test(this.dom.nodeName)},isFocusable:function(e){var t=this.dom,n=t.getAttributeNode("tabIndex"),r,s=t.nodeName,o=!1;n&&n.specified&&(r=n.value);if(t&&!t.disabled){if(r==-1)o=Ext.FocusManager&&Ext.FocusManager.enabled&&e;else if(i.test(s)){if(s!=="a"||t.href)o=!0}else o=r!=null&&r>=0;o=o&&this.isVisible(!0)}return o}}),Ext.isIE9m&&(n.prototype.getById=function(r,i){var s=this.dom,o,u,a;if(s){u=l&&e.getElementById(r)||s.all[r];if(u)return i?a=u:(o=t[r],o&&o.el?a=Ext.updateCacheEntry(o,u).el:a=new n(u)),a}return i?Ext.getDom(r):n.get(r)}),n.createAlias({addListener:"on",removeListener:"un",clearListeners:"removeAllListeners",focusable:"isFocusable"}),n.Fly=r.Fly=new Ext.Class({extend:n,isFly:!0,constructor:function(e){this.dom=e,this.el=this},attach:r.Fly.prototype.attach}),c=new n.Fly,Ext.isIE9m?Ext.getElementById=function(t){var n=e.getElementById(t),i;return!n&&(i=r.detachedBodyEl)&&(n=i.dom.all[t]),n}:e.querySelector||(Ext.getDetachedBody=Ext.getBody,Ext.getElementById=function(t){return e.getElementById(t)})}),Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:"Ext.CompositeElementLite",statics:{importElementMethods:function(){var e,t=Ext.dom.Element.prototype,n=this.prototype;for(e in t)typeof t[e]=="function"&&function(e){n[e]=n[e]||function(){return this.invoke(e,arguments)}}.call(n,e)}},constructor:function(e,t){this.elements=[],this.add(e,t),this.el=new Ext.dom.AbstractElement.Fly},isComposite:!0,getElement:function(e){return this.el.attach(e)},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var n=this.elements,r,i;if(!e)return this;typeof e=="string"?e=Ext.dom.Element.selectorFunction(e,t):e.isComposite?e=e.elements:Ext.isIterable(e)||(e=[e]);for(r=0,i=e.length;r<i;++r)n.push(this.transformElement(e[r]));return this},invoke:function(e,t){var n=this.elements,r=n.length,i,s;e=Ext.dom.Element.prototype[e];for(s=0;s<r;s++)i=n[s],i&&e.apply(this.getElement(i),t);return this},item:function(e){var t=this.elements[e],n=null;return t&&(n=this.getElement(t)),n},slice:function(){return this.elements.slice.apply(this.elements,arguments)},addListener:function(e,t,n,r){var i=this.elements,s=i.length,o,u;for(o=0;o<s;o++)u=i[o],u&&Ext.EventManager.on(u,e,t,n||u,r);return this},each:function(e,t){var n=this,r=n.elements,i=r.length,s,o;for(s=0;s<i;s++){o=r[s];if(o){o=this.getElement(o);if(e.call(t||o,o,n,s)===!1)break}}return n},fill:function(e){var t=this;return t.elements=[],t.add(e),t},insert:function(e,t){Ext.Array.insert(this.elements,e,t)},filter:function(e){var t=this,n=t.elements,r=n.length,i=[],s=0,o=typeof e=="function",u,a;for(;s<r;s++)a=n[s],u=!1,a&&(a=t.getElement(a),o?u=e.call(a,a,t,s)!==!1:u=a.is(e),u&&i.push(t.transformElement(a)));return t.elements=i,t},indexOf:function(e){return Ext.Array.indexOf(this.elements,this.transformElement(e))},replaceElement:function(e,t,n){var r=isNaN(e)?this.indexOf(e):e,i;return r>-1&&(t=Ext.getDom(t),n&&(i=this.elements[r],i.parentNode.insertBefore(t,i),Ext.removeNode(i)),Ext.Array.splice(this.elements,r,1,t)),this},clear:function(e){var t=this,n=t.elements,r=n.length-1;if(e)for(;r>=0;r--)Ext.removeNode(n[r]);this.elements=[]},addElements:function(e,t){if(!e)return this;typeof e=="string"&&(e=Ext.dom.Element.selectorFunction(e,t));var n=this.elements,r=e.length,i;for(i=0;i<r;i++)n.push(Ext.get(e[i]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(e){return this.indexOf(e)!=-1},removeElement:function(e,t){e=[].concat(e);var n=this,r=n.elements,i=e.length,s,o,u;for(u=0;u<i;u++){s=e[u];if(o=r[s]||r[s=n.indexOf(s)])t&&(o.dom?o.remove():Ext.removeNode(o)),Ext.Array.erase(r,s,1)}return n}},function(){this.importElementMethods(),this.prototype.on=this.prototype.addListener,Ext.DomQuery&&(Ext.dom.Element.selectorFunction=Ext.DomQuery.select),Ext.dom.Element.select=function(e,t){var n;return typeof e=="string"?n=Ext.dom.Element.selectorFunction(e,t):e.length!==undefined&&(n=e),new Ext.CompositeElementLite(n)},Ext.select=function(){return Ext.dom.Element.select.apply(Ext.dom.Element,arguments)}}),Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:Ext.dom.CompositeElementLite,getElement:function(e){return e},transformElement:function(e){return Ext.get(e)}},function(){Ext.dom.Element.select=function(e,t,n){var r;return typeof e=="string"?r=Ext.dom.Element.selectorFunction(e,n):e.length!==undefined&&(r=e),t===!0?new Ext.CompositeElement(r):new Ext.CompositeElementLite(r)}}),Ext.select=Ext.Element.select,Ext.define("Ext.util.HashMap",{mixins:{observable:Ext.util.Observable},generation:0,constructor:function(e){e=e||{};var t=this,n=e.keyFn;t.initialConfig=e,t.addEvents("add","clear","remove","replace"),t.mixins.observable.constructor.call(t,e),t.clear(!0),n&&(t.getKey=n)},getCount:function(){return this.length},getData:function(e,t){return t===undefined&&(t=e,e=this.getKey(t)),[e,t]},getKey:function(e){return e.id},add:function(e,t){var n=this;return arguments.length===1&&(t=e,e=n.getKey(t)),n.containsKey(e)?n.replace(e,t):(n.map[e]=t,++n.length,n.generation++,n.hasListeners.add&&n.fireEvent("add",n,e,t),t)},replace:function(e,t){var n=this,r=n.map,i;return arguments.length===1&&(t=e,e=n.getKey(t)),n.containsKey(e)||n.add(e,t),i=r[e],r[e]=t,n.generation++,n.hasListeners.replace&&n.fireEvent("replace",n,e,t,i),t},remove:function(e){var t=this.findKey(e);return t!==undefined?this.removeAtKey(t):!1},removeAtKey:function(e){var t=this,n;return t.containsKey(e)?(n=t.map[e],delete t.map[e],--t.length,t.generation++,t.hasListeners.remove&&t.fireEvent("remove",t,e,n),!0):!1},get:function(e){var t=this.map;return t.hasOwnProperty(e)?t[e]:undefined},clear:function(e){var t=this;if(e||t.generation)t.map={},t.length=0,t.generation=e?0:t.generation+1;return e!==!0&&t.hasListeners.clear&&t.fireEvent("clear",t),t},containsKey:function(e){var t=this.map;return t.hasOwnProperty(e)&&t[e]!==undefined},contains:function(e){return this.containsKey(this.findKey(e))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(e){var t=[],n,r=this.map;for(n in r)r.hasOwnProperty(n)&&t.push(e?n:r[n]);return t},each:function(e,t){var n=Ext.apply({},this.map),r,i=this.length;t=t||this;for(r in n)if(n.hasOwnProperty(r)&&e.call(t,r,n[r],i)===!1)break;return this},clone:function(){var e=new this.self(this.initialConfig),t=this.map,n;e.suspendEvents();for(n in t)t.hasOwnProperty(n)&&e.add(n,t[n]);return e.resumeEvents(),e},findKey:function(e){var t,n=this.map;for(t in n)if(n.hasOwnProperty(t)&&n[t]===e)return t;return undefined}}),Ext.define("Ext.AbstractManager",{typeName:"type",constructor:function(e){Ext.apply(this,e||{}),this.all=new Ext.util.HashMap,this.types={}},get:function(e){return this.all.get(e)},register:function(e){this.all.add(e)},unregister:function(e){this.all.remove(e)},registerType:function(e,t){this.types[e]=t,t[this.typeName]=e},isRegistered:function(e){return this.types[e]!==undefined},create:function(e,t){var n=e[this.typeName]||e.type||t,r=this.types[n];return new r(e)},onAvailable:function(e,t,n){var r=this.all,i,s;r.containsKey(e)?(i=r.get(e),t.call(n||i,i)):(s=function(i,o,u){o==e&&(t.call(n||u,u),r.un("add",s))},r.on("add",s))},each:function(e,t){this.all.each(e,t||this)},getCount:function(){return this.all.getCount()}}),Ext.define("Ext.ComponentManager",{extend:Ext.AbstractManager,alternateClassName:"Ext.ComponentMgr",singleton:!0,typeName:"xtype",create:function(e,t){return typeof e=="string"?Ext.widget(e):e.isComponent?e:Ext.widget(e.xtype||t,e)},registerType:function(e,t){this.types[e]=t,t[this.typeName]=e,t.prototype[this.typeName]=e}},function(){Ext.getCmp=function(e){return Ext.ComponentManager.get(e)}}),Ext.define("Ext.ComponentQuery",{singleton:!0},function(){var e=this,t=Ext.dom.Query.operators,n=/(\d*)n\+?(\d*)/,r=/\D/,i=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),s=function(e,t){return t.method.apply(this,[e].concat(t.args))},o=function(e,t){var n=[],r=0,i=e.length,s,o=t!==">";for(;r<i;r++)s=e[r],s.getRefItems&&(n=n.concat(s.getRefItems(o)));return n},u=function(e){var t=[],n=0,r=e.length,i;for(;n<r;n++){i=e[n];while(!!(i=i.getRefOwner()))t.push(i)}return t},a=function(e,t,n){if(t==="*")return e.slice();var r=[],i=0,s=e.length,o;for(;i<s;i++)o=e[i],o.isXType(t,n)&&r.push(o);return r},f=function(e,t){var n=[],r=0,i=e.length,s;for(;r<i;r++)s=e[r],s.hasCls(t)&&n.push(s);return n},l=function(e,n,r,i){var s=[],o=0,u=e.length,a,f,l,c,h,p;n.charAt(0)==="@"&&(a=!0,n=n.substr(1)),n.charAt(0)==="?"&&(a=!0,f=!0,n=n.substr(1));for(;o<u;o++){l=e[o];if(!a||l.hasOwnProperty(n)){c=l[n];if(f)s.push(l);else if(r==="~="){if(c){Ext.isArray(c)||(c=c.split(" "));for(h=0,p=c.length;h<p;h++)if(t[r](Ext.coerce(c[h],i),i)){s.push(l);break}}}else(i?t[r](Ext.coerce(c,i),i):!!l[n])&&s.push(l)}}return s},c=function(e,t){var n=[],r=0,i=e.length,s;for(;r<i;r++)s=e[r],s.getItemId()===t&&n.push(s);return n},h=function(t,n,r){return e.pseudos[n](t,r)},p=/^(\s?([>\^])\s?|\s|$)/,d=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,v=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:a},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!]?=)\s*['"]?(.*?)["']?)?\])/,method:l},{re:/^#([\w\-]+)/,method:c},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:h},{re:/^(?:\{([^\}]+)\})/,method:i}];e.Query=Ext.extend(Object,{constructor:function(e){e=e||{},Ext.apply(this,e)},execute:function(e){var t=this.operations,n=0,r=t.length,i,a;e?Ext.isIterable(e)?a=e:e.isMixedCollection&&(a=e.items):a=Ext.ComponentManager.all.getArray();for(;n<r;n++){i=t[n],i.mode==="^"?a=u(a||[e]):i.mode?a=o(a||[e],i.mode):a=s(a||o([e]),i);if(n===r-1)return a}return[]},is:function(e){var t=this.operations,n=t.length,r=[e],i,a,f,l,c,h,p;for(a=n-1;a>=0;--a){i=t[a],l=i.mode;if(l){if(l==="^")r=o(r," ");else if(l===">"){h=[];for(f=0,n=r.length;f<n;++f)p=r[f].getRefOwner(),p&&h.push(p);r=h}else r=u(r);if(r.length===0)return!1}else{r=s(r,i);if(r.length===0)return!1}}return!0},getMatches:function(e,t){var n=t.length,r;for(r=0;r<n;++r){e=s(e,t[r]);if(e.length===0)break}return e}}),Ext.apply(this,{cache:{},pseudos:{not:function(e,t){var n=Ext.ComponentQuery,r=0,i=e.length,s=[],o=-1,u;for(;r<i;++r)u=e[r],n.is(u,t)||(s[++o]=u);return s},first:function(e){var t=[];return e.length>0&&t.push(e[0]),t},last:function(e){var t=e.length,n=[];return t>0&&n.push(e[t-1]),n},focusable:function(e){var t=e.length,n=[],r=0,i;for(;r<t;r++)i=e[r],i.isFocusable()&&n.push(i);return n},"nth-child":function(e,t){var i=[],s=n.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!r.test(t)&&"n+"+t||t),o=(s[1]||1)-0,u=s[2]-0,a,f,l;for(a=0;f=e[a];a++)l=a+1,o==1?(u==0||l==u)&&i.push(f):(l+u)%o==0&&i.push(f);return i}},query:function(e,t){var n=e.split(","),r=n.length,i=0,s=[],o=[],u={},a,f,l;for(;i<r;i++)e=Ext.String.trim(n[i]),a=this.cache[e]||(this.cache[e]=this.parse(e)),s=s.concat(a.execute(t));if(r>1){f=s.length;for(i=0;i<f;i++)l=s[i],u[l.id]||(o.push(l),u[l.id]=!0);s=o}return s},is:function(e,t){if(!t)return!0;var n=t.split(","),r=n.length,i=0,s;for(;i<r;i++){t=Ext.String.trim(n[i]),s=this.cache[t]||(this.cache[t]=this.parse(t));if(s.is(e))return!0}return!1},parse:function(t){var n=[],r=v.length,i,s,o,u,l,h,m,g;while(t&&i!==t){i=t,s=t.match(d),s&&(o=s[1],o==="#"?n.push({method:c,args:[Ext.String.trim(s[2])]}):o==="."?n.push({method:f,args:[Ext.String.trim(s[2])]}):n.push({method:a,args:[Ext.String.trim(s[2]),Boolean(s[3])]}),t=t.replace(s[0],""));while(!(u=t.match(p)))for(h=0;t&&h<r;h++){m=v[h],l=t.match(m.re),g=m.method;if(l){n.push({method:Ext.isString(m.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[g].concat(l.slice(1)))):m.method,args:l.slice(1)}),t=t.replace(l[0],"");break}h===r-1&&Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}u[1]&&(n.push({mode:u[2]||u[1]}),t=t.replace(u[0],""))}return new e.Query({operations:n})}})}),Ext.define("Ext.util.ProtoElement",function(){var e=Ext.String.splitWords,t=Ext.Array.toMap;return{isProtoEl:!0,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:!1,constructor:function(n){var r=this;Ext.apply(r,n),r.classList=e(r.cls),r.classMap=t(r.classList),delete r.cls,Ext.isFunction(r.style)?(r.styleFn=r.style,delete r.style):typeof r.style=="string"?r.style=Ext.Element.parseStyles(r.style):r.style&&(r.style=Ext.apply({},r.style))},flush:function(){this.flushClassList=[],this.removedClasses={},delete this.style,delete this.unselectableAttr},addCls:function(t){var n=this,r=typeof t=="string"?e(t):t,i=r.length,s=n.classList,o=n.classMap,u=n.flushClassList,a=0,f;for(;a<i;++a)f=r[a],o[f]||(o[f]=!0,s.push(f),u&&(u.push(f),delete n.removedClasses[f]));return n},hasCls:function(e){return e in this.classMap},removeCls:function(n){var r=this,i=r.classList,s=r.classList=[],o=t(e(n)),u=i.length,a=r.classMap,f=r.removedClasses,l,c;for(l=0;l<u;++l)c=i[l],o[c]?(f&&a[c]&&(f[c]=!0,Ext.Array.remove(r.flushClassList,c)),delete a[c]):s.push(c);return r},setStyle:function(e,t){var n=this,r=n.style||(n.style={});return typeof e=="string"?arguments.length===1?n.setStyle(Ext.Element.parseStyles(e)):r[e]=t:Ext.apply(r,e),n},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls),Ext.isOpera&&(this.unselectableAttr=!0)},writeTo:function(e){var t=this,n=t.flushClassList||t.classList,r=t.removedClasses,i;return t.styleFn?(i=Ext.apply({},t.styleFn()),Ext.apply(i,t.style)):i=t.style,e[t.clsProp]=n.join(" "),i&&(e[t.styleProp]=t.styleIsText?Ext.DomHelper.generateStyles(i,null,!0):i),r&&(r=Ext.Object.getKeys(r),r.length&&(e[t.removedProp]=r.join(" "))),t.unselectableAttr&&(e.unselectable="on"),e}}}()),Ext.define("Ext.PluginManager",{extend:Ext.AbstractManager,alternateClassName:"Ext.PluginMgr",singleton:!0,typeName:"ptype",create:function(e,t,n){var r;return e.init?r=e:(n?(e=Ext.apply({},e),e.cmp=n):n=e.cmp,e.xclass?r=Ext.create(e):(r=Ext.ClassManager.getByAlias("plugin."+(e.ptype||t)),typeof r=="function"&&(r=new r(e)))),r&&n&&r.setCmp&&!r.setCmpCalled&&(r.setCmp(n),r.setCmpCalled=!0),r},findByType:function(e,t){var n=[],r=this.types,i,s;for(i in r){if(!r.hasOwnProperty(i))continue;s=r[i],s.type==e&&(!t||t===!0&&s.isDefault)&&n.push(s)}return n}},function(){Ext.preg=function(){return Ext.PluginManager.registerType.apply(Ext.PluginManager,arguments)}}),Ext.define("Ext.util.Filter",{id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,operator:null,statics:{createFilterFn:function(e){return e&&e.length?function(t){var n=!0,r=e.length,i,s;for(i=0;n&&i<r;i++)s=e[i],s.disabled||(n=n&&s.filterFn.call(s.scope||s,t));return n}:function(){return!0}}},operatorFns:{"<":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)<this.value},"<=":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)<=this.value},"=":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)==this.value},">=":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)>=this.value},">":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)>this.value},"!=":function(e){return Ext.coerce(this.getRoot(e)[this.property],this.value)!=this.value}},constructor:function(e){var t=this;t.initialConfig=e,Ext.apply(t,e),t.filter=t.filter||t.filterFn,t.filter===undefined&&t.setValue(e.value)},setValue:function(e){var t=this;t.value=e,t.property!==undefined&&t.value!==undefined&&(t.filter=t.createFilterFn()),t.filterFn=t.filter},setFilterFn:function(e){this.filterFn=this.filter=e},createFilterFn:function(){var e=this,t=e.createValueMatcher(),n=e.property;return e.operator?e.operatorFns[e.operator]:function(r){var i=e.getRoot(r)[n];return t===null?i===null:t.test(i)}},getRoot:function(e){var t=this.root;return t===undefined?e:e[t]},createValueMatcher:function(){var e=this,t=e.value,n=e.anyMatch,r=e.exactMatch,i=e.caseSensitive,s=Ext.String.escapeRegex;return t===null?t:(t.exec||(t=String(t),n===!0?t=s(t):(t="^"+s(t),r===!0&&(t+="$")),t=new RegExp(t,i?"":"i")),t)},serialize:function(){var e=this,t=Ext.apply({},e.initialConfig);return t.value=e.value,t}},function(){this.prototype.operatorFns["=="]=this.prototype.operatorFns["="]}),Ext.define("Ext.util.AbstractMixedCollection",{mixins:{observable:Ext.util.Observable},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(e,t){var n=this;arguments.length===1&&Ext.isObject(e)?(n.initialConfig=e,Ext.apply(n,e)):(n.allowFunctions=e===!0,t&&(n.getKey=t),n.initialConfig={allowFunctions:n.allowFunctions,getKey:n.getKey}),n.items=[],n.map={},n.keys=[],n.indexMap={},n.length=0,n.mixins.observable
.constructor.call(n)},allowFunctions:!1,add:function(e,t){var n=this.length,r;return arguments.length===1?r=this.insert(n,e):r=this.insert(n,e,t),r},getKey:function(e){return e.id},replace:function(e,t){var n=this,r,i;return arguments.length==1&&(t=arguments[0],e=n.getKey(t)),r=n.map[e],typeof e=="undefined"||e===null||typeof r=="undefined"?n.add(e,t):(n.generation++,i=n.indexOfKey(e),n.items[i]=t,n.map[e]=t,n.hasListeners.replace&&n.fireEvent("replace",e,r,t),t)},updateKey:function(e,t){var n=this,r=n.map,i=n.indexMap,s=n.indexOfKey(e),o;s>-1&&(o=r[e],delete r[e],delete i[e],r[t]=o,i[t]=s,n.keys[s]=t,n.indexGeneration=++n.generation)},addAll:function(e){var t=this,n;if(arguments.length>1||Ext.isArray(e))t.insert(t.length,arguments.length>1?arguments:e);else for(n in e)e.hasOwnProperty(n)&&(t.allowFunctions||typeof e[n]!="function")&&t.add(n,e[n])},each:function(e,t){var n=Ext.Array.push([],this.items),r=0,i=n.length,s;for(;r<i;r++){s=n[r];if(e.call(t||s,s,r,i)===!1)break}},eachKey:function(e,t){var n=this.keys,r=this.items,i=0,s=n.length;for(;i<s;i++)e.call(t||window,n[i],r[i],i,s)},findBy:function(e,t){var n=this.keys,r=this.items,i=0,s=r.length;for(;i<s;i++)if(e.call(t||window,r[i],n[i]))return r[i];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(e,t,n){var r;return Ext.isIterable(t)?r=this.doInsert(e,t,n):(arguments.length>2?r=this.doInsert(e,[t],[n]):r=this.doInsert(e,[t]),r=r[0]),r},doInsert:function(e,t,n){var r=this,i,s,o,u=t.length,a=u,f=r.hasListeners.add,l,c={},h,p,d;if(n!=null)r.useLinearSearch=!0;else{n=t,t=new Array(u);for(o=0;o<u;o++)t[o]=this.getKey(n[o])}r.suspendEvents();for(o=0;o<u;o++)i=t[o],s=r.indexOfKey(i),s!==-1&&(s<e&&e--,r.removeAt(s)),i!=null&&(c[i]!=null&&(h=!0,a--),c[i]=o);r.resumeEvents();if(h){p=t,d=n,t=new Array(a),n=new Array(a),o=0;for(i in c)t[o]=p[c[i]],n[o]=d[c[i]],o++;u=a}l=e===r.length&&r.indexGeneration===r.generation,Ext.Array.insert(r.items,e,n),Ext.Array.insert(r.keys,e,t),r.length+=u,r.generation++,l&&(r.indexGeneration=r.generation);for(o=0;o<u;o++,e++)i=t[o],i!=null&&(r.map[i]=n[o],l&&(r.indexMap[i]=e)),f&&r.fireEvent("add",e,n[o],i);return n},remove:function(e){var t=this,n,r;return!t.useLinearSearch&&(n=t.getKey(e))?r=t.indexOfKey(n):r=Ext.Array.indexOf(t.items,e),r===-1?!1:t.removeAt(r)},removeAll:function(e){var t=this,n;if(e||t.hasListeners.remove)if(e)for(n=e.length-1;n>=0;--n)t.remove(e[n]);else while(t.length)t.removeAt(0);else t.length=t.items.length=t.keys.length=0,t.map={},t.indexMap={},t.generation++,t.indexGeneration=t.generation},removeAt:function(e){var t=this,n,r;return e<t.length&&e>=0?(t.length--,n=t.items[e],Ext.Array.erase(t.items,e,1),r=t.keys[e],typeof r!="undefined"&&delete t.map[r],Ext.Array.erase(t.keys,e,1),t.hasListeners.remove&&t.fireEvent("remove",n,r),t.generation++,n):!1},removeRange:function(e,t){var n=this,r,i,s,o,u,a;if(e<n.length&&e>=0){t||(t=1),o=Math.min(e+t,n.length),t=o-e,a=o===n.length,u=a&&n.indexGeneration===n.generation;for(s=e;s<o;s++)i=n.keys[s],i!=null&&(delete n.map[i],u&&delete n.indexMap[i]);return r=n.items[s-1],n.length-=t,n.generation++,u&&(n.indexGeneration=n.generation),a?n.items.length=n.keys.length=n.length:(n.items.splice(e,t),n.keys.splice(e,t)),r}return!1},removeAtKey:function(e){var t=this,n=t.keys,r;if(e!=null)return t.removeAt(t.indexOfKey(e));for(r=n.length-1;r>=0;r--)n[r]==null&&t.removeAt(r)},getCount:function(){return this.length},indexOf:function(e){var t=this,n;return e!=null?!t.useLinearSearch&&(n=t.getKey(e))?this.indexOfKey(n):Ext.Array.indexOf(t.items,e):-1},indexOfKey:function(e){return this.map.hasOwnProperty(e)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[e]):-1},rebuildIndexMap:function(){var e=this,t=e.indexMap={},n=e.keys,r=n.length,i;for(i=0;i<r;i++)t[n[i]]=i;e.indexGeneration=e.generation},get:function(e){var t=this,n=t.map[e],r=n!==undefined?n:typeof e=="number"?t.items[e]:undefined;return typeof r!="function"||t.allowFunctions?r:null},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},contains:function(e){var t=this,n;return e!=null?!t.useLinearSearch&&(n=t.getKey(e))?this.map[n]!=null:Ext.Array.indexOf(this.items,e)!==-1:!1},containsKey:function(e){return this.map.hasOwnProperty(e)},clear:function(){var e=this;e.generation&&(e.length=0,e.items=[],e.keys=[],e.map={},e.indexMap={},e.generation++,e.indexGeneration=e.generation),e.hasListeners.clear&&e.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(e,t,n,r){var i=this.extractValues(e,t),s=i.length,o=0,u;n=n||0,r=r||r===0?r:s-1;for(u=n;u<=r;u++)o+=i[u];return o},collect:function(e,t,n){var r=this.extractValues(e,t),i=r.length,s={},o=[],u,a,f;for(f=0;f<i;f++)u=r[f],a=String(u),(n||!Ext.isEmpty(u))&&!s[a]&&(s[a]=!0,o.push(u));return o},extractValues:function(e,t){var n=this.items;return t&&(n=Ext.Array.pluck(n,t)),Ext.Array.pluck(n,e)},hasRange:function(e,t){return t<this.length},getRange:function(e,t){var n=this,r=n.items,i=[],s=r.length,o,u;if(s<1)return i;e>t&&(u=!0,o=e,e=t,t=o),e<0&&(e=0);if(t==null||t>=s)t=s-1;return i=r.slice(e,t+1),u&&i.length&&i.reverse(),i},filter:function(e,t,n,r){var i=[];if(Ext.isString(e))i.push(new Ext.util.Filter({property:e,value:t,anyMatch:n,caseSensitive:r}));else if(Ext.isArray(e)||e instanceof Ext.util.Filter)i=i.concat(e);return this.filterBy(Ext.util.Filter.createFilterFn(i))},filterBy:function(e,t){var n=this,r=new n.self(n.initialConfig),i=n.keys,s=n.items,o=s.length,u;r.getKey=n.getKey;for(u=0;u<o;u++)e.call(t||n,s[u],i[u])&&r.add(i[u],s[u]);return r.useLinearSearch=n.useLinearSearch,r},findIndex:function(e,t,n,r,i){return Ext.isEmpty(t,!1)?-1:(t=this.createValueMatcher(t,r,i),this.findIndexBy(function(n){return n&&t.test(n[e])},null,n))},findIndexBy:function(e,t,n){var r=this,i=r.keys,s=r.items,o=n||0,u=s.length;for(;o<u;o++)if(e.call(t||r,s[o],i[o]))return o;return-1},createValueMatcher:function(e,t,n,r){if(!e.exec){var i=Ext.String.escapeRegex;e=String(e),t===!0?e=i(e):(e="^"+i(e),r===!0&&(e+="$")),e=new RegExp(e,n?"":"i")}return e},clone:function(){var e=this,t=new e.self(e.initialConfig);return t.add(e.keys,e.items),t.useLinearSearch=e.useLinearSearch,t}}),Ext.define("Ext.util.Sorter",{direction:"ASC",constructor:function(e){var t=this;Ext.apply(t,e),t.updateSortFunction()},createSortFunction:function(e){var t=this,n=t.direction||"ASC",r=n.toUpperCase()=="DESC"?-1:1;return function(n,i){return r*e.call(t,n,i)}},defaultSorterFn:function(e,t){var n=this,r=n.transform,i=n.getRoot(e)[n.property],s=n.getRoot(t)[n.property];return r&&(i=r(i),s=r(s)),i>s?1:i<s?-1:0},getRoot:function(e){return this.root===undefined?e:e[this.root]},setDirection:function(e){var t=this;t.direction=e?e.toUpperCase():e,t.updateSortFunction()},toggle:function(){var e=this;e.direction=Ext.String.toggle(e.direction,"ASC","DESC"),e.updateSortFunction()},updateSortFunction:function(e){var t=this;e=e||t.sorterFn||t.defaultSorterFn,t.sort=t.createSortFunction(e)},serialize:function(){return{root:this.root,property:this.property,direction:this.direction}}}),Ext.define("Ext.util.Sortable",{isSortable:!0,defaultSortDirection:"ASC",statics:{createComparator:function(e){return e&&e.length?function(t,n){var r=e[0].sort(t,n),i=e.length,s=1;for(;s<i;s++)r=r||e[s].sort.call(this,t,n);return r}:function(){return 0}}},initSortable:function(){var e=this,t=e.sorters;e.sorters=new Ext.util.AbstractMixedCollection(!1,function(e){return e.id||e.property}),t&&e.sorters.addAll(e.decodeSorters(t))},sort:function(e,t,n,r){var i=this,s,o;return Ext.isArray(e)?(r=n,n=t,o=e):Ext.isObject(e)?(r=n,n=t,o=[e]):Ext.isString(e)&&(s=i.sorters.get(e),s?t===undefined?s.toggle():s.setDirection(t):(s={property:e,direction:t},o=[s])),o&&o.length&&(o=i.decodeSorters(o),Ext.isString(n)?n==="prepend"?i.sorters.insert(0,o):i.sorters.addAll(o):(i.sorters.clear(),i.sorters.addAll(o))),r!==!1&&(i.fireEvent("beforesort",i,o),i.onBeforeSort(o),e=i.sorters.items,e.length&&i.doSort(i.generateComparator())),e},generateComparator:function(){var e=this.sorters.getRange();return e.length?this.createComparator(e):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(e){Ext.isArray(e)||(e===undefined?e=[]:e=[e]);var t=e.length,n=Ext.util.Sorter,r=this.model?this.model.prototype.fields:null,i,s,o;for(o=0;o<t;o++)s=e[o],s instanceof n||(Ext.isString(s)&&(s={property:s}),Ext.applyIf(s,{root:this.sortRoot,direction:"ASC"}),s.fn&&(s.sorterFn=s.fn),typeof s=="function"&&(s={sorterFn:s}),r&&!s.transform&&(i=r.get(s.property),s.transform=i&&i.sortType!==Ext.identityFn?i.sortType:undefined),e[o]=new Ext.util.Sorter(s));return e},getSorters:function(){return this.sorters.items},getFirstSorter:function(){var e=this.sorters.items,t=e.length,n=0,r;for(;n<t;++n){r=e[n];if(!r.isGrouper)return r}return null}},function(){this.prototype.createComparator=this.createComparator}),Ext.define("Ext.util.MixedCollection",{extend:Ext.util.AbstractMixedCollection,mixins:{sortable:Ext.util.Sortable},constructor:function(){var e=this;e.callParent(arguments),e.addEvents("sort"),e.mixins.sortable.initSortable.call(e)},doSort:function(e){this.sortBy(e)},_sort:function(e,t,n){var r=this,i,s,o=String(t).toUpperCase()=="DESC"?-1:1,u=[],a=r.keys,f=r.items,l;n=n||function(e,t){return e-t};for(i=0,s=f.length;i<s;i++)u[u.length]={key:a[i],value:f[i],index:i};Ext.Array.sort(u,function(t,r){return n(t[e],r[e])*o||(t.index<r.index?-1:1)});for(i=0,s=u.length;i<s;i++)l=u[i],f[i]=l.value,a[i]=l.key,r.indexMap[l.key]=i;r.generation++,r.indexGeneration=r.generation,r.fireEvent("sort",r)},sortBy:function(e){var t=this,n=t.items,r,i=t.keys,s,o=n.length,u;for(u=0;u<o;u++)n[u].$extCollectionIndex=u;Ext.Array.sort(n,function(t,n){return e(t,n)||(t.$extCollectionIndex<n.$extCollectionIndex?-1:1)});for(u=0;u<o;u++)r=n[u],s=t.getKey(r),i[u]=s,t.indexMap[s]=u,delete n.$extCollectionIndex;t.generation++,t.indexGeneration=t.generation,t.fireEvent("sort",t,n,i)},findInsertionIndex:function(e,t){var n=this,r=n.items,i=0,s=r.length-1,o,u;t||(t=n.generateComparator());while(i<=s)o=i+s>>1,u=t(e,r[o]),u>=0?i=o+1:u<0&&(s=o-1);return i},reorder:function(e){var t=this,n=t.items,r=0,i=n.length,s=[],o=[],u;t.suspendEvents();for(u in e)s[e[u]]=n[u];for(r=0;r<i;r++)e[r]==undefined&&o.push(n[r]);for(r=0;r<i;r++)s[r]==undefined&&(s[r]=o.shift());t.clear(),t.addAll(s),t.resumeEvents(),t.fireEvent("sort",t)},sortByKey:function(e,t){this._sort("key",e,t||function(e,t){var n=String(e).toUpperCase(),r=String(t).toUpperCase();return n>r?1:n<r?-1:0})}}),Ext.define("Ext.fx.target.Target",{isAnimTarget:!0,constructor:function(e){this.target=e,this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}}),Ext.define("Ext.fx.target.Element",{extend:Ext.fx.target.Target,type:"element",getElVal:function(e,t,n){return n==undefined&&(t==="x"?n=e.getX():t==="y"?n=e.getY():t==="scrollTop"?n=e.getScroll().top:t==="scrollLeft"?n=e.getScroll().left:t==="height"?n=e.getHeight():t==="width"?n=e.getWidth():n=e.getStyle(t)),n},getAttr:function(e,t){var n=this.target;return[[n,this.getElVal(n,e,t)]]},setAttr:function(e){var t=this.target,n=e.length,r,i,s,o,u,a;for(o=0;o<n;o++){r=e[o].attrs;for(i in r)if(r.hasOwnProperty(i)){a=r[i].length;for(u=0;u<a;u++)s=r[i][u],this.setElVal(s[0],i,s[1])}}},setElVal:function(e,t,n){t==="x"?e.setX(n):t==="y"?e.setY(n):t==="scrollTop"?e.scrollTo("top",n):t==="scrollLeft"?e.scrollTo("left",n):t==="width"?e.setWidth(n):t==="height"?e.setHeight(n):e.setStyle(t,n)}}),Ext.define("Ext.fx.target.ElementCSS",{extend:Ext.fx.target.Element,setAttr:function(e,t){var n={attrs:[],duration:[],easing:[]},r=e.length,i,s,o,u,a,f,l,c,h;for(l=0;l<r;l++){s=e[l],a=s.duration,u=s.easing,s=s.attrs;for(o in s)Ext.Array.indexOf(n.attrs,o)==-1&&(n.attrs.push(o.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})),n.duration.push(a+"ms"),n.easing.push(u))}i=n.attrs.join(","),a=n.duration.join(","),u=n.easing.join(", ");for(l=0;l<r;l++){s=e[l].attrs;for(o in s){h=s[o].length;for(c=0;c<h;c++)f=s[o][c],f[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",t?"":i),f[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",t?"":a),f[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",t?"":u),f[0].setStyle(o,f[1]),t?f=f[0].dom.offsetWidth:f[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},f[0],{single:!0})}}}}),Ext.define("Ext.fx.target.CompositeElement",{extend:Ext.fx.target.Element,isComposite:!0,constructor:function(e){e.id=e.id||Ext.id(null,"ext-composite-"),this.callParent([e])},getAttr:function(e,t){var n=[],r=this.target,i=r.elements,s=i.length,o,u;for(o=0;o<s;o++)u=i[o],u&&(u=r.getElement(u),n.push([u,this.getElVal(u,e,t)]));return n},setAttr:function(e){var t=this.target,n=e.length,r=t.elements,i=r.length,s,o,u,a,f,l,c,h;for(l=0;l<n;l++){u=e[l].attrs;for(a in u)if(u.hasOwnProperty(a)){h=u[a].length;for(c=0;c<h;c++){s=u[a][c][1];for(o=0;o<i;++o)el=r[o],el&&(el=t.getElement(el),this.setElVal(el,a,s))}}}},remove:function(){this.target.remove()}}),Ext.define("Ext.fx.target.CompositeElementCSS",{extend:Ext.fx.target.CompositeElement,setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}}),Ext.define("Ext.fx.target.Sprite",{extend:Ext.fx.target.Target,type:"draw",getFromPrim:function(e,t){var n;switch(t){case"rotate":case"rotation":return n=e.attr.rotation,{x:n.x||0,y:n.y||0,degrees:n.degrees||0};case"scale":case"scaling":return n=e.attr.scaling,{x:n.x||1,y:n.y||1,cx:n.cx||0,cy:n.cy||0};case"translate":case"translation":return n=e.attr.translation,{x:n.x||0,y:n.y||0};default:return e.attr[t]}},getAttr:function(e,t){return[[this.target,t!=undefined?t:this.getFromPrim(this.target,e)]]},setAttr:function(e){var t=e.length,n=[],r,i,s,o,u,a,f,l,c,h,p,d;for(l=0;l<t;l++){r=e[l].attrs;for(i in r){s=r[i],d=s.length;for(c=0;c<d;c++)u=s[c][0],o=s[c][1],i==="translate"||i==="translation"?f={x:o.x,y:o.y}:i==="rotate"||i==="rotation"?(h=o.x,isNaN(h)&&(h=null),p=o.y,isNaN(p)&&(p=null),f={degrees:o.degrees,x:h,y:p}):i==="scale"||i==="scaling"?(h=o.x,isNaN(h)&&(h=null),p=o.y,isNaN(p)&&(p=null),f={x:h,y:p,cx:o.cx,cy:o.cy}):i==="width"||i==="height"||i==="x"||i==="y"?f=parseFloat(o):f=o,a=Ext.Array.indexOf(n,u),a==-1&&(n.push([u,{}]),a=n.length-1),n[a][1][i]=f}}t=n.length;for(l=0;l<t;l++)n[l][0].setAttributes(n[l][1]);this.target.redraw()}}),Ext.define("Ext.fx.target.CompositeSprite",{extend:Ext.fx.target.Sprite,getAttr:function(e,t){var n=[],r=[].concat(this.target.items),i=r.length,s,o;for(s=0;s<i;s++)o=r[s],n.push([o,t!=undefined?t:this.getFromPrim(o,e)]);return n}}),Ext.define("Ext.fx.target.Component",{extend:Ext.fx.target.Target,type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(e,t){return[[this.target,t!==undefined?t:this.getPropMethod[e].call(this.target)]]},setAttr:function(e,t,n){var r=this,i=e.length,s,o,u,a,f,l,c,h,p,d,v={},m;for(a=0;a<i;a++){s=e[a].attrs;for(o in s){l=s[o].length;for(f=0;f<l;f++)u=s[o][f],m=v[r.setMethods[o]]||(v[r.setMethods[o]]={}),m.target=u[0],m[o]=u[1]}v.setPosition&&(u=v.setPosition,c=u.left===undefined?undefined:parseFloat(u.left),h=u.top===undefined?undefined:parseFloat(u.top),u.target.setPosition(c,h)),v.setPagePosition&&(u=v.setPagePosition,u.target.setPagePosition(u.x,u.y)),v.setSize&&(u=v.setSize,p=u.width===undefined?u.target.getWidth():parseFloat(u.width),d=u.height===undefined?u.target.getHeight():parseFloat(u.height),u.target.el.setSize(p,d),(n||r.dynamic)&&Ext.globalEvents.on({idle:Ext.Function.bind(u.target.setSize,u.target,[p,d]),single:!0})),v.setOpacity&&(u=v.setOpacity,u.target.el.setStyle("opacity",u.opacity))}}}),Ext.define("Ext.fx.Queue",{constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(e){var t=this.targets.get(e);return t?t.fxDefaults:{}},setFxDefaults:function(e,t){var n=this.targets.get(e);n&&(n.fxDefaults=Ext.apply(n.fxDefaults||{},t))},stopAnimation:function(e){var t=this,n=t.getFxQueue(e),r=n.length;while(r)n[r-1].end(),r--},getActiveAnimation:function(e){var t=this.getFxQueue(e);return t&&!!t.length?t[0]:!1},hasFxBlock:function(e){var t=this.getFxQueue(e);return t&&t[0]&&t[0].block},getFxQueue:function(e){if(!e)return!1;var t=this,n=t.fxQueue[e],r=t.targets.get(e);return r?(n||(t.fxQueue[e]=[],r.type!="element"&&r.target.on("destroy",function(){t.fxQueue[e]=[]})),t.fxQueue[e]):!1},queueFx:function(e){var t=this,n=e.target,r,i;if(!n)return;r=t.getFxQueue(n.getId()),i=r.length,i?e.concurrent?e.paused=!1:r[i-1].on("afteranimate",function(){e.paused=!1}):e.paused=!1,e.on("afteranimate",function(){Ext.Array.remove(r,e),r.length===0&&t.targets.remove(e.target);if(e.remove&&n.type=="element"){var i=Ext.get(n.id);i&&i.remove()}},t,{single:!0}),r.push(e)}}),Ext.define("Ext.fx.Manager",{singleton:!0,mixins:{queue:Ext.fx.Queue},constructor:function(){var e=this;e.items=new Ext.util.MixedCollection,e.targetArr={},e.mixins.queue.constructor.call(e),e.taskRunner=new Ext.util.TaskRunner},interval:16,forceJS:!0,createTarget:function(e){var t=this,n=!t.forceJS&&Ext.supports.Transitions,r;t.useCSS3=n;if(e){if(e.tagName||Ext.isString(e)||e.isFly)e=Ext.get(e),r=new Ext.fx.target["Element"+(n?"CSS":"")](e);else if(e.dom)r=new Ext.fx.target["Element"+(n?"CSS":"")](e);else if(e.isComposite)r=new Ext.fx.target["CompositeElement"+(n?"CSS":"")](e);else if(e.isSprite)r=new Ext.fx.target.Sprite(e);else if(e.isCompositeSprite)r=new Ext.fx.target.CompositeSprite(e);else{if(!e.isComponent)return e.isAnimTarget?e:null;r=new Ext.fx.target.Component(e)}return t.targets.add(r),r}return null},addAnim:function(e){var t=this,n=t.items,r=t.task;n.add(e.id,e),!r&&n.length&&(r=t.task={run:t.runner,interval:t.interval,scope:t},t.taskRunner.start(r))},removeAnim:function(e){var t=this,n=t.items,r=t.task;n.removeAtKey(e.id),r&&!n.length&&(t.taskRunner.stop(r),delete t.task)},runner:function(){var e=this,t=e.items.getRange(),n=0,r=t.length,i;e.targetArr={},e.timestamp=new Date;for(;n<r;n++)i=t[n],i.isReady()&&e.startAnim(i);for(n=0;n<r;n++)i=t[n],i.isRunning()&&e.runAnim(i);e.applyPendingAttrs()},startAnim:function(e){e.start(this.timestamp)},runAnim:function(e,t){if(!e)return;var n=this,r=n.useCSS3&&e.target.type=="element",i=n.timestamp-e.startTime,s=i>=e.duration,o,u;return t&&(i=e.duration,s=!0),o=this.collectTargetData(e,i,r,s),r&&(e.target.setAttr(o.anims[e.id].attributes,!0),n.collectTargetData(e,e.duration,r,s),e.paused=!0,o=e.target.target,e.target.isComposite&&(o=e.target.target.last()),u={},u[Ext.supports.CSS3TransitionEnd]=e.lastFrame,u.scope=e,u.single=!0,o.on(u)),o},jumpToEnd:function(e){var t=this.runAnim(e,!0);this.applyAnimAttrs(t,t.anims[e.id])},collectTargetData:function(e,t,n,r){var i=e.target.getId(),s=this.targetArr[i];return s||(s=this.targetArr[i]={id:i,el:e.target,anims:{}}),s.anims[e.id]={id:e.id,anim:e,elapsed:t,isLastFrame:r,attributes:[{duration:e.duration,easing:n&&e.reverse?e.easingFn.reverse().toCSS3():e.easing,attrs:e.runAnim(t)}]},s},applyAnimAttrs:function(e,t){var n=t.anim;t.attributes&&n.isRunning()&&(e.el.setAttr(t.attributes,!1,t.isLastFrame),t.isLastFrame&&n.lastFrame())},applyPendingAttrs:function(){var e=this.targetArr,t,n,r,i,s;for(n in e)if(e.hasOwnProperty(n)){t=e[n];for(s in t.anims)t.anims.hasOwnProperty(s)&&(r=t.anims[s],i=r.anim,r.attributes&&i.isRunning()&&(t.el.setAttr(r.attributes,!1,r.isLastFrame),r.isLastFrame&&i.lastFrame()))}}}),Ext.define("Ext.fx.Animator",{mixins:{observable:Ext.util.Observable},isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(e){var t=this;e=Ext.apply(t,e||{}),t.config=e,t.id=Ext.id(null,"ext-animator-"),t.addEvents("beforeanimate","keyframe","afteranimate"),t.mixins.observable.constructor.call(t,e),t.timeline=[],t.createTimeline(t.keyframes),t.target&&(t.applyAnimator(t.target),Ext.fx.Manager.addAnim(t))},sorter:function(e,t){return e.pct-t.pct},createTimeline:function(e){var t=this,n=[],r=t.to||{},i=t.duration,s,o,u,a,f,l;for(f in e)e.hasOwnProperty(f)&&t.animKeyFramesRE.test(f)&&(l={attrs:Ext.apply(e[f],r)},f=="from"?f=0:f=="to"&&(f=100),l.pct=parseInt(f,10),n.push(l));Ext.Array.sort(n,t.sorter),a=n.length;for(u=0;u<a;u++)s=n[u-1]?i*(n[u-1].pct/100):0,o=i*(n[u].pct/100),t.timeline.push({duration:o-s,attrs:n[u].attrs})},applyAnimator:function(e){var t=this,n=[],r=t.timeline,i=r.length,s,o,u,a,f;if(t.fireEvent("beforeanimate",t)!==!1){for(f=0;f<i;f++)s=r[f],a=s.attrs,o=a.easing||t.easing,u=a.damper||t.damper,delete a.easing,delete a.damper,s=new Ext.fx.Anim({target:e,easing:o,damper:u,duration:s.duration,paused:!0,to:a}),n.push(s);t.animations=n,t.target=s.target;for(f=0;f<i-1;f++)s=n[f],s.nextAnim=n[f+1],s.on("afteranimate",function(){this.nextAnim.paused=!1}),s.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},t);n[i-1].on("afteranimate",function(){this.lastFrame()},t)}},start:function(e){var t=this,n=t.delay,r=t.delayStart,i;if(n){if(!r){t.delayStart=e;return}i=e-r;if(i<n)return;e=new Date(r.getTime()+n)}t.fireEvent("beforeanimate",t)!==!1&&(t.startTime=e,t.running=!0,t.animations[t.keyframeStep].paused=!1)},lastFrame:function(){var e=this,t=e.iterations,n=e.currentIteration;n++,n<t?(e.startTime=new Date,e.currentIteration=n,e.keyframeStep=0,e.applyAnimator(e.target),e.animations[e.keyframeStep].paused=!1):(e.currentIteration=0,e.end())},end:function(){var e=this;e.fireEvent("afteranimate",e,e.startTime,new Date-e.startTime)},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return!1}}),Ext.define("Ext.fx.CubicBezier",{singleton:!0,cubicBezierAtTime:function(e,t,n,r,i,s){function h(e){return((a*e+u)*e+o)*e}function p(e,t){var n=d(e,t);return((c*n+l)*n+f)*n}function d(e,t){var n,r,i,s,f,l;for(i=e,l=0;l<8;l++){s=h(i)-e;if(Math.abs(s)<t)return i;f=(3*a*i+2*u)*i+o;if(Math.abs(f)<1e-6)break;i-=s/f}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(Math.abs(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}var o=3*t,u=3*(r-t)-o,a=1-o-u,f=3*n,l=3*(i-n)-f,c=1-f-l;return p(e,1/(200*s))},cubicBezier:function(e,t,n,r){var i=function(i){return Ext.fx.CubicBezier.cubicBezierAtTime(i,e,t,n,r,1)};return i.toCSS3=function(){return"cubic-bezier("+[e,t,n,r].join(",")+")"},i.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-n,1-r,1-e,1-t)},i}}),Ext.require("Ext.fx.CubicBezier",function(){var e=Math,t=e.PI,n=e.pow,r=e.sin,i=e.sqrt,s=e.abs,o=1.70158;Ext.define("Ext.fx.Easing",{singleton:!0,linear:Ext.identityFn,ease:function(e){var t=.07813-e/2,r=-0.25,o=i(.0066+t*t),u=o-t,a=n(s(u),1/3)*(u<0?-1:1),f=-o-t,l=n(s(f),1/3)*(f<0?-1:1),c=a+l+.25;return n(1-c,2)*3*c*.1+(1-c)*3*c*c+c*c*c},easeIn:function(e){return n(e,1.7)},easeOut:function(e){return n(e,.48)},easeInOut:function(e){var t=.48-e/1.04,r=i(.1734+t*t),o=r-t,u=n(s(o),1/3)*(o<0?-1:1),a=-r-t,f=n(s(a),1/3)*(a<0?-1:1),l=u+f+.5;return(1-l)*3*l*l+l*l*l},backIn:function(e){return e*e*((o+1)*e-o)},backOut:function(e){return e-=1,e*e*((o+1)*e+o)+1},elasticIn:function(e){if(e===0||e===1)return e;var i=.3,s=i/4;return n(2,-10*e)*r((e-s)*2*t/i)+1},elasticOut:function(e){return 1-Ext.fx.Easing.elasticIn(1-e)},bounceIn:function(e){return 1-Ext.fx.Easing.bounceOut(1-e)},bounceOut:function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r}},function(){var e=Ext.fx.Easing.self,t=e.prototype;e.implement({"back-in":t.backIn,"back-out":t.backOut,"ease-in":t.easeIn,"ease-out":t.easeOut,"elastic-in":t.elasticIn,"elastic-out":t.elasticOut,"bounce-in":t.bounceIn,"bounce-out":t.bounceOut,"ease-in-out":t.easeInOut})})}),Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:.2,constructor:function(e,t,n){var r=this,i=Ext.Number.constrain;r.r=i(e,0,255),r.g=i(t,0,255),r.b=i(n,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var e=this;return[e.r,e.g,e.b]},getHSL:function(){var e=this,t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=i-s,u,a=0,f=.5*(i+s);return s!=i&&(a=f<.5?o/(i+s):o/(2-i-s),t==i?u=60*(n-r)/o:n==i?u=120+60*(r-t)/o:u=240+60*(t-n)/o,u<0&&(u+=360),u>=360&&(u-=360)),[u,a,f]},getLighter:function(e){var t=this.getHSL();return e=e||this.lightnessFactor,t[2]=Ext.Number.constrain(t[2]+e,0,1),this.fromHSL(t[0],t[1],t[2])},getDarker:function(e){return e=e||this.lightnessFactor,this.getLighter(-e)},toString:function(){var e=this,t=Math.round,n=t(e.r).toString(16),r=t(e.g).toString(16),i=t(e.b).toString(16);return n=n.length==1?"0"+n:n,r=r.length==1?"0"+r:r,i=i.length==1?"0"+i:i,["#",n,r,i].join("")},toHex:function(e){Ext.isArray(e)&&(e=e[0]);if(!Ext.isString(e))return"";if(e.substr(0,1)==="#")return e;var t=this.colorToHexRe.exec(e),n,r,i,s;return Ext.isArray(t)?(n=parseInt(t[2],10),r=parseInt(t[3],10),i=parseInt(t[4],10),s=i|r<<8|n<<16,t[1]+"#"+("000000"+s.toString(16)).slice(-6)):e},fromString:function(e){var t,n,r,i,s=parseInt,o=e.substr(0,1),u;return o!="#"&&(u=Ext.draw.Color.cssColors[e],u&&(e=u,o=e.substr(0,1))),e.length!=4&&e.length!=7||o!=="#"?(t=e.match(this.rgbRe),t&&(n=t[1],r=t[2],i=t[3])):(t=e.match(this.hexRe),t&&(n=s(t[1],16)>>0,r=s(t[2],16)>>0,i=s(t[3],16)>>0,e.length==4&&(n+=n*16,r+=r*16,i+=i*16))),typeof n=="undefined"?undefined:new Ext.draw.Color(n,r,i)},getGrayscale:function(){return this.r*.3+this.g*.59+this.b*.11},fromHSL:function(e,t,n){var r,i,s,o,u=[],a=Math.abs,f=Math.floor;if(t==0||e==null)u=[n,n,n];else{e/=60,r=t*(1-a(2*n-1)),i=r*(1-a(e-2*f(e/2)-1)),s=n-r/2;switch(f(e)){case 0:u=[r,i,0];break;case 1:u=[i,r,0];break;case 2:u=[0,r,i];break;case 3:u=[0,i,r];break;case 4:u=[i,0,r];break;case 5:u=[r,0,i]}u=[u[0]+s,u[1]+s,u[2]+s]}return new Ext.draw.Color(u[0]*255,u[1]*255,u[2]*255)}},function(){var e=this.prototype;this.addStatics({fromHSL:function(){return e.fromHSL.apply(e,arguments)},fromString:function(){return e.fromString.apply(e,arguments)},toHex:function(){return e.toHex.apply(e,arguments)},cssColors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}})}),Ext.define("Ext.draw.Draw",{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"color","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"color","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(e,t){return t=String(t).toLowerCase(),t=="object"&&e===Object(e)||t=="undefined"&&typeof e==t||t=="null"&&e===null||t=="array"&&Array.isArray&&Array.isArray(e)||Object.prototype.toString.call(e).toLowerCase().slice(8,-1)==t},ellipsePath:function(e){var t=e.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",t.x,t.y-t.ry,t.rx,t.ry,t.y+t.ry)},rectPath:function(e){var t=e.attr;return t.radius?Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",t.x+t.radius,t.y,t.width-t.radius*2,t.radius,-t.radius,t.height-t.radius*2,t.radius*2-t.width,t.radius*2-t.height):Ext.String.format("M{0},{1}L{2},{1},{2},{3},{0},{3}z",t.x,t.y,t.width+t.x,t.height+t.y)},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},pathToString:function(e){return e.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(e){if(!e)return null;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[],r=this;return r.is(e,"array")&&r.is(e[0],"array")&&(n=r.pathClone(e)),n.length||String(e).replace(r.pathCommandRE,function(e,i,s){var o=[],u=i.toLowerCase();s.replace(r.pathValuesRE,function(e,t){t&&o.push(+t)}),u=="m"&&o.length>2&&(n.push([i].concat(Ext.Array.splice(o,0,2))),u="l",i=i=="m"?"l":"L");while(o.length>=t[u]){n.push([i].concat(Ext.Array.splice(o,0,t[u])));if(!t[u])break}}),n.toString=r.path2string,n},mapPath:function(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=this.path2curve(e);for(i=0,s=e.length;i<s;i++){a=e[i];for(o=1,u=a.length;o<u-1;o+=2)n=t.x(a[o],a[o+1]),r=t.y(a[o],a[o+1]),a[o]=n,a[o+1]=r}return e},pathClone:function(e){var t=[],n,r,i,s;if(!this.is(e,"array")||!this.is(e&&e[0],"array"))e=this.parsePathString(e);for(i=0,s=e.length;i<s;i++){t[i]=[];for(n=0,r=e[i].length;n<r;n++)t[i][n]=e[i][n]}return t.toString=this.path2string,t},pathToAbsolute:function(e){if(!this.is(e,"array")||!this.is(e&&e[0],"array"))e=this.parsePathString(e);var t=[],n=0,r=0,i=0,s=0,o=0,u=e.length,a,f,l,c;u&&e[0][0]=="M"&&(n=+e[0][1
],r=+e[0][2],i=n,s=r,o++,t[0]=["M",n,r]);for(;o<u;o++){a=t[o]=[],f=e[o];if(f[0]!=f[0].toUpperCase()){a[0]=f[0].toUpperCase();switch(a[0]){case"A":a[1]=f[1],a[2]=f[2],a[3]=f[3],a[4]=f[4],a[5]=f[5],a[6]=+(f[6]+n),a[7]=+(f[7]+r);break;case"V":a[1]=+f[1]+r;break;case"H":a[1]=+f[1]+n;break;case"M":i=+f[1]+n,s=+f[2]+r;default:l=1,c=f.length;for(;l<c;l++)a[l]=+f[l]+(l%2?n:r)}}else{l=0,c=f.length;for(;l<c;l++)t[o][l]=f[l]}switch(a[0]){case"Z":n=i,r=s;break;case"H":n=a[1];break;case"V":r=a[1];break;case"M":f=t[o],c=f.length,i=f[c-2],s=f[c-1];default:f=t[o],c=f.length,n=f[c-2],r=f[c-1]}}return t.toString=this.path2string,t},pathToRelative:function(e){if(!this.is(e,"array")||!this.is(e&&e[0],"array"))e=this.parsePathString(e);var t=[],n=0,r=0,i=0,s=0,o=0,u,a,f,l,c,h,p,d,v;e[0][0]=="M"&&(n=e[0][1],r=e[0][2],i=n,s=r,o++,t.push(["M",n,r]));for(f=o,p=e.length;f<p;f++){u=t[f]=[],a=e[f];if(a[0]!=a[0].toLowerCase()){u[0]=a[0].toLowerCase();switch(u[0]){case"a":u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=+(a[6]-n).toFixed(3),u[7]=+(a[7]-r).toFixed(3);break;case"v":u[1]=+(a[1]-r).toFixed(3);break;case"m":i=a[1],s=a[2];default:for(l=1,d=a.length;l<d;l++)u[l]=+(a[l]-(l%2?n:r)).toFixed(3)}}else{u=t[f]=[],a[0]=="m"&&(i=a[1]+n,s=a[2]+r);for(c=0,v=a.length;c<v;c++)t[f][c]=a[c]}h=t[f].length;switch(t[f][0]){case"z":n=i,r=s;break;case"h":n+=+t[f][h-1];break;case"v":r+=+t[f][h-1];break;default:n+=+t[f][h-2],r+=+t[f][h-1]}}return t.toString=this.path2string,t},path2curve:function(e){var t=this,n=t.pathToAbsolute(e),r=n.length,i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s,o,u,a;for(s=0;s<r;s++){n[s]=t.command2curve(n[s],i);if(n[s].length>7){n[s].shift(),a=n[s];while(a.length)Ext.Array.splice(n,s++,0,["C"].concat(Ext.Array.splice(a,0,6)));Ext.Array.erase(n,s,1),r=n.length,s--}o=n[s],u=o.length,i.x=o[u-2],i.y=o[u-1],i.bx=parseFloat(o[u-4])||i.x,i.by=parseFloat(o[u-3])||i.y}return n},interpolatePaths:function(e,t){var n=this,r=n.pathToAbsolute(e),i=n.pathToAbsolute(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)Ext.Array.splice(e,t++,0,["C"].concat(Ext.Array.splice(n,0,6)));Ext.Array.erase(e,t,1),l=Math.max(r.length,i.length||0)}},a=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(Ext.Array.splice(t,o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],l=Math.max(r.length,i.length||0))},f,l,c,h,p,d;for(f=0,l=Math.max(r.length,i.length||0);f<l;f++)r[f]=n.command2curve(r[f],s),u(r,f),i[f]=n.command2curve(i[f],o),u(i,f),a(r,i,s,o,f),a(i,r,o,s,f),c=r[f],h=i[f],p=c.length,d=h.length,s.x=c[p-2],s.y=c[p-1],s.bx=parseFloat(c[p-4])||s.x,s.by=parseFloat(c[p-3])||s.y,o.bx=parseFloat(h[d-4])||o.x,o.by=parseFloat(h[d-3])||o.y,o.x=h[d-2],o.y=h[d-1];return[r,i]},command2curve:function(e,t){var n=this;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];e[0]!="T"&&e[0]!="Q"&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(n.arc2curve.apply(n,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(n.quadratic2curve(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(n.quadratic2curve(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(t.x,t.y,e[1],e[2],e[1],e[2]);break;case"H":e=["C"].concat(t.x,t.y,e[1],t.y,e[1],t.y);break;case"V":e=["C"].concat(t.x,t.y,t.x,e[1],t.x,e[1]);break;case"Z":e=["C"].concat(t.x,t.y,t.X,t.Y,t.X,t.Y)}return e},quadratic2curve:function(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]},rotate:function(e,t,n){var r=Math.cos(n),i=Math.sin(n),s=e*r-t*i,o=e*i+t*r;return{x:s,y:o}},arc2curve:function(e,t,n,r,i,s,o,u,a,f){var l=this,c=Math.PI,h=l.radian,p=c*120/180,d=h*(+i||0),v=[],m=Math,g=m.cos,y=m.sin,b=m.sqrt,w=m.abs,E=m.asin,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q;f?(M=f[0],_=f[1],A=f[2],O=f[3]):(S=l.rotate(e,t,-d),e=S.x,t=S.y,S=l.rotate(u,a,-d),u=S.x,a=S.y,x=(e-u)/2,T=(t-a)/2,N=x*x/(n*n)+T*T/(r*r),N>1&&(N=b(N),n=N*n,r=N*r),C=n*n,k=r*r,L=(s==o?-1:1)*b(w((C*k-C*T*T-k*x*x)/(C*T*T+k*x*x))),A=L*n*T/r+(e+u)/2,O=L*-r*x/n+(t+a)/2,M=E(((t-O)/r).toFixed(7)),_=E(((a-O)/r).toFixed(7)),M=e<A?c-M:M,_=u<A?c-_:_,M<0&&(M=c*2+M),_<0&&(_=c*2+_),o&&M>_&&(M-=c*2),!o&&_>M&&(_-=c*2)),D=_-M,w(D)>p&&(J=_,K=u,Q=a,_=M+p*(o&&_>M?1:-1),u=A+n*g(_),a=O+r*y(_),v=l.arc2curve(u,a,n,r,i,0,o,K,Q,[_,J,A,O])),D=_-M,P=g(M),H=y(M),B=g(_),j=y(_),F=m.tan(D/4),I=4/3*n*F,q=4/3*r*F,R=[e,t],U=[e+I*H,t-q*P],z=[u+I*j,a-q*B],W=[u,a],U[0]=2*R[0]-U[0],U[1]=2*R[1]-U[1];if(f)return[U,z,W].concat(v);v=[U,z,W].concat(v).join().split(","),X=[],$=v.length;for(V=0;V<$;V++)X[V]=V%2?l.rotate(v[V-1],v[V],d).y:l.rotate(v[V],v[V+1],d).x;return X},rotateAndTranslatePath:function(e){var t=e.rotation.degrees,n=e.rotation.x,r=e.rotation.y,i=e.translation.x,s=e.translation.y,o,u,a,f,l,c=[];if(!t&&!i&&!s)return this.pathToAbsolute(e.attr.path);i=i||0,s=s||0,o=this.pathToAbsolute(e.attr.path);for(u=o.length;u--;){a=c[u]=o[u].slice();if(a[0]=="A")f=this.rotatePoint(a[6],a[7],t,n,r),a[6]=f.x+i,a[7]=f.y+s;else{l=1;while(a[l+1]!=null)f=this.rotatePoint(a[l],a[l+1],t,n,r),a[l]=f.x+i,a[l+1]=f.y+s,l+=2}}return c},rotatePoint:function(e,t,n,r,i){if(!n)return{x:e,y:t};r=r||0,i=i||0,e-=r,t-=i,n*=this.radian;var s=Math.cos(n),o=Math.sin(n);return{x:e*s-t*o+r,y:e*o+t*s+i}},pathDimensions:function(e){if(!e||!(e+""))return{x:0,y:0,width:0,height:0};e=this.path2curve(e);var t=0,n=0,r=[],i=[],s=0,o=e.length,u,a,f,l,c,h;for(;s<o;s++)u=e[s],u[0]=="M"?(t=u[1],n=u[2],r.push(t),i.push(n)):(h=this.curveDim(t,n,u[1],u[2],u[3],u[4],u[5],u[6]),r=r.concat(h.min.x,h.max.x),i=i.concat(h.min.y,h.max.y),t=u[5],n=u[6]);return a=Math.min.apply(0,r),f=Math.min.apply(0,i),l=Math.max.apply(0,r),c=Math.max.apply(0,i),{x:Math.round(a),y:Math.round(f),path:e,width:Math.round(l-a),height:Math.round(c-f)}},intersectInside:function(e,t,n){return(n[0]-t[0])*(e[1]-t[1])>(n[1]-t[1])*(e[0]-t[0])},intersectIntersection:function(e,t,n,r){var i=[],s=n[0]-r[0],o=n[1]-r[1],u=e[0]-t[0],a=e[1]-t[1],f=n[0]*r[1]-n[1]*r[0],l=e[0]*t[1]-e[1]*t[0],c=1/(s*a-o*u);return i[0]=(f*u-l*s)*c,i[1]=(f*a-l*o)*c,i},intersect:function(e,t){var n=this,r=0,i=t.length,s=t[i-1],o=e,u,a,f,l,c,h;for(;r<i;++r){u=t[r],c=o,o=[],a=c[c.length-1],h=0,l=c.length;for(;h<l;h++)f=c[h],n.intersectInside(f,s,u)?(n.intersectInside(a,s,u)||o.push(n.intersectIntersection(a,f,s,u)),o.push(f)):n.intersectInside(a,s,u)&&o.push(n.intersectIntersection(a,f,s,u)),a=f;s=u}return o},bezier:function(e,t,n,r,i){if(i===0)return e;if(i===1)return r;var s=1-i,o=s*s*s,u=i/s;return o*(e+u*(3*t+u*(3*n+r*u)))},bezierDim:function(e,t,n,r){var i=[],s,o,u,a,f,l,c,h,p,d;e+3*n==r+3*t?(s=e-t,s/=2*(e-t-t+n),s<1&&s>0&&i.push(s)):(o=e-3*t+3*n-r,u=2*(e-t-t+n),a=e-t,f=u*u-4*o*a,l=o+o,f===0?(s=u/l,s<1&&s>0&&i.push(s)):f>0&&(c=Math.sqrt(f),s=(c+u)/l,s<1&&s>0&&i.push(s),s=(u-c)/l,s<1&&s>0&&i.push(s))),h=Math.min(e,r),p=Math.max(e,r);for(d=0;d<i.length;d++)h=Math.min(h,this.bezier(e,t,n,r,i[d])),p=Math.max(p,this.bezier(e,t,n,r,i[d]));return[h,p]},curveDim:function(e,t,n,r,i,s,o,u){var a=this.bezierDim(e,n,i,o),f=this.bezierDim(t,r,s,u);return{min:{x:a[0],y:f[0]},max:{x:a[1],y:f[1]}}},getAnchors:function(e,t,n,r,i,s,o){o=o||4;var u=Math,a=u.PI,f=a/2,l=u.abs,c=u.sin,h=u.cos,p=u.atan,d,v,m,g,y,b,w,E,S;d=(n-e)/o,v=(i-n)/o,r>=t&&r>=s||r<=t&&r<=s?m=g=f:(m=p((n-e)/l(r-t)),t<r&&(m=a-m),g=p((i-n)/l(r-s)),s<r&&(g=a-g)),S=f-(m+g)%(a*2)/2,S>f&&(S-=a),m+=S,g+=S,y=n-d*c(m),b=r+d*h(m),w=n+v*c(g),E=r+v*h(g);if(r>t&&b<t||r<t&&b>t)y+=l(t-b)*(y-n)/(b-r),b=t;if(r>s&&E<s||r<s&&E>s)w-=l(s-E)*(w-n)/(E-r),E=s;return{x1:y,y1:b,x2:w,y2:E}},smooth:function(e,t){var n=this.path2curve(e),r=[n[0]],i=n[0][1],s=n[0][2],o,u,a=1,f=n.length,l=1,c=i,h=s,p,d,v,m,g,y,b;for(;a<f;a++){p=n[a],d=p.length,v=n[a-1],m=v.length,g=n[a+1],y=g&&g.length;if(p[0]=="M"){c=p[1],h=p[2],o=a+1;while(n[o][0]!="C")o++;r.push(["M",c,h]),l=r.length,i=c,s=h;continue}p[d-2]!=c||p[d-1]!=h||!!g&&g[0]!="M"?!g||g[0]=="M"?u={x1:p[d-2],y1:p[d-1]}:u=this.getAnchors(v[m-2],v[m-1],p[d-2],p[d-1],g[y-2],g[y-1],t):(b=r[l].length,u=this.getAnchors(v[m-2],v[m-1],c,h,r[l][b-2],r[l][b-1],t),r[l][1]=u.x2,r[l][2]=u.y2),r.push(["C",i,s,u.x1,u.y1,p[d-2],p[d-1]]),i=u.x2,s=u.y2}return r},findDotAtSegment:function(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:Math.pow(f,3)*e+Math.pow(f,2)*3*a*n+f*3*a*a*i+Math.pow(a,3)*o,y:Math.pow(f,3)*t+Math.pow(f,2)*3*a*r+f*3*a*a*s+Math.pow(a,3)*u}},snapEnds:function(e,t,n,r){if(Ext.isDate(e))return this.snapEndsByDate(e,t,n);var i=(t-e)/n,s=Math.floor(Math.log(i)/Math.LN10)+1,o=Math.pow(10,s),u,a,f=Math.round(i%o*Math.pow(10,2-s)),l=[[0,15],[10,1],[20,4],[25,2],[50,9],[100,15]],c=0,h,p,d,v,m=1e9,g=l.length;a=Math.floor(e/o)*o,e==a&&a>0&&(a=Math.floor((e-o/10)/o)*o);if(r){for(d=0;d<g;d++)h=l[d][0],p=h-f<0?1e6:(h-f)/l[d][1],p<m&&(v=h,m=p);i=Math.floor(i*Math.pow(10,-s))*Math.pow(10,s)+v*Math.pow(10,s-2);if(e<0&&t>=0){u=0;while(u>e)u-=i,c++;e=+u.toFixed(10),u=0;while(u<t)u+=i,c++;t=+u.toFixed(10)}else{u=e=a;while(u<t)u+=i,c++}t=+u.toFixed(10)}else e=a,c=n;return{from:e,to:t,power:s,step:i,steps:c}},snapEndsByDate:function(e,t,n,r){var i=!1,s=[[Ext.Date.MILLI,[1,2,5,10,20,50,100,200,250,500]],[Ext.Date.SECOND,[1,2,5,10,15,30]],[Ext.Date.MINUTE,[1,2,5,10,15,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,7,14]],[Ext.Date.MONTH,[1,2,3,6]]],o=s.length,u=!1,a,f,l,c;for(c=0;c<o;c++){a=s[c];if(!u)for(f=0;f<a[1].length;f++)if(t<Ext.Date.add(e,a[0],a[1][f]*n)){i=[a[0],a[1][f]],u=!0;break}}return i||(l=this.snapEnds(e.getFullYear(),t.getFullYear()+1,n,r),i=[Date.YEAR,Math.round(l.step)]),this.snapEndsByDateAndStep(e,t,i,r)},snapEndsByDateAndStep:function(e,t,n,r){var i=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],s,o,u,a,f,l,c,h,p=n[0],d=n[1],v=0;if(r)s=e;else switch(p){case Ext.Date.MILLI:s=new Date(i[0],i[1],i[2],i[3],i[4],i[5],Math.floor(i[6]/d)*d);break;case Ext.Date.SECOND:s=new Date(i[0],i[1],i[2],i[3],i[4],Math.floor(i[5]/d)*d,0);break;case Ext.Date.MINUTE:s=new Date(i[0],i[1],i[2],i[3],Math.floor(i[4]/d)*d,0,0);break;case Ext.Date.HOUR:s=new Date(i[0],i[1],i[2],Math.floor(i[3]/d)*d,0,0,0);break;case Ext.Date.DAY:s=new Date(i[0],i[1],Math.floor((i[2]-1)/d)*d+1,0,0,0,0);break;case Ext.Date.MONTH:s=new Date(i[0],Math.floor(i[1]/d)*d,1,0,0,0,0),v=[],h=!0;break;default:s=new Date(Math.floor(i[0]/d)*d,0,1,0,0,0,0),v=[],h=!0}c=p===Ext.Date.MONTH&&(d==1/2||d==1/3||d==1/4),o=new Date(s);while(o<t)if(c){u=new Date(o),a=u.getFullYear(),f=u.getMonth(),l=u.getDate();switch(d){case.5:l>=15?(l=1,++f>11&&a++):l=15;break;case 1/3:l>=20?(l=1,++f>11&&a++):l>=10?l=20:l=10;break;case.25:l>=22?(l=1,++f>11&&a++):l>=15?l=22:l>=8?l=15:l=8}o.setYear(a),o.setMonth(f),o.setDate(l),v.push(new Date(o))}else h?(o=Ext.Date.add(o,p,d),v.push(new Date(o))):(o=Ext.Date.add(o,p,d),v++);return r&&(o=t),h?{from:+s,to:+o,steps:v}:{from:+s,to:+o,step:(o-s)/v,steps:v}},sorter:function(e,t){return e.offset-t.offset},rad:function(e){return e%360*Math.PI/180},normalizeRadians:function(e){var t=2*Math.PI;return e>=0?e%t:(e%t+t)%t},degrees:function(e){return e*180/Math.PI%360},normalizeDegrees:function(e){return e>=0?e%360:(e%360+360)%360},withinBox:function(e,t,n){return n=n||{},e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},parseGradient:function(e){var t=this,n=e.type||"linear",r=e.angle||0,i=t.radian,s=e.stops,o=[],u,a,f,l;n=="linear"&&(a=[0,0,Math.cos(r*i),Math.sin(r*i)],f=1/(Math.max(Math.abs(a[2]),Math.abs(a[3]))||1),a[2]*=f,a[3]*=f,a[2]<0&&(a[0]=-a[2],a[2]=0),a[3]<0&&(a[1]=-a[3],a[3]=0));for(u in s)s.hasOwnProperty(u)&&t.stopsRE.test(u)&&(l={offset:parseInt(u,10),color:Ext.draw.Color.toHex(s[u].color)||"#ffffff",opacity:s[u].opacity||1},o.push(l));return Ext.Array.sort(o,t.sorter),n=="linear"?{id:e.id,type:n,vector:a,stops:o}:{id:e.id,type:n,centerX:e.centerX,centerY:e.centerY,focalX:e.focalX,focalY:e.focalY,radius:e.radius,vector:a,stops:o}}}),Ext.define("Ext.fx.PropertyHandler",{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(e,t,n,r,i){n=typeof n=="number"?n:1;var s=this.unitRE,o=s.exec(e),u,a;return o&&(e=o[1],a=o[2],!this.scrollRE.test(i)&&!a&&this.pixelDefaultsRE.test(i)&&(a="px")),e=+e||0,o=s.exec(t),o&&(t=o[1],a=o[2]||a),t=+t||0,u=r!=null?r:e,{from:e,delta:(t-u)*n,units:a}},get:function(e,t,n,r,i){var s=e.length,o=[],u,a,f,l,c;for(u=0;u<s;u++){r&&(a=r[u][1].from);if(Ext.isArray(e[u][1])&&Ext.isArray(t)){f=[],l=0,c=e[u][1].length;for(;l<c;l++)f.push(this.computeDelta(e[u][1][l],t[l],n,a,i));o.push([e[u][0],f])}else o.push([e[u][0],this.computeDelta(e[u][1],t,n,a,i)])}return o},set:function(e,t){var n=e.length,r=[],i,s,o,u,a;for(i=0;i<n;i++){s=e[i][1];if(Ext.isArray(s)){o=[],a=0,u=s.length;for(;a<u;a++)o.push(s[a].from+s[a].delta*t+(s[a].units||0));r.push([e[i][0],o])}else r.push([e[i][0],s.from+s.delta*t+(s.units||0)])}return r}},stringHandler:{computeDelta:function(e,t,n,r,i){return{from:e,delta:t}},get:function(e,t,n,r,i){var s=e.length,o=[],u,a,f,l,c;for(u=0;u<s;u++)o.push([e[u][0],this.computeDelta(e[u][1],t,n,a,i)]);return o},set:function(e,t){var n=e.length,r=[],i,s,o,u,a;for(i=0;i<n;i++)s=e[i][1],r.push([e[i][0],s.delta]);return r}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(e,t){t=typeof t=="number"?t:1;var n=!1,r=[this.hexRE,this.rgbRE,this.hex3RE],i=r.length,s,o,u,a;for(a=0;a<i;a++){u=r[a],o=a%2===0?16:10,s=u.exec(e);if(s&&s.length===4){a===2&&(s[1]+=s[1],s[2]+=s[2],s[3]+=s[3]),n={red:parseInt(s[1],o),green:parseInt(s[2],o),blue:parseInt(s[3],o)};break}}return n||e},computeDelta:function(e,t,n,r){e=this.parseColor(e),t=this.parseColor(t,n);var i=r?r:e,s=typeof i,o=typeof t;return s=="string"||s=="undefined"||o=="string"||o=="undefined"?t||i:{from:e,delta:{red:Math.round((t.red-i.red)*n),green:Math.round((t.green-i.green)*n),blue:Math.round((t.blue-i.blue)*n)}}},get:function(e,t,n,r){var i=e.length,s=[],o,u;for(o=0;o<i;o++)r&&(u=r[o][1].from),s.push([e[o][0],this.computeDelta(e[o][1],t,n,u)]);return s},set:function(e,t){var n=e.length,r=[],i,s,o,u,a;for(i=0;i<n;i++){s=e[i][1];if(s){u=s.from,a=s.delta,s=typeof s=="object"&&"red"in s?"rgb("+s.red+", "+s.green+", "+s.blue+")":s,s=typeof s=="object"&&s.length?s[0]:s;if(typeof s=="undefined")return[];o=typeof s=="string"?s:"rgb("+[(u.red+Math.round(a.red*t))%256,(u.green+Math.round(a.green*t))%256,(u.blue+Math.round(a.blue*t))%256].join(",")+")",r.push([e[i][0],o])}}return r}},object:{interpolate:function(e,t){t=typeof t=="number"?t:1;var n={},r;for(r in e)n[r]=parseFloat(e[r])*t;return n},computeDelta:function(e,t,n,r){e=this.interpolate(e),t=this.interpolate(t,n);var i=r?r:e,s={},o;for(o in t)s[o]=t[o]-i[o];return{from:e,delta:s}},get:function(e,t,n,r){var i=e.length,s=[],o,u;for(o=0;o<i;o++)r&&(u=r[o][1].from),s.push([e[o][0],this.computeDelta(e[o][1],t,n,u)]);return s},set:function(e,t){var n=e.length,r=[],i={},s,o,u,a,f;for(s=0;s<n;s++){a=e[s][1],o=a.from,u=a.delta;for(f in o)i[f]=o[f]+u[f]*t;r.push([e[s][0],i])}return r}},path:{computeDelta:function(e,t,n,r){n=typeof n=="number"?n:1;var i;return e=+e||0,t=+t||0,i=r!=null?r:e,{from:e,delta:(t-i)*n}},forcePath:function(e){return!Ext.isArray(e)&&!Ext.isArray(e[0])&&(e=Ext.draw.Draw.parsePathString(e)),e},get:function(e,t,n,r){var i=this.forcePath(t),s=[],o=e.length,u,a,f,l,c,h,p,d,v;for(f=0;f<o;f++){v=this.forcePath(e[f][1]),l=Ext.draw.Draw.interpolatePaths(v,i),v=l[0],i=l[1],u=v.length,d=[];for(h=0;h<u;h++){l=[v[h][0]],a=v[h].length;for(p=1;p<a;p++)c=r&&r[0][1][h][p].from,l.push(this.computeDelta(v[h][p],i[h][p],n,c));d.push(l)}s.push([e[f][0],d])}return s},set:function(e,t){var n=e.length,r=[],i,s,o,u,a,f,l,c;for(i=0;i<n;i++){f=e[i][1],u=[],l=f.length;for(s=0;s<l;s++){a=[f[s][0]],c=f[s].length;for(o=1;o<c;o++)a.push(f[s][o].from+f[s][o].delta*t);u.push(a.join(","))}r.push([e[i][0],u.join(",")])}return r}}}},function(){var e=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],t=e.length,n=0,r;for(;n<t;n++)r=e[n],this[r]=this.color;e=["cursor"],t=e.length,n=0;for(;n<t;n++)r=e[n],this[r]=this.stringHandler}),Ext.define("Ext.fx.Anim",{mixins:{observable:Ext.util.Observable},isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(e){var t=this,n;e=e||{};if(e.keyframes)return new Ext.fx.Animator(e);Ext.apply(t,e),t.from===undefined&&(t.from={}),t.propHandlers={},t.config=e,t.target=Ext.fx.Manager.createTarget(t.target),t.easingFn=Ext.fx.Easing[t.easing],t.target.dynamic=t.dynamic,t.easingFn||(t.easingFn=String(t.easing).match(t.bezierRE),t.easingFn&&t.easingFn.length==5&&(n=t.easingFn,t.easingFn=Ext.fx.CubicBezier.cubicBezier(+n[1],+n[2],+n[3],+n[4]))),t.id=Ext.id(null,"ext-anim-"),t.addEvents("beforeanimate","afteranimate","lastframe"),t.mixins.observable.constructor.call(t),Ext.fx.Manager.addAnim(t),e.autoEnd&&(t.running=!0,t.jumpToEnd())},setAttr:function(e,t){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,e,t)},initAttrs:function(){var e=this,t=e.from,n=e.to,r=e.initialFrom||{},i={},s,o,u,a;for(a in n)n.hasOwnProperty(a)&&(s=e.target.getAttr(a,t[a]),o=n[a],Ext.fx.PropertyHandler[a]?u=e.propHandlers[a]=Ext.fx.PropertyHandler[a]:Ext.isObject(o)?u=e.propHandlers[a]=Ext.fx.PropertyHandler.object:u=e.propHandlers[a]=Ext.fx.PropertyHandler.defaultHandler,i[a]=u.get(s,o,e.damper,r[a],a));e.currentAttrs=i},start:function(e){var t=this,n=t.delay,r=t.delayStart,i;if(n){if(!r){t.delayStart=e;return}i=e-r;if(i<n)return;e=new Date(r.getTime()+n)}t.fireEvent("beforeanimate",t)!==!1&&(t.startTime=e,!t.paused&&!t.currentAttrs&&t.initAttrs(),t.running=!0,t.frameCount=0)},jumpToEnd:function(){var e=this;e.endWasCalled||(e.currentAttrs||e.initAttrs(),Ext.fx.Manager.jumpToEnd(e),e.end())},runAnim:function(e){var t=this,n=t.currentAttrs,r=t.duration,i=t.easingFn,s=t.propHandlers,o={},u,a,f,l;e>=r&&(e=r,l=!0),t.reverse&&(e=r-e);for(f in n)n.hasOwnProperty(f)&&(a=n[f],u=l?1:i(e/r),o[f]=s[f].set(a,u));return t.frameCount++,o},lastFrame:function(){var e=this,t=e.iterations,n=e.currentIteration;n++,n<t?(e.alternate&&(e.reverse=!e.reverse),e.startTime=new Date,e.currentIteration=n,e.paused=!1):(e.currentIteration=0,e.end(),e.fireEvent("lastframe",e,e.startTime))},endWasCalled:0,end:function(){var e=this;if(e.endWasCalled++)return;e.startTime=0,e.paused=!1,e.running=!1,Ext.fx.Manager.removeAnim(e),e.fireEvent("afteranimate",e,e.startTime),Ext.callback(e.callback,e.scope,[e,e.startTime]),e.remove&&e.target.remove()},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return this.paused===!1&&this.running===!0&&this.isAnimator!==!0}}),Ext.enableFx=!0,Ext.define("Ext.util.Animate",{isAnimate:!0,animate:function(e){var t=this;return Ext.fx.Manager.hasFxBlock(t.id)?t:(Ext.fx.Manager.queueFx(new Ext.fx.Anim(t.anim(e))),this)},anim:function(e){if(!Ext.isObject(e))return e?{}:!1;var t=this;return e.stopAnimation&&t.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(t.id)),Ext.apply({target:t,paused:!0},e)},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},function(){Ext.applyIf(Ext.Element.prototype,this.prototype),Ext.CompositeElementLite.importElementMethods()}),Ext.define("Ext.util.ElementContainer",{childEls:[],constructor:function(){var e=this,t;e.hasOwnProperty("childEls")&&(t=e.childEls,delete e.childEls,e.addChildEls.apply(e,t))},destroy:function(){var e=this,t=e.getChildEls(),n,r,i,s;for(i=t.length;i--;)r=t[i],typeof r!="string"&&(r=r.name),n=e[r],n&&(e[r]=null,n.remove())},addChildEls:function(){var e=this,t=arguments;e.hasOwnProperty("childEls")?e.childEls.push.apply(e.childEls,t):e.childEls=e.getChildEls().concat(Array.prototype.slice.call(t)),e.prune(e.childEls,!1)},applyChildEls:function(e,t){var n=this,r=n.getChildEls(),i,s,o,u,a;i=(t||n.id)+"-";for(o=r.length;o--;)s=r[o],typeof s=="string"?a=e.getById(i+s):((u=s.select)?a=Ext.select(u,!0,e.dom):(u=s.selectNode)?a=Ext.get(Ext.DomQuery.selectNode(u,e.dom)):a=e.getById(s.id||i+s.itemId),s=s.name),n[s]=a},getChildEls:function(){var e=this,t;return e.hasOwnProperty("childEls")?e.childEls:(t=e.self,t.$childEls||e.getClassChildEls(t))},getClassChildEls:function(e){var t=this,n=e.$childEls,r,i,s,o,u,a,f,l,c,h,p;if(!n){h=e.superclass,h?(h=h.self,l=[h.$childEls||t.getClassChildEls(h)],p=h.prototype.mixins||{}):(l=[],p={}),c=e.prototype,a=c.mixins;for(f in a)a.hasOwnProperty(f)&&!p.hasOwnProperty(f)&&(u=a[f].self,l.push(u.$childEls||t.getClassChildEls(u)));l.push(c.hasOwnProperty("childEls")&&c.childEls);for(i=0,s=l.length;i<s;++i)r=l[i],r&&r.length&&(n?(o||(o=!0,n=n.slice(0)),n.push.apply(n,r)):n=r);e.$childEls=n=n?t.prune(n,!o):[]}return n},prune:function(e,t){var n=e.length,r={},i;while(n--)i=e[n],typeof i!="string"&&(i=i.name),r[i]?(t&&(t=!1,e=e.slice(0)),Ext.Array.erase(e,n,1)):r[i]=1;return e},removeChildEls:function(e){var t=this,n=t.getChildEls(),r=t.childEls=[],i,s,o;for(s=0,i=n.length;s<i;++s)o=n[s],e(o)||r.push(o)}}),Ext.define("Ext.util.Renderable",{frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" class="',Ext.plainTableCls,'" cellpadding="0" role="presentation">','<tbody role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>","{%this.renderDockedItems(out,values,1);%}"],afterRender:function(){var e=this,t={},n=e.protoEl,r=e.el,i,s,o,u;e.finishRenderChildren(),e.contentEl&&(s=Ext.baseCSSPrefix,o=s+"hide-",u=Ext.get(e.contentEl),u.removeCls([s+"hidden",o+"display",o+"offsets",o+"nosize"]),e.getContentTarget().appendChild(u.dom)),n.writeTo(t),i=t.removed,i&&r.removeCls(i),i=t.cls,i.length&&r.addCls(i),i=t.style,t.style&&r.setStyle(i),e.protoEl=null,e.ownerCt||e.updateLayout()},afterFirstLayout:function(e,t){var n=this,r=n.x,i=n.y,s,o,u,a;n.ownerLayout||(s=Ext.isDefined(r),o=Ext.isDefined(i)),n.floating&&(!s||!o)&&(n.floatParent?(u=n.floatParent.getTargetEl().getViewRegion(),a=n.el.getAlignToXY(n.floatParent.getTargetEl(),"c-c"),u.x=a[0]-u.x,u.y=a[1]-u.y):(a=n.el.getAlignToXY(n.container,"c-c"),u=n.container.translateXY(a[0],a[1])),r=s?r:u.x,i=o?i:u.y,s=o=!0),(s||o)&&n.setPosition(r,i),n.onBoxReady(e,t)},applyRenderSelectors:function(){var e=this,t=e.renderSelectors,n=e.el,r=n.dom,i;e.applyChildEls(n);if(t)for(i in t)t.hasOwnProperty(i)&&t[i]&&(e[i]=Ext.get(Ext.DomQuery.selectNode(t[i],r)))},beforeRender:function(){var e=this,t=e.getTargetEl(),n=e.getOverflowEl(),r=e.getComponentLayout(),i=e.getOverflowStyle();e.frame=e.frame||e.alwaysFramed,r.initialized||r.initLayout(),n&&(n.setStyle(i),e.overflowStyleSet=!0),e.setUI(e.ui),e.disabled&&e.disable(!0)},doApplyRenderTpl:function(e,t){var n=t.$comp,r;n.rendered||(r=n.initRenderTpl(),r.applyOut(t.renderData,e))},doAutoRender:function(){var e=this;e.rendered||(e.floating?e.render(document.body):e.render(Ext.isBoolean(e.autoRender)?Ext.getBody():e.autoRender))},doRenderContent:function(e,t){var n=t.$comp;n.html&&(Ext.DomHelper.generateMarkup(n.html,e),delete n.html),n.tpl&&(n.tpl.isTemplate||(n.tpl=new Ext.XTemplate(n.tpl)),n.data&&(n.tpl.applyOut(n.data,e),delete n.data))},doRenderFramingDockedItems:function(e,t,n){var r=t.$comp;!r.rendered&&r.doRenderDockedItems&&(t.renderData.$skipDockedItems=!0,r.doRenderDockedItems.call(this,e,t,n))},finishRender:function(e){var t=this,n,r,i;!t.el||t.$pid?(t.container?i=t.container.getById(t.id,!0):i=Ext.getDom(t.id),t.el?(delete t.$pid,t.el.dom||t.wrapPrimaryEl(t.el),i.parentNode.insertBefore(t.el.dom,i),Ext.removeNode(i)):t.wrapPrimaryEl(i)):t.rendering||(n=t.initRenderTpl(),n&&(r=t.initRenderData(),n.insertFirst(t.getTargetEl(),r))),t.container||(t.container=Ext.get(t.el.dom.parentNode)),t.ctCls&&t.container.addCls(t.ctCls),t.onRender(t.container,e),t.overflowStyleSet||t.getOverflowEl().setStyle(t.getOverflowStyle()),t.el.setVisibilityMode(Ext.Element[t.hideMode.toUpperCase()]),t.overCls&&t.el.hover(t.addOverCls,t.removeOverCls,t),t.hasListeners.render&&t.fireEvent("render",t),t.afterRender(),t.hasListeners.afterrender&&t.fireEvent("afterrender",t),t.initEvents(),t.hidden&&t.el.hide()},finishRenderChildren:function(){var e=this.getComponentLayout();e.finishRender()},getElConfig:function(){var e=this,t=e.autoEl,n=e.getFrameInfo(),r={tag:"div",tpl:n?e.initFramingTpl(n.table):e.initRenderTpl()},i=e.protoEl,s,o,u,a,f,l;e.initStyles(i),i.writeTo(r),i.flush(),Ext.isString(t)?r.tag=t:Ext.apply(r,t),r.id=e.id;if(r.tpl)if(n){o=e.frameElNames,u=o.length,r.tplData=l=e.getFrameRenderData(),l.renderData=e.initRenderData(),f=l.fgid;for(s=0;s<u;s++)a=o[s],e.addChildEls({name:"frame"+a,id:f+a});e.addChildEls({name:"frameBody",id:f+"MC"})}else r.tplData=e.initRenderData();return r},initFramingTpl:function(e){var t=this.getFrameTpl(e);return t&&!t.applyRenderTpl&&this.setupFramingTpl(t),t},setupFramingTpl:function(e){e.applyRenderTpl=this.doApplyRenderTpl,e.renderDockedItems=this.doRenderFramingDockedItems},getInsertPosition:function(e){return e!==undefined&&(Ext.isNumber(e)?e=this.container.dom.childNodes[e]:e=Ext.getDom(e)),e},getRenderTree:function(){var e=this;return!e.hasListeners.beforerender||e.fireEvent("beforerender",e)!==!1?(e.beforeRender(),e.rendering=!0,e.el?{tag:"div",role:"presentation",id:e.$pid=Ext.id()}:e.getElConfig()):null},initContainer:function(e){var t=this;return!e&&t.el&&(e=t.el.dom.parentNode,t.allowDomMove=!1),t.container=e.dom?e:Ext.get(e),t.container},initRenderData:function(){var e=this;return Ext.apply({$comp:e,id:e.id,ui:e.ui,uiCls:e.uiCls,baseCls:e.baseCls,componentCls:e.componentCls,frame:e.frame,role:e.ariaRole,childElCls:""},e.renderData)},initRenderTpl:function(){var e=this.getTpl("renderTpl");return e&&!e.renderContent&&this.setupRenderTpl(e),e},onRender:function(e,t){var n=this,r=n.x,i=n.y,s=null,o,u,a=n.el;n.applyRenderSelectors(),n.rendering=null,n.rendered=!0,r!=null&&(s={x:r}),i!=null&&((s=s||{}).y=i),!n.getFrameInfo()&&Ext.isBorderBox&&(o=n.width,u=n.height,typeof o=="number"&&(s=s||{},s.width=o),typeof u=="number"&&(s=s||{},s.height=u)),n.lastBox=a.lastBox=s},render:function(e,t){var n=this,r=n.el&&(n.el=Ext.get(n.el)),i,s,o;Ext.suspendLayouts(),e=n.initContainer(e),o=n.getInsertPosition(t),r?!n.hasListeners.beforerender||n.fireEvent("beforerender",n)!==!1?(n.beforeRender(),n.initStyles(r),n.allowDomMove!==!1&&(o?e.dom.insertBefore(r.dom,o):e.dom.appendChild(r.dom))):i=!0:(s=n.getRenderTree(),n.ownerLayout&&n.ownerLayout.transformItemRenderTree&&(s=n.ownerLayout.transformItemRenderTree(s)),s&&(o?r=Ext.DomHelper.insertBefore(o,s):r=Ext.DomHelper.append(e,s),n.wrapPrimaryEl(r))),r&&!i&&n.finishRender(t),Ext.resumeLayouts(!n.hidden&&!e.isDetachedBody)},ensureAttachedToBody:function(e){var t=this,n;while(t.ownerCt)t=t.ownerCt;t.container.isDetachedBody&&(t.container=n=Ext.getBody(),n.appendChild(t.el.dom),e&&t.updateLayout(),(typeof t.x=="number"||typeof t.y=="number")&&t.setPosition(t.x,t.y))},setupRenderTpl:function(e){e.renderBody=e.renderContent=this.doRenderContent},wrapPrimaryEl:function(e){this.el=Ext.get(e,!0)},initFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return;var e=this,t=e.getFrameInfo(),n,r,i=e.frameElNames,s=i.length,o,u,a;if(t){n=e.getFrameTpl(t.table),u=e.getFrameRenderData(),r=u.fgid,n.insertFirst(e.el,u),e.frameBody=e.el.down("."+e.frameCls+"-mc"),e.removeChildEls(function(t){return t.id&&e.frameIdRegex.test(t.id)});for(o=0;o<s;o++)a=i[o],e["frame"+a]=e.el.getById(r+a)}},getFrameRenderData:function(){var e=this,t=e.frameSize,n=(e.frameGenId||0)+1;return e.frameGenId=n,{$comp:e,fgid:e.id+"-frame"+n,ui:e.ui,uiCls:e.uiCls,frameCls:e.frameCls,baseCls:e.baseCls,top:!!t.top,left:!!t.left,right:!!t.right,bottom:!!t.bottom,frameElCls:""}},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return;var e=this,t=e.frameSize&&e.frameSize.table,n=e.frameTL,r=e.frameBL,i=e.frameML,s=e.frameMC,o;e.initFrame(),s?e.frame&&(o=e.frameMC.dom.className,s.insertAfter(e.frameMC),e.frameMC.
remove(),e.frameBody=e.frameMC=s,s.dom.className=o,t?e.el.query("> table")[1].remove():(n&&n.remove(),r&&r.remove(),i&&i.remove())):e.frame&&e.applyRenderSelectors()},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var e=this,t=e.frameInfoCache,n=e.getFramingInfoCls()+"-frameInfo",r=t[n],i=Math.max,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;return r==null&&(s=Ext.fly(e.getStyleProxy(n),"frame-style-el"),u=s.getStyle("font-family"),u?(u=u.split("-"),w=parseInt(u[1],10),E=parseInt(u[2],10),S=parseInt(u[3],10),x=parseInt(u[4],10),h=parseInt(u[5],10),p=parseInt(u[6],10),d=parseInt(u[7],10),v=parseInt(u[8],10),m=parseInt(u[9],10),g=parseInt(u[10],10),y=parseInt(u[11],10),b=parseInt(u[12],10),a=i(h,i(w,E)),f=i(p,i(E,S)),l=i(d,i(x,S)),c=i(v,i(w,x)),r={table:u[0].charAt(0)==="t",vertical:u[0].charAt(1)==="v",top:a,right:f,bottom:l,left:c,width:c+f,height:a+l,maxWidth:i(a,f,l,c),border:{top:h,right:p,bottom:d,left:v,width:v+p,height:h+d},padding:{top:m,right:g,bottom:y,left:b,width:b+g,height:m+y},radius:{tl:w,tr:E,br:S,bl:x}}):r=!1,t[n]=r),e.frame=!!r,e.frameSize=r,r},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(e){var t=this.styleProxyEl||(Ext.AbstractComponent.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,!0));return t.className=e,t},getFrameTpl:function(e){return this.getTpl(e?"frameTableTpl":"frameTpl")},frameInfoCache:{}}),Ext.define("Ext.state.Provider",{mixins:{observable:Ext.util.Observable},prefix:"ext-",constructor:function(e){e=e||{};var t=this;Ext.apply(t,e),t.addEvents("statechange"),t.state={},t.mixins.observable.constructor.call(t)},get:function(e,t){return typeof this.state[e]=="undefined"?t:this.state[e]},clear:function(e){var t=this;delete t.state[e],t.fireEvent("statechange",t,e,null)},set:function(e,t){var n=this;n.state[e]=t,n.fireEvent("statechange",n,e,t)},decodeValue:function(e){var t=this,n=/^(a|n|d|b|s|o|e)\:(.*)$/,r=n.exec(unescape(e)),i,s,o,u,a,f;if(!r||!r[1])return;s=r[1],e=r[2];switch(s){case"e":return null;case"n":return parseFloat(e);case"d":return new Date(Date.parse(e));case"b":return e=="1";case"a":i=[];if(e!=""){u=e.split("^"),a=u.length;for(f=0;f<a;f++)e=u[f],i.push(t.decodeValue(e))}return i;case"o":i={};if(e!=""){u=e.split("^"),a=u.length;for(f=0;f<a;f++)e=u[f],o=e.split("="),i[o[0]]=t.decodeValue(o[1])}return i;default:return e}},encodeValue:function(e){var t="",n=0,r,i,s;if(e==null)return"e:1";if(typeof e=="number")r="n:"+e;else if(typeof e=="boolean")r="b:"+(e?"1":"0");else if(Ext.isDate(e))r="d:"+e.toGMTString();else if(Ext.isArray(e)){for(i=e.length;n<i;n++)t+=this.encodeValue(e[n]),n!=i-1&&(t+="^");r="a:"+t}else if(typeof e=="object"){for(s in e)typeof e[s]!="function"&&e[s]!==undefined&&(t+=s+"="+this.encodeValue(e[s])+"^");r="o:"+t.substring(0,t.length-1)}else r="s:"+e;return escape(r)}}),Ext.define("Ext.state.Manager",{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider},setProvider:function(e){this.provider=e},get:function(e,t){return this.provider.get(e,t)},set:function(e,t){this.provider.set(e,t)},clear:function(e){this.provider.clear(e)},getProvider:function(){return this.provider}}),Ext.define("Ext.state.Stateful",{mixins:{observable:Ext.util.Observable},stateful:!1,saveDelay:100,constructor:function(e){var t=this;e=e||{},e.stateful!==undefined&&(t.stateful=e.stateful),e.saveDelay!==undefined&&(t.saveDelay=e.saveDelay),t.stateId=t.stateId||e.stateId,t.stateEvents||(t.stateEvents=[]),e.stateEvents&&t.stateEvents.concat(e.stateEvents),this.addEvents("beforestaterestore","staterestore","beforestatesave","statesave"),t.mixins.observable.constructor.call(t),t.stateful!==!1&&(t.addStateEvents(t.stateEvents),t.initState())},addStateEvents:function(e){var t=this,n,r,i;if(t.stateful&&t.getStateId()){typeof e=="string"&&(e=Array.prototype.slice.call(arguments,0)),i=t.stateEventsByName||(t.stateEventsByName={});for(n=e.length;n--;)r=e[n],i[r]||(i[r]=1,t.on(r,t.onStateChange,t))}},onStateChange:function(){var e=this,t=e.saveDelay,n,r;if(!e.stateful)return;t?(e.stateTask||(n=Ext.state.Stateful,r=n.runner||(n.runner=new Ext.util.TaskRunner),e.stateTask=r.newTask({run:e.saveState,scope:e,interval:t,repeat:1})),e.stateTask.start()):e.saveState()},saveState:function(){var e=this,t=e.stateful&&e.getStateId(),n=e.hasListeners,r;if(t){r=e.getState()||{};if(!n.beforestatesave||e.fireEvent("beforestatesave",e,r)!==!1)Ext.state.Manager.set(t,r),n.statesave&&e.fireEvent("statesave",e,r)}},getState:function(){return null},applyState:function(e){e&&Ext.apply(this,e)},getStateId:function(){var e=this;return e.stateId||(e.autoGenId?null:e.id)},initState:function(){var e=this,t=e.stateful&&e.getStateId(),n=e.hasListeners,r;if(t){r=Ext.state.Manager.get(t);if(r){r=Ext.apply({},r);if(!n.beforestaterestore||e.fireEvent("beforestaterestore",e,r)!==!1)e.applyState(r),n.staterestore&&e.fireEvent("staterestore",e,r)}}},savePropToState:function(e,t,n){var r=this,i=r[e],s=r.initialConfig;if(r.hasOwnProperty(e))if(!s||s[e]!==i)return t&&(t[n||e]=i),!0;return!1},savePropsToState:function(e,t){var n=this,r,i;if(typeof e=="string")n.savePropToState(e,t);else for(r=0,i=e.length;r<i;++r)n.savePropToState(e[r],t);return t},destroy:function(){var e=this,t=e.stateTask;t&&(t.destroy(),e.stateTask=null),e.clearListeners()}}),Ext.define("Ext.AbstractComponent",{mixins:{positionable:Ext.util.Positionable,observable:Ext.util.Observable,animate:Ext.util.Animate,elementCt:Ext.util.ElementContainer,renderable:Ext.util.Renderable,state:Ext.state.Stateful},statics:{AUTO_ID:1e3,pendingLayouts:null,layoutSuspendCount:0,cancelLayout:function(e,t){var n=this.runningLayoutContext||this.pendingLayouts;n&&n.cancelComponent(e,!1,t)},flushLayouts:function(){var e=this,t=e.pendingLayouts;t&&t.invalidQueue.length&&(e.pendingLayouts=null,e.runningLayoutContext=t,Ext.override(t,{runComplete:function(){e.runningLayoutContext=null;var t=this.callParent();return Ext.globalEvents.hasListeners.afterlayout&&Ext.globalEvents.fireEvent("afterlayout"),t}}),t.run())},resumeLayouts:function(e){this.layoutSuspendCount&&!--this.layoutSuspendCount&&(e&&this.flushLayouts(),Ext.globalEvents.hasListeners.resumelayouts&&Ext.globalEvents.fireEvent("resumelayouts"))},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(e,t){var n=this,r=n.runningLayoutContext,i;r?r.queueInvalidate(e):(i=n.pendingLayouts||(n.pendingLayouts=new Ext.layout.Context),i.queueInvalidate(e),!t&&!n.layoutSuspendCount&&!e.isLayoutSuspended()&&n.flushLayouts())}},isComponent:!0,getAutoId:function(){return this.autoGenId=!0,++Ext.AbstractComponent.AUTO_ID},deferLayouts:!1,autoGenId:!1,renderTpl:"{%this.renderContent(out,values)%}",frameSize:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",ui:"default",uiCls:[],hidden:!1,disabled:!1,draggable:!1,floating:!1,hideMode:"display",autoShow:!1,autoRender:!1,allowDomMove:!0,rendered:!1,componentLayoutCounter:0,shrinkWrap:2,weight:0,maskOnDisable:!0,_isLayoutRoot:!1,contentPaddingProperty:"padding",horizontalPosProp:"left",borderBoxCls:Ext.baseCSSPrefix+"border-box",rootCls:Ext.baseCSSPrefix+"body",constructor:function(e){var t=this,n,r,i;e?(Ext.apply(t,e),i=t.xhooks,i&&(delete t.xhooks,Ext.override(t,i))):e={},t.initialConfig=e,t.mixins.elementCt.constructor.call(t),t.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","boxready","beforedestroy","destroy","resize","move","focus","blur"),t.getId(),t.setupProtoEl(),t.cls&&(t.initialCls=t.cls,t.protoEl.addCls(t.cls)),t.style&&(t.initialStyle=t.style,t.protoEl.setStyle(t.style)),t.renderData=t.renderData||{},t.renderSelectors=t.renderSelectors||{},t.plugins&&(t.plugins=t.constructPlugins()),t.hasListeners||(t.hasListeners=new t.HasListeners),t.initComponent(),Ext.ComponentManager.register(t),t.mixins.observable.constructor.call(t),t.mixins.state.constructor.call(t,e),this.addStateEvents("resize");if(t.plugins)for(n=0,r=t.plugins.length;n<r;n++)t.plugins[n]=t.initPlugin(t.plugins[n]);t.loader=t.getLoader(),t.renderTo&&t.render(t.renderTo),t.autoShow&&!t.isContained&&t.show()},initComponent:function(){var e=this;e.plugins&&!e.plugins.processed&&(e.plugins=e.constructPlugins()),e.setSize(e.width,e.height)},getState:function(){var e=this,t=null,n=e.getSizeModel();return n.width.configured&&(t=e.addPropertyToState(t,"width")),n.height.configured&&(t=e.addPropertyToState(t,"height")),t},addPropertyToState:function(e,t,n){var r=this,i=arguments.length;if(i==3||r.hasOwnProperty(t))i<3&&(n=r[t]),n!==r.initialConfig[t]&&((e||(e={}))[t]=n);return e},show:Ext.emptyFn,animate:function(e){var t=this,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;e=e||{},o=e.to||{};if(Ext.fx.Manager.hasFxBlock(t.id))return t;n=Ext.isDefined(o.width),n&&(s=Ext.Number.constrain(o.width,t.minWidth,t.maxWidth)),r=Ext.isDefined(o.height),r&&(i=Ext.Number.constrain(o.height,t.minHeight,t.maxHeight));if(!e.dynamic&&(n||r)){f=(e.from?e.from.width:undefined)||t.getWidth(),l=f,c=(e.from?e.from.height:undefined)||t.getHeight(),h=c,p=!1,r&&i>c&&(h=i,p=!0),n&&s>f&&(l=s,p=!0);if(r||n)g=t.el.getStyle("overtflow"),g!=="hidden"&&t.el.setStyle("overflow","hidden");p&&(u=!Ext.isNumber(t.width),a=!Ext.isNumber(t.height),t.setSize(l,h),t.el.setSize(f,c),u&&delete t.width,a&&delete t.height),n&&(o.width=s),r&&(o.height=i)}d=t.constrain,v=t.constrainHeader;if(d||v)t.constrain=t.constrainHeader=!1,m=e.callback,e.callback=function(){t.constrain=d,t.constrainHeader=v,m&&m.call(e.scope||t,arguments),g!=="hidden"&&t.el.setStyle("overflow",g)};return t.mixins.animate.animate.apply(t,arguments)},setHiddenState:function(e){var t=this.getHierarchyState();this.hidden=e,e?t.hidden=!0:delete t.hidden},onHide:function(){this.ownerLayout&&this.updateLayout({isRoot:!1})},onShow:function(){this.updateLayout({isRoot:!1})},constructPlugin:function(e){var t=this;return typeof e=="string"?e=Ext.PluginManager.create({},e,t):e=Ext.PluginManager.create(e,null,t),e},constructPlugins:function(){var e=this,t=e.plugins,n,r,i;if(t){n=[],n.processed=!0,Ext.isArray(t)||(t=[t]);for(r=0,i=t.length;r<i;r++)n[r]=e.constructPlugin(t[r])}return e.pluginsInitialized=!0,n},initPlugin:function(e){return e.init(this),e},addPlugin:function(e){var t=this;return e=t.constructPlugin(e),t.plugins?t.plugins.push(e):t.plugins=[e],t.pluginsInitialized&&t.initPlugin(e),e},removePlugin:function(e){Ext.Array.remove(this.plugins,e),e.destroy()},findPlugin:function(e){var t,n=this.plugins,r=n&&n.length;for(t=0;t<r;t++)if(n[t].ptype===e)return n[t]},getPlugin:function(e){var t,n=this.plugins,r=n&&n.length;for(t=0;t<r;t++)if(n[t].pluginId===e)return n[t]},beforeLayout:Ext.emptyFn,registerFloatingItem:function(e){var t=this;t.floatingDescendants||(t.floatingDescendants=new Ext.ZIndexManager(t)),t.floatingDescendants.register(e)},unregisterFloatingItem:function(e){var t=this;t.floatingDescendants&&t.floatingDescendants.unregister(e)},layoutSuspendCount:0,suspendLayouts:function(){var e=this;if(!e.rendered)return;++e.layoutSuspendCount==1&&(e.suspendLayout=!0)},resumeLayouts:function(e){var t=this;if(!t.rendered)return;--t.layoutSuspendCount||(t.suspendLayout=!1,e&&!t.isLayoutSuspended()&&t.updateLayout(e))},setupProtoEl:function(){var e=this.initCls();this.protoEl=new Ext.util.ProtoElement({cls:e.join(" ")})},initCls:function(){var e=this,t=[e.baseCls,e.getComponentLayout().targetCls];return Ext.isDefined(e.cmpCls)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls."),e.componentCls=e.cmpCls,delete e.cmpCls),e.componentCls?t.push(e.componentCls):e.componentCls=e.baseCls,t},setUI:function(e){var t=this,n=t.uiCls,r=t.activeUI,i;if(e===r)return;r?(i=t.removeClsWithUI(n,!0),i.length&&t.removeCls(i),t.removeUIFromElement()):t.uiCls=[],t.ui=e,t.activeUI=e,t.addUIToElement(),i=t.addClsWithUI(n,!0),i.length&&t.addCls(i),t.rendered&&t.updateLayout()},addClsWithUI:function(e,t){var n=this,r=[],i=0,s=n.uiCls=Ext.Array.clone(n.uiCls),o=n.activeUI,u,a;typeof e=="string"&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),u=e.length;for(;i<u;i++)a=e[i],a&&!n.hasUICls(a)&&(s.push(a),o&&(r=r.concat(n.addUIClsToElement(a))));return t!==!0&&o&&n.addCls(r),r},removeClsWithUI:function(e,t){var n=this,r=[],i=0,s=Ext.Array,o=s.remove,u=n.uiCls=s.clone(n.uiCls),a=n.activeUI,f,l;typeof e=="string"&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),f=e.length;for(i=0;i<f;i++)l=e[i],l&&n.hasUICls(l)&&(o(u,l),a&&(r=r.concat(n.removeUIClsFromElement(l))));return t!==!0&&a&&n.removeCls(r),r},hasUICls:function(e){var t=this,n=t.uiCls||[];return Ext.Array.contains(n,e)},frameElementsArray:["tl","tc","tr","ml","mc","mr","bl","bc","br"],addUIClsToElement:function(e){var t=this,n=t.baseCls+"-"+t.ui+"-"+e,r=[Ext.baseCSSPrefix+e,t.baseCls+"-"+e,n],i,s,o,u,a;if(t.rendered&&t.frame&&!Ext.supports.CSS3BorderRadius){i=t.frameElementsArray,s=i.length;for(o=0;o<s;o++)a=i[o],u=t["frame"+a.toUpperCase()],u&&u.addCls(n+"-"+a)}return r},removeUIClsFromElement:function(e){var t=this,n=t.baseCls+"-"+t.ui+"-"+e,r=[Ext.baseCSSPrefix+e,t.baseCls+"-"+e,n],i,s,o,u,a;if(t.rendered&&t.frame&&!Ext.supports.CSS3BorderRadius){i=t.frameElementsArray,s=i.length;for(o=0;o<s;o++)a=i[o],u=t["frame"+a.toUpperCase()],u&&u.removeCls(n+"-"+a)}return r},addUIToElement:function(){var e=this,t=e.baseCls+"-"+e.ui,n,r,i,s,o;e.addCls(t);if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){n=e.frameElementsArray,r=n.length;for(i=0;i<r;i++)o=n[i],s=e["frame"+o.toUpperCase()],s&&s.addCls(t+"-"+o)}},removeUIFromElement:function(){var e=this,t=e.baseCls+"-"+e.ui,n,r,i,s,o;e.removeCls(t);if(e.rendered&&e.frame&&!Ext.supports.CSS3BorderRadius){n=e.frameElementsArray,r=n.length;for(i=0;i<r;i++)o=n[i],s=e["frame"+o.toUpperCase()],s&&s.removeCls(t+"-"+o)}},getTpl:function(e){return Ext.XTemplate.getTpl(this,e)},initStyles:function(e){var t=this,n=Ext.Element,r=t.margin,i=t.border,s=t.cls,o=t.style,u=t.x,a=t.y,f,l;t.initPadding(e),r!=null&&e.setStyle("margin",this.unitizeBox(r===!0?5:r)),i!=null&&t.setBorder(i,e),s&&s!=t.initialCls&&(e.addCls(s),t.cls=t.initialCls=null),o&&o!=t.initialStyle&&(e.setStyle(o),t.style=t.initialStyle=null),u!=null&&e.setStyle(t.horizontalPosProp,typeof u=="number"?u+"px":u),a!=null&&e.setStyle("top",typeof a=="number"?a+"px":a);if(!t.ownerCt||t.floating)Ext.scopeCss&&e.addCls(t.rootCls),Ext.isBorderBox&&e.addCls(t.borderBoxCls);t.getFrameInfo()||(f=t.width,l=t.height,f!=null&&(typeof f=="number"?Ext.isBorderBox&&e.setStyle("width",f+"px"):e.setStyle("width",f)),l!=null&&(typeof l=="number"?Ext.isBorderBox&&e.setStyle("height",l+"px"):e.setStyle("height",l)))},initPadding:function(e){var t=this,n=t.padding;n!=null&&(t.layout&&t.layout.managePadding&&t.contentPaddingProperty==="padding"?e.setStyle("padding",0):e.setStyle("padding",this.unitizeBox(n===!0?5:n)))},parseBox:function(e){return Ext.dom.Element.parseBox(e)},unitizeBox:function(e){return Ext.dom.Element.unitizeBox(e)},setMargin:function(e,t){var n=this;n.rendered?(!e&&e!==0?e="":(e===!0&&(e=5),e=this.unitizeBox(e)),n.getTargetEl().setStyle("margin",e),t||n.updateLayout()):n.margin=e},initEvents:function(){var e=this,t=e.afterRenderEvents,n,r,i,s,o;if(t)for(i in t){r=e[i];if(r&&r.on){n=t[i];for(s=0,o=n.length;s<o;++s)e.mon(r,n[s])}}e.addFocusListener()},addFocusListener:function(){var e=this,t=e.getFocusEl(),n;if(t){if(t.isComponent)return t.addFocusListener();n=t.needsTabIndex(),!e.focusListenerAdded&&(!n||Ext.FocusManager.enabled)&&(n&&(t.dom.tabIndex=-1),t.on({focus:e.onFocus,blur:e.onBlur,scope:e}),e.focusListenerAdded=!0)}},getFocusEl:Ext.emptyFn,isFocusable:function(){var e=this,t;if(e.focusable!==!1&&(t=e.getFocusEl())&&e.rendered&&!e.destroying&&!e.isDestroyed&&!e.disabled&&e.isVisible(!0))return t.isFocusable(!0)},beforeFocus:Ext.emptyFn,onFocus:function(e){var t=this,n=t.focusCls,r=t.getFocusEl();t.disabled||(t.beforeFocus(e),n&&r&&r.addCls(t.addClsWithUI(n,!0)),t.hasFocus||(t.hasFocus=!0,t.fireEvent("focus",t,e)))},beforeBlur:Ext.emptyFn,onBlur:function(e){var t=this,n=t.focusCls,r=t.getFocusEl();if(t.destroying)return;t.beforeBlur(e),n&&r&&r.removeCls(t.removeClsWithUI(n,!0)),t.validateOnBlur&&t.validate(),t.hasFocus=!1,t.fireEvent("blur",t,e),t.postBlur(e)},postBlur:Ext.emptyFn,is:function(e){return Ext.ComponentQuery.is(this,e)},up:function(e,t){var n=this.getRefOwner(),r=typeof t=="string",i=typeof t=="number",s=t&&t.isComponent,o=0;if(e)for(;n;n=n.getRefOwner()){o++;if(e.isComponent){if(n===e)return n}else if(Ext.ComponentQuery.is(n,e))return n;if(r&&n.is(t))return;if(i&&o===t)return;if(s&&n===t)return}return n},nextSibling:function(e){var t=this.ownerCt,n,r,i,s;if(t){n=t.items,i=n.indexOf(this)+1;if(i)if(e){for(r=n.getCount();i<r;i++)if((s=n.getAt(i)).is(e))return s}else if(i<n.getCount())return n.getAt(i)}return null},previousSibling:function(e){var t=this.ownerCt,n,r,i;if(t){n=t.items,r=n.indexOf(this);if(r!=-1)if(e){for(--r;r>=0;r--)if((i=n.getAt(r)).is(e))return i}else if(r)return n.getAt(--r)}return null},previousNode:function(e,t){var n=this,r=n.ownerCt,i,s,o,u;if(t&&n.is(e))return n;if(r){for(s=r.items.items,o=Ext.Array.indexOf(s,n)-1;o>-1;o--){u=s[o];if(u.query){i=u.query(e),i=i[i.length-1];if(i)return i}if(u.is(e))return u}return r.previousNode(e,!0)}return null},nextNode:function(e,t){var n=this,r=n.ownerCt,i,s,o,u,a;if(t&&n.is(e))return n;if(r){for(s=r.items.items,u=Ext.Array.indexOf(s,n)+1,o=s.length;u<o;u++){a=s[u];if(a.is(e))return a;if(a.down){i=a.down(e);if(i)return i}}return r.nextNode(e)}return null},getId:function(){return this.id||(this.id="ext-comp-"+this.getAutoId())},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e=this,t=null,n=e.autoScroll,r,i,s;return typeof n=="boolean"?(t={overflow:s=n?"auto":""},e.scrollFlags={overflowX:s,overflowY:s,x:n,y:n,both:n}):(r=e.overflowX,i=e.overflowY,r!==undefined||i!==undefined?(r&&r===!0&&(r="auto"),i&&i===!0&&(i="auto"),t={overflowX:r=r||"",overflowY:i=i||""},e.scrollFlags={overflowX:r,overflowY:i,x:r=r==="auto"||r==="scroll",y:i=i==="auto"||i==="scroll",both:r&&i}):e.scrollFlags={overflowX:"",overflowY:"",x:!1,y:!1,both:!1}),t&&Ext.isIE7m&&(t.position="relative"),t},isXType:function(e,t){return t?this.xtype===e:this.xtypesMap[e]},getXTypes:function(){var e=this.self,t,n,r;if(!e.xtypes){t=[],n=this;while(n)r=n.xtypes,r!==undefined&&t.unshift.apply(t,r),n=n.superclass;e.xtypeChain=t,e.xtypes=t.join("/")}return e.xtypes},update:function(e,t,n){var r=this,i=r.tpl&&!Ext.isString(e),s;i?r.data=e:r.html=Ext.isObject(e)?Ext.DomHelper.markup(e):e,r.rendered&&(s=r.isContainer?r.layout.getRenderTarget():r.getTargetEl(),i?r.tpl[r.tplWriteMode](s,e||{}):s.update(r.html,t,n),r.updateLayout())},setVisible:function(e){return this[e?"show":"hide"]()},isVisible:function(e){var t=this,n;return t.hidden||!t.rendered||t.isDestroyed?n=!0:e&&(n=t.isHierarchicallyHidden()),!n},isHierarchicallyHidden:function(){var e=this,t=!1,n,r;for(;n=e.ownerCt||e.floatParent;e=n){r=n.getHierarchyState();if(r.hidden){t=!0;break}if(!e.getHierarchyState().collapseImmune){t=!!r.collapsed;break}if(n.collapsed&&!e.collapseImmune){t=!0;break}}return t},onBoxReady:function(e,t){var n=this;n.disableOnBoxReady?n.onDisable():n.enableOnBoxReady&&n.onEnable(),n.resizable&&n.initResizable(n.resizable),n.draggable&&n.initDraggable(),n.hasListeners.boxready&&n.fireEvent("boxready",n,e,t)},enable:function(e){var t=this;return delete t.disableOnBoxReady,t.removeCls(t.disabledCls),t.rendered?t.onEnable():t.enableOnBoxReady=!0,t.disabled=!1,delete t.resetDisable,e!==!0&&t.fireEvent("enable",t),t},disable:function(e){var t=this;return delete t.enableOnBoxReady,t.addCls(t.disabledCls),t.rendered?t.onDisable():t.disableOnBoxReady=!0,t.disabled=!0,e!==!0&&(delete t.resetDisable,t.fireEvent("disable",t)),t},onEnable:function(){this.maskOnDisable&&(this.el.dom.disabled=!1,this.unmask())},onDisable:function(){var e=this,t=e.focusCls,n=e.getFocusEl();t&&n&&n.removeCls(e.removeClsWithUI(t,!0)),e.maskOnDisable&&(e.el.dom.disabled=!0,e.mask())},mask:function(e,t,n){var r=this.lastBox,i=this.getMaskTarget();r&&(n=r.height),i.mask(e,t,n)},unmask:function(){this.getMaskTarget().unmask()},getMaskTarget:function(){return this.el},isDisabled:function(){return this.disabled},setDisabled:function(e){return this[e?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(e){var t=this,n=t.rendered?t.el:t.protoEl;return n.addCls.apply(n,arguments),t},addClass:function(){return this.addCls.apply(this,arguments)},hasCls:function(e){var t=this,n=t.rendered?t.el:t.protoEl;return n.hasCls.apply(n,arguments)},removeCls:function(e){var t=this,n=t.rendered?t.el:t.protoEl;return n.removeCls.apply(n,arguments),t},addOverCls:function(){var e=this;e.disabled||e.el.addCls(e.overCls)},removeOverCls:function(){this.el.removeCls(this.overCls)},addListener:function(e,t,n,r){var i=this,s,o;if(Ext.isString(e)&&(Ext.isObject(t)||r&&r.element)){if(r.element){s=t,t={},t[e]=s,e=r.element,n&&(t.scope=n);for(o in r)r.hasOwnProperty(o)&&i.eventOptionsRe.test(o)&&(t[o]=r[o])}i[e]&&i[e].on?i.mon(i[e],t):(i.afterRenderEvents=i.afterRenderEvents||{},i.afterRenderEvents[e]||(i.afterRenderEvents[e]=[]),i.afterRenderEvents[e].push(t));return}return i.mixins.observable.addListener.apply(i,arguments)},removeManagedListenerItem:function(e,t,n,r,i,s){var o=this,u=t.options?t.options.element:null;if(!u)return o.mixins.observable.removeManagedListenerItem.apply(o,arguments);u=o[u],u&&u.un&&(e||t.item===n&&t.ename===r&&(!i||t.fn===i)&&(!s||t.scope===s))&&(u.un(t.ename,t.fn,t.scope),e||Ext.Array.remove(o.managedListeners,t))},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},onAdded:function(e,t){var n=this;n.ownerCt=e,n.hierarchyState&&(n.hierarchyState.invalid=!0,delete n.hierarchyState),n.hasListeners.added&&n.fireEvent("added",n,e,t)},onRemoved:function(e){var t=this;t.hasListeners.removed&&t.fireEvent("removed",t,t.ownerCt),delete t.ownerCt,delete t.ownerLayout},beforeDestroy:Ext.emptyFn,onResize:function(e,t,n,r){var i=this;i.floating&&i.constrain&&i.doConstrain(),i.hasListeners.resize&&i.fireEvent("resize",i,e,t,n,r)},setSize:function(e,t){var n=this;return e&&typeof e=="object"&&(t=e.height,e=e.width),typeof e=="number"?n.width=Ext.Number.constrain(e,n.minWidth,n.maxWidth):e===null&&delete n.width,typeof t=="number"?n.height=Ext.Number.constrain(t,n.minHeight,n.maxHeight):t===null&&delete n.height,n.rendered&&n.isVisible()&&n.updateLayout({isRoot:!1}),n},isLayoutRoot:function(){var e=this,t=e.ownerLayout;return!t||e._isLayoutRoot||e.floating?!0:t.isItemLayoutRoot(e)},isLayoutSuspended:function(){var e=this,t;while(e){if(e.layoutSuspendCount||e.suspendLayout)return!0;t=e.ownerLayout;if(!t)break;e=t.owner}return!1},updateLayout:function(e){var t=this,n,r=t.lastBox,i=e&&e.isRoot;r&&(r.invalid=!0);if(!t.rendered||t.layoutSuspendCount||t.suspendLayout)return;t.hidden?Ext.AbstractComponent.cancelLayout(t):typeof i!="boolean"&&(i=t.isLayoutRoot());if(i||!t.ownerLayout||!t.ownerLayout.onContentChange(t))t.isLayoutSuspended()||(n=e&&e.hasOwnProperty("defer")?e.defer:t.deferLayouts,Ext.AbstractComponent.updateLayout(t,n))},getSizeModel:function(e){var t=this,n=Ext.layout.SizeModel,r=t.componentLayout.ownerContext,i=t.width,s=t.height,o,u,a,f,l,c,h,p,d,v;r&&(v=r.widthModel,l=r.heightModel);if(!v||!l)a=(o=typeof i)=="number",f=(u=typeof s)=="number",d=t.floating||!(c=t.ownerLayout),d?(h=Ext.layout.Layout.prototype.autoSizePolicy,p=t.floating?3:t.shrinkWrap,a&&(v=n.configured),f&&(l=n.configured)):(h=c.getItemSizePolicy(t,e),p=c.isItemShrinkWrap(t)),r&&(r.ownerSizePolicy=h),p=p===!0?3:p||0,d&&p&&(i&&o=="string"&&(p&=2),s&&u=="string"&&(p&=1)),p!==3&&(e||(e=t.ownerCt&&t.ownerCt.getSizeModel()),e&&(p|=(e.width.shrinkWrap?1:0)|(e.height.shrinkWrap?2:0))),v||(h.setsWidth?h.readsWidth?a?v=n.calculatedFromConfigured:v=p&1?n.calculatedFromShrinkWrap:n.calculatedFromNatural:v=n.calculated:a?v=n.configured:v=p&1?n.shrinkWrap:n.natural),l||(h.setsHeight?h.readsHeight?f?l=n.calculatedFromConfigured:l=p&2?n.calculatedFromShrinkWrap:n.calculatedFromNatural:l=n.calculated:f?l=n.configured:l=p&2?n.shrinkWrap:n.natural);return v.pairsByHeightOrdinal[l.ordinal]},isDescendant:function(e){if(e.isContainer)for(var t=this.ownerCt;t;t=t.ownerCt)if(t===e)return!0;return!1},doComponentLayout:function(){return this.updateLayout(),this},forceComponentLayout:function(){this.updateLayout()},setComponentLayout:function(e){var t=this.componentLayout;t&&t.isLayout&&t!=e&&t.setOwner(null),this.componentLayout=e,e.setOwner(this)},getComponentLayout:function(){var e=this;return(!e.componentLayout||!e.componentLayout.isLayout)&&e.setComponentLayout(Ext.layout.Layout.create(e.componentLayout,"autocomponent")),e.componentLayout},afterComponentLayout:function(e,t,n,r){var i=this;++i.componentLayoutCounter===1&&i.afterFirstLayout(e,t),(e!==n||t!==r)&&i.onResize(e,t,n,r)},beforeComponentLayout:function(e,t){return!0},setPosition:function(e,t,n){var r=this,i=r.beforeSetPosition.apply(r,arguments);if(i&&r.rendered){e=i.x,t=i.y;if(n){if(e!==r.getLocalX()||t!==r.getLocalY())r.stopAnimation(),r.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(r.afterSetPosition,r,[e,t])},to:{left:e,top:t}},n))}else r.setLocalXY(e,t),r.afterSetPosition(e,t)}return r},beforeSetPosition:function(e,t,n){var r,i;e&&(Ext.isNumber(i=e[0])?(n=t,t=e[1],e=i):(i=e.x)!==undefined&&(n=t,t=e.y,e=i));if(this.constrain||this.constrainHeader)r=this.calculateConstrainedPosition(null,[e,t],!0),r&&(e=r[0],t=r[1]);return r={x:this.x=e,y:this.y=t,anim:n,hasX:e!==undefined,hasY:t!==undefined},r.hasX||r.hasY?r:null},afterSetPosition:function(e,t){var n=this;n.onPosition(e,t),n.hasListeners.move&&n.fireEvent("move",n,e,t)},onPosition:Ext.emptyFn,setWidth:function(e){return this.setSize(e)},setHeight:function(e){return this.setSize(undefined,e)},getSize:function(e){return this.el.getSize(e)},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var e=this,t=e.autoLoad?Ext.isObject(e.autoLoad)?e.autoLoad:{url:e.autoLoad}:null,n=e.loader||t;return n?(n.isLoader?n.setTarget(e):e.loader=new Ext.ComponentLoader(Ext.apply({target:e,autoLoad:t},n)),e.loader):null},setDocked:function(e,t){var n=this;return n.dock=e,t&&n.ownerCt&&n.rendered&&n.ownerCt.updateLayout(),n},setBorder:function(e,t){var n=this,r=!!t;if(n.rendered||r)r||(t=n.el),e?e===!0?e="1px":e=this.unitizeBox(e):e=0,t.setStyle("border-width",e),r||n.updateLayout();n.border=e},onDestroy:function(){var e=this;e.monitorResize&&Ext.EventManager.resizeEvent&&Ext.EventManager.resizeEvent.removeListener(e.setSize,e),Ext.destroy(e.componentLayout,e.loadMask,e.floatingDescendants)},destroy:function(){var e=this,t=e.renderSelectors,n,r;if(!e.isDestroyed)if(!e.hasListeners.beforedestroy||e.fireEvent("beforedestroy",e)!==!1){e.destroying=!0,e.beforeDestroy(),e.floating?(delete e.floatParent,e.zIndexManager&&e.zIndexManager.unregister(e)):e.ownerCt&&e.ownerCt.remove&&e.ownerCt.remove(e,!1),e.stopAnimation(),e.onDestroy(),Ext.destroy(e.plugins),e.hasListeners.destroy&&e.fireEvent("destroy",e),Ext.ComponentManager.unregister(e),e.mixins.state.destroy.call(e),e.clearListeners();if(e.rendered){e.preserveElOnDestroy||e.el.remove(),e.mixins.elementCt.destroy.call(e);if(t)for(n in t)t.hasOwnProperty(n)&&(r=e[n],r&&(delete e[n],r.remove()));delete e.el,delete e.frameBody,delete e.rendered}e.destroying=!1,e.isDestroyed=!0}},isDescendantOf:function(e){return!!this.findParentBy(function(t){return t===e})},getHierarchyState:function(e){var t=this,n=e&&t.hierarchyStateInner||t.hierarchyState,r=t.ownerCt,i,s,o,u;if(!n||n.invalid)i=t.getRefOwner(),r&&(u=t.ownerLayout===r.layout),t.hierarchyState=n=Ext.Object.chain(i?i.getHierarchyState(u):Ext.rootHierarchyState),t.initHierarchyState(n),(s=t.componentLayout).initHierarchyState&&s.initHierarchyState(n),t.isContainer&&(t.hierarchyStateInner=o=Ext.Object.chain(n),s=t.layout,s&&s.initHierarchyState&&s.initHierarchyState(o,n),e&&(n=o));return n},initHierarchyState:function(e){var t=this;t.collapsed&&(e.collapsed=!0),t.hidden&&(e.hidden=!0),t.collapseImmune&&(e.collapseImmune=!0)},getAnchorToXY:function(e,t,n,r){return e.getAnchorXY(t,n,r)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(e){this.el.setLocalX(e)},setLocalXY:function(e,t){this.el.setLocalXY(e,t)},setLocalY:function(e){this.el.setLocalY(e)},setX:function(e,t){this.el.setX(e,t)},setXY:function(e,t){this.el.setXY(e,t)},setY:function(e,t){this.el.setY(e,t)}},function(){var e=this;e.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"}),Ext.resumeLayouts=function(t){e.resumeLayouts(t)},Ext.suspendLayouts=function(){e.suspendLayouts()},Ext.batchLayouts=function(t,n){e.suspendLayouts(),t.call(n),e.resumeLayouts(!0)}}),Ext.define("Ext.AbstractPlugin",{disabled:!1,isPlugin:!0,constructor:function(e){this.pluginConfig=e,Ext.apply(this,e)},clonePlugin:function(e){return new this.self(Ext.apply({},e,this.pluginConfig))},setCmp:function(e){this.cmp=e},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},onClassExtended:function(e,t,n){var r=t.alias;r&&!t.ptype&&(Ext.isArray(r)&&(r=r[0]),e.prototype.ptype=r.split("plugin.")[1])}}),Ext.define("Ext.Action",{constructor:function(e){this.initialConfig=e,this.itemId=e.itemId=e.itemId||e.id||Ext.id(),this.items=[]},isAction:!0,setText:function(e){this.initialConfig.text=e,this.callEach("setText",[e])},getText:function(){return this.initialConfig.text},setIconCls:function(e){this.initialConfig.iconCls=e,this.callEach("setIconCls",[e])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(e){this.initialConfig.disabled=e,this.callEach("setDisabled",[e])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(e){this.initialConfig.hidden=e,this.callEach("setVisible",[!e])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(e,t){this.initialConfig.handler=e,this.initialConfig.scope=t,this.callEach("setHandler",[e,t])},each:function(e,t){Ext.each(this.items,e,t)},callEach:function(e,t){var n=this.items,r=0,i=n.length,s;Ext.suspendLayouts();for(;r<i;r++)s=n[r],s[e].apply(s,t);Ext.resumeLayouts(!0)},addComponent:function(e){this.items.push(e),e.on("destroy",this.removeComponent,this)},removeComponent:function(e){Ext.Array.remove(this.items,e)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}}),Ext.define("Ext.data.flash.BinaryXhr",{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0,Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill"),Ext.globalEvents.fireEvent("flashready")},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(e,t,n){var r;r=this.liveConnections[Number(e)],r&&r.onFlashStateChange(t,n)},registerConnection:function(e){var t=this.connectionIndex;return this.conectionIndex=this.connectionIndex+1,this.liveConnections[t]=e,t},injectFlashPlugin:function(){var e=this,t,n;e.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]}),t=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/"),n="/plugins/flash/FlashPlugin.swf",Ext.flashPluginPath&&(n=Ext.flashPluginPath),Ext.Loader.loadScript({url:t,onLoad:function(){var e="11.4.0",t="playerProductInstall.swf",r={},i={};i.quality="high"
,i.bgcolor="#ffffff",i.allowscriptaccess="sameDomain",i.allowfullscreen="true";var s={};s.id="ext-flash-polyfill",s.name="polyfill",s.align="middle",swfobject.embedSWF(n,"ext-flash-polyfill","0","0",e,t,r,i,s)},onError:function(){},scope:e}),Ext.globalEvents.addEvents("flashready"),Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(e){Ext.data.flash.BinaryXhr.flashPluginInjected||Ext.data.flash.BinaryXhr.injectFlashPlugin();var t=this;Ext.apply(t,e),t.requestHeaders={}},abort:function(){var e=this;if(e.readyState==4)return;e.aborted=!0;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.globalEvents.removeListener("flashready",e.onFlashReady,e);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(e.javascriptId),delete Ext.data.flash.BinaryXhr.liveConnections[e.javascriptId]},getAllResponseHeaders:function(){var e=[];return Ext.Object.each(this.responseHeaders,function(t,n){e.push(t+": "+n)}),e.join("\r\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,n,r,i){var s=this;s.method=e,s.url=t,s.async=n!==!1,s.user=r,s.password=i},overrideMimeType:function(e){this.mimeType=e},send:function(e){var t=this;t.body=e,Ext.data.flash.BinaryXhr.flashPluginActive?this.onFlashReady():Ext.globalEvents.addListener("flashready",t.onFlashReady,t)},onFlashReady:function(){var e=this,t,n;e.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(e),t={method:e.method,url:e.url,user:e.user,password:e.password,mimeType:e.mimeType,requestHeaders:e.requestHeaders,body:e.body,javascriptId:e.javascriptId},n=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(t)},setReadyState:function(e){var t=this;t.readyState!=e&&(t.readyState=e,t.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,parseData:function(e){var t=this;this.status=e.status||0,t.responseHeaders={},t.mimeType&&(t.responseHeaders["content-type"]=t.mimeType);if(e.reason=="complete")this.responseBytes=e.data,t.responseHeaders["content-length"]=e.data.length;else if(e.reason=="error"||e.reason=="securityError")this.statusText=e.text,t.responseHeaders["content-length"]=0},onFlashStateChange:function(e,t){var n=this;e==4&&(n.parseData(t),delete Ext.data.flash.BinaryXhr.liveConnections[n.javascriptId]),n.setReadyState(e)}}),Ext.define("Ext.data.Connection",{mixins:{observable:Ext.util.Observable},statics:{requestId:0},url:null,async:!0,method:null,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",constructor:function(e){e=e||{},Ext.apply(this,e),this.requests={},this.mixins.observable.constructor.call(this)},request:function(e){e=e||{};var t=this,n=e.scope||window,r=e.username||t.username,i=e.password||t.password||"",s,o,u,a,f;return t.fireEvent("beforerequest",t,e)!==!1?(o=t.setOptions(e,n),t.isFormUpload(e)?(t.upload(e.form,o.url,o.data,e),null):((e.autoAbort||t.autoAbort)&&t.abort(),s=e.async!==!1?e.async||t.async:!1,f=t.openRequest(e,o,s,r,i),t.isXdr||(a=t.setupHeaders(f,e,o.data,o.params)),u={id:++Ext.data.Connection.requestId,xhr:f,headers:a,options:e,async:s,binary:e.binary||t.binary,timeout:setTimeout(function(){u.timedout=!0,t.abort(u)},e.timeout||t.timeout)},t.requests[u.id]=u,t.latestId=u.id,s&&(t.isXdr||(f.onreadystatechange=Ext.Function.bind(t.onStateChange,t,[u]))),t.isXdr&&t.processXdrRequest(u,f),f.send(o.data),s?u:t.onComplete(u))):(Ext.callback(e.callback,e.scope,[e,undefined,undefined]),null)},processXdrRequest:function(e,t){var n=this;delete e.headers,e.contentType=e.options.contentType||n.defaultXdrContentType,t.onload=Ext.Function.bind(n.onStateChange,n,[e,!0]),t.onerror=t.ontimeout=Ext.Function.bind(n.onStateChange,n,[e,!1])},processXdrResponse:function(e,t){e.getAllResponseHeaders=function(){return[]},e.getResponseHeader=function(){return""},e.contentType=t.contentType||this.defaultXdrContentType},upload:function(e,t,n,r){e=Ext.getDom(e),r=r||{};var i=Ext.id(),s=document.createElement("iframe"),o=[],u="multipart/form-data",a={target:e.target,method:e.method,encoding:e.encoding,enctype:e.enctype,action:e.action},f=function(t,n){l=document.createElement("input"),Ext.fly(l).set({type:"hidden",value:n,name:t}),e.appendChild(l),o.push(l)},l,c,h,p,d,v,m,g;Ext.fly(s).set({id:i,name:i,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL}),document.body.appendChild(s),document.frames&&(document.frames[i].name=i),Ext.fly(e).set({target:i,method:"POST",enctype:u,encoding:u,action:t||a.action});if(n){c=Ext.Object.fromQueryString(n)||{};for(p in c)if(c.hasOwnProperty(p)){h=c[p];if(Ext.isArray(h)){d=h.length;for(v=0;v<d;v++)f(p,h[v])}else f(p,h)}}Ext.fly(s).on("load",Ext.Function.bind(this.onUploadComplete,this,[s,r]),null,{single:!Ext.isOpera}),e.submit(),Ext.fly(e).set(a),m=o.length;for(g=0;g<m;g++)Ext.removeNode(o[g])},onUploadComplete:function(e,t){var n=this,r={responseText:"",responseXML:null},i,s,o,u;try{o=e.contentWindow.document||e.contentDocument||window.frames[e.id].document;if(o){if(Ext.isOpera&&o.location=="about:blank")return;o.body&&((u=o.body.firstChild)&&/pre/i.test(u.tagName)?r.responseText=u.textContent:(u=o.getElementsByTagName("textarea")[0])?r.responseText=u.value:r.responseText=o.body.textContent||o.body.innerText),r.responseXML=o.XMLDocument||o,i=t.success,s=!0}}catch(a){r.responseText='{success:false,message:"'+Ext.String.trim(a.message||a.description)+'"}',i=t.failure,s=!1}n.fireEvent("requestcomplete",n,r,t),Ext.callback(i,t.scope,[r,t]),Ext.callback(t.callback,t.scope,[t,s,r]),setTimeout(function(){Ext.removeNode(e)},100)},isFormUpload:function(e){var t=this.getForm(e);return t?e.isUpload||/multipart\/form-data/i.test(t.getAttribute("enctype")):!1},getForm:function(e){return Ext.getDom(e.form)||null},setOptions:function(e,t){var n=this,r=e.params||{},i=n.extraParams,s=e.urlParams,o=e.url||n.url,u=e.jsonData,a,f,l;Ext.isFunction(r)&&(r=r.call(t,e)),Ext.isFunction(o)&&(o=o.call(t,e)),o=this.setupUrl(e,o),l=e.rawData||e.binaryData||e.xmlData||u||null,u&&!Ext.isPrimitive(u)&&(l=Ext.encode(l));if(e.binaryData&&n.nativeBinaryPostSupport()){l=new Uint8Array(e.binaryData);if(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)l=l.buffer}return Ext.isObject(r)&&(r=Ext.Object.toQueryString(r)),Ext.isObject(i)&&(i=Ext.Object.toQueryString(i)),r+=i?(r?"&":"")+i:"",s=Ext.isObject(s)?Ext.Object.toQueryString(s):s,r=this.setupParams(e,r),a=(e.method||n.method||(r||l?"POST":"GET")).toUpperCase(),this.setupMethod(e,a),f=e.disableCaching!==!1?e.disableCaching||n.disableCaching:!1,a==="GET"&&f&&(o=Ext.urlAppend(o,(e.disableCachingParam||n.disableCachingParam)+"="+(new Date).getTime())),(a=="GET"||l)&&r&&(o=Ext.urlAppend(o,r),r=null),s&&(o=Ext.urlAppend(o,s)),{url:o,method:a,data:l||r||null}},setupUrl:function(e,t){var n=this.getForm(e);return n&&(t=t||n.action),t},setupParams:function(e,t){var n=this.getForm(e),r;return n&&!this.isFormUpload(e)&&(r=Ext.Element.serializeForm(n),t=t?t+"&"+r:r),t},setupMethod:function(e,t){return this.isFormUpload(e)?"POST":t},setupHeaders:function(e,t,n,r){var i=this,s=Ext.apply({},t.headers||{},i.defaultHeaders||{}),o=i.defaultPostHeader,u=t.jsonData,a=t.xmlData,f="Content-Type",l,c;!s.hasOwnProperty(f)&&(n||r)&&(n&&(t.rawData?o="text/plain":a&&Ext.isDefined(a)?o="text/xml":u&&Ext.isDefined(u)&&(o="application/json")),s[f]=o),i.useDefaultXhrHeader&&!s["X-Requested-With"]&&(s["X-Requested-With"]=i.defaultXhrHeader),(s[f]===undefined||s[f]===null)&&delete s[f];try{for(l in s)s.hasOwnProperty(l)&&(c=s[l],e.setRequestHeader(l,c))}catch(h){i.fireEvent("exception",l,c)}return s},newRequest:function(e){var t=this,n;return e.binaryData?t.nativeBinaryPostSupport()?n=this.getXhrInstance():n=new Ext.data.flash.BinaryXhr:(e.cors||t.cors)&&Ext.isIE&&Ext.ieVersion<=9?(n=t.getXdrInstance(),t.isXdr=!0):n=t.getXhrInstance(),n},openRequest:function(e,t,n,r,i){var s=this,o=s.newRequest(e);r?o.open(t.method,t.url,n,r,i):s.isXdr?o.open(t.method,t.url):o.open(t.method,t.url,n);if(e.binary||s.binary)window.Uint8Array?o.responseType="arraybuffer":o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined");if(e.withCredentials||s.withCredentials)o.withCredentials=!0;return o},getXdrInstance:function(){var e;return Ext.ieVersion>=8?e=new XDomainRequest:Ext.Error.raise({msg:"Your browser does not support CORS"}),e},getXhrInstance:function(){var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=0,n=e.length,r;for(;t<n;++t)try{r=e[t],r();break}catch(i){}return r}(),isLoading:function(e){e||(e=this.getLatest());if(!e||!e.xhr)return!1;var t=e.xhr.readyState;return e.xhr instanceof Ext.data.flash.BinaryXhr&&t!=4||t!==0&&t!=4},abort:function(e){var t=this,n;e||(e=t.getLatest());if(e&&t.isLoading(e)){n=e.xhr;try{n.onreadystatechange=null}catch(r){n.onreadystatechange=Ext.emptyFn}n.abort(),t.clearTimeout(e),e.timedout||(e.aborted=!0),t.onComplete(e),t.cleanup(e)}},abortAll:function(){var e=this.requests,t;for(t in e)e.hasOwnProperty(t)&&this.abort(e[t])},getLatest:function(){var e=this.latestId,t;return e&&(t=this.requests[e]),t||null},onStateChange:function(e,t){var n=this;if(e.xhr&&e.xhr.readyState==4||n.isXdr)n.clearTimeout(e),n.onComplete(e,t),n.cleanup(e),Ext.EventManager.idleEvent.fire()},clearTimeout:function(e){clearTimeout(e.timeout),delete e.timeout},cleanup:function(e){e.xhr=null,delete e.xhr},onComplete:function(e,t){var n=this,r=e.options,i,s,o,u;try{i=e.xhr,s=n.parseStatus(i.status),s.success&&(s.success=i.readyState===4)}catch(a){s={success:!1,isException:!1}}return o=n.isXdr?t:s.success,o?(u=n.createResponse(e),n.fireEvent("requestcomplete",n,u,r),Ext.callback(r.success,r.scope,[u,r])):(s.isException||e.aborted||e.timedout?u=n.createException(e):u=n.createResponse(e),n.fireEvent("requestexception",n,u,r),Ext.callback(r.failure,r.scope,[u,r])),Ext.callback(r.callback,r.scope,[r,o,u]),delete n.requests[e.id],u},parseStatus:function(e){e=e==1223?204:e;var t=e>=200&&e<300||e==304,n=!1;if(!t)switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:n=!0}return{success:t,isException:n}},createResponse:function(e){var t=this,n=e.xhr,r=t.isXdr,i={},s=r?[]:n.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),o=s.length,u,a,f,l,c;while(o--)u=s[o],a=u.indexOf(":"),a>=0&&(f=u.substr(0,a).toLowerCase(),u.charAt(a+1)==" "&&++a,i[f]=u.substr(a+1));return e.xhr=null,delete e.xhr,l={request:e,requestId:e.id,status:n.status,statusText:n.statusText,getResponseHeader:function(e){return i[e.toLowerCase()]},getAllResponseHeaders:function(){return i}},r&&t.processXdrResponse(l,n),e.binary?l.responseBytes=t.getByteArray(n):(l.responseText=n.responseText,l.responseXML=n.responseXML),n=null,l},createException:function(e){return{request:e,requestId:e.id,status:e.aborted?-1:0,statusText:e.aborted?"transaction aborted":"communication failure",aborted:e.aborted,timedout:e.timedout}},getByteArray:function(e){var t=e.response,n=e.responseBody,r,i,s,o;if(e instanceof Ext.data.flash.BinaryXhr)r=e.responseBytes;else if(window.Uint8Array)r=t?new Uint8Array(t):[];else if(Ext.isIE9p)try{r=(new VBArray(n)).toArray()}catch(u){r=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(e.responseBody,r=[]);else{r=[],i=e.responseText,s=i.length;for(o=0;o<s;o++)r.push(i.charCodeAt(o)&255)}return r},injectVBScript:function(){var e=document.createElement("script");e.type="text/vbscript",e.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n"),Ext.getHead().dom.appendChild(e),this.self.vbScriptInjected=!0},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}}),Ext.define("Ext.Ajax",{extend:Ext.data.Connection,singleton:!0,autoAbort:!1}),Ext.define("Ext.util.Floating",{focusOnToFront:!0,shadow:"sides",constrain:!1,constructor:function(e){var t=this;t.fixed=t.fixed&&!Ext.isIE6&&!Ext.isIEQuirks,t.el=new Ext.dom.Layer(Ext.apply({preventSync:!0,hideMode:t.hideMode,shadow:typeof t.shadow!="undefined"?t.shadow:"sides",shadowOffset:t.shadowOffset,constrain:!1,fixed:t.fixed,shim:t.shim===!1?!1:undefined},t.floating),e),t.modal&&(!Ext.FocusManager||!Ext.FocusManager.enabled)&&t.mon(t.el,{keydown:t.onKeyDown,scope:t}),t.mon(t.el,{mousedown:t.onMouseDown,scope:t}),t.floating=!0,t.registerWithOwnerCt(),t.initHierarchyEvents()},initHierarchyEvents:function(){var e=this,t=this.syncHidden;e.hasHierarchyEventListeners||(e.mon(e.hierarchyEventSource,{hide:t,collapse:t,show:t,expand:t,added:t,scope:e}),e.hasHierarchyEventListeners=!0)},registerWithOwnerCt:function(){var e=this,t=e.ownerCt,n=e.zIndexParent;n&&n.unregisterFloatingItem(e),n=e.zIndexParent=e.up("[floating]"),e.setFloatParent(t||n),delete e.ownerCt,n?n.registerFloatingItem(e):Ext.WindowManager.register(e)},onKeyDown:function(e){var t=this,n,r,i,s;e.getKey()==Ext.EventObject.TAB&&(n=e.shiftKey,r=t.el.query(":focusable"),i=r[0],s=r[r.length-1],i&&s&&e.target===(n?i:s)&&(e.stopEvent(),(n?s:i).focus(!1,!0)))},onMouseDown:function(e){var t=this.focusTask;this.floating&&(!t||!t.id)&&this.toFront(!!e.getTarget(":focusable"))},setFloatParent:function(e){var t=this;t.floatParent=e,(t.constrain||t.constrainHeader)&&!t.constrainTo&&(t.constrainTo=e?e.getTargetEl():t.container)},syncShadow:function(){this.floating&&this.el.sync(!0)},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){delete this.el.preventSync,this.syncShadow()},syncHidden:function(){var e=this,t=e.hidden||!e.rendered,n=e.hierarchicallyHidden=e.isHierarchicallyHidden(),r=e.pendingShow;t!==n&&(n?(e.hide(),e.pendingShow=!0):r&&(delete e.pendingShow,r.length?e.show.apply(e,r):e.show()))},setZIndex:function(e){var t=this;return t.el.setZIndex(e),e+=10,t.floatingDescendants&&(e=Math.floor(t.floatingDescendants.setBase(e)/100)*100+1e4),e},doConstrain:function(e){var t=this,n=t.calculateConstrainedPosition(e,null,!0);n&&t.setPosition(n)},toFront:function(e){var t=this,n=t.zIndexParent,r=t.preventFocusOnActivate;return n&&t.bringParentToFront!==!1&&n.toFront(!0),Ext.isDefined(e)||(e=!t.focusOnToFront),e&&(t.preventFocusOnActivate=!0),t.zIndexManager.bringToFront(t,e)&&(e||t.focus(!1,!0)),t.preventFocusOnActivate=r,t},setActive:function(e,t){var n=this;e?(n.el.shadow&&!n.maximized&&n.el.enableShadow(!0),n.preventFocusOnActivate||n.focus(!1,!0),n.fireEvent("activate",n)):(n.isWindow&&t&&t.isWindow&&n.hideShadowOnDeactivate&&n.el.disableShadow(),n.fireEvent("deactivate",n))},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var e=this,t;return e.isVisible()?(t=e.getAlignToXY(e.container,"c-c"),e.setPagePosition(t)):e.needsCenter=!0,e},onFloatShow:function(){this.needsCenter&&this.center(),delete this.needsCenter,this.toFrontOnShow&&this.toFront()},fitContainer:function(e){var t=this,n=t.floatParent,r=n?n.getTargetEl():t.container,i=r.getViewSize(!1),s=n||r.dom!==document.body?[0,0]:r.getXY();i.x=s[0],i.y=s[1],t.setBox(i,e)}}),Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:Ext.AbstractComponent,mixins:{floating:Ext.util.Floating},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:!1,defaultAlign:"tl-bl?",toFrontOnShow:!0,hideMode:"display",offsetsCls:Ext.baseCSSPrefix+"hide-offsets",bubbleEvents:[],defaultComponentLayoutType:"autocomponent",constructor:function(e){var t=this;e=e||{};if(e.initialConfig)e.isAction&&(t.baseAction=e),e=e.initialConfig;else if(e.tagName||e.dom||Ext.isString(e))e={applyTo:e,id:e.id||e};t.callParent([e]),t.baseAction&&t.baseAction.addComponent(t)},initComponent:function(){var e=this;e.callParent(),e.listeners&&(e.on(e.listeners),e.listeners=null),e.enableBubble(e.bubbleEvents)},afterRender:function(){var e=this;e.callParent(),(!e.x||!e.y)&&(e.pageX||e.pageY)&&e.setPagePosition(e.pageX,e.pageY)},setAutoScroll:function(e){var t=this;return t.autoScroll=!!e,t.rendered&&t.getOverflowEl().setStyle(t.getOverflowStyle()),t.updateLayout(),t},setOverflowXY:function(e,t){var n=this,r=arguments.length;return r&&(n.overflowX=e||"",r>1&&(n.overflowY=t||"")),n.rendered&&n.getOverflowEl().setStyle(n.getOverflowStyle()),n.updateLayout(),n},beforeRender:function(){var e=this,t=e.floating,n;return t&&(e.addCls(Ext.baseCSSPrefix+"layer"),n=t.cls,n&&e.addCls(n)),e.callParent()},beforeLayout:function(){this.callParent(arguments),this.floating&&this.onBeforeFloatLayout()},afterComponentLayout:function(){this.callParent(arguments),this.floating&&this.onAfterFloatLayout()},makeFloating:function(e){this.mixins.floating.constructor.call(this,e)},wrapPrimaryEl:function(e){this.floating?this.makeFloating(e):this.callParent(arguments)},initResizable:function(e){var t=this;e=Ext.apply({target:t,dynamic:!1,constrainTo:t.constrainTo||(t.floatParent?t.floatParent.getTargetEl():null),handles:t.resizeHandles},e),e.target=t,t.resizer=new Ext.resizer.Resizer(e)},getDragEl:function(){return this.el},initDraggable:function(){var e=this,t=e.resizer&&e.resizer.el!==e.el?e.resizerComponent=new Ext.Component({ariaRole:"presentation",el:e.resizer.el,rendered:!0,container:e.container}):e,n=Ext.applyIf({el:t.getDragEl(),constrainTo:e.constrain||e.draggable.constrain?e.constrainTo||(e.floatParent?e.floatParent.getTargetEl():e.container):undefined},e.draggable);if(e.constrain||e.constrainDelegate)n.constrain=e.constrain,n.constrainDelegate=e.constrainDelegate;e.dd=new Ext.util.ComponentDragger(t,n)},scrollBy:function(e,t,n){var r;(r=this.getTargetEl())&&r.dom&&r.scrollBy.apply(r,arguments)},setLoading:function(e,t){var n=this,r={target:n};return n.rendered&&(Ext.destroy(n.loadMask),n.loadMask=null,e!==!1&&!n.collapsed&&(Ext.isObject(e)?Ext.apply(r,e):Ext.isString(e)&&(r.msg=e),t&&Ext.applyIf(r,{useTargetEl:!0}),n.loadMask=new Ext.LoadMask(r),n.loadMask.show())),n.loadMask},beforeSetPosition:function(){var e=this,t=e.callParent(arguments),n;return t&&(n=e.adjustPosition(t.x,t.y),t.x=n.x,t.y=n.y),t||null},afterSetPosition:function(e,t){this.onPosition(e,t),this.fireEvent("move",this,e,t)},showAt:function(e,t,n){var r=this;if(!r.rendered&&(r.autoRender||r.floating))return r.x=e,r.y=t,r.show();r.floating?r.setPosition(e,t,n):r.setPagePosition(e,t,n),r.show()},showBy:function(e,t,n){var r=this;return r.floating&&e&&(r.show(),r.rendered&&!r.hidden&&r.alignTo(e,t||r.defaultAlign,n)),r},setPagePosition:function(e,t,n){var r=this,i,s;return Ext.isArray(e)&&(t=e[1],e=e[0]),r.pageX=e,r.pageY=t,r.floating?(r.isContainedFloater()?(s=r.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(e)&&Ext.isNumber(s.left)&&(e-=s.left),Ext.isNumber(t)&&Ext.isNumber(s.top)&&(t-=s.top)):(i=r.el.translateXY(e,t),e=i.x,t=i.y),r.setPosition(e,t,n)):(i=r.el.translateXY(e,t),r.setPosition(i.x,i.y,n)),r},isContainedFloater:function(){return this.floating&&this.floatParent},updateBox:function(e){return this.setSize(e.width,e.height),this.setPagePosition(e.x,e.y),this},getOuterSize:function(){var e=this.el;return{width:e.getWidth()+e.getMargin("lr"),height:e.getHeight()+e.getMargin("tb")}},adjustPosition:function(e,t){var n=this,r;return n.isContainedFloater()&&(r=n.floatParent.getTargetEl().getViewRegion(),e+=r.left,t+=r.top),{x:e,y:t}},getPosition:function(e){var t=this,n,r=t.isContainedFloater(),i;return e===!0&&!r?[t.getLocalX(),t.getLocalY()]:(n=t.getXY(),e===!0&&r&&(i=t.floatParent.getTargetEl().getViewRegion(),n[0]-=i.left,n[1]-=i.top),n)},getId:function(){var e=this,t;return e.id||(t=e.getXType(),t?t=t.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):t=Ext.name.toLowerCase()+"-comp",e.id=t+"-"+e.getAutoId()),e.id},show:function(e,t,n){var r=this,i=r.rendered;return r.hierarchicallyHidden||r.floating&&!i&&r.isHierarchicallyHidden()?(i||r.initHierarchyEvents(),arguments.length>1?(arguments[0]=null,r.pendingShow=arguments):r.pendingShow=!0):i&&r.isVisible()?r.floating&&r.onFloatShow():r.fireEvent("beforeshow",r)!==!1?(r.hidden=!1,delete this.getHierarchyState().hidden,Ext.suspendLayouts(),!i&&(r.autoRender||r.floating)&&(r.doAutoRender(),i=r.rendered),i?(r.beforeShow(),Ext.resumeLayouts(),r.onShow.apply(r,arguments),r.afterShow.apply(r,arguments)):Ext.resumeLayouts(!0)):r.onShowVeto(),r},onShowVeto:Ext.emptyFn,beforeShow:Ext.emptyFn,onShow:function(){var e=this;e.el.show(),e.callParent(arguments),e.floating&&(e.maximized?e.fitContainer():e.constrain&&e.doConstrain())},getAnimateTarget:function(e){return e=e||this.animateTarget,e&&(e=e.isComponent?e.getEl():Ext.get(e)),e||null},afterShow:function(e,t,n){var r=this,i=r.el,s,o,u;e=r.getAnimateTarget(e),r.ghost||(e=null),e?(o={x:i.getX(),y:i.getY(),width:i.dom.offsetWidth,height:i.dom.offsetHeight},s={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},i.addCls(r.offsetsCls),u=r.ghost(),u.el.stopAnimation(),u.setX(-1e4),r.ghostBox=o,u.el.animate({from:s,to:o,listeners:{afteranimate:function(){delete u.componentLayout.lastComponentSize,r.unghost(),delete r.ghostBox,i.removeCls(r.offsetsCls),r.onShowComplete(t,n)}}})):r.onShowComplete(t,n),r.fireHierarchyEvent("show")},onShowComplete:function(e,t){var n=this;n.floating&&n.onFloatShow(),Ext.callback(e,t||n),n.fireEvent("show",n),delete n.hiddenByLayout},hide:function(e,t,n){var r=this,i;r.pendingShow&&delete r.pendingShow;if(!r.rendered||!!r.isVisible()){i=r.fireEvent("beforehide",r)!==!1;if(r.hierarchicallyHidden||i)r.hidden=!0,r.getHierarchyState().hidden=!0,r.rendered&&r.onHide.apply(r,arguments)}return r},onHide:function(e,t,n){var r=this,i,s,o,u=Ext.Element.getActiveElement();(u===r.el||r.el.contains(u))&&Ext.fly(u).blur(),e=r.getAnimateTarget(e),r.ghost||(e=null),e&&(o={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},i=r.ghost(),i.el.stopAnimation(),s=r.getSize(),i.el.animate({to:o,listeners:{afteranimate:function(){delete i.componentLayout.lastComponentSize,i.el.hide(),i.setHiddenState(!0),i.el.setSize(s),r.afterHide(t,n)}}})),r.el.hide(),e||r.afterHide(t,n)},afterHide:function(e,t){var n=this;n.hiddenByLayout=null,Ext.AbstractComponent.prototype.onHide.call(n),Ext.callback(e,t||n),n.fireEvent("hide",n),n.fireHierarchyEvent("hide")},onDestroy:function(){var e=this;e.rendered&&Ext.destroy(e.dd,e.resizer,e.proxy,e.proxyWrap,e.resizerComponent),delete e.focusTask,e.callParent()},deleteMembers:function(){var e=arguments,t=e.length,n=0;for(;n<t;++n)delete this[e[n]]},focus:function(e,t,n,r){var i=this,s,o,u;if(t)return i.getFocusTask().delay(Ext.isNumber(t)?t:10,i.focus,i,[e,!1,n,r]),i;i.focusTask&&i.focusTask.cancel();if(i.rendered&&!i.isDestroyed&&i.isVisible(!0)&&(s=i.getFocusEl())){if(s.isComponent)return s.focus(e,t);if(o=s.dom)s.needsTabIndex()&&(o.tabIndex=-1),i.floating&&(u=i.container.dom.scrollTop),s.focus(),e&&(Ext.isArray(e)?i.selectText&&i.selectText.apply(i,e):o.select()),Ext.callback(n,r);i.floating&&(i!==i.zIndexManager.getActive()&&i.toFront(!0),u!==undefined&&(i.container.dom.scrollTop=u))}return i},getFocusTask:function(){return this.focusTask||(Ext.Component.prototype.focusTask=new Ext.util.DelayedTask),this.focusTask},cancelFocus:function(){var e=this.focusTask;e&&e.cancel()},blur:function(){var e=this,t;return e.rendered&&(t=e.getFocusEl())&&(e.blurring=!0,t.blur(),delete e.blurring),e},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},getRefOwner:function(){return this.ownerCt||this.floatParent},getBubbleTarget:function(){return this.getRefOwner()},getContentTarget:function(){return this.el},cloneConfig:function(e){e=e||{};var t=e.id||Ext.id(),n=Ext.applyIf(e,this.initialConfig),r;return n.id=t,r=Ext.getClass(this),new r(n)},getXType:function(){return this.self.xtype},findParentBy:function(e){var t;for(t=this.getBubbleTarget();t&&!e(t,this);t=t.getBubbleTarget());return t||null},findParentByType:function(e){return Ext.isFunction(e)?this.findParentBy(function(t){return t.constructor===e}):this.up(e)},bubble:function(e,t,n){var r=this;while(r){if(e.apply(t||r,n||[r])===!1)break;r=r.getBubbleTarget()}return this},getProxy:function(){var e=this,t;return e.proxy||(t=Ext.getBody(),e.proxy=e.el.createProxy(Ext.baseCSSPrefix+"proxy-el",t,!0)),e.proxy},fireHierarchyEvent:function(e){this.hierarchyEventSource.fireEvent(e,this)},onAdded:function(){this.callParent(arguments),this.hierarchyEventSource.hasListeners.added&&this.fireHierarchyEvent("added")}},function(){this.hierarchyEventSource=this.prototype.hierarchyEventSource=new Ext.util.Observable({events:{hide:!0,show:!0,collapse:!0,expand:!0,added:!0}})}),Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var e=this;e._borderRegionInited||(e._borderRegionInited=!0,e.addStateEvents(["changeregion","changeweight"]),Ext.override(e,{getState:function(){var t=e.callParent();return t=e.addPropertyToState(t,"region"),t=e.addPropertyToState(t,"weight"),t}}))},getOwningBorderContainer:function(){var e=this.getOwningBorderLayout();return e&&e.owner},getOwningBorderLayout:function(){var e=this.ownerLayout;return e&&e.isBorderLayout?e:null},setBorderRegion:function(e){var t=this,n,r=t.region;if(e!==r){n=t.getOwningBorderLayout();if(n){var i=n.regionFlags[e],s=t.placeholder,o=t.splitter,u=n.owner,a=n.regionMeta,f=t.collapsed||t.floated,l,c,h;if(t.fireEventArgs("beforechangeregion",[t,e])===!1)return r;Ext.suspendLayouts(),t.region=e,Ext.apply(t,i),t.updateCollapseTool&&t.updateCollapseTool(),o&&(Ext.apply(o,i),o.updateOrientation(),c=u.items,h=c.indexOf(t),h>=0&&(l=a[e].splitterDelta,c.getAt(h+l)!==o&&(c.remove(o),h=c.indexOf(t),l>0&&++h,c.insert(h,o)))),s&&(f&&t.expand(!1),u.remove(s),t.placeholder=null,f&&t.collapse(null,!1)),u.updateLayout(),Ext.resumeLayouts(!0),t.fireEventArgs("changeregion",[t,r])}else t.region=e}return r},setRegionWeight:function(e){var t=this,n=t.getOwningBorderContainer(),r=t.placeholder,i=t.weight;return e!==i&&t.fireEventArgs("beforechangeweight",[t,e])!==!1&&(t.weight=e,r&&(r.weight=e),n&&n.updateLayout(),t.fireEventArgs("changeweight",[t,i])),i}}),Ext.define("Ext.ElementLoader",{mixins:{observable:Ext.util.Observable},statics:{Renderer:{Html:function(e,t,n){return e.getTarget().update(t.responseText,n.scripts===!0),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(e){var t=this,n;e=e||{},Ext.apply(t,e),t.setTarget(t.target),t.addEvents("beforeload","exception","load"),t.mixins.observable.constructor.call(t),t.autoLoad&&(n=t.autoLoad,n===!0&&(n={}),t.load(n))},setTarget:function(e){var t=this;e=Ext.get(e),t.target&&t.target!=e&&t.abort(),t.target=e},getTarget:function(){return this.target||null},abort:function(){var e=this.active;e!==undefined&&(Ext.Ajax.abort(e.request),e.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(e){this.target.mask(e===!0?null:e)},load:function(e){e=Ext.apply({},e);var t=this,n=Ext.isDefined(e.loadMask)?e.loadMask:t.loadMask,r=Ext.apply({},e.params),i=Ext.apply({},e.ajaxOptions),s=e.callback||t.callback,o=e.scope||t.scope||t;Ext.applyIf(i,t.ajaxOptions),Ext.applyIf(e,i),Ext.applyIf(r,t.params),Ext.apply(r,t.baseParams),Ext.applyIf(e,{url:t.url}),Ext.apply(e,{scope:t,params:r,callback:t.onComplete});if(t.fireEvent("beforeload",t,e)===!1)return;n&&t.addMask(n),t.active={options:e,mask:n,scope:o,callback:s,success:e.success||t.success,failure:e.failure||t.failure,renderer:e.renderer||t.renderer,scripts:Ext.isDefined(e.scripts)?e.scripts:t.scripts},t.active.request=Ext.Ajax.request(e),t.setOptions(t.active,e)},setOptions:Ext.emptyFn,onComplete:function(e,t,n){var r=this,i=r.active,s;i&&(s=i.scope,t&&(t=r.getRenderer(i.renderer).call(r,r,n,i)!==!1),t?(Ext.callback(i.success,s,[r,n,e]),r.fireEvent("load",r,n,e)):(Ext.callback(i.failure,s,[r,n,e]),r.fireEvent("exception",r,n,e)),Ext.callback(i.callback,s,[r,t,n,e]),i.mask&&r.removeMask()),delete r.active},getRenderer:function(e){return Ext.isFunction(e)?e:this.statics().Renderer.Html},startAutoRefresh:function(e,t){var n=this;n.stopAutoRefresh(),n.autoRefresh=setInterval(function(){n.load(t)},e)},stopAutoRefresh:function(){clearInterval(this.autoRefresh),delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var e=this;e.stopAutoRefresh(),delete e.target,e.abort(),e.clearListeners()}}),Ext.define("Ext.ComponentLoader",{extend:Ext.ElementLoader,statics:{Renderer:{Data:function(e,t,n){var r=!0;try{e.getTarget().update(Ext.decode(t.responseText))}catch(i){r=!1}return r},Component:function(e,t,n){var r=!0,i=e.getTarget(),s=[];try{s=Ext.decode(t.responseText)}catch(o){r=!1}return r&&(i.suspendLayouts(),n.removeAll&&i.removeAll(),i.add(s),i.resumeLayouts(!0)),r}}},target:null,loadMask:!1,renderer:"html",setTarget:function(e){var t=this;Ext.isString(e)&&(e=Ext.getCmp(e)),t.target&&t.target!=e&&t.abort(),t.target=e},removeMask:function(){this.target.setLoading(!1)},addMask:function(e){this.target.setLoading(e)},setOptions:function(e,t){e.removeAll=Ext.isDefined(t.removeAll)?t.removeAll:this.removeAll},getRenderer:function(e){if(Ext.isFunction(e))return e;var t=this.statics().Renderer;switch(e){case"component":return t.Component;case"data":return t.Data;default:return Ext.ElementLoader.Renderer.Html}}}),Ext.define("Ext.layout.SizeModel",{constructor:function(e){var t=this,n=t.self,r=n.sizeModelsArray,i;Ext.apply(t,e),t[i=t.name]=!0,t.fixed=!(t.auto=t.natural||t.shrinkWrap),r[t.ordinal=r.length]=n[i]=n.sizeModels[i]=t},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},function(){var e=this,t=e.sizeModelsArray,n,r,i,s,o;new e({name:"calculated"}),new e({name:"configured",names:{width:"width",height:"height"}}),new e({name:"natural"}),new e({name:"shrinkWrap"}),new e({name:"calculatedFromConfigured",configured:!0,names:{width:"width",height:"height"}}),new e({name:"calculatedFromNatural",natural:!0}),new e({name:"calculatedFromShrinkWrap",shrinkWrap:!0}),new e({name:"constrainedMax",configured:!0,constrained:!0,names:{width:"maxWidth",height:"maxHeight"}}),new e({name:"constrainedMin",configured:!0,constrained:!0,names:{width:"minWidth",height:"minHeight"}}),new e({name:"constrainedDock",configured:!0,constrained:!0,constrainedByMin:!0,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(n=0,i=t.length;n<i;++n){o=t[n],o.pairsByHeightOrdinal=s=[];for(r=0;r<i;++r)s.push({width:o,height:t[r]})}}),Ext.define("Ext.layout.Layout",{isLayout:!0,initialized:!1,running:!1,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},statics:{layoutsByType:{},create:function(e,t){var n=Ext.ClassManager,r=this.layoutsByType,i,s,o,u,a,f;if(!e||typeof e=="string")a=e||t,o={};else{if(e.isLayout)return e;o=e,a=e.type||t}if(!(u=r[a])){i="layout."+a,s=n.getNameByAlias(i),s||(f=!0),u=n.get(s);if(f||!u)return n.instantiateByAlias(i,o||{});r[a]=u}return new u(o)}},constructor:function(e){var t=this;t.id=Ext.id(null,t.type+"-"),Ext.apply(t,e),t.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(e){var t=this,n=t.context,r;t.lastWidthModel!=e.widthModel&&(t.lastWidthModel&&(r=!0),t.lastWidthModel=e.widthModel),t.lastHeightModel!=e.heightModel&&(t.lastWidthModel&&(r=!0),t.lastHeightModel=e.heightModel),r&&((n=e.context).clearTriggers(t,!1),n.clearTriggers(t,!0),t.triggerCount=0)},finishedLayout:function(e){this.lastWidthModel=e.widthModel,this.lastHeightModel=e.heightModel,this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(e){return this.autoSizePolicy},isItemBoxParent:function(e){return!1},isItemLayoutRoot:function(e){var t=e.getSizeModel(),n=t.width,r=t.height;return!e.componentLayout.lastComponentSize&&(n.calculated||r.calculated)?!1:!n.shrinkWrap&&!r.shrinkWrap},isItemShrinkWrap:function(e){return e.shrinkWrap},isRunning:function(){return!!this.ownerContext},
getItemsRenderTree:function(e,t){var n=e.length,r,i,s,o;if(n){o=[];for(r=0;r<n;++r)i=e[r],i.rendered||(t&&t[i.id]!==undefined?s=t[i.id]:(this.configureItem(i),s=i.getRenderTree(),t&&(t[i.id]=s)),s&&o.push(s))}return o},finishRender:Ext.emptyFn,finishRenderItems:function(e,t){var n=t.length,r,i;for(r=0;r<n;r++)i=t[r],i.rendering&&(i.finishRender(r),this.afterRenderItem(i))},renderChildren:function(){var e=this,t=e.getLayoutItems(),n=e.getRenderTarget();e.renderItems(t,n)},renderItems:function(e,t){var n=this,r=e.length,i=0,s;if(r){Ext.suspendLayouts();for(;i<r;i++)s=e[i],s&&!s.rendered?n.renderItem(s,t,i):n.isValidParent(s,t,i)?n.configureItem(s):n.moveItem(s,t,i);Ext.resumeLayouts(!0)}},isValidParent:function(e,t,n){var r=e.el?e.el.dom:Ext.getDom(e),i=t&&t.dom||t,s=r.parentNode,o;return s&&(o=s.className,o&&o.indexOf(Ext.baseCSSPrefix+"resizable-wrap")!==-1&&(r=r.parentNode)),r&&i?typeof n=="number"?(n=this.getPositionOffset(n),r===i.childNodes[n]):r.parentNode===i:!1},getPositionOffset:function(e){return e},configureItem:function(e){e.ownerLayout=this},renderItem:function(e,t,n){var r=this;e.rendered||(r.configureItem(e),e.render(t,n),r.afterRenderItem(e))},moveItem:function(e,t,n){t=t.dom||t,typeof n=="number"&&(n=t.childNodes[n]),t.insertBefore(e.el.dom,n||null),e.container=Ext.get(t),this.configureItem(e)},onContentChange:function(){return this.owner.updateLayout(),!0},initLayout:function(){this.initialized=!0},setOwner:function(e){this.owner=e},getLayoutItems:function(){return[]},onAdd:function(e){e.ownerLayout=this},afterRenderItem:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(e){var t=this,n=e.el,r=t.owner,i;e.rendered&&(i=[].concat(t.itemCls||[]),r.itemCls&&(i=Ext.Array.push(i,r.itemCls)),i.length&&n.removeCls(i)),delete e.ownerLayout},destroy:function(){var e=this,t;e.targetCls&&(t=e.getTarget(),t&&t.removeCls(e.targetCls)),e.onDestroy()},sortWeightedItems:function(e,t){for(var n=0,r=e.length;n<r;++n)e[n].$i=n;Ext.Array.sort(e,function(e,n){var r=n.weight-e.weight;return r||(r=e.$i-n.$i,e[t]&&(r=-r)),r});for(n=0;n<r;++n)delete e[n].$i}},function(){var e=this;e.prototype.sizeModels=e.sizeModels=Ext.layout.SizeModel.sizeModels}),Ext.define("Ext.layout.container.Container",{alias:["layout.container"],extend:Ext.layout.Layout,alternateClassName:"Ext.layout.ContainerLayout",mixins:{elementCt:Ext.util.ElementContainer},type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,childEls:["overflowPadderEl"],renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){this.callParent(arguments),this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent(),this.mixins.elementCt.destroy.call(this)},beginLayout:function(e){this.callParent(arguments),e.targetContext=e.paddingContext=e.getEl("getTarget",this),this.cacheChildItems(e)},beginLayoutCycle:function(e,t){var n=this;n.callParent(arguments),t&&(n.usesContainerHeight&&++e.consumersContainerHeight,n.usesContainerWidth&&++e.consumersContainerWidth)},cacheChildItems:function(e){var t=e.context,n=[],r=this.getVisibleItems(),i=r.length,s;e.childItems=n,e.visibleItems=r;for(s=0;s<i;++s)n.push(t.getCmp(r[s]))},cacheElements:function(){var e=this.owner;this.applyChildEls(e.el,e.id)},configureItem:function(e){var t=this,n=t.itemCls,r=t.owner.itemCls,i;e.ownerLayout=t,n&&(i=typeof n=="string"?[n]:n),r&&(i=Ext.Array.push(i||[],r)),i&&e.addCls(i)},doRenderBody:function(e,t){this.renderItems(e,t),this.renderContent(e,t)},doRenderContainer:function(e,t){var n=t.$comp.layout,r=n.getRenderTpl(),i=n.getRenderData();r.applyOut(i,e)},doRenderItems:function(e,t){var n=t.$layout,r=n.getRenderTree();r&&Ext.DomHelper.generateMarkup(r,e)},finishRender:function(){var e=this,t,n;e.callParent(),e.cacheElements(),t=e.getRenderTarget(),n=e.getLayoutItems(),e.finishRenderItems(t,n)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(e,t){var n=e.targetContext,r=n.getFrameInfo(),i=e.paddingContext.getPaddingInfo(),s=0,o=0,u,a,f,l;return e.widthModel.shrinkWrap||(++o,f=t?n.getDomProp("width"):n.getProp("width"),u=typeof f=="number",u&&(++s,f-=r.width+i.width,f<0&&(f=0))),e.heightModel.shrinkWrap||(++o,l=t?n.getDomProp("height"):n.getProp("height"),a=typeof l=="number",a&&(++s,l-=r.height+i.height,l<0&&(l=0))),{width:f,height:l,needed:o,got:s,gotAll:s==o,gotWidth:u,gotHeight:a}},getPositionOffset:function(e){if(!this.createsInnerCt){var t=this.owner.itemNodeOffset;t&&(e+=t)}return e},getLayoutItems:function(){var e=this.owner,t=e&&e.items;return t&&t.items||[]},getRenderData:function(){var e=this.owner;return{$comp:e,$layout:this,ownerId:e.id}},getRenderedItems:function(){var e=this,t=e.getRenderTarget(),n=e.getLayoutItems(),r=n.length,i=[],s,o;for(s=0;s<r;s++)o=n[s],o.rendered&&e.isValidParent(o,t,s)&&i.push(o);return i},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var e=this,t=Ext.XTemplate.getTpl(this,"renderTpl");return t.renderContent||e.owner.setupRenderTpl(t),t},getRenderTree:function(){var e,t=this.owner.items,n,r={};do n=t.generation,e=this.getItemsRenderTree(this.getLayoutItems(),r);while(t.generation!==n);return e},renderChildren:function(){var e=this,t=e.owner.items,n=e.getRenderTarget(),r,i;do r=t.generation,i=e.getLayoutItems(),e.renderItems(i,n);while(t.generation!==r)},getScrollbarsNeeded:function(e,t,n,r){var i=Ext.getScrollbarSize(),s=typeof e=="number",o=typeof t=="number",u=0,a=0;return i.width?(o&&t<r&&(a=2,e-=i.width),s&&e<n&&(u=1,!a&&o&&(t-=i.height,t<r&&(a=2))),a+u):0},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var e=this.getRenderTarget(),t=this.getLayoutItems(),n=t.length,r=[],i,s;for(i=0;i<n;i++)s=t[i],s.rendered&&this.isValidParent(s,e,i)&&s.hidden!==!0&&r.push(s);return r},setupRenderTpl:function(e){var t=this;e.renderBody=t.doRenderBody,e.renderContainer=t.doRenderContainer,e.renderItems=t.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()}}),Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:Ext.layout.container.Container,type:"autocontainer",childEls:["outerCt","innerCt","clearEl"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,lastOverflowAdjust:{width:0,height:0},renderTpl:["{% if (!(Ext.isIEQuirks || Ext.isIE7m)) { %}",'<span id="{ownerId}-outerCt" style="display:table;" role="presentation">','<div id="{ownerId}-innerCt" style="display:table-cell;height:100%;','vertical-align:top;{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</span>","{% } else if (values.shrinkWrapWidth) { %}",'<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"></div>',"</td>","</tr>","</tbody>","</table>","{% } else { %}",'<div id="{ownerId}-outerCt" style="zoom:1;{%this.renderPadding(out, values)%}" role="presentation">','<div id="{ownerId}-innerCt" style="zoom:1;height:100%;" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"></div>',"</div>","</div>","{% values.$layout.isShrinkWrapTpl = false %}","{% } %}"],tableTpl:['<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"</td>","</tr>","</tbody>","</table>"],isShrinkWrapTpl:!0,beginLayout:function(e){var t=this,n,r,i,s;t.callParent(arguments),t.initContextItems(e),t.isShrinkWrapTpl||(e.widthModel.shrinkWrap&&(s=!0),Ext.isStrict&&Ext.isIE7&&(i=t.getOverflowXStyle(e),(i==="auto"||i==="scroll")&&e.paddingContext.getPaddingInfo().right&&(s=!0)),s&&t.insertTableCt(e)),!t.isShrinkWrapTpl&&Ext.isIE7&&Ext.isStrict&&!t.clearElHasPadding&&(n=e.paddingContext.getPaddingInfo().bottom,r=t.getOverflowYStyle(e),n&&(r==="auto"||r==="scroll")&&(t.clearEl.setStyle("height",n),t.clearElHasPadding=!0))},beforeLayoutCycle:function(e){var t=this.owner,n=t.hierarchyState,r=t.hierarchyStateInner;if(!n||n.invalid)n=t.getHierarchyState(),r=t.hierarchyStateInner;e.widthModel.shrinkWrap&&this.isShrinkWrapTpl?r.inShrinkWrapTable=!0:delete r.inShrinkWrapTable},beginLayoutCycle:function(e){var t=this,n=t.outerCt,r=t.lastOuterCtWidth||"",i=t.lastOuterCtHeight||"",s=t.lastOuterCtTableLayout||"",o=e.state,u,a,f,l,c,h,p;t.callParent(arguments),f=l=c="";if(!e.widthModel.shrinkWrap&&t.isShrinkWrapTpl){if(Ext.isIE7m&&Ext.isStrict){a=t.getOverflowYStyle(e);if(a==="auto"||a==="scroll")h=!0}h||(f="100%"),p=t.owner.hierarchyStateInner,u=t.getOverflowXStyle(e),c=p.inShrinkWrapTable||u==="auto"||u==="scroll"?"":"fixed"}!e.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug&&(l="100%");if(f!==r||t.hasOuterCtPxWidth)n.setStyle("width",f),t.lastOuterCtWidth=f,t.hasOuterCtPxWidth=!1;c!==s&&(n.setStyle("table-layout",c),t.lastOuterCtTableLayout=c);if(l!==i||t.hasOuterCtPxHeight)n.setStyle("height",l),t.lastOuterCtHeight=l,t.hasOuterCtPxHeight=!1;t.hasInnerCtPxHeight&&(t.innerCt.setStyle("height",""),t.hasInnerCtPxHeight=!1),o.overflowAdjust=o.overflowAdjust||t.lastOverflowAdjust},calculate:function(e){var t=this,n=e.state,r=t.getContainerSize(e,!0),i=n.calculatedItems||(n.calculatedItems=t.calculateItems?t.calculateItems(e,r):!0);t.setCtSizeIfNeeded(e,r);if(i&&e.hasDomProp("containerChildrenSizeDone")){t.calculateContentSize(e);if(r.gotAll){t.manageOverflow&&!e.state.secondPass&&!t.reserveScrollbar&&t.calculateOverflow(e,r);return}}t.done=!1},calculateContentSize:function(e){var t=this,n=(e.widthModel.shrinkWrap?1:0)|(e.heightModel.shrinkWrap?2:0),r=n&1||undefined,i=n&2||undefined,s=0,o=e.props;r&&(isNaN(o.contentWidth)?++s:r=undefined),i&&(isNaN(o.contentHeight)?++s:i=undefined),s&&(r&&!e.setContentWidth(t.measureContentWidth(e))&&(t.done=!1),i&&!e.setContentHeight(t.measureContentHeight(e))&&(t.done=!1))},calculateOverflow:function(e){var t=this,n,r,i,s,o,u,a;o=t.getOverflowXStyle(e)==="auto",u=t.getOverflowYStyle(e)==="auto";if(o||u){i=Ext.getScrollbarSize(),a=e.overflowContext.el.dom,s=0,a.scrollWidth>a.clientWidth&&(s|=1),a.scrollHeight>a.clientHeight&&(s|=2),n=u&&s&2?i.width:0,r=o&&s&1?i.height:0;if(n!==t.lastOverflowAdjust.width||r!==t.lastOverflowAdjust.height)t.done=!1,e.invalidate({state:{overflowAdjust:{width:n,height:r},overflowState:s,secondPass:!0}})}},completeLayout:function(e){this.lastOverflowAdjust=e.state.overflowAdjust},doRenderPadding:function(e,t){var n=t.$layout,r=t.$layout.owner,i=r[r.contentPaddingProperty];n.managePadding&&i&&e.push("padding:",r.unitizeBox(i))},finishedLayout:function(e){var t=this.innerCt;this.callParent(arguments),(Ext.isIEQuirks||Ext.isIE8m)&&t.repaint(),Ext.isOpera&&(t.setStyle("position","relative"),t.dom.scrollWidth,t.setStyle("position",""))},getContainerSize:function(e,t){var n=this.callParent(arguments),r=e.state.overflowAdjust;return r&&(n.width-=r.width,n.height-=r.height),n},getRenderData:function(){var e=this.owner,t=this.callParent();return(Ext.isIEQuirks||Ext.isIE7m)&&(e.shrinkWrap&1||e.floating&&!e.width)&&(t.shrinkWrapWidth=!0),t},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(e){return e.overflowXStyle||(e.overflowXStyle=this.owner.scrollFlags.overflowX||e.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(e){return e.overflowYStyle||(e.overflowYStyle=this.owner.scrollFlags.overflowY||e.overflowContext.getStyle("overflow-y"))},initContextItems:function(e){var t=this,n=e.target,r=t.owner.customOverflowEl;e.outerCtContext=e.getEl("outerCt",t),e.innerCtContext=e.getEl("innerCt",t),r?e.overflowContext=e.getEl(r):e.overflowContext=e.targetContext,n[n.contentPaddingProperty]!==undefined&&(e.paddingContext=t.isShrinkWrapTpl?e.innerCtContext:e.outerCtContext)},initLayout:function(){var e=this,t=Ext.getScrollbarSize().width,n=e.owner;e.callParent(),t&&e.manageOverflow&&!e.hasOwnProperty("lastOverflowAdjust")&&(n.autoScroll||e.reserveScrollbar)&&(e.lastOverflowAdjust={width:t,height:0})},insertTableCt:function(e){var t=this,n=t.owner,r=0,i,s,o,u,a;i=Ext.XTemplate.getTpl(this,"tableTpl"),i.renderPadding=t.doRenderPadding,t.outerCt.dom.removeChild(t.innerCt.dom),s=document.createDocumentFragment(),o=t.innerCt.dom.childNodes,u=o.length;for(;r<u;r++)s.appendChild(o[0]);a=t.getTarget(),a.dom.innerHTML=i.apply({$layout:t,ownerId:t.owner.id}),a.down("td").dom.appendChild(s),t.applyChildEls(n.el,n.id),t.isShrinkWrapTpl=!0,e.removeEl(t.outerCt),e.removeEl(t.innerCt),t.initContextItems(e)},measureContentHeight:function(e){var t=this.outerCt.getHeight(),n=e.target;return this.managePadding&&n[n.contentPaddingProperty]===undefined&&(t+=e.targetContext.getPaddingInfo().height),t},measureContentWidth:function(e){var t,n,r,i,s;return this.chromeCellMeasureBug&&(t=this.innerCt.dom,n=t.style,r=n.display,r=="table-cell"&&(n.display="",t.offsetWidth,n.display=r)),i=this.outerCt.getWidth(),s=e.target,this.managePadding&&s[s.contentPaddingProperty]===undefined&&(i+=e.targetContext.getPaddingInfo().width),i},setCtSizeIfNeeded:function(e,t){var n=this,r=t.width,i=t.height,s=e.paddingContext.getPaddingInfo(),o=n.getTarget(),u=n.getOverflowXStyle(e),a=n.getOverflowYStyle(e),f=u==="auto"||u==="scroll",l=a==="auto"||a==="scroll",c=Ext.getScrollbarSize(),h=n.isShrinkWrapTpl,p=n.manageOverflow,d,v,m,g;r&&!e.widthModel.shrinkWrap&&(Ext.isIE7m&&Ext.isStrict&&h&&l||Ext.isIEQuirks&&!h&&!f)&&(p||l&&o.dom.scrollHeight>o.dom.clientHeight&&(r-=c.width),e.outerCtContext.setProp("width",r+s.width),n.hasOuterCtPxWidth=!0);if(i&&!e.heightModel.shrinkWrap){Ext.supports.PercentageHeightOverflowBug&&(v=!0);if(Ext.isIE8&&Ext.isStrict||Ext.isIE7m&&Ext.isStrict&&h)m=!0,g=!Ext.isIE8;(v||m)&&f&&o.dom.scrollWidth>o.dom.clientWidth&&(i=Math.max(i-c.height,0)),v&&(e.outerCtContext.setProp("height",i+s.height),n.hasOuterCtPxHeight=!0),m&&(g&&(i+=s.height),e.innerCtContext.setProp("height",i),n.hasInnerCtPxHeight=!0)}Ext.isIE7&&Ext.isStrict&&!h&&a==="auto"&&(d=u==="auto"?"overflow-x":"overflow-y",o.setStyle(d,"hidden"),o.setStyle(d,"auto"))},setupRenderTpl:function(e){this.callParent(arguments),e.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}),Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9e3},constructor:function(e){var t=this;t.map={},t.zIndexStack=[],t.front=null,e?e.isContainer?(e.on("resize",t._onContainerResize,t),t.zseed=Ext.Number.from(t.rendered?e.getEl().getStyle("zIndex"):undefined,t.getNextZSeed()),t.targetEl=e.getTargetEl(),t.container=e):(Ext.EventManager.onWindowResize(t._onContainerResize,t),t.zseed=t.getNextZSeed(),t.targetEl=Ext.get(e)):(Ext.EventManager.onWindowResize(t._onContainerResize,t),t.zseed=t.getNextZSeed(),Ext.onDocumentReady(function(){t.targetEl=Ext.getBody()}))},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(e){this.zseed=e;var t=this.assignZIndices();return this._activateLast(),t},assignZIndices:function(){var e=this.zIndexStack,t=e.length,n=0,r=this.zseed,i,s;for(;n<t;n++)i=e[n],i&&!i.hidden&&(r=i.setZIndex(r),i.modal&&(s=i));return s&&this._showModalMask(s),r},_setActiveChild:function(e,t){var n=this.front,r=e.preventFocusOnActivate;e!==n&&(n&&!n.destroying&&n.setActive(!1,e),this.front=e,e&&e!=t&&(e.preventFocusOnActivate=e.preventFocusOnActivate||t&&(t.preventFocusOnActivate||!t.focusOnToFront),e.setActive(!0),e.modal&&this._showModalMask(e),e.preventFocusOnActivate=r))},onComponentHide:function(e){this._activateLast()},_activateLast:function(){var e=this,t=e.zIndexStack,n=t.length-1,r;for(;n>=0&&t[n].hidden;--n);if(r=t[n]){e._setActiveChild(r,e.front);if(r.modal)return}else e.front&&!e.front.destroying&&e.front.setActive(!1),e.front=null;for(;n>=0;--n){r=t[n];if(r.isVisible()&&r.modal){e._showModalMask(r);return}}e._hideModalMask()},_showModalMask:function(e){var t=this,n=e.el.getStyle("zIndex")-4,r=e.floatParent?e.floatParent.getTargetEl():e.container,i=t.mask,s=t.maskShim,o;i||(Ext.isIE6&&(s=t.maskShim=Ext.getBody().createChild({tag:"iframe",role:"presentation",cls:Ext.baseCSSPrefix+"shim "+Ext.baseCSSPrefix+"mask-shim"}),s.setVisibilityMode(Ext.Element.DISPLAY)),i=t.mask=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"mask",style:"height:0;width:0"}),i.setVisibilityMode(Ext.Element.DISPLAY),i.on("click",t._onMaskClick,t)),i.maskTarget=r,o=t.getMaskBox(),s&&(s.setStyle("zIndex",n),s.show(),s.setBox(o)),i.setStyle("zIndex",n),i.show(),i.setBox(o)},_hideModalMask:function(){var e=this.mask,t=this.maskShim;e&&e.isVisible()&&(e.maskTarget=undefined,e.hide(),t&&t.hide())},_onMaskClick:function(){this.front&&this.front.focus()},getMaskBox:function(){var e=this.mask.maskTarget;return e.dom===document.body?{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}:e.getBox()},_onContainerResize:function(){var e=this,t=e.mask,n=e.maskShim,r;t&&t.isVisible()&&(t.hide(),n&&n.hide(),r=e.getMaskBox(),n&&(n.setSize(r),n.show()),t.setSize(r),t.show())},register:function(e){var t=this,n=e.afterHide;e.zIndexManager&&e.zIndexManager.unregister(e),e.zIndexManager=t,t.map[e.id]=e,t.zIndexStack.push(e),e.afterHide=function(){n.apply(e,arguments),t.onComponentHide(e)}},unregister:function(e){var t=this,n=t.map;delete e.zIndexManager,n&&n[e.id]&&(delete n[e.id],delete e.afterHide,Ext.Array.remove(t.zIndexStack,e),t._activateLast())},get:function(e){return e.isComponent?e:this.map[e]},bringToFront:function(e,t){var n=this,r=!1,i=n.zIndexStack;return e=n.get(e),e!==n.front&&(Ext.Array.remove(i,e),e.preventBringToFront?i.unshift(e):i.push(e),n.assignZIndices(),t||n._activateLast(),r=!0,n.front=e,e.modal&&n._showModalMask(e)),r},sendToBack:function(e){var t=this;return e=t.get(e),Ext.Array.remove(t.zIndexStack,e),t.zIndexStack.unshift(e),t.assignZIndices(),this._activateLast(),e},hideAll:function(){var e=this.map,t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],t.isComponent&&t.isVisible()&&t.hide())},hide:function(){var e=0,t=this.zIndexStack,n=t.length,r;this.tempHidden=[];for(;e<n;e++)r=t[e],r.isVisible()&&(this.tempHidden.push(r),r.el.hide(),r.hidden=!0)},show:function(){var e=0,t=this.tempHidden,n=t?t.length:0,r;for(;e<n;e++)r=t[e],r.el.show(),r.hidden=!1,r.setPosition(r.x,r.y);delete this.tempHidden},getActive:function(){return this.front},getBy:function(e,t){var n=[],r=0,i=this.zIndexStack,s=i.length,o;for(;r<s;r++)o=i[r],e.call(t||o,o)!==!1&&n.push(o);return n},each:function(e,t){var n=this.map,r,i;for(r in n)if(n.hasOwnProperty(r)){i=n[r];if(i.isComponent&&e.call(t||i,i)===!1)return}},eachBottomUp:function(e,t){var n=this.zIndexStack,r=0,i=n.length,s;for(;r<i;r++){s=n[r];if(s.isComponent&&e.call(t||s,s)===!1)return}},eachTopDown:function(e,t){var n=this.zIndexStack,r=n.length,i;for(;r-->0;){i=n[r];if(i.isComponent&&e.call(t||i,i)===!1)return}},destroy:function(){var e=this,t=e.map,n,r;for(r in t)t.hasOwnProperty(r)&&(n=t[r],n.isComponent&&n.destroy());Ext.destroy(e.mask),Ext.destroy(e.maskShim),delete e.zIndexStack,delete e.map,delete e.container,delete e.targetEl}},function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.define("Ext.Queryable",{isQueryable:!0,query:function(e){return e=e||"*",Ext.ComponentQuery.query(e,this)},queryBy:function(e,t){var n=[],r=this.getRefItems(!0),i=0,s=r.length,o;for(;i<s;++i)o=r[i],e.call(t||o,o)!==!1&&n.push(o);return n},queryById:function(e){return this.down("#"+e)},child:function(e){return e&&e.isComponent&&(e="#"+Ext.escapeId(e.getItemId())),e=e||"",this.query("> "+e)[0]||null},down:function(e){return e&&e.isComponent&&(e="#"+Ext.escapeId(e.getItemId())),e=e||"",this.query(e)[0]||null},getRefItems:function(){return[]}}),Ext.define("Ext.layout.component.Component",{extend:Ext.layout.Layout,type:"component",isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,beginLayoutCycle:function(e,t){var n=this,r=n.owner,i=e.ownerCtContext,s=e.heightModel,o=e.widthModel,u=r.el.dom===document.body,a=r.lastBox||n.nullBox,f=r.el.lastBox||n.nullBox,l=!u,c,h,p,d;n.callParent(arguments),t&&(n.usesContentWidth&&++e.consumersContentWidth,n.usesContentHeight&&++e.consumersContentHeight,n.usesWidth&&++e.consumersWidth,n.usesHeight&&++e.consumersHeight,i&&!i.hasRawContent&&(c=r.ownerLayout,c.usesWidth&&++e.consumersWidth,c.usesHeight&&++e.consumersHeight)),o.configured?(p=o.names.width,u||(l=n.setWidthInDom||(t?r[p]!==f.width:o.constrained)),e.setWidth(r[p],l)):e.isTopLevel&&(o.calculated&&(h=a.width,e.setWidth(h,h!=f.width)),h=a.x,e.setProp("x",h,h!=f.x)),s.configured?(d=s.names.height,u||(l=t?r[d]!==f.height:s.constrained),e.setHeight(r[d],l)):e.isTopLevel&&(s.calculated&&(h=a.height,e.setHeight(h,h!=f.height)),h=a.y,e.setProp("y",h,h!=f.y))},finishedLayout:function(e){var t=this,n=e.children,r=t.owner,i,s,o,u,a;if(n){i=n.length;for(s=0;s<i;s++)o=n[s],o.el.lastBox=o.props}e.previousSize=t.lastComponentSize,t.lastComponentSize=r.el.lastBox=a=e.props,u=r.lastBox||(r.lastBox={}),u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height,u.invalid=!1,t.callParent(arguments)},notifyOwner:function(e){var t=this,n=t.lastComponentSize,r=e.previousSize,i=[n.width,n.height];r&&i.push(r.width,r.height),t.owner.afterComponentLayout.apply(t.owner,i)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(e){var t=this,n=t.targetInfo,r;return n||(r=e.getEl("getTarget",t),t.targetInfo=n={padding:r.getPaddingInfo(),border:r.getBorderInfo()}),n},measureAutoDimensions:function(e,t){var n=this,r=n.owner,i=r.layout,s=e.heightModel,o=e.widthModel,u=e.boxParent,a=e.isBoxParent,f=e.props,l,c={gotWidth:!1,gotHeight:!1,isContainer:l=!e.hasRawContent},h=t||3,p,d,v=0,m=0,g,y,b;return o.shrinkWrap&&e.consumersContentWidth?(++v,p=!(h&1),l?p?(c.contentWidth=0,c.gotWidth=!0,++m):(c.contentWidth=e.getProp("contentWidth"))!==undefined&&(c.gotWidth=!0,++m):(y=f.contentWidth,typeof y=="number"?(c.contentWidth=y,c.gotWidth=!0,++m):(p?g=!0:e.hasDomProp("containerChildrenSizeDone")?a||!u||u.widthModel.shrinkWrap?g=!0:g=u.hasDomProp("width"):g=!1,g&&(p?b=0:i&&i.measureContentWidth?b=i.measureContentWidth(e):b=n.measureContentWidth(e),isNaN(c.contentWidth=b)||(e.setContentWidth(b,!0),c.gotWidth=!0,++m))))):o.natural&&e.consumersWidth&&(++v,y=f.width,typeof y=="number"?(c.width=y,c.gotWidth=!0,++m):(a||!u?g=!0:g=u.hasDomProp("width"),g&&(isNaN(c.width=n.measureOwnerWidth(e))||(e.setWidth(c.width,!1),c.gotWidth=!0,++m)))),s.shrinkWrap&&e.consumersContentHeight?(++v,d=!(h&2),l?d?(c.contentHeight=0,c.gotHeight=!0,++m):(c.contentHeight=e.getProp("contentHeight"))!==undefined&&(c.gotHeight=!0,++m):(y=f.contentHeight,typeof y=="number"?(c.contentHeight=y,c.gotHeight=!0,++m):(d?g=!0:e.hasDomProp("containerChildrenSizeDone")?r.noWrap?g=!0:o.shrinkWrap?a||!u||u.widthModel.shrinkWrap?g=!0:g=u.hasDomProp("width"):g=(e.bodyContext||e).hasDomProp("width"):g=!1,g&&(d?b=0:i&&i.measureContentHeight?b=i.measureContentHeight(e):b=n.measureContentHeight(e),isNaN(c.contentHeight=b)||(e.setContentHeight(b,!0),c.gotHeight=!0,++m))))):s.natural&&e.consumersHeight&&(++v,y=f.height,typeof y=="number"?(c.height=y,c.gotHeight=!0,++m):(a||!u?g=!0:g=u.hasDomProp("width"),g&&(isNaN(c.height=n.measureOwnerHeight(e))||(e.setHeight(c.height,!1),c.gotHeight=!0,++m)))),u&&e.onBoxMeasured(),c.gotAll=m==v,c},measureContentWidth:function(e){return e.el.getWidth()-e.getFrameInfo().width},measureContentHeight:function(e){return e.el.getHeight()-e.getFrameInfo().height},measureOwnerHeight:function(e){return e.el.getHeight()},measureOwnerWidth:function(e){return e.el.getWidth()}}),Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:Ext.layout.component.Component,type:"autocomponent",setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(e,t){var n=this,r=n.lastWidthModel,i=n.lastHeightModel,s=n.owner.el;n.callParent(arguments),r&&r.fixed&&e.widthModel.shrinkWrap&&s.setWidth(null),i&&i.fixed&&e.heightModel.shrinkWrap&&s.setHeight(null)},calculate:function(e){var t=this,n=t.measureAutoDimensions(e),r=e.heightModel,i=e.widthModel,s,o;n.gotWidth?i.shrinkWrap?t.publishOwnerWidth(e,n.contentWidth):t.publishInnerWidth&&t.publishInnerWidth(e,n.width):!i.auto&&t.publishInnerWidth&&(s=t.waitForOuterWidthInDom?e.getDomProp("width"):e.getProp("width"),s===undefined?t.done=!1:t.publishInnerWidth(e,s)),n.gotHeight?r.shrinkWrap?t.publishOwnerHeight(e,n.contentHeight):t.publishInnerHeight&&t.publishInnerHeight(e,n.height):!r.auto&&t.publishInnerHeight&&(o=t.waitForOuterHeightInDom?e.getDomProp("height"):e.getProp("height"),o===undefined?t.done=!1:t.publishInnerHeight(e,o)),n.gotAll||(t.done=!1)},calculateOwnerHeightFromContentHeight:function(e,t){return t+e.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(e,t){return t+e.getFrameInfo().width},publishOwnerHeight:function(e,t){var n=this,r=n.owner,i=n.calculateOwnerHeightFromContentHeight(e,t),s,o,u;isNaN(i)?n.done=!1:(s=Ext.Number.constrain(i,r.minHeight,r.maxHeight),s==i?o=n.setHeightInDom:(u=n.sizeModels[s<i?"constrainedMax":"constrainedMin"],i=s,e.heightModel.calculatedFromShrinkWrap?e.heightModel=u:e.invalidate({heightModel:u})),e.setHeight(i,o))},publishOwnerWidth:function(e,t){var n=this,r=n.owner,i=n.calculateOwnerWidthFromContentWidth(e,t),s,o,u;isNaN(i)?n.done=!1:(s=Ext.Number.constrain(i,r.minWidth,r.maxWidth),s==i?o=n.setWidthInDom:(u=n.sizeModels[s<i?"constrainedMax":"constrainedMin"],i=s,e.widthModel.calculatedFromShrinkWrap?e.widthModel=u:e.invalidate({widthModel:u})),e.setWidth(i,o))}}),Ext.define("Ext.container.AbstractContainer",{extend:Ext.Component,mixins:{queryable:Ext.Queryable},renderTpl:"{%this.renderContainer(out,values)%}",suspendLayout:!1,autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,isContainer:!0,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",defaultLayoutType:"auto",ariaRole:"presentation",initComponent:function(){var e=this;e.addEvents("afterlayout","beforeadd","beforeremove","add","remove"),e.callParent(),e.getLayout(),e.initItems()},initItems:function(){var e=this,t=e.items;e.items=new Ext.util.AbstractMixedCollection(!1,e.getComponentId),e.floatingItems=new Ext.util.MixedCollection(!1,e.getComponentId),t&&(Ext.isArray(t)||(t=[t]),e.add(t))},getFocusEl:function(){return this.getTargetEl()},finishRenderChildren:function(){this.callParent();var e=this.getLayout();e&&e.finishRender()},beforeRender:function(){var e=this,t=e.getLayout(),n;e.callParent(),t.initialized||t.initLayout(),n=t.targetCls,n&&e.applyTargetCls(n)},applyTargetCls:function(e){this.addCls(e)},afterComponentLayout:function(){var e=this.floatingItems.items,t=e.length,n,r;this.callParent(arguments);for(n=0;n<t;n++)r=e[n],!r.rendered&&r.autoShow&&r.show()},onPosition:function(){this.callParent(arguments),this.repositionFloatingItems()},onResize:function(){this.callParent(arguments),this.repositionFloatingItems()},repositionFloatingItems:function(){var e=this.floatingItems.items,t=e.length,n,r;for(n=0;n<t;n++)r=e[n],r.el&&!r.hidden&&r.setPosition(r.x,r.y)},setupRenderTpl:function(e){this.callParent(arguments),this.getLayout().setupRenderTpl(e)},getDefaultContentTarget:function(){return this.el},getContentTarget:function(){return this.getLayout().getContentTarget()},setLayout:function(e){var t=this.layout;t&&t.isLayout&&t!=e&&t.setOwner(null),this.layout=e,e.setOwner(this)},getLayout:function(){var e=this;return(!e.layout||!e.layout.isLayout)&&e.setLayout(Ext.layout.Layout.create(e.layout,e.self.prototype.layout||e.defaultLayoutType)),e.layout},doLayout:function(){return this.updateLayout(),this},afterLayout:function(e){var t=this;++t.layoutCounter,t.hasListeners.afterlayout&&t.fireEvent("afterlayout",t,e)},prepareItems:function(e,t){Ext.isArray(e)?e=e.slice():e=[e];var n=this,r=0,i=e.length,s;for(;r<i;r++)s=e[r],s==null?(Ext.Array.erase(e,r,1),--r,--i):(t&&(s=this.applyDefaults(s)),s.isContained=n,e[r]=n.lookupComponent(s),delete s.isContained,delete e[r].isContained);return e},applyDefaults:function(e){var t=this.defaults;return t&&(Ext.isFunction(t)&&(t=t.call(this,e)),Ext.isString(e)&&(e=Ext.ComponentManager.get(e)),Ext.applyIf(e,t)),e},lookupComponent:function(e){return typeof e=="string"?Ext.ComponentManager.get(e):Ext.ComponentManager.create(e,this.defaultType)},getComponentId:function(e){return e.getItemId&&e.getItemId()},add:function(){var e=this,t=Ext.Array.slice(arguments),n=typeof t[0]=="number"?t.shift():-1,r=e.getLayout(),i,s,o,u,a,f,l,c=!1;t.length==1&&Ext.isArray(t[0])?(s=t[0],i=!0):s=t,e.rendered&&Ext.suspendLayouts(),l=s=e.prepareItems(s,!0),u=s.length,!i&&u==1&&(l=s[0]);for(o=0;o<u;o++)a=s[o],f=n<0?e.items.length:n+o,a.floating?(e.floatingItems.add(a),a.onAdded(e,f),e.hasListeners.add&&e.fireEvent("add",e,a,f)):(!e.hasListeners.beforeadd||e.fireEvent("beforeadd",e,a,f)!==!1)&&e.onBeforeAdd(a)!==!1&&(e.items.insert(f,a),a.onAdded(e,f),e.onAdd(a,f),r.onAdd(a,f),c=!0,e.hasListeners.add&&e.fireEvent("add",e,a,f));return c&&e.updateLayout(),e.rendered&&Ext.resumeLayouts(!0),l},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(e,t){var n;if(t&&t.isComponent){n=this.items.indexOf(t);if(n!==-1)return this.move(n,e)}return this.add(e,t)},move:function(e,t){var n=this.items,r;return e.isComponent&&(e=n.indexOf(e)),r=n.removeAt(e),r===!1?!1:(n.insert(t,r),this.onMove(r,e,t),this.updateLayout(),r)},onMove:Ext.emptyFn,onBeforeAdd:function(e){e.ownerCt&&e.ownerCt!==this&&e.ownerCt.remove(e,!1)},remove:function(e,t){var n=this,r=n.getComponent(e);return r&&(!n.hasListeners.beforeremove||n.fireEvent("beforeremove",n,r)!==!1)&&(n.doRemove(r,t),n.hasListeners.remove&&n.fireEvent("remove",n,r),!n.destroying&&!r.floating&&n.updateLayout()),r},doRemove:function(e,t){t=t===!0||t!==!1&&this.autoDestroy;var n=this,r=n.layout,i=r&&n.rendered,s=e.destroying||t,o=e.floating;o?n.floatingItems.remove(e):n.items.remove(e),i&&!o&&(r.running&&Ext.AbstractComponent.cancelLayout(e,s),r.onRemove(e,s)),e.onRemoved(s),n.onRemove(e,s),t?e.destroy():(i&&!o&&r.afterRemove(e),n.detachOnRemove&&e.rendered&&n.detachComponent(e))},detachComponent:function(e){Ext.getDetachedBody().appendChild(e.getEl())},removeAll:function(e){var t=this,n=t.items.items.slice().concat(t.floatingItems.items),r=[],i=0,s=n.length,o;t.suspendLayouts();for(;i<s;i++)o=n[i],t.remove(o,e),o.ownerCt!==t&&r.push(o);return t.resumeLayouts(!!s),r},getRefItems:function(e){var t=this,n=t.items.items,r=n.length,i=0,s,o=[];for(;i<r;i++)s=n[i],o[o.length]=s,e&&s.getRefItems&&o.push.apply(o,s.getRefItems(!0));n=t.floatingItems.items,r=n.length;for(i=0;i<r;i++)s=n[i],o[o.length]=s,e&&s.getRefItems&&o.push.apply(o,s.getRefItems(!0));return o},cascade:function(e,t,n){var r=this,i=r.items?r.items.items:[],s=i.length,o=0,u,a=n?n.concat(r):[r],f=a.length-1;if(e.apply(t||r,a)!==!1)for(;o<s;o++)u=i[o],u.cascade?u.cascade(e,t,n):(a[f]=u,e.apply(t||i,a));return this},isAncestor:function(e){while(e){if(e.ownerCt===this)return!0;e=e.ownerCt}},getComponent:function(e){Ext.isObject(e)&&(e=e.getItemId());var t=this.items.get(e);return!t&&typeof e!="number"&&(t=this.floatingItems.get(e)),t},contains:function(e,t){var n=!1;return t?(this.cascade(function(t){if(t.contains&&t.contains(e))return n=!0,!1}),n):this.items.contains(e)||this.floatingItems.contains(e)},nextChild:function(e,t){var n=this,r,i=n.items.indexOf(e);return i!==-1&&(r=t?Ext.ComponentQuery(t,n.items.items.slice(i+1)):n.items.getAt(i+1),!r&&n.ownerCt&&(r=n.ownerCt.nextChild(n,t))),r},prevChild:function(e,t){var n=this,r,i=n.items.indexOf(e);return i!==-1&&(r=t?Ext.ComponentQuery(t,n.items.items.slice(i+1)):n.items.getAt(i+1),!r&&n.ownerCt&&(r=n.ownerCt.nextChild(n,t))),r},enable:function(){this.callParent(arguments);var e=this.getChildItemsToDisable(),t=e.length,n,r;for(r=0;r<t;r++)n=e[r],n.resetDisable&&n.enable();return this},disable:function(){this.callParent(arguments);var e=this.getChildItemsToDisable(),t=e.length,n,r;for(r=0;r<t;r++)n=
e[r],n.resetDisable!==!1&&!n.disabled&&(n.disable(),n.resetDisable=!0);return this},getChildItemsToDisable:function(){return this.query("[isFormField],button")},beforeDestroy:function(){var e=this,t=e.items,n=e.floatingItems,r;if(t)while(r=t.first())e.doRemove(r,!0);if(n)while(r=n.first())e.doRemove(r,!0);Ext.destroy(e.layout),e.callParent()}}),Ext.define("Ext.container.Container",{extend:Ext.container.AbstractContainer,alias:"widget.container",alternateClassName:"Ext.Container",getChildByElement:function(e,t){var n,r,i=0,s=this.getRefItems(),o=s.length;e=Ext.getDom(e);for(;i<o;i++){n=s[i],r=n.getEl();if(r&&(r.dom===e||r.contains(e)))return t&&n.getChildByElement?n.getChildByElement(e,t):n}return null}}),Ext.define("Ext.layout.container.Editor",{alias:"layout.editor",extend:Ext.layout.container.Container,autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var t=this,n=t.owner.autoSize,r=n&&n.width,i=t.sizePolicies;return i=i[r]||i.$,r=n&&n.height,i=i[r]||i.$,i},calculate:function(e){var t=this,n=t.owner,r=n.autoSize,i,s;r===!0&&(r=t.autoSizeDefault),r&&(i=t.getDimension(n,r.width,"getWidth",n.width),s=t.getDimension(n,r.height,"getHeight",n.height)),e.childItems[0].setSize(i,s),e.setWidth(i),e.setHeight(s),e.setContentSize(i||n.field.getWidth(),s||n.field.getHeight())},getDimension:function(e,t,n,r){switch(t){case"boundEl":return e.boundEl[n]();case"field":return undefined;default:return r}}}),Ext.define("Ext.Editor",{extend:Ext.container.Container,alias:"widget.editor",layout:"editor",allowBlur:!0,revertInvalid:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,hidden:!0,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var e=this,t=e.field=Ext.ComponentManager.create(e.field,"textfield");t.inEditor=!0,t.msgTarget=t.msgTarget||"qtip",e.mon(t,{scope:e,blur:e.onFieldBlur,specialkey:e.onSpecialKey}),t.grow&&e.mon(t,"autosize",e.onFieldAutosize,e,{delay:1}),e.floating={constrain:e.constrain},e.items=t,e.callParent(arguments),e.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onFieldAutosize:function(){this.updateLayout()},afterRender:function(e,t){var n=this,r=n.field,i=r.inputEl;n.callParent(arguments),i&&(i.dom.name="",n.swallowKeys&&i.swallowEvent(["keypress","keydown"]))},onSpecialKey:function(e,t){var n=this,r=t.getKey(),i=n.completeOnEnter&&r==t.ENTER,s=n.cancelOnEsc&&r==t.ESC;if(i||s)t.stopEvent(),Ext.defer(function(){i?n.completeEdit():n.cancelEdit()},1);n.fireEvent("specialkey",n,e,t)},startEdit:function(e,t){var n=this,r=n.field;n.completeEdit(),n.boundEl=Ext.get(e),t=Ext.isDefined(t)?t:Ext.String.trim(n.boundEl.dom.innerText||n.boundEl.dom.innerHTML),n.rendered||(n.ownerCt&&(n.parentEl=n.ownerCt.el,n.parentEl.position()),n.render(n.parentEl||document.body)),n.fireEvent("beforestartedit",n,n.boundEl,t)!==!1&&(n.startValue=t,n.show(),r.suspendEvents(),r.reset(),r.setValue(t),r.resumeEvents(),n.realign(!0),r.focus([r.getRawValue().length]),r.autoSize&&r.autoSize(),n.editing=!0)},realign:function(e){var t=this;e===!0&&t.updateLayout(),t.alignTo(t.boundEl,t.alignment,t.offsets)},completeEdit:function(e){var t=this,n=t.field,r;if(!t.editing)return;n.assertValue&&n.assertValue(),r=t.getValue();if(!n.isValid()){t.revertInvalid!==!1&&t.cancelEdit(e);return}if(String(r)===String(t.startValue)&&t.ignoreNoChange){t.hideEdit(e);return}t.fireEvent("beforecomplete",t,r,t.startValue)!==!1&&(r=t.getValue(),t.updateEl&&t.boundEl&&t.boundEl.update(r),t.hideEdit(e),t.fireEvent("complete",t,r,t.startValue))},onShow:function(){var e=this;e.callParent(arguments),e.hideEl!==!1&&e.boundEl.hide(),e.fireEvent("startedit",e,e.boundEl,e.startValue)},cancelEdit:function(e){var t=this,n=t.startValue,r=t.field,i;t.editing&&(r&&(i=t.editedValue=t.getValue(),r.suspendEvents(),t.setValue(n),r.resumeEvents()),t.hideEdit(e),t.fireEvent("canceledit",t,i,n),delete t.editedValue)},hideEdit:function(e){e!==!0&&(this.editing=!1,this.hide())},onFieldBlur:function(e,t){var n=this,r=Ext.Element.getActiveElement();n.allowBlur===!0&&n.editing&&n.selectSameEditor!==!0&&n.completeEdit(),(Ext.fly(r).isFocusable()||r.getAttribute("tabIndex"))&&r.focus()},onHide:function(){var e=this,t=e.field;if(e.editing){e.completeEdit();return}t.hasFocus&&t.triggerBlur&&t.triggerBlur(),t.collapse&&t.collapse(),e.hideEl!==!1&&e.boundEl.show(),e.callParent(arguments)},setValue:function(e){this.field.setValue(e)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var e=this;Ext.destroy(e.field),delete e.field,delete e.parentEl,delete e.boundEl,e.callParent(arguments)}}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(e){var t=this;if(arguments.length!==1||typeof e=="string"||e.dom||e.tagName||e===document||e.isComponent){t.legacyConstructor.apply(t,arguments);return}Ext.apply(t,e),t.bindings=[],t.target.isComponent||(t.target=Ext.get(t.target)),t.binding?t.addBinding(t.binding):e.key&&t.addBinding(e),t.enable()},legacyConstructor:function(e,t,n){var r=this;Ext.apply(r,{target:Ext.get(e),eventName:n||r.eventName,bindings:[]}),t&&r.addBinding(t),r.enable()},addBinding:function(e){var t=this,n=e.key,r,i;t.processing&&(t.bindings=bindings.slice(0));if(Ext.isArray(e)){for(r=0,i=e.length;r<i;r++)t.addBinding(e[r]);return}t.bindings.push(Ext.apply({keyCode:t.processKeys(n)},e))},removeBinding:function(e){var t=this,n=t.bindings,r=n.length,i,s,o;t.processing&&(t.bindings=n.slice(0)),o=t.processKeys(e.key);for(i=0;i<r;++i){s=n[i];if(s.fn===e.fn&&s.scope===e.scope&&e.alt==s.alt&&e.crtl==s.crtl&&e.shift==s.shift&&Ext.Array.equals(s.keyCode,o)){Ext.Array.erase(t.bindings,i,1);return}}},processKeys:function(e){var t=!1,n,r,i,s,o;if(Ext.isString(e)){r=[],i=e.toUpperCase();for(o=0,s=i.length;o<s;++o)r.push(i.charCodeAt(o));e=r,t=!0}Ext.isArray(e)||(e=[e]);if(!t)for(o=0,s=e.length;o<s;++o)n=e[o],Ext.isString(n)&&(e[o]=n.toUpperCase().charCodeAt(0));return e},handleTargetEvent:function(){var e=/input|textarea/i;return function(t){var n=this,r,i,s,o,u;if(n.enabled){r=n.bindings,i=0,s=r.length,t=n.processEvent.apply(n||n.processEventScope,arguments);if(n.ignoreInputFields){o=t.target,u=o.contentEditable;if(e.test(o.tagName)||u===""||u==="true")return}if(!t.getKey)return t;n.processing=!0;for(;i<s;++i)n.processBinding(r[i],t);n.processing=!1}}}(),processEvent:Ext.identityFn,processBinding:function(e,t){if(this.checkModifiers(e,t)){var n=t.getKey(),r=e.fn||e.handler,i=e.scope||this,s=e.keyCode,o=e.defaultEventAction,u,a,f=new Ext.EventObjectImpl(t);for(u=0,a=s.length;u<a;++u)if(n===s[u]){r.call(i,n,t)!==!0&&o&&f[o]();break}}},checkModifiers:function(e,t){var n=["shift","ctrl","alt"],r=0,i=n.length,s,o;for(;r<i;++r){o=n[r],s=e[o];if(s!==undefined&&s!==t[o+"Key"])return!1}return!0},on:function(e,t,n){var r,i,s,o;Ext.isObject(e)&&!Ext.isArray(e)?(r=e.key,i=e.shift,s=e.ctrl,o=e.alt):r=e,this.addBinding({key:r,shift:i,ctrl:s,alt:o,fn:t,scope:n})},un:function(e,t,n){var r,i,s,o;Ext.isObject(e)&&!Ext.isArray(e)?(r=e.key,i=e.shift,s=e.ctrl,o=e.alt):r=e,this.removeBinding({key:r,shift:i,ctrl:s,alt:o,fn:t,scope:n})},isEnabled:function(){return this.enabled},enable:function(){var e=this;e.enabled||(e.target.on(e.eventName,e.handleTargetEvent,e),e.enabled=!0)},disable:function(){var e=this;e.enabled&&(e.target.removeListener(e.eventName,e.handleTargetEvent,e),e.enabled=!1)},setDisabled:function(e){e?this.disable():this.enable()},destroy:function(e){var t=this,n=t.target;t.bindings=[],t.disable(),e===!0&&(n.isComponent?n.destroy():n.remove()),delete t.target}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(e){var t=this;if(arguments.length===2){t.legacyConstructor.apply(t,arguments);return}t.setConfig(e)},legacyConstructor:function(e,t){this.setConfig(Ext.apply({target:e},t))},setConfig:function(e){var t=this,n={target:e.target,ignoreInputFields:e.ignoreInputFields,eventName:t.getKeyEvent("forceKeyDown"in e?e.forceKeyDown:t.forceKeyDown,e.eventName)},r,i,s,o,u;t.map&&t.map.destroy(),e.processEvent&&(n.processEvent=e.processEvent,n.processEventScope=e.processEventScope||t),e.keyMap?r=t.map=e.keyMap:(r=t.map=new Ext.util.KeyMap(n),t.destroyKeyMap=!0),i=Ext.util.KeyNav.keyOptions,s=e.scope||t;for(o in i)i.hasOwnProperty(o)&&(u=e[o])&&(typeof u=="function"&&(u={handler:u,defaultEventAction:e.defaultEventAction!==undefined?e.defaultEventAction:t.defaultEventAction}),r.addBinding({key:i[o],handler:Ext.Function.bind(t.handleEvent,u.scope||s,u.handler||u.fn,!0),defaultEventAction:u.defaultEventAction!==undefined?u.defaultEventAction:t.defaultEventAction}));r.disable(),e.disabled||r.enable()},handleEvent:function(e,t,n){return n.call(this,t)},disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,eventName:"keypress",destroy:function(e){this.destroyKeyMap&&this.map.destroy(e),delete this.map},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(e){this.map.setDisabled(e),this.disabled=e},getKeyEvent:function(e,t){return e||Ext.EventManager.useKeyDown&&!t?"keydown":t||this.eventName}}),Ext.define("Ext.FocusManager",{singleton:!0,alternateClassName:["Ext.FocusMgr"],mixins:{observable:Ext.util.Observable},enabled:!1,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],constructor:function(e){var t=this,n=Ext.ComponentQuery;t.mixins.observable.constructor.call(t,e),t.addEvents("beforecomponentfocus","componentfocus","disable","enable"),t.focusTask=new Ext.util.DelayedTask(t.handleComponentFocus,t),Ext.override(Ext.AbstractComponent,{onFocus:function(){this.callParent(arguments),t.enabled&&this.hasFocus&&(Array.prototype.unshift.call(arguments,this),t.onComponentFocus.apply(t,arguments))},onBlur:function(){this.callParent(arguments),t.enabled&&!this.hasFocus&&(Array.prototype.unshift.call(arguments,this),t.onComponentBlur.apply(t,arguments))},onDestroy:function(){this.callParent(arguments),t.enabled&&(Array.prototype.unshift.call(arguments,this),t.onComponentDestroy.apply(t,arguments))}}),Ext.override(Ext.Component,{afterHide:function(){this.callParent(arguments),t.enabled&&(Array.prototype.unshift.call(arguments,this),t.onComponentHide.apply(t,arguments))}}),t.keyNav=new Ext.util.KeyNav(Ext.getDoc(),{disabled:!0,scope:t,backspace:t.focusLast,enter:t.navigateIn,esc:t.navigateOut,tab:t.navigateSiblings,space:t.navigateIn,del:t.focusLast,left:t.navigateSiblings,right:t.navigateSiblings,down:t.navigateSiblings,up:t.navigateSiblings}),t.focusData={},t.subscribers=new Ext.util.HashMap,t.focusChain={},Ext.apply(n.pseudos,{nextFocus:function(e,t,n){n=n||1,t=parseInt(t,10);var r=e.length,i=t,s;for(;;){(i+=n)>=r?i=0:i<0&&(i=r-1);if(i===t)return[];if((s=e[i]).isFocusable())return[s]}return[]},prevFocus:function(e,t){return this.nextFocus(e,t,-1)},root:function(e){var t=e.length,n=[],r=0,i;for(;r<t;r++)i=e[r],i.ownerCt||n.push(i);return n}})},addXTypeToWhitelist:function(e){var t=this;if(Ext.isArray(e)){Ext.Array.forEach(e,t.addXTypeToWhitelist,t);return}Ext.Array.contains(t.whitelist,e)||t.whitelist.push(e)},clearComponent:function(e){clearTimeout(this.cmpFocusDelay),e.isDestroyed||e.blur()},disable:function(){var e=this;if(!e.enabled)return;delete e.options,e.enabled=!1,e.removeDOM(),e.keyNav.disable(),e.fireEvent("disable",e)},enable:function(e){var t=this;e===!0&&(e={focusFrame:!0}),t.options=e=e||{};if(t.enabled)return;t.enabled=!0,t.initDOM(e),t.keyNav.enable(),t.focusEl.focus(),delete t.focusedCmp,t.fireEvent("enable",t)},focusLast:function(e){var t=this;if(t.isWhitelisted(t.focusedCmp))return!0;t.previousFocusedCmp&&t.previousFocusedCmp.focus()},getRootComponents:function(){var e=Ext.ComponentQuery,t=e.query(":focusable:root:not([floating])"),n=e.query(":focusable:root[floating]");return n.sort(function(e,t){return e.el.getZIndex()>t.el.getZIndex()}),n.concat(t)},initDOM:function(e){var t=this,n=t.focusFrameCls,r=Ext.ComponentQuery.query("{getFocusEl()}:not([focusListenerAdded])"),i=0,s=r.length;if(!Ext.isReady)return Ext.onReady(t.initDOM,t);for(;i<s;i++)r[i].addFocusListener();t.focusEl||(t.focusEl=Ext.getBody(),t.focusEl.dom.tabIndex=-1),!t.focusFrame&&e.focusFrame&&(t.focusFrame=Ext.getBody().createChild({cls:n,children:[{cls:n+"-top"},{cls:n+"-bottom"},{cls:n+"-left"},{cls:n+"-right"}],style:"top: -100px; left: -100px;"}),t.focusFrame.setVisibilityMode(Ext.Element.DISPLAY),t.focusFrame.hide().setLocalXY(0,0))},isWhitelisted:function(e){return e&&Ext.Array.some(this.whitelist,function(t){return e.isXType(t)})},navigateIn:function(e){var t=this,n=t.focusedCmp,r,i;if(t.isWhitelisted(n))return!0;n?(i=n.hasFocus?Ext.ComponentQuery.query(">:focusable",n)[0]:n,i?i.focus():Ext.isFunction(n.onClick)&&(e.button=0,n.onClick(e),n.isVisible(!0)?n.focus():t.navigateOut())):(r=t.getRootComponents()[0],r&&(r.getFocusEl()===t.focusEl&&t.focusEl.blur(),r.focus()))},navigateOut:function(e){var t=this,n;return!t.focusedCmp||!(n=t.focusedCmp.up(":focusable"))?t.focusEl.focus():n.focus(),!0},navigateSiblings:function(e,t,n){var r=this,i=t||r,s=e.getKey(),o=Ext.EventObject,u=e.shiftKey||s==o.LEFT||s==o.UP,a=s==o.LEFT||s==o.RIGHT||s==o.UP||s==o.DOWN,f=u?"prev":"next",l,c,h,p;h=i.focusedCmp&&i.focusedCmp.comp||i.focusedCmp;if(!h&&!n)return!0;if(a&&r.isWhitelisted(h))return!0;!h||h.is(":root")?p=r.getRootComponents():(n=n||h.up(),n&&(p=n.getRefItems()));if(p){l=h?Ext.Array.indexOf(p,h):-1,c=Ext.ComponentQuery.query(":"+f+"Focus("+l+")",p)[0];if(c&&h!==c)return c.focus(),c}},onComponentBlur:function(e,t){var n=this;n.focusedCmp===e&&(n.previousFocusedCmp=e,delete n.focusedCmp),n.focusFrame&&n.focusFrame.hide()},onComponentFocus:function(e,t){var n=this,r=n.focusChain,i;if(!e.isFocusable()){n.clearComponent(e);if(r[e.id])return;i=e.up(),i&&(r[e.id]=!0,i.focus());return}n.focusChain={},n.focusTask.delay(10,null,null,[e,e.getFocusEl()])},handleComponentFocus:function(e,t){var n=this,r,i,s,o,u,a,f,l,c,h,p;if(n.fireEvent("beforecomponentfocus",n,e,n.previousFocusedCmp)===!1){n.clearComponent(e);return}n.focusedCmp=e,n.shouldShowFocusFrame(e)&&(r="."+n.focusFrameCls+"-",i=n.focusFrame,s=(t.dom?t:t.el).getBox(),o=s.top,u=s.left,a=s.width,f=s.height,l=i.child(r+"top"),c=i.child(r+"bottom"),h=i.child(r+"left"),p=i.child(r+"right"),l.setWidth(a).setLocalXY(u,o),c.setWidth(a).setLocalXY(u,o+f-2),h.setHeight(f-2).setLocalXY(u,o+2),p.setHeight(f-2).setLocalXY(u+a-2,o+2),i.show()),n.fireEvent("componentfocus",n,e,n.previousFocusedCmp)},onComponentHide:function(e){var t=this,n=!1,r=t.focusedCmp,i;r&&(n=e.hasFocus||e.isContainer&&e.isAncestor(t.focusedCmp)),t.clearComponent(e),n&&(i=e.up(":focusable"))?i.focus():t.focusEl.focus()},onComponentDestroy:function(){},removeDOM:function(){var e=this;if(e.enabled||e.subscribers.length)return;Ext.destroy(e.focusFrame),delete e.focusEl,delete e.focusFrame},removeXTypeFromWhitelist:function(e){var t=this;if(Ext.isArray(e)){Ext.Array.forEach(e,t.removeXTypeFromWhitelist,t);return}Ext.Array.remove(t.whitelist,e)},setupSubscriberKeys:function(e,t){var n=this,r=e.getFocusEl(),i=t.scope,s={backspace:n.focusLast,enter:n.navigateIn,esc:n.navigateOut,scope:n},o=function(t){return n.focusedCmp===e?n.navigateSiblings(t,n,e):n.navigateSiblings(t)};return Ext.iterate(t,function(t,n){s[t]=function(t){var r=o(t);return Ext.isFunction(n)&&n.call(i||e,t,r)===!0?!0:r}},n),new Ext.util.KeyNav(r,s)},shouldShowFocusFrame:function(e){var t=this,n=t.options||{};return!t.focusFrame||!e?!1:n.focusFrame?!0:t.focusData[e.id].focusFrame?!0:!1}}),Ext.define("Ext.Img",{extend:Ext.Component,alias:["widget.image","widget.imagecomponent"],autoEl:"img",baseCls:Ext.baseCSSPrefix+"img",src:"",alt:"",title:"",imgCls:"",ariaRole:"img",initComponent:function(){this.glyph&&(this.autoEl="div"),this.callParent()},getElConfig:function(){var e=this,t=e.autoEl,n=e.callParent(),r=Ext._glyphFontFamily,i=e.glyph,s,o;return t==="img"||Ext.isObject(t)&&t.tag==="img"?s=n:e.glyph?(typeof i=="string"&&(o=i.split("@"),i=o[0],r=o[1]),n.html="&#"+i+";",r&&(n.style="font-family:"+r)):n.cn=[s={tag:"img",role:e.ariaRole,id:e.id+"-img"}],s&&(e.imgCls&&(s.cls=(s.cls?s.cls+" ":"")+e.imgCls),s.src=e.src||Ext.BLANK_IMAGE_URL),e.alt&&((s||n).alt=e.alt),e.title&&((s||n).title=e.title),n},onRender:function(){var e=this,t=e.autoEl,n;e.callParent(arguments),n=e.el,t==="img"||Ext.isObject(t)&&t.tag==="img"?e.imgEl=n:e.imgEl=n.getById(e.id+"-img")},onDestroy:function(){Ext.destroy(this.imgEl),this.imgEl=null,this.callParent()},setSrc:function(e){var t=this,n=t.imgEl;t.src=e,n&&(n.dom.src=e||Ext.BLANK_IMAGE_URL)},setGlyph:function(e){var t=this,n=Ext._glyphFontFamily,r,i;e!=t.glyph&&(typeof e=="string"&&(r=e.split("@"),e=r[0],n=r[1]),i=t.el.dom,i.innerHTML="&#"+e+";",n&&(i.style="font-family:"+n))}}),Ext.define("Ext.util.Bindable",{bindStore:function(e,t,n){n=n||"store";var r=this,i=r[n];return!t&&i&&(r.onUnbindStore(i,t,n),e!==i&&i.autoDestroy?i.destroyStore():r.unbindStoreListeners(i)),e&&(e=Ext.data.StoreManager.lookup(e),r.bindStoreListeners(e),r.onBindStore(e,t,n)),r[n]=e||null,r},getStore:function(){return this.store},unbindStoreListeners:function(e){var t=this.storeListeners;t&&e.un(t)},bindStoreListeners:function(e){var t=this,n=Ext.apply({},t.getStoreListeners(e));n.scope||(n.scope=t),t.storeListeners=n,e.on(n)},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn}),Ext.define("Ext.LoadMask",{extend:Ext.Component,alias:"widget.loadmask",mixins:{floating:Ext.util.Floating,bindable:Ext.util.Bindable},msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",maskCls:Ext.baseCSSPrefix+"mask",useMsg:!0,useTargetEl:!1,baseCls:Ext.baseCSSPrefix+"mask-msg",ariaRole:"presentation",childEls:["msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgEl" role="{role}"','<tpl if="ariaAttr"> {ariaAttr}</tpl>',' class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner{childElCls}">','<div id="{id}-msgTextEl" class="',Ext.baseCSSPrefix,"mask-msg-text",'{childElCls}"></div>',"</div>"],floating:{shadow:"frame"},focusOnToFront:!1,bringParentToFront:!1,constructor:function(e){var t=this,n;arguments.length===2?(n=e,e=arguments[1]):n=e.target,n.isComponent||(n=Ext.get(n),this.isElement=!0),t.ownerCt=n,this.isElement||t.bindComponent(n),t.callParent([e]),t.store&&t.bindStore(t.store,!0)},bindComponent:function(e){var t=this,n={scope:this,resize:t.sizeMask,added:t.onComponentAdded,removed:t.onComponentRemoved};e.floating?(n.move=t.sizeMask,t.activeOwner=e):e.ownerCt?t.onComponentAdded(e.ownerCt):t.preventBringToFront=!0,t.mon(e,n),t.mon(t.hierarchyEventSource,{show:t.onContainerShow,hide:t.onContainerHide,expand:t.onContainerExpand,collapse:t.onContainerCollapse,scope:t})},onComponentAdded:function(e){var t=this;delete t.activeOwner,t.floatParent=e,e.floating||(e=e.up("[floating]")),e?(t.activeOwner=e,t.mon(e,"move",t.sizeMask,t)):t.preventBringToFront=!0,e=t.floatParent.ownerCt,t.rendered&&t.isVisible()&&e&&(t.floatOwner=e,t.mon(e,"afterlayout",t.sizeMask,t,{single:!0}))},onComponentRemoved:function(e){var t=this,n=t.activeOwner,r=t.floatOwner;n&&t.mun(n,"move",t.sizeMask,t),r&&t.mun(r,"afterlayout",t.sizeMask,t),delete t.activeOwner,delete t.floatOwner},afterRender:function(){this.callParent(arguments),this.container=this.floatParent.getContentTarget()},onContainerShow:function(e){this.isActiveContainer(e)&&this.onComponentShow()},onContainerHide:function(e){this.isActiveContainer(e)&&this.onComponentHide()},onContainerExpand:function(e){this.isActiveContainer(e)&&this.onComponentShow()},onContainerCollapse:function(e){this.isActiveContainer(e)&&this.onComponentHide()},isActiveContainer:function(e){return this.isDescendantOf(e)},onComponentHide:function(){var e=this;e.rendered&&e.isVisible()&&(e.hide(),e.showNext=!0)},onComponentShow:function(){this.showNext&&this.show(),delete this.showNext},sizeMask:function(){var e=this,t;e.rendered&&e.isVisible()&&(e.center(),t=e.getMaskTarget(),e.getMaskEl().show().setSize(t.getSize()).alignTo(t,"tl-tl"))},bindStore:function(e,t){var n=this;n.mixins.bindable.bindStore.apply(n,arguments),e=n.store,e&&e.isLoading()&&n.onBeforeLoad()},getStoreListeners:function(e){var t=this.onLoad,n=this.onBeforeLoad,r={cachemiss:n,cachefilled:t};return e.proxy.isSynchronous||(r.beforeLoad=n,r.load=t),r},onDisable:function(){this.callParent(arguments),this.loading&&this.onLoad()},getOwner:function(){return this.ownerCt||this.floatParent},getMaskTarget:function(){var e=this.getOwner();return this.useTargetEl?e.getTargetEl():e.getEl()},onBeforeLoad:function(){var e=this,t=e.getOwner(),n;e.disabled||(e.loading=!0,t.componentLayoutCounter?e.maybeShow():(n=t.afterComponentLayout,t.afterComponentLayout=function(){t.afterComponentLayout=n,n.apply(t,arguments),e.maybeShow()}))},maybeShow:function(){var e=this,t=e.getOwner();t.isVisible(!0)?e.loading&&t.rendered&&e.show():e.showNext=!0},getMaskEl:function(){var e=this;return e.maskEl||(e.maskEl=e.el.insertSibling({role:"presentation",cls:e.maskCls,style:{zIndex:e.el.getStyle("zIndex")-2}},"before"))},onShow:function(){var e=this,t=e.msgEl;e.callParent(arguments),e.loading=!0,e.useMsg?(t.show(),e.msgTextEl.update(e.msg)):t.parent().hide()},hide:function(){if(this.isElement){this.ownerCt.unmask(),this.fireEvent("hide",this);return}return delete this.showNext,this.callParent(arguments)},onHide:function(){this.callParent(),this.getMaskEl().hide()},show:function(){if(this.isElement){this.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),this.fireEvent("show",this);return}return this.callParent(arguments)},afterShow:function(){this.callParent(arguments),this.sizeMask()},setZIndex:function(e){var t=this,n=t.activeOwner;return n&&(e=parseInt(n.el.getStyle("zIndex"),10)+1),t.getMaskEl().setStyle("zIndex",e-1),t.mixins.floating.setZIndex.apply(t,arguments)},onLoad:function(){this.loading=!1,this.hide()},onDestroy:function(){var e=this;e.isElement&&e.ownerCt.unmask(),Ext.destroy(e.maskEl),e.callParent()}}),Ext.define("Ext.data.association.Association",{alternateClassName:"Ext.data.Association",primaryKey:"id",associationKeyFunction:null,defaultReaderType:"json",isAssociation:!0,initialConfig:null,statics:{AUTO_ID:1e3,create:function(e){Ext.isString(e)&&(e={type:e});switch(e.type){case"belongsTo":return new Ext.data.association.BelongsTo(e);case"hasMany":return new Ext.data.association.HasMany(e);case"hasOne":return new Ext.data.association.HasOne(e);default:}return e}},constructor:function(e){Ext.apply(this,e);var t=this,n=Ext.ModelManager.types,r=e.ownerModel,i=e.associatedModel,s=n[r],o=n[i],u=e.associationKey,a;u&&(a=String(u).search(/[\[\.]/),a>=0&&(t.associationKeyFunction=Ext.functionFactory("obj","return obj"+(a>0?".":"")+u))),t.initialConfig=e,t.ownerModel=s,t.associatedModel=o,Ext.applyIf(t,{ownerName:r,associatedName:i}),t.associationId="association"+ ++t.statics().AUTO_ID},getReader:function(){var e=this,t=e.reader,n=e.associatedModel;return t&&(Ext.isString(t)&&(t={type:t}),t.isReader?t.setModel(n):Ext.applyIf(t,{model:n,type:e.defaultReaderType}),e.reader=Ext.createByAlias("reader."+t.type,t)),e.reader||null}}),Ext.define("Ext.ModelManager",{extend:Ext.AbstractManager,alternateClassName:"Ext.ModelMgr",singleton:!0,typeName:"mtype",associationStack:[],registerType:function(e,t){var n=t.prototype,r;return n&&n.isModel?r=t:(t.extend||(t.extend="Ext.data.Model"),r=Ext.define(e,t)),this.types[e]=r,r},unregisterType:function(e){delete this.types[e]},onModelDefined:function(e){var t=this.associationStack,n=t.length,r=[],i,s,o;for(s=0;s<n;s++)i=t[s],i.associatedModel==e.modelName&&r.push(i);for(s=0,n=r.length;s<n;s++)o=r[s],this.types[o.ownerModel].prototype.associations.add(Ext.data.association.Association.create(o)),Ext.Array.remove(t,o)},registerDeferredAssociation:function(e){this.associationStack.push(e)},getModel:function(e){var t=e;return typeof t=="string"&&(t=this.types[t]),t},create:function(e,t,n){var r=typeof t=="function"?t:this.types[t||e.name];return new r(e,n)}},function(){Ext.regModel=function(){return this.ModelManager.registerType.apply(this.ModelManager,arguments)}}),Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:Ext.layout.component.Auto,type:"progressbar",beginLayout:function(e){var t=this,n,r;t.callParent(arguments);if(!e.textEls){r=t.owner.textEl;if(r.isComposite){e.textEls=[],r=r.elements;for(n=r.length;n--;)e.textEls[n]=e.getEl(Ext.get(r[n]))}else e.textEls=[e.getEl("textEl")]}},calculate:function(e){var t=this,n,r,i;t.callParent(arguments);if(Ext.isNumber(i=e.getProp("width"))){i-=e.getBorderInfo().width,r=e.textEls;for(n=r.length;n--;)r[n].setWidth(i)}else t.done=!1}}),Ext.define("Ext.ProgressBar",{extend:Ext.Component,alias:"widget.progressbar",baseCls:Ext.baseCSSPrefix+"progress",animate:!1,text:"",waitTimer:null,childEls:["bar"],renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initComponent:function(){this.callParent(),this.addEvents("update")},initRenderData:function(){var e=this;return Ext.apply(e.callParent(),{internalText:!e.hasOwnProperty("textEl"),text:e.text||"&#160;",percentage:e.value?e.value*100:0})},onRender:function(){var e=this;e.callParent(arguments),e.textEl?(e.textEl=Ext.get(e.textEl),e.updateText(e.text)):e.textEl=e.el.select("."+e.baseCls+"-text")},updateProgress:function(e,t,n){var r=this,i=r.value;return r.value=e||0,t&&r.updateText(t),r.rendered&&!r.isDestroyed&&(n===!0||n!==!1&&r.animate?(r.bar.stopAnimation(),r.bar.animate(Ext.apply({from:{width:i*100+"%"},to:{width:r.value*100+"%"}},r.animate))):r.bar.setStyle("width",r.value*100+"%")),r.fireEvent("update",r,r.value,t),r},updateText:function(e){var t=this;return t.text=e,t.rendered&&t.textEl.update(t.text),t},applyText:function(e){this.updateText(e)},getText:function(){return this.text},wait:function(e){var t=this,n;return t.waitTimer||(n=t,e=e||{},t.updateText(e.text),t.waitTimer=Ext.TaskManager.start({run:function(n){var r=e.increment||10;n-=1,t.updateProgress(((n+r)%r+1)*(100/r)*.01,null,e.animate)},interval:e.interval||1e3,duration:e.duration,onStop:function(){e.fn&&e.fn.apply(e.scope||t),t.reset()},scope:n})),t},isWaiting:function(){return this.waitTimer!==null},reset:function(e){var t=this;return t.updateProgress(0),t.clearTimer(),e===!0&&t.hide(),t},clearTimer:function(){var e=this;e.waitTimer&&(e.waitTimer.onStop=null,Ext.TaskManager.stop(e.waitTimer),e.waitTimer=null)},onDestroy:function(){var e=this,t=e.bar;e.clearTimer(),e.rendered&&(e.textEl.isComposite&&e.textEl.clear(),Ext.destroyMembers(e,"textEl","progressBar"),t&&e.animate&&t.stopAnimation()),e.callParent()}}),Ext.define("Ext.ShadowPool",{singleton:!0,markup:function(){return Ext.String.format('<div class="{0}{1}-shadow" role="presentation"></div>',Ext.baseCSSPrefix,Ext.isIE&&!Ext.supports.CSS3BoxShadow?"ie":"css")}(),shadows:[],pull:function(){var e=this.shadows.shift();return e||(e=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,this.markup)),e.autoBoxAdjust=!1),e},push:function(e){this.shadows.push(e)},reset:function(){var e=[].concat(this.shadows),t,n=e.length;for(t=0;t<n;t++)e[t].remove();this.shadows=[]}}),Ext.define("Ext.Shadow",{localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(e){var t=this,n,r,i;Ext.apply(t,e),Ext.isString(t.mode)||(t.mode=t.defaultMode),r=t.offset,i=Math.floor(r/2),t.opacity=50;switch(t.mode.toLowerCase()){case"drop":Ext.supports.CSS3BoxShadow?n={t:r,l:r,h:-r,w:-r}:n={t:-i,l:-i,h:-i,w:-i};break;case"sides":Ext.supports.CSS3BoxShadow?n={t:r,l:0,h:-r,w:0}:n={t:-(1+i),l:1+i-2*r,h:-1,w:i-1};break;case"frame":Ext.supports.CSS3BoxShadow?n={t:0,l:0,h:0,w:0}:n={t:1+i-2*r,l:1+i-2*r,h:r-i-1,w:r-i-1};break;case"bottom":Ext.supports.CSS3BoxShadow?n={t:r,l:0,h:-r,w:0}:n={t:r,l:0,h:0,w:0}}t.adjusts=n},getShadowSize:function(){var e=this,t=e.el?e.offset:0,n=[t,t,t,t],r=e.mode.toLowerCase();return e.el&&r!=="frame"&&(n[0]=0,r=="drop"&&(n[3]=0)),n},offset:4,defaultMode:"drop",boxShadowProperty:function(){var e="boxShadow",t=document.documentElement.style;return"boxShadow"in t||("WebkitBoxShadow"in t?e="WebkitBoxShadow":"MozBoxShadow"in t&&(e="MozBoxShadow")),e}(),show:function(e){var t=this,n,r;e=Ext.get(e),n=parseInt(e.getStyle("z-index"),10)-1||0,r=e[t.localXYNames.get](),t.el||(t.el=Ext.ShadowPool.pull(),t.fixed?t.el.dom.style.position="fixed":t.el.dom.style.position="",t.el.dom.nextSibling!=e.dom&&t.el.insertBefore(e)),t.el.setStyle("z-index",t.zIndex||n),Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(t.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+t.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+t.offset+")"),t.realign(r[0],r[1],e.dom.offsetWidth,e.dom.offsetHeight),t.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(e,t,n,r){if(!this.el)return;var i=this.adjusts,s=this.el,o=s.dom.style,u,a,f,l;s[this.localXYNames.set](e+i.l,t+i.t),u=Math.max(n+i.w,0),a=Math.max(r+i.h,0),f=u+"px",l=a+"px";if(o.width!=f||o.height!=l)o.width=f,o.height=l,Ext.supports.CSS3BoxShadow&&(o[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888")},hide:function(){var e=this;e.el&&(e.el.dom.style.display="none",Ext.ShadowPool.push(e.el),delete e.el)},setZIndex:function(e){this.zIndex=e,this.el&&this.el.setStyle("z-index",e)},setOpacity:function(e){this.el&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(e=Math.floor(e*100/2)/100),this.opacity=e,this.el.setOpacity(e))}}),Ext.define("Ext.app.EventDomain",{statics:{instances:{}},isEventDomain:!0,constructor:function(){var e=this;Ext.app.EventDomain.instances[e.type]=e,e.bus={},e.monitoredClasses=[]},dispatch:function(e,t,n){var r=this,i=r.bus,s=i[t],o,u,a,f,l,c,h;if(!s)return!0;for(o in s)if(s.hasOwnProperty(o)&&r.match(e,o)){u=s[o];for(a in u)if(u.hasOwnProperty(a)){f=u[a];for(c=0,h=f.length;c<h;c++){l=f[c];if(l.fire.apply(l,n)===!1)return!1}}}return!0},listen:function(e,t){var n=this,r=n.bus,i=n.idProperty,s=n.monitoredClasses,o=s.length,u,a,f,l,c,h,p,d,v,m;for(l in e)if(e.hasOwnProperty(l)&&(v=e[l])){i&&(l=l==="*"?l:l.substring(1));for(m in v)if(v.hasOwnProperty(m)){c=null,h=v[m],p=t,d=new Ext.util.Event(t,m),Ext.isObject(h)&&(c=h,h=c.fn,p=c.scope||t,delete c.fn,delete c.scope),typeof h=="string"&&(h=p[h]),d.addListener(h,p,c);for(u=o;u-->0;)s[u].hasListeners._incr_(m);a=r[m]||(r[m]={}),a=a[l]||(a[l]={}),f=a[t.id]||(a[t.id]=[]),f.push(d)}}},match:function(e,t){var n=this.idProperty;return n?t==="*"||e[n]===t:!1},monitor:function(e){var t=this,n=e.isInstance?e:e.prototype,r=n.fireEventArgs;t.monitoredClasses.push(e),n.fireEventArgs=function(e,n){var i=r.apply(this,arguments);return i!==!1&&(i=t.dispatch(this,e,n)),i}},unlisten:function(e){var t=this.bus,n,r,i,s;for(r in t)if(t.hasOwnProperty(r)&&(s=t[r]))for(i in s)n=s[i],delete n[e]}}),Ext.define("Ext.app.domain.Component",{extend:Ext.app.EventDomain,singleton:!0,type:"component",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.Component)},match:function(e,t){return e.is(t)}}),Ext.define("Ext.app.EventBus",{singleton:!0,constructor:function(){var e=this,t=Ext.app.EventDomain.instances;e.callParent(),e.domains=t,e.bus=t.component.bus},control:function(e,t){return this.domains.component.listen(e,t)},listen:function(e,t){var n=this.domains,r;for(r in e)e.hasOwnProperty(r)&&n[r].listen(e[r],t)},unlisten:function(e){var t=Ext.app.EventDomain.instances,n;for(n in t)t[n].unlisten(e)}}),Ext.define("Ext.data.StoreManager",{extend:Ext.util.MixedCollection,alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,register:function(){for(var e=0,t;t=arguments[e];e++)this.add(t)},unregister:function(){for(var e=0,t;t=arguments[e];e++)this.remove(this.lookup(t))},lookup:function(e){if(Ext.isArray(e)){var t=["field1"],n=!Ext.isArray(e[0]),r=e,i,s;if(n){r=[];for(i=0,s=e.length;i<s;++i)r.push([e[i]])}else for(i=2,s=e[0].length;i<=s;++i)t.push("field"+i);return new Ext.data.ArrayStore({data:r,fields:t,autoDestroy:!0,autoCreated
:!0,expanded:n})}return Ext.isString(e)?this.get(e):Ext.data.AbstractStore.create(e)},getKey:function(e){return e.storeId}},function(){Ext.regStore=function(e,t){var n;return Ext.isObject(e)?t=e:t.storeId=e,t instanceof Ext.data.Store?n=t:n=new Ext.data.Store(t),Ext.data.StoreManager.register(n)},Ext.getStore=function(e){return Ext.data.StoreManager.lookup(e)}}),Ext.define("Ext.app.domain.Global",{extend:Ext.app.EventDomain,singleton:!0,type:"global",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.globalEvents)},listen:function(e,t){this.callParent([{global:e},t])},match:function(){return!0}}),Ext.define("Ext.data.ResultSet",{loaded:!0,count:0,total:0,success:!1,constructor:function(e){Ext.apply(this,e),this.totalRecords=this.total,e.count===undefined&&(this.count=this.records.length)}}),Ext.define("Ext.data.reader.Reader",{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],mixins:{observable:Ext.util.Observable},totalProperty:"total",successProperty:"success",root:"",implicitIncludes:!0,readRecordsOnFailure:!0,isReader:!0,applyDefaults:!0,lastFieldGeneration:null,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),t.model=Ext.ModelManager.getModel(t.model),t.model&&t.model.prototype.fields&&t.buildExtractors(),this.addEvents("exception")},setModel:function(e,t){var n=this,r=n.model,i=!0;e=n.model=Ext.ModelManager.getModel(e),e&&r===e&&(i=n.lastFieldGeneration!==e.prototype.fields.generation),e&&n.buildExtractors(i),t&&n.proxy&&n.proxy.setModel(e,!0)},read:function(e){var t;return e&&(t=e.responseText?this.getResponseData(e):this.readRecords(e)),t||this.nullResultSet},readRecords:function(e){var t=this,n,r,i,s,o,u,a;t.lastFieldGeneration!==t.model.prototype.fields.generation&&t.buildExtractors(!0),t.rawData=e,e=t.getData(e),n=!0,r=0,i=[];if(t.successProperty){u=t.getSuccess(e);if(u===!1||u==="false")n=!1}t.messageProperty&&(a=t.getMessage(e));if(t.readRecordsOnFailure||n)s=Ext.isArray(e)?e:t.getRoot(e),s&&(o=s.length),t.totalProperty&&(u=parseInt(t.getTotal(e),10),isNaN(u)||(o=u)),s&&(i=t.extractData(s),r=i.length);return new Ext.data.ResultSet({total:o||r,count:r,records:i,success:n,message:a})},extractData:function(e){var t=this,n=t.model,r=e.length,i=new Array(r),s,o,u,a;!e.length&&Ext.isObject(e)&&(e=[e],r=1);for(a=0;a<r;a++)o=e[a],o.isModel?i[a]=o:(i[a]=u=new n(undefined,t.getId(o),o,s={}),u.phantom=!1,t.convertRecordData(s,o,u),t.implicitIncludes&&u.associations.length&&t.readAssociated(u,o));return i},readAssociated:function(e,t){var n=e.associations.items,r=0,i=n.length,s,o,u,a;for(;r<i;r++)s=n[r],o=this.getAssociatedDataRoot(t,s.associationKeyFunction||s.associationKey||s.name),o&&(a=s.getReader(),a||(u=s.associatedModel.getProxy(),u?a=u.getReader():a=new this.constructor({model:s.associatedName})),s.read(e,a,o))},getAssociatedDataRoot:function(e,t){return Ext.isFunction(t)?t(e):e[t]},getFields:function(){return this.model.prototype.fields.items},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(e){},onMetaChange:function(e){var t=this,n=e.fields||t.getFields(),r,i;t.metaData=e,t.root=e.root||t.root,t.idProperty=e.idProperty||t.idProperty,t.totalProperty=e.totalProperty||t.totalProperty,t.successProperty=e.successProperty||t.successProperty,t.messageProperty=e.messageProperty||t.messageProperty,i=e.clientIdProperty,t.model?(t.model.setFields(n,t.idProperty,i),t.setModel(t.model,!0)):(r=Ext.define("Ext.data.reader.Json-Model"+Ext.id(),{extend:"Ext.data.Model",fields:n,clientIdProperty:i}),t.idProperty&&(r.idProperty=t.idProperty),t.setModel(r,!0))},getIdProperty:function(){var e=this.model.prototype.idField,t=this.idProperty;return!t&&e&&(t=e.mapping)==null&&(t=e.name),t},buildExtractors:function(e){var t=this,n=t.getIdProperty(),r=t.totalProperty,i=t.successProperty,s=t.messageProperty,o;e===!0&&delete t.convertRecordData;if(t.convertRecordData)return;r&&(t.getTotal=t.createAccessor(r)),i&&(t.getSuccess=t.createAccessor(i)),s&&(t.getMessage=t.createAccessor(s)),n?(o=t.createAccessor(n),t.getId=function(e){var n=o.call(t,e);return n===undefined||n===""?null:n}):t.getId=function(){return null},t.convertRecordData=t.buildRecordDataExtractor(),t.lastFieldGeneration=t.model.prototype.fields.generation},recordDataExtractorTemplate:["var me = this\n","    ,fields = me.model.prototype.fields\n","    ,value\n","    ,internalId\n",'<tpl for="fields">','    ,__field{#} = fields.map["{name}"]\n',"</tpl>",";\n","return function(dest, source, record) {\n",'<tpl for="fields">','{% var fieldAccessExpression =  this.createFieldAccessExpression(values, "__field" + xindex, "source");',"   if (fieldAccessExpression) { %}",'    value = {[ this.createFieldAccessExpression(values, "__field" + xindex, "source") ]};\n','<tpl if="hasCustomConvert">','    dest["{name}"] = value === undefined ? __field{#}.convert(__field{#}.defaultValue, record) : __field{#}.convert(value, record);\n','<tpl elseif="defaultValue !== undefined">',"    if (value === undefined) {\n","        if (me.applyDefaults) {\n",'<tpl if="convert">','            dest["{name}"] = __field{#}.convert(__field{#}.defaultValue, record);\n',"<tpl else>",'            dest["{name}"] = __field{#}.defaultValue\n',"</tpl>","        };\n","    } else {\n",'<tpl if="convert">','        dest["{name}"] = __field{#}.convert(value, record);\n',"<tpl else>",'        dest["{name}"] = value;\n',"</tpl>","    };\n","<tpl else>","    if (value !== undefined) {\n",'<tpl if="convert">','        dest["{name}"] = __field{#}.convert(value, record);\n',"<tpl else>",'        dest["{name}"] = value;\n',"</tpl>","    }\n","</tpl>","{% } else { %}",'<tpl if="defaultValue !== undefined">','<tpl if="convert">','    dest["{name}"] = __field{#}.convert(__field{#}.defaultValue, record);\n',"<tpl else>",'    dest["{name}"] = __field{#}.defaultValue\n',"</tpl>","</tpl>","{% } %}","</tpl>",'<tpl if="clientIdProp">','    if (record && (internalId = {[ this.createFieldAccessExpression({mapping: values.clientIdProp}, null, "source") ]})) {\n','        record.{["internalId"]} = internalId;\n',"    }\n","</tpl>","};"],buildRecordDataExtractor:function(){var e=this,t=e.model.prototype,n={clientIdProp:t.clientIdProperty,fields:t.fields.items};return e.recordDataExtractorTemplate.createFieldAccessExpression=function(){return e.createFieldAccessExpression.apply(e,arguments)},Ext.functionFactory(e.recordDataExtractorTemplate.apply(n)).call(e)},destroyReader:function(){var e=this;delete e.proxy,delete e.model,delete e.convertRecordData,delete e.getId,delete e.getTotal,delete e.getSuccess,delete e.getMessage}},function(){var e=this.prototype;Ext.apply(e,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""}),recordDataExtractorTemplate:new Ext.XTemplate(e.recordDataExtractorTemplate)})}),Ext.define("Ext.data.reader.Json",{extend:Ext.data.reader.Reader,alternateClassName:"Ext.data.JsonReader",alias:"reader.json",root:"",metaProperty:"metaData",useSimpleAccessors:!1,readRecords:function(e){var t=this,n;return t.getMeta?(n=t.getMeta(e),n&&t.onMetaChange(n)):e.metaData&&t.onMetaChange(e.metaData),t.jsonData=e,t.callParent([e])},getResponseData:function(e){var t,n;try{return t=Ext.decode(e.responseText),this.readRecords(t)}catch(r){return n=new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:r.message}),this.fireEvent("exception",this,e,n),Ext.Logger.warn("Unable to parse the JSON returned by the server"),n}},buildExtractors:function(){var e=this,t=e.metaProperty;e.callParent(arguments),e.root?e.getRoot=e.createAccessor(e.root):e.getRoot=Ext.identityFn,t&&(e.getMeta=e.createAccessor(t))},extractData:function(e){var t=this.record,n=[],r,i;if(t){r=e.length,!r&&Ext.isObject(e)&&(r=1,e=[e]);for(i=0;i<r;i++)n[i]=e[i][t]}else n=e;return this.callParent([n])},createAccessor:function(){var e=/[\[\.]/;return function(t){if(Ext.isEmpty(t))return Ext.emptyFn;if(Ext.isFunction(t))return t;if(this.useSimpleAccessors!==!0){var n=String(t).search(e);if(n>=0)return Ext.functionFactory("obj","return obj"+(n>0?".":"")+t)}return function(e){return e[t]}}}(),createFieldAccessExpression:function(){var e=/[\[\.]/;return function(t,n,r){var i=t.mapping,s=i||i===0,o=s?i:t.name,u,a;if(i===!1)return;if(typeof o=="function")u=n+".mapping("+r+", this)";else if(this.useSimpleAccessors===!0||(a=String(o).search(e))<0){if(!s||isNaN(o))o='"'+o+'"';u=r+"["+o+"]"}else if(a===0)u=r+o;else{var f=o.split("."),l=f.length,c=1,h=r+"."+f[0],p=[h];for(;c<l;c++)h+="."+f[c],p.push(h);u=p.join(" && ")}return u}}()}),Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:!0,nameProperty:"name",writeRecordId:!0,isWriter:!0,constructor:function(e){Ext.apply(this,e)},write:function(e){var t=e.operation,n=t.records||[],r=n.length,i=0,s=[];for(;i<r;i++)s.push(this.getRecordData(n[i],t));return this.writeRecords(e,s)},getRecordData:function(e,t){var n=e.phantom===!0,r=this.writeAllFields||n,i=e.fields,s=i.items,o={},u=e.clientIdProperty,a,f,l,c,h,p;if(r){p=s.length;for(h=0;h<p;h++)f=s[h],f.persist&&this.writeValue(o,f,e)}else if(t.action==="destroy")this.writeValue(o,e.idField,e);else{a=e.getChanges();for(l in a)a.hasOwnProperty(l)&&(f=i.get(l),f.persist&&this.writeValue(o,f,e))}return n?u&&t&&t.records.length>1&&(o[u]=e.internalId):this.writeRecordId&&(c=i.get(e.idProperty)[this.nameProperty]||e.idProperty,o[c]=e.getId()),o},writeValue:function(e,t,n){var r=t[this.nameProperty],i=this.dateFormat||t.dateWriteFormat||t.dateFormat,s=n.get(t.name);r==null&&(r=t.name),t.serialize?e[r]=t.serialize(s,n):t.type===Ext.data.Types.DATE&&i&&Ext.isDate(s)?e[r]=Ext.Date.format(s,i):e[r]=s}}),Ext.define("Ext.data.writer.Json",{extend:Ext.data.writer.Writer,alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",root:undefined,encode:!1,allowSingle:!0,expandData:!1,getExpandedData:function(e){var t=e.length,n=0,r,i,s,o,u,a=function(e,t){var n={};return n[e]=t,n};for(;n<t;n++){r=e[n];for(i in r)if(r.hasOwnProperty(i)){s=i.split("."),o=s.length-1;if(o>0){u=r[i];for(;o>0;o--)u=a(s[o],u);r[s[0]]=r[s[0]]||{},Ext.Object.merge(r[s[0]],u),delete r[i]}}}return e},writeRecords:function(e,t){var n=this.root;return this.expandData&&(t=this.getExpandedData(t)),this.allowSingle&&t.length===1&&(t=t[0]),this.encode?n&&(e.params[n]=Ext.encode(t)):(e.jsonData=e.jsonData||{},n?e.jsonData[n]=t:e.jsonData=t),e}}),Ext.define("Ext.data.proxy.Proxy",{alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],mixins:{observable:Ext.util.Observable},batchOrder:"create,update,destroy",batchActions:!0,defaultReaderType:"json",defaultWriterType:"json",isProxy:!0,isSynchronous:!1,constructor:function(e){var t=this;e=e||{},t.proxyConfig=e,t.mixins.observable.constructor.call(t,e),t.model===undefined||t.model instanceof Ext.data.Model?(t.reader&&t.setReader(t.reader),t.writer&&t.setWriter(t.writer)):t.setModel(t.model)},setModel:function(e,t){var n=this;n.model=Ext.ModelManager.getModel(e),n.setReader(this.reader),n.setWriter(this.writer),t&&n.store&&n.store.setModel(n.model)},getModel:function(){return this.model},setReader:function(e){var t=this,n=!0,r=t.reader;if(e===undefined||typeof e=="string")e={type:e},n=!1;return e.isReader?e.setModel(t.model):(n&&(e=Ext.apply({},e)),Ext.applyIf(e,{proxy:t,model:t.model,type:t.defaultReaderType}),e=Ext.createByAlias("reader."+e.type,e)),e!==r&&e.onMetaChange&&(e.onMetaChange=Ext.Function.createSequence(e.onMetaChange,this.onMetaChange,this)),t.reader=e,t.reader},getReader:function(){return this.reader},onMetaChange:function(e){this.fireEvent("metachange",this,e)},setWriter:function(e){var t=this,n=!0;if(e===undefined||typeof e=="string")e={type:e},n=!1;return e.isWriter||(n&&(e=Ext.apply({},e)),Ext.applyIf(e,{model:t.model,type:t.defaultWriterType}),e=Ext.createByAlias("writer."+e.type,e)),t.writer=e,t.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(e,t){var n=this,r=n.batchActions,i,s,o,u,a,f,l,c,h;e.operations===undefined&&(e={operations:e,listeners:t}),e.batch?Ext.isDefined(e.batch.runOperation)&&(i=Ext.applyIf(e.batch,{proxy:n,listeners:{}})):e.batch={proxy:n,listeners:e.listeners||{}},i||(i=new Ext.data.Batch(e.batch)),i.on("complete",Ext.bind(n.onBatchComplete,n,[e],0)),o=n.batchOrder.split(","),u=o.length;for(f=0;f<u;f++){a=o[f],s=e.operations[a];if(s)if(r)i.add(new Ext.data.Operation({action:a,records:s}));else{c=s.length;for(l=0;l<c;l++)h=s[l],i.add(new Ext.data.Operation({action:a,records:[h]}))}}return i.start(),i},onBatchComplete:function(e,t){var n=e.scope||this;t.hasException?Ext.isFunction(e.failure)&&Ext.callback(e.failure,n,[t,e]):Ext.isFunction(e.success)&&Ext.callback(e.success,n,[t,e]),Ext.isFunction(e.callback)&&Ext.callback(e.callback,n,[t,e])},clone:function(){return new this.self(this.proxyConfig)}}),Ext.define("Ext.data.Operation",{synchronous:!0,action:undefined,filters:undefined,sorters:undefined,groupers:undefined,start:undefined,limit:undefined,batch:undefined,callback:undefined,scope:undefined,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,actionCommitRecordsRe:/^(?:create|update)$/i,actionSkipSyncRe:/^destroy$/i,constructor:function(e){Ext.apply(this,e||{})},commitRecords:function(e){var t=this,n=t.actionCommitRecordsRe.test(t.action),r,i,s,o,u,a,f,l,c;if(!t.actionSkipSyncRe.test(t.action)){s=t.records;if(s&&s.length){n&&(c=[]);if(s.length>1)if(t.action=="update"||s[0].clientIdProperty){r=new Ext.util.MixedCollection,r.addAll(e);for(i=s.length;i--;)u=s[i],o=r.findBy(t.matchClientRec,u),l=u.copyFrom(o),n&&c.push(l)}else for(a=0,f=s.length;a<f;++a)u=s[a],o=e[a],u&&o&&(l=t.updateRecord(u,o),n&&c.push(l));else l=t.updateRecord(s[0],e[0]),n&&(c[0]=l);if(n)for(i=s.length;i--;)s[i].commit(!1,c[i])}}},updateRecord:function(e,t){return t&&(e.phantom||e.getId()===t.getId())?e.copyFrom(t):[]},matchClientRec:function(e){var t=this,n=t.getId();return n&&e.getId()===n?!0:e.internalId===t.internalId},setStarted:function(){this.started=!0,this.running=!0},setCompleted:function(){this.complete=!0,this.running=!1},setSuccessful:function(){this.success=!0},setException:function(e){this.exception=!0,this.success=!1,this.running=!1,this.error=e},hasException:function(){return this.exception===!0},getError:function(){return this.error},getRecords:function(){var e=this.getResultSet();return this.records||(e?e.records:null)},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===!0},isRunning:function(){return this.running===!0},isComplete:function(){return this.complete===!0},wasSuccessful:function(){return this.isComplete()&&this.success===!0},setBatch:function(e){this.batch=e},allowWrite:function(){return this.action!="read"}}),Ext.define("Ext.data.AbstractStore",{mixins:{observable:Ext.util.Observable,sortable:Ext.util.Sortable},statics:{create:function(e){return e.isStore||(e.type||(e.type="store"),e=Ext.createByAlias("store."+e.type,e)),e}},onClassExtended:function(e,t,n){var r=t.model,i;typeof r=="string"&&(i=n.onBeforeCreated,n.onBeforeCreated=function(){var e=this,t=arguments;Ext.require(r,function(){i.apply(e,t)})})},remoteSort:!1,remoteFilter:!1,autoLoad:undefined,autoSync:!1,batchUpdateMode:"operation",filterOnLoad:!0,sortOnLoad:!0,implicitModel:!1,defaultProxyType:"memory",isDestroyed:!1,isStore:!0,sortRoot:"data",constructor:function(e){var t=this,n;Ext.apply(t,e),t.removed=[],t.mixins.observable.constructor.apply(t,arguments),t.model=Ext.ModelManager.getModel(t.model),Ext.applyIf(t,{modelDefaults:null}),!t.model&&t.fields&&(t.model=Ext.define("Ext.data.Store.ImplicitModel-"+(t.storeId||Ext.id()),{extend:"Ext.data.Model",fields:t.fields,proxy:t.proxy||t.defaultProxyType}),delete t.fields,t.implicitModel=!0),t.setProxy(t.proxy||t.model.getProxy()),t.id&&!t.storeId&&(t.storeId=t.id,delete t.id),t.storeId&&Ext.data.StoreManager.register(t),t.mixins.sortable.initSortable.call(t),n=t.decodeFilters(t.filters),t.filters=new Ext.util.MixedCollection,t.filters.addAll(n)},setProxy:function(e){var t=this,n=t.model;return e instanceof Ext.data.proxy.Proxy?e.setModel(n):(Ext.isString(e)?e={type:e,model:n}:e.model||(e=Ext.apply({model:n},e)),e=Ext.createByAlias("proxy."+e.type,e)),t.disableMetaChangeEvent||e.on("metachange",t.onMetaChange,t),t.proxy=e,t.proxy},getProxy:function(){return this.proxy},onMetaChange:function(e,t){this.fireEvent("metachange",this,t)},create:function(e,t){var n=this,r=Ext.ModelManager.create(Ext.applyIf(e,n.modelDefaults),n.model.modelName),i;return t=t||{},Ext.applyIf(t,{action:"create",records:[r]}),i=new Ext.data.Operation(t),n.proxy.create(i,n.onProxyWrite,n),r},read:function(){return this.load.apply(this,arguments)},update:function(e){var t=this,n;return e=e||{},Ext.applyIf(e,{action:"update",records:t.getUpdatedRecords()}),n=new Ext.data.Operation(e),t.proxy.update(n,t.onProxyWrite,t)},onProxyWrite:function(e){var t=this,n=e.wasSuccessful(),r=e.getRecords();switch(e.action){case"create":t.onCreateRecords(r,e,n);break;case"update":t.onUpdateRecords(r,e,n);break;case"destroy":t.onDestroyRecords(r,e,n)}n&&(t.fireEvent("write",t,e),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),Ext.callback(e.callback,e.scope||t,[r,e,n])},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(e,t,n){n&&(this.removed=[])},destroy:function(e){var t=this,n;return e=e||{},Ext.applyIf(e,{action:"destroy",records:t.getRemovedRecords()}),n=new Ext.data.Operation(e),t.proxy.destroy(n,t.onProxyWrite,t)},onBatchOperationComplete:function(e,t){return this.onProxyWrite(t)},onBatchComplete:function(e,t){var n=this,r=e.operations,i=r.length,s;n.suspendEvents();for(s=0;s<i;s++)n.onProxyWrite(r[s]);n.resumeEvents(),n.fireEvent("datachanged",n),n.fireEvent("refresh",n)},onBatchException:function(e,t){},filterNew:function(e){return e.phantom===!0&&e.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(e){return e.dirty===!0&&e.phantom!==!0&&e.isValid()},getRemovedRecords:function(){return this.removed},filter:function(e,t){},decodeFilters:function(e){Ext.isArray(e)||(e===undefined?e=[]:e=[e]);var t=e.length,n=Ext.util.Filter,r,i;for(i=0;i<t;i++)r=e[i],r instanceof n||(Ext.apply(r,{root:"data"}),r.fn&&(r.filterFn=r.fn),typeof r=="function"&&(r={filterFn:r}),e[i]=new n(r));return e},clearFilter:function(e){},isFiltered:function(){},filterBy:function(e,t){},sync:function(e){var t=this,n={},r=t.getNewRecords(),i=t.getUpdatedRecords(),s=t.getRemovedRecords(),o=!1;return r.length>0&&(n.create=r,o=!0),i.length>0&&(n.update=i,o=!0),s.length>0&&(n.destroy=s,o=!0),o&&t.fireEvent("beforesync",n)!==!1&&(e=e||{},t.proxy.batch(Ext.apply(e,{operations:n,listeners:t.getBatchListeners()}))),t},getBatchListeners:function(){var e=this,t={scope:e,exception:e.onBatchException};return e.batchUpdateMode=="operation"?t.operationcomplete=e.onBatchOperationComplete:t.complete=e.onBatchComplete,t},save:function(){return this.sync.apply(this,arguments)},load:function(e){var t=this,n={action:"read"};return t.remoteFilter&&(n.filters=t.filters.items),t.remoteSort&&(n.sorters=t.getSorters()),Ext.apply(n,e),t.lastOptions=n,n=new Ext.data.Operation(n),t.fireEvent("beforeload",t,n)!==!1&&(t.loading=!0,t.proxy.read(n,t.onProxyLoad,t)),t},reload:function(e){var t=Ext.apply({},e,this.lastOptions);return this.load(t)},afterEdit:function(e,t){var n=this,r,i;if(n.autoSync&&!n.autoSyncSuspended){for(r=t.length;r--;)if(e.fields.get(t[r]).persist){i=!0;break}i&&n.sync()}n.onUpdate(e,Ext.data.Model.EDIT,t),n.fireEvent("update",n,e,Ext.data.Model.EDIT,t)},afterReject:function(e){this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null)},afterCommit:function(e,t){t||(t=null),this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t)},onUpdate:Ext.emptyFn,onIdChanged:function(e,t,n,r){this.fireEvent("idchanged",this,e,t,n,r)},destroyStore:function(){var e,t=this;t.isDestroyed||(t.clearListeners(),t.storeId&&Ext.data.StoreManager.unregister(t),t.clearData(),t.data=t.tree=t.sorters=t.filters=t.groupers=null,t.reader&&t.reader.destroyReader(),t.proxy=t.reader=t.writer=null,t.isDestroyed=!0,t.implicitModel?(e=Ext.getClassName(t.model),Ext.undefine(e),Ext.ModelManager.unregisterType(e)):t.model=null)},getState:function(){var e=this,t,n,r=!!e.groupers,i=[],s=[],o=[];r&&e.groupers.each(function(e){i[i.length]=e.serialize(),t=!0}),e.sorters&&e.sorters.each(function(n){r&&!e.groupers.contains(n)&&(s[s.length]=n.serialize(),t=!0)}),e.filters&&e.statefulFilters&&e.filters.each(function(e){o[o.length]=e.serialize(),t=!0});if(t)return n={},i.length&&(n.groupers=i),s.length&&(n.sorters=s),o.length&&(n.filters=o),n},applyState:function(e){var t=this,n=!!t.sorters,r=!!t.groupers,i=!!t.filters,s;r&&e.groupers&&(t.groupers.clear(),t.groupers.addAll(t.decodeGroupers(e.groupers))),n&&e.sorters&&(t.sorters.clear(),t.sorters.addAll(t.decodeSorters(e.sorters))),i&&e.filters&&(t.filters.clear(),t.filters.addAll(t.decodeFilters(e.filters))),n&&r&&t.sorters.insert(0,t.groupers.getRange()),t.autoLoad&&(t.remoteSort||t.remoteGroup||t.remoteFilter)&&(t.autoLoad===!0?t.reload():t.reload(t.autoLoad)),i&&t.filters.length&&!t.remoteFilter&&(t.filter(),s=t.sortOnFilter),n&&t.sorters.length&&!t.remoteSort&&!s&&t.sort()},doSort:function(e){var t=this;t.remoteSort?t.load():(t.data.sortBy(e),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),t.fireEvent("sort",t,t.sorters.getRange())},clearData:Ext.emptyFn,getCount:Ext.emptyFn,getById:Ext.emptyFn,removeAll:Ext.emptyFn,isLoading:function(){return!!this.loading},suspendAutoSync:function(){this.autoSyncSuspended=!0},resumeAutoSync:function(){this.autoSyncSuspended=!1}}),Ext.define("Ext.app.domain.Store",{extend:Ext.app.EventDomain,singleton:!0,type:"store",idProperty:"storeId",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.data.AbstractStore)}}),Ext.define("Ext.app.Controller",{mixins:{observable:Ext.util.Observable},statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(e,t){return function(){return this[e](t)}},getGetterName:function(e,t){var n="get",r=e.split("."),i=r.length,s;for(s=0;s<i;s++)n+=Ext.String.capitalize(r[s]);return n+=t,n},processDependencies:function(e,t,n,r,i){if(!i||!i.length)return;var s=this,o=s.strings[r],u,a,f,l,c,h,p,d;Ext.isArray(i)||(i=[i]);for(c=0,h=i.length;c<h;c++)l=i[c],u=s.getFullName(l,r,n),a=u.absoluteName,f=u.shortName,t.push(a),p=s.getGetterName(f,o.upper),e[p]=d=s.createGetter(o.getter,l),r!=="controller"&&(d["Ext.app.getter"]=!0)},getFullName:function(e,t,n){var r=e,i,s;return(i=e.indexOf("@"))>0?(r=e.substring(0,i),s=e.substring(i+1)+"."+r):e.indexOf(".")>0&&(Ext.ClassManager.isCreated(e)||Ext.Loader.isAClassNameWithAKnownPrefix(e))?s=e:n?(s=n+"."+t+"."+e,r=e):s=e,{absoluteName:s,shortName:r}}},application:null,onClassExtended:function(e,t,n){var r=n.onBeforeCreated;n.onBeforeCreated=function(e,t){var n=Ext.app.Controller,i=n.controllerRegex,s=[],o,u,s,a,f;a=e.prototype,o=Ext.getClassName(e),u=t.$namespace||Ext.app.getNamespace(o)||(f=i.exec(o))&&f[1],u&&(a.$namespace=u),n.processDependencies(a,s,u,"model",t.models),n.processDependencies(a,s,u,"view",t.views),n.processDependencies(a,s,u,"store",t.stores),n.processDependencies(a,s,u,"controller",t.controllers),Ext.require(s,Ext.Function.pass(r,arguments,this))}},constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),t.refs&&t.ref(t.refs),t.eventbus=Ext.app.EventBus,t.initAutoGetters()},initAutoGetters:function(){var e=this.self.prototype,t,n;for(t in e)n=e[t],n&&n["Ext.app.getter"]&&n.call(this)},doInit:function(e){var t=this;t._initialized||(t.init(e),t._initialized=!0)},finishInit:function(e){var t=this,n=t.controllers,r,i,s;if(t._initialized&&n&&n.length)for(i=0,s=n.length;i<s;i++)r=t.getController(n[i]),r.finishInit(e)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,ref:function(e){var t=this,n=0,r=e.length,i,s,o;e=Ext.Array.from(e),t.references=t.references||[];for(;n<r;n++)i=e[n],s=i.ref,o="get"+Ext.String.capitalize(s),t[o]||(t[o]=Ext.Function.pass(t.getRef,[s,i],t)),t.references.push(s.toLowerCase())},addRef:function(e){this.ref(e)},getRef:function(e,t,n){var r=this,i=r.refCache||(r.refCache={}),s=i[e];return t=t||{},n=n||{},Ext.apply(t,n),t.forceCreate?Ext.ComponentManager.create(t,"component"):(s||(t.selector&&(i[e]=s=Ext.ComponentQuery.query(t.selector)[0]),!s&&t.autoCreate&&(i[e]=s=Ext.ComponentManager.create(t,"component")),s&&s.on("beforedestroy",function(){i[e]=null})),s)},hasRef:function(e){var t=this.references;return t&&Ext.Array.indexOf(t,e.toLowerCase())!==-1},control:function(e,t,n){var r=this,i=n,s;Ext.isString(e)?(s={},s[e]=t):(s=e,i=t),r.eventbus.control(s,i||r)},listen:function(e,t){this.eventbus.listen(e,t||this)},getController:function(e){var t=this,n=t.application;return e===t.id?t:n&&n.getController(e)},getStore:function(e){var t,n;return t=e.indexOf("@")==-1?e:e.split("@")[0],n=Ext.StoreManager.get(t),n||(e=Ext.app.Controller.getFullName(e,"store",this.$namespace),e&&(n=Ext.create(e.absoluteName,{storeId:t}))),n},getModel:function(e){var t=Ext.app.Controller.getFullName(e,"model",this.$namespace);return t&&Ext.ModelManager.getModel(t.absoluteName)},getView:function(e){var t=Ext.app.Controller.getFullName(e,"view",this.$namespace);return t&&Ext.ClassManager.get(t.absoluteName)},getApplication:function(){return this.application}}),Ext.define("Ext.container.DockingContainer",{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(e,t){var n=this,r=0,i,s;e=n.prepareItems(e),s=e.length;for(;r<s;r++)i=e[r],i.dock=i.dock||"top",(i.dock==="left"||i.dock==="right")&&n.horizontalDocks++,t!==undefined?(r+=t,n.dockedItems.insert(r,i)):n.dockedItems.add(i),i.onAdded(n,r),n.hasListeners.dockedadd&&n.fireEvent("dockedadd",n,i,r),n.onDockedAdd!==Ext.emptyFn&&n.onDockedAdd(i);return n.rendered&&!n.suspendLayout&&n.updateLayout(),e},destroyDockedItems:function(){var e=this.dockedItems,t;if(e)while(t=e.first())this.removeDocked(t,!0)},doRenderDockedItems:function(e,t,n){var r=t.$comp,i=r.componentLayout,s,o;i.getDockedItems&&!t.$skipDockedItems&&(s=i.getDockedItems("render",!n),o=s&&i.getItemsRenderTree(s),o&&Ext.DomHelper.generateMarkup(o,e))},getDockedComponent:function(e){return Ext.isObject(e)&&(e=e.getItemId()),this.dockedItems.get(e)},getDockedItems:function(e,t){var n=this.getComponentLayout().getDockedItems("render",t);return e&&n.length&&(n=Ext.ComponentQuery.query(e,n)),n},getDockingRefItems:function(e,t){var n=e&&"*,* *",r=this.getDockedItems(n,!0),i;return r.push.apply(r,t),i=this.getDockedItems(n,!1),r.push.apply(r,i),r},initDockingItems:function(){var e=this,t=e.dockedItems;e.dockedItems=new Ext.util.AbstractMixedCollection(!1,e.getComponentId),t&&e.addDocked(t)},insertDocked:function(e,t){this.addDocked(t,e)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(e,t){var n=this,r,i;return t=t===!0||t!==!1&&n.autoDestroy,n.dockedItems.contains(e)?((e.dock==="left"||e.dock==="right")&&n.horizontalDocks--,r=n.componentLayout,i=r&&n.rendered,i&&r.onRemove(e),n.dockedItems.remove(e),e.onRemoved(e.destroying||t),n.onDockedRemove(e),t?e.destroy():i&&r.afterRemove(e),n.hasListeners.dockedremove&&n.fireEvent("dockedremove",n,e),!n.destroying&&!n.suspendLayout&&n.updateLayout(),e):e},setupDockingRenderTpl:function(e){e.renderDockedItems=this.doRenderDockedItems}}),Ext.define("Ext.toolbar.Fill",{extend:Ext.Component,alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:!0,flex:1}),Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(e,t){this.layout=e,Ext.apply(this,t)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(e){var t=this,n=e.state.boxPlan,r;n&&n.tooNarrow?(r=t.handleOverflow(e),r&&r.reservedSpace&&t.layout.publishInnerCtSize(e,r.reservedSpace)):t.clearOverflow()},completeLayout:Ext.emptyFn,finishedLayout:function(e){var t=this,n=t.layout.owner,r,i;n.hasListeners.overflowchange&&(r=n.query(">[hidden]"),i=r.length,i!==t.lastHiddenCount&&(n.fireEvent("overflowchange",t.lastHiddenCount,i,r),t.lastHiddenCount=i))},onRemove:Ext.emptyFn,getItem:function(e){return this.layout.owner.getComponent(e)},getOwnerType:function(e){var t;return e.isToolbar?t="toolbar":e.isTabBar?t="tabbar":e.isMenu?t="menu":t=e.getXType(),t},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""}}),Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",focusable:!1,ariaRole:"separator"}),Ext.define("Ext.button.Manager",{singleton:!0,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,buttonSelector:"."+Ext.baseCSSPrefix+"btn",init:function(){var e=this;e.initialized||(Ext.getDoc().on({keydown:e.onDocumentKeyDown,mouseup:e.onDocumentMouseUp,scope:e}),e.initialized=!0)},onDocumentKeyDown:function(e){var t=e.getKey(),n;if(t===e.SPACE||t===e.ENTER)n=e.getTarget(this.buttonSelector),n&&Ext.getCmp(n.id).onClick(e)},onButtonMousedown:function(e,t){var n=this.pressedButton;n&&n.onMouseUp(t),this.pressedButton=e},onDocumentMouseUp:function(e){var t=this.pressedButton;t&&(t.onMouseUp(e),this.pressedButton=null)},toggleGroup:function(e,t){if(t){var n=this.groups[e.toggleGroup],r=n.length,i;for(i=0;i<r;i++)n[i]!==e&&n[i].toggle(!1)}},register:function(e){var t=this,n=this.groups,r=n[e.toggleGroup];t.init();if(!e.toggleGroup)return;r||(r=n[e.toggleGroup]=[]),r.push(e),e.on("toggle",t.toggleGroup,t)},unregister:function(e){if(!e.toggleGroup)return;var t=this,n=t.groups[e.toggleGroup];n&&(Ext.Array.remove(n,e),e.un("toggle",t.toggleGroup,t))},getPressed:function(e){var t=this.groups[e],n=0,r;if(t)for(r=t.length;n<r;n++)if(t[n].pressed===!0)return t[n];return null}}),Ext.define("Ext.menu.Manager",{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",menuSelector:"."+Ext.baseCSSPrefix+"menu",menus:{},groups:{},attached:!1,lastShow:new Date,init:function(){var e=this;e.active=new Ext.util.MixedCollection,Ext.getDoc().addKeyListener(27,function(){e.active.length>0&&e.hideAll()},e)},hideAll:function(){var e=this.active,t,n,r;if(e&&e.length>0){t=Ext.Array.slice(e.items),r=t.length;for(n=0;n<r;n++)t[n].hide();return!0}return!1},onHide:function(e){var t=this,n=t.active;n.remove(e),n.length<1&&(Ext.getDoc().un("mousedown",t.onMouseDown,t),t.attached=!1)},onShow:function(e){var t=this,n=t.active,r=t.attached;t.lastShow=new Date,n.add(e),r||(Ext.getDoc().on("mousedown",t.onMouseDown,t,{buffer:Ext.isIE9m?10:undefined}),t.attached=!0),e.toFront()},onBeforeHide:function(e){e.activeChild&&e.activeChild.hide(),e.autoHideTimer&&(clearTimeout(e.autoHideTimer),delete e.autoHideTimer)},onBeforeShow:function(e){var t=this.active,n=e.parentMenu;t.remove(e),!n&&!e.allowOtherMenus?this.hideAll():n&&n.activeChild&&e!=n.activeChild&&n.activeChild.hide()},onMouseDown:function(e){var t=this,n=t.active,r=t.lastShow,i=!0;Ext.Date.getElapsed(r)>50&&n.length>0&&!e.getTarget(t.menuSelector)&&(Ext.isIE9m&&!Ext.getDoc().contains(e.target)&&(i=!1),i&&t.hideAll())},register:function(e){var t=this;t.active||t.init(),e.floating&&(t.menus[e.id]=e,e.on({beforehide:t.onBeforeHide,hide:t.onHide,beforeshow:t.onBeforeShow,show:t.onShow,scope:t}))},get:function(e){var t=this.menus;return typeof e=="string"?t?t[e]:null:e.isMenu?e:Ext.isArray(e)?new Ext.menu.Menu({items:e}):Ext.ComponentManager.create(e,"menu")},unregister:function(e){var t=this,n=t.menus,r=t.active;delete n[e.id],r.remove(e),e.un({beforehide:t.onBeforeHide,hide:t.onHide,beforeshow:t.onBeforeShow,show:t.onShow,scope:t})},registerCheckable:function(e){var t=this.groups,n=e.group;n&&(t[n]||(t[n]=[]),t[n].push(e))},unregisterCheckable:function(e){var t=this.groups,n=e.group;n&&Ext.Array.remove(t[n],e)},onCheckChange:function(e,t){var n=this.groups,r=e.group,i=0,s,o,u;if(r&&t)
{s=n[r],o=s.length;for(;i<o;i++)u=s[i],u!=e&&u.setChecked(!1)}}}),Ext.define("Ext.util.ClickRepeater",{extend:Ext.util.Observable,constructor:function(e,t){var n=this;n.el=Ext.get(e),n.el.unselectable(),Ext.apply(n,t),n.callParent(),n.addEvents("mousedown","click","mouseup"),n.disabled||(n.disabled=!0,n.enable()),n.handler&&n.on("click",n.handler,n.scope||n)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE&&!(Ext.isIE10p||Ext.isStrict&&Ext.isIE9)&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(e){if(e||!this.disabled)clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners();this.disabled=!0},setDisabled:function(e){this[e?"disable":"enable"]()},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.clearListeners()},handleDblClick:function(e){clearTimeout(this.timer),this.el.blur(),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer),this.el.blur(),this.pressedCls&&this.el.addCls(this.pressedCls),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e),this.accelerate&&(this.delay=400),e=new Ext.EventObjectImpl(e),this.timer=Ext.defer(this.click,this.delay||this.interval,this,[e])},click:function(e){this.fireEvent("click",this,e),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},handleMouseOut:function(){clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&this.el.addCls(this.pressedCls),this.click()},handleMouseUp:function(e){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.pressedCls&&this.el.removeCls(this.pressedCls),this.fireEvent("mouseup",this,e)}}),Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:Ext.layout.component.Auto,type:"button",htmlRE:/<.*>/,beginLayout:function(e){var t=this,n=t.owner,r=n.text;t.callParent(arguments),e.btnWrapContext=e.getEl("btnWrap"),e.btnElContext=e.getEl("btnEl"),e.btnInnerElContext=e.getEl("btnInnerEl"),e.btnIconElContext=e.getEl("btnIconEl"),r&&t.htmlRE.test(r)&&(e.isHtmlText=!0,n.btnInnerEl.setStyle("line-height","normal"),n.btnInnerEl.setStyle("padding-top",""))},beginLayoutCycle:function(e){var t=this.owner,n=this.lastWidthModel;this.callParent(arguments),n&&!this.lastWidthModel.shrinkWrap&&e.widthModel.shrinkWrap&&(t.btnWrap.setStyle("height",""),t.btnEl.setStyle("height",""),t.btnInnerEl.setStyle("line-height",""))},calculate:function(e){var t=this,n=t.owner,r=e.btnElContext,i=e.btnInnerElContext,s=e.btnWrapContext,o=Math.max,u,a,f,l;t.callParent(arguments),e.heightModel.shrinkWrap?(f=n.btnEl.getHeight(),e.isHtmlText&&(t.centerInnerEl(e,f),t.ieCenterIcon(e,f))):(u=e.getProp("height"),u?(a=u-e.getFrameInfo().height-e.getPaddingInfo().height,f=a,(n.menu||n.split)&&n.arrowAlign==="bottom"&&(f-=s.getPaddingInfo().bottom),l=f,(n.icon||n.iconCls||n.glyph)&&(n.iconAlign==="top"||n.iconAlign==="bottom")&&(l-=i.getPaddingInfo().height),s.setProp("height",o(0,a)),r.setProp("height",o(0,f)),e.isHtmlText?t.centerInnerEl(e,f):i.setProp("line-height",o(0,l)+"px"),t.ieCenterIcon(e,f)):u!==0&&(t.done=!1))},centerInnerEl:function(e,t){var n=this,r=e.btnInnerElContext,i=n.owner.btnInnerEl.getHeight();e.heightModel.shrinkWrap&&t<i?e.btnElContext.setHeight(i):t>i&&r.setProp("padding-top",Math.round((t-i)/2)+r.getPaddingInfo().top)},ieCenterIcon:function(e,t){var n=this.owner.iconAlign;(Ext.isIEQuirks||Ext.isIE6)&&(n==="left"||n==="right")&&e.btnIconElContext.setHeight(t)},publishInnerWidth:function(e,t){this.owner.getFrameInfo().table&&e.btnInnerElContext.setWidth(t-e.getFrameInfo().width-e.getPaddingInfo().width-e.btnWrapContext.getPaddingInfo().width)}}),Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(e,t,n){var r=this,i=r.shared;return i||(i=r.shared=new r(e,n)),i.bind(e),i.setFixedWidth(n||"auto"),i.getSize(t)},destroy:function(){var e=this;Ext.destroy(e.shared),e.shared=null}},constructor:function(e,t){var n=this,r=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics"});n.measure=r,e&&n.bind(e),r.position("absolute"),r.setLocalXY(-1e3,-1e3),r.hide(),t&&r.setWidth(t)},getSize:function(e){var t=this.measure,n;return t.update(e),n=t.getSize(),t.update(""),n},bind:function(e){var t=this;t.el=Ext.get(e),t.measure.setStyle(t.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(e){this.measure.setWidth(e)},getWidth:function(e){return this.measure.dom.style.width="auto",this.getSize(e).width},getHeight:function(e){return this.getSize(e).height},destroy:function(){var e=this;e.measure.remove(),delete e.el,delete e.measure}},function(){Ext.Element.addMethods({getTextWidth:function(e,t,n){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(e,this.dom.innerHTML,!0)).width,t||0,n||1e6)}})}),Ext.define("Ext.button.Button",{alias:"widget.button",extend:Ext.Component,mixins:{queryable:Ext.Queryable},alternateClassName:"Ext.Button",isButton:!0,componentLayout:"button",hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:"tl-bl?",showEmptyMenu:!1,textAlign:"center",clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",menuActiveCls:"menu-active",hrefTarget:"_blank",ariaRole:"button",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],renderTpl:['<span id="{id}-btnWrap" role="presentation" class="{baseCls}-wrap','<tpl if="splitCls"> {splitCls}</tpl>','{childElCls}" unselectable="on">','<span id="{id}-btnEl" class="{baseCls}-button" role="presentation">','<span id="{id}-btnInnerEl" class="{baseCls}-inner {innerCls}','{childElCls}" unselectable="on">',"{text}","</span>",'<span role="presentation" id="{id}-btnIconEl" class="{baseCls}-icon-el {iconCls}','{childElCls} {glyphCls}" unselectable="on" style="','<tpl if="iconUrl">background-image:url({iconUrl});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl>',"</span>","</span>","</span>",'<tpl if="closable">','<span id="{id}-closeEl" role="presentation"',' class="{baseCls}-close-btn"','<tpl if="closeText">',' title="{closeText}" aria-label="{closeText}"',"</tpl>",">","</span>","</tpl>"],scale:"small",allowedScales:["small","medium","large"],iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,shrinkWrap:3,frame:!0,hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){this.disabled||this.doNavigate()},doNavigate:function(){this.hrefTarget==="_blank"?window.open(this.href,this.hrefTarget):location.href=this.href},_triggerRegion:{},initComponent:function(){var e=this;e.autoEl={tag:"a",hidefocus:"on",unselectable:"on"},e.addCls(Ext.baseCSSPrefix+"unselectable"),e.callParent(arguments),e.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout","textchange","iconchange","glyphchange"),e.menu&&(e.split=!0,e.menu=Ext.menu.Manager.get(e.menu),e.menu.ownerButton=e),e.url&&(e.href=e.url),e.href&&!e.hasOwnProperty("preventDefault")&&(e.preventDefault=!1),Ext.isString(e.toggleGroup)&&e.toggleGroup!==""&&(e.enableToggle=!0),e.html&&!e.text&&(e.text=e.html,delete e.html),e.glyphCls=e.baseCls+"-glyph"},getActionEl:function(){return this.el},getFocusEl:function(){return this.el},onDisable:function(){this.callParent(arguments)},setComponentCls:function(){var e=this,t=e.getComponentCls();Ext.isEmpty(e.oldCls)||(e.removeClsWithUI(e.oldCls),e.removeClsWithUI(e.pressedCls)),e.oldCls=t,e.addClsWithUI(t)},getComponentCls:function(){var e=this,t;return e.iconCls||e.icon||e.glyph?t=[e.text?"icon-text-"+e.iconAlign:"icon"]:e.text?t=["noicon"]:t=[],e.pressed&&(t[t.length]=e.pressedCls),t},beforeRender:function(){var e=this,t=e.autoEl,n=e.getHref(),r=e.hrefTarget;e.disabled||(t.tabIndex=e.tabIndex),n&&(t.href=n,r&&(t.target=r)),e.callParent(),e.oldCls=e.getComponentCls(),e.addClsWithUI(e.oldCls),Ext.applyIf(e.renderData,e.getTemplateArgs())},onRender:function(){var e=this,t,n,r;e.doc=Ext.getDoc(),e.callParent(arguments),n=e.el,e.tooltip&&e.setTooltip(e.tooltip,!0),e.handleMouseEvents?(r={scope:e,mouseover:e.onMouseOver,mouseout:e.onMouseOut,mousedown:e.onMouseDown},e.split&&(r.mousemove=e.onMouseMove)):r={scope:e},e.menu&&(e.mon(e.menu,{scope:e,show:e.onMenuShow,hide:e.onMenuHide}),e.keyMap=new Ext.util.KeyMap({target:e.el,key:Ext.EventObject.DOWN,handler:e.onDownKey,scope:e})),e.repeat?e.mon(new Ext.util.ClickRepeater(n,Ext.isObject(e.repeat)?e.repeat:{}),"click",e.onRepeatClick,e):r[e.clickEvent]?t=!0:r[e.clickEvent]=e.onClick,e.mon(n,r),e.hasFrameTable()&&e.mon(e.frameTable,"click",e.frameTableListener,e),t&&e.mon(n,e.clickEvent,e.onClick,e),Ext.button.Manager.register(e)},getTemplateArgs:function(){var e=this,t=e.glyph,n=Ext._glyphFontFamily,r;return typeof t=="string"&&(r=t.split("@"),t=r[0],n=r[1]),{innerCls:e.getInnerCls(),splitCls:e.getSplitCls(),iconUrl:e.icon,iconCls:e.iconCls,glyph:t,glyphCls:t?e.glyphCls:"",glyphFontFamily:n,text:e.text||"&#160;",closeText:e.closeText}},setHref:function(e){this.href=e,this.el.dom.href=this.getHref()},getHref:function(){var e=this,t=e.href;return t?Ext.urlAppend(t,Ext.Object.toQueryString(Ext.apply({},e.params,e.baseParams))):!1},setParams:function(e){this.params=e,this.el.dom.href=this.getHref()},getSplitCls:function(){var e=this;return e.split?e.baseCls+"-"+e.arrowCls+" "+(e.baseCls+"-"+e.arrowCls+"-"+e.arrowAlign):""},getInnerCls:function(){return this.textAlign?this.baseCls+"-inner-"+this.textAlign:""},setIcon:function(e){e=e||"";var t=this,n=t.btnIconEl,r=t.icon||"";return t.icon=e,e!=r&&(n&&(n.setStyle("background-image",e?"url("+e+")":""),t.setComponentCls(),t.didIconStateChange(r,e)&&t.updateLayout()),t.fireEvent("iconchange",t,r,e)),t},setIconCls:function(e){e=e||"";var t=this,n=t.btnIconEl,r=t.iconCls||"";return t.iconCls=e,r!=e&&(n&&(n.removeCls(r),n.addCls(e),t.setComponentCls(),t.didIconStateChange(r,e)&&t.updateLayout()),t.fireEvent("iconchange",t,r,e)),t},setGlyph:function(e){e=e||0;var t=this,n=t.btnIconEl,r=t.glyph,i,s;return t.glyph=e,n&&(typeof e=="string"&&(s=e.split("@"),e=s[0],i=s[1]||Ext._glyphFontFamily),e?r!=e&&(n.dom.innerHTML="&#"+e+";"):n.dom.innerHTML="",i&&n.setStyle("font-family",i)),t.fireEvent("glyphchange",t,t.glyph,r),t},setTooltip:function(e,t){var n=this;return n.rendered?((!t||!e)&&n.clearTip(),e&&(Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:n.el.id},e)),n.tooltip=e):n.el.dom.setAttribute(n.getTipAttr(),e))):n.tooltip=e,n},setTextAlign:function(e){var t=this,n=t.btnEl;return n&&(n.removeCls(t.baseCls+"-inner-"+t.textAlign),n.addCls(t.baseCls+"-inner-"+e)),t.textAlign=e,t},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(e){var t=this.menu,n;return t&&(n=t.getRefItems(e),n.unshift(t)),n||[]},clearTip:function(){var e=this,t=e.el;Ext.quickTipsActive&&Ext.isObject(e.tooltip)?Ext.tip.QuickTipManager.unregister(t):t.dom.removeAttribute(e.getTipAttr())},beforeDestroy:function(){var e=this;e.rendered&&e.clearTip(),e.menu&&e.destroyMenu!==!1&&Ext.destroy(e.menu),Ext.destroy(e.btnInnerEl,e.repeater),e.callParent()},onDestroy:function(){var e=this;e.rendered&&(e.doc.un("mouseover",e.monitorMouseOver,e),delete e.doc,Ext.destroy(e.keyMap),delete e.keyMap),Ext.button.Manager.unregister(e),e.callParent()},setHandler:function(e,t){return this.handler=e,this.scope=t,this},setText:function(e){e=e||"";var t=this,n=t.text||"";return e!=n&&(t.text=e,t.rendered&&(t.btnInnerEl.update(e||"&#160;"),t.setComponentCls(),Ext.isStrict&&Ext.isIE8&&t.el.repaint(),t.updateLayout()),t.fireEvent("textchange",t,n,e)),t},didIconStateChange:function(e,t){var n=Ext.isEmpty(t);return Ext.isEmpty(e)?!n:n},getText:function(){return this.text},toggle:function(e,t){var n=this;return e=e===undefined?!n.pressed:!!e,e!==n.pressed&&(n.rendered&&n[e?"addClsWithUI":"removeClsWithUI"](n.pressedCls),n.pressed=e,t||(n.fireEvent("toggle",n,e),Ext.callback(n.toggleHandler,n.scope||n,[n,e]))),n},maybeShowMenu:function(){var e=this;e.menu&&!e.hasVisibleMenu()&&!e.ignoreNextClick&&e.showMenu(!0)},showMenu:function(e){var t=this,n=t.menu;return t.rendered&&(t.tooltip&&Ext.quickTipsActive&&t.getTipAttr()!="title"&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(t.el),n.isVisible()&&n.hide(),(!e||t.showEmptyMenu||n.items.getCount()>0)&&n.showBy(t.el,t.menuAlign)),t},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var e=this.menu;return e&&e.rendered&&e.isVisible()},onRepeatClick:function(e,t){this.onClick(t)},onClick:function(e){var t=this;t.doPreventDefault(e);if(e.type!=="keydown"&&e.button!==0)return;t.disabled||(t.doToggle(),t.maybeShowMenu(),t.fireHandler(e))},doPreventDefault:function(e){(this.preventDefault||this.disabled&&this.getHref()&&e)&&e.preventDefault()},fireHandler:function(e){var t=this,n=t.handler;t.fireEvent("click",t,e)!==!1&&n&&n.call(t.scope||t,t,e)},doToggle:function(){var e=this;e.enableToggle&&(e.allowDepress!==!1||!e.pressed)&&e.toggle()},onMouseOver:function(e){var t=this;!t.disabled&&!e.within(t.el,!0,!0)&&t.onMouseEnter(e)},onMouseOut:function(e){var t=this;e.within(t.el,!0,!0)||(t.overMenuTrigger&&t.onMenuTriggerOut(e),t.onMouseLeave(e))},onMouseMove:function(e){var t=this,n=t.el,r=t.overMenuTrigger,i,s;t.split&&(i=t.arrowAlign==="right"?e.getX()-t.getX():e.getY()-n.getY(),s=t.getTriggerRegion(),i>s.begin&&i<s.end?r||t.onMenuTriggerOver(e):r&&t.onMenuTriggerOut(e))},getTriggerRegion:function(){var e=this,t=e._triggerRegion,n=e.getTriggerSize(),r=e.arrowAlign==="right"?e.getWidth():e.getHeight();return t.begin=r-n,t.end=r,t},getTriggerSize:function(){var e=this,t=e.triggerSize,n,r;return t==null&&(n=e.arrowAlign,r=n.charAt(0),t=e.triggerSize=e.el.getFrameWidth(r)+e.getBtnWrapFrameWidth(r),e.frameSize&&(t=e.triggerSize+=e.frameSize[n])),t},getBtnWrapFrameWidth:function(e){return this.btnWrap.getFrameWidth(e)},addOverCls:function(){this.disabled||this.addClsWithUI(this.overCls)},removeOverCls:function(){this.removeClsWithUI(this.overCls)},onMouseEnter:function(e){this.fireEvent("mouseover",this,e)},onMouseLeave:function(e){this.fireEvent("mouseout",this,e)},onMenuTriggerOver:function(e){var t=this,n=t.arrowTooltip;t.overMenuTrigger=!0,t.split&&n&&t.btnWrap.dom.setAttribute(t.getTipAttr(),n),t.fireEvent("menutriggerover",t,t.menu,e)},onMenuTriggerOut:function(e){var t=this;delete t.overMenuTrigger,t.split&&t.arrowTooltip&&t.btnWrap.dom.setAttribute(t.getTipAttr(),""),t.fireEvent("menutriggerout",t,t.menu,e)},enable:function(e){var t=this;return t.callParent(arguments),t.removeClsWithUI("disabled"),t.rendered&&t.el.dom.setAttribute("tabIndex",t.tabIndex),t},disable:function(e){var t=this;return t.callParent(arguments),t.addClsWithUI("disabled"),t.removeClsWithUI(t.overCls),t.rendered&&t.el.dom.removeAttribute("tabIndex"),t.btnInnerEl&&Ext.isIE7m&&t.btnInnerEl.repaint(),t},setScale:function(e){var t=this,n=t.ui.replace("-"+t.scale,"");if(!Ext.Array.contains(t.allowedScales,e))throw"#setScale: scale must be an allowed scale ("+t.allowedScales.join(", ")+")";t.scale=e,t.setUI(n)},setUI:function(e){var t=this;t.scale&&!e.match(t.scale)&&(e=e+"-"+t.scale),t.callParent([e])},onMouseDown:function(e){var t=this;Ext.isIE&&t.getFocusEl().focus(),!t.disabled&&e.button===0&&(Ext.button.Manager.onButtonMousedown(t,e),t.addClsWithUI(t.pressedCls))},onMouseUp:function(e){var t=this;!t.isDestroyed&&e.button===0&&(t.pressed||t.removeClsWithUI(t.pressedCls))},onMenuShow:function(e){var t=this;t.ignoreNextClick=0,t.addClsWithUI(t.menuActiveCls),t.fireEvent("menushow",t,t.menu)},onMenuHide:function(e){var t=this;t.removeClsWithUI(t.menuActiveCls),t.ignoreNextClick=Ext.defer(t.restoreClick,250,t),t.fireEvent("menuhide",t,t.menu),t.focus()},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(e,t){var n=this;if(n.menu&&!n.disabled)return n.showMenu(),t.stopEvent(),!1}}),Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:Ext.layout.container.boxOverflow.None,alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items" role="menuitem">(None)</div>',constructor:function(e){var t=this;t.callParent(arguments),t.triggerButtonCls=t.triggerButtonCls||Ext.baseCSSPrefix+"box-menu-after",t.menuItems=[]},beginLayout:function(e){this.callParent(arguments),this.clearOverflow(e)},beginLayoutCycle:function(e,t){this.callParent(arguments),t||(this.clearOverflow(e),this.layout.cacheChildItems(e))},onRemove:function(e){Ext.Array.remove(this.menuItems,e)},getSuffixConfig:function(){var e=this,t=e.layout,n=t.owner,r=n.id;return e.menu=new Ext.menu.Menu({listeners:{scope:e,beforeshow:e.beforeMenuShow}}),e.menuTrigger=new Ext.button.Button({id:r+"-menu-trigger",cls:Ext.layout.container.Box.prototype.innerCls+" "+e.triggerButtonCls+" "+Ext.baseCSSPrefix+"toolbar-item",plain:n.usePlainButtons,ownerCt:n,ownerLayout:t,iconCls:Ext.baseCSSPrefix+e.getOwnerType(n)+"-more-icon",ui:n instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:e.menu,showEmptyMenu:!0,getSplitCls:function(){return""}}),e.menuTrigger.getRenderTree()},getOverflowCls:function(){return Ext.baseCSSPrefix+this.layout.direction+"-box-overflow-body"},handleOverflow:function(e){var t=this,n=t.layout,r=n.names,i=e.state.boxPlan,s=[null,null];return t.showTrigger(e),t.layout.direction!=="vertical"&&(s[r.heightIndex]=(i.maxSize-t.menuTrigger[r.getHeight]())/2,t.menuTrigger.setPosition.apply(t.menuTrigger,s)),{reservedSpace:t.triggerTotalWidth}},captureChildElements:function(){var e=this,t=e.menuTrigger,n=e.layout.names;t.rendering&&(t.finishRender(),e.triggerTotalWidth=t[n.getWidth]()+t.el.getMargin(n.parallelMargins))},_asLayoutRoot:{isRoot:!0},clearOverflow:function(e){var t=this,n=t.menuItems,r,i=0,s=n.length,o=t.layout.owner,u=t._asLayoutRoot;o.suspendLayouts(),t.captureChildElements(),t.hideTrigger(),o.resumeLayouts();for(;i<s;i++)r=n[i],r.suspendLayouts(),r.show(),r.resumeLayouts(u);n.length=0},showTrigger:function(e){var t=this,n=t.layout,r=n.owner,i=n.names,s=i.x,o=i.width,u=e.state.boxPlan,a=u.targetSize[o],f=e.childItems,l=f.length,c=t.menuTrigger,h,p,d,v;c.suspendLayouts(),c.show(),c.resumeLayouts(t._asLayoutRoot),a-=t.triggerTotalWidth,r.suspendLayouts(),t.menuItems.length=0;for(d=0;d<l;d++)h=f[d],v=h.props,v[s]+v[o]>a&&(p=h.target,t.menuItems.push(p),p.hide());r.resumeLayouts()},hideTrigger:function(){var e=this.menuTrigger;e&&e.hide()},beforeMenuShow:function(e){var t=this,n=t.menuItems,r=0,i=n.length,s,o,u=function(e,t){return e.isXType("buttongroup")&&!(t instanceof Ext.toolbar.Separator)};e.suspendLayouts(),t.clearMenu(),e.removeAll();for(;r<i;r++){s=n[r];if(!r&&s instanceof Ext.toolbar.Separator)continue;o&&(u(s,o)||u(o,s))&&e.add("-"),t.addComponentToMenu(e,s),o=s}e.items.length<1&&e.add(t.noItemsMenuText),e.resumeLayouts()},createMenuConfig:function(e,t){var n=this,r=Ext.apply({},e.initialConfig),i=e.toggleGroup;return Ext.copyTo(r,e,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]),Ext.apply(r,{text:e.overflowText||e.text,hideOnClick:t,destroyMenu:!1,listeners:{}}),e.isFormField?(r.value=e.getValue(),r.listeners.change=function(t,n,r){e.setValue(n)}):(i||e.enableToggle)&&Ext.apply(r,{hideOnClick:!1,group:i,checked:e.pressed,handler:function(t,n){e.onClick(n)}}),e.isButton&&!e.changeListenersAdded&&(e.on({textchange:n.onButtonAttrChange,iconchange:n.onButtonAttrChange,toggle:n.onButtonToggle}),e.changeListenersAdded=!0),delete r.margin,delete r.ownerCt,delete r.xtype,delete r.id,delete r.itemId,r},onButtonAttrChange:function(e){var t=e.overflowClone;t.suspendLayouts(),t.setText(e.text),t.setIcon(e.icon),t.setIconCls(e.iconCls),t.resumeLayouts(!0)},onButtonToggle:function(e,t){e.overflowClone.checked!==t&&e.overflowClone.setChecked(t)},addComponentToMenu:function(e,t){var n=this,r,i,s;if(t instanceof Ext.toolbar.Separator)e.add("-");else if(t.isComponent)if(t.isXType("splitbutton"))t.overflowClone=e.add(n.createMenuConfig(t,!0));else if(t.isXType("button"))t.overflowClone=e.add(n.createMenuConfig(t,!t.menu));else if(t.isXType("buttongroup")){i=t.items.items,s=i.length;for(r=0;r<s;r++)n.addComponentToMenu(e,i[r])}else t.overflowClone=e.add(Ext.create(Ext.getClassName(t),n.createMenuConfig(t)))},clearMenu:function(){var e=this.menu,t,n,r,i;if(e&&e.items){t=e.items.items,r=t.length;for(n=0;n<r;n++)i=t[n],i.setMenu&&i.setMenu(null)}},destroy:function(){var e=this.menuTrigger;e&&!this.layout.owner.items.contains(e)&&delete e.ownerCt,Ext.destroy(this.menu,e)}}),Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:Ext.layout.container.boxOverflow.None,alternateClassName:"Ext.layout.boxOverflow.Scroller",mixins:{observable:Ext.util.Observable},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(e,t){var n=this;n.layout=e,Ext.apply(n,t||{}),n.mixins.observable.constructor.call(n),n.addEvents("scroll"),n.scrollPosition=0,n.scrollSize=0},getPrefixConfig:function(){var e=this,t=e.layout,n=t.owner,r;return e.initCSSClasses(),r=Ext.layout.container.Box.prototype.innerCls+" "+e.beforeCtCls,n.plain&&(r+=" "+e.scrollerCls+"-plain"),{role:"presentation",cls:r,cn:{role:"presentation",id:n.id+t.names.beforeScrollerSuffix,cls:e.scrollerCls+" "+e.beforeScrollerCls,style:"display:none"}}},getSuffixConfig:function(){var e=this,t=e.layout,n=t.owner,r=Ext.layout.container.Box.prototype.innerCls+" "+e.afterCtCls;return n.plain&&(r+=" "+e.scrollerCls+"-plain"),{role:"presentation",cls:r,cn:{role:"presentation",id:n.id+t.names.afterScrollerSuffix,cls:e.scrollerCls+" "+e.afterScrollerCls,style:"display:none"}}},getOverflowCls:function(){return Ext.baseCSSPrefix+this.layout.direction+"-box-overflow-body"},initCSSClasses:function(){var e=this,t=Ext.baseCSSPrefix,n=e.layout,r=n.names,i=r.beforeX,s=r.afterX,o=e.getOwnerType(n.owner);e.beforeCtCls=e.beforeCtCls||t+"box-scroller-"+i,e.afterCtCls=e.afterCtCls||t+"box-scroller-"+s,e.beforeScrollerCls=e.beforeScrollerCls||t+o+"-scroll-"+i,e.afterScrollerCls=e.afterScrollerCls||t+o+"-scroll-"+s},beginLayout:function(e){var t=this.layout;e.innerCtScrollPos=this.getScrollPosition(),this.callParent(arguments)},completeLayout:function(e){var t=this,n=e.state.boxPlan,r=t.layout.names,i;n&&n.tooNarrow&&(i=e.childItems[e.childItems.length-1],t.scrollSize=i.props[r.x]+i.props[r.width],t.updateScrollButtons()),this.callParent(arguments)},finishedLayout:function(e){var t=this,n=t.layout,r=Math.min(t.getMaxScrollPosition(),e.innerCtScrollPos);n.innerCt[n.names.setScrollLeft](r)},handleOverflow:function(e){var t=this,n=t.layout.names.getWidth;return t.showScrollers(),{reservedSpace:t.beforeCt[n]()+t.afterCt[n]()}},captureChildElements:function(){var e=this,t=e.layout.owner.el,n,r,i,s,o,u;e.beforeCt||(u="-hover",s="-pressed",i=e.scrollerCls+u,o=e.scrollerCls+s,n=e.beforeScroller=t.getById(e.layout.owner.id+"-before-scroller"),r=e.afterScroller=t.getById(e.layout.owner.id+"-after-scroller"),e.beforeCt=n.up(""),e.afterCt=r.up(""),e.createWheelListener(),n.addClsOnOver(i),n.addClsOnOver(e.beforeScrollerCls+u),n.addClsOnClick(o),n.addClsOnClick(e.beforeScrollerCls+s),r.addClsOnOver(i),r.addClsOnOver(e.afterScrollerCls+u),r.addClsOnClick(o),r.addClsOnClick(e.afterScrollerCls+s),n.setVisibilityMode(Ext.Element.DISPLAY),r.setVisibilityMode(Ext.Element.DISPLAY),e.beforeRepeater=new Ext.util.ClickRepeater(n,{interval:e.scrollRepeatInterval,handler:e.scrollLeft,scope:e}),e.afterRepeater=new Ext.util.ClickRepeater(r,{interval:e.scrollRepeatInterval,handler:e.scrollRight,scope:e}))},createWheelListener:function(){var e=this;e.layout.innerCt.on({mousewheel:function(t){e.scrollBy(e.getWheelDelta(t)*e.wheelIncrement*-1,!1)},stopEvent:!0})},getWheelDelta:function(e){return e.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var e=this;e.captureChildElements(),e.beforeScroller.show(),e.afterScroller.show(),e.layout.owner.addClsWithUI(e.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var e=this;e.beforeScroller!==undefined&&(e.beforeScroller.hide(),e.afterScroller.hide(),e.layout.owner.removeClsWithUI(e.layout.direction==="vertical"?"vertical-scroller":"scroller"))},destroy:function(){var e=this;Ext.destroy(e.beforeRepeater,e.afterRepeater,e.beforeScroller,e.afterScroller,e.beforeCt,e.afterCt)},scrollBy:function(e,t){this.scrollTo(this.getScrollPosition()+e,t)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var e=this,t,n,r,i,s,o="-disabled";if(e.beforeScroller==null||e.afterScroller==null)return;t=e.atExtremeBefore()?"addCls":"removeCls",n=e.atExtremeAfter()?"addCls":"removeCls",s=e.scrollerCls+o,r=[s,e.beforeScrollerCls+o],i=[s,e.afterScrollerCls+o],e.beforeScroller[t](r),e.afterScroller[n](i),e.scrolling=!1},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var e=this,t=e.layout,n;return isNaN(e.scrollPosition)?n=t.innerCt[t.names.getScrollLeft]():n=e.scrollPosition,n},getMaxScrollPosition:function(){var e=this,t=e.layout,n=e.scrollSize-t.innerCt[t.names.getWidth]();return n<0?0:n},atExtremeBefore:function(){return!this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(e,t){var n=this,r=n.layout,i=r.names,s=n.getScrollPosition(),o=Ext.Number.constrain(e,0,n.getMaxScrollPosition());o!=s&&!n.scrolling&&(n.scrollPosition=NaN,t===undefined&&(t=n.animateScroll),r.innerCt[i.scrollTo](i.beforeScrollX,o,t?n.getScrollAnim():!1),t?n.scrolling=!0:n.updateScrollButtons(),n.fireEvent("scroll",n,o,t?n.getScrollAnim():!1))},scrollToItem:function(e,t){var n=this,r=n.layout,i=r.owner,s=r.names,o,u,a;e=n.getItem(e),e!==undefined&&(e==i.items.first()?a=0:e===i.items.last()?a=n.getMaxScrollPosition():(o=n.getItemVisibility(e),o.fullyVisible||(u=e.getBox(!1,!0),a=u[s.x],o.hiddenEnd&&(a-=n.layout.innerCt[s.getWidth]()-u[s.width]))),a!==undefined&&n.scrollTo(a,t))},getItemVisibility:function(e){var t=this,n=t.getItem(e).getBox(!0,!0),r=t.layout,i=r.names,s=n[i.x],o=s+n[i.width],u=t.getScrollPosition(),a=u+r.innerCt[i.getWidth]();return{hiddenStart:s<u,hiddenEnd:o>a,fullyVisible:s>u&&o<a}}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(e){return new this(e.x,e.y)}},constructor:function(e,t){return this.x=e!=null&&!isNaN(e)?e:0,this.y=t!=null&&!isNaN(t)?t:0,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(e){this.x=e.x,this.y=e.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(e){return this.x==e.x&&this.y==e.y},round:function(e){if(!isNaN(e)){var t=Math.pow(10,e);this.x=Math.round(this.x*t)/t,this.y=Math.round(this.y*t)/t}else this.x=Math.round(this.x),this.y=Math.round(this.y)},isZero:function(){return this.x==0&&this.y==0}}),Ext.define("Ext.util.Region",{statics:{getRegion:function(e){return Ext.fly(e).getRegion()},from:function(e){return new this(e.top,e.right,e.bottom,e.left)}},constructor:function(e,t,n,r){var i=this;i.y=i.top=i[1]=e,i.right=t,i.bottom=n,i.x=i.left=i[0]=r},contains:function(e){var t=this;return e.x>=t.x&&e.right<=t.right&&e.y>=t.y&&e.bottom<=t.bottom},intersect:function(e){var t=this,n=Math.max(t.y,e.y),r=Math.min(t.right,e.right),i=Math.min(t.bottom,e.bottom),s=Math.max(t.x,e.x);return i>n&&r>s?new this.self(n,r,i,s):!1},union:function(e){var t=this,n=Math.min(t.y,e.y),r=Math.max(t.right,e.right),i=Math.max(t.bottom,e.bottom),s=Math.min(t.x,e.x);return new this.self(n,r,i,s)},constrainTo:function(e){var t=this,n=Ext.Number.constrain;return t.top=t.y=n(t.top,e.y,e.bottom),t.bottom=n(t.bottom,e.y,e.bottom),t.left=t.x=n(t.left,e.x,e.right),t.right=n(t.right,e.x,e.right),t},adjust:function(e,t,n,r){var i=this;return i.top=i.y+=e,i.left=i.x+=r,i.right+=t,i.bottom+=n,i},getOutOfBoundOffset:function(e,t){if(!Ext.isObject(e))return e=="x"?this.getOutOfBoundOffsetX(t):this.getOutOfBoundOffsetY(t);t=e;var n=new Ext.util.Offset;return n.x=this.getOutOfBoundOffsetX(t.x),n.y=this.getOutOfBoundOffsetY(t.y),n},getOutOfBoundOffsetX:function(e){return e<=this.x?this.x-e:e>=this.right?this.right-e:0},getOutOfBoundOffsetY:function(e){return e<=this.y?this.y-e:e>=this.bottom?this.bottom-e:0},isOutOfBound:function(e,t){return Ext.isObject(e)?(t=e,this.isOutOfBoundX(t.x)||this.isOutOfBoundY(t.y)):e=="x"?this.isOutOfBoundX(t):this.isOutOfBoundY(t)},isOutOfBoundX:function(e){return e<this.x||e>this.right},isOutOfBoundY:function(e){return e<this.y||e>this.bottom},restrict:function(e,t,n){if(Ext.isObject(e)){var r;return n=t,t=e,t.copy?r=t.copy():r={x:t.x,y:t.y},r.x=this.restrictX(t.x,n),r.y=this.restrictY(t.y,n),r}return e=="x"?this.restrictX(t,n):this.restrictY(t,n)},restrictX:function(e,t){return t||(t=1),e<=this.x?e-=(e-this.x)*t:e>=this.right&&(e-=(e-this.right)*t),e},restrictY:function(e,t){return t||(t=1),e<=this.y?e-=(e-this.y)*t:e>=this.bottom&&(e-=(e-this.bottom)*t),e},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(e){var t=this;return t.top=t.y=t[1]=e.y,t.right=e.right,t.bottom=e.bottom,t.left=t.x=t[0]=e.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(e,t){arguments.length==1&&(t=e.y,e=e.x);var n=this;return n.top=n.y+=t,n.right+=e,n.bottom+=t,n.left=n.x+=e,n},round:function(){var e=this;return e.top=e.y=Math.round(e.y),e.right=Math.round(e.right),e.bottom=Math.round(e.bottom),e.left=e.x=Math.round(e.x),e},equals:function(e){return this.top==e.top&&this.right==e.right&&this.bottom==e.bottom&&this.left==e.left}}),Ext.define("Ext.dd.DragDropManager",{singleton:!0,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:Ext.baseCSSPrefix+"dd-drag-current",_execOnAll:function(e,t){var n=this.ids,r,i,s,o;for(r in n)if(n.hasOwnProperty(r)){o=n[r];for(i in o)if(o.hasOwnProperty(i)){s=o[i];if(!this.isTypeOfDD(s))continue;s[e].apply(s,t)}}},_onLoad:function(){this.init();var e=Ext.EventManager;e.on(document,"mouseup",this.handleMouseUp,this,!0),e.on(document,"mousemove",this.handleMouseMove,this,!0),e.on(window,"unload",this._onUnload,this,!0),e.on(window,"resize",this._onResize,this,!0)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(e,t){this.initialized||this.init(),this.ids[t]||(this.ids[t]={}),this.ids[t][e.id]=e},removeDDFromGroup:function(e,t){this.ids[t]||(this.ids[t]={});var n=this.ids[t];n&&n[e.id]&&delete n[e.id]},_remove:function(e,t){if(this.clearingAll)return;var n=this.ids,r=e.groups,i;for(i in r)r.hasOwnProperty(i)&&(t?delete n[i]:n[i]&&delete n[i][e.id]);delete this.handleIds[e.id]},regHandle:function(e,t){this.handleIds[e]||(this.handleIds[e]={}),this.handleIds[e][t]=t},isDragDrop:function(e){return this.getDDById(e)?!0:!1},getRelated:function(e,t){var n=[],r,i,s;for(r in e.groups)for(i in this.ids[r]){s=this.ids[r][i];if(!this.isTypeOfDD(s))continue;if(!t||s.isTarget)n[n.length]=s
}return n},isLegalTarget:function(e,t){var n=this.getRelated(e,!0),r,i;for(r=0,i=n.length;r<i;++r)if(n[r].id==t.id)return!0;return!1},isTypeOfDD:function(e){return e&&e.__ygDragDrop},isHandle:function(e,t){return this.handleIds[e]&&this.handleIds[e][t]},getDDById:function(e){var t,n;for(t in this.ids){n=this.ids[t][e];if(n instanceof Ext.dd.DDTarget)return n}return null},handleMouseDown:function(e,t){var n=this,r;Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddDisable(),n.dragCurrent&&n.handleMouseUp(e),n.mousedownEvent=e.clone(),n.currentTarget=e.getTarget(),n.dragCurrent=t,r=t.getEl(),Ext.isIE9m&&r.setCapture&&r.setCapture(),n.startX=e.getPageX(),n.startY=e.getPageY(),n.deltaX=n.startX-r.offsetLeft,n.deltaY=n.startY-r.offsetTop,n.dragThreshMet=!1,n.clickTimeout=setTimeout(function(){n.startDrag(n.startX,n.startY)},n.clickTimeThresh)},startDrag:function(e,t){var n=this,r=n.dragCurrent,i;clearTimeout(n.clickTimeout),r&&(r.b4StartDrag(e,t),r.startDrag(e,t),i=r.getDragEl(),i&&Ext.fly(i).addCls(n.dragCls)),n.dragThreshMet=!0},handleMouseUp:function(e){var t=this;Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddEnable();if(!t.dragCurrent)return;Ext.isIE&&document.releaseCapture&&document.releaseCapture(),clearTimeout(t.clickTimeout),t.dragThreshMet&&t.fireEvents(e,!0),t.stopDrag(e),t.stopEvent(e)},stopEvent:function(e){this.stopPropagation&&e.stopPropagation(),this.preventDefault&&e.preventDefault()},stopDrag:function(e){var t=this,n=t.dragCurrent,r;n&&(t.dragThreshMet&&(r=n.getDragEl(),r&&Ext.fly(r).removeCls(t.dragCls),n.b4EndDrag(e),n.endDrag(e)),t.dragCurrent.onMouseUp(e)),t.dragCurrent=null,t.dragOvers={}},handleMouseMove:function(e){var t=this,n=t.dragCurrent,r,i;return n?(t.dragThreshMet||(r=Math.abs(t.startX-e.getPageX()),i=Math.abs(t.startY-e.getPageY()),(r>t.clickPixelThresh||i>t.clickPixelThresh)&&t.startDrag(t.startX,t.startY)),t.dragThreshMet&&(n.b4Drag(e),n.onDrag(e),n.moveOnly||t.fireEvents(e,!1)),t.stopEvent(e),!0):!0},fireEvents:function(e,t){var n=this,r=n.dragCurrent,i,s,o=e.getPoint(),u,a,f=[],l=[],c=[],h=[],p=[],d=[],v,m,g,y,b;if(!r||r.isLocked())return;!n.notifyOccluded&&(!Ext.supports.PointerEvents||Ext.isIE10m||Ext.isOpera)&&!(r.deltaX<0||r.deltaY<0)&&(i=r.getDragEl(),s=i.style.top,i.style.top="-10000px",v=e.getXY(),e.target=document.elementFromPoint(v[0],v[1]),i.style.top=s);for(g in n.dragOvers){u=n.dragOvers[g];if(!n.isTypeOfDD(u))continue;n.notifyOccluded?this.isOverTarget(o,u,n.mode)||c.push(u):e.within(u.getEl())||c.push(u),l[g]=!0,delete n.dragOvers[g]}for(b in r.groups){if("string"!=typeof b)continue;for(g in n.ids[b]){u=n.ids[b][g];if(n.isTypeOfDD(u)&&(a=u.getEl())&&u.isTarget&&!u.isLocked()&&Ext.fly(a).isVisible(!0)&&(u!=r||r.ignoreSelf===!1))if(n.notifyOccluded)(u.zIndex=n.getZIndex(a))!==-1&&(m=!0),f.push(u);else if(e.within(u.getEl())){f.push(u);break}}}m&&Ext.Array.sort(f,n.byZIndex);for(g=0,y=f.length;g<y;g++){u=f[g];if(n.isOverTarget(o,u,n.mode)){t?p.push(u):(l[u.id]?h.push(u):d.push(u),n.dragOvers[u.id]=u);if(!n.notifyOccluded)break}}if(n.mode)c.length&&(r.b4DragOut(e,c),r.onDragOut(e,c)),d.length&&r.onDragEnter(e,d),h.length&&(r.b4DragOver(e,h),r.onDragOver(e,h)),p.length&&(r.b4DragDrop(e,p),r.onDragDrop(e,p));else{for(g=0,y=c.length;g<y;++g)r.b4DragOut(e,c[g].id),r.onDragOut(e,c[g].id);for(g=0,y=d.length;g<y;++g)r.onDragEnter(e,d[g].id);for(g=0,y=h.length;g<y;++g)r.b4DragOver(e,h[g].id),r.onDragOver(e,h[g].id);for(g=0,y=p.length;g<y;++g)r.b4DragDrop(e,p[g].id),r.onDragDrop(e,p[g].id)}t&&!p.length&&r.onInvalidDrop(e)},getZIndex:function(e){var t=document.body,n,r=-1;e=Ext.getDom(e);while(e!==t)isNaN(n=Number(Ext.fly(e).getStyle("zIndex")))||(r=n),e=e.parentNode;return r},byZIndex:function(e,t){return e.zIndex<t.zIndex},getBestMatch:function(e){var t=null,n=e.length,r,i;if(n==1)t=e[0];else for(r=0;r<n;++r){i=e[r];if(i.cursorIsOver){t=i;break}if(!t||t.overlap.getArea()<i.overlap.getArea())t=i}return t},refreshCache:function(e){var t,n,r,i;for(t in e){if("string"!=typeof t)continue;for(n in this.ids[t])r=this.ids[t][n],this.isTypeOfDD(r)&&(i=this.getLocation(r),i?this.locationCache[r.id]=i:delete this.locationCache[r.id])}},verifyEl:function(e){if(e){var t;if(Ext.isIE)try{t=e.offsetParent}catch(n){}else t=e.offsetParent;if(t)return!0}return!1},getLocation:function(e){if(!this.isTypeOfDD(e))return null;if(e.getRegion)return e.getRegion();var t=e.getEl(),n,r,i,s,o,u,a,f,l;try{n=Ext.Element.getXY(t)}catch(c){}return n?(r=n[0],i=r+t.offsetWidth,s=n[1],o=s+t.offsetHeight,u=s-e.padding[0],a=i+e.padding[1],f=o+e.padding[2],l=r-e.padding[3],new Ext.util.Region(u,a,f,l)):null},isOverTarget:function(e,t,n){var r=this.locationCache[t.id],i,s,o,u,a;if(!r||!this.useCache)r=this.getLocation(t),this.locationCache[t.id]=r;return r?(t.cursorIsOver=r.contains(e),i=this.dragCurrent,!i||!i.getTargetCoord||!n&&!i.constrainX&&!i.constrainY?t.cursorIsOver:(t.overlap=null,s=i.getTargetCoord(e.x,e.y),o=i.getDragEl(),u=new Ext.util.Region(s.y,s.x+o.offsetWidth,s.y+o.offsetHeight,s.x),a=u.intersect(r),a?(t.overlap=a,n?!0:t.cursorIsOver):!1)):!1},_onUnload:function(e,t){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var e=this,t=e.elementCache,n;e.dragCurrent&&(e.stopDrag(),e.dragCurrent=null),e.clearingAll=!0,e._execOnAll("unreg",[]),delete e.clearingAll;for(n in t)delete t[n];e.elementCache={},e.ids={},e.handleIds={}},elementCache:{},getElWrapper:function(e){var t=this.elementCache[e];if(!t||!t.el)t=this.elementCache[e]=new this.ElementWrapper(Ext.getDom(e));return t},getElement:function(e){return Ext.getDom(e)},getCss:function(e){var t=Ext.getDom(e);return t?t.style:null},ElementWrapper:function(e){this.el=e||null,this.id=this.el&&e.id,this.css=this.el&&e.style},getPosX:function(e){return Ext.Element.getX(e)},getPosY:function(e){return Ext.Element.getY(e)},swapNode:function(e,t){if(e.swapNode)e.swapNode(t);else{var n=t.parentNode,r=t.nextSibling;r==e?n.insertBefore(e,t):t==e.nextSibling?n.insertBefore(t,e):(e.parentNode.replaceChild(t,e),n.insertBefore(e,r))}},getScroll:function(){var e=window.document,t=e.documentElement,n=e.body,r=0,i=0;return Ext.isGecko4?(r=window.scrollYOffset,i=window.scrollXOffset):t&&(t.scrollTop||t.scrollLeft)?(r=t.scrollTop,i=t.scrollLeft):n&&(r=n.scrollTop,i=n.scrollLeft),{top:r,left:i}},getStyle:function(e,t){return Ext.fly(e).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,t){var n=Ext.Element.getXY(t);Ext.Element.setXY(e,n)},numericSort:function(e,t){return e-t},_timeoutCount:0,_addListeners:function(){document?this._onLoad():this._timeoutCount<=2e3&&(setTimeout(this._addListeners,10),document&&document.body&&(this._timeoutCount+=1))},handleWasClicked:function(e,t){if(this.isHandle(t,e.id))return!0;var n=e.parentNode;while(n){if(this.isHandle(t,n.id))return!0;n=n.parentNode}return!1}},function(){this._addListeners()}),Ext.define("Ext.layout.container.Box",{alias:["layout.box"],extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.BoxLayout",defaultMargins:{top:0,right:0,bottom:0,left:0},padding:0,pack:"start",flex:undefined,stretchMaxPartner:undefined,alignRoundingMethod:"round",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",targetElCls:Ext.baseCSSPrefix+"box-target",innerCls:Ext.baseCSSPrefix+"box-inner",availableSpaceOffset:0,reserveOffset:!0,manageMargins:!0,createsInnerCt:!0,childEls:["innerCt","targetEl"],renderTpl:["{%var oc,l=values.$comp.layout,oh=l.overflowHandler;","if (oh.getPrefixConfig!==Ext.emptyFn) {","if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)","}%}",'<div id="{ownerId}-innerCt" class="{[l.innerCls]} {[oh.getOverflowCls()]}" role="presentation">','<div id="{ownerId}-targetEl" class="{targetElCls}" role="presentation">',"{%this.renderBody(out, values)%}","</div>","</div>","{%if (oh.getSuffixConfig!==Ext.emptyFn) {","if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)","}%}",{disableFormats:!0,definitions:"var dh=Ext.DomHelper;"}],constructor:function(e){var t=this,n;t.callParent(arguments),t.flexSortFn=Ext.Function.bind(t.flexSort,t),t.initOverflowHandler(),n=typeof t.padding;if(n=="string"||n=="number")t.padding=Ext.util.Format.parseBox(t.padding),t.padding.height=t.padding.top+t.padding.bottom,t.padding.width=t.padding.left+t.padding.right},_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(e,t){var n=this,r=n.sizePolicy,i=n.align,s=e.flex,o=i,u=n.names,a=e[u.width],f=e[u.height],l=n._percentageRe,c=l.test(a),h=i=="stretch",p=i=="stretchmax",d=n.constrainAlign;!t&&(h||s||c||d&&!p)&&(t=n.owner.getSizeModel()),h?!l.test(f)&&t[u.height].shrinkWrap&&(o="stretchmax"):p||(l.test(f)?o="stretch":d&&!t[u.height].shrinkWrap?o="stretchmax":o="");if(s||c)t[u.width].shrinkWrap||(r=r.flex);return r[o]},flexSort:function(e,t){var n=this.names.maxWidth,r=this.names.minWidth,i=Infinity,s=e.target,o=t.target,u=0,a,f,l,c,h,p;l=s[n]||i,c=o[n]||i,a=s[r]||0,f=o[r]||0,h=isFinite(a)||isFinite(f),p=isFinite(l)||isFinite(c);if(h||p)p&&(u=l-c),u===0&&h&&(u=f-a);return u},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},roundFlex:function(e){return Math.ceil(e)},beginCollapse:function(e){var t=this;t.direction==="vertical"&&e.collapsedVertical()?(e.collapseMemento.capture(["flex"]),delete e.flex):t.direction==="horizontal"&&e.collapsedHorizontal()&&(e.collapseMemento.capture(["flex"]),delete e.flex)},beginExpand:function(e){e.collapseMemento.restore(["flex"])},beginLayout:function(e){var t=this,n=t.owner,r=n.stretchMaxPartner,i=t.innerCt.dom.style,s=t.names;e.boxNames=s,t.overflowHandler.beginLayout(e),typeof r=="string"&&(r=Ext.getCmp(r)||n.query(r)[0]),e.stretchMaxPartner=r&&e.context.getCmp(r),t.callParent(arguments),e.innerCtContext=e.getEl("innerCt",t),t.scrollParallel=n.scrollFlags[s.x],t.scrollPerpendicular=n.scrollFlags[s.y],t.scrollParallel&&(t.scrollPos=n.getTargetEl().dom[s.scrollLeft]),i.width="",i.height=""},beginLayoutCycle:function(e,t){var n=this,r=n.align,i=e.boxNames,s=n.pack,o=i.heightModel;n.overflowHandler.beginLayoutCycle(e,t),n.callParent(arguments),e.parallelSizeModel=e[i.widthModel],e.perpendicularSizeModel=e[o],e.boxOptions={align:r={stretch:r=="stretch",stretchmax:r=="stretchmax",center:r==i.center,bottom:r==i.afterY},pack:s={center:s=="center",end:s=="end"}},r.stretch&&e.perpendicularSizeModel.shrinkWrap&&(r.stretchmax=!0,r.stretch=!1),r.nostretch=!r.stretch&&!r.stretchmax,e.parallelSizeModel.shrinkWrap&&(s.center=s.end=!1),n.cacheFlexes(e),n.targetEl.setWidth(2e4)},cacheFlexes:function(e){var t=this,n=e.boxNames,r=n.widthModel,i=n.heightModel,s=e.boxOptions.align.nostretch,o=0,u=e.childItems,a=u.length,f=[],l=0,c=n.minWidth,h=t._percentageRe,p=0,d=0,v,m,g,y;while(a--)m=u[a],v=m.target,m[r].calculated&&(m.flex=g=v.flex,g?(o+=g,f.push(m),l+=v[c]||0):(y=h.exec(v[n.width]),m.percentageParallel=parseFloat(y[1])/100,++p)),s&&m[i].calculated&&(y=h.exec(v[n.height]),m.percentagePerpendicular=parseFloat(y[1])/100,++d);e.flexedItems=f,e.flexedMinSize=l,e.totalFlex=o,e.percentageWidths=p,e.percentageHeights=d,Ext.Array.sort(f,t.flexSortFn)},calculate:function(e){var t=this,n=t.getContainerSize(e),r=e.boxNames,i=e.state,s=i.boxPlan||(i.boxPlan={}),o=e.targetContext;s.targetSize=n,i.parallelDone||(i.parallelDone=t.calculateParallel(e,r,s)),i.perpendicularDone||(i.perpendicularDone=t.calculatePerpendicular(e,r,s)),i.parallelDone&&i.perpendicularDone?(t.owner.dock&&(Ext.isIE7m||Ext.isIEQuirks)&&!t.owner.width&&!t.horizontal&&(s.isIEVerticalDock=!0,s.calculatedWidth=s.maxSize+e.getPaddingInfo().width+e.getFrameInfo().width,o!==e&&(s.calculatedWidth+=o.getPaddingInfo().width)),t.publishInnerCtSize(e,t.reserveOffset?t.availableSpaceOffset:0),t.done&&e.boxOptions.align.stretchmax&&!i.stretchMaxDone&&(t.calculateStretchMax(e,r,s),i.stretchMaxDone=!0),t.overflowHandler.calculate(e)):t.done=!1},calculateParallel:function(e,t,n){var r=this,i=t.width,s=e.childItems,o=t.beforeX,u=t.afterX,a=t.setWidth,f=s.length,l=e.flexedItems,c=l.length,h=e.boxOptions.pack,p=r.padding,d=n.targetSize,v=d[i],m=0,g=p[o],y=g+p[u]+r.scrollOffset+(r.reserveOffset?r.availableSpaceOffset:0),b=Ext.getScrollbarSize()[t.width],w,E,S,x,T,N,C,k,L,A,O;if(!e.parallelSizeModel.shrinkWrap&&!d[t.gotWidth])return!1;if(b&&r.scrollPerpendicular&&e.parallelSizeModel.shrinkWrap&&!e.boxOptions.align.stretch&&!e.perpendicularSizeModel.shrinkWrap){if(!e.state.perpendicularDone)return!1;L=!0}for(w=0;w<f;++w){T=s[w],E=T.marginInfo||T.getMarginInfo(),m+=E[i];if(!T[t.widthModel].calculated){A=T.getProp(i),y+=A;if(isNaN(y))return!1}}y+=m;if(e.percentageWidths){O=v-m;if(isNaN(O))return!1;for(w=0;w<f;++w)T=s[w],T.percentageParallel&&(A=Math.ceil(O*T.percentageParallel),A=T.setWidth(A),y+=A)}if(e.parallelSizeModel.shrinkWrap)n.availableSpace=0,n.tooNarrow=!1;else{n.availableSpace=v-y,n.tooNarrow=n.availableSpace<e.flexedMinSize;if(n.tooNarrow&&Ext.getScrollbarSize()[t.height]&&r.scrollParallel&&e.state.perpendicularDone){e.state.perpendicularDone=!1;for(w=0;w<f;++w)s[w].invalidate()}}k=y,S=n.availableSpace,x=e.totalFlex;for(w=0;w<c;w++)T=l[w],N=T.flex,C=r.roundFlex(N/x*S),C=T[a](C),k+=C,S=Math.max(0,S-C),x-=N;h.center?(g+=S/2,g<0&&(g=0)):h.end&&(g+=S);for(w=0;w<f;++w)T=s[w],E=T.marginInfo,g+=E[o],T.setProp(t.x,g),g+=E[u]+T.props[i];return k+=e.targetContext.getPaddingInfo()[i],e.state.contentWidth=k,L&&e.peek(t.contentHeight)>n.targetSize[t.height]&&(k+=b,e[t.hasOverflowY]=!0,e.target.componentLayout[t.setWidthInDom]=!0,e[t.invalidateScrollY]=Ext.isStrict&&Ext.isIE8),e[t.setContentWidth](k),!0},calculatePerpendicular:function(e,t,n){var r=this,i=e.perpendicularSizeModel.shrinkWrap,s=n.targetSize,o=e.childItems,u=o.length,a=Math.max,f=t.height,l=t.setHeight,c=t.beforeY,h=t.y,p=r.padding,d=p[c],v=s[f]-d-p[t.afterY],m=e.boxOptions.align,g=m.stretch,y=m.stretchmax,b=m.center,w=m.bottom,E=r.constrainAlign,S=0,x=0,T=r.onBeforeConstrainInvalidateChild,N=r.onAfterConstrainInvalidateChild,C=Ext.getScrollbarSize().height,k,L,A,O,M,_,D,P,H,B,j;if(g||(b||w)&&!i)if(isNaN(v))return!1;if(!g&&!e.parallelSizeModel.shrinkWrap&&!e.state.parallelDone&&r.scrollParallel)return!1;r.scrollParallel&&n.tooNarrow&&(i?B=!0:(v-=C,n.targetSize[f]-=C));if(g)_=v;else{for(L=0;L<u;L++){D=o[L],O=(D.marginInfo||D.getMarginInfo())[f];if(!(j=D.percentagePerpendicular))A=D.getProp(f);else{++x;if(i)continue;A=j*v-O,A=D[t.setHeight](A)}!i&&E&&D[t.heightModel].shrinkWrap&&A>v&&(D.invalidate({before:T,after:N,layout:r,childHeight:v,names:t}),e.state.parallelDone=!1);if(isNaN(S=a(S,A+O,D.target[t.minHeight]||0)))return!1}B&&(S+=C,e[t.hasOverflowX]=!0,e.target.componentLayout[t.setHeightInDom]=!0,e[t.invalidateScrollX]=Ext.isStrict&&Ext.isIE8),P=e.stretchMaxPartner;if(P){e.setProp("maxChildHeight",S),H=P.childItems;if(H&&H.length){S=a(S,P.getProp("maxChildHeight"));if(isNaN(S))return!1}}e[t.setContentHeight](S+r.padding[f]+e.targetContext.getPaddingInfo()[f]),B&&(S-=C),n.maxSize=S;if(y)_=S;else if(b||w||x)E?_=i?S:v:_=i?S:a(v,S),_-=e.innerCtContext.getBorderInfo()[f]}for(L=0;L<u;L++)D=o[L],O=D.marginInfo||D.getMarginInfo(),k=d+O[c],g?D[l](_-O[f]):(j=D.percentagePerpendicular,i&&j&&(O=D.marginInfo||D.getMarginInfo(),A=j*_-O[f],A=D.setHeight(A)),b?(M=_-D.props[f],M>0&&(k=d+Math[r.alignRoundingMethod](M/2))):w&&(k=a(0,_-k-D.props[f]))),D.setProp(h,k);return!0},onBeforeConstrainInvalidateChild:function(e,t){var n=t.names.heightModel;e[n].constrainedMin||(e[n]=Ext.layout.SizeModel.calculated)},onAfterConstrainInvalidateChild:function(e,t){var n=t.names;e.setProp(n.beforeY,0),e[n.heightModel].calculated&&e[n.setHeight](t.childHeight)},calculateStretchMax:function(e,t,n){var r=this,i=t.height,s=t.width,o=e.childItems,u=o.length,a=n.maxSize,f=r.onBeforeStretchMaxInvalidateChild,l=r.onAfterStretchMaxInvalidateChild,c,h,p,d;for(p=0;p<u;++p)c=o[p],h=c.props,d=a-c.getMarginInfo()[i],(d!=h[i]||c[t.heightModel].constrained)&&c.invalidate({before:f,after:l,layout:r,childWidth:h[s],childHeight:d,childX:h.x,childY:h.y,names:t})},onBeforeStretchMaxInvalidateChild:function(e,t){var n=t.names.heightModel;e[n].constrainedMax||(e[n]=Ext.layout.SizeModel.calculated)},onAfterStretchMaxInvalidateChild:function(e,t){var n=t.names,r=t.childHeight,i=t.childWidth;e.setProp("x",t.childX),e.setProp("y",t.childY),e[n.heightModel].calculated&&e[n.setHeight](r),e[n.widthModel].calculated&&e[n.setWidth](i)},completeLayout:function(e){var t=this,n=e.boxNames,r=e.invalidateScrollX,i=e.invalidateScrollY,s,o,u,a,f;t.overflowHandler.completeLayout(e);if(r||i){o=t.getTarget(),s=o.dom,f=s.style,r&&(u=o.getStyle("overflowX"),u=="auto"?(u=f.overflowX,f.overflowX="scroll"):r=!1),i&&(a=o.getStyle("overflowY"),a=="auto"?(a=f.overflowY,f.overflowY="scroll"):i=!1);if(r||i)s.scrollWidth,r&&(f.overflowX=u),i&&(f.overflowY=a)}t.scrollParallel&&(t.owner.getTargetEl().dom[n.scrollLeft]=t.scrollPos)},finishedLayout:function(e){this.overflowHandler.finishedLayout(e),this.callParent(arguments),this.targetEl.setWidth(e.innerCtContext.props.width)},publishInnerCtSize:function(e,t){var n=this,r=e.boxNames,i=r.height,s=r.width,o=e.boxOptions.align,u=n.owner.dock,a=n.padding,f=e.state.boxPlan,l=f.targetSize,c=l[i],h=e.innerCtContext,p=(e.parallelSizeModel.shrinkWrap||f.tooNarrow&&n.scrollParallel?e.state.contentWidth-e.targetContext.getPaddingInfo()[s]:l[s])-(t||0),d;o.stretch?d=c:(d=f.maxSize+a[r.beforeY]+a[r.afterY]+h.getBorderInfo()[i],!e.perpendicularSizeModel.shrinkWrap&&(o.center||o.bottom)&&(d=Math.max(c,d))),h[r.setWidth](p),h[r.setHeight](d),isNaN(p+d)&&(n.done=!1),f.calculatedWidth&&(u=="left"||u=="right")&&e.setWidth(f.calculatedWidth,!0,!0)},onRemove:function(e,t){var n=this,r=n.names,i;n.callParent(arguments),n.overflowHandler&&n.overflowHandler.onRemove(e),e.layoutMarginCap==n.id&&delete e.layoutMarginCap,!n.owner.destroying&&!t&&e.rendered&&(i=e.getEl(),i.setStyle(r.beforeY,""),i.setStyle(r.beforeX,""))},initOverflowHandler:function(){var e=this,t=e.overflowHandler,n,r;typeof t=="string"&&(t={type:t}),n="None",t&&t.type!==undefined&&(n=t.type),r=Ext.layout.container.boxOverflow[n],r[e.type]&&(r=r[e.type]),e.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+n,e,t)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var e=this;Ext.destroy(e.innerCt,e.overflowHandler),e.flexSortFn=e.innerCt=null,e.callParent(arguments)},getRenderData:function(){var e=this.callParent();return e.targetElCls=this.targetElCls,e}}),Ext.define("Ext.layout.container.HBox",{alias:["layout.hbox"],extend:Ext.layout.container.Box,alternateClassName:"Ext.layout.HBoxLayout",align:"top",constrainAlign:!1,type:"hbox",direction:"horizontal",horizontal:!0,names:{beforeX:"left",beforeScrollX:"left",beforeScrollerSuffix:"-before-scroller",afterScrollerSuffix:"-after-scroller",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}}),Ext.define("Ext.layout.container.VBox",{alias:["layout.vbox"],extend:Ext.layout.container.Box,alternateClassName:"Ext.layout.VBoxLayout",align:"left",constrainAlign:!1,type:"vbox",direction:"vertical",horizontal:!1,names:{beforeX:"top",beforeScrollX:"top",beforeScrollerSuffix:"-before-scroller",afterScrollerSuffix:"-after-scroller",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}),Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:!0,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",vertical:!1,enableOverflow:!1,menuTriggerCls:Ext.baseCSSPrefix+"toolbar-more-icon",trackMenus:!0,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var e=this;!e.layout&&e.enableOverflow&&(e.layout={overflowHandler:"Menu"});if(e.dock==="right"||e.dock==="left")e.vertical=!0;e.layout=Ext.applyIf(Ext.isString(e.layout)?{type:e.layout}:e.layout||{},{type:e.vertical?"vbox":"hbox",align:e.vertical?"stretchmax":"middle"}),e.vertical&&e.addClsWithUI("vertical"),e.ui==="footer"&&(e.ignoreBorderManagement=!0),e.callParent(),e.addEvents("overflowchange")},getRefItems:function(e){var t=this,n=t.callParent(arguments),r=t.layout,i;return e&&t.enableOverflow&&(i=r.overflowHandler,i&&i.menu&&(n=n.concat(i.menu.getRefItems(e)))),n},lookupComponent:function(e){var t=arguments;if(typeof e=="string"){var n=Ext.toolbar.Toolbar,r=n.shortcutsHV[this.vertical?1:0][e]||n.shortcuts[e];typeof r=="string"?e={xtype:r}:r?e=Ext.apply({},r):e={xtype:"tbtext",text:e},this.applyDefaults(e),t=[e]}return this.callParent(t)},applyDefaults:function(e){return Ext.isString(e)||(e=this.callParent(arguments)),e},trackMenu:function(e,t){if(this.trackMenus&&e.menu){var n=t?"mun":"mon",r=this;r[n](e,"mouseover",r.onButtonOver,r),r[n](e,"menushow",r.onButtonMenuShow,r),r[n](e,"menuhide",r.onButtonMenuHide,r)}},onBeforeAdd:function(e){var t=this,n=e.isButton;n&&t.defaultButtonUI&&e.ui==="default"&&!e.hasOwnProperty("ui")?e.ui=t.defaultButtonUI:(n||e.isFormField)&&t.ui!=="footer"&&(e.ui=e.ui+"-toolbar",e.addCls(e.baseCls+"-toolbar")),e instanceof Ext.toolbar.Separator&&e.setUI(t.vertical?"vertical":"horizontal"),t.callParent(arguments)},onAdd:function(e){this.callParent(arguments),this.trackMenu(e)},onRemove:function(e){this.callParent(arguments),this.trackMenu(e,!0)},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(e){this.activeMenuBtn&&this.activeMenuBtn!=e&&(this.activeMenuBtn.hideMenu(),e.showMenu(),this.activeMenuBtn=e)},onButtonMenuShow:function(e){this.activeMenuBtn=e},onButtonMenuHide:function(e){delete this.activeMenuBtn}}),Ext.define("Ext.layout.component.Dock",{extend:Ext.layout.component.Component,alias:"layout.dock",alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:!0,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:!1,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var e=this,t,n;e.callParent(),t=e.getRenderTarget(),n=e.getDockedItems(),e.finishRenderItems(t,n)},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},handleItemBorders:function(){var e=this,t=e.owner,n,r,i=e.lastDockedItems,s=e.borders,o=t.dockedItems.generation,u=e.noBorderClassesSides,a=e.borderWidthProps,f,l,c,h,p,d=e.collapsed;if(e.initializedBorders==o||t.border&&!t.manageBodyBorders)return;e.initializedBorders=o,e.collapsed=!1,e.lastDockedItems=r=e.getLayoutItems(),e.collapsed=d,n={top:[],right:[],bottom:[],left:[]};for(f=0,l=r.length;f<l;f++){c=r[f],h=c.dock;if(c.ignoreBorderManagement)continue;n[h].satisfied||(n[h].push(c),n[h].satisfied=!0),!n.top.satisfied&&h!=="bottom"&&n.top.push(c),!n.right.satisfied&&h!=="left"&&n.right.push(c),!n.bottom.satisfied&&h!=="top"&&n.bottom.push(c),!n.left.satisfied&&h!=="right"&&n.left.push(c)}if(i)for(f=0,l=i.length;f<l;f++)c=i[f],!c.isDestroyed&&!c.ignoreBorderManagement&&!t.manageBodyBorders&&c.removeCls(e.noBorderClasses);if(s)for(p in s)t.manageBodyBorders&&s[p].satisfied&&t.setBodyStyle(a[p],"");for(p in n){l=n[p].length;if(!t.manageBodyBorders){for(f=0;f<l;f++)n[p][f].addCls(u[p]);(!n[p].satisfied&&!t.bodyBorder||t.bodyBorder===!1)&&t.addBodyCls(u[p])}else n[p].satisfied&&t.setBodyStyle(a[p],"1px")}e.borders=n},beforeLayoutCycle:function(e){var t=this,n=t.owner,r=t.sizeModels.shrinkWrap,i=n.shrinkWrapDock,s,o;n.collapsed&&(n.collapsedVertical()?(o=!0,e.measureDimensions=1):(s=!0,e.measureDimensions=2)),e.collapsedVert=o,e.collapsedHorz=s,o?e.heightModel=r:s&&(e.widthModel=r),i=i===!0?3:i||0,e.shrinkWrapDockHeight=i&1&&e.heightModel.shrinkWrap,e.shrinkWrapDockWidth=i&2&&e.widthModel.shrinkWrap},beginLayout:function(e){var t=this,n=t.owner,r=t.getLayoutItems(),i=e.context,s=r.length,o,u,a,f,l,c,h;t.callParent(arguments),c=n.getCollapsed(),c!==t.lastCollapsedState&&Ext.isDefined(t.lastCollapsedState)&&(t.owner.collapsed?(e.isCollapsingOrExpanding=1,n.addClsWithUI(n.collapsedCls)):(e.isCollapsingOrExpanding=2,n.removeClsWithUI(n.collapsedCls),e.lastCollapsedState=t.lastCollapsedState)),t.lastCollapsedState=c,e.dockedItems=o=[];for(u=0;u<s;u++)a=r[u],a.rendered&&(h=a.dock,f=i.getCmp(a),f.dockedAt={x:0,y:0},f.offsets=l=Ext.Element.parseBox(a.offsets||0),f.horizontal=h=="top"||h=="bottom",l.width=l.left+l.right,l.height=l.top+l.bottom,o.push(f));e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e){var t=this,n=e.dockedItems,r=n.length,i=t.owner,s=i.frameBody,o=t.lastHeightModel,u,a,f;t.callParent(arguments),t.owner.manageHeight?t.lastBodyDisplay&&(i.body.dom.style.display=t.lastBodyDisplay=""):(t.lastBodyDisplay!=="inline-block"&&(i.body.dom.style.display=t.lastBodyDisplay="inline-block"),o&&o.shrinkWrap&&!e.heightModel.shrinkWrap&&(i.body.dom.style.marginBottom="")),e.widthModel.auto&&(e.widthModel.shrinkWrap&&i.el.setWidth(null),i.body.setWidth(null),s&&s.setWidth(null)),e.heightModel.auto&&(i.body.setHeight(null),s&&s.setHeight(null)),e.collapsedVert?e.setContentHeight(0):e.collapsedHorz&&e.setContentWidth(0);for(u=0;u<r;u++){a=n[u].target,f=a.dock;if(f=="right")a.setLocalX(0);else if(f!="left")continue}},calculate:function(e){var t=this,n=t.measureAutoDimensions(e,e.measureDimensions),r=e.state,i=r.horzDone,s=r.vertDone,o=e.bodyContext,u,a,f,l,c;e.borderInfo||e.getBorderInfo(),e.paddingInfo||e.getPaddingInfo(),e.frameInfo||e.getFrameInfo(),o.borderInfo||o.getBorderInfo(),o.paddingInfo||o.getPaddingInfo(),e.frameBorder||((u=e.framing)?(e.frameBorder=u.border,e.framePadding=u.padding):(e.frameBorder=e.borderInfo,e.framePadding=e.paddingInfo)),a=!i&&t.createAxis(e,n.contentWidth,e.widthModel,t.horzAxisProps,e.collapsedHorz),f=!s&&t.createAxis(e,n.contentHeight,e.heightModel,t.vertAxisProps,e.collapsedVert);for(l=0,c=e.dockedItems.length;c--;++l)a&&t.dockChild(e,a,c,l),f&&t.dockChild(e,f,c,l);a&&t.finishAxis(e,a)&&(r.horzDone=i=a),f&&t.finishAxis(e,f)&&(r.vertDone=s=f),i&&s&&t.finishConstraints(e,i,s)?t.finishPositions(e,i,s):t.done=!1},createAxis:function(e,t,n,r,i){var s=this,o=0,u=s.owner,a=u[r.maxSize],f=u[r.minSize]||0,l=r.dockBegin,c=r.dockEnd,h=r.pos,p=r.size,d=a!=null,v=n.shrinkWrap,m,g,y,b;return v?i?b=0:(m=e.bodyContext,b=t+m.borderInfo[p]):(g=e.frameBorder,y=e.framePadding,o=g[l]+y[l],b=e.getProp(p)-(g[c]+y[c])),{shrinkWrap:n.shrinkWrap,sizeModel:n,initialBegin:o,begin:o,end:b,collapsed:i,horizontal:r.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:b-o,maxChildSize:0,hasMinMaxConstraints:(f||d)&&n.shrinkWrap,minSize:f,maxSize:d?a:1e9,bodyPosProp:s.owner.manageHeight?h:r.marginBegin,dockBegin:l,dockEnd:c,posProp:h,sizeProp:p,setSize:r.setSize,shrinkWrapDock:e[r.shrinkWrapDock],sizeModelName:r.sizeModel,dockedPixelsEnd:0}},dockChild:function(e,t,n,r){var i=this,s=e.dockedItems[t.shrinkWrap?n:r],o=s.target,u=o.dock,a=t.sizeProp,f,l;o.ignoreParentFrame&&e.isCollapsingOrExpanding&&s.clearMarginCache(),s.marginInfo||s.getMarginInfo(),u==t.dockBegin?t.shrinkWrap?f=i.dockOutwardBegin(e,s,o,t):f=i.dockInwardBegin(e,s,o,t):u==t.dockEnd?t.shrinkWrap?f=i.dockOutwardEnd(e,s,o,t):f=i.dockInwardEnd(e,s,o,t):t.shrinkWrapDock?(l=s.getProp(a)+s.marginInfo[a],t.maxChildSize=Math.max(t.maxChildSize,l),f=0):f=i.dockStretch(e,s,o,t),s.dockedAt[t.posProp]=f},dockInwardBegin:function(e,t,n,r){var i=r.begin,s=r.sizeProp,o=n.ignoreParentFrame,u,a,f;return o&&(r.ignoreFrameBegin=t,f=n.dock,u=e.frameBorder[f],i-=u+e.framePadding[f]),n.overlay||(a=t.getProp(s)+t.marginInfo[s],r.begin+=a,o&&(r.begin-=u)),i},dockInwardEnd:function(e,t,n,r){var i=r.sizeProp,s=t.getProp(i)+t.marginInfo[i],o=r.end-s,u;return n.overlay||(r.end=o),n.ignoreParentFrame&&(r.ignoreFrameEnd=t,u=e.frameBorder[n.dock],o+=u+e.framePadding[n.dock],r.end+=u),o},dockOutwardBegin:function(e,t,n,r){var i=r.begin,s=r.sizeProp,o;return r.collapsed?r.ignoreFrameBegin=r.ignoreFrameEnd=t:n.ignoreParentFrame&&(r.ignoreFrameBegin=t),n.overlay||(o=t.getProp(s)+t.marginInfo[s],i-=o,r.begin=i),i},dockOutwardEnd:function(e,t,n,r){var i=r.end,s=r.sizeProp,o;return o=t.getProp(s)+t.marginInfo[s],r.collapsed?r.ignoreFrameBegin=r.ignoreFrameEnd=t:n.ignoreParentFrame&&(r.ignoreFrameEnd=t),n.overlay||(r.end=i+o,r.dockedPixelsEnd+=o),i},dockStretch:function(e,t,n,r){var i=n.dock,s=r.sizeProp,o=i=="top"||i=="bottom",u=e.frameBorder,a=t.offsets,f=e.framePadding,l=o?"right":"bottom",c=o?"left":"top",h=r.begin+a[c],p,d;return n.stretch!==!1&&(d=r.end-h-a[l],n.ignoreParentFrame&&(h-=f[c]+u[c],d+=f[s]+u[s]),p=t.marginInfo,d-=p[s],t[r.setSize](d)),h},finishAxis:function(e,t){if(isNaN(t.maxChildSize))return!1;var n=t.begin,r=t.end-n,i=t.collapsed,s=t.setSize,o=t.dockBegin,u=t.dockEnd,a=e.framePadding,f=e.frameBorder,l=f[o],c=e.framing,h=c&&c[o],p=i?0:a[o],d=t.sizeProp,v=t.ignoreFrameBegin,m=t.ignoreFrameEnd,g=e.bodyContext,y=Math.max(l+p-h,0),b,w,E,S;return t.shrinkWrap?(w=t.initialSize,c?(E=-n+l+p,b=E-h-y):(b=-n,E=b+p),i||(r+=a[d]),v?(E-=l,b-=l,v.dockedAt[t.posProp]-=p):r+=l,i||(m?m.dockedAt[t.posProp]+=a[u]:r+=f[u]),t.size=r,!t.horizontal&&!this.owner.manageHeight&&(S=!1)):(c?(E=0,b=n-h-y):(E=-l,b=n-p-l),w=r),t.delta=E,g[s](w,S),g.setProp(t.bodyPosProp,b),!isNaN(r)},beforeInvalidateShrinkWrapDock:function(e,t){var n=t.axis.sizeModelName
;e[n].constrainedMin||(e[n]=Ext.layout.SizeModel.calculated)},afterInvalidateShrinkWrapDock:function(e,t){var n=t.axis,r=t.layout,i;e[n.sizeModelName].calculated&&(i=r.dockStretch(t.ownerContext,e,e.target,n),e.setProp(n.posProp,n.delta+i))},finishConstraints:function(e,t,n){var r=this,i=r.sizeModels,s=t.shrinkWrap,o=n.shrinkWrap,u=r.owner,a,f,l,c,h,p,d,v,m,g;s&&(p=t.size,d=t.collapsed?0:t.minSize,v=t.maxSize,m=t.maxChildSize,g=Math.max(p,m),g>v?(h=i.constrainedMax,l=v):g<d?(h=i.constrainedMin,l=d):p<m?(h=i.constrainedDock,u.dockConstrainedWidth=l=m):l=p),o&&(p=n.size,d=n.collapsed?0:n.minSize,v=n.maxSize,m=n.maxChildSize,g=Math.max(p,m+p-n.initialSize),g>v?(c=i.constrainedMax,f=v):g<d?(c=i.constrainedMin,f=d):p<m?(c=i.constrainedDock,u.dockConstrainedHeight=f=m):(!e.collapsedVert&&!u.manageHeight&&(a=!1,e.bodyContext.setProp("margin-bottom",n.dockedPixelsEnd)),f=p));if(h||c){if(h&&c&&h.constrainedMax&&c.constrainedByMin)return e.invalidate({widthModel:h}),!1;if(!e.widthModel.calculatedFromShrinkWrap&&!e.heightModel.calculatedFromShrinkWrap)return e.invalidate({widthModel:h,heightModel:c}),!1}else r.invalidateAxes(e,t,n);return s&&(e.setWidth(l),h&&(e.widthModel=h)),o&&(e.setHeight(f,a),c&&(e.heightModel=c)),!0},invalidateAxes:function(e,t,n){var r=this.beforeInvalidateShrinkWrapDock,i=this.afterInvalidateShrinkWrapDock,s=t.end-t.begin,o=n.initialSize,u=t.shrinkWrapDock&&t.maxChildSize<=s,a=n.shrinkWrapDock&&n.maxChildSize<=o,f,l,c,h,p,d,v,m;if(u||a){a&&(n.begin=n.initialBegin,n.end=n.begin+n.initialSize),f=e.dockedItems;for(c=0,l=f.length;c<l;++c)h=f[c],d=h.horizontal,v=null,u&&d?(m=t.sizeProp,p=s,v=t):a&&!d&&(m=n.sizeProp,p=o,v=n),v&&(p-=h.getMarginInfo()[m],p!==h.props[m]&&h.invalidate({before:r,after:i,axis:v,ownerContext:e,layout:this}))}},finishPositions:function(e,t,n){var r=e.dockedItems,i=r.length,s=t.delta,o=n.delta,u,a;for(u=0;u<i;++u)a=r[u],a.setProp("x",s+a.dockedAt.x),a.setProp("y",o+a.dockedAt.y)},finishedLayout:function(e){var t=this,n=e.target;t.callParent(arguments),e.animatePolicy||(e.isCollapsingOrExpanding===1?n.afterCollapse(!1):e.isCollapsingOrExpanding===2&&n.afterExpand(!1))},getAnimatePolicy:function(e){var t=this,n,r;e.isCollapsingOrExpanding==1?n=t.lastCollapsedState:e.isCollapsingOrExpanding==2&&(n=e.lastCollapsedState);if(n=="left"||n=="right")r=t.horizontalCollapsePolicy;else if(n=="top"||n=="bottom")r=t.verticalCollapsePolicy;return r},getDockedItems:function(e,t){var n=this,r=e==="visual",i=r?Ext.ComponentQuery.query("[rendered]",n.owner.dockedItems.items):n.owner.dockedItems.items,s=i&&i.length&&e!==!1,o,u,a,f,l,c;if(t==null)a=s&&!r?i.slice():i;else{a=[];for(f=0,c=i.length;f<c;++f)u=i[f].dock,l=u=="top"||u=="left",(t?l:!l)&&a.push(i[f]);s=s&&a.length}return s&&(o=(e=e||"render")=="render",Ext.Array.sort(a,function(t,r){var i,s;return o&&(i=n.owner.dockOrder[t.dock])!==(s=n.owner.dockOrder[r.dock])&&!(i+s)?i-s:(i=n.getItemWeight(t,e),s=n.getItemWeight(r,e),i!==undefined&&s!==undefined?i-s:0)})),a||[]},getItemWeight:function(e,t){var n=e.weight||this.owner.defaultDockWeights[e.dock];return n[t]||n},getLayoutItems:function(){var e=this,t,n,r,i,s;if(e.owner.collapsed)s=e.owner.getCollapsedDockedItems();else{t=e.getDockedItems("visual"),n=t.length,s=[];for(i=0;i<n;i++)r=t[i],r.hidden||s.push(r)}return s},measureContentWidth:function(e){var t=e.bodyContext;return t.el.getWidth()-t.getBorderInfo().width},measureContentHeight:function(e){var t=e.bodyContext;return t.el.getHeight()-t.getBorderInfo().height},redoLayout:function(e){var t=this,n=t.owner;e.isCollapsingOrExpanding==1?(n.reExpander&&n.reExpander.el.show(),n.addClsWithUI(n.collapsedCls),e.redo(!0)):e.isCollapsingOrExpanding==2&&(n.removeClsWithUI(n.collapsedCls),e.bodyContext.redo())},renderChildren:function(){var e=this,t=e.getDockedItems(),n=e.getRenderTarget();e.handleItemBorders(),e.renderItems(t,n)},renderItems:function(e,t){var n=this,r=e.length,i=0,s=0,o=0,u=n.getRenderTarget().dom.childNodes,a=u.length,f,l,c,h;for(f=0,l=0;f<a;f++){c=u[f];if(Ext.fly(c).hasCls(Ext.baseCSSPrefix+"resizable-handle"))break;for(l=0;l<r;l++){h=e[l];if(h.rendered&&h.el.dom===c)break}l===r&&o++}for(;i<r;i++,s++)h=e[i],i===s&&(h.dock==="right"||h.dock==="bottom")&&(s+=o),h&&!h.rendered?n.renderItem(h,t,s):n.isValidParent(h,t,s)||n.moveItem(h,t,s)},undoLayout:function(e){var t=this,n=t.owner;e.isCollapsingOrExpanding==1?(n.reExpander&&n.reExpander.el.hide(),n.removeClsWithUI(n.collapsedCls),e.undo(!0)):e.isCollapsingOrExpanding==2&&(n.addClsWithUI(n.collapsedCls),e.bodyContext.undo())},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(e,t){var n=this,r=n.sizePolicy,i=n.owner.shrinkWrapDock,s,o;if(e.stretch===!1)return r.nostretch;s=e.dock,o=s=="left"||s=="right",i=i===!0?3:i||0,o?(r=r.vert,i&=1):(r=r.horz,i&=2);if(i){t||(t=n.owner.getSizeModel());if(t[o?"height":"width"].shrinkWrap)return r.shrinkWrap}return r.stretch},configureItem:function(e,t){this.callParent(arguments),e.addCls(Ext.baseCSSPrefix+"docked"),e.addClsWithUI(this.getDockCls(e.dock))},getDockCls:function(e){return"docked-"+e},afterRemove:function(e){this.callParent(arguments),this.itemCls&&e.el.removeCls(this.itemCls+"-"+e.dock);var t=e.el.dom;!e.destroying&&t&&t.parentNode.removeChild(t),this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var e=this,t=e.borderCollapseMap,n=e.owner,r=n.baseCls,i=n.ui,s;return t=t[r]||(t[r]={}),s=t[i],s||(r+="-"+i+"-outer-border-",t[i]=s=[0,r+"l",r+"b",r+"bl",r+"r",r+"rl",r+"rb",r+"rbl",r+"t",r+"tl",r+"tb",r+"tbl",r+"tr",r+"trl",r+"trb",r+"trbl"]),s}}),Ext.define("Ext.panel.AbstractPanel",{extend:Ext.container.Container,mixins:{docking:Ext.container.DockingContainer},baseCls:Ext.baseCSSPrefix+"panel",isPanel:!0,contentPaddingProperty:"bodyPadding",shrinkWrapDock:!1,componentLayout:"dock",childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",Ext.isIE7m||Ext.isIEQuirks?'<div style="position:relative;font-size:0;line-height:0;" role="presentation">&nbsp;</div>':"",'<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],bodyPosProps:{x:"x",y:"y"},border:!0,emptyArray:[],initComponent:function(){this.initBorderProps(),this.callParent()},initBorderProps:function(){var e=this;e.frame&&e.border&&e.bodyBorder===undefined&&(e.bodyBorder=!1),e.frame&&e.border&&(e.bodyBorder===!1||e.bodyBorder===0)&&(e.manageBodyBorders=!0)},beforeDestroy:function(){this.destroyDockedItems(),this.callParent()},initItems:function(){this.callParent(),this.initDockingItems()},initRenderData:function(){var e=this,t=e.callParent();return e.initBodyStyles(),e.protoBody.writeTo(t),delete e.protoBody,t},getComponent:function(e){var t=this.callParent(arguments);return t===undefined&&!Ext.isNumber(e)&&(t=this.getDockedComponent(e)),t},getProtoBody:function(){var e=this,t=e.protoBody;return t||(e.protoBody=t=new Ext.util.ProtoElement({cls:e.bodyCls,style:e.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:!0})),t},initBodyStyles:function(){var e=this,t=e.getProtoBody();e.bodyPadding!==undefined&&(e.layout.managePadding?t.setStyle("padding",0):t.setStyle("padding",this.unitizeBox(e.bodyPadding===!0?5:e.bodyPadding))),e.initBodyBorder()},initBodyBorder:function(){var e=this;e.frame&&e.bodyBorder&&(Ext.isNumber(e.bodyBorder)||(e.bodyBorder=1),e.getProtoBody().setStyle("border-width",this.unitizeBox(e.bodyBorder)))},getCollapsedDockedItems:function(){var e=this;return e.header===!1||e.collapseMode=="placeholder"?e.emptyArray:[e.getReExpander()]},setBodyStyle:function(e,t){var n=this,r=n.rendered?n.body:n.getProtoBody();return Ext.isFunction(e)&&(e=e()),arguments.length==1?(Ext.isString(e)&&(e=Ext.Element.parseStyles(e)),r.setStyle(e)):r.setStyle(e,t),n},addBodyCls:function(e){var t=this,n=t.rendered?t.body:t.getProtoBody();return n.addCls(e),t},removeBodyCls:function(e){var t=this,n=t.rendered?t.body:t.getProtoBody();return n.removeCls(e),t},addUIClsToElement:function(e){var t=this,n=t.callParent(arguments);return t.addBodyCls([Ext.baseCSSPrefix+e,t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e]),n},removeUIClsFromElement:function(e){var t=this,n=t.callParent(arguments);return t.removeBodyCls([Ext.baseCSSPrefix+e,t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e]),n},addUIToElement:function(){var e=this;e.callParent(arguments),e.addBodyCls(e.baseCls+"-body-"+e.ui)},removeUIFromElement:function(){var e=this;e.callParent(arguments),e.removeBodyCls(e.baseCls+"-body-"+e.ui)},getTargetEl:function(){return this.body},applyTargetCls:function(e){this.getProtoBody().addCls(e)},getRefItems:function(e){var t=this.callParent(arguments);return this.getDockingRefItems(e,t)},setupRenderTpl:function(e){this.callParent(arguments),this.setupDockingRenderTpl(e)}}),Ext.define("Ext.panel.Header",{extend:Ext.container.Container,alias:"widget.header",isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,componentLayout:"body",childEls:["body"],renderTpl:['<div id="{id}-body" class="{headerCls}-body {baseCls}-body {bodyCls} {bodyTargetCls}','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl> role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],headingTpl:['<span id="{id}-textEl" class="{headerCls}-text {cls}-text {cls}-text-{ui}" unselectable="on"','<tpl if="headerRole">',' role="{headerRole}"',"</tpl>",">{title}</span>"],shrinkWrap:3,titlePosition:0,headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var e=this,t=e.hasOwnProperty("titlePosition"),n=e.items,r=t?e.titlePosition:n?n.length:0,i=[e.orientation,e.getDockName()],s=e.ownerCt;e.addEvents("click","dblclick"),e.indicateDragCls=e.headerCls+"-draggable",e.title=e.title||"&#160;",e.tools=e.tools||[],n=e.items=n?Ext.Array.slice(n):[],e.orientation=e.orientation||"horizontal",e.dock=e.dock?e.dock:e.orientation=="horizontal"?"top":"left",(s?s.border===!1&&!s.frame:e.border===!1)&&i.push(e.orientation+"-noborder"),e.addClsWithUI(i),e.addCls([e.headerCls,e.headerCls+"-"+e.orientation]),e.indicateDrag&&e.addCls(e.indicateDragCls);if(e.iconCls||e.icon||e.glyph)e.initIconCmp(),!t&&!n.length&&++r,n.push(e.iconCmp);e.titleCmp=new Ext.Component({ariaRole:"presentation",focusable:!1,noWrap:!0,flex:1,rtl:e.rtl,id:e.id+"_hd",style:e.titleAlign?"text-align:"+e.titleAlign:"",cls:e.headerCls+"-text-container "+e.baseCls+"-text-container "+e.baseCls+"-text-container-"+e.ui,renderTpl:e.getTpl("headingTpl"),renderData:{title:e.title,cls:e.baseCls,headerCls:e.headerCls,headerRole:e.headerRole,ui:e.ui},childEls:["textEl"],autoEl:{unselectable:"on"},listeners:{render:e.onTitleRender,scope:e}}),e.layout=e.orientation=="vertical"?{type:"vbox",align:"center",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},Ext.Array.push(n,e.tools),e.tools.length=0,e.callParent(),n.length<r&&(r=n.length),e.titlePosition=r,e.insert(r,e.titleCmp),e.on({dblclick:e.onDblClick,click:e.onClick,element:"el",scope:e})},setTitlePosition:function(e){var t=this;t.titlePosition=e=Math.min(e,t.items.length-1),t.insert(e,t.titleCmp)},initIconCmp:function(){var e=this,t=[e.headerCls+"-icon",e.baseCls+"-icon",e.iconCls],n;e.glyph&&t.push(e.baseCls+"-glyph"),n={focusable:!1,src:Ext.BLANK_IMAGE_URL,cls:t,baseCls:e.baseCls+"-icon",id:e.id+"-iconEl",iconCls:e.iconCls,glyph:e.glyph},Ext.isEmpty(e.icon)||(delete n.iconCls,n.src=e.icon),e.iconCmp=new Ext.Img(n)},beforeRender:function(){this.protoEl.unselectable(),this.callParent()},afterLayout:function(){var e=this,t,n,r,i;e.orientation==="vertical"&&(e.adjustTitlePosition(),n=e.frameTR,n&&(t=e.frameBR,r=e.frameTL,i=e.getWidth()-n.getPadding("r")-(r?r.getPadding("l"):e.el.getBorderWidth("l"))+"px",t.setStyle("background-position-x",i),n.setStyle("background-position-x",i)),Ext.isIE7&&Ext.isStrict&&e.frame&&e.el.repaint())},beforeLayout:function(){this.callParent(),this.syncBeforeAfterTitleClasses()},adjustTitlePosition:function(){var e=this.titleCmp,t;!Ext.isIE9m&&e&&(t=e.el,t.setStyle("left",t.getWidth()+"px"))},onTitleRender:function(){this.orientation==="vertical"&&this.titleCmp.el.setVertical(90)},addUIClsToElement:function(e){var t=this,n=t.callParent(arguments),r=[t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e],i,s;if(t.bodyCls){i=t.bodyCls.split(" ");for(s=0;s<r.length;s++)Ext.Array.contains(i,r[s])||i.push(r[s]);t.bodyCls=i.join(" ")}else t.bodyCls=r.join(" ");return n},removeUIClsFromElement:function(e){var t=this,n=t.callParent(arguments),r=[t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e],i,s;if(t.bodyCls){i=t.bodyCls.split(" ");for(s=0;s<r.length;s++)Ext.Array.remove(i,r[s]);t.bodyCls=i.join(" ")}return n},addUIToElement:function(){var e=this,t,n;e.callParent(arguments),n=e.baseCls+"-body-"+e.ui,e.rendered?e.bodyCls?e.body.addCls(e.bodyCls):e.body.addCls(n):e.bodyCls?(t=e.bodyCls.split(" "),Ext.Array.contains(t,n)||t.push(n),e.bodyCls=t.join(" ")):e.bodyCls=n,e.titleCmp&&e.titleCmp.rendered&&e.titleCmp.addCls(e.baseCls+"-text-container-"+e.ui)},removeUIFromElement:function(){var e=this,t,n;e.callParent(arguments),n=e.baseCls+"-body-"+e.ui,e.rendered?e.bodyCls?e.body.removeCls(e.bodyCls):e.body.removeCls(n):e.bodyCls?(t=e.bodyCls.split(" "),Ext.Array.remove(t,n),e.bodyCls=t.join(" ")):e.bodyCls=n,e.titleCmp&&e.titleCmp.rendered&&e.titleCmp.removeCls(e.baseCls+"-text-container-"+e.ui)},onClick:function(e){this.fireClickEvent("click",e)},onDblClick:function(e){this.fireClickEvent("dblclick",e)},fireClickEvent:function(e,t){var n="."+Ext.panel.Tool.prototype.baseCls;t.getTarget(n)||this.fireEvent(e,this,t)},getFocusEl:function(){return this.el},getTargetEl:function(){return this.body||this.frameBody||this.el},applyTargetCls:function(e){this.bodyTargetCls=e},setTitle:function(e){var t=this,n=t.titleCmp;t.title=e,n.rendered?(n.textEl.update(t.title||"&#160;"),n.updateLayout()):t.titleCmp.on({render:function(){t.setTitle(e)},single:!0})},getMinWidth:function(){var e=this,t=e.titleCmp.textEl.dom,n,r=e.tools,i,s;t.style.display="inline",n=t.offsetWidth,t.style.display="";if(r&&(i=r.length))for(s=0;s<i;s++)r[s].el&&(n+=r[s].el.dom.offsetWidth);return e.iconCmp&&(n+=e.iconCmp.el.dom.offsetWidth),n+10},setIconCls:function(e){var t=this,n=!e||!e.length,r=t.iconCmp;t.iconCls=e,!t.iconCmp&&!n?(t.initIconCmp(),t.insert(0,t.iconCmp)):r&&(n?(t.iconCmp.destroy(),delete t.iconCmp):(r.removeCls(r.iconCls),r.addCls(e),r.iconCls=e))},setIcon:function(e){var t=this,n=!e||!e.length,r=t.iconCmp;t.icon=e,!t.iconCmp&&!n?(t.initIconCmp(),t.insert(0,t.iconCmp)):r&&(n?(t.iconCmp.destroy(),delete t.iconCmp):r.setSrc(t.icon))},setGlyph:function(e){var t=this,n=t.iconCmp;t.iconCmp?n&&(e?t.iconCmp.setGlyph(e):(t.iconCmp.destroy(),delete t.iconCmp)):(t.initIconCmp(),t.insert(0,t.iconCmp))},getTools:function(){return this.tools.slice()},addTool:function(e){this.add(Ext.ComponentManager.create(e,"tool"))},syncBeforeAfterTitleClasses:function(e){var t=this,n=t.items,r=n.items,i=t.titlePosition,s=r.length,o=n.generation,u=t.syncBeforeAfterGen,a,f,l,c;if(!e&&u===o)return;t.syncBeforeAfterGen=o;for(l=0;l<s;++l)c=r[l],a=c.afterTitleCls||(c.afterTitleCls=c.baseCls+"-after-title"),f=c.beforeTitleCls||(c.beforeTitleCls=c.baseCls+"-before-title"),!t.title||l<i?(u&&c.removeCls(a),c.addCls(f)):l>i&&(u&&c.removeCls(f),c.addCls(a))},onAdd:function(e,t){var n=this.tools;this.callParent(arguments),e.isTool&&(n.push(e),n[e.type]=e)},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyCls:this.bodyCls,bodyTargetCls:this.bodyTargetCls,headerCls:this.headerCls})},getDockName:function(){return this.dock},getFramingInfoCls:function(){var e=this,t=e.callParent(),n=e.ownerCt;return!e.expanding&&n&&(n.collapsed||e.isCollapsedExpander)&&(t+="-"+n.collapsedCls),t+"-"+e.dock}}),Ext.define("Ext.dd.DragDrop",{constructor:function(e,t,n){e&&this.init(e,t,n)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(e,t){},startDrag:function(e,t){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,t){},b4DragOver:function(e){},onDragOver:function(e,t){},b4DragOut:function(e){},onDragOut:function(e,t){},b4DragDrop:function(e){},onDragDrop:function(e,t){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,t,n){Ext.isNumber(t)&&(t={left:t,right:t,top:t,bottom:t}),t=t||this.defaultPadding;var r=Ext.get(this.getEl()).getBox(),i=Ext.get(e),s=i.getScroll(),o,u=i.dom,a,f,l;u==document.body?o={x:s.left,y:s.top,width:Ext.Element.getViewWidth(),height:Ext.Element.getViewHeight()}:(a=i.getXY(),o={x:a[0],y:a[1],width:u.clientWidth,height:u.clientHeight}),f=r.y-o.y,l=r.x-o.x,this.resetConstraints(),this.setXConstraint(l-(t.left||0),o.width-l-r.width-(t.right||0),this.xTickSize),this.setYConstraint(f-(t.top||0),o.height-f-r.height-(t.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(e,t,n){this.initTarget(e,t,n),Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(e,t,n){this.config=n||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},typeof e!="string"&&(e=Ext.id(e)),this.id=e,this.addToGroup(t?t:"default"),this.handleElId=e,this.setDragElId(e),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(e,t,n,r){!t&&0!==t?this.padding=[e,e,e,e]:!n&&0!==n?this.padding=[e,t,e,t]:this.padding=[e,t,n,r]},setInitPosition:function(e,t){var n=this.getEl(),r,i,s;if(!this.DDMInstance.verifyEl(n))return;r=e||0,i=t||0,s=Ext.Element.getXY(n),this.initPageX=s[0]-r,this.initPageY=s[1]-i,this.lastPageX=s[0],this.lastPageY=s[1],this.setStartPosition(s)},setStartPosition:function(e){var t=e||Ext.Element.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=t[0],this.startPageY=t[1]},addToGroup:function(e){this.groups[e]=!0,this.DDMInstance.regDragDrop(this,e)},removeFromGroup:function(e){this.groups[e]&&delete this.groups[e],this.DDMInstance.removeDDFromGroup(this,e)},setDragElId:function(e){this.dragElId=e},setHandleElId:function(e){typeof e!="string"&&(e=Ext.id(e)),this.handleElId=e,this.DDMInstance.regHandle(this.id,e)},setOuterHandleElId:function(e){typeof e!="string"&&(e=Ext.id(e)),Ext.EventManager.on(e,"mousedown",this.handleMouseDown,this),this.setHandleElId(e),this.hasOuterHandles=!0},unreg:function(){var e=this;Ext.EventManager.un(e.id,"mousedown",e.handleMouseDown,e),e._domRef=null,e.DDMInstance._remove(e,e.autoGroup)},destroy:function(){this.unreg()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(e,t){var n=this;if(n.primaryButtonOnly&&e.button!=0||n.isLocked())return;n.DDMInstance.refreshCache(n.groups),(n.hasOuterHandles||n.DDMInstance.isOverTarget(e.getPoint(),n))&&n.clickValidator(e)&&(n.setStartPosition(),n.b4MouseDown(e),n.onMouseDown(e),n.DDMInstance.handleMouseDown(e,n),n.DDMInstance.stopEvent(e))},clickValidator:function(e){var t=e.getTarget();return this.isValidHandleChild(t)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(t,this.id))},addInvalidHandleType:function(e){var t=e.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(e){typeof e!="string"&&(e=Ext.id(e)),this.invalidHandleIds[e]=e},addInvalidHandleClass:function(e){this.invalidHandleClasses.push(e)},removeInvalidHandleType:function(e){var t=e.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(e){typeof e!="string"&&(e=Ext.id(e)),delete this.invalidHandleIds[e]},removeInvalidHandleClass:function(e){for(var t=0,n=this.invalidHandleClasses.length;t<n;++t)this.invalidHandleClasses[t]==e&&delete this.invalidHandleClasses[t]},isValidHandleChild:function(e){var t=!0,n,r,i;try{n=e.nodeName.toUpperCase()}catch(s){n=e.nodeName}t=t&&!this.invalidHandleTypes[n],t=t&&!this.invalidHandleIds[e.id];for(r=0,i=this.invalidHandleClasses.length;t&&r<i;++r)t=!Ext.fly(e).hasCls(this.invalidHandleClasses[r]);return t},setXTicks:function(e,t){this.xTicks=[],this.xTickSize=t;var n={},r;for(r=this.initPageX;r>=this.minX;r-=t)n[r]||(this.xTicks[this.xTicks.length]=r,n[r]=!0);for(r=this.initPageX;r<=this.maxX;r+=t)n[r]||(this.xTicks[this.xTicks.length]=r,n[r]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(e,t){this.yTicks=[],this.yTickSize=t;var n={},r;for(r=this.initPageY;r>=this.minY;r-=t)n[r]||(this.yTicks[this.yTicks.length]=r,n[r]=!0);for(r=this.initPageY;r<=this.maxY;r+=t)n[r]||(this.yTicks[this.yTicks.length]=r,n[r]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(e,t,n){this.leftConstraint=e,this.rightConstraint=t,this.minX=this.initPageX-e,this.maxX=this.initPageX+t,n&&this.setXTicks(this.initPageX,n),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(e,t,n){this.topConstraint=e,this.bottomConstraint=t,this.minY=this.initPageY-e,this.maxY=this.initPageY+t,n&&this.setYTicks(this.initPageY,n),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var e=this.maintainOffset?this.lastPageX-this.initPageX:0,t=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(e,t)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(e,t){if(!t)return e;if(t[0]>=e)return t[0];var n,r,i,s,o;for(n=0,r=t.length;n<r;++n){i=n+1;if(t[i]&&t[i]>=e)return s=e-t[n],o=t[i]-e,o>s?t[n]:t[i]}return t[t.length-1]},toString:function(){return"DragDrop "+this.id}}),Ext.define("Ext.dd.DD",{extend:Ext.dd.DragDrop,constructor:function(e,t,n){e&&this.init(e,t,n)},scroll:!0,autoOffset:function(e,t){var n=e-this.startPageX,r=t-this.startPageY;this.setDelta(n,r)},setDelta:function(e,t){this.deltaX=e,this.deltaY=t},setDragElPos:function(e,t){var n=this.getDragEl();this.alignElWithMouse(n,e,t)},alignElWithMouse:function(e,t,n){var r=this.getTargetCoord(t,n),i=e.dom?e:Ext.fly(e,"_dd"),s=i.getSize(),o=Ext.Element,u,a,f,l;return this.deltaSetXY?(u=this.cachedViewportSize,this.setLocalXY(i,Math.max(0,Math.min(r.x+this.deltaSetXY[0],u.width-s.width)),Math.max(0,Math.min(r.y+this.deltaSetXY[1],u.height-s.height)))):(u=this.cachedViewportSize={width:o.getDocumentWidth(),height:o.getDocumentHeight()},a=[Math.max(0,Math.min(r.x,u.width-s.width)),Math.max(0,Math.min(r.y,u.height-s.height))],i.setXY(a),f=this.getLocalX(i),l=i.getLocalY(),this.deltaSetXY=[f-r.x,l-r.y]),this.cachePosition(r.x,r.y),this.autoScroll(r.x,r.y,e.offsetHeight,e.offsetWidth),r},cachePosition:function(e,t){if(e)this.lastPageX=e,this.lastPageY=t;else{var n=Ext.Element.getXY(this.getEl());this.lastPageX=n[0],this.lastPageY=n[1]}},autoScroll:function(e,t,n,r){if(this.scroll){var i=Ext.Element.getViewHeight(),s=Ext.Element.getViewWidth(),o=this.DDMInstance.getScrollTop(),u=this.DDMInstance.getScrollLeft(),a=n+t,f=r+e,l=i+o-t-this.deltaY,c=s+u-e-this.deltaX,h=40,p=document.all?80:30;a>i&&l<h&&window.scrollTo(u,o+p),t<o&&o>0&&t-o<h&&window.scrollTo(u,o-p),f>s&&c<h&&window.scrollTo(u+p,o),e<u&&u>0&&e-u<h&&window.scrollTo(u-p,o)}},getTargetCoord:function(e,t){var n=e-this.deltaX,r=t-this.deltaY;return this.constrainX&&(n<this.minX&&(n=this.minX),n>this.maxX&&(n=this.maxX)),this.constrainY&&(r<this.minY&&(r=this.minY),r>this.maxY&&(r=this.maxY)),n=this.getTick(n,this.xTicks),r=this.getTick(r,this.yTicks),{x:n,y:r}},applyConfig:function(){this.callParent(),this.scroll=this.config.scroll!==!1},b4MouseDown:function(e){this.autoOffset(e.getPageX(),e.getPageY())},b4Drag:function(e){this.setDragElPos(e.getPageX(),e.getPageY())},toString:function(){return"DD "+this.id},getLocalX:function(e){return e.getLocalX()},setLocalXY:function(e,t,n){e.setLocalXY(t,n)}}),Ext.define("Ext.dd.DDProxy",{extend:Ext.dd.DD,statics:{dragElId:"ygddfdiv"},constructor:function(e,t,n){e&&(this.init(e,t,n),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var e=this,t=document.body,n,r;if(!t||!t.firstChild){setTimeout(function(){e.createFrame()},50);return}n=this.getDragEl(),n||(n=document.createElement("div"),n.id=this.dragElId,n.setAttribute("role","presentation"),r=n.style,r.position="absolute",r.visibility="hidden",r.cursor="move",r.border="2px solid #aaa",r.zIndex=999,t.insertBefore(n,t.firstChild))},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent(),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,t){var n=this.getEl(),r=this.getDragEl(),i=r.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(i.width,10)/2),Math.round(parseInt(i.height,10)/2)),this.setDragElPos(e,t),Ext.fly(r).show()},_resizeProxy:function(){if(this.resizeFrame){var e=this.getEl();Ext.fly(this.getDragEl()).setSize(e.offsetWidth,e.offsetHeight)}},b4MouseDown:function(e){var t=e.getPageX(),n=e.getPageY();this.autoOffset(t,n),this.setDragElPos(t,n)},b4StartDrag:function(e,t){this.showFrame(e,t)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var t=this.getEl(),n=this.getDragEl();n.style.visibility="",this.beforeMove(),t.style.visibility="hidden",Ext.dd.DDM.moveToEl(t,n),n.style.visibility="hidden",t.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.define("Ext.dd.StatusProxy",{extend:Ext.Component,animRepair:!1,childEls:["ghost"],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div>'+'<div id="{id}-ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+"dd-drag-repair",ariaRole:"presentation",constructor:function(e){var t=this;e=e||{},Ext.apply(t,{hideMode:"visibility",hidden:!0,floating:!0,id:t.id||Ext.id(),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:e.shadow||!1,renderTo:Ext.getDetachedBody()}),t.callParent(arguments),this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(e){e=e||this.dropNotAllowed,this.dropStatus!=e&&(this.el.replaceCls(this.dropStatus,e),this.dropStatus=e)},reset:function(e){var t=this,n=Ext.baseCSSPrefix+"dd-drag-proxy ";t.el.replaceCls(n+t.dropAllowed,n+t.dropNotAllowed),t.dropStatus=t.dropNotAllowed,e&&t.ghost.update("")},update:function(e){typeof e=="string"?this.ghost.update(e):(this.ghost.update(""),e.style.margin="0",this.ghost.dom.appendChild(e));var t=this.ghost.dom.firstChild;t&&Ext.fly(t).setStyle("float","none")},getGhost:function(){return this.ghost},hide:function(e){this.callParent(),e&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},sync:function(){this.el.sync()},repair:function(e,t,n){var r=this;r.callback=t,r.scope=n,e&&r.animRepair!==!1?(r.el.addCls(r.repairCls),r.el.hideUnders(!0),r.anim=r.el.animate({duration:r.repairDuration||500,easing:"ease-out",to:{x:e[0],y:e[1]},stopAnimation:!0,callback:r.afterRepair,scope:r})):r.afterRepair()},afterRepair:function(){var e=this;e.hide(!0),e.el.removeCls(e.repairCls),typeof e.callback=="function"&&e.callback.call(e.scope||e),delete e.callback,delete e.scope}}),Ext.define("Ext.dd.DragSource",{extend:Ext.dd.DDProxy,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(e,t){this.el=Ext.get(e),this.dragData||(this.dragData={}),Ext.apply(this,t),this.proxy||(this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})),this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}]),this.dragging=!1},getDragData:function(e){return this.dragData},onDragEnter:function(e,t){var n=Ext.dd.DragDropManager.getDDById(t),r;this.cachedTarget=n,this.beforeDragEnter(n,e,t)!==!1&&(n.isNotifyTarget?(r=n.notifyEnter(this,e,this.dragData),this.proxy.setStatus(r)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(n,e,t))},beforeDragEnter:function(e,t,n){return!0},onDragOver:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t),r;this.beforeDragOver(n,e,t)!==!1&&(n.isNotifyTarget&&(r=n.notifyOver(this,e,this.dragData),this.proxy.setStatus(r)),this.afterDragOver&&this.afterDragOver(n,e,t))},beforeDragOver:function(e,t,n){return!0},onDragOut:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);this.beforeDragOut(n,e,t)!==!1&&(n.isNotifyTarget&&n.notifyOut(this,e,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(n,e,t)),this.cachedTarget=null},beforeDragOut:function(e,t,n){return!0},onDragDrop:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);this.beforeDragDrop(n,e,t)!==!1&&(n.isNotifyTarget?n.notifyDrop(this,e,this.dragData)!==!1?this.onValidDrop(n,e,t):this.onInvalidDrop(n,e,t):this.onValidDrop(n,e,t),this.afterDragDrop&&this.afterDragDrop(n,e,t)),delete this.cachedTarget},beforeDragDrop:function(e,t,n){return!0},onValidDrop:function(e,t,n){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(e,t,n)},getRepairXY:function(e,t){return this.el.getXY()},onInvalidDrop:function(e,t,n){var r=this;t||(t=e,e=null,n=t.getTarget().id),r.beforeInvalidDrop(e,t,n)!==!1&&(r.cachedTarget&&(r.cachedTarget.isNotifyTarget&&r.cachedTarget.notifyOut(r,t,r.dragData),r.cacheTarget=null),r.proxy.repair(r.getRepairXY(t,r.dragData),r.afterRepair,r),r.afterInvalidDrop&&r.afterInvalidDrop(t,n))},afterRepair:function(){var e=this;Ext.enableFx&&e.el.highlight(e.repairHighlightColor),e.dragging=!1},beforeInvalidDrop:function(e,t,n){return!0},handleMouseDown:function(e){if(this.dragging)return;var t=this.getDragData(e);t&&this.onBeforeDrag(t,e)!==!1&&(this.dragData=t,this.proxy.stop(),this.callParent(arguments))},onBeforeDrag:function(e,t){return!0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){return this.proxy.ensureAttachedToBody(!0),this.callParent(arguments)},startDrag:function(e,t){this.proxy.reset(),this.proxy.hidden=!1,this.dragging=!0,this.proxy.update(""),this.onInitDrag(e,t),this.proxy.show()},onInitDrag:function(e,t){var n=this.el.dom.cloneNode(!0);return n.id=Ext.id(),this.proxy.update(n),this.onStartDrag(e,t),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(e,t){},autoOffset:function(e,t){this.setDelta(-12,-20)},destroy:function(){this.callParent(),Ext.destroy(this.proxy)}}),Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:!0,constructor:function(e,t){var n=this;n.panel=e,n.id=n.panel.id+"-ddproxy",Ext.apply
(n,t)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var e=this;e.ghost&&(e.proxy&&(e.proxy.remove(),delete e.proxy),e.panel.unghost(null,e.moveOnDrag),delete e.ghost)},show:function(){var e=this,t;e.ghost||(t=e.panel.getSize(),e.panel.el.setVisibilityMode(Ext.Element.DISPLAY),e.ghost=e.panel.ghost(),e.insertProxy&&(e.proxy=e.panel.el.insertSibling({role:"presentation",cls:Ext.baseCSSPrefix+"panel-dd-spacer"}),e.proxy.setSize(t)))},repair:function(e,t,n){this.hide(),Ext.callback(t,n||this)},moveProxy:function(e,t){this.proxy&&e.insertBefore(this.proxy.dom,t)}}),Ext.define("Ext.panel.DD",{extend:Ext.dd.DragSource,constructor:function(e,t){var n=this;n.panel=e,n.dragData={panel:e},n.panelProxy=new Ext.panel.Proxy(e,t),n.proxy=n.panelProxy.proxy,n.callParent([e.el,t]),n.setupEl(e)},setupEl:function(e){var t=this,n=e.header,r=e.body;n&&(t.setHandleElId(n.id),r=n.el),r?(r.setStyle("cursor","move"),t.scroll=!1):e.on("boxready",t.setupEl,t,{single:!0})},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(e,t){this.panelProxy.show()},b4MouseDown:function(e){var t=e.getPageX(),n=e.getPageY();this.autoOffset(t,n)},onInitDrag:function(e,t){return this.onStartDrag(e,t),!0},createFrame:Ext.emptyFn,getDragEl:function(e){var t=this.panelProxy.ghost;if(t)return t.el.dom},endDrag:function(e){this.panelProxy.hide(),this.panel.saveState()},autoOffset:function(e,t){e-=this.startPageX,t-=this.startPageY,this.setDelta(e,t)},onInvalidDrop:function(e,t,n){var r=this;r.beforeInvalidDrop(e,t,n)!==!1&&(r.cachedTarget&&(r.cachedTarget.isNotifyTarget&&r.cachedTarget.notifyOut(r,t,r.dragData),r.cacheTarget=null),r.afterInvalidDrop&&r.afterInvalidDrop(t,n))}}),Ext.define("Ext.util.Memento",function(){function e(e,t,n,r){e[r?r+n:n]=t[n]}function t(e,t,n){delete e[n]}function n(e,t,n,i){var s=i?i+n:n,o=e[s];(o||e.hasOwnProperty(s))&&r(t,n,o)}function r(e,t,n){Ext.isDefined(n)?e[t]=n:delete e[t]}function i(e,t,n,r,i){if(t)if(Ext.isArray(r)){var s,o=r.length;for(s=0;s<o;s++)e(t,n,r[s],i)}else e(t,n,r,i)}return{data:null,target:null,constructor:function(e,t){e&&(this.target=e,t&&this.capture(t))},capture:function(t,n,r){var s=this;i(e,s.data||(s.data={}),n||s.target,t,r)},remove:function(e){i(t,this.data,null,e)},restore:function(e,t,r,s){i(n,this.data,r||this.target,e,s),t!==!1&&this.remove(e)},restoreAll:function(e,t){var n=this,i=t||this.target,s=n.data,o;for(o in s)s.hasOwnProperty(o)&&r(i,o,s[o]);e!==!1&&delete n.data}}}()),Ext.define("Ext.panel.Panel",{extend:Ext.panel.AbstractPanel,alias:"widget.panel",alternateClassName:"Ext.Panel",collapsedCls:"collapsed",animCollapse:Ext.enableFx,minButtonWidth:75,collapsed:!1,collapseFirst:!0,hideCollapseTool:!1,titleCollapse:undefined,floatable:!0,collapsible:undefined,closable:!1,closeAction:"destroy",placeholderCollapseHideMode:Ext.Element.VISIBILITY,preventHeader:!1,header:undefined,headerPosition:"top",frame:!1,frameHeader:!0,manageHeight:!0,constrain:!1,constrainHeader:!1,initComponent:function(){var e=this;e.addEvents("beforeclose","close","beforeexpand","beforecollapse","expand","collapse","titlechange","iconchange","iconclschange","glyphchange","float","unfloat"),e.collapsible&&e.addStateEvents(["expand","collapse"]),e.unstyled&&e.setUI("plain"),e.frame&&e.setUI(e.ui+"-framed"),e.bridgeToolbars(),e.callParent(),e.collapseDirection=e.collapseDirection||e.headerPosition||Ext.Component.DIRECTION_TOP,e.hiddenOnCollapse=new Ext.dom.CompositeElement},beforeDestroy:function(){var e=this;Ext.destroy(e.placeholder,e.ghostPanel,e.dd),e.callParent()},getFocusEl:function(){return this.el},getHeader:function(){return this.header},setTitle:function(e){var t=this,n=t.title,r=t.header,i=t.reExpander,s=t.placeholder;t.title=e,r?r.isHeader?r.setTitle(e):r.title=e:t.rendered&&t.updateHeader(),i&&i.setTitle(e),s&&s.setTitle&&s.setTitle(e),t.fireEvent("titlechange",t,e,n)},setIconCls:function(e){var t=this,n=t.iconCls,r=t.header,i=t.placeholder;t.iconCls=e,r?r.isHeader?r.setIconCls(e):r.iconCls=e:t.updateHeader(),i&&i.setIconCls&&i.setIconCls(e),t.fireEvent("iconclschange",t,e,n)},setIcon:function(e){var t=this,n=t.icon,r=t.header,i=t.placeholder;t.icon=e,r?r.isHeader?r.setIcon(e):r.icon=e:t.updateHeader(),i&&i.setIcon&&i.setIcon(e),t.fireEvent("iconchange",t,e,n)},setGlyph:function(e){var t=this,n=t.glyph,r=t.header,i=t.placeholder;t.glyph=e,r?r.isHeader?r.setGlyph(e):r.glyph=e:t.updateHeader(),i&&i.setGlyph&&i.setIcon(e),t.fireEvent("glyphchange",t,e,n)},bridgeToolbars:function(){function s(t,n,r){Ext.isArray(t)?t={xtype:"toolbar",items:t}:t.xtype||(t.xtype="toolbar"),t.dock=n;if(n=="left"||n=="right")t.vertical=!0;return r&&(t.layout=Ext.applyIf(t.layout||{},{pack:{left:"start",center:"center"}[e.buttonAlign]||"end"})),t}var e=this,t=[],n=e.minButtonWidth,r,i;e.tbar&&(t.push(s(e.tbar,"top")),e.tbar=null),e.bbar&&(t.push(s(e.bbar,"bottom")),e.bbar=null),e.buttons&&(e.fbar=e.buttons,e.buttons=null),e.fbar&&(r=s(e.fbar,"bottom",!0),r.ui="footer",n&&(i=r.defaults,r.defaults=function(e){var t=i||{},r=!e.xtype||e.isButton,s;return r||(s=Ext.ClassManager.getByAlias("widget."+e.xtype),s&&(r=s.prototype.isButton)),r&&!("minWidth"in t)&&(t=Ext.apply({minWidth:n},t)),t}),t.push(r),e.fbar=null),e.lbar&&(t.push(s(e.lbar,"left")),e.lbar=null),e.rbar&&(t.push(s(e.rbar,"right")),e.rbar=null),e.dockedItems?(Ext.isArray(e.dockedItems)||(e.dockedItems=[e.dockedItems]),e.dockedItems=e.dockedItems.concat(t)):e.dockedItems=t},isPlaceHolderCollapse:function(){return this.collapseMode=="placeholder"},onBoxReady:function(){this.callParent(),this.collapsed&&this.setHiddenDocked()},beforeRender:function(){var e=this,t;e.callParent(),e.initTools(),!e.preventHeader&&e.header!==!1&&e.updateHeader(),e.collapsed&&(e.isPlaceHolderCollapse()?e.hidden||(e.setHiddenState(!0),e.preventCollapseFire=!0,e.placeholderCollapse(),delete e.preventCollapseFire,t=e.collapsed,e.collapsed=!1):(e.beginCollapse(),e.addClsWithUI(e.collapsedCls))),t&&(e.collapsed=t)},initTools:function(){var e=this,t=e.tools,n,r;e.tools=[];for(n=t&&t.length;n;)--n,e.tools[n]=r=t[n],r.toolOwner=e;e.collapsible&&!e.hideCollapseTool&&e.header!==!1&&!e.preventHeader&&(e.collapseDirection=e.collapseDirection||e.headerPosition||"top",e.collapseTool=e.expandTool=Ext.widget({xtype:"tool",handler:e.toggleCollapse,scope:e}),e.updateCollapseTool(),e.collapseFirst&&e.tools.unshift(e.collapseTool)),e.addTools(),e.closable&&(e.addClsWithUI("closable"),e.addTool(Ext.widget({xtype:"tool",type:"close",handler:Ext.Function.bind(e.close,e,[])}))),e.collapseTool&&!e.collapseFirst&&e.addTool(e.collapseTool)},addTools:Ext.emptyFn,updateCollapseTool:function(){var e=this,t=e.collapseTool;t&&(e.collapsed&&!e.isPlaceHolderCollapse()?t.setType("expand-"+e.getOppositeDirection(e.collapseDirection)):t.setType("collapse-"+e.collapseDirection))},close:function(){this.fireEvent("beforeclose",this)!==!1&&this.doClose()},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},updateHeader:function(e){var t=this,n=t.header,r=t.title,i=t.tools,s=t.icon||t.iconCls,o=t.headerPosition==="left"||t.headerPosition==="right";Ext.isObject(n)||n!==!1&&(e||r||s||i&&i.length||t.collapsible&&!t.titleCollapse)?n&&n.isHeader?n.show():(n=t.header=Ext.widget(Ext.apply({xtype:"header",title:r,titleAlign:t.titleAlign,orientation:o?"vertical":"horizontal",dock:t.headerPosition||"top",textCls:t.headerTextCls,iconCls:t.iconCls,icon:t.icon,glyph:t.glyph,baseCls:t.baseCls+"-header",tools:i,ui:t.ui,id:t.id+"_header",overCls:t.headerOverCls,indicateDrag:t.draggable,frame:(t.frame||t.alwaysFramed)&&t.frameHeader,ignoreParentFrame:t.frame||t.overlapHeader,ignoreBorderManagement:t.frame||t.ignoreHeaderBorderManagement,headerRole:t.headerRole,ownerCt:t,listeners:t.collapsible&&t.titleCollapse?{click:t.toggleCollapse,scope:t}:null},t.header)),t.addDocked(n,0)):n&&n.hide()},setUI:function(e){var t=this;t.callParent(arguments),t.header&&t.header.rendered&&t.header.setUI(e)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var e=this;return e.body||e.protoBody||e.frameBody||e.el},isVisible:function(e){var t=this;return t.collapsed&&t.placeholder?t.placeholder.isVisible(e):t.callParent(arguments)},onHide:function(){var e=this,t=e.dd;e.floatedFromCollapse&&e.slideOutFloatedPanel(!0),e.draggable&&t&&t.endDrag(),e.collapsed&&e.placeholder?e.placeholder.hide():e.callParent(arguments)},onShow:function(){var e=this;e.collapsed&&e.isPlaceHolderCollapse()?(e.setHiddenState(!0),e.placeholderCollapse()):e.callParent(arguments)},onRemoved:function(e){var t=this;t.placeholder&&!e&&t.ownerCt.remove(t.placeholder,!1),t.callParent(arguments)},addTool:function(e){Ext.isArray(e)||(e=[e]);var t=this,n=t.header,r,i=e.length,s;for(r=0;r<i;r++)s=e[r],s.toolOwner=t,n&&n.isHeader?n.addTool(s):t.tools.push(s);t.updateHeader()},getOppositeDirection:function(e){var t=Ext.Component;switch(e){case t.DIRECTION_TOP:return t.DIRECTION_BOTTOM;case t.DIRECTION_RIGHT:return t.DIRECTION_LEFT;case t.DIRECTION_BOTTOM:return t.DIRECTION_TOP;case t.DIRECTION_LEFT:return t.DIRECTION_RIGHT}},getWidthAuthority:function(){return this.collapsed&&this.collapsedHorizontal()?1:this.callParent()},getHeightAuthority:function(){return this.collapsed&&this.collapsedVertical()?1:this.callParent()},collapsedHorizontal:function(){var e=this.getCollapsed();return e==="left"||e==="right"},collapsedVertical:function(){var e=this.getCollapsed();return e==="top"||e==="bottom"},restoreDimension:function(){var e=this.collapseDirection;return e==="top"||e==="bottom"?"height":"width"},getCollapsed:function(){var e=this;return e.collapsed===!0?e.collapseDirection:e.collapsed},getState:function(){var e=this,t=e.callParent(),n;return t=e.addPropertyToState(t,"collapsed"),e.collapsed&&(n=e.collapseMemento,n=n&&n.data,e.collapsedVertical()?(t&&delete t.height,n&&(t=e.addPropertyToState(t,"height",n.height))):(t&&delete t.width,n&&(t=e.addPropertyToState(t,"width",n.width)))),t},findReExpander:function(e){var t=this,n=Ext.Component,r=t.dockedItems.items,i=r.length,s,o;if(t.collapseMode==="mini")return;switch(e){case n.DIRECTION_TOP:case n.DIRECTION_BOTTOM:for(o=0;o<i;o++){s=r[o];if(!s.hidden&&s.isHeader&&(!s.dock||s.dock==="top"||s.dock==="bottom"))return s}break;case n.DIRECTION_LEFT:case n.DIRECTION_RIGHT:for(o=0;o<i;o++){s=r[o];if(!s.hidden&&s.isHeader&&(s.dock==="left"||s.dock==="right"))return s}break;default:throw"Panel#findReExpander must be passed a valid collapseDirection"}},getReExpander:function(e){var t=this,n=e||t.collapseDirection,r=t.reExpander||t.findReExpander(n);return t.expandDirection=t.getOppositeDirection(n),r||(t.reExpander=r=t.createReExpander(n,{dock:n,cls:Ext.baseCSSPrefix+"docked "+t.baseCls+"-"+t.ui+"-collapsed",isCollapsedExpander:!0}),t.dockedItems.insert(0,r)),r},createReExpander:function(e,t){var n=this,r=e==="left",i=e==="right",s=r||i,o=n.ownerCt,u=Ext.apply({hideMode:"offsets",title:n.title||"&#160;",titleAlign:n.titleAlign,orientation:s?"vertical":"horizontal",textCls:n.headerTextCls,icon:n.icon,iconCls:n.iconCls,glyph:n.glyph,baseCls:n.self.prototype.baseCls+"-header",ui:n.ui,frame:n.frame&&n.frameHeader,ignoreParentFrame:n.frame||n.overlapHeader,ignoreBorderManagement:n.frame||n.ignoreHeaderBorderManagement,indicateDrag:n.draggable,collapseImmune:!0,headerRole:n.headerRole,ownerCt:o&&n.collapseMode==="placeholder"?o:n,ownerLayout:n.componentLayout,margin:n.margin},t);n.collapseMode==="mini"&&(s?u.width=1:u.height=1);if(!n.hideCollapseTool){if(r||i&&n.isPlaceHolderCollapse())u.titlePosition=1;u.tools=[{xtype:"tool",type:"expand-"+n.getOppositeDirection(e),uiCls:["top"],handler:n.toggleCollapse,scope:n}]}return u=new Ext.panel.Header(u),u.addClsWithUI(n.getHeaderCollapsedClasses(u)),u},getHeaderCollapsedClasses:function(e){var t=this,n=t.collapsedCls,r;return r=[n,n+"-"+e.getDockName()],t.border&&(!t.frame||t.frame&&Ext.supports.CSS3BorderRadius)&&r.push(n+"-border-"+e.getDockName()),r},beginCollapse:function(){var e=this,t=e.lastBox,n=e.rendered,r=e.collapseMemento||(e.collapseMemento=new Ext.util.Memento(e)),i=e.getSizeModel(),s=e.header,o;r.capture(["height","minHeight","width","minWidth"]),t&&r.capture(e.restoreDimension(),t,"last."),e.collapsedVertical()?(i.width.shrinkWrap&&(e.width=n?e.getWidth():e.width||e.minWidth||100),delete e.height,e.minHeight=0):e.collapsedHorizontal()&&(i.height.shrinkWrap&&(e.height=n?e.getHeight():e.height||e.minHeight||100),delete e.width,e.minWidth=0),e.ownerCt&&e.ownerCt.getLayout().beginCollapse(e),!e.isPlaceHolderCollapse()&&s!==!1&&(s===(o=e.getReExpander())?(s.collapseImmune=!0,s.getHierarchyState().collapseImmune=!0,s.addClsWithUI(e.getHeaderCollapsedClasses(s)),s.rendered&&s.updateFrame()):o.el&&(o.el.show(),o.hidden=!1)),e.resizer&&e.resizer.disable()},beginExpand:function(){var e=this,t=e.lastBox,n=e.collapseMemento,r=e.restoreDimension(),i=e.header,s;n&&(n.restore(["minHeight","minWidth",r]),t&&n.restore(r,!0,t,"last.")),e.ownerCt&&e.ownerCt.getLayout().beginExpand(e),!e.isPlaceHolderCollapse()&&i!==!1&&(i===(s=e.getReExpander())?(delete i.collapseImmune,delete i.getHierarchyState().collapseImmune,i.removeClsWithUI(e.getHeaderCollapsedClasses(i)),i.rendered&&(i.expanding=!0,i.updateFrame(),delete i.expanding)):(s.hidden=!0,s.el.hide())),e.resizer&&e.resizer.enable()},collapse:function(e,t){var n=this,r=e||n.collapseDirection,i=n.ownerCt,s=n.ownerLayout;return n.isCollapsingOrExpanding?n:(arguments.length<2&&(t=n.animCollapse),n.collapsed||n.fireEvent("beforecollapse",n,e,t)===!1?n:s&&s.onBeforeComponentCollapse&&s.onBeforeComponentCollapse(n)===!1?n:i&&n.isPlaceHolderCollapse()?n.placeholderCollapse(e,t):(n.collapsed=r,n.beginCollapse(),n.getHierarchyState().collapsed=!0,n.fireHierarchyEvent("collapse"),n.doCollapseExpand(1,t)))},doCollapseExpand:function(e,t){var n=this,r=n.animCollapse,i=n.ownerLayout;return n.animCollapse=t,n.isCollapsingOrExpanding=e,t&&n.addCls(Ext.baseCSSPrefix+"animating-size"),i&&!t?i.onContentChange(n):n.updateLayout({isRoot:!0}),n.animCollapse=r,n},afterCollapse:function(e){var t=this,n=t.ownerLayout;t.isCollapsingOrExpanding=0,t.updateCollapseTool(),e&&t.removeCls(Ext.baseCSSPrefix+"animating-size"),n&&e&&n.onContentChange(t),t.setHiddenDocked(),t.fireEvent("collapse",t)},setHiddenDocked:function(){var e=this,t=e.hiddenOnCollapse,n=e.getDockedItems(),r=n.length,i=0,s,o;e.header!==!1&&(o=e.getReExpander()),t.add(e.body);for(;i<r;i++)s=n[i],s&&s!==o&&s.el&&t.add(s.el);t.setStyle("visibility","hidden")},restoreHiddenDocked:function(){var e=this.hiddenOnCollapse;e.setStyle("visibility",""),e.clear()},getPlaceholder:function(e){var t=this,n=e||t.collapseDirection,r=null,i=t.placeholder,s=t.floatable,o=t.titleCollapse;if(!i){if(s||t.collapsible&&o)r={click:{fn:!o&&s?t.floatCollapsedPanel:t.toggleCollapse,element:"el",scope:t}};t.placeholder=i=Ext.widget(t.createReExpander(n,{id:t.id+"-placeholder",listeners:r}))}return i.placeholderFor||(i.isComponent||(t.placeholder=i=t.lookupComponent(i)),Ext.applyIf(i,{margins:t.margins,placeholderFor:t}),i.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+n+"-placeholder",t.collapsedCls])),i},placeholderCollapse:function(e,t){var n=this,r=n.ownerCt,i=e||n.collapseDirection,s=Ext.baseCSSPrefix+"border-region-slide-in",o=n.getPlaceholder(i),u;return n.isCollapsingOrExpanding=1,n.setHiddenState(!0),n.collapsed=i,o.rendered?(o.el.dom.parentNode!==n.el.dom.parentNode&&n.el.dom.parentNode.insertBefore(o.el.dom,n.el.dom),o.hidden=!1,o.el.show(),r.updateLayout()):r.insert(r.items.indexOf(n),o),n.rendered?(n.el.setVisibilityMode(n.placeholderCollapseHideMode),t?(n.el.addCls(s),o.el.hide(),u=n.convertCollapseDir(i),n.el.slideOut(u,{preserveScroll:!0,duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){n.el.removeCls(s),o.el.show().setStyle("display","none").slideIn(u,{easing:"linear",duration:100,listeners:{afteranimate:function(){o.focus(),n.isCollapsingOrExpanding=0,n.fireEvent("collapse",n)}}})}}})):(n.el.hide(),n.isCollapsingOrExpanding=0,n.fireEvent("collapse",n))):(n.isCollapsingOrExpanding=0,n.preventCollapseFire||n.fireEvent("collapse",n)),n},floatCollapsedPanel:function(){var e=this,t=e.placeholder,n=t.getSize(),r,i=Ext.baseCSSPrefix+"border-region-slide-in",s=e.collapsed,o=e.ownerCt||e,u;if(e.isSliding)return;if(e.el.hasCls(i)){e.slideOutFloatedPanel();return}e.isSliding=!0,t.el.hide(),t.hidden=!0,e.el.show(),e.setHiddenState(!1),e.collapsed=!1,o.updateLayout(),r=e.getBox(!1,!0),t.el.show(),t.hidden=!1,e.el.hide(),e.setHiddenState(!0),e.collapsed=s,o.updateLayout(),e.slideOutTask=e.slideOutTask||new Ext.util.DelayedTask(e.slideOutFloatedPanel,e),t.el.on("mouseleave",e.onMouseLeaveFloated,e),e.el.on("mouseleave",e.onMouseLeaveFloated,e),t.el.on("mouseenter",e.onMouseEnterFloated,e),e.el.on("mouseenter",e.onMouseEnterFloated,e),e.el.addCls(i),e.floated=!0,e.collapseTool&&e.collapseTool.el.hide();switch(e.collapsed){case"top":e.setLocalXY(r.x,r.y+n.height-1);break;case"right":e.setLocalXY(r.x-n.width+1,r.y);break;case"bottom":e.setLocalXY(r.x,r.y-n.height+1);break;case"left":e.setLocalXY(r.x+n.width-1,r.y)}u=e.convertCollapseDir(e.collapsed),e.floatedFromCollapse=e.collapsed,e.collapsed=!1,e.setHiddenState(!1),e.el.slideIn(u,{preserveScroll:!0,duration:Ext.Number.from(e.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){e.isSliding=!1,e.fireEvent("float",e)}}})},onMouseLeaveFloated:function(e){this.slideOutTask.delay(500)},onMouseEnterFloated:function(e){this.slideOutTask.cancel()},isLayoutRoot:function(){return this.floatedFromCollapse?!0:this.callParent()},slideOutFloatedPanel:function(e){var t=this,n=t.el,r;if(t.isSliding||t.isDestroyed)return;t.isSliding=!0,t.floated=!1,t.slideOutFloatedPanelBegin(),typeof t.collapsed=="string"&&(r=t.convertCollapseDir(t.collapsed)),n.slideOut(r,{preserveScroll:!0,duration:Ext.Number.from(t.animCollapse,Ext.fx.Anim.prototype.duration),autoEnd:e===!0,listeners:{afteranimate:function(){t.slideOutFloatedPanelEnd(),t.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")}}})},slideOutFloatedPanelBegin:function(){var e=this,t=e.placeholder.el,n=e.el;e.collapsed=e.floatedFromCollapse,e.setHiddenState(!0),e.floatedFromCollapse=null,t.un("mouseleave",e.onMouseLeaveFloated,e),n.un("mouseleave",e.onMouseLeaveFloated,e),t.un("mouseenter",e.onMouseEnterFloated,e),n.un("mouseenter",e.onMouseEnterFloated,e)},slideOutFloatedPanelEnd:function(e){var t=this;t.collapseTool&&t.collapseTool.el.show(),t.slideOutTask.cancel(),t.isSliding=!1,e||t.fireEvent("unfloat",t)},expand:function(e){var t=this,n=t.ownerLayout;return t.isCollapsingOrExpanding?t:(arguments.length||(e=t.animCollapse),!t.collapsed&&!t.floatedFromCollapse?t:t.fireEvent("beforeexpand",t,e)===!1?t:n&&n.onBeforeComponentExpand&&n.onBeforeComponentExpand(t)===!1?t:(delete t.getHierarchyState().collapsed,t.isPlaceHolderCollapse()?t.placeholderExpand(e):(t.restoreHiddenDocked(),t.beginExpand(),t.collapsed=!1,t.doCollapseExpand(2,e))))},placeholderExpand:function(e){var t=this,n=t.collapsed,r=Ext.baseCSSPrefix+"border-region-slide-in",i,s,o=t.ownerLayout?t.ownerLayout.centerRegion:null;return Ext.AbstractComponent.layoutSuspendCount&&(e=!1),t.floatedFromCollapse&&(s=t.getPosition(!0),t.slideOutFloatedPanelBegin(),t.slideOutFloatedPanelEnd(),t.floated=!1),e?(Ext.suspendLayouts(),t.placeholder.hide(),t.el.show(),t.collapsed=!1,t.setHiddenState(!1),o&&!s&&(o.hidden=!0),Ext.resumeLayouts(!0),o.hidden=!1,t.el.addCls(r),t.isCollapsingOrExpanding=2,s?(i=t.getXY(),t.setLocalXY(s[0],s[1]),t.setXY([i[0],i[1]],{duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){t.el.removeCls(r),t.isCollapsingOrExpanding=0,t.fireEvent("expand",t)}}})):(t.el.hide(),t.placeholder.el.show(),t.placeholder.hidden=!1,t.setHiddenState(!1),t.el.slideIn(t.convertCollapseDir(n),{preserveScroll:!0,duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){t.el.removeCls(r),t.placeholder.hide(),t.updateLayout(),t.isCollapsingOrExpanding=0,t.fireEvent("expand",t)}}}))):(t.floated=t.collapsed=!1,t.el.removeCls(r),Ext.suspendLayouts(),t.placeholder.hide(),t.show(),Ext.resumeLayouts(!0),t.fireEvent("expand",t)),t},afterExpand:function(e){var t=this,n=t.ownerLayout;t.isCollapsingOrExpanding=0,t.updateCollapseTool(),e&&t.removeCls(Ext.baseCSSPrefix+"animating-size"),n&&e&&n.onContentChange(t),t.fireEvent("expand",t),t.fireHierarchyEvent("expand")},setBorder:function(e,t){if(t)return;var n=this,r=n.header;e?e===!0?e="1px":e=n.unitizeBox(e):e=0,r&&(r.isHeader?r.setBorder(e):r.border=e),n.rendered&&n.bodyBorder!==!1&&n.body.setStyle("border-width",e),n.updateLayout(),n.border=e},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},initDraggable:function(){var e=this;e.simpleDrag?e.initSimpleDraggable():e.dd=new Ext.panel.DD(e,Ext.isBoolean(e.draggable)?null:e.draggable)},initSimpleDraggable:function(){var e=this,t,n;e.header||e.updateHeader(!0);if(e.header){t=Ext.applyIf({el:e.el,delegate:"#"+Ext.escapeId(e.header.id)},e.draggable);if(e.constrain||e.constrainHeader)t.constrain=e.constrain,t.constrainDelegate=e.constrainHeader,t.constrainTo=e.constrainTo||e.container;n=e.dd=new Ext.util.ComponentDragger(e,t),e.relayEvents(n,["dragstart","drag","dragend"]),e.maximized&&n.disable()}},ghostTools:function(){var e=[],t=this.header,n=t?t.query("tool[hidden=false]"):[],r,i,s;if(n.length){r=0,i=n.length;for(;r<i;r++)s=n[r],e.push({type:s.type})}else e=[{type:"placeholder"}];return e},ghost:function(e){var t=this,n=t.ghostPanel,r=t.getBox(),i=t.header,s,o,u;n?n.el.show():t.ghostPanel=n=Ext.widget(t.createGhost(e)),n.setHiddenState(!1),n.floatParent=t.floatParent,n.toFront();if(i&&!t.preventHeader){s=n.header,s.suspendLayouts(),o=s.query("tool");for(u=o.length;u--;)s.remove(o[u]);n.addTool(t.ghostTools()),n.setTitle(t.title),s.setTitlePosition(i.titlePosition),t.iconCls?n.setIconCls(t.iconCls):t.icon?n.setIcon(t.icon):t.glyph&&n.setGlyph(t.glyph),s.addCls(Ext.baseCSSPrefix+"header-ghost"),s.resumeLayouts()}return n.setPagePosition(r.x,r.y),n.setSize(r.width,r.height),t.el.hide(),n},createGhost:function(e){var t=this,n=t.header,r=t.frame&&!t.alwaysFramed;return{xtype:"panel",hidden:!1,header:n?{titleAlign:n.titleAlign}:null,ui:r?t.ui.replace(/-framed$/,""):t.ui,id:t.id+"-ghost",renderTo:Ext.getBody(),resizable:!1,floating:{shadow:!1},frame:r,alwaysFramed:t.alwaysFramed,overlapHeader:t.overlapHeader,headerPosition:t.headerPosition,baseCls:t.baseCls,cls:t.baseCls+"-ghost "+(e||"")}},unghost:function(e,t){var n=this,r=n.ghostPanel;if(!r)return;e!==!1&&(n.el.show(),t!==!1&&(n.setPagePosition(r.getXY()),n.hideMode=="offsets"&&delete n.el.hideModeStyles),Ext.defer(n.focus,10,n)),r.el.hide(),r.setHiddenState(!0)},beginDrag:function(){this.floatingDescendants&&this.floatingDescendants.hide()},endDrag:function(){this.floatingDescendants&&this.floatingDescendants.show()},initResizable:function(){this.callParent(arguments),this.collapsed&&this.resizer.disable()},convertCollapseDir:function(e){return e.substr(0,1)}},function(){this.prototype.animCollapse=Ext.enableFx}),Ext.define("Ext.tip.Tip",{extend:Ext.panel.Panel,alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:!0,shim:!0},focusOnToFront:!1,closeAction:"hide",alwaysFramed:!0,frameHeader:!1,initComponent:function(){var e=this;e.floating=Ext.apply({},{shadow:e.shadow,constrain:e.constrainPosition},e.self.prototype.floating),e.callParent(arguments),e.constrain=e.constrain||e.constrainPosition},showAt:function(e){var t=this;this.callParent(arguments),t.isVisible()&&(t.setPagePosition(e[0],e[1]),(t.constrainPosition||t.constrain)&&t.doConstrain(),t.toFront(!0))},initDraggable:function(){var e=this;e.draggable={el:e.getDragEl(),delegate:e.header.el,constrain:e,constrainTo:e.el.dom.parentNode},Ext.Component.prototype.initDraggable.call(e)},ghost:undefined,unghost:undefined}),Ext.define("Ext.tip.ToolTip",{extend:Ext.tip.Tip,alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,ariaRole:"tooltip",initComponent:function(){var e=this;e.callParent(arguments),e.lastActive=new Date,e.setTarget(e.target),e.origAnchor=e.anchor},onRender:function(e,t){var n=this;n.callParent(arguments),n.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+n.getAnchorPosition(),n.anchorEl=n.el.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"tip-anchor "+n.anchorCls})},setTarget:function(e){var t=this,n=Ext.get(e),r;t.target&&(r=Ext.get(t.target),t.mun(r,"mouseover",t.onTargetOver,t),t.mun(r,"mouseout",t.onTargetOut,t),t.mun(r,"mousemove",t.onMouseMove,t)),t.target=n,n&&t.mon(n,{freezeEvent:!0,mouseover:t.onTargetOver,mouseout:t.onTargetOut,mousemove:t.onMouseMove,scope:t}),t.anchor&&(t.anchorTarget=t.target)},onMouseMove:function(e){var t=this,n=t.delegate?e.getTarget(t.delegate):t.triggerElement=!0,r;n?(t.targetXY=e.getXY(),n===t.triggerElement?!t.hidden&&t.trackMouse&&(r=t.getTargetXY(),t.constrainPosition&&(r=t.el.adjustForConstraints(r,t.el.parent())),t.setPagePosition(r)):(t.hide(),t.lastActive=new Date(0),t.onTargetOver(e))):!t.closable&&t.isVisible()&&t.autoHide!==!1&&t.hide()},getTargetXY:function(){var e=this,t,n,r,i,s,o,u,a,f,l,c,h;e.delegate&&(e.anchorTarget=e.triggerElement);if(e.anchor){e.targetCounter++,n=e.getOffsets(),r=e.anchorToTarget&&!e.trackMouse?e.getAlignToXY(e.anchorTarget,e.getAnchorAlign()):e.targetXY,i=Ext.Element.getViewWidth()-5,s=Ext.Element.getViewHeight()-5,o=document.documentElement,u=document.body,a=(o.scrollLeft||u.scrollLeft||0)+5,f=(o.scrollTop||u.scrollTop||0)+5,l=[r[0]+n[0],r[1]+n[1]],c=e.getSize(),h=e.constrainPosition,e.anchorEl.removeCls(e.anchorCls);if(e.targetCounter<2&&h){if(l[0]<a)return e.anchorToTarget&&(e.defaultAlign="l-r",e.mouseOffset&&(e.mouseOffset[0]*=-1)),e.anchor="left",e.getTargetXY();if(l[0]+c.width>i)return e.anchorToTarget&&(e.defaultAlign="r-l",e.mouseOffset&&(e.mouseOffset[0]*=-1)),e.anchor="right",e.getTargetXY();if(l[1]<f)return e.anchorToTarget&&(e.defaultAlign="t-b",e.mouseOffset&&(e.mouseOffset[1]*=-1)),e.anchor="top",e.getTargetXY();if(l[1]+c.height>s)return e.anchorToTarget&&(e.defaultAlign="b-t",e.mouseOffset&&(e.mouseOffset[1]*=-1)),e.anchor="bottom",e.getTargetXY()}return e.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+e.getAnchorPosition(),e.anchorEl.addCls(e.anchorCls),e.targetCounter=0,l}return t=e.getMouseOffset(),e.targetXY?[e.targetXY[0]+t[0],e.targetXY[1]+t[1]]:t},getMouseOffset:function(){var e=this,t=e.anchor?[0,0]:[15,18];return e.mouseOffset&&(t[0]+=e.mouseOffset[0],t[1]+=e.mouseOffset[1]),t},getAnchorPosition:function(){var e=this,t;e.anchor?e.tipAnchor=e.anchor.charAt(0):(t=e.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),e.tipAnchor=t[1].charAt(0));switch(e.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var e=this,t,n,r=e.getAnchorPosition().charAt(0);if(e.anchorToTarget&&!e.trackMouse)switch(r){case"t":n=[0,9];break;case"b":n=[0,-13];break;case"r":n=[-13,0];break;default:n=[9,0]}else switch(r){case"t":n=[-15-e.anchorOffset,30];break;case"b":n=[-19-e.anchorOffset,-13-e.el.dom.offsetHeight];break;case"r":n=[-15-e.el.dom.offsetWidth,-13-e.anchorOffset];break;default:n=[25,-13-e.anchorOffset]}return t=e.getMouseOffset(),n[0]+=t[0],n[1]+=t[1],n},onTargetOver:function(e){var t=this,n=t.delegate,r;if(t.disabled||e.within(t.target.dom,!0))return;r=n?e.getTarget(n):!0,r&&(t.triggerElement=r,t.triggerEvent=e,t.clearTimer("hide"),t.targetXY=e.getXY(),t.delayShow())},delayShow:function(){var e=this;e.hidden&&!e.showTimer?Ext.Date.getElapsed(e.lastActive)<e.quickShowInterval?e.show():e.showTimer=Ext.defer(e.showFromDelay,e.showDelay,e):!e.hidden&&e.autoHide!==!1&&e.show()},showFromDelay:function(){this.fromDelayShow=!0,this.show(),delete this.fromDelayShow},onShowVeto:function(){this.callParent(),delete this.triggerElement,this.clearTimer("show")},onTargetOut:function(e){var t=this,n=t.triggerElement,r=n===!0?t.target:n;if(t.disabled||!n||e.within(r,!0))return;t.showTimer&&(t.clearTimer("show"),t.triggerElement=null),t.autoHide!==!1&&t.delayHide()},delayHide:function(){var e=this;!e.hidden&&!e.hideTimer&&(e.hideTimer=Ext.defer(e.hide,e.hideDelay,e))},hide:function(){var e=this;e.clearTimer("dismiss"),e.lastActive=new Date,e.anchorEl&&e.anchorEl.hide(),e.callParent(arguments),delete e.triggerElement},show:function(){var e=this;this.callParent(),this.hidden===!1&&(e.setPagePosition(-1e4,-1e4),e.anchor&&(e.anchor=e.origAnchor),e.calledFromShowAt||e.showAt(e.getTargetXY()),e.anchor?(e.syncAnchor(),e.anchorEl.show()):e.anchorEl.hide())},showAt:function(e){var t=this;t.lastActive=new Date,t.clearTimers(),t.calledFromShowAt=!0,t.isVisible()||this.callParent(arguments),t.isVisible()&&(t.setPagePosition(e[0],e[1]),(t.constrainPosition||t.constrain)&&t.doConstrain(),t.toFront(!0),t.el.sync(!0),t.dismissDelay&&t.autoHide!==!1&&(t.dismissTimer=Ext.defer(t.hide,t.dismissDelay,t)),t.anchor?(t.syncAnchor(),t.anchorEl.isVisible()||t.anchorEl.show()):t.anchorEl.hide()),delete t.calledFromShowAt},syncAnchor:function(){var e=this,t,n,r;switch(e.tipAnchor.charAt(0)){case"t":t="b",n="tl",r=[20+e.anchorOffset,1];break;case"r":t="l",n="tr",r=[-1,12+e.anchorOffset];break;case"b":t="t",n="bl",r=[20+e.anchorOffset,-1];break;default:t="r",n="tl",r=[1,12+e.anchorOffset]}e.anchorEl.alignTo(e.el,t+"-"+n,r),e.anchorEl.setStyle("z-index",parseInt(e.el.getZIndex(),10)||1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(e,t){var n=this;n.callParent(arguments),n.anchor&&n.syncAnchor()},_timerNames:{},clearTimer:function(e){var t=this,n=t._timerNames,r=n[e]||(n[e]=e+"Timer"),i=t[r];i&&(clearTimeout(i),t[r]=null)},clearTimers:function(){var e=this;e.clearTimer("show"),e.clearTimer("dismiss"),e.clearTimer("hide")},onShow:function(){var e=this;e.callParent(),e.mon(Ext.getDoc(),"mousedown",e.onDocMouseDown,e)},onHide:function(){var e=this;e.callParent(),e.mun(Ext.getDoc(),"mousedown",e.onDocMouseDown,e)},onDocMouseDown:function(e){var t=this;!t.closable&&!e.within(t.el.dom)&&(t.disable(),Ext.defer(t.doEnable,100,t))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.callParent(),this.clearTimers(),this.hide()},beforeDestroy:function(){var e=this;e.clearTimers(),Ext.destroy(e.anchorEl),delete e.anchorEl,delete e.target,delete e.anchorTarget,delete e.triggerElement,e.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),this.callParent()}}),Ext.define("Ext.tip.QuickTip",{extend:Ext.tip.ToolTip,alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay"},shrinkWrapDock:!0,initComponent:function(){var e=this;e.target=e.target||Ext.getDoc(),e.targets=e.targets||{},e.callParent()},register:function(e){var t=Ext.isArray(e)?e:arguments,n=0,r=t.length,i,s,o;for(;n<r;n++){e=t[n],i=e.target;if(i)if(Ext.isArray(i))for(s=0,o=i.length;s<o;s++)this.targets[Ext.id(i[s])]=e;else this.targets[Ext.id(i)]=e}},unregister:function(e){delete this.targets[Ext.id(e)]},cancelShow:function(e){var t=this,n=t.activeTarget;e=Ext.get(e).dom,t.isVisible()?n&&n.el==e&&t.hide():n&&n.el==e&&t.clearTimer("show")},getTipCfg:function(e){var t=e.getTarget(),n=t.title,r;if(this.interceptTitles&&n&&Ext.isString(n))return t.qtip=n,t.removeAttribute("title"),e.preventDefault(),{text:n};r=this.tagConfig,t=e.getTarget("["+r.namespace+r.attribute+"]");if(t)return{target:t,text:t.getAttribute(r.namespace+r.attribute)}},onTargetOver:function(e){var t=this,n=e.getTarget(t.delegate),r,i,s,o,u,a,f,l,c,h,p;if(t.disabled)return;t.targetXY=e.getXY();if(!n||n.nodeType!==1||n==document.documentElement||n==document.body)return;if(t.activeTarget&&(n==t.activeTarget.el||Ext.fly(t.activeTarget.el).contains(n))){t.targetTextEmpty()?(t.onShowVeto(),delete t.activeTarget):(t.clearTimer("hide"),t.show());return}if(n){l=t.targets;for(p in l)if(l.hasOwnProperty
(p)){h=l[p],c=Ext.fly(h.target);if(c&&(c.dom===n||c.contains(n))){s=c.dom;break}}if(s){t.activeTarget=t.targets[s.id],t.activeTarget.el=n,t.anchor=t.activeTarget.anchor,t.anchor&&(t.anchorTarget=n),r=parseInt(t.activeTarget.showDelay,10),r&&(i=t.showDelay,t.showDelay=r),t.delayShow(),r&&(t.showDelay=i);return}}s=Ext.fly(n,"_quicktip-target"),o=t.tagConfig,u=o.namespace,a=t.getTipCfg(e),a&&(a.target&&(n=a.target,s=Ext.fly(n,"_quicktip-target")),f=s.getAttribute(u+o.hide),t.activeTarget={el:n,text:a.text,width:+s.getAttribute(u+o.width)||null,autoHide:f!="user"&&f!=="false",title:s.getAttribute(u+o.title),cls:s.getAttribute(u+o.cls),align:s.getAttribute(u+o.align),showDelay:parseInt(s.getAttribute(u+o.showDelay),10)},t.anchor=s.getAttribute(u+o.anchor),t.anchor&&(t.anchorTarget=n),r=parseInt(t.activeTarget.showDelay,10),r&&(i=t.showDelay,t.showDelay=r),t.delayShow(),r&&(t.showDelay=i))},onTargetOut:function(e){var t=this,n=t.activeTarget,r,i;if(n&&e.within(t.activeTarget.el)&&!t.getTipCfg(e))return;t.clearTimer("show"),delete t.activeTarget,t.autoHide!==!1&&(r=n&&parseInt(n.hideDelay,10),r&&(i=t.hideDelay,t.hideDelay=r),t.delayHide(),r&&(t.hideDelay=i))},targetTextEmpty:function(){var e=this,t=e.activeTarget,n=e.tagConfig,r,i;if(t){r=t.el;if(r){i=r.getAttribute(n.namespace+n.attribute);if(!i&&!e.targets[Ext.id(t.target)])return!0}}return!1},show:function(){var e=this,t=e.fromDelayShow;if(t&&e.targetTextEmpty()){e.onShowVeto(),delete e.activeTarget;return}e.callParent(arguments)},showAt:function(e){var t=this,n=t.activeTarget,r=t.header,i,s;n&&(t.rendered||(t.render(Ext.getBody()),t.activeTarget=n),t.suspendLayouts(),n.title?(t.setTitle(n.title),r.show()):r&&r.hide(),t.update(n.text),t.autoHide=n.autoHide,i=n.dismissDelay,t.dismissDelay=Ext.isNumber(i)?i:t.dismissDelay,n.mouseOffset&&(e[0]+=n.mouseOffset[0],e[1]+=n.mouseOffset[1]),s=t.lastCls,s&&(t.removeCls(s),delete t.lastCls),s=n.cls,s&&(t.addCls(s),t.lastCls=s),t.setWidth(n.width),t.anchor?t.constrainPosition=!1:n.align?(e=t.getAlignToXY(n.el,n.align),t.constrainPosition=!1):t.constrainPosition=!0,t.resumeLayouts(!0)),t.callParent([e])},hide:function(){delete this.activeTarget,this.callParent()}}),Ext.define("Ext.tip.QuickTipManager",{singleton:!0,alternateClassName:"Ext.QuickTips",disabled:!1,init:function(e,t){var n=this;if(!n.tip){if(!Ext.isReady)return Ext.onReady(function(){Ext.tip.QuickTipManager.init(e,t)}),!1;var r=Ext.apply({disabled:n.disabled,id:"ext-quicktips-tip"},t),i=r.className,s=r.xtype;i?delete r.className:s&&(i="widget."+s,delete r.xtype),e!==!1&&(r.renderTo=document.body),n.tip=Ext.create(i||"Ext.tip.QuickTip",r),Ext.quickTipsActive=!0}},destroy:function(){Ext.destroy(this.tip),this.tip=undefined},ddDisable:function(){var e=this,t=e.tip;t&&!e.disabled&&t.disable()},ddEnable:function(){var e=this,t=e.tip;t&&!e.disabled&&t.enable()},enable:function(){var e=this,t=e.tip;t&&t.enable(),e.disabled=!1},disable:function(){var e=this,t=e.tip;t&&t.disable(),e.disabled=!0},isEnabled:function(){var e=this.tip;return e!==undefined&&!e.disabled},getQuickTip:function(){return this.tip},register:function(){var e=this.tip;e.register.apply(e,arguments)},unregister:function(){var e=this.tip;e.unregister.apply(e,arguments)},tips:function(){var e=this.tip;e.register.apply(e,arguments)}}),Ext.define("Ext.app.Application",{extend:Ext.app.Controller,scope:undefined,enableQuickTips:!0,appFolder:"app",appProperty:"app",namespaces:[],autoCreateViewport:!1,paths:null,onClassExtended:function(e,t,n){var r=Ext.app.Controller,i=e.prototype,s=[],o,u,a,f,l;a=t.name||e.superclass.name,l=t.appFolder||e.superclass.appFolder,a&&(t.$namespace=a,Ext.app.addNamespaces(a)),t.namespaces&&Ext.app.addNamespaces(t.namespaces);if(!t["paths processed"]){a&&l&&Ext.Loader.setPath(a,l),u=t.paths;if(u)for(f in u)u.hasOwnProperty(f)&&Ext.Loader.setPath(f,u[f])}else delete t["paths processed"];t.autoCreateViewport&&r.processDependencies(i,s,a,"view",["Viewport"]),s.length&&(o=n.onBeforeCreated,n.onBeforeCreated=function(e,t){var n=Ext.Array.clone(arguments);Ext.require(s,function(){return o.apply(this,n)})})},constructor:function(e){var t=this;t.callParent(arguments),t.doInit(t),t.initNamespace(),t.initControllers(),t.onBeforeLaunch(),t.finishInitControllers()},initNamespace:function(){var e=this,t=e.appProperty,n;n=Ext.namespace(e.name),n&&(n.getApplication=function(){return e},t&&(n[t]||(n[t]=e)))},initControllers:function(){var e=this,t=Ext.Array.from(e.controllers);e.controllers=new Ext.util.MixedCollection;for(var n=0,r=t.length;n<r;n++)e.getController(t[n])},finishInitControllers:function(){var e=this,t,n,r;t=e.controllers.getRange();for(n=0,r=t.length;n<r;n++)t[n].finishInit(e)},launch:Ext.emptyFn,onBeforeLaunch:function(){var e=this,t,n,r,i;e.enableQuickTips&&e.initQuickTips(),e.autoCreateViewport&&e.initViewport(),e.launch.call(e.scope||e),e.launched=!0,e.fireEvent("launch",e),t=e.controllers.items,r=t.length;for(n=0;n<r;n++)i=t[n],i.onLaunch(e)},getModuleClassName:function(e,t){return Ext.app.Controller.getFullName(e,t,this.name).absoluteName},initQuickTips:function(){Ext.tip.QuickTipManager.init()},initViewport:function(){var e=this.getView("Viewport");e&&e.create()},getController:function(e){var t=this,n=t.controllers,r,i;return i=n.get(e),i||(r=t.getModuleClassName(e,"controller"),i=Ext.create(r,{application:t,id:e}),n.add(i),t._initialized&&i.doInit(t)),i},getApplication:function(){return this}}),Ext.define("Ext.app.domain.Controller",{extend:Ext.app.EventDomain,singleton:!0,type:"controller",idProperty:"id",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.app.Controller)}}),Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:{observable:Ext.util.Observable},isProvider:!0,constructor:function(e){var t=this;Ext.apply(t,e),Ext.applyIf(t,{id:Ext.id(null,"provider-")}),t.addEvents("connect","disconnect","data","exception"),t.mixins.observable.constructor.call(t,e)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn}),Ext.define("Ext.app.domain.Direct",{extend:Ext.app.EventDomain,singleton:!0,type:"direct",idProperty:"id",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.direct.Provider)}}),Ext.define("Ext.button.Split",{alias:"widget.splitbutton",extend:Ext.button.Button,alternateClassName:"Ext.SplitButton",arrowCls:"split",split:!0,initComponent:function(){this.callParent(),this.addEvents("arrowclick")},setArrowHandler:function(e,t){this.arrowHandler=e,this.scope=t},onClick:function(e){var t=this;t.doPreventDefault(e),t.disabled||(t.overMenuTrigger?(e.preventDefault(),t.maybeShowMenu(),t.fireEvent("arrowclick",t,e),t.arrowHandler&&t.arrowHandler.call(t.scope||t,t,e)):(t.doToggle(),t.fireHandler(e)))}}),Ext.define("Ext.button.Cycle",{alias:"widget.cycle",extend:Ext.button.Split,alternateClassName:"Ext.CycleButton",getButtonText:function(e){var t=this,n="";return e&&t.showText===!0?(t.prependText&&(n+=t.prependText),n+=e.text,n):t.text},setActiveItem:function(e,t){var n=this;Ext.isObject(e)||(e=n.menu.getComponent(e)),e&&(n.rendered?(n.setText(n.getButtonText(e)),n.setIconCls(e.iconCls),n.setGlyph(e.glyph)):(n.text=n.getButtonText(e),n.iconCls=e.iconCls,n.glyph=e.glyph),n.activeItem=e,e.checked||e.setChecked(!0,!1),n.forceIcon&&n.setIconCls(n.forceIcon),n.forceGlyph&&n.setGlyph(n.forceGlyph),t||n.fireEvent("change",n,e))},getActiveItem:function(){return this.activeItem},initComponent:function(){var e=this,t=0,n,r,i,s;e.addEvents("change"),e.changeHandler&&(e.on("change",e.changeHandler,e.scope||e),delete e.changeHandler),n=(e.menu.items||[]).concat(e.items||[]),e.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},e.menu),i=n.length;for(r=0;r<i;r++)s=n[r],s=Ext.applyIf({group:e.id,itemIndex:r,checkHandler:e.checkHandler,scope:e,checked:s.checked||!1},s),e.menu.items.push(s),s.checked&&(t=r);e.itemCount=e.menu.items.length,e.callParent(arguments),e.on("click",e.toggleSelected,e),e.setActiveItem(t,e),e.width&&e.showText&&e.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")},checkHandler:function(e,t){t&&this.setActiveItem(e)},toggleSelected:function(){var e=this,t=e.menu,n;n=e.activeItem.next(":not([disabled])")||t.items.getAt(0),n.setChecked(!0)}}),Ext.define("Ext.chart.Callout",{constructor:function(e){e.callouts&&(e.callouts.styles=Ext.applyIf(e.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"}),this.callouts=Ext.apply(this.callouts||{},e.callouts),this.calloutsArray=[])},renderCallouts:function(){if(!this.callouts)return;var e=this,t=e.items,n=e.chart.animate,r=e.callouts,i=r.styles,s=e.calloutsArray,o=e.chart.getChartStore(),u=o.getCount(),a=t.length/u,f=[],l,c,h,p,d,v,m,g;for(l=0,c=0;l<u;l++)for(h=0;h<a;h++){d=t[c],v=s[c],m=o.getAt(l),g=!r.filter||r.filter(m);if(!g&&!v){c++;continue}v||(s[c]=v=e.onCreateCallout(m,d,l,g,h,c));for(p in v)v[p]&&v[p].setAttributes&&v[p].setAttributes(i,!0);if(!g)for(p in v)v[p]&&(v[p].setAttributes?v[p].setAttributes({hidden:!0},!0):v[p].setVisible&&v[p].setVisible(!1));r&&r.renderer&&r.renderer(v,m),e.onPlaceCallout(v,m,d,l,g,n,h,c,f),f.push(v),c++}this.hideCallouts(c)},onCreateCallout:function(e,t,n,r){var i=this,s=i.calloutsGroup,o=i.callouts,u=o?o.styles:undefined,a=u?u.width:0,f=u?u.height:0,l=i.chart,c=l.surface,h={lines:!1};return h.lines=c.add(Ext.apply({},{type:"path",path:"M0,0",stroke:i.getLegendColor()||"#555"},u)),o.items&&(h.panel=new Ext.Panel({style:"position: absolute;",width:a,height:f,items:o.items,renderTo:l.el})),h},hideCallouts:function(e){var t=this.calloutsArray,n=t.length,r,i;while(n-->e){r=t[n];for(i in r)r[i]&&r[i].hide(!0)}}}),Ext.define("Ext.draw.CompositeSprite",{extend:Ext.util.MixedCollection,mixins:{animate:Ext.util.Animate},autoDestroy:!1,isCompositeSprite:!0,constructor:function(e){var t=this;e=e||{},Ext.apply(t,e),t.addEvents("mousedown","mouseup","mouseover","mouseout","click"),t.id=Ext.id(null,"ext-sprite-group-"),t.callParent()},onClick:function(e){this.fireEvent("click",e)},onMouseUp:function(e){this.fireEvent("mouseup",e)},onMouseDown:function(e){this.fireEvent("mousedown",e)},onMouseOver:function(e){this.fireEvent("mouseover",e)},onMouseOut:function(e){this.fireEvent("mouseout",e)},attachEvents:function(e){var t=this;e.on({scope:t,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.onClick})},add:function(e,t){var n=this.callParent(arguments);return this.attachEvents(n),n},insert:function(e,t,n){return this.callParent(arguments)},remove:function(e){var t=this;return e.un({scope:t,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.onClick}),t.callParent(arguments)},getBBox:function(){var e=0,t,n,r=this.items,i=this.length,s=Infinity,o=s,u=-s,a=s,f=-s,l,c;for(;e<i;e++)t=r[e],t.el&&!t.bboxExcluded&&(n=t.getBBox(),o=Math.min(o,n.x),a=Math.min(a,n.y),u=Math.max(u,n.height+n.y),f=Math.max(f,n.width+n.x));return{x:o,y:a,height:u-a,width:f-o}},setAttributes:function(e,t){var n=0,r=this.items,i=this.length;for(;n<i;n++)r[n].setAttributes(e,t);return this},hide:function(e){var t=0,n=this.items,r=this.length;for(;t<r;t++)n[t].hide(e);return this},show:function(e){var t=0,n=this.items,r=this.length;for(;t<r;t++)n[t].show(e);return this},redraw:function(){var e=this,t=0,n=e.items,r=e.getSurface(),i=e.length;if(r)for(;t<i;t++)r.renderItem(n[t]);return e},setStyle:function(e){var t=0,n=this.items,r=this.length,i,s;for(;t<r;t++)i=n[t],s=i.el,s&&s.setStyle(e)},addCls:function(e){var t=0,n=this.items,r=this.getSurface(),i=this.length;if(r)for(;t<i;t++)r.addCls(n[t],e)},removeCls:function(e){var t=0,n=this.items,r=this.getSurface(),i=this.length;if(r)for(;t<i;t++)r.removeCls(n[t],e)},getSurface:function(){var e=this.first();return e?e.surface:null},destroy:function(){var e=this,t=e.getSurface(),n=e.autoDestroy,r;if(t)while(e.getCount()>0)r=e.first(),e.remove(r),t.remove(r,n);e.clearListeners()}}),Ext.define("Ext.draw.Surface",{mixins:{observable:Ext.util.Observable},separatorRe:/[, ]+/,enginePriority:["Svg","Vml"],statics:{create:function(e,t){t=t||this.prototype.enginePriority;var n=0,r=t.length;for(;n<r;n++)if(Ext.supports[t[n]])return Ext.create("Ext.draw.engine."+t[n],e);return!1},save:function(e,t){t=t||{};var n={"image/png":"Image","image/jpeg":"Image","image/svg+xml":"Svg"},r=n[t.type]||"Svg",i=Ext.draw.engine[r+"Exporter"];return i.generate(e,t)}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:!1,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"none","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,orderSpritesByZIndex:!0,constructor:function(e){var t=this;e=e||{},Ext.apply(t,e),t.domRef=Ext.getDoc().dom,t.customAttributes={},t.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick"),t.mixins.observable.constructor.call(t),t.getId(),t.initGradients(),t.initItems(),t.renderTo&&(t.render(t.renderTo),delete t.renderTo),t.initBackground(e.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:function(e,t,n,r){isFinite(e)&&isFinite(t)&&isFinite(n)&&isFinite(r)&&(this.viewBox={x:e,y:t,width:n,height:r},this.applyViewBox())},addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){if(this.hasOwnProperty("gradients")){var e=this.gradients,t=this.addGradient,n,r;if(e)for(n=0,r=e.length;n<r;n++)if(t.call(this,e[n],n,r)===!1)break}},initItems:function(){var e=this.items;this.items=new Ext.draw.CompositeSprite,this.items.autoDestroy=!0,this.groups=new Ext.draw.CompositeSprite,e&&this.add(e)},initBackground:function(e){var t=this,n=t.width,r=t.height,i,s;Ext.isString(e)&&(e={fill:e}),e&&(e.gradient?(s=e.gradient,i=s.id,t.addGradient(s),t.background=t.add({type:"rect",isBackground:!0,x:0,y:0,width:n,height:r,fill:"url(#"+i+")",zIndex:-1})):e.fill?t.background=t.add({type:"rect",isBackground:!0,x:0,y:0,width:n,height:r,fill:e.fill,zIndex:-1}):e.image&&(t.background=t.add({type:"image",isBackground:!0,x:0,y:0,width:n,height:r,src:e.image,zIndex:-1})),t.background.bboxExcluded=!0)},setSize:function(e,t){this.applyViewBox()},scrubAttrs:function(e){var t,n={},r={},i=e.attr;for(t in i)this.translateAttrs.hasOwnProperty(t)?(n[this.translateAttrs[t]]=i[t],r[this.translateAttrs[t]]=!0):this.availableAttrs.hasOwnProperty(t)&&!r[t]&&(n[t]=i[t]);return n},onClick:function(e){this.processEvent("click",e)},onDblClick:function(e){this.processEvent("dblclick",e)},onMouseUp:function(e){this.processEvent("mouseup",e)},onMouseDown:function(e){this.processEvent("mousedown",e)},onMouseOver:function(e){this.processEvent("mouseover",e)},onMouseOut:function(e){this.processEvent("mouseout",e)},onMouseMove:function(e){this.fireEvent("mousemove",e)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var e=Array.prototype.slice.call(arguments),t,n=e.length>1,r,i,s,o,u;if(n||Ext.isArray(e[0])){r=n?e:e[0],i=[];for(s=0,o=r.length;s<o;s++)u=r[s],u=this.add(u),i.push(u);return i}return t=this.prepareItems(e[0],!0)[0],this.insertByZIndex(t),this.onAdd(t),t},insertByZIndex:function(e){var t=this,n=t.items.items,r=n.length,i=Math.ceil,s=e.attr.zIndex,o=r,u=o-1,a=0,f;if(t.orderSpritesByZIndex&&r&&s<n[u].attr.zIndex){while(a<=u){o=i((a+u)/2),f=n[o].attr.zIndex;if(f>s)u=o-1;else{if(!(f<s))break;a=o+1}}while(o<r&&n[o].attr.zIndex<=s)o++}return t.items.insert(o,e),o},onAdd:function(e){var t=e.group,n=e.draggable,r,i,s;if(t){r=[].concat(t),i=r.length;for(s=0;s<i;s++)t=r[s],this.getGroup(t).add(e);delete e.group}n&&e.initDraggable()},remove:function(e,t){if(e){this.items.remove(e);var n=[].concat(this.groups.items),r=n.length,i;for(i=0;i<r;i++)n[i].remove(e);e.onRemove(),t===!0&&e.destroy()}},removeAll:function(e){var t=this.items.items,n=t.length,r;for(r=n-1;r>-1;r--)this.remove(t[r],e)},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyViewBox:function(){var e=this,t=e.viewBox,n=e.width||1,r=e.height||1,i,s,o,u,a,f,l;t&&(n||r)?(i=t.x,s=t.y,o=t.width,u=t.height,a=r/u,f=n/o,l=Math.min(f,a),o*l<n&&(i-=(n-o*l)/2/l),u*l<r&&(s-=(r-u*l)/2/l),e.viewBoxShift={dx:-i,dy:-s,scale:l},e.background&&e.background.setAttributes(Ext.apply({},{x:i,y:s,width:n/l,height:r/l},{hidden:!1}),!0)):e.background&&n&&r&&e.background.setAttributes(Ext.apply({x:0,y:0,width:n,height:r},{hidden:!1}),!0)},getBBox:function(e,t){var n=this["getPath"+e.type](e);return t?(e.bbox.plain=e.bbox.plain||Ext.draw.Draw.pathDimensions(n),e.bbox.plain):(e.dirtyTransform&&this.applyTransformations(e,!0),e.bbox.transform=e.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(n,e.matrix)),e.bbox.transform)},transformToViewBox:function(e,t){if(this.viewBoxShift){var n=this,r=n.viewBoxShift;return[e/r.scale-r.dx,t/r.scale-r.dy]}return[e,t]},applyTransformations:function(e,t){e.type=="text"&&(e.bbox.transform=0,this.transform(e,!1)),e.dirtyTransform=!1;var n=this,r=e.attr;(r.translation.x!=null||r.translation.y!=null)&&n.translate(e),(r.scaling.x!=null||r.scaling.y!=null)&&n.scale(e),r.rotation.degrees!=null&&n.rotate(e),e.bbox.transform=0,this.transform(e,t),e.transformations=[]},rotate:function(e){var t,n=e.attr.rotation.degrees,r=e.attr.rotation.x,i=e.attr.rotation.y;if(!Ext.isNumber(r)||!Ext.isNumber(i))t=this.getBBox(e,!0),r=Ext.isNumber(r)?r:t.x+t.width/2,i=Ext.isNumber(i)?i:t.y+t.height/2;e.transformations.push({type:"rotate",degrees:n,x:r,y:i})},translate:function(e){var t=e.attr.translation.x||0,n=e.attr.translation.y||0;e.transformations.push({type:"translate",x:t,y:n})},scale:function(e){var t,n=e.attr.scaling.x||1,r=e.attr.scaling.y||1,i=e.attr.scaling.centerX,s=e.attr.scaling.centerY;if(!Ext.isNumber(i)||!Ext.isNumber(s))t=this.getBBox(e,!0),i=Ext.isNumber(i)?i:t.x+t.width/2,s=Ext.isNumber(s)?s:t.y+t.height/2;e.transformations.push({type:"scale",x:n,y:r,centerX:i,centerY:s})},rectPath:function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},ellipsePath:function(e,t,n,r){return r==null&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},getPathpath:function(e){return e.attr.path},getPathcircle:function(e){var t=e.attr;return this.ellipsePath(t.x,t.y,t.radius,t.radius)},getPathellipse:function(e){var t=e.attr;return this.ellipsePath(t.x,t.y,t.radiusX||t.width/2||0,t.radiusY||t.height/2||0)},getPathrect:function(e){var t=e.attr;return this.rectPath(t.x||0,t.y||0,t.width||0,t.height||0,t.r||0)},getPathimage:function(e){var t=e.attr;return this.rectPath(t.x||0,t.y||0,t.width,t.height)},getPathtext:function(e){var t=this.getBBoxText(e);return this.rectPath(t.x,t.y,t.width,t.height)},createGroup:function(e){var t=this.groups.get(e);return t||(t=new Ext.draw.CompositeSprite({surface:this}),t.id=e||Ext.id(null,"ext-surface-group-"),this.groups.add(t)),t},getGroup:function(e){var t;return typeof e=="string"?(t=this.groups.get(e),t||(t=this.createGroup(e))):t=e,t},prepareItems:function(e,t){e=[].concat(e);var n,r,i;for(r=0,i=e.length;r<i;r++)n=e[r],n instanceof Ext.draw.Sprite?n.surface=this:(n.surface=this,e[r]=this.createItem(n));return e},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){var e=this;delete e.domRef,e.background&&e.background.destroy(),e.removeAll(!0),Ext.destroy(e.groups.items)}}),Ext.define("Ext.layout.component.Draw",{alias:"layout.draw",extend:Ext.layout.component.Auto,setHeightInDom:!0,setWidthInDom:!0,type:"draw",measureContentWidth:function(e){var t=e.target,n=e.getPaddingInfo(),r=this.getBBox(e);return t.viewBox?e.heightModel.shrinkWrap?n.width:r.width/r.height*(e.getProp("contentHeight")-n.height)+n.width:t.autoSize?r.width+n.width:r.x+r.width+n.width},measureContentHeight:function(e){var t=e.target,n=e.getPaddingInfo(),r=this.getBBox(e);return e.target.viewBox?e.widthModel.shrinkWrap?n.height:r.height/r.width*(e.getProp("contentWidth")-n.width)+n.height:t.autoSize?r.height+n.height:r.y+r.height+n.height},getBBox:function(e){var t=e.surfaceBBox;return t||(t=e.target.surface.items.getBBox(),t.width===-Infinity&&t.height===-Infinity&&(t.width=t.height=t.x=t.y=0),e.surfaceBBox=t),t},publishInnerWidth:function(e,t){e.setContentWidth(t-e.getFrameInfo().width,!0)},publishInnerHeight:function(e,t){e.setContentHeight(t-e.getFrameInfo().height,!0)},finishedLayout:function(e){var t=e.props,n=e.getPaddingInfo();this.owner.setSurfaceSize(t.contentWidth-n.width,t.contentHeight-n.height),this.callParent(arguments)}}),Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:Ext.Component,enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:!0,shrinkWrap:3,autoSize:!1,suspendSizing:0,initComponent:function(){this.callParent(arguments),this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click","dblclick")},onRender:function(){this.callParent(arguments),this.createSurface()!==!1&&this.configureSurfaceSize()},configureSurfaceSize:function(){var e=this,t=e.viewBox,n=e.autoSize,r;(t||n)&&!e.suspendSizing&&(r=e.surface.items.getBBox(),t?e.surface.setViewBox(r.x,r.y,r.width,r.height):e.autoSizeSurface(r))},autoSizeSurface:function(e){e=e||this.surface.items.getBBox(),this.setSurfaceSize(e.width,e.height)},setSurfaceSize:function(e,t){this.surface.setSize(e,t);if(this.autoSize){var n=this.surface.items.getBBox();this.surface.setViewBox(n.x,n.y- +Ext.isOpera,e,t)}},createSurface:function(){function r(t){return function(n){e.fireEvent(t,n)}}var e=this,t=Ext.applyIf({renderTo:e.el,height:e.height,width:e.width,items:e.items},e.initialConfig),n;delete t.listeners,t.gradients||(t.gradients=e.gradients),e.initSurfaceCfg(t),n=Ext.draw.Surface.create(t,e.enginePriority);if(!n)return!1;e.surface=n,n.owner=e,n.on({scope:e,mouseup:r("mouseup"),mousedown:r("mousedown"),mousemove:r("mousemove"),mouseenter:r("mouseenter"),mouseleave:r("mouseleave"),click:r("click"),dblclick:r("dblclick")})},initSurfaceCfg:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.surface),this.callParent(arguments)}}),Ext.chart=Ext.chart||{},Ext.define("Ext.chart.theme.Theme",function(){return function(){Ext.chart.theme=function(e,t){e=e||{};var n=0,r=Ext.Date.now(),i,s,o,u,a,f,l,c,h=[],p,d;e.baseColor&&(p=Ext.draw.Color.fromString(e.baseColor),d=p.getHSL()[2],d<.15?p=p.getLighter(.3):d<.3?p=p.getLighter(.15):d>.85?p=p.getDarker(.3):d>.7&&(p=p.getDarker(.15)),e.colors=[p.getDarker(.3).toString(),p.getDarker(.15).toString(),p.toString(),p.getLighter(.15).toString(),p.getLighter(.3).toString()],delete e.baseColor);if(e.colors){s=e.colors.slice(),a=t.markerThemes,u=t.seriesThemes,i=s.length,t.colors=s;for(;n<i;n++)o=s[n],l=a[n]||{},f=u[n]||{},l.fill=f.fill=l.stroke=f.stroke=o,a[n]=l,u[n]=f;t.markerThemes=a.slice(0,i),t.seriesThemes=u.slice(0,i)}for(c in t)c in e&&(Ext.isObject(e[c])&&Ext.isObject(t[c])?Ext.apply(t[c],e[c]):t[c]=e[c]);if(e.useGradients){s=t.colors||function(){var e=[];for(n=0,u=t.seriesThemes,i=u.length;n<i;n++)e.push(u[n].fill||u[n].stroke);return e}();for(n=0,i=s.length;n<i;n++)p=Ext.draw.Color.fromString(s[n]),p&&(o=p.getDarker(.1).toString(),p=p.toString(),c="theme-"+p.substr(1)+"-"+o.substr(1)+"-"+r,h.push({id:c,angle:45,stops:{0:{color:p.toString()},100:{color:o.toString()}}}),s[n]="url(#"+c+")");t.gradients=h,t.colors=s}Ext.apply(this,t)}}(),{theme:"Base",themeAttrs:!1,initTheme:function(e){var t=this,n=Ext.chart.theme,r,i;if(e){e=e.split(":");for(r in n)if(r==e[0]){i=e[1]=="gradients",t.themeAttrs=new n[r]({useGradients:i}),i&&(t.gradients=t.themeAttrs.gradients),t.themeAttrs.background&&(t.background=t.themeAttrs.background);return}}}}}()),Ext.define("Ext.chart.MaskLayer",{extend:Ext.Component,constructor:function(e){e=Ext.apply(e||{},{style:"position:absolute;background-color:#ff9;cursor:crosshair;opacity:0.5;border:1px solid #00f;"}),this.callParent([e])},initComponent:function(){var e=this;e.callParent(arguments),e.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments),this.dd.onStart=function(e){var t=this,n=t.comp;this.startPosition=n.getPosition(!0),n.ghost&&!n.liveDrag&&(t.proxy=n.ghost(),t.dragTarget=t.proxy.header.el);if(t.constrain||t.constrainDelegate)t.constrainTo=t.calculateConstrainRegion()}}}),Ext.define("Ext.chart.Mask",{constructor:function(e){var t=this;t.addEvents("select"),e&&Ext.apply(t,e),t.enableMask&&t.on("afterrender",function(){var e=new Ext.chart.MaskLayer({renderTo:t.el,hidden:!0});e.el.on({mousemove:function(e){t.onMouseMove(e)},mouseup:function(e){t.onMouseUp(e)}}),e.initDraggable(),t.maskType=t.mask,t.mask=e,t.maskSprite=t.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:.6,hidden:!0,stroke:"#00f",cursor:"crosshair"})},t,{single:!0})},onMouseUp:function(e){var t=this,n=t.bbox||t.chartBBox,r;t.maskMouseDown=!1,t.mouseDown=!1,t.mouseMoved&&(t.handleMouseEvent(e),t.mouseMoved=!1,r=t.maskSelection,t.fireEvent("select",t,{x:r.x-n.x,y:r.y-n.y,width:r.width,height:r.height}))},onMouseDown:function(e){this.handleMouseEvent(e)},onMouseMove:function(e){this.handleMouseEvent(e)},handleMouseEvent:function(e){var t=this,n=t.maskType,r=t.bbox||t.chartBBox,i=r.x,s=r.y,o=Math,u=o.floor,a=o.abs,f=o.min,l=o.max,c=u(s+r.height),h=u(i+r.width),p=e.getPageX()-t.el.getX(),d=e.getPageY()-t.el.getY(),v=t.maskMouseDown,m;p=l(p,i),d=l(d,s),p=f(p,h),d=f(d,c),e.type==="mousedown"?(t.mouseDown=!0,t.mouseMoved=!1,t.maskMouseDown={x:p,y:d}):(t.mouseMoved=t.mouseDown,v&&t.mouseDown?(n=="horizontal"?(d=s,v.y=c):n=="vertical"&&(p=i,v.x=h),h=v.x-p,c=v.y-d,m=["M",p,d,"l",h,0,0,c,-h,0,"z"],t.maskSelection={x:(h>0?p:p+h)+t.el.getX(),y:(c>0?d:d+c)+t.el.getY(),width:a(h),height:a(c)},t.mask.updateBox(t.maskSelection),t.mask.show(),t.maskSprite.setAttributes({hidden:!0},!0)):(n=="horizontal"?m=["M",p,s,"L",p,c]:n=="vertical"?m=["M",i,d,"L",h,d]:m=["M",p,s,"L",p,c,"M",i,d,"L",h,d],t.maskSprite.setAttributes({path:m,"stroke-width":n===!0?1:1,hidden:!1},!0)))},onMouseLeave:function(e){var t=this;t.mouseMoved=!1,t.mouseDown=!1,t.maskMouseDown=!1,t.mask.hide(),t.maskSprite.hide(!0)}}),Ext.define("Ext.chart.Navigation",{setZoom:function(e){var t=this,n=t.axes.items,r,i,s,o=t.chartBBox,u=o.width,a=o.height,f={x:e.x-t.el.getX(),y:e.y-t.el.getY(),width:e.width,height:e.height},l,c,h,p,d,v,m,g,y;for(r=0,i=n.length;r<i;r++)s=n[r],y=s.position=="bottom"||s.position=="top",s.type=="Category"?(d||(d=t.getChartStore(),v=d.data.items.length),l=f,g=s.length,m=Math.round(g/v),y?(h=l.x?Math.floor(l.x/m)+1:0,p=(l.x+l.width)/m):(h=l.y?Math.floor(l.y/m)+1:0,p=(l.y+l.height)/m)):(l={x:f.x/u,y:f.y/a,width:f.width/u,height:f.height/a},c=s.calcEnds(),y?(h=(c.to-c.from)*l.x+c.from,p=(c.to-c.from)*l.width+h):(p=(c.to-c.from)*(1-l.y)+c.from,h=p-(c.to-c.from)*l.height)),s.minimum=h,s.maximum=p,y?s.doConstrain&&t.maskType!="vertical"&&s.doConstrain():s.doConstrain&&t.maskType!="horizontal"&&s.doConstrain();t.redraw(!1)},restoreZoom:function(){var e=this,t=e.axes.items,n,r,i;e.setSubStore(null);for(n=0,r=t.length;n<r;n++)i=t[n],delete i.minimum,delete i.maximum;e.redraw(!1)}}),Ext.define("Ext.chart.Shape",{singleton:!0,circle:function(e,t){return e.add(Ext.apply({type:"circle",x:t.x,y:t.y,stroke:null,radius:t.radius},t))},line:function(e,t){return e.add(Ext.apply({type:"rect",x:t.x-t.radius,y:t.y-t.radius,height:2*t.radius,width:2*t.radius/5},t))},square:function(e,t){return e.add(Ext.applyIf({type:"rect",x:t.x-t.radius,y:t.y-t.radius,height:2*t.radius,width:2*t.radius,radius:null},t))},triangle:function(e,t){return t.radius*=1.75,e.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x,",",t.y,"m0-",t.radius*.58,"l",t.radius*.5,",",t.radius*.87,"-",t.radius,",0z")},t))},diamond:function(e,t){var n=t.radius;return n*=1.5,e.add(Ext.apply({type:"path",stroke:null,path:["M",t.x,t.y-n,"l",n,n,-n,n,-n,-n,n,-n,"z"]},t))},cross:function(e,t){var n=t.radius;return n/=1.7,e.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x-n,",",t.y,"l",[-n,-n,n,-n,n,n,n,-n,n,n,-n,n,n,n,-n,n,-n,-n,-n,n,-n,-n,"z"])},t))},plus:function(e,t){var n=t.radius/1.3;return e.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x-n/2,",",t.y-n/2,"l",[0,-n,n,0,0,n,n,0,0,n,-n,0,0,n,-n,0,0,-n,-n,0,0,-n,"z"])},t))},arrow:function(e,t){var n=t.radius;return e.add(Ext.apply({type:"path",path:"M".concat(t.x-n*.7,",",t.y-n*.4,"l",[n*.6,0,0,-n*.4,n,n*.8,-n,n*.8,0,-n*.4,-n*.6,0],"z")},t))},drop:function(e,t,n,r,i,s){i=i||30,s=s||0,e.add({type:"path",path:["M",t,n,"l",i,0,"A",i*.4,i*.4,0,1,0,t+i*.7,n-i*.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-s,x:t,y:n}}),s=(s+90)*Math.PI/180,e.add({type:"text",x:t+i*Math.sin(s)-10,y:n+i*Math.cos(s)+5,text:r,"font-size":i*12/40,stroke:"none",fill:"#fff"})}}),Ext.define("Ext.chart.LegendItem",{extend:Ext.draw.CompositeSprite,hiddenSeries:!1,label:undefined,x:0,y:0,zIndex:500,boldRe:/bold\s\d{1,}.*/i,constructor:function(e){this.callParent(arguments),this.createLegend(e)},createLegend:function(e){var t=this,n=t.series,r=e.yFieldIndex;t.label=t.createLabel(e),t.createSeriesMarkers(e),t.setAttributes({hidden:!1},!0),t.yFieldIndex=r,t.on("mouseover",t.onMouseOver,t),t.on("mouseout",t.onMouseOut,t),t.on("mousedown",t.onMouseDown,t),n.visibleInLegend(r)||(t.hiddenSeries=!0,t.label.setAttributes({opacity:.5},!0)),t.updatePosition({x:0,y:0})},getLabelText:function(){function r(e){var r=t[e];return Ext.isArray(r)?r[n]:r}var e=this,t=e.series,n=e.yFieldIndex;return r("title")||r("yField")},createLabel:function(e){var t=this,n=t.legend;return t.add("label",t.surface.add({type:"text",x:20,y:0,zIndex:(t.zIndex||0)+2,fill:n.labelColor,font:n.labelFont,text:t.getLabelText(),style:{cursor:"pointer"}}))},createSeriesMarkers:function(e){var t=this,n=e.yFieldIndex,r=t.series,i=r.type,s=t.surface,o=t.zIndex;if(i==="line"||i==="scatter"){if(i==="line"){var u=Ext.apply(r.seriesStyle,r.style);t.drawLine(.5,.5,16.5,.5,o,u,n)}if(r.showMarkers||i==="scatter"){var a=Ext.apply(r.markerStyle,r.markerConfig||{},{fill:r.getLegendColor(n)});t.drawMarker(8.5,.5,o,a)}}else t.drawFilledBox(12,12,o,n)},drawLine:function(e,t,n,r,i,s,o){var u=this,a=u.surface,f=u.series;return u.add("line",a.add({type:"path",path:"M"+e+","+t+"L"+n+","+r,zIndex:(i||0)+2,"stroke-width":f.lineWidth,"stroke-linejoin":"round","stroke-dasharray":f.dash,stroke:s.stroke||f.getLegendColor(o)||"#000",style:{cursor:"pointer"}}))},drawMarker:function(e,t,n,r){var i=this,s=i.surface,o=i.series;return i.add("marker",Ext.chart.Shape[r.type](s,{fill:r.fill,x:e,y:t,zIndex:(n||0)+2,radius:r.radius||r.size,style:{cursor:"pointer"}}))},drawFilledBox:function(e,t,n,r){var i=this,s=i.surface,o=i.series;return i.add("box",s.add({type:"rect",zIndex:(n||0)+2,x:0,y:0,width:e,height:t,fill:o.getLegendColor(r),style:{cursor:"pointer"}}))},onMouseOver:function(){var e=this;e.label.setStyle({"font-weight":"bold"}),e.series._index=e.yFieldIndex,e.series.highlightItem()},onMouseOut:function(){var e=this,t=e.legend,n=e.boldRe;e.label.setStyle({"font-weight":t.labelFont&&n.test(t.labelFont)?"bold":"normal"}),e.series._index=e.yFieldIndex,e.series.unHighlightItem()},onMouseDown:function(){var e=this,t=e.yFieldIndex;e.hiddenSeries?(e.series.showAll(t),e.label.setAttributes({opacity:1},!0)):(e.series.hideAll(t),e.label.setAttributes({opacity:.5},!0)),e.hiddenSeries=!e.hiddenSeries,e.legend.chart.redraw()},updatePosition:function(e){var t=this,n=t.items,r=n.length,i=t.x,s=t.y,o,u,a,f,l,c,h,p;e||(e=t.legend),h=e.x,p=e.y;for(u=0;u<r;u++){l=!0,o=n[u];switch(o.type){case"text":a=20+h+i,f=p+s,l=!1;break;case"rect":a=h+i,f=p+s-6;break;default:a=h+i,f=p+s}c={x:a,y:f},o.setAttributes(l?{translate:c}:c,!0)}}}),Ext.define("Ext.chart.Legend",{visible:!0,update:!0,position:"bottom",x:0,y:0,labelColor:"#000",labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(e){var t=this;e&&Ext.apply(t,e),t.items=[],t.isVertical="left|right|float".indexOf(t.position)!==-1,t.origX=t.x,t.origY=t.y},create:function(){var e=this,t=e.chart.series.items,n,r,i;e.createBox(),e.rebuild!==!1&&e.createItems();if(!e.created&&e.isDisplayed()){e.created=!0;for(n=0,r=t.length;n<r;n++)i=t[n],i.on("titlechange",e.redraw,e)}},init:Ext.emptyFn,redraw:
function(){var e=this;e.create(),e.updatePosition()},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",!0)!==-1},createItems:function(){var e=this,t=e.chart.series.items,n=e.items,r,i,s,o,u,a,f;e.removeItems();for(i=0,s=t.length;i<s;i++){a=t[i];if(a.showInLegend){r=[].concat(a.yField);for(o=0,u=r.length;o<u;o++)f=e.createLegendItem(a,o),n.push(f)}}e.alignItems()},removeItems:function(){var e=this,t=e.items,n=t?t.length:0,r;if(n)for(r=0;r<n;r++)t[r].destroy();t.length=[]},alignItems:function(){var e=this,t=e.padding,n=e.isVertical,r=Math.floor,i,s,o,u,a;i=e.updateItemDimensions(),s=i.maxWidth,o=i.maxHeight,u=i.totalWidth,a=i.totalHeight,e.width=r((n?s:u)+t*2),e.height=r((n?a:o)+t*2)},updateItemDimensions:function(){var e=this,t=e.items,n=e.padding,r=e.itemSpacing,i=0,s=0,o=0,u=0,a=e.isVertical,f=Math.floor,l=Math.max,c=0,h,p,d,v,m,g;for(h=0,p=t.length;h<p;h++)d=t[h],v=d.getBBox(),m=v.width,g=v.height,c=h===0?0:r,d.x=n+f(a?0:o+c),d.y=n+f(a?u+c:0)+g/2,o+=c+m,u+=c+g,i=l(i,m),s=l(s,g);return{totalWidth:o,totalHeight:u,maxWidth:i,maxHeight:s}},createLegendItem:function(e,t){var n=this;return new Ext.chart.LegendItem({legend:n,series:e,surface:n.chart.surface,yFieldIndex:t})},getBBox:function(){var e=this;return{x:Math.round(e.x)-e.boxStrokeWidth/2,y:Math.round(e.y)-e.boxStrokeWidth/2,width:e.width+e.boxStrokeWidth,height:e.height+e.boxStrokeWidth}},createBox:function(){var e=this,t,n;e.boxSprite&&e.boxSprite.destroy(),n=e.getBBox();if(isNaN(n.width)||isNaN(n.height)){e.boxSprite=!1;return}t=e.boxSprite=e.chart.surface.add(Ext.apply({type:"rect",stroke:e.boxStroke,"stroke-width":e.boxStrokeWidth,fill:e.boxFill,zIndex:e.boxZIndex},n)),t.redraw()},calcPosition:function(){var e=this,t,n,r=e.width,i=e.height,s=e.chart,o=s.chartBBox,u=s.insetPadding,a=o.width-u*2,f=o.height-u*2,l=o.x+u,c=o.y+u,h=s.surface,p=Math.floor;switch(e.position){case"left":t=u,n=p(c+f/2-i/2);break;case"right":t=p(h.width-r)-u,n=p(c+f/2-i/2);break;case"top":t=p(l+a/2-r/2),n=u;break;case"bottom":t=p(l+a/2-r/2),n=p(h.height-i)-u;break;default:t=p(e.origX)+u,n=p(e.origY)+u}return{x:t,y:n}},updatePosition:function(){var e=this,t=e.items,n,r,i,s;if(e.isDisplayed()){n=e.calcPosition(),e.x=n.x,e.y=n.y;for(r=0,i=t.length;r<i;r++)t[r].updatePosition();s=e.getBBox(),isNaN(s.width)||isNaN(s.height)?e.boxSprite&&e.boxSprite.hide(!0):(e.boxSprite||e.createBox(),e.boxSprite.setAttributes(s,!0),e.boxSprite.show(!0))}},toggle:function(e){var t=this,n=0,r=t.items,i=r.length;t.boxSprite&&(e?t.boxSprite.show(!0):t.boxSprite.hide(!0));for(;n<i;++n)e?r[n].show(!0):r[n].hide(!0);t.visible=e}}),Ext.define("Ext.chart.theme.Base",{constructor:function(e){var t=Ext.identityFn;Ext.chart.theme.call(this,e,{background:!1,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:t},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:t},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:t},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:t},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#115fa6",type:"plus"},{fill:"#94ae0a",type:"circle"},{fill:"#a61120",type:"cross"}]})}},function(){var e=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],t=["Green","Sky","Red","Purple","Blue","Yellow"],n=0,r=0,i=e.length,s=Ext.chart.theme,o=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],u=o.length;for(;n<i;n++)s[t[n]]=function(e){return Ext.extend(s.Base,{constructor:function(t){s.Base.prototype.constructor.call(this,Ext.apply({baseColor:e},t))}})}(e[n]);for(n=0;n<u;n++)s["Category"+(n+1)]=function(e){return Ext.extend(s.Base,{constructor:function(t){s.Base.prototype.constructor.call(this,Ext.apply({colors:e},t))}})}(o[n])}),Ext.define("Ext.chart.Chart",{extend:Ext.draw.Component,alias:"widget.chart",mixins:{themeManager:Ext.chart.theme.Theme,mask:Ext.chart.Mask,navigation:Ext.chart.Navigation,bindable:Ext.util.Bindable,observable:Ext.util.Observable},viewBox:!1,animate:!1,legend:!1,insetPadding:10,background:!1,refreshBuffer:1,constructor:function(e){var t=this,n;e=Ext.apply({},e),t.initTheme(e.theme||t.theme),t.gradients&&Ext.apply(e,{gradients:t.gradients}),t.background&&Ext.apply(e,{background:t.background}),e.animate&&(n={easing:"ease",duration:500},Ext.isObject(e.animate)?e.animate=Ext.applyIf(e.animate,n):e.animate=n),t.mixins.observable.constructor.call(t,e),e.mask&&(e=Ext.apply({enableMask:!0},e)),e.enableMask&&t.mixins.mask.constructor.call(t,e),t.mixins.navigation.constructor.call(t),t.callParent([e])},getChartStore:function(){return this.substore||this.store},initComponent:function(){var e=this,t,n;e.callParent(),e.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdblclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh"),Ext.applyIf(e,{zoom:{width:1,height:1,x:0,y:0}}),e.maxGutters={left:0,right:0,bottom:0,top:0},e.store=Ext.data.StoreManager.lookup(e.store),t=e.axes,e.axes=new Ext.util.MixedCollection(!1,function(e){return e.position}),t&&e.axes.addAll(t),n=e.series,e.series=new Ext.util.MixedCollection(!1,function(e){return e.seriesId||(e.seriesId=Ext.id(null,"ext-chart-series-"))}),n&&e.series.addAll(n),e.legend!==!1&&(e.legend=new Ext.chart.Legend(Ext.applyIf({chart:e},e.legend))),e.on({mousemove:e.onMouseMove,mouseleave:e.onMouseLeave,mousedown:e.onMouseDown,mouseup:e.onMouseUp,click:e.onClick,dblclick:e.onDblClick,scope:e})},afterComponentLayout:function(e,t,n,r){var i=this;Ext.isNumber(e)&&Ext.isNumber(t)&&(e!==n||t!==r?(i.curWidth=e,i.curHeight=t,i.redraw(!0),i.needsRedraw=!1):i.needsRedraw&&(i.redraw(),i.needsRedraw=!1)),this.callParent(arguments)},redraw:function(e){var t=this,n=t.series.items,r=n.length,i=t.axes.items,s=i.length,o=0,u,a,f=t.chartBBox={x:0,y:0,height:t.curHeight,width:t.curWidth},l=t.legend,c;t.surface.setSize(f.width,f.height);for(u=0;u<r;u++)a=n[u],a.initialized?c=a:c=t.initializeSeries(a,u,o),c.onRedraw(),Ext.isArray(a.yField)?o+=a.yField.length:++o;for(u=0;u<s;u++)a=i[u],a.initialized||t.initializeAxis(a);for(u=0;u<s;u++)i[u].processView();for(u=0;u<s;u++)i[u].drawAxis(!0);l!==!1&&l.visible&&(l.update||!l.created)&&l.create(),t.alignAxes(),l!==!1&&l.visible&&l.updatePosition(),t.getMaxGutters(),t.resizing=!!e;for(u=0;u<s;u++)i[u].drawAxis();for(u=0;u<r;u++)t.drawCharts(n[u]);t.resizing=!1},afterRender:function(){var e=this,t=e.legend;e.callParent(arguments),e.categoryNames&&e.setCategoryNames(e.categoryNames),t&&t.init(),e.bindStore(e.store,!0),e.refresh(),e.surface.engine==="Vml"&&(e.on("added",e.onAddedVml,e),e.mon(e.hierarchyEventSource,"added",e.onContainerAddedVml,e))},onAddedVml:function(){this.needsRedraw=!0},onContainerAddedVml:function(e){this.isDescendantOf(e)&&(this.needsRedraw=!0)},getEventXY:function(e){var t=this.surface.getRegion(),n=e.getXY(),r=n[0]-t.left,i=n[1]-t.top;return[r,i]},onClick:function(e){this.handleClick("itemclick",e)},onDblClick:function(e){this.handleClick("itemdblclick",e)},handleClick:function(e,t){var n=this,r=n.getEventXY(t),i=n.series.items,s,o,u,a;for(s=0,o=i.length;s<o;s++)u=i[s],Ext.draw.Draw.withinBox(r[0],r[1],u.bbox)&&u.getItemForPoint&&(a=u.getItemForPoint(r[0],r[1]),a&&u.fireEvent(e,a))},onMouseDown:function(e){var t=this,n=t.getEventXY(e),r=t.series.items,i,s,o,u;t.enableMask&&t.mixins.mask.onMouseDown.call(t,e);for(i=0,s=r.length;i<s;i++)o=r[i],Ext.draw.Draw.withinBox(n[0],n[1],o.bbox)&&o.getItemForPoint&&(u=o.getItemForPoint(n[0],n[1]),u&&o.fireEvent("itemmousedown",u))},onMouseUp:function(e){var t=this,n=t.getEventXY(e),r=t.series.items,i,s,o,u;t.enableMask&&t.mixins.mask.onMouseUp.call(t,e);for(i=0,s=r.length;i<s;i++)o=r[i],Ext.draw.Draw.withinBox(n[0],n[1],o.bbox)&&o.getItemForPoint&&(u=o.getItemForPoint(n[0],n[1]),u&&o.fireEvent("itemmouseup",u))},onMouseMove:function(e){var t=this,n=t.getEventXY(e),r=t.series.items,i,s,o,u,a,f,l;t.enableMask&&t.mixins.mask.onMouseMove.call(t,e);for(i=0,s=r.length;i<s;i++){o=r[i];if(Ext.draw.Draw.withinBox(n[0],n[1],o.bbox)){if(o.getItemForPoint){u=o.getItemForPoint(n[0],n[1]),a=o._lastItemForPoint,f=o._lastStoreItem,l=o._lastStoreField;if(u!==a||u&&(u.storeItem!=f||u.storeField!=l))a&&(o.fireEvent("itemmouseout",a),delete o._lastItemForPoint,delete o._lastStoreField,delete o._lastStoreItem),u&&(o.fireEvent("itemmouseover",u),o._lastItemForPoint=u,o._lastStoreItem=u.storeItem,o._lastStoreField=u.storeField)}}else a=o._lastItemForPoint,a&&(o.fireEvent("itemmouseout",a),delete o._lastItemForPoint,delete o._lastStoreField,delete o._lastStoreItem)}},onMouseLeave:function(e){var t=this,n=t.series.items,r,i,s;t.enableMask&&t.mixins.mask.onMouseLeave.call(t,e);for(r=0,i=n.length;r<i;r++)s=n[r],delete s._lastItemForPoint},delayRefresh:function(){var e=this;e.refreshTask||(e.refreshTask=new Ext.util.DelayedTask(e.refresh,e)),e.refreshTask.delay(e.refreshBuffer)},refresh:function(){var e=this;if(e.rendered&&e.curWidth!==undefined&&e.curHeight!==undefined){if(!e.isVisible(!0)){e.refreshPending||(e.setShowListeners("mon"),e.refreshPending=!0);return}e.fireEvent("beforerefresh",e)!==!1&&(e.redraw(),e.fireEvent("refresh",e))}},onShow:function(){var e=this;e.callParent(arguments),e.refreshPending&&(e.delayRefresh(),e.setShowListeners("mun")),delete e.refreshPending},setShowListeners:function(e){var t=this;t[e](t.hierarchyEventSource,{scope:t,single:!0,show:t.forceRefresh,expand:t.forceRefresh})},doRefresh:function(){this.setSubStore(null),this.refresh()},forceRefresh:function(e){var t=this;t.isDescendantOf(e)&&t.refreshPending&&(t.setShowListeners("mun"),t.delayRefresh()),delete t.refreshPending},bindStore:function(e,t){var n=this;n.mixins.bindable.bindStore.apply(n,arguments),n.store&&!t&&n.refresh()},getStoreListeners:function(){var e=this.doRefresh,t=this.delayRefresh;return{refresh:e,add:t,bulkremove:t,update:t,clear:e}},setSubStore:function(e){this.substore=e},initializeAxis:function(e){var t=this,n=t.chartBBox,r=n.width,i=n.height,s=n.x,o=n.y,u=t.themeAttrs,a=t.axes,f={chart:t};u&&(f.axisStyle=Ext.apply({},u.axis),f.axisLabelLeftStyle=Ext.apply({},u.axisLabelLeft),f.axisLabelRightStyle=Ext.apply({},u.axisLabelRight),f.axisLabelTopStyle=Ext.apply({},u.axisLabelTop),f.axisLabelBottomStyle=Ext.apply({},u.axisLabelBottom),f.axisTitleLeftStyle=Ext.apply({},u.axisTitleLeft),f.axisTitleRightStyle=Ext.apply({},u.axisTitleRight),f.axisTitleTopStyle=Ext.apply({},u.axisTitleTop),f.axisTitleBottomStyle=Ext.apply({},u.axisTitleBottom));switch(e.position){case"top":Ext.apply(f,{length:r,width:i,x:s,y:o});break;case"bottom":Ext.apply(f,{length:r,width:i,x:s,y:i});break;case"left":Ext.apply(f,{length:i,width:r,x:s,y:i});break;case"right":Ext.apply(f,{length:i,width:r,x:r,y:i})}e.chart?Ext.apply(e,f):(Ext.apply(f,e),e=Ext.createByAlias("axis."+e.type.toLowerCase(),f),a.replace(e)),e.initialized=!0},getInsets:function(){var e=this,t=e.insetPadding;return{top:t,right:t,bottom:t,left:t}},calculateInsets:function(){function c(e){var t=n.findIndex("position",e);return t<0?null:n.getAt(t)}var e=this,t=e.legend,n=e.axes,r=["top","right","bottom","left"],i,s,o,u,a,f,l;i=e.getInsets();for(s=0,o=r.length;s<o;s++)u=r[s],a=u==="left"||u==="right",f=c(u),t!==!1&&t.position===u&&(l=t.getBBox(),i[u]+=(a?l.width:l.height)+e.insetPadding),f&&f.bbox&&(l=f.bbox,i[u]+=a?l.width:l.height);return i},alignAxes:function(){var e=this,t=e.axes.items,n,r,i,s,o,u,a;n=e.calculateInsets(),r={x:n.left,y:n.top,width:e.curWidth-n.left-n.right,height:e.curHeight-n.top-n.bottom},e.chartBBox=r;for(i=0,s=t.length;i<s;i++)o=t[i],u=o.position,a=u==="left"||u==="right",o.x=u==="right"?r.x+r.width:r.x,o.y=u==="top"?r.y:r.y+r.height,o.width=a?r.width:r.height,o.length=a?r.height:r.width},initializeSeries:function(e,t,n){var r=this,s=r.themeAttrs,o,u,a,f,l,c=[],h=(e instanceof Ext.chart.series.Series).i=0,p,d;if(!e.initialized){d={chart:r,seriesId:e.seriesId};if(s){a=s.seriesThemes,l=s.markerThemes,o=Ext.apply({},s.series),u=Ext.apply({},s.marker),d.seriesStyle=Ext.apply(o,a[n%a.length]),d.seriesLabelStyle=Ext.apply({},s.seriesLabel),d.markerStyle=Ext.apply(u,l[n%l.length]);if(s.colors)d.colorArrayStyle=s.colors;else{c=[];for(p=a.length;i<p;i++)f=a[i],(f.fill||f.stroke)&&c.push(f.fill||f.stroke);c.length&&(d.colorArrayStyle=c)}d.seriesIdx=t,d.themeIdx=n}h?Ext.applyIf(e,d):(Ext.applyIf(d,e),e=r.series.replace(Ext.createByAlias("series."+e.type.toLowerCase(),d)))}return e.initialize(),e.initialized=!0,e},getMaxGutters:function(){var e=this,t=e.series.items,n,r,i,s,o=0,u=0,a=0,f=0;for(n=0,r=t.length;n<r;n++)s=t[n].getGutters(),s&&(s.verticalAxis?(a=Math.max(a,s.lower),f=Math.max(f,s.upper)):(o=Math.max(o,s.lower),u=Math.max(u,s.upper)));e.maxGutters={left:o,right:u,bottom:a,top:f}},drawAxis:function(e){e.drawAxis()},drawCharts:function(e){e.triggerafterrender=!1,e.drawSeries(),this.animate||e.fireEvent("afterrender",e)},save:function(e){return Ext.draw.Surface.save(this.surface,e)},destroy:function(){var e=this,t=e.refreshTask;t&&(t.cancel(),e.refreshTask=null),Ext.destroy(e.surface),e.bindStore(null),e.callParent(arguments)}}),Ext.define("Ext.chart.Highlight",{highlight:!1,highlightCfg:{fill:"#fdd","stroke-width":5,stroke:"#f55"},constructor:function(e){e.highlight&&typeof e.highlight!="boolean"&&(this.highlightCfg=Ext.merge({},this.highlightCfg,e.highlight))},highlightItem:function(e){if(!e)return;var t=this,n=e.sprite,r=Ext.merge({},t.highlightCfg,t.highlight),i=t.chart.surface,s=t.chart.animate,o,u,a,f;if(!t.highlight||!n||n._highlighted)return;n._anim&&(n._anim.paused=!0),n._highlighted=!0;if(!n._defaults){n._defaults=Ext.apply({},n.attr),u={},a={};for(o in r){o in n._defaults||(n._defaults[o]=i.availableAttrs[o]),u[o]=n._defaults[o],a[o]=r[o];if(Ext.isObject(r[o])){u[o]={},a[o]={},Ext.apply(n._defaults[o],n.attr[o]),Ext.apply(u[o],n._defaults[o]);for(f in n._defaults[o])f in r[o]?a[o][f]=r[o][f]:a[o][f]=u[o][f];for(f in r[o])f in a[o]||(a[o][f]=r[o][f])}}n._from=u,n._to=a,n._endStyle=a}s?n._anim=new Ext.fx.Anim({target:n,from:n._from,to:n._to,duration:150}):n.setAttributes(n._to,!0)},unHighlightItem:function(){if(!this.highlight||!this.items)return;var e=this,t=e.items,n=t.length,r=Ext.merge({},e.highlightCfg,e.highlight),i=e.chart.animate,s=0,o,u,a;for(;s<n;s++){if(!t[s])continue;a=t[s].sprite;if(a&&a._highlighted){a._anim&&(a._anim.paused=!0),o={};for(u in r)Ext.isObject(a._defaults[u])?o[u]=Ext.apply({},a._defaults[u]):o[u]=a._defaults[u];i?(a._endStyle=o,a._anim=new Ext.fx.Anim({target:a,to:o,duration:150})):a.setAttributes(o,!0),delete a._highlighted}}},cleanHighlights:function(){if(!this.highlight)return;var e=this.group,t=this.markerGroup,n=0,r;for(r=e.getCount();n<r;n++)delete e.getAt(n)._defaults;if(t)for(r=t.getCount();n<r;n++)delete t.getAt(n)._defaults}}),Ext.define("Ext.chart.Label",{colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(e){var t=this;t.label=Ext.applyIf(t.label||{},{display:"none",stackedDisplay:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:Ext.identityFn}),t.label.display!=="none"&&(t.labelsGroup=t.chart.surface.getGroup(t.seriesId+"-labels"))},renderLabels:function(){var e=this,t=e.chart,n=t.gradients,r=e.items,i=t.animate,s=e.label,o=s.display,u=s.stackedDisplay,a=s.renderer,f=s.color,l=[].concat(s.field),c=e.labelsGroup,h=(c||0)&&c.length,p=e.chart.getChartStore(),d=p.getCount(),v=(r||0)&&r.length,m=v/d,g=(n||0)&&n.length,y=Ext.draw.Color,b=[],w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U;if(o=="none"||!c)return;if(v==0)while(h--)b.push(h);else{for(E=0,S=0,x=0;E<d;E++){T=0;for(N=0;N<m;N++){O=r[S],M=c.getAt(x),_=p.getAt(E);while(this.__excludes&&this.__excludes[T])T++;!O&&M&&(M.hide(!0),x++);if(O&&l[N]){if(!M){M=e.onCreateLabel(_,O,E,o);if(!M)break}M.setAttributes({fill:String(f)},!0),e.onPlaceLabel(M,_,O,E,o,i,T),x++;if(s.contrast&&O.sprite){D=O.sprite,i&&D._endStyle?j=D._endStyle.fill:i&&D._to?j=D._to.fill:j=D.attr.fill,j=j||D.attr.fill,P=y.fromString(j);if(j&&!P){j=j.match(e.colorStringRe)[1];for(C=0;C<g;C++){w=n[C];if(w.id==j){A=0,k=0;for(L in w.stops)A++,k+=y.fromString(w.stops[L].color).getGrayscale();H=k/A/255;break}}}else H=P.getGrayscale()/255;M.isOutside&&(H=1),B=y.fromString(M.attr.fill||M.attr.color).getHSL(),B[2]=H>.5?.2:.8,M.setAttributes({fill:String(y.fromHSL.apply({},B))},!0)}e.stacked&&u&&(O.totalPositiveValues||O.totalNegativeValues)&&(I=O.totalPositiveValues||0,q=O.totalNegativeValues||0,F=I+q,u=="total"?R=a(F):u=="balances"&&(I==0&&q==0?R=a(0):(R=a(I),U=a(q))),R&&(M=c.getAt(x),M||(M=e.onCreateLabel(_,O,E,"over")),B=y.fromString(M.attr.color||M.attr.fill).getHSL(),M.setAttributes({text:R,style:s.font,fill:String(y.fromHSL.apply({},B))},!0),e.onPlaceLabel(M,_,O,E,"over",i,T),x++),U&&(M=c.getAt(x),M||(M=e.onCreateLabel(_,O,E,"under")),B=y.fromString(M.attr.color||M.attr.fill).getHSL(),M.setAttributes({text:U,style:s.font,fill:String(y.fromHSL.apply({},B))},!0),e.onPlaceLabel(M,_,O,E,"under",i,T),x++))}S++,T++}}h=c.length;while(h>x)b.push(x),x++}e.hideLabels(b)},hideLabels:function(e){var t=this.labelsGroup,n=!!e&&e.length;if(!t)return;if(n===!1){n=t.getCount();while(n--)t.getAt(n).hide(!0)}else while(n--)t.getAt(e[n]).hide(!0)}}),Ext.define("Ext.chart.TipSurface",{extend:Ext.draw.Component,spriteArray:!1,renderFirst:!0,constructor:function(e){this.callParent([e]),e.sprites&&(this.spriteArray=[].concat(e.sprites),delete e.sprites)},onRender:function(){var e=this,t=0,n=0,r,i;this.callParent(arguments),i=e.spriteArray;if(e.renderFirst&&i){e.renderFirst=!1;for(n=i.length;t<n;t++)r=e.surface.add(i[t]),r.setAttributes({hidden:!1},!0)}}}),Ext.define("Ext.chart.Tip",{constructor:function(e){var t=this,n,r,i;e.tips&&(t.tipTimeout=null,t.tipConfig=Ext.apply({},e.tips,{renderer:Ext.emptyFn,constrainPosition:!0,autoHide:!0,shrinkWrapDock:!0}),t.tooltip=new Ext.tip.ToolTip(t.tipConfig),t.chart.surface.on("mousemove",t.tooltip.onMouseMove,t.tooltip),t.chart.surface.on("mouseleave",function(){t.hideTip()}),t.tipConfig.surface&&(n=t.tipConfig.surface,r=n.sprites,i=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:r}),n.width&&n.height&&i.setSize(n.width,n.height),t.tooltip.add(i),t.spriteTip=i))},showTip:function(e){var t=this,n,r,i,s,o,u,a,f,l,c;if(!t.tooltip)return;clearTimeout(t.tipTimeout),n=t.tooltip,r=t.spriteTip,i=t.tipConfig,s=n.trackMouse,s||(n.trackMouse=!0,o=e.sprite,u=o.surface,a=Ext.get(u.getId()),a&&(f=a.getXY(),l=f[0]+(o.attr.x||0)+(o.attr.translation&&o.attr.translation.x||0),c=f[1]+(o.attr.y||0)+(o.attr.translation&&o.attr.translation.y||0),n.targetXY=[l,c])),r?i.renderer.call(n,e.storeItem,e,r.surface):i.renderer.call(n,e.storeItem,e),n.delayShow(),n.trackMouse=s},hideTip:function(e){var t=this.tooltip;if(!t)return;clearTimeout(this.tipTimeout),this.tipTimeout=setTimeout(function(){t.delayHide()},0)}}),Ext.define("Ext.chart.axis.Abstract",{constructor:function(e){e=e||{};var t=this,n=e.position||"left";n=n.charAt(0).toUpperCase()+n.substring(1),e.label=Ext.apply(e["axisLabel"+n+"Style"]||{},e.label||{}),e.axisTitleStyle=Ext.apply(e["axisTitle"+n+"Style"]||{},e.labelTitle||{}),Ext.apply(t,e),t.fields=Ext.Array.from(t.fields),this.callParent(),t.labels=[],t.getId(),t.labelGroup=t.chart.surface.getGroup(t.axisId+"-labels")},alignment:null,grid:!1,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn}),Ext.define("Ext.chart.axis.Axis",{extend:Ext.chart.axis.Abstract,alternateClassName:"Ext.chart.Axis",hidden:!1,forceMinMax:!1,dashSize:3,position:"bottom",skipFirst:!1,length:0,width:0,adjustEnd:!0,majorTickSteps:!1,nullGutters:{lower:0,upper:0,verticalAxis:undefined},applyData:Ext.emptyFn,getRange:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i=t.series.items,s=e.position,o,u=Ext.chart.series,a=[],f=Infinity,l=-Infinity,c=e.position==="left"||e.position==="right"||e.position==="radial",h,p,d,v,m,g=r.length,y,b={},w={},E=!0,S,x,T,N,C;S=e.fields;for(v=0,p=S.length;v<p;v++)w[S[v]]=!0;for(h=0,p=i.length;h<p;h++){if(i[h].seriesIsHidden)continue;if(!i[h].getAxesForXAndYFields)continue;o=i[h].getAxesForXAndYFields();if(o.xAxis&&o.xAxis!==s&&o.yAxis&&o.yAxis!==s)continue;u.Bar&&i[h]instanceof u.Bar&&!i[h].column?S=c?Ext.Array.from(i[h].xField):Ext.Array.from(i[h].yField):S=c?Ext.Array.from(i[h].yField):Ext.Array.from(i[h].xField);if(e.fields.length){for(v=0,d=S.length;v<d;v++)if(w[S[v]])break;if(v==d)continue}if(y=i[h].stacked)u.Bar&&i[h]instanceof u.Bar?i[h].column!=c&&(y=!1,E=!1):c||(y=!1,E=!1);if(y){x={};for(v=0;v<S.length;v++){if(E&&i[h].__excludes&&i[h].__excludes[v])continue;w[S[v]]||Ext.Logger.warn("Field `"+S[v]+"` is not included in the "+s+" axis config."),w[S[v]]=x[S[v]]=!0}a.push({fields:x,positiveValue:0,negativeValue:0})}else{if(!S||S.length==0)S=e.fields;for(v=0;v<S.length;v++){if(E&&i[h].__excludes&&i[h].__excludes[v])continue;w[S[v]]=b[S[v]]=!0}}}for(h=0;h<g;h++){T=r[h];for(m=0;m<a.length;m++)a[m].positiveValue=0,a[m].negativeValue=0;for(N in w){C=T.get(N),e.type=="Time"&&typeof C=="string"&&(C=Date.parse(C));if(isNaN(C))continue;C===undefined?C=0:C=Number(C),b[N]&&(f>C&&(f=C),l<C&&(l=C));for(m=0;m<a.length;m++)a[m].fields[N]&&(C>=0?(a[m].positiveValue+=C,l<a[m].positiveValue&&(l=a[m].positiveValue),f>0&&(f=0)):(a[m].negativeValue+=C,f>a[m].negativeValue&&(f=a[m].negativeValue),l<0&&(l=0)))}}return isFinite(l)||(l=e.prevMax||0),isFinite(f)||(f=e.prevMin||0),typeof f=="number"&&(f=Ext.Number.correctFloat(f)),typeof l=="number"&&(l=Ext.Number.correctFloat(l)),f!=l&&(l!=Math.floor(l)||f!=Math.floor(f))&&(f=Math.floor(f),l=Math.floor(l)+1),isNaN(e.minimum)||(f=e.minimum),isNaN(e.maximum)||(l=e.maximum),f>=l&&(f=Math.floor(f),l=f+1),{min:f,max:l}},calcEnds:function(){var e=this,t=e.getRange(),n=t.min,r=t.max,i,s,o,u;return i=Ext.isNumber(e.majorTickSteps)?e.majorTickSteps+1:e.steps,s=!(Ext.isNumber(e.maximum)&&Ext.isNumber(e.minimum)&&Ext.isNumber(e.majorTickSteps)&&e.majorTickSteps>0),o=Ext.draw.Draw.snapEnds(n,r,i,s),Ext.isNumber(e.maximum)&&(o.to=e.maximum,u=!0),Ext.isNumber(e.minimum)&&(o.from=e.minimum,u=!0),e.adjustMaximumByMajorUnit&&(o.to=Math.ceil(o.to/o.step)*o.step,u=!0),e.adjustMinimumByMajorUnit&&(o.from=Math.floor(o.from/o.step)*o.step,u=!0),u&&(o.steps=Math.ceil((o.to-o.from)/o.step)),e.prevMin=n==r?0:n,e.prevMax=r,o},drawAxis:function(e){var t=this,n,r=t.x,i=t.y,s=t.dashSize,o=t.length,u=t.position,a=u=="left"||u=="right",f=[],l=t.isNumericAxis,c=t.applyData(),h=c.step,p=c.steps,d=Ext.isArray(p),v=c.from,m=c.to,g=m-v||1,y,b,w,E,S=t.minorTickSteps||0,x=t.minorTickSteps||0,T=Math.max(S+1,0),N=Math.max(x+1,0),C=u=="left"||u=="top"?-1:1,k=s*C,L=t.chart.series.items,A=L[0],O=Ext.clone(A?A.nullGutters:t.nullGutters),M,_,D,P,H,B,j=0,F=0,I,q,R,U,z,W;t.from=v,t.to=m;if(t.hidden||v>m)return;if(d&&p.length==0||!d&&isNaN(h))return;if(d)p=Ext.Array.filter(p,function(e,n,r){return+e>+t.from&&+e<+t.to},this),p=Ext.Array.union([t.from],p,[t.to]);else{p=new Array;for(U=+t.from;U<+t.to;U+=h)p.push(U);p.push(+t.to)}F=p.length;for(n=0,R=L.length;n<R;n++){if(L[n].seriesIsHidden)continue;if(!L[n].getAxesForXAndYFields)continue;q=L[n].getAxesForXAndYFields();if(!q.xAxis||!q.yAxis||q.xAxis===u||q.yAxis===u)M=Ext.clone(L[n].getGutters()),_=M.verticalAxis!==undefined,D=_&&M.verticalAxis==a,_&&(D||(P=L[n].getPadding(),a?M={lower:P.bottom,upper:P.top,verticalAxis:!0}:M={lower:P.left,upper:P.right,verticalAxis:!1}),O.lower<M.lower&&(O.lower=M.lower),O.upper<M.upper&&(O.upper=M.upper),O.verticalAxis=a)}l&&(t.labels=[]);if(O)if(a){b=Math.floor(r),E=["M",b+.5,i,"l",0,-o],y=o-(O.lower+O.upper);for(I=0;I<F;I++)w=i-O.lower-(p[I]-p[0])*y/g,E.push("M",b,Math.floor(w)+.5,"l",k*2,0),f.push([b,Math.floor(w)]),l&&t.labels.push(p[I])}else{w=Math.floor(i),E=["M",r,w+.5,"l",o,0],y=o-(O.lower+O.upper);for(I=0;I<F;I++)b=r+O.lower+(p[I]-p[0])*y/g,E.push("M",Math.floor(b)+.5,w,"l",0,k*2+1),f.push([Math.floor(b),w]),l&&t.labels.push(p[I])}H=a?x:S,Ext.isArray(H)?H.length==2?B=+Ext.Date.add(new Date,H[0],H[1])-Date.now():B=H[0]:Ext.isNumber(H)&&H>0&&(B=h/(H+1));if(O&&B)for(I=0;I<F-1;I++){z=+p[I],W=+p[I+1];if(a)for(value=z+B;value<W;value+=B)w=i-O.lower-(value-p[0])*y/g,E.push("M",b,Math.floor(w)+.5,"l",k,0);else for(value=z+B;value<W;value+=B)b=r+O.upper+(value-p[0])*y/g,E.push("M",Math.floor(b)+.5,w,"l",0,k+1)}t.axis||(t.axis=t.chart.surface.add(Ext.apply({type:"path",path:E},t.axisStyle))),t.axis.setAttributes({path:E},!0),t.inflections=f,!e&&t.grid&&t.drawGrid(),t.axisBBox=t.axis.getBBox(),t.drawLabel()},drawGrid:function(){var e=this,t=e.chart.surface,n=e.grid,r=n.odd,i=n.even,s=e.inflections,o=s.length-(r||i?0:1),u=e.position,a=e.chart.maxGutters,f=e.width-2,l,c,h=1,p=[],d,v,m,g=[],y=[];if((a.bottom!==0||a.top!==0)&&(u=="left"||u=="right")||(a.left!==0||a.right!==0)&&(u=="top"||u=="bottom"))h=0,o++;for(;h<o;h++)l=s[h],c=s[h-1],r||i?(p=h%2?g:y,d=(h%2?r:i)||{},v=(d.lineWidth||d["stroke-width"]||0)/2,m=2*v,u=="left"?p.push("M",c[0]+1+v,c[1]+.5-v,"L",c[0]+1+f-v,c[1]+.5-v,"L",l[0]+1+f-v,l[1]+.5+v,"L",l[0]+1+v,l[1]+.5+v,"Z"):u=="right"?p.push("M",c[0]-v,c[1]+.5-v,"L",c[0]-f+v,c[1]+.5-v,"L",l[0]-f+v,l[1]+.5+v,"L",l[0]-v,l[1]+.5+v,"Z"):u=="top"?p.push("M",c[0]+.5+v,c[1]+1+v,"L",c[0]+.5+v,c[1]+1+f-v,"L",l[0]+.5-v,l[1]+1+f-v,"L",l[0]+.5-v,l[1]+1+v,"Z"):p.push("M",c[0]+.5+v,c[1]-v,"L",c[0]+.5+v,c[1]-f+v,"L",l[0]+.5-v,l[1]-f+v,"L",l[0]+.5-v,l[1]-v,"Z")):u=="left"?p=p.concat(["M",l[0]+.5,l[1]+.5,"l",f,0]):u=="right"?p=p.concat(["M",l[0]-.5,l[1]+.5,"l",-f,0]):u=="top"?p=p.concat(["M",l[0]+.5,l[1]+.5,"l",0,f]):p=p.concat(["M",l[0]+.5,l[1]-.5,"l",0,-f]);r||i?(g.length&&(!e.gridOdd&&g.length&&(e.gridOdd=t.add({type:"path",path:g})),e.gridOdd.setAttributes(Ext.apply({path:g,hidden:!1},r||{}),!0)),y.length&&(e.gridEven||(e.gridEven=t.add({type:"path",path:y})),e.gridEven.setAttributes(Ext.apply({path:y,hidden:!1},i||{}),!0))):p.length?(e.gridLines||(e.gridLines=e.chart.surface.add({type:"path",path:p,"stroke-width":e.lineWidth||1,stroke:e.gridColor||"#ccc"})),e.gridLines.setAttributes({hidden:!1,path:p},!0)):e.gridLines&&e.gridLines.hide(!0)},getOrCreateLabel:function(e,t){var n=this,r=n.labelGroup,i=r.getAt(e),s=n.chart.surface;return i?t!=i.attr.text&&(i.setAttributes(Ext.apply({text:t},n.label),!0),i._bbox=i.getBBox()):(i=s.add(Ext.apply({group:r,type:"text",x:0,y:0,text:t},n.label)),s.renderItem(i),i._bbox=i.getBBox()),n.label.rotation?(i.setAttributes({rotation:{degrees:0}},!0),i._ubbox=i.getBBox(),i.setAttributes(n.label,!0)):i._ubbox=i._bbox,i},rect2pointArray:function(e){var t=this.chart.surface,n=t.getBBox(e,!0),r=[n.x,n.y],i=r.slice(),s=[n.x+n.width,n.y],o=s.slice(),u=[n.x+n.width,n.y+n.height],a=u.slice(),f=[n.x,n.y+n.height],l=f.slice(),c=e.matrix;return r[0]=c.x.apply(c,i),r[1]=c.y.apply(c,i),s[0]=c.x.apply(c,o),s[1]=c.y.apply(c,o),u[0]=c.x.apply(c,a),u[1]=c.y.apply(c,a),f[0]=c.x.apply(c,l),f[1]=c.y.apply(c,l),[r,s,u,f]},intersect:function(e,t){var n=this.rect2pointArray(e),r=this.rect2pointArray(t);return!!Ext.draw.Draw.intersect(n,r).length},drawHorizontalLabels:function(){var e=this,t=e.label,n=Math.floor,r=Math.max,i=e.chart.axes,s=e.chart.insetPadding,o=e.chart.maxGutters,u=e.position,a=e.inflections,f=a.length,l=e.labels,c=0,h,p,d,v,m,g=e.adjustEnd,y=i.findIndex("position","left")!=-1,b=i.findIndex("position","right")!=-1,w=e.reverse,E,S,x,T,N,C,k,L;T=f-1,d=a[0],L=e.getOrCreateLabel(0,e.label.renderer(l[0])),h=Math.floor(Math.abs(Math.sin(t.rotate&&t.rotate.degrees*Math.PI/180||0)));for(k=0;k<f;k++){d=a[k],x=k,w&&(x=f-k-1),S=e.label.renderer(l[x]),E=e.getOrCreateLabel(k,S),p=E._bbox,c=r(c,p.height+e.dashSize+e.label.padding),N=n(d[0]-(h?p.height:p.width)/2),g&&o.left==0&&o.right==0&&(k==0&&!y?N=d[0]:k==T&&!b&&(N=Math.min(N,d[0]-p.width+s))),u=="top"?C=d[1]-e.dashSize*2-e.label.padding-p.height/2:C=d[1]+e.dashSize*2+e.label.padding+p.height/2,E.setAttributes({hidden:!1,x:N,y:C},!0);if(k!=0&&(e.intersect(E,v)||e.intersect(E,L))){if(k!==T||m===0){E.hide(!0);continue}v.hide(!0)}v=E,m=k}return c},drawVerticalLabels:function(){var e=this,t=e.inflections,n=e.position,r=t.length,i=e.chart,s=i.insetPadding,o=e.labels,u=0,a=Math.max,f=Math.floor,l=Math.ceil,c=e.chart.axes,h=e.chart.maxGutters,p,d,v,m,g=c.findIndex("position","top")!=-1,y=c.findIndex("position","bottom")!=-1,b=e.adjustEnd,w,E,S=r-1,x,T,N;for(N=0;N<r;N++){d=t[N],E=e.label.renderer(o[N]),w=e.getOrCreateLabel(N,E),p=w._bbox,u=a(u,p.width+e.dashSize+e.label.padding),T=d[1],b&&h.bottom+h.top<p.height/2&&(N==S&&!g?T=Math.max(T,e.y-e.length+l(p.height/2)-s):N==0&&!y&&(T=e.y+h.bottom-f(p.height/2))),n=="left"?x=d[0]-p.width-e.dashSize-e.label.padding-2:x=d[0]+e.dashSize+e.label.padding+2,w.setAttributes(Ext.apply({hidden:!1,x:x,y:T},e.label),!0);if(N!=0&&e.intersect(w,v)){if(N!==S||m===0){w.hide(!0);continue}v.hide(!0)}v=w,m=N}return u},drawLabel:function(){var e=this,t=e.position,n=e.labelGroup,r=e.inflections,i=0,s=0,o,u;t=="left"||t=="right"?i=e.drawVerticalLabels():s=e.drawHorizontalLabels(),o=n.getCount(),u=r.length;for(;u<o;u++)n.getAt(u).hide(!0);e.bbox={},Ext.apply(e.bbox,e.axisBBox),e.bbox.height=s,e.bbox.width=i,Ext.isString(e.title)&&e.drawTitle(i,s)},setTitle:function(e){this.title=e,this.drawLabel()},drawTitle:function(e,t){var n=this,r=n.position,i=n.chart.surface,s=n.displaySprite,o=n.title,u=r=="left"||r=="right",a=n.x,f=n.y,l,c,h;s?s.setAttributes({text:o},!0):(l={type:"text",x:0,y:0,text:o},s=n.displaySprite=i.add(Ext.apply(l,n.axisTitleStyle,n.labelTitle)),i.renderItem(s)),c=s.getBBox(),h=n.dashSize+n.label.padding,u?(f-=n.length/2-c.height/2,r=="left"?a-=e+h+c.width/2:a+=e+h+c.width-c.width/2,n.bbox.width+=c.width+10):(a+=n.length/2-c.width*.5,r=="top"?f-=t+h+c.height*.3:f+=t+h+c.height*.8,n.bbox.height+=c.height+10),s.setAttributes({translate:{x:a,y:f}},!0)}}),Ext.define("Ext.chart.axis.Category",{extend:Ext.chart.axis.Axis,alternateClassName:"Ext.chart.CategoryAxis",alias:"axis.category",isCategoryAxis:!0,doConstrain:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i=t.series.items,s=i.length,o=[],u;for(u=0;u<s;u++)if(i[u].type==="bar"&&i[u].stacked)return;for(u=e.minimum;u<e.maximum;u++)o.push(r[u]);t.setSubStore(new Ext.data.Store({model:n.model,data:o}))},setLabels:function(){var e=this.chart.getChartStore(),t=e.data.items,n,r,i,s=this.fields,o=s.length,u,a,f;u=this.labels=[];for(n=0,r=t.length;n<r;n++){i=t[n];for(f=0;f<o;f++)a=i.get(s[f]),u.push(a)}},applyData:function(){this.callParent(),this.setLabels();var e=this.chart.getChartStore().getCount();return{from:0,to:e-1,power:1,step:1,steps:e-1}}}),Ext.define("Ext.chart.axis.Gauge",{extend:Ext.chart.axis.Abstract,position:"gauge",alias:"axis.gauge",drawAxis:function(e){var t=this.chart,n=t.surface,r=t.chartBBox,i=r.x+r.width/2,s=r.y+r.height,o=this.margin||10,u=Math.min(r.width,2*r.height)/2+o,a=[],f,l=this.steps,c,h=Math.PI,p=Math.cos,d=Math.sin;if(this.sprites&&!t.resizing){this.drawLabel();return}if(this.margin>=0)if(!this.sprites)for(c=0;c<=l;c++)f=n.add({type:"path",path:["M",i+(u-o)*p(c/l*h-h),s+(u-o)*d(c/l*h-h),"L",i+u*p(c/l*h-h),s+u*d(c/l*h-h),"Z"],stroke:"#ccc"}),f.setAttributes({hidden:!1},!0),a.push(f);else{a=this.sprites;for(c=0;c<=l;c++)a[c].setAttributes({path:["M",i+(u-o)*p(c/l*h-h),s+(u-o)*d(c/l*h-h),"L",i+u*p(c/l*h-h),s+u*d(c/l*h-h),"Z"],stroke:"#ccc"},!0)}this.sprites=a,this.drawLabel(),this.title&&this.drawTitle()},drawTitle:function(){var e=this,t=e.chart,n=t.surface,r=t.chartBBox,i=e.titleSprite,s;i||(e.titleSprite=i=n.add(Ext.apply({type:"text",zIndex:2},e.axisTitleStyle,e.labelTitle))),i.setAttributes(Ext.apply({text:e.title},e.label||{}),!0),s=i.getBBox
(),i.setAttributes({x:r.x+r.width/2-s.width/2,y:r.y+r.height-s.height/2-4},!0)},setTitle:function(e){this.title=e,this.drawTitle()},drawLabel:function(){var e=this,t=e.chart,n=t.surface,r=t.chartBBox,i=r.x+r.width/2,s=r.y+r.height,o=e.margin||10,u=Math.min(r.width,2*r.height)/2+2*o,a=Math.round,f=[],l,c=e.maximum||0,h=e.minimum||0,p=e.steps,d=Math.PI,v=Math.cos,m=Math.sin,g=this.label,y=g.renderer||Ext.identityFn,b=e.reverse,w,E,S;if(!this.labelArray)for(w=0;w<=p;w++)E=w===0||w===p?7:0,S=b?p-w:w,l=n.add({type:"text",text:y(a(h+S/p*(c-h))),x:i+u*v(w/p*d-d),y:s+u*m(w/p*d-d)-E,"text-anchor":"middle","stroke-width":.2,zIndex:10,stroke:"#333"}),l.setAttributes({hidden:!1},!0),f.push(l);else{f=this.labelArray;for(w=0;w<=p;w++)E=w===0||w===p?7:0,S=b?p-w:w,f[w].setAttributes({text:y(a(h+S/p*(c-h))),x:i+u*v(w/p*d-d),y:s+u*m(w/p*d-d)-E},!0)}this.labelArray=f}}),Ext.define("Ext.chart.axis.Numeric",{extend:Ext.chart.axis.Axis,alternateClassName:"Ext.chart.NumericAxis",type:"Numeric",isNumericAxis:!0,alias:"axis.numeric",constructor:function(e){var t=this,n=!!e.label&&!!e.label.renderer,r;t.callParent([e]),r=t.label,e.constrain==null&&(t.constrain=e.minimum!=null&&e.maximum!=null),n||(r.renderer=function(e){return t.roundToDecimal(e,t.decimals)})},roundToDecimal:function(e,t){var n=Math.pow(10,t||0);return Math.round(e*n)/n},minimum:NaN,maximum:NaN,constrain:!0,decimals:2,scale:"linear",doConstrain:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i,s,o,u=t.series.items,a=e.fields,f=a.length,l=e.calcEnds(),c=l.from,h=l.to,p,d,v=!1,m,g=[],y;for(i=0,s=r.length;i<s;i++){y=!0,o=r[i];for(p=0;p<f;p++){m=o.get(a[p]),e.type=="Time"&&typeof m=="string"&&(m=Date.parse(m));if(+m<+c){y=!1;break}if(+m>+h){y=!1;break}}y&&g.push(o)}t.setSubStore(new Ext.data.Store({model:n.model,data:g}))},position:"left",adjustMaximumByMajorUnit:!1,adjustMinimumByMajorUnit:!1,processView:function(){var e=this,t=e.chart,n=t.series.items,r,i;for(r=0,i=n.length;r<i;r++)if(n[r].stacked){delete e.minimum,delete e.maximum,e.constrain=!1;break}e.constrain&&e.doConstrain()},applyData:function(){return this.callParent(),this.calcEnds()}}),Ext.define("Ext.chart.axis.Radial",{extend:Ext.chart.axis.Numeric,position:"radial",alias:"axis.radial",drawAxis:function(e){var t=this.chart,n=t.surface,r=t.chartBBox,i=t.getChartStore(),s=i.getCount(),o=r.x+r.width/2,u=r.y+r.height/2,a=Math.min(r.width,r.height)/2,f=[],l,c=this.steps,h,p,d=Math.PI*2,v=Math.cos,m=Math.sin;if(this.sprites&&!t.resizing){this.drawLabel();return}if(!this.sprites){for(h=1;h<=c;h++)l=n.add({type:"circle",x:o,y:u,radius:Math.max(a*h/c,0),stroke:"#ccc"}),l.setAttributes({hidden:!1},!0),f.push(l);for(h=0;h<s;h++)l=n.add({type:"path",path:["M",o,u,"L",o+a*v(h/s*d),u+a*m(h/s*d),"Z"],stroke:"#ccc"}),l.setAttributes({hidden:!1},!0),f.push(l)}else{f=this.sprites;for(h=0;h<c;h++)f[h].setAttributes({x:o,y:u,radius:Math.max(a*(h+1)/c,0),stroke:"#ccc"},!0);for(p=0;p<s;p++)f[h+p].setAttributes({path:["M",o,u,"L",o+a*v(p/s*d),u+a*m(p/s*d),"Z"],stroke:"#ccc"},!0)}this.sprites=f,this.drawLabel()},drawLabel:function(){var e=this.chart,t=e.series.items,n,r=e.surface,i=e.chartBBox,s=e.getChartStore(),o=s.data.items,u,a,f=i.x+i.width/2,l=i.y+i.height/2,c=Math.min(i.width,i.height)/2,h=Math.max,p=Math.round,d=[],v,m=[],g,y=[],b,w=!this.maximum,E=this.maximum||0,S=this.steps,x=0,T,N,C,k=Math.PI*2,L=Math.cos,A=Math.sin,O=this.label.display,M=O!=="none",_=10;if(!M)return;for(x=0,u=t.length;x<u;x++)n=t[x],m.push(n.yField),b=n.xField;for(T=0,u=o.length;T<u;T++){a=o[T],y.push(a.get(b));if(w)for(x=0,g=m.length;x<g;x++)E=h(+a.get(m[x]),E)}if(!this.labelArray){if(O!="categories")for(x=1;x<=S;x++)v=r.add({type:"text",text:p(x/S*E),x:f,y:l-c*x/S,"text-anchor":"middle","stroke-width":.1,stroke:"#333"}),v.setAttributes({hidden:!1},!0),d.push(v);if(O!="scale")for(T=0,S=y.length;T<S;T++)N=L(T/S*k)*(c+_),C=A(T/S*k)*(c+_),v=r.add({type:"text",text:y[T],x:f+N,y:l+C,"text-anchor":N*N<=.001?"middle":N<0?"end":"start"}),v.setAttributes({hidden:!1},!0),d.push(v)}else{d=this.labelArray;if(O!="categories")for(x=0;x<S;x++)d[x].setAttributes({text:p((x+1)/S*E),x:f,y:l-c*(x+1)/S,"text-anchor":"middle","stroke-width":.1,stroke:"#333"},!0);if(O!="scale")for(T=0,S=y.length;T<S;T++)N=L(T/S*k)*(c+_),C=A(T/S*k)*(c+_),d[x+T]&&d[x+T].setAttributes({type:"text",text:y[T],x:f+N,y:l+C,"text-anchor":N*N<=.001?"middle":N<0?"end":"start"},!0)}this.labelArray=d},getRange:function(){var e=this.callParent();return e.min=0,e},processView:function(){var e=this,t=e.chart.series.items,n,r,i,s,o=[];for(n=0,r=t.length;n<r;n++)i=t[n],o.push(i.yField);e.fields=o,s=e.calcEnds(),e.maximum=s.to,e.steps=s.steps}}),Ext.define("Ext.chart.axis.Time",{extend:Ext.chart.axis.Numeric,alternateClassName:"Ext.chart.TimeAxis",type:"Time",alias:"axis.time",dateFormat:!1,fromDate:!1,toDate:!1,step:[Ext.Date.DAY,1],constrain:!1,constructor:function(e){var t=this,n,r,i;t.callParent([e]),n=t.label||{},i=this.dateFormat,i&&(n.renderer?(r=n.renderer,n.renderer=function(e){return e=r(e),Ext.Date.format(new Date(r(e)),i)}):n.renderer=function(e){return Ext.Date.format(new Date(e>>0),i)})},processView:function(){var e=this;e.fromDate&&(e.minimum=+e.fromDate),e.toDate&&(e.maximum=+e.toDate),e.constrain&&e.doConstrain()},calcEnds:function(){var e=this,t,n=e.step;return n?(t=e.getRange(),t=Ext.draw.Draw.snapEndsByDateAndStep(new Date(t.min),new Date(t.max),Ext.isNumber(n)?[Date.MILLI,n]:n),e.minimum&&(t.from=e.minimum),e.maximum&&(t.to=e.maximum),t):e.callParent(arguments)}}),Ext.define("Ext.chart.series.Series",{mixins:{observable:Ext.util.Observable,labels:Ext.chart.Label,highlights:Ext.chart.Highlight,tips:Ext.chart.Tip,callouts:Ext.chart.Callout},type:null,title:null,showInLegend:!0,renderer:function(e,t,n,r,i){return n},shadowAttributes:null,animating:!1,nullGutters:{lower:0,upper:0,verticalAxis:undefined},nullPadding:{left:0,right:0,width:0,bottom:0,top:0,height:0},constructor:function(e){var t=this;e&&Ext.apply(t,e),t.shadowGroups=[],t.mixins.labels.constructor.call(t,e),t.mixins.highlights.constructor.call(t,e),t.mixins.tips.constructor.call(t,e),t.mixins.callouts.constructor.call(t,e),t.addEvents({scope:t,itemclick:!0,itemdblclick:!0,itemmouseover:!0,itemmouseout:!0,itemmousedown:!0,itemmouseup:!0,mouseleave:!0,afterdraw:!0,titlechange:!0}),t.mixins.observable.constructor.call(t,e),t.on({scope:t,itemmouseover:t.onItemMouseOver,itemmouseout:t.onItemMouseOut,mouseleave:t.onMouseLeave}),t.style&&Ext.apply(t.seriesStyle,t.style)},initialize:Ext.emptyFn,onRedraw:Ext.emptyFn,eachRecord:function(e,t){var n=this.chart;n.getChartStore().each(e,t)},getRecordCount:function(){var e=this.chart,t=e.getChartStore();return t?t.getCount():0},isExcluded:function(e){var t=this.__excludes;return!!t&&!!t[e]},setBBox:function(e){var t=this,n=t.chart,r=n.chartBBox,i=e?{left:0,right:0,bottom:0,top:0}:n.maxGutters,s,o;s={x:r.x,y:r.y,width:r.width,height:r.height},t.clipBox=s,o={x:s.x+i.left-n.zoom.x*n.zoom.width,y:s.y+i.bottom-n.zoom.y*n.zoom.height,width:(s.width-(i.left+i.right))*n.zoom.width,height:(s.height-(i.bottom+i.top))*n.zoom.height},t.bbox=o},onAnimate:function(e,t){var n=this;return e.stopAnimation(),n.animating?e.animate(Ext.applyIf(t,n.chart.animate)):(n.animating=!0,e.animate(Ext.apply(Ext.applyIf(t,n.chart.animate),{callback:function(){n.animating=!1,n.fireEvent("afterrender",n)}})))},getGutters:function(){return this.nullGutters},getPadding:function(){return this.nullPadding},onItemMouseOver:function(e){var t=this;e.series===t&&(t.highlight&&t.highlightItem(e),t.tooltip&&t.showTip(e))},onItemMouseOut:function(e){var t=this;e.series===t&&(t.unHighlightItem(),t.tooltip&&t.hideTip(e))},onMouseLeave:function(){var e=this;e.unHighlightItem(),e.tooltip&&e.hideTip()},getItemForPoint:function(e,t){if(!this.items||!this.items.length||this.seriesIsHidden)return null;var n=this,r=n.items,i=n.bbox,s,o,u;if(!Ext.draw.Draw.withinBox(e,t,i))return null;for(o=0,u=r.length;o<u;o++)if(r[o]&&this.isItemInPoint(e,t,r[o],o))return r[o];return null},isItemInPoint:function(e,t,n,r){return!1},hideAll:function(){var e=this,t=e.items,n,r,i,s,o,u,a;e.seriesIsHidden=!0,e._prevShowMarkers=e.showMarkers,e.showMarkers=!1,e.hideLabels(0);for(i=0,r=t.length;i<r;i++){n=t[i],u=n.sprite,u&&u.setAttributes({hidden:!0},!0);if(u&&u.shadows){a=u.shadows;for(s=0,o=a.length;s<o;++s)a[s].setAttributes({hidden:!0},!0)}}},showAll:function(){var e=this,t=e.chart.animate;e.chart.animate=!1,e.seriesIsHidden=!1,e.showMarkers=e._prevShowMarkers,e.drawSeries(),e.chart.animate=t},hide:function(){if(this.items){var e=this,t=e.items,n,r,i,s,o;if(t&&t.length){for(n=0,s=t.length;n<s;++n)if(t[n].sprite){t[n].sprite.hide(!0),o=t[n].shadows||t[n].sprite.shadows;if(o)for(r=0,i=o.length;r<i;++r)o[r].hide(!0)}e.hideLabels()}}},getLegendColor:function(e){var t=this,n,r;if(t.seriesStyle){n=t.seriesStyle.fill,r=t.seriesStyle.stroke;if(n&&n!="none")return n;if(r)return r}return t.colorArrayStyle?t.colorArrayStyle[t.themeIdx%t.colorArrayStyle.length]:"#000"},visibleInLegend:function(e){var t=this.__excludes;return t?!t[e]:!this.seriesIsHidden},setTitle:function(e,t){var n=this,r=n.title;Ext.isString(e)&&(t=e,e=0),Ext.isArray(r)?r[e]=t:n.title=t,n.fireEvent("titlechange",t,e)}}),Ext.define("Ext.chart.series.Cartesian",{extend:Ext.chart.series.Series,alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var e=this,t=[],n,r,i,s=e.combinations,o,u,a,f;n=[].concat(e.yField);for(r=0,i=n.length;r<i;r++)o=e.title,t.push((Ext.isArray(o)?o[r]:o)||n[r]);if(s){s=Ext.Array.from(s);for(r=0,i=s.length;r<i;r++)u=s[r],a=t[u[0]],f=t[u[1]],t[u[1]]=a+" & "+f,t.splice(u[0],1)}return t},eachYValue:function(e,t,n){var r=this,i=r.getYValueAccessors(),s,o,u;for(s=0,o=i.length;s<o;s++)u=i[s],t.call(n,u(e),s)},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(e,t){var n=this,r=n.getYValueAccessors(),i=r[e],s=r[t];r[t]=function(e){return i(e)+s(e)},r.splice(e,1),n.callParent([e,t])},clearCombinations:function(){delete this.yValueAccessors,this.callParent()},getYValueAccessors:function(){function s(e){return function(t){return t.get(e)}}var e=this,t=e.yValueAccessors,n,r,i;if(!t){t=e.yValueAccessors=[],n=[].concat(e.yField);for(r=0,i=n.length;r<i;r++)t.push(s(n[r]))}return t},getMinMaxXValues:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i=e.getRecordCount(),s,o,u,a,f,l=e.xField,c;if(i>0){a=Infinity,f=-a;for(s=0,o=r.length;s<o;s++)u=r[s],c=u.get(l),c>f&&(f=c),c<a&&(a=c);a==Infinity&&(a=0),f==-Infinity&&(f=i-1)}else a=f=0;return[a,f]},getMinMaxYValues:function(){function p(t,n){e.isExcluded(n)||(t<0?h+=t:c+=t)}function d(t,n){e.isExcluded(n)||(t>l&&(l=t),t<f&&(f=t))}var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i=e.getRecordCount(),s,o,u,a=e.stacked,f,l,c,h;if(i>0){f=Infinity,l=-f;for(s=0,o=r.length;s<o;s++)u=r[s],a?(c=0,h=0,e.eachYValue(u,p),c>l&&(l=c),h<f&&(f=h)):e.eachYValue(u,d);f==Infinity&&(f=0),l==-Infinity&&(l=i-1)}else f=l=0;return[f,l]},getAxesForXAndYFields:function(){var e=this,t=e.chart.axes,n=e.reverse,r=[].concat(e.axis),i={},s=[].concat(e.yField),o={},u=[].concat(e.xField),a,f,l,c,h,p;p=e.type==="bar"&&e.column===!1,p&&(a=s,s=u,u=a);if(Ext.Array.indexOf(r,"top")>-1)f="top";else if(Ext.Array.indexOf(r,"bottom")>-1)f="bottom";else if(t.get("top")&&t.get("bottom")){for(c=0,h=u.length;c<h;c++)o[u[c]]=!0;a=[].concat(t.get("bottom").fields);for(c=0,h=a.length;c<h;c++)if(o[a[c]]){f="bottom";break}a=[].concat(t.get("top").fields);for(c=0,h=a.length;c<h;c++)if(o[a[c]]){f="top";break}}else t.get("top")?f="top":t.get("bottom")&&(f="bottom");if(Ext.Array.indexOf(r,"left")>-1)l=p?"right":"left";else if(Ext.Array.indexOf(r,"right")>-1)l=p?"left":"right";else if(t.get("left")&&t.get("right")){for(c=0,h=s.length;c<h;c++)i[s[c]]=!0;a=[].concat(t.get("right").fields);for(c=0,h=a.length;c<h;c++)if(i[a[c]])break;a=[].concat(t.get("left").fields);for(c=0,h=a.length;c<h;c++)if(i[a[c]]){l="left";break}}else t.get("left")?l="left":t.get("right")&&(l="right");return p?{xAxis:l,yAxis:f}:{xAxis:f,yAxis:l}}}),Ext.define("Ext.chart.series.Area",{extend:Ext.chart.series.Cartesian,alias:"series.area",type:"area",stacked:!0,style:{},constructor:function(e){this.callParent(arguments);var t=this,n=t.chart.surface,r,i;e.highlightCfg=Ext.Object.merge({},{lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"},e.highlightCfg),Ext.apply(t,e,{__excludes:[]}),t.highlight&&(t.highlightSprite=n.add({type:"path",path:["M",0,0],zIndex:1e3,opacity:.3,lineWidth:5,hidden:!0,stroke:"#444"})),t.group=n.getGroup(t.seriesId)},shrink:function(e,t,n){var r=e.length,i=Math.floor(r/n),s,o,u=0,a=this.areas.length,f=[],l=[],c=[];for(o=0;o<a;++o)f[o]=0;for(s=0;s<r;++s){u+=+e[s];for(o=0;o<a;++o)f[o]+=+t[s][o];if(s%i==0){l.push(u/i);for(o=0;o<a;++o)f[o]/=i;c.push(f),u=0;for(o=0,f=[];o<a;++o)f[o]=0}}return{x:l,y:c}},getBounds:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i,s,o,u=[].concat(e.yField),a=u.length,f=[],l=[],c=Infinity,h=c,p=c,d=-c,v=-c,m=Math,g=m.min,y=m.max,b=e.getAxesForXAndYFields(),w=b.xAxis,E=b.yAxis,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j;e.setBBox(),N=e.bbox;if(B=t.axes.get(w))B.type==="Time"&&(x=!0),S=B.applyData(),h=S.from,d=S.to;if(B=t.axes.get(E))S=B.applyData(),p=S.from,v=S.to;e.xField&&!Ext.isNumber(h)&&(B=e.getMinMaxXValues(),x=!0,h=B[0],d=B[1]),e.yField&&!Ext.isNumber(p)&&(B=e.getMinMaxYValues(),p=B[0],v=B[1]),Ext.isNumber(p)||(p=0),Ext.isNumber(v)||(v=0),s=r.length,s>0&&x&&(T=r[0].get(e.xField),typeof T!="number"&&(T=+T,isNaN(T)&&(x=!1)));for(i=0;i<s;i++){o=r[i],L=o.get(e.xField),A=[],typeof L!="number"&&(x?L=+L:L=i),f.push(L),M=0;for(O=0;O<a;O++){if(e.__excludes[O])continue;H=o.get(u[O]),typeof H=="number"&&A.push(H)}l.push(A)}return C=N.width/(d-h||1),k=N.height/(v-p||1),_=f.length,_>N.width&&e.areas&&(D=e.shrink(f,l,N.width),f=D.x,l=D.y),{bbox:N,minX:h,minY:p,xValues:f,yValues:l,xScale:C,yScale:k,areasLen:a}},getPaths:function(){var e=this,t=e.chart,n=t.getChartStore(),r=!0,i=e.getBounds(),s=i.bbox,o=e.items=[],u=[],a,f=0,l=[],c=e.reverse,h,p,d,v,m,g,y,b,w,E,S,x,T;p=i.xValues.length;for(h=0;h<p;h++){m=i.xValues[h],T=c?p-h-1:h,g=i.yValues[T],d=s.x+(m-i.minX)*i.xScale,x===undefined&&(x=d),y=0,f=0;for(b=0;b<i.areasLen;b++){if(e.__excludes[b])continue;u[b]||(u[b]=[]),E=g[f],y+=E,v=s.y+s.height-(y-i.minY)*i.yScale,l[b]?(l[b].push("L",d,v),u[b].push(["L",d,v])):(l[b]=["M",d,v],u[b].push(["L",d,v])),o[b]||(o[b]={pointsUp:[],pointsDown:[],series:e}),o[b].pointsUp.push([d,v]),f++}}for(b=0;b<i.areasLen;b++){if(e.__excludes[b])continue;S=l[b];if(b==0||r)r=!1,S.push("L",d,s.y+s.height,"L",x,s.y+s.height,"Z");else{a=u[w],a.reverse(),S.push("L",d,a[0][2]);for(h=0;h<p;h++)S.push(a[h][0],a[h][1],a[h][2]),o[b].pointsDown[p-h-1]=[a[h][1],a[h][2]];S.push("L",x,S[2],"Z")}w=b}return{paths:l,areasLen:i.areasLen}},drawSeries:function(){var e=this,t=e.chart,n=t.getChartStore(),r=t.surface,i=t.animate,s=e.group,o=Ext.apply(e.seriesStyle,e.style),u=e.colorArrayStyle,a=u&&u.length||0,f=e.themeIdx,l,c,h,p,d,v;e.unHighlightItem(),e.cleanHighlights();if(!n||!n.getCount()||e.seriesIsHidden){e.hide(),e.items=[];return}h=e.getPaths(),e.areas||(e.areas=[]);for(l=0;l<h.areasLen;l++){if(e.__excludes[l])continue;v=f+l,e.areas[l]||(e.items[l].sprite=e.areas[l]=r.add(Ext.apply({},{type:"path",group:s,path:h.paths[l],stroke:o.stroke||u[v%a],fill:u[v%a]},o||{}))),c=e.areas[l],p=h.paths[l],i?(d=e.renderer(c,!1,{path:p,fill:u[l%a],stroke:o.stroke||u[l%a]},l,n),e.animation=e.onAnimate(c,{to:d})):(d=e.renderer(c,!1,{path:p,hidden:!1,fill:u[v%a],stroke:o.stroke||u[v%a]},l,n),e.areas[l].setAttributes(d,!0))}e.renderLabels(),e.renderCallouts()},onAnimate:function(e,t){return e.show(),this.callParent(arguments)},onCreateLabel:function(e,t,n,r){return null;var i,s,o,u,a},onPlaceLabel:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.resizing,l=u.label,c=l.renderer,h=l.field,p=u.bbox,d=Number(n.point[r][0]),v=Number(n.point[r][1]),m,g,y;e.setAttributes({text:c(t.get(h[o]),e,t,n,r,i,s,o),hidden:!0},!0),m=e.getBBox(),g=m.width/2,y=m.height/2,d<p.x+g?d=p.x+g:d+g>p.x+p.width&&(d=p.x+p.width-g),v-=y,v<p.y+y?v+=2*y:v+y>p.y+p.height&&(v-=2*y),u.chart.animate&&!u.chart.resizing?(e.show(!0),u.onAnimate(e,{to:{x:d,y:v}})):(e.setAttributes({x:d,y:v},!0),f&&u.animation?u.animation.on("afteranimate",function(){e.show(!0)}):e.show(!0))},onPlaceCallout:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.surface,l=a.resizing,c=u.callouts,h=u.items,p=r==0?!1:h[r-1].point,d=r==h.length-1?!1:h[r+1].point,v=n.point,m,g,y,b,w,E,S=e&&e.label?e.label.getBBox():{width:0,height:0},x=30,T=10,N=3,C,k,L,A,O,M=u.clipRect,_,D;if(!S.width||!S.height)return;p||(p=v),d||(d=v),b=(d[1]-p[1])/(d[0]-p[0]),w=(v[1]-p[1])/(v[0]-p[0]),E=(d[1]-v[1])/(d[0]-v[0]),g=Math.sqrt(1+b*b),m=[1/g,b/g],y=[-m[1],m[0]];if(w>0&&E<0&&y[1]<0||w<0&&E>0&&y[1]>0)y[0]*=-1,y[1]*=-1;else if(Math.abs(w)<Math.abs(E)&&y[0]<0||Math.abs(w)>Math.abs(E)&&y[0]>0)y[0]*=-1,y[1]*=-1;_=v[0]+y[0]*x,D=v[1]+y[1]*x,C=_+(y[0]>0?0:-(S.width+2*N)),k=D-S.height/2-N,L=S.width+2*N,A=S.height+2*N;if(C<M[0]||C+L>M[0]+M[2])y[0]*=-1;if(k<M[1]||k+A>M[1]+M[3])y[1]*=-1;_=v[0]+y[0]*x,D=v[1]+y[1]*x,C=_+(y[0]>0?0:-(S.width+2*N)),k=D-S.height/2-N,L=S.width+2*N,A=S.height+2*N,e.lines.setAttributes({path:["M",v[0],v[1],"L",_,D,"Z"]},!0),e.box.setAttributes({x:C,y:k,width:L,height:A},!0),e.label.setAttributes({x:_+(y[0]>0?N:-(S.width+N)),y:D},!0);for(O in e)e[O].show(!0)},isItemInPoint:function(e,t,n,r){var i=this,s=n.pointsUp,o=n.pointsDown,u=Math.abs,a=!1,f=!1,l=i.reverse,c=Infinity,h,p,d;for(h=0,p=s.length;h<p;h++){d=[s[h][0],s[h][1]],a=!1,f=h==p-1,c>u(e-d[0])&&(c=u(e-d[0]),a=!0,f&&++h);if(!a||a&&f){d=s[h-1];if(t>=d[1]&&(!o.length||t<=o[h-1][1]))return idx=l?p-h:h-1,n.storeIndex=idx,n.storeField=i.yField[r],n.storeItem=i.chart.getChartStore().getAt(idx),n._points=o.length?[d,o[h-1]]:[d],!0;break}}return!1},highlightSeries:function(){var e,t,n;this._index!==undefined&&(e=this.areas[this._index],e.__highlightAnim&&(e.__highlightAnim.paused=!0),e.__highlighted=!0,e.__prevOpacity=e.__prevOpacity||e.attr.opacity||1,e.__prevFill=e.__prevFill||e.attr.fill,e.__prevLineWidth=e.__prevLineWidth||e.attr.lineWidth,n=Ext.draw.Color.fromString(e.__prevFill),t={lineWidth:(e.__prevLineWidth||0)+2},n?t.fill=n.getLighter(.2).toString():t.opacity=Math.max(e.__prevOpacity-.3,0),this.chart.animate?e.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:e,to:t},this.chart.animate)):e.setAttributes(t,!0))},unHighlightSeries:function(){var e;this._index!==undefined&&(e=this.areas[this._index],e.__highlightAnim&&(e.__highlightAnim.paused=!0),e.__highlighted&&(e.__highlighted=!1,e.__highlightAnim=new Ext.fx.Anim({target:e,to:{fill:e.__prevFill,opacity:e.__prevOpacity,lineWidth:e.__prevLineWidth}})))},highlightItem:function(e){var t=this,n,r;if(!e){this.highlightSeries();return}n=e._points,n.length===2?r=["M",n[0][0],n[0][1],"L",n[1][0],n[1][1]]:r=["M",n[0][0],n[0][1],"L",n[0][0],t.bbox.y+t.bbox.height],t.highlightSprite.setAttributes({path:r,hidden:!1},!0)},unHighlightItem:function(e){e||this.unHighlightSeries(),this.highlightSprite&&this.highlightSprite.hide(!0)},hideAll:function(e){var t=this;e=(isNaN(t._index)?e:t._index)||0,t.__excludes[e]=!0,t.areas[e].hide(!0),t.redraw()},showAll:function(e){var t=this;e=(isNaN(t._index)?e:t._index)||0,t.__excludes[e]=!1,t.areas[e].show(!0),t.redraw()},redraw:function(){var e=this,t;t=e.chart.legend.rebuild,e.chart.legend.rebuild=!1,e.chart.redraw(),e.chart.legend.rebuild=t},hide:function(){if(this.areas){var e=this,t=e.areas,n,r,i,s,o;if(t&&t.length){for(n=0,s=t.length;n<s;++n)t[n]&&t[n].hide(!0);e.hideLabels()}}},getLegendColor:function(e){var t=this;return e+=t.themeIdx,t.colorArrayStyle[e%t.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Bar",{extend:Ext.chart.series.Cartesian,alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],type:"bar",alias:"series.bar",column:!1,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,defaultRotate:{x:0,y:0,degrees:0},constructor:function(e){this.callParent(arguments);var t=this,n=t.chart.surface,r=t.chart.shadow,i,s;e.highlightCfg=Ext.Object.merge({lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"},e.highlightCfg),Ext.apply(t,e,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:.9}},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:.6}}]}),t.group=n.getGroup(t.seriesId+"-bars");if(r)for(i=0,s=t.shadowAttributes.length;i<s;i++)t.shadowGroups.push(n.getGroup(t.seriesId+"-shadows"+i))},getPadding:function(){var e=this,t=e.xPadding,n=e.yPadding,r={};return Ext.isNumber(t)?(r.left=t,r.right=t):Ext.isObject(t)?(r.left=t.left,r.right=t.right):(r.left=0,r.right=0),r.width=r.left+r.right,Ext.isNumber(n)?(r.bottom=n,r.top=n):Ext.isObject(n)?(r.bottom=n.bottom,r.top=n.top):(r.bottom=0,r.top=0),r.height=r.bottom+r.top,r},getBarGirth:function(){var e=this,t=e.chart.getChartStore(),n=e.column,r=t.getCount(),i=e.gutter/100,s,o;return o=n?"width":"height",e.style&&e.style[o]?(e.configuredColumnGirth=!0,+e.style[o]):(s=e.getPadding(),(e.chart.chartBBox[o]-s[o])/(r*(i+1)-i))},getGutters:function(){var e=this,t=e.column,n=e.getPadding(),r=e.getBarGirth()/2,i=Math.ceil((t?n.left:n.bottom)+r),s=Math.ceil((t?n.right:n.top)+r);return{lower:i,upper:s,verticalAxis:!t}},getBounds:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i,s,o,u=[].concat(e.yField),a=[],f=u.length,l=f,c=e.groupGutter/100,h=e.column,p=e.getPadding(),d=e.stacked,v=e.getBarGirth(),m=h?"width":"height",g=Math,y=g.min,b=g.max,w=g.abs,E=e.getAxesForXAndYFields(),S=E.yAxis,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X;e.setBBox(!0),M=e.bbox;if(e.__excludes)for(q=0,F=e.__excludes.length;q<F;q++)e.__excludes[q]&&l--;P=t.axes.get(S),P&&(L=P.applyData(),_=L.from,D=L.to),e.yField&&!Ext.isNumber(_)&&(H=e.getMinMaxYValues(),_=H[0],D=H[1]),Ext.isNumber(_)||(_=0),Ext.isNumber(D)||(D=0),B=(h?M.height-p.height:M.width-p.width)/(D-_),A=v,O=v/((d?1:l)*(c+1)-c),m in e.style&&(O=y(O,e.style[m]),A=O*((d?1:l)*(c+1)-c)),j=h?M.y+M.height-p.bottom:M.x+p.left;if(d){F=[[],[]];for(i=0,s=r.length;i<s;i++){o=r[i],F[0][i]=F[0][i]||0,F[1][i]=F[1][i]||0;for(q=0;q<f;q++){if(e.__excludes&&e.__excludes[q])continue;I=o.get(u[q]),F[+(I>0)][i]+=w(I)}}F[+(D>0)].push(w(D)),F[+(_>0)].push(w(_)),U=b.apply(g,F[0]),R=b.apply(g,F[1]),B=(h?M.height-p.height:M.width-p.width)/(R+U),j+=U*B*(h?-1:1)}else _/D<0&&(j-=_*B*(h?-1:1));if(e.boundColumn){P=t.axes.get(E.xAxis),P&&(L=P.applyData(),x=L.from,T=L.to),e.xField&&!Ext.isNumber(x)&&(H=e.getMinMaxYValues(),x=H[0],T=H[1]),Ext.isNumber(x)||(x=0),Ext.isNumber(T)||(T=0),k=e.getGutters(),N=(M.width-(k.lower+k.upper))/(T-x||1),C=M.x+k.lower,a=[];for(i=0,s=r.length;i<s;i++)o=r[i],I=o.get(e.xField),a[i]=C+(I-x)*N-O/2}else if(e.configuredColumnGirth){P=t.axes.get(E.xAxis);if(P){z=P.inflections;if(P.isCategoryAxis||z.length==r.length){a=[];for(i=0,s=r.length;i<s;i++)W=z[i],X=h?W[0]:W[1],a[i]=X-A/2}}}return{bars:u,barsLoc:a,bbox:M,shrunkBarWidth:A,barsLen:f,groupBarsLen:l,barWidth:v,groupBarWidth:O,scale:B,zero:j,padding:p,signed:_/D<0,minY:_,maxY:D}},getPaths:function(){var e=this,t=e.chart,n=t.getChartStore(),r=n.data.items,i,s,o,u=e.bounds=e.getBounds(),a=e.items=[],f=Ext.isArray(e.yField)?e.yField:[e.yField],l=e.gutter/100,c=e.groupGutter/100,h=t.animate,p=e.column,d=e.group,v=t.shadow,m=e.shadowGroups,g=e.shadowAttributes,y=m.length,b=u.bbox,w=u.barWidth,E=u.shrunkBarWidth,S=e.getPadding(),x=e.stacked,T=u.barsLen,N=e.colorArrayStyle,C=N&&N.length||0,k=e.themeIdx,L=e.reverse,A=Math,O=A.max,M=A.min,_=A.abs,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt;for(i=0,s=r.length;i<s;i++){o=r[i],F=u.zero,I=u.zero,B=0,j=0,W=X=0,q=!1,nt=0;for(D=0,z=0;D<T;D++){if(e.__excludes&&e.__excludes[D])continue;P=o.get(u.bars[D]),P>=0?W+=P:X+=P,H=Math.round((P-O(u.minY,0))*u.scale),G=k+(T>1?D:0),R={fill:N[G%C]},p?(G=L?s-i-1:i,rt=L?T-z-1:z,e.boundColumn?Z=u.barsLoc[G]:e.configuredColumnGirth&&u.barsLoc.length?Z=u.barsLoc[G]+rt*u.groupBarWidth*(1+c)*!x:Z=b.x+S.left+(w-E)*.5+G*w*(1+l)+rt*u.groupBarWidth*(1+c)*!x,Ext.apply(R,{height:H,width:O(u.groupBarWidth,0),x:Z,y:F-H})):(K=s-1-i,tt=H+(F==u.zero),Z=F+(F!=u.zero),L&&(Z=u.zero+b.width-tt-(nt===0?1:0),x&&(Z-=nt,nt+=tt)),e.configuredColumnGirth&&u.barsLoc.length?et=u.barsLoc[i]+z*u.groupBarWidth*(1+c)*!x:et=b.y+S.top+(w-E)*.5+K*w*(1+l)+z*u.groupBarWidth*(1+c)*!x+1,Ext.apply(R,{height:O(u.groupBarWidth,0),width:tt,x:Z,y:et})),H<0&&(p?(R.y=I,R.height=_(H)):(R.x=I+H,R.width=_(H))),x&&(H<0?I+=H*(p?-1:1):F+=H*(p?-1:1),B+=_(H),H<0&&(j+=_(H))),R.x=Math.floor(R.x)+1,Q=Math.floor(R.y),Ext.isIE8m&&R.y>Q&&Q--,R.y=Q,R.width=Math.floor(R.width),R.height=Math.floor(R.height),a.push({series:e,yField:f[D],storeItem:o,value:[o.get(e.xField),P],attr:R,point:p?[R.x+R.width/2,P>=0?R.y:R.y+R.height]:[P>=0?R.x+R.width:R.x,R.y+R.height/2]});if(h&&t.resizing){U=p?{x:R.x,y:u.zero,width:R.width,height:0}:{x:u.zero,y:R.y,width:0,height:R.height};if(v&&(x&&!q||!x)){q=!0;for(V=0;V<y;V++)$=m[V].getAt(x?i:i*T+D),$&&$.setAttributes(U,!0)}J=d.getAt(i*T+D),J&&J.setAttributes(U,!0)}z++}x&&a.length&&(a[i*z].totalDim=B,a[i*z].totalNegDim=j,a[i*z].totalPositiveValues=W,a[i*z].totalNegativeValues=X)}if(x&&z==0)for(i=0,s=r.length;i<s;i++)for(V=0;V<y;V++)$=m[V].getAt(i),$&&$.hide(!0)},renderShadows:function(e,t,n,r){var i=this,s=i.chart,o=s.surface,u=s.animate,a=i.stacked,f=i.shadowGroups,l=i.shadowAttributes,c=f.length,h=s.getChartStore(),p=i.column,d=i.items,v=[],m=i.reverse,g=r.zero,y,b,w,E,S,x,T;if(a&&e%r.groupBarsLen===0||!a){x=e/r.groupBarsLen;for(y=0;y<c;y++)b=Ext.apply({},l[y]),w=f[y].getAt(a?x:e),Ext.copyTo(b,t,"x,y,width,height"),w||(w=o.add(Ext.apply({type:"rect",group:f[y]},Ext.apply({},n,b)))),a&&(E=d[e].totalDim,S=d[e].totalNegDim,p?(b.y=g+S-E-1,b.height=E):(m?b.x=g+r.bbox.width-E:b.x=g-S,b.width=E)),T=i.renderer(w,h.getAt(x),b,e,h),T.hidden=!!t.hidden,u?i.onAnimate(w,{zero:r.zero+r.bbox.width,to:T}):w.setAttributes(T,!0),v.push(w)}return v},drawSeries:function(){var e=this,t=e.chart,n=t.getChartStore(),r=t.surface,i=t.animate,s=e.stacked,o=e.column,u=t.axes,a=e.getAxesForXAndYFields(),f=a.xAxis,l=a.yAxis,c=t.shadow,h=e.shadowGroups,p=h.length,d=e.group,v=e.seriesStyle,m,g,y,b,w,E,S,x,T,N,C,k,L,A;if(!n||!n.getCount()||e.seriesIsHidden){e.hide(),e.items=[];return}C=Ext.apply({},this.style,v),delete C.fill,delete C.x,delete C.y,delete C.width,delete C.height,e.unHighlightItem(),e.cleanHighlights(),e.boundColumn=f&&Ext.Array.contains(e.axis,f)&&u.get(f)&&u.get(f).isNumericAxis,e.getPaths(),N=e.bounds,m=e.items,w=o?{y:N.zero,height:0}:{x:N.zero,width:0},g=m.length;for(y=0;y<g;y++){E=d.getAt(y),k=m[y].attr,c&&(m[y].shadows=e.renderShadows(y,k,w,N)),E||(L=Ext.apply({},w,k),L=Ext.apply(L,C||{}),E=r.add(Ext.apply({},{type:"rect",group:d},L)));if(i){S=e.renderer(E,n.getAt(y),k,y,n),E._to=S,A=e.onAnimate(E,{zero:N.zero+N.bbox.width,to:Ext.apply(S,C)});if(c&&s&&y%N.barsLen===0){b=y/N.barsLen;for(x=0;x<p;x++)A.on("afteranimate",function(){this.show(!0)},h[x].getAt(b))}}else S=e.renderer(E,n.getAt(y),Ext.apply(k,{hidden:!1}),y,n),E.setAttributes(Ext.apply(S,C),!0);m[y].sprite=E}g=d.getCount();for(b=y;b<g;b++)d.getAt(b).hide(!0);e.stacked&&(y=n.getCount());if(c)for(x=0;x<p;x++){T=h[x],g=T.getCount();for(b=y;b<g;b++)T.getAt(b).hide(!0)}e.renderLabels()},onCreateLabel:function(e,t,n,r){var i=this,s=i.chart.surface,o=i.labelsGroup,u=i.label,a=Ext.apply({},u,i.seriesLabelStyle||{}),f;return s.add(Ext.apply({type:"text",group:o},a||{}))},onPlaceLabel:function(e,t,n,r,i,s,o){var u=this,a=u.bounds,f=a.groupBarWidth,l=u.column,c=u.chart,h=c.chartBBox,p=c.resizing,d=n.value[0],v=n.value[1],m=n.attr,g=u.label,y=u.stacked,b=g.stackedDisplay,w=g.orientation=="vertical",E=[].concat(g.field),S=g.renderer,x,T,N,C,k=a.zero,L="insideStart",A="insideEnd",O="outside",M="over",_="under",D=4,P=2,H=a.signed,B=u.reverse,j,F,I;if(i==L||i==A||i==O){if(y&&i==O){e.hide(!0);return}e.setAttributes({style:undefined}),x=Ext.isNumber(o)?S(t.get(E[o]),e,t,n,r,i,s,o):"",e.setAttributes({text:x}),T=u.getLabelSize(x,e.attr.style),N=T.width,C=T.height;if(l){if(!N||!C||y&&m.height<C){e.hide(!0);return}j=m.x+(w?f/2:(f-N)/2);if(i==O){var q=v>=0?m.y-h.y:h.y+h.height-m.y-m.height;q<C+P&&(i=A)}!y&&i!=O&&C+P>m.height&&(i=O);if(!F){F=m.y;if(v>=0)switch(i){case L:F+=m.height+(w?-P:-C/2);break;case A:F+=w?C+D:C/2;break;case O:F+=w?-P:-C/2}else switch(i){case L:F+=w?C+P:C/2;break;case A:F+=w?m.height-P:m.height-C/2;break;case O:F+=w?m.height+C+P:m.height+C/2}}}else{if(!N||!C||y&&!m.width){e.hide(!0);return}F=m.y+(w?(f+C)/2:f/2);if(i==O){var q=v>=0?h.x+h.width-m.x-m.width:m.x-h.x;q<N+D&&(i=A)}if(i!=O&&!w&&N+D*2>=m.width)if(y){if(C>m.width){e.hide(!0);return}j=m.x+m.width/2,w=!0}else i=O;if(!j){j=m.x;if(v>=0)switch(i){case L:B?j+=m.width+(w?-N/2:-N-D):j+=w?N/2:D;break;case A:B?j-=w?-N/2:-N-D:j+=m.width+(w?-N/2:-N-D);break;case O:B?j-=N+(w?N/2:D):j+=m.width+(w?N/2:D)}else switch(i){case L:B?j-=w?-N/2:-N-D:j+=m.width+(w?-N/2:-N-D);break;case A:B?j+=m.width+(w?-N/2:-N-D):j+=w?N/2:D;break;case O:B?j-=N+(w?N/2:D):j+=w?-N/2:-N-D}}}}else if(i==M||i==_)if(y&&b){x=e.attr.text,e.setAttributes({style:Ext.applyIf(e.attr&&e.attr.style||{},{"font-weight":"bold","font-size":"14px"})}),T=u.getLabelSize(x,e.attr.style),N=T.width,C=T.height;switch(i){case M:l?(j=m.x+(w?f/2:(f-N)/2),F=k-(n.totalDim-n.totalNegDim)-C/2-P):(j=k+(n.totalDim-n.totalNegDim)+D,F=m.y+(w?(f+C)/2:f/2));break;case _:l?(j=m.x+(w?f/2:(f-N)/2),F=k+n.totalNegDim+C/2):(j=k-n.totalNegDim-N-D,F=m.y+(w?(f+C)/2:f/2))}}if(j==undefined||F==undefined){e.hide(!0);return}e.isOutside=i==O,e.setAttributes({text:x}),I={x:j,y:F},I.rotate=w?{x:j,y:F,degrees:270}:u.defaultRotate,s&&p&&(l?(j=m.x+m.width/2,F=k):(j=k,F=m.y+m.height/2),e.setAttributes({x:j,y:F},!0),w&&e.setAttributes({rotate:{x:j,y:F,degrees:270}},!0)),s?u.onAnimate(e,{zero:n.point[0],to:I}):e.setAttributes(Ext.apply(I,{hidden:!1}),!0)},getLabelSize:function(e,t){var n=this.testerLabel,r=this.label,i=Ext.apply({},r,t,this.seriesLabelStyle||{}),s=r.orientation==="vertical",o,u,a,f;return n||(n=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},i))),n.setAttributes({style:t,text:e},!0),o=n.getBBox(),u=o.width,a=o.height,{width:s?a:u,height:s?u:a}},onAnimate:function(e,t){var n=this,r=t.to;return e.show(),n.reverse&&!n.column&&(t.from={x:n.stacked||e.type=="text"?t.zero:r.x+r.width,width:0},n.inHighlight&&delete t.from.x),this.callParent(arguments)},isItemInPoint:function(e,t,n){var r=n.sprite.getBBox();return r.x<=e&&r.y<=t&&r.x+r.width>=e&&r.y+r.height>=t},hideAll:function(e){var t=this.chart.axes,n=t.items,r=n.length,i=0;e=(isNaN(this._index)?e:this._index)||0,this.__excludes||(this.__excludes=[]),this.__excludes[e]=!0,this.drawSeries();for(i;i<r;i++)n[i].drawAxis()},showAll:function(e){var t=this.chart.axes,n=t.items,r=n.length,i=0;e=(isNaN(this._index)?e:this._index)||0,this.__excludes||(this.__excludes=[]),this.__excludes[e]=!1,this.drawSeries();for(i;i<r;i++)n[i].drawAxis()},getLegendColor:function(e){var t=this,n=t.colorArrayStyle,r=n&&n.length;return t.style&&t.style.fill?t.style.fill:n?n[(t.themeIdx+e)%r]:"#000"},highlightItem:function(e){this.callParent(arguments),this.inHighlight=!0,this.renderLabels(),delete this.inHighlight},unHighlightItem:function(){this.callParent(arguments),this.inHighlight=!0,this.renderLabels(),delete this.inHighlight},cleanHighlights:function(){this.callParent(arguments),this.inHighlight=!0,this.renderLabels(),delete this.inHighlight}}),Ext.define("Ext.chart.series.Column",{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],extend:Ext.chart.series.Bar,type:"column",alias:"series.column",column:!0,boundColumn:!1,xPadding:10,yPadding:0}),Ext.define("Ext.chart.series.Gauge",{extend:Ext.chart.series.Series,type:"gauge",alias:"series.gauge",rad:Math.PI/180,highlightDuration:150,angleField:!1,needle:!1,donut:!1,showInLegend:!1,style:{},constructor:function(e){this.callParent(arguments);var t=this,n=t.chart,r=n.surface,i=n.store,s=n.shadow,o,u,a;Ext.apply(t,e,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:1}}]}),t.group=r.getGroup(t.seriesId);if(s)for(o=0,u=t.shadowAttributes.length;o<u;o++)t.shadowGroups.push(r.getGroup(t.seriesId+"-shadows"+o));r.customAttributes.segment=function(e){return t.getSegment(e)}},initialize:function(){var e=this,t=e.chart.getChartStore(),n=t.data.items,r=e.label,i=n.length;e.yField=
[],r&&r.field&&i>0&&e.yField.push(n[0].get(r.field))},getSegment:function(e){var t=this,n=t.rad,r=Math.cos,i=Math.sin,s=Math.abs,o=t.centerX,u=t.centerY,a=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=.01,g=e.endRho-e.startRho,y=e.startAngle,b=e.endAngle,w=(y+b)/2*n,E=e.margin||0,S=s(b-y)>180,x=Math.min(y,b)*n,T=Math.max(y,b)*n,N=!1;return o+=E*r(w),u+=E*i(w),a=o+e.startRho*r(x),h=u+e.startRho*i(x),f=o+e.endRho*r(x),p=u+e.endRho*i(x),l=o+e.startRho*r(T),d=u+e.startRho*i(T),c=o+e.endRho*r(T),v=u+e.endRho*i(T),s(a-l)<=m&&s(h-d)<=m&&(N=!0),N?{path:[["M",a,h],["L",f,p],["A",e.endRho,e.endRho,0,+S,1,c,v],["Z"]]}:{path:[["M",a,h],["L",f,p],["A",e.endRho,e.endRho,0,+S,1,c,v],["L",l,d],["A",e.startRho,e.startRho,0,+S,0,a,h],["Z"]]}},calcMiddle:function(e){var t=this,n=t.rad,r=e.slice,i=t.centerX,s=t.centerY,o=r.startAngle,u=r.endAngle,a=Math.max("rho"in r?r.rho:t.radius,t.label.minMargin),f=+t.donut,l=Math.min(o,u)*n,c=Math.max(o,u)*n,h=-(l+(c-l)/2),p=i+(e.endRho+e.startRho)/2*Math.cos(h),d=s-(e.endRho+e.startRho)/2*Math.sin(h);e.middle={x:p,y:d}},drawSeries:function(){var e=this,t=e.chart,n=t.getChartStore(),r=e.group,i=e.chart.animate,s=e.chart.axes.get(0),o=s&&s.minimum||e.minimum||0,u=s&&s.maximum||e.maximum||0,a=e.angleField||e.field||e.xField,f=t.surface,l=t.chartBBox,c=e.rad,h=+e.donut,p={},d=[],v=e.seriesStyle,m=e.seriesLabelStyle,g=e.colorArrayStyle,y=g&&g.length||0,b=Math.cos,w=Math.sin,E=-180,S=e.reverse,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X;Ext.apply(v,e.style||{}),e.setBBox(),U=e.bbox,e.colorSet&&(g=e.colorSet,y=g.length);if(!n||!n.getCount()||e.seriesIsHidden){e.hide(),e.items=[];return}T=e.centerX=l.x+l.width/2,N=e.centerY=l.y+l.height,e.radius=Math.min(T-l.x,N-l.y),e.slices=k=[],e.items=d=[],e.value||(_=n.getAt(0),e.value=_.get(a)),A=S?u-e.value:e.value,e.needle?(W={series:e,value:A,startAngle:E,endAngle:0,rho:e.radius},z=E*(1-(A-o)/(u-o)),k.push(W)):(z=E*(1-(A-o)/(u-o)),W={series:e,value:A,startAngle:E,endAngle:z,rho:e.radius},X={series:e,value:u-A,startAngle:z,endAngle:0,rho:e.radius},S?k.push(X,W):k.push(W,X));for(D=0,M=k.length;D<M;D++)C=k[D],L=r.getAt(D),x=Ext.apply({segment:{startAngle:C.startAngle,endAngle:C.endAngle,margin:0,rho:C.rho,startRho:C.rho*+h/100,endRho:C.rho}},Ext.apply(v,g&&{fill:g[D%y]}||{})),O=Ext.apply({},x.segment,{slice:C,series:e,storeItem:_,index:D}),d[D]=O,L||(R=Ext.apply({type:"path",group:r},Ext.apply(v,g&&{fill:g[D%y]}||{})),L=f.add(Ext.apply(R,x))),C.sprite=C.sprite||[],O.sprite=L,C.sprite.push(L),i?(x=e.renderer(L,_,x,D,n),L._to=x,e.onAnimate(L,{to:x})):(x=e.renderer(L,_,Ext.apply(x,{hidden:!1}),D,n),L.setAttributes(x,!0));e.needle&&(z=z*Math.PI/180,e.needleSprite?i?e.onAnimate(e.needleSprite,{to:{path:["M",T+e.radius*+h/100*b(z),N+ -Math.abs(e.radius*+h/100*w(z)),"L",T+e.radius*b(z),N+ -Math.abs(e.radius*w(z))]}}):e.needleSprite.setAttributes({type:"path",path:["M",T+e.radius*+h/100*b(z),N+ -Math.abs(e.radius*+h/100*w(z)),"L",T+e.radius*b(z),N+ -Math.abs(e.radius*w(z))]}):e.needleSprite=e.chart.surface.add({type:"path",path:["M",T+e.radius*+h/100*b(z),N+ -Math.abs(e.radius*+h/100*w(z)),"L",T+e.radius*b(z),N+ -Math.abs(e.radius*w(z))],"stroke-width":4,stroke:"#222"}),e.needleSprite.setAttributes({hidden:!1},!0)),delete e.value},setValue:function(e){this.value=e,this.drawSeries()},onCreateLabel:function(e,t,n,r){},onPlaceLabel:function(e,t,n,r,i,s,o){},onPlaceCallout:function(){},onAnimate:function(e,t){return e.show(),this.callParent(arguments)},isItemInPoint:function(e,t,n,r){var i=this,s=i.centerX,o=i.centerY,u=Math.abs,a=u(e-s),f=u(t-o),l=n.startAngle,c=n.endAngle,h=Math.sqrt(a*a+f*f),p=Math.atan2(t-o,e-s)/i.rad;return r===0&&p>=l&&p<c&&h>=n.startRho&&h<=n.endRho},getLegendColor:function(e){var t=this.colorSet||this.colorArrayStyle;return t[e%t.length]}}),Ext.define("Ext.chart.series.Line",{extend:Ext.chart.series.Cartesian,alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],type:"line",alias:"series.line",selectionTolerance:20,showMarkers:!0,markerConfig:{},style:{},smooth:!1,defaultSmoothness:3,fill:!1,constructor:function(e){this.callParent(arguments);var t=this,n=t.chart.surface,r=t.chart.shadow,i,s;e.highlightCfg=Ext.Object.merge({"stroke-width":3},e.highlightCfg),Ext.apply(t,e,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]}),t.group=n.getGroup(t.seriesId),t.showMarkers&&(t.markerGroup=n.getGroup(t.seriesId+"-markers"));if(r)for(i=0,s=t.shadowAttributes.length;i<s;i++)t.shadowGroups.push(n.getGroup(t.seriesId+"-shadows"+i))},shrink:function(e,t,n){var r=e.length,i=Math.floor(r/n),s=1,o=0,u=0,a=[+e[0]],f=[+t[0]];for(;s<r;++s)o+=+e[s]||0,u+=+t[s]||0,s%i==0&&(a.push(o/i),f.push(u/i),o=0,u=0);return{x:a,y:f}},drawSeries:function(){var e=this,t=e.chart,n=t.axes,r=t.getChartStore(),i=r.data.items,s,o=r.getCount(),u=e.chart.surface,a={},f=e.group,l=e.showMarkers,c=e.markerGroup,h=t.shadow,p=e.shadowGroups,d=e.shadowAttributes,v=e.smooth,m=p.length,g=["M"],y=["M"],b=["M"],w=["M"],E=t.markerIndex,S=[].concat(e.axis),x,T=[],N=[],C=!1,k=e.reverse,L=[],A=Ext.apply({},e.markerStyle),O=e.seriesStyle,M=e.colorArrayStyle,_=M&&M.length||0,D=Ext.isNumber,P=e.seriesIdx,H=e.getAxesForXAndYFields(),B=H.xAxis,j=H.yAxis,F=n&&n.get(B),I=n&&n.get(j),q=B?F&&F.type:"",R=j?I&&I.type:"",U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt;if(e.fireEvent("beforedraw",e)===!1)return;if(!o||e.seriesIsHidden){e.hide(),e.items=[];if(e.line){e.line.hide(!0);if(e.line.shadows){U=e.line.shadows;for(rt=0,m=U.length;rt<m;rt++)z=U[rt],z.hide(!0)}e.fillPath&&e.fillPath.hide(!0)}e.line=null,e.fillPath=null;return}Et=Ext.apply(A||{},e.markerConfig,{fill:e.seriesStyle.fill||M[e.themeIdx%M.length]}),xt=Et.type,delete Et.type,St=O,St["stroke-width"]||(St["stroke-width"]=.5),Nt="opacity"in St?St.opacity:1,Lt="opacity"in St?St.opacity:.3,Ct="lineOpacity"in St?St.lineOpacity:Nt,kt="fillOpacity"in St?St.fillOpacity:Lt;if(E&&c&&c.getCount())for(nt=0;nt<E;nt++)ut=c.getAt(nt),c.remove(ut),c.add(ut),at=c.getAt(c.getCount()-2),ut.setAttributes({x:0,y:0,translate:{x:at.attr.translation.x,y:at.attr.translation.y}},!0);e.unHighlightItem(),e.cleanHighlights(),e.setBBox(),a=e.bbox,e.clipRect=[a.x,a.y,a.width,a.height],F&&(ot=F.applyData(),vt=ot.from,mt=ot.to),I&&(ot=I.applyData(),gt=ot.from,yt=ot.to),e.xField&&!Ext.isNumber(vt)&&(st=e.getMinMaxXValues(),vt=st[0],mt=st[1]),e.yField&&!Ext.isNumber(gt)&&(st=e.getMinMaxYValues(),gt=st[0],yt=st[1]),isNaN(vt)?(vt=0,pt=a.width/(o-1||1)):pt=a.width/(mt-vt||o-1||1),isNaN(gt)?(gt=0,dt=a.height/(o-1||1)):dt=a.height/(yt-gt||o-1||1);for(nt=0,it=i.length;nt<it;nt++){s=i[nt],lt=s.get(e.xField),q==="Time"&&typeof lt=="string"&&(lt=Date.parse(lt));if(typeof lt=="string"||typeof lt=="object"&&!Ext.isDate(lt)||q==="Category")lt=nt;ct=s.get(e.yField),R==="Time"&&typeof ct=="string"&&(ct=Date.parse(ct));if(typeof ct=="undefined"||typeof ct=="string"&&!ct)continue;if(typeof ct=="string"||typeof ct=="object"&&!Ext.isDate(ct)||R==="Category")ct=nt;L.push(nt),T.push(lt),N.push(ct)}it=T.length,it>a.width&&(ht=e.shrink(T,N,a.width),T=ht.x,N=ht.y),e.items=[],Tt=0,it=T.length;for(nt=0;nt<it;nt++){lt=T[nt],ct=N[nt];if(ct===!1){y.length==1&&(y=[]),C=!0,e.items.push(!1);continue}k?K=a.x+a.width-(lt-vt)*pt:K=a.x+(lt-vt)*pt,K=Ext.Number.toFixed(K,2),Q=Ext.Number.toFixed(a.y+a.height-(ct-gt)*dt,2),C&&(C=!1,y.push("M")),y=y.concat([K,Q]),typeof et=="undefined"&&typeof Q!="undefined"&&(et=Q,Z=K);if(!e.line||t.resizing)g=g.concat([K,a.y+a.height/2]);if(t.animate&&t.resizing&&e.line){e.line.setAttributes({path:g,opacity:Ct},!0),e.fillPath&&e.fillPath.setAttributes({path:g,opacity:kt},!0);if(e.line.shadows){U=e.line.shadows;for(rt=0,m=U.length;rt<m;rt++)z=U[rt],z.setAttributes({path:g},!0)}}l&&(ut=c.getAt(Tt++),ut?(ut.setAttributes({value:'"'+lt+", "+ct+'"',x:0,y:0,hidden:!1},!0),ut._to={translate:{x:+K,y:+Q}}):(ut=Ext.chart.Shape[xt](u,Ext.apply({group:[f,c],x:0,y:0,translate:{x:+(G||K),y:Y||a.y+a.height/2},value:'"'+lt+", "+ct+'"',zIndex:4e3},Et)),ut._to={translate:{x:+K,y:+Q}})),e.items.push({series:e,value:[lt,ct],point:[K,Q],sprite:ut,storeItem:r.getAt(L[nt])}),G=K,Y=Q}if(y.length<=1)return;e.smooth&&(w=Ext.draw.Draw.smooth(y,D(v)?v:e.defaultSmoothness)),b=v?w:y,t.markerIndex&&e.previousPath?(X=e.previousPath,v||Ext.Array.erase(X,1,2)):X=y;if(!e.line){e.line=u.add(Ext.apply({type:"path",group:f,path:g,stroke:St.stroke||St.fill},St||{})),e,e.line.setAttributes({opacity:Ct},!0),h&&e.line.setAttributes(Ext.apply({},e.shadowOptions),!0),e.line.setAttributes({fill:"none",zIndex:3e3}),!St.stroke&&_&&e.line.setAttributes({stroke:M[e.themeIdx%_]},!0);if(h){U=e.line.shadows=[];for(W=0;W<m;W++)x=d[W],x=Ext.apply({},x,{path:g}),z=u.add(Ext.apply({},{type:"path",group:p[W]},x)),U.push(z)}}e.fill&&($=b.concat([["L",K,a.y+a.height],["L",Z,a.y+a.height],["L",Z,et]]),e.fillPath||(e.fillPath=u.add({group:f,type:"path",fill:St.fill||M[e.themeIdx%_],path:g}))),tt=l&&c.getCount();if(t.animate){V=e.fill,bt=e.line,J=e.renderer(bt,!1,{path:b},nt,r),Ext.apply(J,St||{},{stroke:St.stroke||St.fill}),delete J.fill,bt.show(!0),t.markerIndex&&e.previousPath?e.animation=wt=e.onAnimate(bt,{to:J,from:{path:X}}):e.animation=wt=e.onAnimate(bt,{to:J});if(h){U=bt.shadows;for(rt=0;rt<m;rt++)U[rt].show(!0),t.markerIndex&&e.previousPath?e.onAnimate(U[rt],{to:{path:b},from:{path:X}}):e.onAnimate(U[rt],{to:{path:b}})}V&&(e.fillPath.show(!0),e.onAnimate(e.fillPath,{to:Ext.apply({},{path:$,fill:St.fill||M[e.themeIdx%_],"stroke-width":0,opacity:kt},St||{})}));if(l){Tt=0;for(nt=0;nt<it;nt++)e.items[nt]&&(ft=c.getAt(Tt++),ft&&(J=e.renderer(ft,r.getAt(nt),ft._to,nt,r),e.onAnimate(ft,{to:Ext.applyIf(J,Et||{})}),ft.show(!0)));for(;Tt<tt;Tt++)ft=c.getAt(Tt),ft.hide(!0)}}else{J=e.renderer(e.line,!1,{path:b,hidden:!1},nt,r),Ext.apply(J,St||{},{stroke:St.stroke||St.fill}),delete J.fill,e.line.setAttributes(J,!0),e.line.setAttributes({opacity:Ct},!0);if(h){U=e.line.shadows;for(rt=0;rt<m;rt++)U[rt].setAttributes({path:b,hidden:!1},!0)}e.fill&&e.fillPath.setAttributes({path:$,hidden:!1,opacity:kt},!0);if(l){Tt=0;for(nt=0;nt<it;nt++)e.items[nt]&&(ft=c.getAt(Tt++),ft&&(J=e.renderer(ft,r.getAt(nt),ft._to,nt,r),ft.setAttributes(Ext.apply(Et||{},J||{}),!0),ft.attr.hidden||ft.show(!0)));for(;Tt<tt;Tt++)ft=c.getAt(Tt),ft.hide(!0)}}t.markerIndex&&(e.smooth?Ext.Array.erase(y,1,2):Ext.Array.splice(y,1,0,y[1],y[2]),e.previousPath=y),e.renderLabels(),e.renderCallouts(),e.fireEvent("draw",e)},onCreateLabel:function(e,t,n,r){var i=this,s=i.labelsGroup,o=i.label,u=i.bbox,a=Ext.apply({},o,i.seriesLabelStyle||{});return i.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:s,x:Number(t.point[0]),y:u.y+u.height/2},a||{}))},onPlaceLabel:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.resizing,l=u.label,c=l.renderer,h=l.field,p=u.bbox,d=Number(n.point[0]),v=Number(n.point[1]),m=n.sprite.attr.radius,g,y,b,w,E,S;e.setAttributes({text:c(t.get(h),e,t,n,r,i,s,o),hidden:!0},!0),y=n.sprite.getBBox(),y.width=y.width||m*2,y.height=y.height||m*2,g=e.getBBox(),b=g.width/2,w=g.height/2;if(i=="rotate")E=y.width/2+b+w/2,d+E+b>p.x+p.width?d-=E:d+=E,e.setAttributes({rotation:{x:d,y:v,degrees:-45}},!0);else if(i=="under"||i=="over")e.setAttributes({rotation:{degrees:0}},!0),d<p.x+b?d=p.x+b:d+b>p.x+p.width&&(d=p.x+p.width-b),S=y.height/2+w,v+=i=="over"?-S:S,v<p.y+w?v+=2*S:v+w>p.y+p.height&&(v-=2*S);u.chart.animate&&!u.chart.resizing?(e.show(!0),u.onAnimate(e,{to:{x:d,y:v}})):(e.setAttributes({x:d,y:v},!0),f&&u.animation?u.animation.on("afteranimate",function(){e.show(!0)}):e.show(!0))},highlightItem:function(){var e=this,t=e.line;e.callParent(arguments),t&&!e.highlighted&&("__strokeWidth"in t||(t.__strokeWidth=parseFloat(t.attr["stroke-width"])||0),t.__anim&&(t.__anim.paused=!0),t.__anim=new Ext.fx.Anim({target:t,to:{"stroke-width":t.__strokeWidth+3}}),e.highlighted=!0)},unHighlightItem:function(){var e=this,t=e.line,n;e.callParent(arguments),t&&e.highlighted&&(n=t.__strokeWidth||parseFloat(t.attr["stroke-width"])||0,t.__anim=new Ext.fx.Anim({target:t,to:{"stroke-width":n}}),e.highlighted=!1)},onPlaceCallout:function(e,t,n,r,i,s,o){if(!i)return;var u=this,a=u.chart,f=a.surface,l=a.resizing,c=u.callouts,h=u.items,p=r==0?!1:h[r-1].point,d=r==h.length-1?!1:h[r+1].point,v=[+n.point[0],+n.point[1]],m,g,y,b,w,E,S=c.offsetFromViz||30,x=c.offsetToSide||10,T=c.offsetBox||3,N,C,k,L,A,O=u.clipRect,M={width:c.styles.width||10,height:c.styles.height||10},_,D;p||(p=v),d||(d=v),b=(d[1]-p[1])/(d[0]-p[0]),w=(v[1]-p[1])/(v[0]-p[0]),E=(d[1]-v[1])/(d[0]-v[0]),g=Math.sqrt(1+b*b),m=[1/g,b/g],y=[-m[1],m[0]];if(w>0&&E<0&&y[1]<0||w<0&&E>0&&y[1]>0)y[0]*=-1,y[1]*=-1;else if(Math.abs(w)<Math.abs(E)&&y[0]<0||Math.abs(w)>Math.abs(E)&&y[0]>0)y[0]*=-1,y[1]*=-1;_=v[0]+y[0]*S,D=v[1]+y[1]*S,N=_+(y[0]>0?0:-(M.width+2*T)),C=D-M.height/2-T,k=M.width+2*T,L=M.height+2*T;if(N<O[0]||N+k>O[0]+O[2])y[0]*=-1;if(C<O[1]||C+L>O[1]+O[3])y[1]*=-1;_=v[0]+y[0]*S,D=v[1]+y[1]*S,N=_+(y[0]>0?0:-(M.width+2*T)),C=D-M.height/2-T,k=M.width+2*T,L=M.height+2*T,a.animate?(u.onAnimate(e.lines,{to:{path:["M",v[0],v[1],"L",_,D,"Z"]}}),e.panel&&e.panel.setPosition(N,C,!0)):(e.lines.setAttributes({path:["M",v[0],v[1],"L",_,D,"Z"]},!0),e.panel&&e.panel.setPosition(N,C));for(A in e)e[A].show(!0)},isItemInPoint:function(e,t,n,r){var i=this,s=i.items,o=i.selectionTolerance,u=null,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=Math.sqrt,N=Math.abs;return f=s[r],a=r&&s[r-1],r>=h&&(a=s[h-1]),l=a&&a.point,c=f&&f.point,p=a?l[0]:c[0]-o,d=a?l[1]:c[1],v=f?c[0]:l[0]+o,m=f?c[1]:l[1],b=T((e-p)*(e-p)+(t-d)*(t-d)),w=T((e-v)*(e-v)+(t-m)*(t-m)),E=Math.min(b,w),E<=o?E==b?a:f:!1},toggleAll:function(e){var t=this,n,r,i,s;e?Ext.chart.series.Cartesian.prototype.showAll.call(t):Ext.chart.series.Cartesian.prototype.hideAll.call(t);if(t.line){t.line.setAttributes({hidden:!e},!0);if(t.line.shadows)for(n=0,s=t.line.shadows,r=s.length;n<r;n++)i=s[n],i.setAttributes({hidden:!e},!0)}t.fillPath&&t.fillPath.setAttributes({hidden:!e},!0)},hideAll:function(){this.toggleAll(!1)},showAll:function(){this.toggleAll(!0)}}),Ext.define("Ext.chart.series.Pie",{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],extend:Ext.chart.series.Series,type:"pie",alias:"series.pie",accuracy:1e5,rad:Math.PI*2/1e5,highlightDuration:150,angleField:!1,lengthField:!1,donut:!1,showInLegend:!1,style:{},constructor:function(e){this.callParent(arguments);var t=this,n=t.chart,r=n.surface,i=n.store,s=n.shadow,o,u,a;e.highlightCfg=Ext.merge({segment:{margin:20}},e.highlight),Ext.apply(t,e,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:1}}]}),t.group=r.getGroup(t.seriesId);if(s)for(o=0,u=t.shadowAttributes.length;o<u;o++)t.shadowGroups.push(r.getGroup(t.seriesId+"-shadows"+o));r.customAttributes.segment=function(e){var n=t.getSegment(e);if(!n.path||n.path.length===0)n.path=["M",0,0];return n},t.__excludes=t.__excludes||[]},onRedraw:function(){this.initialize()},initialize:function(){var e=this,t=e.chart.getChartStore(),n=t.data.items,r,i,s;e.callParent(),e.yField=[];if(e.label.field)for(r=0,i=n.length;r<i;r++)s=n[r],e.yField.push(s.get(e.label.field))},getSegment:function(e){var t=this,n=t.rad,r=Math.cos,i=Math.sin,s=t.centerX,o=t.centerY,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=.01,w=e.startAngle,E=e.endAngle,S=(w+E)/2*n,x=e.margin||0,T=Math.min(w,E)*n,N=Math.max(w,E)*n,C=r(T),k=i(T),L=r(N),A=i(N),O=r(S),M=i(S),_=0,D=.7071067811865476;return N-T<b?{path:""}:(x!==0&&(s+=x*O,o+=x*M),a=s+e.endRho*C,h=o+e.endRho*k,l=s+e.endRho*L,d=o+e.endRho*A,g=s+e.endRho*O,y=o+e.endRho*M,e.startRho!==0?(u=s+e.startRho*C,c=o+e.startRho*k,f=s+e.startRho*L,p=o+e.startRho*A,v=s+e.startRho*O,m=o+e.startRho*M,{path:[["M",a,h],["A",e.endRho,e.endRho,0,0,1,g,y],["L",g,y],["A",e.endRho,e.endRho,0,_,1,l,d],["L",l,d],["L",f,p],["A",e.startRho,e.startRho,0,_,0,v,m],["L",v,m],["A",e.startRho,e.startRho,0,0,0,u,c],["L",u,c],["Z"]]}):{path:[["M",s,o],["L",a,h],["A",e.endRho,e.endRho,0,0,1,g,y],["L",g,y],["A",e.endRho,e.endRho,0,_,1,l,d],["L",l,d],["L",s,o],["Z"]]})},calcMiddle:function(e){var t=this,n=t.rad,r=e.slice,i=t.centerX,s=t.centerY,o=r.startAngle,u=r.endAngle,a=+t.donut,f=-(o+u)*n/2,l=(e.endRho+e.startRho)/2,c=i+l*Math.cos(f),h=s-l*Math.sin(f);e.middle={x:c,y:h}},drawSeries:function(){var e=this,t=e.chart.getChartStore(),n=t.data.items,r,i=e.group,s=e.chart.animate,o=e.angleField||e.field||e.xField,u=[].concat(e.lengthField),a=0,f=e.chart,l=f.surface,c=f.chartBBox,h=f.shadow,p=e.shadowGroups,d=e.shadowAttributes,v=p.length,m=u.length,g=0,y=+e.donut,b=[],w=[],E=0,S=0,x=0,T=e.seriesStyle,N=e.colorArrayStyle,C=N&&N.length||0,k,L,A,O,M,_,D,P,H=0,B,j,F,I,q,R,U,z,W,X,V,$,J,K;Ext.apply(T,e.style||{}),e.setBBox(),K=e.bbox,e.colorSet&&(N=e.colorSet,C=N.length);if(!t||!t.getCount()||e.seriesIsHidden){e.hide(),e.items=[];return}e.unHighlightItem(),e.cleanHighlights(),_=e.centerX=c.x+c.width/2,D=e.centerY=c.y+c.height/2,e.radius=Math.min(_-c.x,D-c.y),e.slices=j=[],e.items=w=[];for(z=0,U=n.length;z<U;z++){r=n[z];if(this.__excludes&&this.__excludes[z])continue;E+=+r.get(o);if(u[0]){for(W=0,a=0;W<m;W++)a+=+r.get(u[W]);b[z]=a,S=Math.max(S,a)}}E=E||1;for(z=0,U=n.length;z<U;z++){r=n[z],this.__excludes&&this.__excludes[z]?I=0:(I=r.get(o),H===0&&(H=1));if(H==1){H=2,e.firstAngle=x=e.accuracy*I/E/2;for(W=0;W<z;W++)j[W].startAngle=j[W].endAngle=e.firstAngle}X=x-e.accuracy*I/E,B={series:e,value:I,startAngle:x,endAngle:X,storeItem:r},u[0]?(R=+b[z],B.rho=Math.floor(e.radius/S*R)):B.rho=e.radius,j[z]=B,function(){x=X}()}if(h)for(z=0,U=j.length;z<U;z++){B=j[z],B.shadowAttrs=[];for(W=0,g=0,A=[];W<m;W++){F=i.getAt(z*m+W),P=u[W]?t.getAt(z).get(u[W])/b[z]*B.rho:B.rho,k={segment:{startAngle:B.startAngle,endAngle:B.endAngle,margin:0,rho:B.rho,startRho:g+P*y/100,endRho:g+P},hidden:!B.value&&B.startAngle%e.accuracy==B.endAngle%e.accuracy};for(M=0,A=[];M<v;M++)L=d[M],O=p[M].getAt(z),O||(O=f.surface.add(Ext.apply({},{type:"path",group:p[M],strokeLinejoin:"round"},k,L))),L=e.renderer(O,t.getAt(z),Ext.apply({},k,L),z,t),s?e.onAnimate(O,{to:L}):O.setAttributes(L,!0),A.push(O);B.shadowAttrs[W]=A}}for(z=0,U=j.length;z<U;z++){B=j[z];for(W=0,g=0;W<m;W++)F=i.getAt(z*m+W),P=u[W]?t.getAt(z).get(u[W])/b[z]*B.rho:B.rho,k=Ext.apply({segment:{startAngle:B.startAngle,endAngle:B.endAngle,margin:0,rho:B.rho,startRho:g+P*y/100,endRho:g+P},hidden:!B.value&&B.startAngle%e.accuracy==B.endAngle%e.accuracy},Ext.apply(T,N&&{fill:N[(m>1?W:z)%C]}||{})),q=Ext.apply({},k.segment,{slice:B,series:e,storeItem:B.storeItem,index:z}),e.calcMiddle(q),h&&(q.shadows=B.shadowAttrs[W]),w[z]=q,F||(J=Ext.apply({type:"path",group:i,middle:q.middle},Ext.apply(T,N&&{fill:N[(m>1?W:z)%C]}||{})),F=l.add(Ext.apply(J,k))),B.sprite=B.sprite||[],q.sprite=F,B.sprite.push(F),B.point=[q.middle.x,q.middle.y],s?(k=e.renderer(F,t.getAt(z),k,z,t),F._to=k,F._animating=!0,e.onAnimate(F,{to:k,listeners:{afteranimate:{fn:function(){this._animating=!1},scope:F}}})):(k=e.renderer(F,t.getAt(z),Ext.apply(k,{hidden:!1}),z,t),F.setAttributes(k,!0)),g+=P}U=i.getCount();for(z=0;z<U;z++)!j[z/m>>0]&&i.getAt(z)&&i.getAt(z).hide(!0);if(h){v=p.length;for(M=0;M<U;M++)if(!j[M/m>>0])for(W=0;W<v;W++)p[W].getAt(M)&&p[W].getAt(M).hide(!0)}e.renderLabels(),e.renderCallouts()},setSpriteAttributes:function(e,t,n){var r=this;n?(e.stopAnimation(),e.animate({to:t,duration:r.highlightDuration})):e.setAttributes(t,!0)},createLabelLine:function(e){var t=this;return calloutLine=t.label.calloutLine,line=t.chart.surface.add({type:"path",stroke:e===undefined?"#555":calloutLine&&calloutLine.color||t.getLegendColor(e),lineWidth:calloutLine&&calloutLine.width||2,path:"M0,0Z"}),line},drawLabelLine:function(e,t,n,r){var i=this,s=e.lineSprite,o="M"+t.x+" "+t.y+"L"+n.x+" "+n.y+"Z";i.setSpriteAttributes(s,{path:o},r)},onCreateLabel:function(e,t,n,r){var i=this,s=i.labelsGroup,o=i.label,u=i.centerX,a=i.centerY,f=t.middle,l=Ext.apply(i.seriesLabelStyle||{},o||{});return i.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:s,x:f.x,y:f.y},l))},onPlaceLabel:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.resizing,l=u.label,c=l.renderer,h=l.field,p=u.centerX,d=u.centerY,v=n.middle,m={x:v.x,y:v.y},g=v.x-p,y=v.y-d,b={},w=1,E=Math.atan2(y,g||1),S=Ext.draw.Draw.degrees(E),x,T,N,C,k=i==="outside",L=e.attr.calloutLine,A=L&&L.width||2,O=(e.attr.padding||20)+(k?A/2+4:0),M=0,_=0;m.hidden=!1,this.__excludes&&this.__excludes[r]&&(m.hidden=!0),e.setAttributes({opacity:m.hidden?0:1,text:c(t.get(h),e,t,n,r,i,s,o)},!0);if(e.lineSprite){var D={opacity:m.hidden?0:1};m.hidden&&(D.translate={x:0,y:0}),u.setSpriteAttributes(e.lineSprite,D,!1)}switch(i){case"outside":e.isOutside=!0,w=n.endRho,M=Math.abs(S)<=90?O:-O,_=S>=0?O:-O,e.setAttributes({rotation:{degrees:0}},!0),T=e.getBBox(),N=T.width/2*Math.cos(E),C=T.height/2*Math.sin(E),N+=M,C+=_,w+=Math.sqrt(N*N+C*C),m.x=w*Math.cos(E)+p,m.y=w*Math.sin(E)+d;break;case"rotate":S=Ext.draw.Draw.normalizeDegrees(S),S=S>90&&S<270?S+180:S,x=e.attr.rotation.degrees,x!=null&&Math.abs(x-S)>90?(S>x?S-=360:S+=360,S%=360):S=Ext.draw.Draw.normalizeDegrees(S),m.rotate={degrees:S,x:m.x,y:m.y};break;default:}m.translate={x:0,y:0},s&&!f&&(i!="rotate"||x!=null)?u.onAnimate(e,{to:m}):e.setAttributes(m,!0),e._from=b;if(e.isOutside&&L){var P=e.lineSprite,H=s,B={x:(n.endRho-A/2)*Math.cos(E)+p,y:(n.endRho-A/2)*Math.sin(E)+d},j={x:m.x,y:m.y},F={};function I(e){return e?e<0?-1:1:0}if(L&&L.length)F={x:(n.endRho+L.length)*Math.cos(E)+p,y:(n.endRho+L.length)*Math.sin(E)+d};else{var q=Ext.draw.Draw.normalizeRadians(-E),R=Math.cos(q),U=Math.sin(q),z=(T.width+A+4)/2,W=(T.height+A+4)/2;Math.abs(R)*W>Math.abs(U)*z?(F.x=j.x-z*I(R),F.y=j.y+z*U/R*I(R)):(F.x=j.x-W*R/U*I(U),F.y=j.y+W*I(U))}P||(P=e.lineSprite=u.createLabelLine(r),H=!1),u.drawLabelLine(e,B,F,H)}else delete e.lineSprite},onPlaceCallout:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=u.centerX,l=u.centerY,c=n.middle,h={x:c.x,y:c.y},p=c.x-f,d=c.y-l,v=1,m,g=Math.atan2(d,p||1),y=e&&e.label?e.label.getBBox():{width:0,height:0},b=20,w=10,E=10,S;if(!y.width||!y.height)return;v=n.endRho+b,m=(n.endRho+n.startRho)/2+(n.endRho-n.startRho)/3,h.x=v*Math.cos(g)+f,h.y=v*Math.sin(g)+l,p=m*Math.cos(g),d=m*Math.sin(g),a.animate?(u.onAnimate(e.lines,{to:{path:["M",p+f,d+l,"L",h.x,h.y,"Z","M",h.x,h.y,"l",p>0?w:-w,0,"z"]}}),u.onAnimate(e.box,{to:{x:h.x+(p>0?w:-(w+y.width+2*E)),y:h.y+(d>0?-y.height-E/2:-y.height-E/2),width:y.width+2*E,height:y.height+2*E}}),u.onAnimate(e.label,{to:{x:h.x+(p>0?w+E:-(w+y.width+E)),y:h.y+(d>0?-y.height/4:-y.height/4)}})):(e.lines.setAttributes({path:["M",p+f,d+l,"L",h.x,h.y,"Z","M",h.x,h.y,"l",p>0?w:-w,0,"z"]},!0),e.box.setAttributes({x:h.x+(p>0?w:-(w+y.width+2*E)),y:h.y+(d>0?-y.height-E/2:-y.height-E/2),width:y.width+2*E,height:y.height+2*E},!0),e.label.setAttributes({x:h.x+(p>0?w+E:-(w+y.width+E)),y:h.y+(d>0?-y.height/4:-y.height/4)},!0));for(S in e)e[S].show(!0)},onAnimate:function(e,t){return e.show(),this.callParent(arguments)},isItemInPoint:function(e,t,n,r){var i=this,s=i.centerX,o=i.centerY,u=Math.abs,a=u(e-s),f=u(t-o),l=n.startAngle,c=n.endAngle,h=Math.sqrt(a*a+f*f),p=Math.atan2(t-o,e-s)/i.rad;return p>i.firstAngle&&(p-=i.accuracy),p<=l&&p>c&&h>=n.startRho&&h<=n.endRho},hideAll:function(e){var t,n,r,i,s,o,u;e=(isNaN(this._index)?e:this._index)||0,this.__excludes=this.__excludes||[],this.__excludes[e]=!0,u=this.slices[e].sprite;for(s=0,o=u.length;s<o;s++){u[s].setAttributes({hidden:!0},!0);var a=u[s].lineSprite;a&&a.setAttributes({hidden:!0},!0)}if(this.slices[e].shadowAttrs)for(t=0,i=this.slices[e].shadowAttrs,n=i.length;t<n;t++){r=i[t];for(s=0,o=r.length;s<o;s++)r[s].setAttributes({hidden:!0},!0)}this.drawSeries()},showAll:function(e){e=(isNaN(this._index)?e:this._index)||0,this.__excludes[e]=!1,this.drawSeries()},highlightItem:function(e){var t=this,n=t.rad,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;e=e||this.items[this._index],this.unHighlightItem();if(!e||t.animating||e.sprite&&e.sprite._animating)return;t.callParent([e]);if(!t.highlight)return;if("segment"in t.highlightCfg){r=t.highlightCfg.segment,i=t.chart.animate,t.labelsGroup&&(p=t.labelsGroup,d=t.label.display,v=p.getAt(e.index),m=(e.startAngle+e.endAngle)/2*n,g=r.margin||0,y=g*Math.cos(m),b=g*Math.sin(m),Math.abs(y)<1e-10&&(y=0),Math.abs(b)<1e-10&&(b=0),t.setSpriteAttributes(v,{translate:{x:y,y:b}},i),w=v.lineSprite,w&&t.setSpriteAttributes(w,{translate:{x:y,y:b}},i));if(t.chart.shadow&&e.shadows){o=0,u=e.shadows,f=u.length;for(;o<f;o++){a=u[o],l={},c=e.sprite._from.segment;for(h in c)h in r||(l[h]=c[h]);s={segment:Ext.applyIf(l,t.highlightCfg.segment)},t.setSpriteAttributes(a,s,i)}}}},unHighlightItem:function(){var e=this,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;if(!e.highlight)return;if("segment"in e.highlightCfg&&e.items){t=e.items,n=e.chart.animate,r=!!e.chart.shadow,i=e.labelsGroup,s=t.length,o=0,u=0,a=e.label.display;for(;o<s;o++){g=t[o];if(!g)continue;d=g.sprite;if(d&&d._highlighted){if(i){y=i.getAt(g.index),b=Ext.apply({translate:{x:0,y:0}},a=="rotate"?{rotate:{x:y.attr.x,y:y.attr.y,degrees:y.attr.rotation.degrees}}:{}),e.setSpriteAttributes(y,b,n);var w=y.lineSprite;w&&e.setSpriteAttributes(w,{translate:{x:0,y:0}},n)}if(r){v=g.shadows,f=v.length;for(;u<f;u++){c={},h=g.sprite._to.segment,p=g.sprite._from.segment,Ext.apply(c,p);for(l in h)l in p||(c[l]=h[l]);m=v[u],e.setSpriteAttributes(m,{segment:c},n)}}}}}e.callParent(arguments)},getLegendColor:function(e){var t=this;return t.colorSet&&t.colorSet[e%t.colorSet.length]||t.colorArrayStyle[e%t.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Radar",{extend:Ext.chart.series.Series,type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:!1,style:{},constructor:function(e){this.callParent(arguments);var t=this,n=t.chart.surface;t.group=n.getGroup(t.seriesId),t.showMarkers&&(t.markerGroup=n.getGroup(t.seriesId+"-markers"))},drawSeries:function(){var e=this,t=e.chart.getChartStore(),n=t.data.items,r,i,s=e.group,o=e.chart,u=o.series.items,a,f,l,c=e.field||e.yField,h=o.surface,p=o.chartBBox,d=e.colorArrayStyle,v,m,g,y,b=0,w=[],E=Math.max,S=Math.cos,x=Math.sin,T=Math.PI*2,N=t.getCount(),C,k,L,A,O,M,_,D=e.seriesStyle,P=o.axes&&o.axes.get(0),H=!P||!P.maximum;e.setBBox(),b=H?0:P.maximum||0,Ext.apply(D,e.style||{});if(!t||!t.getCount()||e.seriesIsHidden){e.hide(),e.items=[],e.radar&&e.radar.hide(!0),e.radar=null;return}D.stroke||(D.stroke=d[e.themeIdx%d.length]),e.unHighlightItem(),e.cleanHighlights(),v=e.centerX=p.x+p.width/2,m=e.centerY=p.y+p.height/2,e.radius=y=Math.min(p.width,p.height)/2,e.items=g=[];if(H){for(a=0,f=u.length;a<f;a++)l=u[a],w.push(l.yField);for(r=0;r<N;r++){i=n[r];for(M=0,_=w.length;M<_;M++)b=E(+i.get(w[M]),b)}}b=b||1,C=[],k=[];for(M=0;M<N;M++)i=n[M],O=y*i.get(c)/b,L=O*S(M/N*T),A=O*x(M/N*T),M==0?(k.push("M",L+v,A+m),C.push("M",.01*L+v,.01*A+m)):(k.push("L",L+v,A+m),C.push("L",.01*L+v,.01*A+m)),g.push({sprite:!1,point:[v+L,m+A],storeItem:i,series:e});k.push("Z"),e.radar||(e.radar=h.add(Ext.apply({type:"path",group:s,path:C},D||{}))),o.resizing&&e.radar.setAttributes({path:C},!0),o.animate?e.onAnimate(e.radar,{to:Ext.apply({path:k},D||{})}):e.radar.setAttributes(Ext.apply({path:k},D||{}),!0),e.showMarkers&&e.drawMarkers(),e.renderLabels(),e.renderCallouts()},drawMarkers:function(){var e=this,t=e.chart,n=t.surface,r=t.getChartStore(),i=Ext.apply({},e.markerStyle||{}),s=Ext.apply(i,e.markerConfig,{fill:e.colorArrayStyle[e.themeIdx%e.colorArrayStyle.length]}),o=e.items,u=s.type,a=e.markerGroup,f=e.centerX,l=e.centerY,c,h,p,d,v;delete s.type;for(h=0,p=o.length;h<p;h++)c=o[h],d=a.getAt(h),d?d.show():d=Ext.chart.Shape[u](n,Ext.apply({group:a,x:0,y:0,translate:{x:f,y:l}},s)),c.sprite=d,t.resizing&&d.setAttributes({x:0,y:0,translate:{x:f,y:l}},!0),d._to={translate:{x:c.point[0],y:c.point[1]}},v=e.renderer(d,r.getAt(h),d._to,h,r),v=Ext.applyIf(v||{},s||{}),t.animate?e.onAnimate(d,{to:v}):d.setAttributes(v,!0)},isItemInPoint:function(e,t,n){var r,i=10,s=Math.abs;return r=n.point,s(r[0]-e)<=i&&s(r[1]-t)<=i},onCreateLabel:function(e,t,n,r){var i=this,s=i.labelsGroup,o=i.label,u=i.centerX,a=i.centerY,f=Ext.apply({},o,i.seriesLabelStyle||{});return i.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:s,x:u,y:a},f||{}))},onPlaceLabel:function(e,t,n,r,i,s,o){function S(e){return e<0&&(e+=360),e%360}var u=this,a=u.chart,f=a.resizing,l=u.label,c=l.renderer,h=l.field,p=u.centerX,d=u.centerY,v={x:Number(n.point[0]),y:Number(n.point[1])},m=v.x-p,g=v.y-d,y=Math.atan2(g,m||1),b=y*180/Math.PI,w,E;e.setAttributes({text:c(t.get(h),e,t,n,r,i,s,o),hidden:!0},!0),w=e.getBBox(),b=S(b),b>45&&b<135||b>225&&b<315?(E=b>45&&b<135?1:-1,v.y+=E*w.height/2):(E=b>=135&&b<=225?-1:1,v.x+=E*w.width/2),f&&e.setAttributes({x:p,y:d},!0),s?(e.show(!0),u.onAnimate(e,{to:v})):(e.setAttributes(v,!0),e.show(!0))},toggleAll:function(e){var t=this,n,r,i,s;e?Ext.chart.series.Radar.superclass.showAll.call(t):Ext.chart.series.Radar.superclass.hideAll.call(t);if(t.radar){t.radar.setAttributes({hidden:!e},!0);if(t.radar.shadows)for(n=0,s=t.radar.shadows,r=s.length;n<r;n++)i=s[n],i.setAttributes({hidden:!e},!0)}},hideAll:function(){this.toggleAll(!1),this.hideMarkers(0)},showAll:function(){this.toggleAll(!0)},hideMarkers:function(e){var t=this,n=t.markerGroup&&t.markerGroup.getCount()||0,r=e||0;for(;r<n;r++)t.markerGroup.getAt(r).hide(!0)},getAxesForXAndYFields:function(){var e=this,t=e.chart,n=t.axes,r=[].concat(n&&n.get(0));return{yAxis:r}}}),Ext.define("Ext.chart.series.Scatter",{extend:Ext.chart.series.Cartesian,type:"scatter",alias:"series.scatter",constructor:function(e){this.callParent(arguments);var t=this,n=t.chart.shadow,r=t.chart.surface,i,s;Ext.apply(t,e,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(0, 0, 0)"}]}),t.group=r.getGroup(t.seriesId);if(n)for(i=0,s=t.shadowAttributes.length;i<s;i++)t.shadowGroups.push(r.getGroup(t.seriesId+"-shadows"+i))},getBounds:function(){var e=this,t=e.chart,n=t.getChartStore(),r=t.axes,i=e.getAxesForXAndYFields(),s=i.xAxis,o=i.yAxis,u,a,f,l,c,h,p,d,v,m,g;e.setBBox(),u=e.bbox;if(m=r.get(s))g=m.applyData(),c=g.from,p=g.to;if(m=r.get(o))g=m.applyData(),h=g.from,d=g.to;return e.xField&&!Ext.isNumber(c)&&(m=e.getMinMaxXValues(),c=m[0],p=m[1]),e.yField&&!Ext.isNumber(h)&&(m=e.getMinMaxYValues(),h=m[0],d=m[1]),isNaN(c)?(c=0,p=n.getCount()-1,a=u.width/(n.getCount()-1)):a=u.width/(p-c),isNaN(h)?(h=0,d=n.getCount()-1,f=u.height/(n.getCount()-1)):f=u.height/(d-h),{bbox:u,minX:c,minY:h,xScale:a,yScale:f}},getPaths:function(){var e=this,t=e.chart,n=t.shadow,r=t.getChartStore(),i=r.data.items,s,o,u,a=e.group,f=e.bounds=e.getBounds(),l=e.bbox,c=f.xScale,h=f.yScale,p=f.minX,d=f.minY,v=l.x,m=l.y,g=l.height,y=e.items=[],b=[],w=e.reverse,E,S,x,T,N;for(s=0,o=i.length;s<o;s++){u=i[s],x=u.get(e.xField),T=u.get(e.yField);if(typeof T=="undefined"||typeof T=="string"&&!T||x==null||T==null)continue;if(typeof x=="string"||typeof x=="object"&&!Ext.isDate(x))x=s;if(typeof T=="string"||typeof T=="object"&&!Ext.isDate(T))T=s;w?E=v+l.width-(x-p)*c:E=v+(x-p)*c,S=m+g-(T-d)*h,b.push({x:E,y:S}),e.items.push({series:e,value:[x,T],point:[E,S],storeItem:u}),t.animate&&t.resizing&&(N=a.getAt(s),N&&(e.resetPoint(N),n&&e.resetShadow(N)))}return b},resetPoint:function(e){var t=this.bbox;e.setAttributes({translate:{x:(t.x+t.width)/2,y:(t.y+t.height)/2}},!0)},resetShadow:function(e){var t=this,n=e.shadows,r=t.shadowAttributes,i=t.shadowGroups.length,s=t.bbox,o,u;for(o=0;o<i;o++)u=Ext.apply({},r[o]),u.translate?(u.translate.x+=(s.x+s.width)/2,u.translate.y+=(s.y+s.height)/2):u.translate={x:(s.x+s.width)/2,y:(s.y+s.height)/2},n[o].setAttributes(u,!0)},createPoint:function(e,t){var n=this,r=n.chart,i=n.group,s=n.bbox;return Ext.chart.Shape[t](r.surface,Ext.apply({},{x:0,y:0,group:i,translate:{x:(s.x+s.width)/2,y:(s.y+s.height)/2}},e))},createShadow:function(e,t,n){var r=this,i=r.chart,s=r.shadowGroups,o=r.shadowAttributes,u=s.length,a=r.bbox,f,l,c,h;e.shadows=c=[];for(f=0;f<u;f++)h=Ext.apply({},o[f]),h.translate?(h.translate.x+=(a.x+a.width)/2,h.translate.y+=(a.y+a.height)/2):Ext.apply(h,{translate:{x:(a.x+a.width)/2,y:(a.y+a.height)/2}}),Ext.apply(h,t),l=Ext.chart.Shape[n](i.surface,Ext.apply({},{x:0,y:0,group:s[f]},h)),c.push(l)},drawSeries:function(){var e=this,t=e.chart,n=t.getChartStore(),r=e.group,i=t.shadow,s=e.shadowGroups,o=e.shadowAttributes,u=s.length,a,f,l,c,h,p,d,v,m,g,y;p=Ext.apply(e.markerStyle,e.markerConfig),v=p.type||"circle",delete 
p.type;if(!n||!n.getCount()){e.hide(),e.items=[];return}e.unHighlightItem(),e.cleanHighlights(),f=e.getPaths(),c=f.length;for(h=0;h<c;h++){l=f[h],a=r.getAt(h),Ext.apply(l,p),a||(a=e.createPoint(l,v),i&&e.createShadow(a,p,v)),m=a.shadows;if(t.animate){g=e.renderer(a,n.getAt(h),{translate:l},h,n),a._to=g,e.onAnimate(a,{to:g});for(d=0;d<u;d++)y=Ext.apply({},o[d]),g=e.renderer(m[d],n.getAt(h),Ext.apply({},{hidden:!1,translate:{x:l.x+(y.translate?y.translate.x:0),y:l.y+(y.translate?y.translate.y:0)}},y),h,n),e.onAnimate(m[d],{to:g})}else{g=e.renderer(a,n.getAt(h),{translate:l},h,n),a._to=g,a.setAttributes(g,!0);for(d=0;d<u;d++)y=Ext.apply({},o[d]),g=e.renderer(m[d],n.getAt(h),Ext.apply({},{hidden:!1,translate:{x:l.x+(y.translate?y.translate.x:0),y:l.y+(y.translate?y.translate.y:0)}},y),h,n),m[d].setAttributes(g,!0)}e.items[h].sprite=a}c=r.getCount();for(h=f.length;h<c;h++)r.getAt(h).hide(!0);e.renderLabels(),e.renderCallouts()},onCreateLabel:function(e,t,n,r){var i=this,s=i.labelsGroup,o=i.label,u=Ext.apply({},o,i.seriesLabelStyle),a=i.bbox;return i.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:s,x:Number(t.point[0]),y:a.y+a.height/2},u))},onPlaceLabel:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.resizing,l=u.label,c=l.renderer,h=l.field,p=u.bbox,d=Number(n.point[0]),v=Number(n.point[1]),m=n.sprite.attr.radius,g,y,b,w,E,S,x;e.setAttributes({text:c(t.get(h),e,t,n,r,i,s,o),hidden:!0},!0),y=n.sprite.getBBox(),y.width=y.width||m*2,y.height=y.height||m*2,g=e.getBBox(),b=g.width/2,w=g.height/2;if(i=="rotate")E=y.width/2+b+w/2,d+E+b>p.x+p.width?d-=E:d+=E,e.setAttributes({rotation:{x:d,y:v,degrees:-45}},!0);else if(i=="under"||i=="over")e.setAttributes({rotation:{degrees:0}},!0),d<p.x+b?d=p.x+b:d+b>p.x+p.width&&(d=p.x+p.width-b),S=y.height/2+w,v+=i=="over"?-S:S,v<p.y+w?v+=2*S:v+w>p.y+p.height&&(v-=2*S);a.animate?f?(x=n.sprite.getActiveAnimation(),x?x.on("afteranimate",function(){e.setAttributes({x:d,y:v},!0),e.show(!0)}):e.show(!0)):u.onAnimate(e,{to:{x:d,y:v}}):(e.setAttributes({x:d,y:v},!0),e.show(!0))},onPlaceCallout:function(e,t,n,r,i,s,o){var u=this,a=u.chart,f=a.surface,l=a.resizing,c=u.callouts,h=u.items,p=n.point,d,v=e.label.getBBox(),m=30,g=10,y=3,b,w,E,S,x,T=u.bbox,N,C;d=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)],N=p[0]+d[0]*m,C=p[1]+d[1]*m,b=N+(d[0]>0?0:-(v.width+2*y)),w=C-v.height/2-y,E=v.width+2*y,S=v.height+2*y;if(b<T[0]||b+E>T[0]+T[2])d[0]*=-1;if(w<T[1]||w+S>T[1]+T[3])d[1]*=-1;N=p[0]+d[0]*m,C=p[1]+d[1]*m,b=N+(d[0]>0?0:-(v.width+2*y)),w=C-v.height/2-y,E=v.width+2*y,S=v.height+2*y,a.animate?(u.onAnimate(e.lines,{to:{path:["M",p[0],p[1],"L",N,C,"Z"]}},!0),u.onAnimate(e.box,{to:{x:b,y:w,width:E,height:S}},!0),u.onAnimate(e.label,{to:{x:N+(d[0]>0?y:-(v.width+y)),y:C}},!0)):(e.lines.setAttributes({path:["M",p[0],p[1],"L",N,C,"Z"]},!0),e.box.setAttributes({x:b,y:w,width:E,height:S},!0),e.label.setAttributes({x:N+(d[0]>0?y:-(v.width+y)),y:C},!0));for(x in e)e[x].show(!0)},onAnimate:function(e,t){return e.show(),this.callParent(arguments)},isItemInPoint:function(e,t,n){function o(n){var r=s(n[0]-e),i=s(n[1]-t);return Math.sqrt(r*r+i*i)}var r,i=10,s=Math.abs;return r=n.point,r[0]-i<=e&&r[0]+i>=e&&r[1]-i<=t&&r[1]+i>=t}}),Ext.define("Ext.layout.container.Table",{alias:["layout.table"],extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.TableLayout",monitorResize:!1,type:"table",createsInnerCt:!0,targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",tableAttrs:null,getItemSizePolicy:function(e){return this.autoSizePolicy},initHierarchyState:function(e){e.inShrinkWrapTable=!0},getLayoutItems:function(){var e=this,t=[],n=e.callParent(),r,i=n.length,s;for(s=0;s<i;s++)r=n[s],r.hidden||t.push(r);return t},getHiddenItems:function(){var e=[],t=this.owner.items.items,n=t.length,r=0,i;for(;r<n;++r)i=t[r],i.rendered&&i.hidden&&e.push(i);return e},renderChildren:function(){var e=this,t=e.getLayoutItems(),n=e.owner.getTargetEl().child("table",!0).tBodies[0],r=n.rows,i=0,s=t.length,o=e.getHiddenItems(),u,a,f,l,c,h,p,d,v;u=e.calculateCells(t);for(;i<s;i++){a=u[i],f=a.rowIdx,l=a.cellIdx,c=t[i],h=r[f],h||(h=n.insertRow(f),e.trAttrs&&h.set(e.trAttrs)),d=p=Ext.get(h.cells[l]||h.insertCell(l)),e.needsDivWrap()&&(d=p.first()||p.createChild({tag:"div",role:"presentation"}),d.setWidth(null)),c.rendered?e.isValidParent(c,d,f,l,n)||e.moveItem(c,d,0):e.renderItem(c,d,0),e.tdAttrs&&p.set(e.tdAttrs),c.tdAttrs&&p.set(c.tdAttrs),p.set({colSpan:c.colspan||1,rowSpan:c.rowspan||1,id:c.cellId||"",cls:e.cellCls+" "+(c.cellCls||"")});if(!u[i+1]||u[i+1].rowIdx!==f){l++;while(h.cells[l])h.deleteCell(l)}}f++;while(n.rows[f])n.deleteRow(f);for(i=0,s=o.length;i<s;++i)e.ensureInDocument(o[i].getEl())},ensureInDocument:function(e){var t=e.dom.parentNode;while(t){if(t.tagName.toUpperCase()=="BODY")return;t=t.parentNode}Ext.getDetachedBody().appendChild(e)},calculate:function(e){if(!e.hasDomProp("containerChildrenSizeDone"))this.done=!1;else{var t=e.targetContext,n=e.widthModel.shrinkWrap,r=e.heightModel.shrinkWrap,i=r||n,s=i&&t.el.child("table",!0),o=i&&t.getPaddingInfo();n&&e.setContentWidth(s.offsetWidth+o.width,!0),r&&e.setContentHeight(s.offsetHeight+o.height,!0)}},finalizeLayout:function(){if(this.needsDivWrap()){var e=this.getLayoutItems(),t,n=e.length,r;for(t=0;t<n;t++)r=e[t],Ext.fly(r.el.dom.parentNode).setWidth(r.getWidth())}(Ext.isIE6||Ext.isIEQuirks)&&this.owner.getTargetEl().child("table").repaint()},calculateCells:function(e){var t=[],n=0,r=0,i=0,s=this.columns||Infinity,o=[],u=0,a,f=e.length,l;for(;u<f;u++){l=e[u];while(r>=s||o[r]>0)if(r>=s){r=0,i=0,n++;for(a=0;a<s;a++)o[a]>0&&o[a]--}else r++;t.push({rowIdx:n,cellIdx:i});for(a=l.colspan||1;a;--a)o[r]=l.rowspan||1,++r;++i}return t},getRenderTree:function(){var e=this,t=e.getLayoutItems(),n,r=[],i=Ext.apply({tag:"table",role:"presentation",cls:e.tableCls,cellspacing:0,cellpadding:0,cn:{tag:"tbody",role:"presentation",cn:r}},e.tableAttrs),s=e.tdAttrs,o=e.needsDivWrap(),u,a=t.length,f,l,c,h,p,d;n=e.calculateCells(t);for(u=0;u<a;u++)f=t[u],l=n[u],h=l.rowIdx,p=l.cellIdx,c=r[h],c||(c=r[h]={tag:"tr",role:"presentation",cn:[]},e.trAttrs&&Ext.apply(c,e.trAttrs)),d=c.cn[p]={tag:"td",role:"presentation"},s&&Ext.apply(d,s),Ext.apply(d,{colSpan:f.colspan||1,rowSpan:f.rowspan||1,id:f.cellId||"",cls:e.cellCls+" "+(f.cellCls||"")}),o&&(d=d.cn={tag:"div",role:"presentation"}),e.configureItem(f),d.cn=f.getRenderTree();return i},isValidParent:function(e,t,n,r){var i,s,o;return arguments.length===3?(o=e.el.up("table"),o&&o.dom.parentNode===t.dom):(i=this.owner.getTargetEl().child("table",!0).tBodies[0],s=i.rows[n].cells[r],e.el.dom.parentNode===s)},needsDivWrap:function(){return Ext.isOpera10_5}}),Ext.define("Ext.container.ButtonGroup",{extend:Ext.panel.Panel,alias:"widget.buttongroup",alternateClassName:"Ext.ButtonGroup",baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:!0,frameHeader:!1,titleAlign:"center",noTitleCls:"notitle",ariaRole:"group",initComponent:function(){var e=this,t=e.columns;t&&(e.layout=Ext.apply({},{columns:t},e.layout)),e.title||e.addClsWithUI(e.noTitleCls),e.callParent(arguments)},onBeforeAdd:function(e){e.isButton&&(this.defaultButtonUI&&e.ui==="default"&&!e.hasOwnProperty("ui")?e.ui=this.defaultButtonUI:e.ui=e.ui+"-toolbar"),this.callParent(arguments)},applyDefaults:function(e){return Ext.isString(e)||(e=this.callParent(arguments)),e}}),Ext.define("Ext.container.Monitor",{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,disabled:0,constructor:function(e){Ext.apply(this,e)},bind:function(e){var t=this;t.target=e,e.on("beforedestroy",t.disable,t),t.onContainerAdd(e)},unbind:function(){var e=this,t=e.target;t&&t.un("beforedestroy",e.disable,e),e.items=null},disable:function(){++this.disabled},enable:function(){this.disabled>0&&--this.disabled},handleAdd:function(e,t){this.disabled||(t.is(this.selector)&&this.onItemAdd(t.ownerCt,t),t.isQueryable&&this.onContainerAdd(t))},onItemAdd:function(e,t){var n=this,r=n.items,i=n.addHandler;n.disabled||(i&&i.call(n.scope||t,t),r&&r.add(t))},onItemRemove:function(e,t){var n=this,r=n.items,i=n.removeHandler;n.disabled||(i&&i.call(n.scope||t,t),r&&r.remove(t))},onContainerAdd:function(e,t){var n=this,r,i,s=n.handleAdd,o=n.handleRemove,u,a;e.isContainer&&(e.on("add",s,n),e.on("dockedadd",s,n),e.on("remove",o,n),e.on("dockedremove",o,n));if(t!==!0){r=e.query(n.selector);for(u=0,i=r.length;u<i;++u)a=r[u],n.onItemAdd(a.ownerCt,a)}r=e.query(">container");for(u=0,i=r.length;u<i;++u)n.onContainerAdd(r[u],!0)},handleRemove:function(e,t){var n=this;n.disabled||(t.is(n.selector)&&n.onItemRemove(e,t),t.isQueryable&&n.onContainerRemove(e,t))},onContainerRemove:function(e,t){var n=this,r,i,s,o;if(!t.isDestroyed&&!t.destroying&&t.isContainer){n.removeCtListeners(t),r=t.query(n.selector);for(i=0,s=r.length;i<s;++i)o=r[i],n.onItemRemove(o.ownerCt,o);r=t.query("container");for(i=0,s=r.length;i<s;++i)n.removeCtListeners(r[i])}else n.invalidateItems()},removeCtListeners:function(e){var t=this;e.un("add",t.handleAdd,t),e.un("dockedadd",t.handleAdd,t),e.un("remove",t.handleRemove,t),e.un("dockedremove",t.handleRemove,t)},getItems:function(){var e=this,t=e.items;return t||(t=e.items=new Ext.util.MixedCollection,t.addAll(e.target.query(e.selector))),t},invalidateItems:function(){this.items=null}}),Ext.define("Ext.container.Viewport",{extend:Ext.container.Container,alias:"widget.viewport",alternateClassName:"Ext.Viewport",isViewport:!0,ariaRole:"application",preserveElOnDestroy:!0,viewportCls:Ext.baseCSSPrefix+"viewport",initComponent:function(){var e=this,t=document.body.parentNode,n=e.el=Ext.getBody();Ext.getScrollbarSize(),e.width=e.height=undefined,e.callParent(arguments),Ext.fly(t).addCls(e.viewportCls),e.autoScroll&&(Ext.fly(t).setStyle(e.getOverflowStyle()),delete e.autoScroll),n.setHeight=n.setWidth=Ext.emptyFn,n.dom.scroll="no",e.allowDomMove=!1,e.renderTo=e.el},applyTargetCls:function(e){this.el.addCls(e)},onRender:function(){var e=this;e.callParent(arguments),e.width=Ext.Element.getViewportWidth(),e.height=Ext.Element.getViewportHeight()},afterFirstLayout:function(){var e=this;e.callParent(arguments),setTimeout(function(){Ext.EventManager.onWindowResize(e.fireResize,e)},1)},fireResize:function(e,t){(e!=this.width||t!=this.height)&&this.setSize(e,t)},initHierarchyState:function(e){this.callParent([this.hierarchyState=Ext.rootHierarchyState])},beforeDestroy:function(){var e=this;e.removeUIFromElement(),e.el.removeCls(e.baseCls),Ext.fly(document.body.parentNode).removeCls(e.viewportCls),e.callParent()}}),Ext.define("Ext.data.IdGenerator",{isGenerator:!0,constructor:function(e){var t=this;Ext.apply(t,e),t.id&&(Ext.data.IdGenerator.all[t.id]=t)},getRecId:function(e){return e.modelName+"-"+e.internalId},statics:{all:{},get:function(e){var t,n,r;if(typeof e=="string")n=r=e,e=null;else{if(e.isGenerator)return e;n=e.id||e.type,r=e.type}return t=this.all[n],t||(t=Ext.create("idgen."+r,e)),t}}}),Ext.define("Ext.data.SortTypes",{singleton:!0,none:Ext.identityFn,stripTagsRE:/<\/?[^>]+>/gi,asText:function(e){return String(e).replace(this.stripTagsRE,"")},asUCText:function(e){return String(e).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(e){return String(e).toUpperCase()},asDate:function(e){return e?Ext.isDate(e)?e.getTime():Date.parse(String(e)):0},asFloat:function(e){var t=parseFloat(String(e).replace(/,/g,""));return isNaN(t)?0:t},asInt:function(e){var t=parseInt(String(e).replace(/,/g,""),10);return isNaN(t)?0:t}}),Ext.define("Ext.data.Types",{singleton:!0},function(){var e=Ext.data.SortTypes;Ext.apply(Ext.data.Types,{stripRe:/[\$,%]/g,AUTO:{sortType:e.none,type:"auto"},STRING:{convert:function(e){var t=this.useNull?null:"";return e===undefined||e===null?t:String(e)},sortType:e.asUCString,type:"string"},INT:{convert:function(e){return typeof e=="number"?parseInt(e):e!==undefined&&e!==null&&e!==""?parseInt(String(e).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:e.none,type:"int"},FLOAT:{convert:function(e){return typeof e=="number"?e:e!==undefined&&e!==null&&e!==""?parseFloat(String(e).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:e.none,type:"float"},BOOL:{convert:function(e){return typeof e=="boolean"?e:!this.useNull||e!==undefined&&e!==null&&e!==""?e==="true"||e==1:null},sortType:e.none,type:"bool"},DATE:{convert:function(e){var t=this.dateReadFormat||this.dateFormat,n;return e?e instanceof Date?e:t?Ext.Date.parse(e,t):(n=Date.parse(e),n?new Date(n):null):null},sortType:e.asDate,type:"date"}}),Ext.apply(Ext.data.Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})}),Ext.define("Ext.data.Field",{alias:"data.field",isField:!0,constructor:function(e){var t=this,n=Ext.data.Types,r;Ext.isString(e)&&(e={name:e}),Ext.apply(t,e),r=t.sortType,t.type?Ext.isString(t.type)&&(t.type=n[t.type.toUpperCase()]||n.AUTO):t.type=n.AUTO,Ext.isString(r)?t.sortType=Ext.data.SortTypes[r]:Ext.isEmpty(r)&&(t.sortType=t.type.sortType),e.hasOwnProperty("convert")?!t.convert&&t.type.convert&&!e.hasOwnProperty("defaultValue")&&(t.defaultValue=t.type.convert(t.defaultValue)):t.convert=t.type.convert,e.convert&&(t.hasCustomConvert=!0)},dateFormat:null,dateReadFormat:null,dateWriteFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0,persist:!0}),Ext.define("Ext.data.Errors",{extend:Ext.util.MixedCollection,isValid:function(){return this.length===0},getByField:function(e){var t=[],n,r;for(r=0;r<this.length;r++)n=this.items[r],n.field==e&&t.push(n);return t}}),Ext.define("Ext.data.validations",{singleton:!0,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address",emailRe:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,presence:function(e,t){return arguments.length===1&&(t=e),!!t||t===0||t===!1},length:function(e,t){if(t===undefined||t===null)return!1;var n=t.length,r=e.min,i=e.max;return r&&n<r||i&&n>i?!1:!0},email:function(e,t){return Ext.data.validations.emailRe.test(t)},format:function(e,t){return!!e.matcher&&!!e.matcher.test(t)},inclusion:function(e,t){return e.list&&Ext.Array.indexOf(e.list,t)!=-1},exclusion:function(e,t){return e.list&&Ext.Array.indexOf(e.list,t)==-1}}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",mixins:{observable:Ext.util.Observable},compareConvertFields:function(e,t){var n=e.convert&&e.type&&e.convert!==e.type.convert,r=t.convert&&t.type&&t.convert!==t.type.convert;return n&&!r?1:!n&&r?-1:0},itemNameFn:function(e){return e.name},onClassExtended:function(e,t,n){var r=n.onBeforeCreated;n.onBeforeCreated=function(e,t){var i=this,s=Ext.getClassName(e),o=e.prototype,u=e.prototype.superclass,a=t.validations||[],f=t.fields||[],l,c=t.associations||[],h=function(e,t){var n=0,r,i;if(e){e=Ext.Array.from(e);for(r=e.length;n<r;++n)i=e[n],Ext.isObject(i)||(i={model:i}),i.type=t,c.push(i)}},p=t.idgen,d=new Ext.util.MixedCollection(!1,o.itemNameFn),v=new Ext.util.MixedCollection(!1,o.itemNameFn),m=u.validations,g=u.fields,y=u.associations,b,w,E,S=[],x="idProperty"in t?t.idProperty:o.idProperty,T=x?x.isField?x:new Ext.data.Field(x):null,N=!1,C=function(e,t,n){var r,i;d.events.add.firing?(i=e,r=t):(r=n,i=t.originalIndex),r.originalIndex=i,T&&(r.mapping&&r.mapping===T.mapping||r.name===T.name)&&(o.idField=r,N=!0,r.defaultValue=undefined)},k=t.proxy,L=function(){d.sortBy(o.compareConvertFields)};e.modelName=s,o.modelName=s,m&&(a=m.concat(a)),t.validations=a,g&&(f=g.items.concat(f)),d.on({add:C,replace:C});for(w=0,E=f.length;w<E;++w)l=f[w],d.add(l.isField?l:new Ext.data.Field(l));T&&!N&&(o.idField=T,T.defaultValue=undefined,d.add(T)),L(),d.on({add:L,replace:L}),t.fields=d,p&&(t.idgen=Ext.data.IdGenerator.get(p)),h(t.belongsTo,"belongsTo"),delete t.belongsTo,h(t.hasMany,"hasMany"),delete t.hasMany,h(t.hasOne,"hasOne"),delete t.hasOne,y&&(c=y.items.concat(c));for(w=0,E=c.length;w<E;++w)S.push("association."+c[w].type.toLowerCase());k?k.isProxy||S.push("proxy."+(k.type||k)):e.prototype.proxy||(e.prototype.proxy=e.prototype.defaultProxyType,S.push("proxy."+e.prototype.defaultProxyType)),Ext.require(S,function(){Ext.ModelManager.registerType(s,e);for(w=0,E=c.length;w<E;++w)b=c[w],b.isAssociation?b=Ext.applyIf({ownerModel:s,associatedModel:b.model},b.initialConfig):Ext.apply(b,{ownerModel:s,associatedModel:b.model}),Ext.ModelManager.getModel(b.model)===undefined?Ext.ModelManager.registerDeferredAssociation(b):v.add(Ext.data.association.Association.create(b));t.associations=v,r.call(i,e,t,n),k&&k.isProxy&&e.setProxy(k),Ext.ModelManager.onModelDefined(e)})}},inheritableStatics:{setProxy:function(e){return e.isProxy||(typeof e=="string"&&(e={type:e}),e=Ext.createByAlias("proxy."+e.type,e)),e.setModel(this),this.proxy=this.prototype.proxy=e,e},getProxy:function(){var e=this.proxy;return e?e:(e=this.prototype.proxy,e.isProxy&&(e=e.clone()),this.setProxy(e))},setFields:function(e,t,n){var r=this,i,s,o=!1,u=r.prototype,a=u.fields,f=u.superclass.fields,l,c;t&&(u.idProperty=t,s=t.isField?t:new Ext.data.Field(t)),n&&(u.clientIdProperty=n),a?a.clear():a=r.prototype.fields=new Ext.util.MixedCollection(!1,function(e){return e.name}),f&&(e=f.items.concat(e));for(c=0,l=e.length;c<l;c++)i=new Ext.data.Field(e[c]),s&&(i.mapping&&i.mapping===s.mapping||i.name===s.name)&&(o=!0,i.defaultValue=undefined),a.add(i);return s&&!o&&(s.defaultValue=undefined,a.add(s)),r.fields=a,a},getFields:function(){return this.prototype.fields.items},load:function(e,t){t=Ext.apply({},t),t=Ext.applyIf(t,{action:"read",id:e});var n=new Ext.data.Operation(t),r=t.scope||this,i;i=function(n){var i=null,s=n.wasSuccessful();s?(i=n.getRecords()[0],i.hasId()||i.setId(e),Ext.callback(t.success,r,[i,n])):Ext.callback(t.failure,r,[i,n]),Ext.callback(t.callback,r,[i,n,s])},this.getProxy().read(n,i,this)}},statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(e){var t=[this.PREFIX,"-",this.AUTO_ID++].join("");return e.phantom=!0,e.internalId=t,t}},idgen:{isGenerator:!0,type:"default",generate:function(){return null},getRecId:function(e){return e.modelName+"-"+e.internalId}},editing:!1,dirty:!1,persistenceProperty:"data",evented:!1,isModel:!0,phantom:!1,idProperty:"id",clientIdProperty:null,defaultProxyType:"ajax",emptyData:[],constructor:function(e,t,n,r){var i=this,s=t||t===0,o,u,a,f,l,c,h,p,d=i.idProperty,v=i.idField,m;i.raw=n||e,i.modified={},p=i[i.persistenceProperty]=r||{},i.data=i[i.persistenceProperty],i.mixins.observable.constructor.call(i);if(!r){e?!s&&d&&(t=e[d],o=t||t===0):e=i.emptyData,u=i.fields.items,a=u.length,m=0;if(Ext.isArray(e))for(;m<a;m++)f=u[m],l=f.name,c=e[f.originalIndex],c===undefined&&(c=f.defaultValue),f.convert&&(c=f.convert(c,i)),c!==undefined&&(p[l]=c);else for(;m<a;m++)f=u[m],l=f.name,c=e[l],c===undefined&&(c=f.defaultValue),f.convert&&(c=f.convert(c,i)),c!==undefined&&(p[l]=c)}i.stores=[],s?(o=!0,p[d]=v&&v.convert?v.convert(t):t):o||(h=i.idgen.generate(),h!=null&&(i.preventInternalUpdate=!0,i.setId(h),delete i.preventInternalUpdate)),i.internalId=o?t:Ext.data.Model.id(i),typeof i.init=="function"&&i.init(),i.id=i.idgen.getRecId(i)},get:function(e){return this[this.persistenceProperty][e]},_singleProp:{},set:function(e,t){var n=this,r=n[n.persistenceProperty],i=n.fields,s=n.modified,o=typeof e=="string",u,a,f,l,c,h,p,d,v,m;o?(m=n._singleProp,m[e]=t):m=e;for(h in m)if(m.hasOwnProperty(h)){v=m[h],i&&(a=i.get(h))&&a.convert&&(v=a.convert(v,n)),u=r[h];if(n.isEqual(u,v))continue;r[h]=v,(c||(c=[])).push(h);if(a&&a.persist)if(s.hasOwnProperty(h)){if(n.isEqual(s[h],v)){delete s[h],n.dirty=!1;for(l in s)if(s.hasOwnProperty(l)){n.dirty=!0;break}}}else n.dirty=!0,s[h]=u;h==n.idProperty&&(f=!0,p=u,d=v)}return o&&delete m[e],f&&n.changeId(p,d),!n.editing&&c&&n.afterEdit(c),c||null},copyFrom:function(e){var t=this,n=t.fields.items,r=n.length,i=[],s,o=0,u,a,f=t.idProperty,l,c;if(e){u=t[t.persistenceProperty],a=e[e.persistenceProperty];for(;o<r;o++)s=n[o],l=s.name,l!=f&&(c=a[l],c!==undefined&&!t.isEqual(u[l],c)&&(u[l]=c,i.push(l)));t.phantom&&!e.phantom&&(t.beginEdit(),t.setId(e.getId()),t.endEdit(!0),t.commit(!0))}return i},isEqual:function(e,t){return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t},beginEdit:function(){var e=this,t,n,r;if(!e.editing){e.editing=!0,e.dirtySave=e.dirty,r=e[e.persistenceProperty],n=e.dataSave={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=e.modified,n=e.modifiedSave={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t])}},cancelEdit:function(){var e=this;e.editing&&(e.editing=!1,e.modified=e.modifiedSave,e[e.persistenceProperty]=e.dataSave,e.dirty=e.dirtySave,e.modifiedSave=e.dataSave=e.dirtySave=null)},endEdit:function(e,t){var n=this,r,i;e=e===!0,n.editing&&(n.editing=!1,r=n.dataSave,n.modifiedSave=n.dataSave=n.dirtySave=null,e||(t||(t=n.getModifiedFieldNames(r)),i=n.dirty||t.length>0,i&&n.afterEdit(t)))},getModifiedFieldNames:function(e){var t=this,n=t[t.persistenceProperty],r=[],i;e=e||t.dataSave;for(i in n)n.hasOwnProperty(i)&&(t.isEqual(n[i],e[i])||r.push(i));return r},getChanges:function(){var e=this.modified,t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=this.get(n));return t},isModified:function(e){return this.modified.hasOwnProperty(e)},setDirty:function(){var e=this,t=e.fields.items,n=t.length,r,i,s;e.dirty=!0;for(s=0;s<n;s++)r=t[s],r.persist&&(i=r.name,e.modified[i]=e.get(i))},reject:function(e){var t=this,n=t.modified,r;for(r in n)n.hasOwnProperty(r)&&typeof n[r]!="function"&&(t[t.persistenceProperty][r]=n[r]);t.dirty=!1,t.editing=!1,t.modified={},e!==!0&&t.afterReject()},commit:function(e,t){var n=this;n.phantom=n.dirty=n.editing=!1,n.modified={},e!==!0&&n.afterCommit(t)},copy:function(e){var t=this;return new t.self(t.raw,e,null,Ext.apply({},t[t.persistenceProperty]))},setProxy:function(e){return e.isProxy||(typeof e=="string"&&(e={type:e}),e=Ext.createByAlias("proxy."+e.type,e)),e.setModel(this.self),this.proxy=e,e},getProxy:function(){return this.hasOwnProperty("proxy")?this.proxy:this.self.getProxy()},validate:function(){var e=new Ext.data.Errors,t=this.validations,n=Ext.data.validations,r,i,s,o,u,a;if(t){r=t.length;for(a=0;a<r;a++)i=t[a],s=i.field||i.name,u=i.type,o=n[u](i,this.get(s)),o||e.add({field:s,message:i.message||n[u+"Message"]})}return e},isValid:function(){return this.validate().isValid()},save:function(e){e=Ext.apply({},e);var t=this,n=t.phantom?"create":"update",r=e.scope||t,i=t.stores,s=0,o,u,a,f;return Ext.apply(e,{records:[t],action:n}),a=new Ext.data.Operation(e),f=function(n){var a=n.wasSuccessful();if(a){for(o=i.length;s<o;s++)u=i[s],u.fireEvent("write",u,n),u.fireEvent("datachanged",u);Ext.callback(e.success,r,[t,n])}else Ext.callback(e.failure,r,[t,n]);Ext.callback(e.callback,r,[t,n,a])},t.getProxy()[n](a,f,t),t},destroy:function(e){e=Ext.apply({records:[this],action:"destroy"},e);var t=this,n=t.phantom!==!0,r=e.scope||t,i,s=0,o,u,a,f,l;return f=new Ext.data.Operation(e),l=function(f){a=[t,f],i=Ext.Array.clone(t.stores);if(f.wasSuccessful()){for(o=i.length;s<o;s++)u=i[s],u.remove?u.remove(t,!0):u.fireEvent("bulkremove",u,[t],[u.indexOf(t)],!1),n&&u.fireEvent("write",u,f);t.clearListeners(),Ext.callback(e.success,r,a)}else Ext.callback(e.failure,r,a);Ext.callback(e.callback,r,a)},n?t.getProxy().destroy(f,l,t):(f.complete=f.success=!0,f.resultSet=t.getProxy().reader.nullResultSet,l(f)),t},getId:function(){return this.get(this.idField.name)},getObservableId:function(){return this.id},setId:function(e){this.set(this.idProperty,e)},changeId:function(e,t){var n=this,r,i,s;if(!n.preventInternalUpdate){r=n.hasId(e),i=n.hasId(t),s=n.internalId,n.phantom=!i;if(i!==r||i&&r)n.internalId=i?t:Ext.data.Model.id(n);n.fireEvent("idchanged",n,e,t,s),n.callStore("onIdChanged",e,t,s)}},hasId:function(e){return arguments.length===0&&(e=this.getId()),!!e||e===0},join:function(e){var t=this;t.stores.length?Ext.Array.include(this.stores,e):t.stores[0]=e,this.store=this.stores[0]},unjoin:function(e){Ext.Array.remove(this.stores,e),this.store=this.stores[0]||null},afterEdit:function(e){this.callStore("afterEdit",e)},afterReject:function(){this.callStore("afterReject")},afterCommit:function(e){this.callStore("afterCommit",e)},callStore:function(e){var t=Ext.Array.clone(arguments),n=this.stores,r=0,i=n.length,s;t[0]=this;for(;r<i;++r)s=n[r],s&&Ext.isFunction(s[e])&&s[e].apply(s,t)},getData:function(e){var t=this,n=t.fields.items,r=n.length,i={},s,o;for(o=0;o<r;o++)s=n[o].name,i[s]=t.get(s);return e===!0&&Ext.apply(i,t.getAssociatedData()),i},getAssociatedData:function(){return this.prepareAssociatedData({},1)},prepareAssociatedData:function(e,t){var n=this,r=n.associations.items,i=r.length,s={},o=[],u=[],a=[],f,l,c,h,p,d,v,m,g,y,b,w,E,S;for(b=0;b<i;b++){y=r[b],m=y.associationId,v=e[m];if(v&&v!==t)continue;e[m]=t,E=y.type,S=y.name;if(E=="hasMany"){f=n[y.storeName],s[S]=[];if(f&&f.getCount()>0){l=f.data.items,g=l.length;for(w=0;w<g;w++)c=l[w],s[S][w]=c.getData(),o.push(c),u.push(S),a.push(w)}}else if(E=="belongsTo"||E=="hasOne")c=n[y.instanceName],c!==undefined&&(s[S]=c.getData(),o.push(c),u.push(S),a.push(-1))}for(b=0,g=o.length;b<g;++b)c=o[b],h=s[u[b]],p=a[b],d=c.prepareAssociatedData(e,t+1),p===-1?Ext.apply(h,d):Ext.apply(h[p],d);return s}}),Ext.define("Ext.data.proxy.Server",{extend:Ext.data.proxy.Proxy,alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,constructor:function(e){var t=this;e=e||{},t.callParent([e]),t.extraParams=e.extraParams||{},t.api=Ext.apply({},e.api||t.api),t.nocache=t.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(e,t){this.extraParams[e]=t},buildRequest:function(e){var t=this,n=e.params=Ext.apply({},e.params,t.extraParams),r;return Ext.applyIf(n,t.getParams(e)),e.id!==undefined&&n[t.idParam]===undefined&&(n[t.idParam]=e.id),r=new Ext.data.Request({params:n,action:e.action,records:e.records,operation:e,url:e.url,proxy:t}),r.url=t.buildUrl(r),e.request=r,r},processResponse:function(e,t,n,r,i,s){var o=this,u,a;e===!0?(u=o.getReader(),u.applyDefaults=t.action==="read",a=u.read(o.extractResponseData(r)),a.success!==!1?(Ext.apply(t,{response:r,resultSet:a}),t.commitRecords(a.records),t.setCompleted(),t.setSuccessful()):(t.setException(a.message),o.fireEvent("exception",this,r,t))):(o.setException(t,r),o.fireEvent("exception",this,r,t)),typeof i=="function"&&i.call(s||o,t),o.afterRequest(n,e)},setException:function(e,t){e.setException({status:t.status,statusText:t.statusText})},extractResponseData:Ext.identityFn,applyEncoding:function(e){return Ext.encode(e)},encodeSorters:function(e){var t=[],n=e.length,r=0;for(;r<n;r++)t[r]={property:e[r].property,direction:e[r].direction};return this.applyEncoding(t)},encodeFilters:function(e){var t=[],n=e.length,r=0;for(;r<n;r++)t[r]={property:e[r].property,value:e[r].value};return this.applyEncoding(t)},getParams:function(e){var t=this,n={},r=Ext.isDefined,i=e.groupers,s=e.sorters,o=e.filters,u=e.page,a=e.start,f=e.limit,l=t.simpleSortMode,c=t.simpleGroupMode,h=t.pageParam,p=t.startParam,d=t.limitParam,v=t.groupParam,m=t.groupDirectionParam,g=t.sortParam,y=t.filterParam,b=t.directionParam,w,E;return h&&r(u)&&(n[h]=u),p&&r(a)&&(n[p]=a),d&&r(f)&&(n[d]=f),w=v&&i&&i.length>0,w&&(c?(n[v]=i[0].property,n[m]=i[0].direction||"ASC"):n[v]=t.encodeSorters(i)),g&&s&&s.length>0&&(l?(E=0,s.length>1&&w&&(E=1),n[g]=s[E].property,n[b]=s[E].direction):n[g]=t.encodeSorters(s)),y&&o&&o.length>0&&(n[y]=t.encodeFilters(o)),n},buildUrl:function(e){var t=this,n=t.getUrl(e);return t.noCache&&(n=Ext.urlAppend(n,Ext.String.format("{0}={1}",t.cacheString,Ext.Date.now()))),n},getUrl:function(e){return e.url||this.api[e.action]||this.url},doRequest:function(e,t,n){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}}),Ext.define("Ext.data.proxy.Ajax",{extend:Ext.data.proxy.Server,alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},binary:!1,paramsAsJson:!1,doRequest:function(e,t,n){var r=this,i=r.getWriter(),s=r.buildRequest(e),o=r.getMethod(s);return e.allowWrite()&&(s=i.write(s)),Ext.apply(s,{binary:r.binary,headers:r.headers,timeout:r.timeout,scope:r,callback:r.createRequestCallback(s,e,t,n),method:o,disableCaching:!1}),o.toUpperCase()!=="GET"&&r.paramsAsJson&&(s=Ext.apply({jsonData:s.params},s),delete s.params),Ext.Ajax.request(s),s},getMethod:function(e){var t=this.actionMethods,n=e.action,r;return t&&(r=t[n]),r||this.defaultActionMethods[n]},createRequestCallback:function(e,t,n,r){var i=this;return function(s,o,u){i.processResponse(o,t,e,u,n,r)}}}),Ext.define("Ext.data.proxy.Client",{extend:Ext.data.proxy.Proxy,alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){}}),Ext.define("Ext.data.proxy.Memory",{extend:Ext.data.proxy.Client,alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",constructor:function(e){this.callParent([e]),this.setReader(this.reader)},updateOperation:function(e,t,n){var r=0,i=e.getRecords(),s=i.length;for(r;r<s;r++)i[r].commit();e.setCompleted(),e.setSuccessful(),Ext.callback(t,n||this,[e])},create:function(){this.updateOperation.apply(this,arguments)},update:function(){this.updateOperation.apply(this,arguments)},destroy:function(){this.updateOperation.apply(this,arguments)},read:function(e,t,n){var r=this,i=e.resultSet=r.getReader().read(r.data),s=i.records,o=e.sorters,u=e.groupers,a=e.filters;e.setCompleted(),i.success&&(a&&a.length&&(s=i.records=Ext.Array.filter(s,Ext.util.Filter.createFilterFn(a)),i.total=s.length),u&&u.length&&(o=o?o.concat(u):o),o&&o.length&&(i.records=Ext.Array.sort(s,Ext.util.Sortable.createComparator(o))),r.enablePaging&&e.start!==undefined&&e.limit!==undefined&&(e.start>=i.total?(i.success=!1,i.count=0,i.records=[]):(i.records=Ext.Array.slice(i.records,e.start,e.start+e.limit),i.count=i.records.length))),i.success?e.setSuccessful():r.fireEvent("exception",r,null,e),Ext.callback(t,n||r,[e])},clear:Ext.emptyFn}),Ext.define("Ext.util.LruCache",{extend:Ext.util.HashMap,constructor:function(e){Ext.apply(this,e),this.callParent([e])},add:function(e,t){var n=this,r=n.findKey(t),i;return r?(n.unlinkEntry(i=n.map[r]),i.prev=n.last,i.next=null):i={prev:n.last,next:null,key:e,value:t},n.last?n.last.next=i:n.first=i,n.last=i,n.callParent([e,i]),n.prune(),t},insertBefore:function(e,t,n){var r=this,i,s;return(n=this.map[this.findKey(n)])?(i=r.findKey(t),i?r.unlinkEntry(s=r.map[i]):s={prev:n.prev,next:n,key:e,value:t},n.prev?s.prev.next=s:r.first=s,s.next=n,n.prev=s,r.prune(),t):r.add(e,t)},get:function(e){var t=this.map[e];if(t)return t.next&&this.moveToEnd(t),t.value},removeAtKey:function(e){return this.unlinkEntry(this.map[e]),this.callParent(arguments)},clear:function(e){return this.first=this.last=null,this.callParent(arguments)},unlinkEntry:function(e){e&&(e.next?e.next.prev=e.prev:this.last=e.prev,e.prev?e.prev.next=e.next:this.first=e.next,e.prev=e.next=null)},moveToEnd:function(e){this.unlinkEntry(e),(e.prev=this.last)?this.last.next=e:this.first=e,this.last=e},getArray:function(e){var t=[],n=this.first;while(n)t.push(e?n.key:n.value),n=n.next;return t},each:function(e,t,n){var r=this,i=n?r.last:r.first,s=r.length;t=t||r;while(i){if(e.call(t,i.key,i.value,s)===!1)break;i=n?i.prev:i.next}return r},findKey:function(e){var t,n=this.map;for(t in n)if(n.hasOwnProperty(t)&&n[t].value===e)return t;return undefined},clone:function(){var e=new this.self(this.initialConfig),t=this.map,n;e.suspendEvents();for(n in t)t.hasOwnProperty(n)&&e.add(n,t[n].value);return e.resumeEvents(),e},prune:function(){var e=this,t=e.maxSize?e.length-e.maxSize:0;if(t>0)for(;e.first&&t;t--)e.removeAtKey(e.first.key)}}),Ext.define("Ext.data.PageMap",{extend:Ext.util.LruCache,clear:function(e){var t=this;t.pageMapGeneration=(t.pageMapGeneration||0)+1,t.callParent(arguments)},forEach:function(e,t){var n=this,r=Ext.Object.getKeys(n.map),i=r.length,s,o,u,a,f;for(s=0;s<i;s++)r[s]=Number(r[s]);Ext.Array.sort(r),t=t||n;for(s=0;s<i;s++){u=r[s],a=n.getPage(u),f=a.length;for(o=0;o<f;o++)if(
e.call(t,a[o],(u-1)*n.pageSize+o)===!1)return}},findBy:function(e,t){var n=this,r=null;return t=t||n,n.forEach(function(n,i){if(e.call(t,n,i))return r=n,!1}),r},findIndexBy:function(e,t){var n=this,r=-1;return t=t||n,n.forEach(function(n,i){if(e.call(t,n))return r=i,!1}),r},getPageFromRecordIndex:function(){return Ext.data.Store.prototype.getPageFromRecordIndex.apply(this,arguments)},addAll:function(e){this.addPage(1,e)},addPage:function(e,t){var n=this,r=e+Math.floor((t.length-1)/n.pageSize),i,s;for(i=0;e<=r;e++,i+=n.pageSize)s=Ext.Array.slice(t,i,i+n.pageSize),n.add(e,s),n.fireEvent("pageAdded",e,s)},getCount:function(){var e=this.callParent();return e&&(e=(e-1)*this.pageSize+this.last.value.length),e},indexOf:function(e){return e?e.index:-1},insert:function(){},remove:function(){},removeAt:function(){},getPage:function(e){return this.get(e)},hasRange:function(e,t){var n=this.getPageFromRecordIndex(e),r=this.getPageFromRecordIndex(t);for(;n<=r;n++)if(!this.hasPage(n))return!1;return!0},hasPage:function(e){return!!this.get(e)},getAt:function(e){return this.getRange(e,e)[0]},getRange:function(e,t){this.hasRange(e,t)||Ext.Error.raise("PageMap asked for range which it does not have");var n=this,r=n.getPageFromRecordIndex(e),i=n.getPageFromRecordIndex(t),s=(r-1)*n.pageSize,o=i*n.pageSize-1,u=r,a=[],f,l,c,h=0,p;for(;u<=i;u++)u==r?(f=e-s,c=!0):(f=0,c=!1),u==i&&(l=n.pageSize-(o-t),c=!0),c?Ext.Array.push(a,Ext.Array.slice(n.getPage(u),f,l)):Ext.Array.push(a,n.getPage(u));for(p=a.length;h<p;h++)a[h].index=e++;return a}}),Ext.define("Ext.data.Group",{extend:Ext.util.Observable,key:undefined,dirty:!0,constructor:function(){this.callParent(arguments),this.records=[]},contains:function(e){return Ext.Array.indexOf(this.records,e)!==-1},add:function(e){Ext.Array.push(this.records,e),this.dirty=!0},remove:function(e){Ext.isArray(e)||(e=[e]);var t=e.length,n;for(n=0;n<t;++n)Ext.Array.remove(this.records,e[n]);this.dirty=!0},isDirty:function(){return this.dirty},hasAggregate:function(){return!!this.aggregate},setDirty:function(){this.dirty=!0},commit:function(){this.dirty=!1},isCollapsed:function(){return this.collapsed},getAggregateRecord:function(e){var t=this,n;if(e===!0||t.dirty||!t.aggregate)n=t.store.model,t.aggregate=new n,t.aggregate.isSummary=!0;return t.aggregate}}),Ext.define("Ext.data.Store",{extend:Ext.data.AbstractStore,alias:"store.store",remoteSort:!1,remoteFilter:!1,remoteGroup:!1,groupField:undefined,groupDir:"ASC",trailingBufferZone:25,leadingBufferZone:200,pageSize:undefined,currentPage:1,clearOnPageLoad:!0,loading:!1,sortOnFilter:!0,buffered:!1,purgePageCount:5,clearRemovedOnLoad:!0,defaultPageSize:25,defaultViewSize:100,addRecordsOptions:{addRecords:!0},statics:{recordIdFn:function(e){return e.internalId},recordIndexFn:function(e){return e.index},grouperIdFn:function(e){return e.id||e.property},groupIdFn:function(e){return e.key}},constructor:function(e){e=Ext.apply({},e);var t=this,n=e.groupers||t.groupers,r=e.groupField||t.groupField,i,s;s=e.data||t.data,s&&(t.inlineData=s,delete e.data);if(!n&&r){n=[{property:r,direction:e.groupDir||t.groupDir}];if(e.getGroupString||t.getGroupString!==Ext.data.Store.prototype.getGroupString)n[0].getGroupString=function(e){return t.getGroupString(e)}}delete e.groupers,t.groupers=new Ext.util.MixedCollection(!1,Ext.data.Store.grouperIdFn),t.groupers.addAll(t.decodeGroupers(n)),t.groups=new Ext.util.MixedCollection(!1,Ext.data.Store.groupIdFn),t.callParent([e]),t.buffered?(t.data=new Ext.data.PageMap({store:t,keyFn:Ext.data.Store.recordIdFn,pageSize:t.pageSize,maxSize:t.purgePageCount,listeners:{clear:t.onPageMapClear,scope:t}}),t.pageRequests={},t.remoteSort=t.remoteGroup=t.remoteFilter=!0,t.sortOnLoad=!1,t.filterOnLoad=!1):t.data=new Ext.util.MixedCollection({getKey:Ext.data.Store.recordIdFn,maintainIndices:!0}),t.remoteGroup&&(t.remoteSort=!0),t.sorters.insert(0,t.groupers.getRange()),i=t.proxy,s=t.inlineData,!t.buffered&&!t.pageSize&&(t.pageSize=t.defaultPageSize),s?(i instanceof Ext.data.proxy.Memory?(i.data=s,t.read()):t.add.apply(t,[s]),t.sorters.items.length&&!t.remoteSort&&t.group(null,null,!0),delete t.inlineData):t.autoLoad&&Ext.defer(t.load,1,t,[typeof t.autoLoad=="object"?t.autoLoad:undefined])},onBeforeSort:function(){var e=this.groupers;e.getCount()>0&&this.sort(e.items,"prepend",!1)},decodeGroupers:function(e){Ext.isArray(e)||(e===undefined?e=[]:e=[e]);var t=e.length,n=Ext.util.Grouper,r,i,s=[];for(i=0;i<t;i++)r=e[i],r instanceof n?s.push(r):(Ext.isString(r)&&(r={property:r}),r=Ext.apply({root:"data",direction:"ASC"},r),r.fn&&(r.sorterFn=r.fn),typeof r=="function"&&(r={sorterFn:r}),s.push(new n(r)));return s},group:function(e,t,n){var r=this,i,s;e&&(r.sorters.removeAll(r.groupers.items),Ext.isArray(e)?s=e:Ext.isObject(e)?s=[e]:Ext.isString(e)&&(i=r.groupers.get(e),i?t===undefined?i.toggle():i.setDirection(t):(i={property:e,direction:t||"ASC"},s=[i])),s&&s.length&&(r.groupers.clear(),r.groupers.addAll(r.decodeGroupers(s))),r.sorters.insert(0,r.groupers.items)),r.remoteGroup?r.buffered?(r.data.clear(),r.loadPage(1,{groupChange:!0})):r.load({scope:r,callback:n?null:r.fireGroupChange}):(r.doSort(r.generateComparator()),r.constructGroups(),n||r.fireGroupChange())},getGroupField:function(){var e=this.groupers.first(),t;return e&&(t=e.property),t},constructGroups:function(){var e=this,t=this.data.items,n=t.length,r=e.groups,i,s,o,u;r.clear();if(e.isGrouped())for(s=0;s<n;++s)u=t[s],i=e.getGroupString(u),o=r.get(i),o||(o=new Ext.data.Group({key:i,store:e}),r.add(o)),o.add(u)},clearGrouping:function(){var e=this,t=e.groupers.items,n=t.length,r;for(r=0;r<n;r++)e.sorters.remove(t[r]);e.groupers.clear(),e.remoteGroup?e.buffered?(e.data.clear(),e.loadPage(1,{groupChange:!0})):e.load({scope:e,callback:e.fireGroupChange}):(e.groups.clear(),e.sorters.length?e.sort():(e.fireEvent("datachanged",e),e.fireEvent("refresh",e)),e.fireGroupChange())},isGrouped:function(){return this.groupers.getCount()>0},fireGroupChange:function(){this.fireEvent("groupchange",this,this.groupers)},getGroups:function(e){var t=this.data.items,n=t.length,r=[],i={},s,o,u,a;for(a=0;a<n;a++)s=t[a],o=this.getGroupString(s),u=i[o],u===undefined&&(u={name:o,children:[]},r.push(u),i[o]=u),u.children.push(s);return e?i[e]:r},getGroupsForGrouper:function(e,t){var n=e.length,r=[],i,s,o,u,a;for(a=0;a<n;a++)o=e[a],s=t.getGroupString(o),s!==i&&(u={name:s,grouper:t,records:[]},r.push(u)),u.records.push(o),i=s;return r},getGroupsForGrouperIndex:function(e,t){var n=this,r=n.groupers,i=r.getAt(t),s=n.getGroupsForGrouper(e,i),o=s.length,u;if(t+1<r.length)for(u=0;u<o;u++)s[u].children=n.getGroupsForGrouperIndex(s[u].records,t+1);for(u=0;u<o;u++)s[u].depth=t;return s},getGroupData:function(e){var t=this;return e!==!1&&t.sort(),t.getGroupsForGrouperIndex(t.data.items,0)},getGroupString:function(e){var t=this.groupers.first();return t?t.getGroupString(e):""},insert:function(e,t){var n=this,r=!1,i,s,o,u=n.modelDefaults,a;Ext.isIterable(t)?a=[]:a=t=[t],s=t.length;if(s){for(i=0;i<s;i++)o=t[i],o.isModel||(o=n.createModel(o)),a[i]=o,u&&o.set(u),o.join(n),r=r||o.phantom===!0;n.data.insert(e,a),n.snapshot&&n.snapshot.addAll(a),n.requireSort&&(n.suspendEvents(),n.sort(),n.resumeEvents()),n.isGrouped()&&n.updateGroupsOnAdd(a),n.fireEvent("add",n,a,e),n.fireEvent("datachanged",n),n.autoSync&&r&&!n.autoSyncSuspended&&n.sync()}return a},updateGroupsOnAdd:function(e){var t=this,n=t.groups,r=e.length,i,s,o,u;for(i=0;i<r;++i)u=e[i],s=t.getGroupString(u),o=n.getByKey(s),o||(o=n.add(new Ext.data.Group({key:s,store:t}))),o.add(u)},updateGroupsOnRemove:function(e){var t=this,n=t.groups,r=e.length,i,s,o,u;for(i=0;i<r;++i)u=e[i],s=t.getGroupString(u),o=n.getByKey(s),o&&(o.remove(u),o.records.length===0&&n.remove(o))},updateGroupsOnUpdate:function(e,t){var n=this,r=n.getGroupField(),i=n.getGroupString(e),s=n.groups,o,u,a,f;if(t&&Ext.Array.contains(t,r)){n.buffered&&Ext.Error.raise({msg:"Cannot move records between groups in a buffered store record"}),a=s.items;for(u=0,o=a.length;u<o;++u){f=a[u];if(f.contains(e)){f.remove(e);break}}f=s.getByKey(i),f||(f=s.add(new Ext.data.Group({key:i,store:n}))),f.add(e),n.data.remove(e),n.data.insert(n.data.findInsertionIndex(e,n.generateComparator()),e)}else s.getByKey(i).setDirty()},add:function(e){var t=this,n,r,i;return Ext.isArray(e)?n=e:n=arguments,r=n.length,i=!t.remoteSort&&t.sorters&&t.sorters.items.length,i&&r===1?[t.addSorted(t.createModel(n[0]))]:(i&&(t.requireSort=!0),n=t.insert(t.data.length,n),delete t.requireSort,n)},addSorted:function(e){var t=this,n=t.data.findInsertionIndex(e,t.generateComparator());return t.insert(n,e),e},createModel:function(e){return e.isModel||(e=Ext.ModelManager.create(e,this.model)),e},onUpdate:function(e,t,n){this.isGrouped()&&this.updateGroupsOnUpdate(e,n)},each:function(e,t){var n=this.data.items,r=n.length,i,s;for(s=0;s<r;s++){i=n[s];if(e.call(t||i,i,s,r)===!1)break}},remove:function(e,t,n){t=t===!0;var r=this,i=!1,s=r.snapshot,o=r.data,u=0,a,f=[],l=[],c=[],h,p,d,v,m,g,y=!n&&r.hasListeners.remove;e.isModel?(e=[e],a=1):Ext.isIterable(e)?a=e.length:typeof e=="object"&&(m=!0,u=e.start,a=e.end+1,g=a-u);if(!m){for(u=0;u<a;++u)v=e[u],typeof v=="number"?(d=v,v=o.getAt(d)):d=r.indexOf(v),v&&d>-1&&f.push({record:v,index:d}),s&&s.remove(v);f=Ext.Array.sort(f,function(e,t){var n=e.index,r=t.index;return n===t.index2?0:n<r?-1:1}),u=0,a=f.length}if(!a)return;for(;u<a;u++)m?(v=o.getAt(u),d=u):(h=f[u],v=h.record,d=h.index),l.push(v),c.push(d),p=v.phantom!==!0,!t&&p&&(v.removedFrom=d,r.removed.push(v)),v.unjoin(r),d-=u,i=i||p,m||(o.removeAt(d),y&&r.fireEvent("remove",r,v,d,!!t));m&&o.removeRange(e.start,g),n||(r.fireEvent("bulkremove",r,l,c,!!t),r.fireEvent("datachanged",r)),!t&&r.autoSync&&i&&!r.autoSyncSuspended&&r.sync()},removeAt:function(e,t){var n=this,r=n.getCount();e<=r&&(arguments.length===1?n.remove([e]):t&&n.remove({start:e,end:Math.min(e+t,r)-1}))},removeAll:function(e){var t=this,n=t.snapshot,r=t.data;n&&n.removeAll(r.getRange()),t.buffered?r&&(e&&t.suspendEvent("clear"),r.clear(),e&&t.resumeEvent("clear")):(t.remove({start:0,end:t.getCount()-1},!1,e),e!==!0&&t.fireEvent("clear",t))},load:function(e){var t=this;return typeof e=="function"?e={callback:e}:e=Ext.apply({},e),t.remoteGroup&&!e.groupers&&t.groupers.items.length&&(e.groupers=t.groupers.items),e.page=e.page||t.currentPage,e.start=e.start!==undefined?e.start:(e.page-1)*t.pageSize,e.limit=e.limit||t.pageSize,e.addRecords=e.addRecords||!1,t.buffered?(e.limit=t.viewSize||t.defaultViewSize,e.loadCallback=e.callback,delete e.callback,t.loadToPrefetch(e)):t.callParent([e])},reload:function(e){var t=this,n,r,i,s,o,u,a,f;e||(e={});if(!t.buffered)return t.callParent(arguments);delete t.totalCount,t.data.clear(!0),u=function(){t.rangeCached(n,r)&&(t.loading=!1,t.data.un("pageAdded",u),f=t.data.getRange(n,r),t.fireEvent("load",t,f,!0))},a=Math.ceil((t.leadingBufferZone+t.trailingBufferZone)/2),t.lastRequestStart?(n=t.lastRequestStart,r=t.lastRequestEnd):(n=e.start||0,r=n+(e.count||t.pageSize)-1),i=t.getPageFromRecordIndex(Math.max(n-a,0)),s=t.getPageFromRecordIndex(r+a);if(t.fireEvent("beforeload",t,e)!==!1){t.loading=!0,t.data.on("pageAdded",u);for(o=i;o<=s;o++)t.prefetchPage(o,e)}},onProxyLoad:function(e){var t=this,n=e.getResultSet(),r=e.getRecords(),i=e.wasSuccessful();if(t.isDestroyed)return;n&&(t.totalCount=n.total),t.loading=!1,i&&t.loadRecords(r,e),t.hasListeners.load&&t.fireEvent("load",t,r,i),t.hasListeners.read&&t.fireEvent("read",t,r,i),Ext.callback(e.callback,e.scope||t,[r,e,i])},getNewRecords:function(){return(this.snapshot||this.data).filterBy(this.filterNew).items},getUpdatedRecords:function(){return(this.snapshot||this.data).filterBy(this.filterUpdated).items},filter:function(e,t){Ext.isString(e)&&(e={property:e,value:t});var n=this,r=n.decodeFilters(e),i,s=n.sorters.length&&n.sortOnFilter&&!n.remoteSort,o=r.length;for(i=0;i<o;i++)n.filters.replace(r[i]);e=n.filters.items,e.length&&(n.remoteFilter?(delete n.totalCount,n.buffered?(n.data.clear(),n.loadPage(1)):(n.currentPage=1,n.load())):(n.snapshot=n.snapshot||n.data.clone(),n.data=n.snapshot.filter(e),n.constructGroups(),s?n.sort():(n.fireEvent("datachanged",n),n.fireEvent("refresh",n))),n.fireEvent("filterchange",n,e))},clearFilter:function(e){var t=this;t.filters.clear();if(t.remoteFilter){if(e)return;delete t.totalCount,t.buffered?(t.data.clear(),t.loadPage(1)):(t.currentPage=1,t.load())}else t.isFiltered()&&(t.data=t.snapshot,delete t.snapshot,t.constructGroups(),e!==!0&&(t.fireEvent("datachanged",t),t.fireEvent("refresh",t)));t.fireEvent("filterchange",t,t.filters.items)},removeFilter:function(e,t){var n=this;!n.remoteFilter&&n.isFiltered()&&(e instanceof Ext.util.Filter?n.filters.remove(e):n.filters.removeAtKey(e),t!==!1?n.filters.length?n.filter():n.clearFilter():n.fireEvent("filterchange",n,n.filters.items))},addFilter:function(e,t){var n=this,r,i,s;r=n.decodeFilters(e),s=r.length;for(i=0;i<s;i++)n.filters.replace(r[i]);t!==!1&&n.filters.length?n.filter():n.fireEvent("filterchange",n,n.filters.items)},isFiltered:function(){var e=this.snapshot;return!!e&&e!==this.data},filterBy:function(e,t){var n=this;n.snapshot=n.snapshot||n.data.clone(),n.data=n.queryBy(e,t||n),n.fireEvent("datachanged",n),n.fireEvent("refresh",n)},queryBy:function(e,t){var n=this;return(n.snapshot||n.data).filterBy(e,t||n)},query:function(e,t,n,r,i){var s=this,o=s.createFilterFn(e,t,n,r,i),u=s.queryBy(o);return u||(u=new Ext.util.MixedCollection),u},loadData:function(e,t){var n=e.length,r=[],i;for(i=0;i<n;i++)r.push(this.createModel(e[i]));this.loadRecords(r,t?this.addRecordsOptions:undefined)},loadRawData:function(e,t){var n=this,r=n.proxy.reader.read(e),i=r.records;r.success&&(n.totalCount=r.total,n.loadRecords(i,t?n.addRecordsOptions:undefined))},loadRecords:function(e,t){var n=this,r=0,i=e.length,s,o,u=n.snapshot;t&&(s=t.start,o=t.addRecords),o?u&&u.addAll(e):(delete n.snapshot,n.clearData(!0)),n.data.addAll(e);if(s!==undefined)for(;r<i;r++)e[r].index=s+r,e[r].join(n);else for(;r<i;r++)e[r].join(n);n.suspendEvents(),n.filterOnLoad&&!n.remoteFilter&&n.filter(),n.sortOnLoad&&!n.remoteSort&&n.sort(undefined,undefined,undefined,!0),n.resumeEvents(),n.isGrouped()&&n.constructGroups(),n.fireEvent("datachanged",n),n.fireEvent("refresh",n)},loadPage:function(e,t){var n=this;n.currentPage=e,t=Ext.apply({page:e,start:(e-1)*n.pageSize,limit:n.pageSize,addRecords:!n.clearOnPageLoad},t);if(n.buffered)return t.limit=n.viewSize||n.defaultViewSize,t.loadCallback=t.callback,delete t.callback,n.loadToPrefetch(t);n.read(t)},nextPage:function(e){this.loadPage(this.currentPage+1,e)},previousPage:function(e){this.loadPage(this.currentPage-1,e)},clearData:function(e){var t=this,n,r;if(!t.buffered&&t.data){n=t.data.items,r=n.length;while(r--)n[r].unjoin(t)}t.data&&t.data.clear();if(e!==!0||t.clearRemovedOnLoad)t.removed.length=0},loadToPrefetch:function(e){var t=this,n,r,i,s=e,o=e.start,u=e.start+e.limit-1,a=Math.min(u,e.start+(t.viewSize||e.limit)-1),f=t.getPageFromRecordIndex(Math.max(o-t.trailingBufferZone,0)),l=t.getPageFromRecordIndex(u+t.leadingBufferZone),c=function(){t.rangeCached(o,a)&&(t.loading=!1,r=t.data.getRange(o,a),t.data.un("pageAdded",c),t.hasListeners.guaranteedrange&&t.guaranteeRange(o,a,e.callback,e.scope),e.loadCallback&&e.loadCallback.call(e.scope||t,r,h,!0),e.callback&&e.callback.call(e.scope||t,r,o,u,e),t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.fireEvent("load",t,r,!0),e.groupChange&&t.fireGroupChange())},h;t.fireEvent("beforeload",t,e)!==!1&&(delete t.totalCount,t.loading=!0,e.callback&&(s=Ext.apply({},e),delete s.callback),t.on("prefetch",function(e,r,o,u){if(o){h=u;if(i=t.getTotalCount()){t.data.on("pageAdded",c),a=Math.min(a,i-1),l=t.getPageFromRecordIndex(Math.min(a+t.leadingBufferZone,i-1));for(n=f+1;n<=l;++n)t.prefetchPage(n,s)}else t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.fireEvent("load",t,r,!0)}else t.fireEvent("load",t,r,!1)},null,{single:!0}),t.prefetchPage(f,s))},prefetch:function(e){var t=this,n=t.pageSize,r,i;return n?(t.lastPageSize&&n!=t.lastPageSize&&Ext.Error.raise("pageSize cannot be dynamically altered"),t.data.pageSize||(t.data.pageSize=n)):t.pageSize=t.data.pageSize=n=e.limit,t.lastPageSize=n,e.page||(e.page=t.getPageFromRecordIndex(e.start),e.start=(e.page-1)*n,e.limit=Math.ceil(e.limit/n)*n),t.pageRequests[e.page]||(e=Ext.apply({action:"read",filters:t.filters.items,sorters:t.sorters.items,groupers:t.groupers.items,pageMapGeneration:t.data.pageMapGeneration},e),i=new Ext.data.Operation(e),t.fireEvent("beforeprefetch",t,i)!==!1&&(r=t.proxy,t.pageRequests[e.page]=r.read(i,t.onProxyPrefetch,t),r.isSynchronous&&delete t.pageRequests[e.page])),t},onPageMapClear:function(){var e=this,t=e.wasLoading,n=e.pageRequests,r,i;e.data.events.pageadded&&e.data.events.pageadded.clearListeners(),e.loading=!0,e.totalCount=0;for(i in n)n.hasOwnProperty(i)&&(r=n[i],delete n[i],delete r.callback);e.fireEvent("clear",e),e.loading=t},prefetchPage:function(e,t){var n=this,r=n.pageSize||n.defaultPageSize,i=(e-1)*n.pageSize,s=n.totalCount;if(s!==undefined&&n.getCount()===s)return;n.prefetch(Ext.applyIf({page:e,start:i,limit:r},t))},onProxyPrefetch:function(e){var t=this,n=e.getResultSet(),r=e.getRecords(),i=e.wasSuccessful(),s=e.page;e.pageMapGeneration===t.data.pageMapGeneration&&(n&&(t.totalCount=n.total,t.fireEvent("totalcountchange",t.totalCount)),s!==undefined&&delete t.pageRequests[s],t.loading=!1,t.fireEvent("prefetch",t,r,i,e),i&&t.cachePage(r,e.page),Ext.callback(e.callback,e.scope||t,[r,e,i]))},cachePage:function(e,t){var n=this,r=e.length,i;Ext.isDefined(n.totalCount)||(n.totalCount=e.length,n.fireEvent("totalcountchange",n.totalCount));for(i=0;i<r;i++)e[i].join(n);n.data.addPage(t,e)},rangeCached:function(e,t){return this.data&&this.data.hasRange(e,t)},pageCached:function(e){return this.data&&this.data.hasPage(e)},pagePending:function(e){return!!this.pageRequests[e]},rangeSatisfied:function(e,t){return this.rangeCached(e,t)},getPageFromRecordIndex:function(e){return Math.floor(e/this.pageSize)+1},onGuaranteedRange:function(e){var t=this,n=t.getTotalCount(),r=e.prefetchStart,i=e.prefetchEnd>n-1?n-1:e.prefetchEnd,s;i=Math.max(0,i),s=t.data.getRange(r,i),e.fireEvent!==!1&&t.fireEvent("guaranteedrange",s,r,i,e),e.callback&&e.callback.call(e.scope||t,s,r,i,e)},guaranteeRange:function(e,t,n,r,i){i=Ext.apply({callback:n,scope:r},i),this.getRange(e,t,i)},prefetchRange:function(e,t){var n=this,r,i,s;if(!n.rangeCached(e,t)){r=n.getPageFromRecordIndex(e),i=n.getPageFromRecordIndex(t),n.data.maxSize=n.purgePageCount?i-r+1+n.purgePageCount:0;for(s=r;s<=i;s++)n.pageCached(s)||n.prefetchPage(s)}},primeCache:function(e,t,n){var r=this;n===-1?(e=Math.max(e-r.leadingBufferZone,0),t=Math.min(t+r.trailingBufferZone,r.totalCount-1)):n===1?(e=Math.max(Math.min(e-r.trailingBufferZone,r.totalCount-r.pageSize),0),t=Math.min(t+r.leadingBufferZone,r.totalCount-1)):(e=Math.min(Math.max(Math.floor(e-(r.leadingBufferZone+r.trailingBufferZone)/2),0),r.totalCount-r.pageSize),t=Math.min(Math.max(Math.ceil(t+(r.leadingBufferZone+r.trailingBufferZone)/2),0),r.totalCount-1)),r.prefetchRange(e,t)},sort:function(e){var t=this;return e&&t.buffered&&t.remoteSort&&t.data.clear(),t.callParent(arguments)},doSort:function(e){var t=this,n,r,i;if(t.remoteSort)t.buffered?(t.data.clear(),t.loadPage(1)):t.load();else{t.data.sortBy(e);if(!t.buffered){n=t.getRange(),r=n.length;for(i=0;i<r;i++)n[i].index=i}t.fireEvent("datachanged",t),t.fireEvent("refresh",t)}},find:function(e,t,n,r,i,s){var o=this.createFilterFn(e,t,r,i,s);return o?this.data.findIndexBy(o,null,n):-1},findRecord:function(){var e=this,t=e.find.apply(e,arguments);return t!==-1?e.getAt(t):null},createFilterFn:function(e,t,n,r,i){return Ext.isEmpty(t)?!1:(t=Ext.util.AbstractMixedCollection.prototype.createValueMatcher(t,n,r,i),function(n){return t.test(n.data[e])})},findExact:function(e,t,n){return this.data.findIndexBy(function(n){return n.isEqual(n.get(e),t)},this,n)},findBy:function(e,t,n){return this.data.findIndexBy(e,t,n)},collect:function(e,t,n){var r=this,i=n===!0&&r.snapshot?r.snapshot:r.data;return i.collect(e,"data",t)},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.totalCount||0},getAt:function(e){return this.data.getAt(e)},getRange:function(e,t,n){var r=this,i,s,o=r.totalCount-1,u=r.lastRequestStart,a,f;return n=Ext.apply({prefetchStart:e,prefetchEnd:t},n),r.buffered?(t=t>=r.totalCount?o:t,i=e===0?0:e-1,s=t===o?t:t+1,r.lastRequestStart=e,r.lastRequestEnd=t,r.rangeCached(i,s)?(r.onGuaranteedRange(n),f=r.data.getRange(e,t)):(r.fireEvent("cachemiss",r,e,t),a=function(o,u){r.rangeCached(i,s)&&(r.fireEvent("cachefilled",r,e,t),r.data.un("pageAdded",a),r.onGuaranteedRange(n))},r.data.on("pageAdded",a),r.prefetchRange(e,t)),r.primeCache(e,t,e<u?-1:1)):(f=r.data.getRange(e,t),n.callback&&n.callback.call(n.scope||r,f,e,t,n)),f},getById:function(e){var t=(this.snapshot||this.data).findBy(function(t){return t.getId()===e});return t},getByInternalId:function(e){var t;return this.buffered?t=(this.snapshot||this.data).findBy(function(t){return t.internalId===e}):t=this.data.get(e),t},indexOf:function(e){return this.data.indexOf(e)},indexOfTotal:function(e){var t=e.index;return t||t===0?t:this.indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},first:function(e){var t=this;return e&&t.isGrouped()?t.aggregate(function(e){return e.length?e[0]:undefined},t,!0):t.data.first()},last:function(e){var t=this;return e&&t.isGrouped()?t.aggregate(function(e){var t=e.length;return t?e[t-1]:undefined},t,!0):t.data.last()},sum:function(e,t){var n=this;return t&&n.isGrouped()?n.aggregate(n.getSum,n,!0,[e]):n.getSum(n.data.items,e)},getSum:function(e,t){var n=0,r=0,i=e.length;for(;r<i;++r)n+=e[r].get(t);return n},count:function(e){var t=this;return e&&t.isGrouped()?t.aggregate(function(e){return e.length},t,!0):t.getCount()},min:function(e,t){var n=this;return t&&n.isGrouped()?n.aggregate(n.getMin,n,!0,[e]):n.getMin(n.data.items,e)},getMin:function(e,t){var n=1,r=e.length,i,s;r>0&&(s=e[0].get(t));for(;n<r;++n)i=e[n].get(t),i<s&&(s=i);return s},max:function(e,t){var n=this;return t&&n.isGrouped()?n.aggregate(n.getMax,n,!0,[e]):n.getMax(n.data.items,e)},getMax:function(e,t){var n=1,r=e.length,i,s;r>0&&(s=e[0].get(t));for(;n<r;++n)i=e[n].get(t),i>s&&(s=i);return s},average:function(e,t){var n=this;return t&&n.isGrouped()?n.aggregate(n.getAverage,n,!0,[e]):n.getAverage(n.data.items,e)},getAverage:function(e,t){var n=0,r=e.length,i=0;if(e.length>0){for(;n<r;++n)i+=e[n].get(t);return i/r}return 0},aggregate:function(e,t,n,r){r=r||[];if(n&&this.isGrouped()){var i=this.getGroups(),s=i.length,o={},u,a;for(a=0;a<s;++a)u=i[a],o[u.name]=this.getAggregate(e,t||this,u.children,r);return o}return this.getAggregate(e,t,this.data.items,r)},getAggregate:function(e,t,n,r){return r=r||[],e.apply(t||this,[n].concat(r))},onIdChanged:function(e,t,n,r){var i=this.snapshot;i&&i.updateKey(r,n),this.data.updateKey(r,n),this.callParent(arguments)},commitChanges:function(){var e=this,t=e.getModifiedRecords(),n=t.length,r=0;for(;r<n;r++)t[r].commit();e.removed.length=0},filterNewOnly:function(e){return e.phantom===!0},getRejectRecords:function(){return Ext.Array.push(this.data.filterBy(this.filterNewOnly).items,this.getUpdatedRecords())},rejectChanges:function(){var e=this,t=e.getRejectRecords(),n=t.length,r=0,i;for(;r<n;r++)i=t[r],i.reject(),i.phantom&&e.remove(i);t=e.removed,n=t.length;for(r=n-1;r>=0;r--)i=t[r],e.insert(i.removedFrom||0,i),i.reject();e.removed.length=0}},function(){Ext.regStore("ext-empty-store",{fields:[],proxy:"memory"})}),Ext.define("Ext.data.reader.Array",{extend:Ext.data.reader.Json,alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",totalProperty:undefined,successProperty:undefined,createFieldAccessExpression:function(e,t,n){var r=e.mapping==null?e.originalIndex:e.mapping,i;return typeof r=="function"?i=t+".mapping("+n+", this)":(isNaN(r)&&(r='"'+r+'"'),i=n+"["+r+"]"),i}}),Ext.define("Ext.data.ArrayStore",{extend:Ext.data.Store,alias:"store.array",constructor:function(e){e=Ext.apply({proxy:{type:"memory",reader:"array"}},e),this.callParent([e])},loadData:function(e,t){if(this.expandData===!0){var n=[],r=0,i=e.length;for(;r<i;r++)n[n.length]=[e[r]];e=n}this.callParent([e,t])}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore}),Ext.define("Ext.data.Batch",{mixins:{observable:Ext.util.Observable},autoStart:!1,pauseOnException:!1,current:-1,total:0,isRunning:!1,isComplete:!1,hasException:!1,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),t.operations=[],t.exceptions=[]},add:function(e){return this.total++,e.setBatch(this),this.operations.push(e),this},start:function(e){var t=this;return t.isRunning?t:(t.exceptions.length=0,t.hasException=!1,t.isRunning=!0,t.runOperation(Ext.isDefined(e)?e:t.current+1))},retry:function(){return this.start(this.current)},runNextOperation:function(){return this.runOperation(this.current+1)},pause:function(){return this.isRunning=!1,this},runOperation:function(e){var t=this,n=t.operations,r=n[e],i;return r===undefined?(t.isRunning=!1,t.isComplete=!0,t.fireEvent("complete",t,n[n.length-1])):(t.current=e,i=function(e){var n=e.hasException();n&&(t.hasException=!0,t.exceptions.push(e),t.fireEvent("exception",t,e)),n&&t.pauseOnException?t.pause():(e.setCompleted(),t.fireEvent("operationcomplete",t,e),t.runNextOperation())},r.setStarted(),t.proxy[r.action](r,i,t)),t}}),Ext.define("Ext.data.BufferStore",{extend:Ext.data.Store,alias:"store.buffer",sortOnLoad:!1,filterOnLoad:!1,constructor:function(){Ext.Error.raise("The BufferStore class has been deprecated. Instead, specify the buffered config option on Ext.data.Store")}}),Ext.define("Ext.direct.Manager",{singleton:!0,mixins:{observable:Ext.util.Observable},exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},constructor:function(){var e=this;e.addEvents("event","exception"),e.transactions=new Ext.util.MixedCollection,e.providers=new Ext.util.MixedCollection,e.mixins.observable.constructor.call(e)},addProvider:function(e){var t=this,n=arguments,r=t.relayers||(t.relayers={}),i,s;if(n.length>1){for(i=0,s=n.length;i<s;++i)t.addProvider(n[i]);return}return e.isProvider||(e=Ext.create("direct."+e.type+"provider",e)),t.providers.add(e),e.on("data",t.onProviderData,t),e.relayedEvents&&(r[e.id]=t.relayEvents(e,e.relayedEvents)),e.isConnected()||e.connect(),e},getProvider:function(e){return e.isProvider?e:this.providers.get(e)},removeProvider:function(e){var t=this,n=t.providers,r=t.relayers,i;return e=e.isProvider?e:n.get(e),e?(e.un("data",t.onProviderData,t),i=e.id,r[i]&&(r[i].destroy(),delete r[i]),n.remove(e),e):null},addTransaction:function(e){return this.transactions.add(e),e},removeTransaction:function(e){var t=this;return e=t.getTransaction(e),t.transactions.remove(e),e},getTransaction:function(e){return typeof e=="object"?e:this.transactions.get(e)},onProviderData:function(e,t){var n=this,r,i;if(Ext.isArray(t)){for(r=0,i=t.length;r<i;++r)n.onProviderData(e,t[r]);return}t.name&&t.name!="event"&&t.name!="exception"?n.fireEvent(t.name,t):t.status===!1&&n.fireEvent("exception",t),n.fireEvent("event",t,e)},parseMethod:function(e){if(Ext.isString(e)){var t=e.split("."),n=0,r=t.length,i=Ext.global;while(i&&n<r)i=i[t[n]],++n;e=Ext.isFunction(i)?i:null}return e||null}},function(){Ext.Direct=Ext.direct.Manager}),Ext.define("Ext.data.proxy.Direct",{extend:Ext.data.proxy.Server,alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",paramOrder:undefined,paramsAsHash:!0,directFn:undefined,paramOrderRe:/[\s,|]/,constructor:function(e){var t=this,n;t.callParent(arguments),n=t.paramOrder,Ext.isString(n)&&(t.paramOrder=n.split(t.paramOrderRe))},resolveMethods:function(){var e=this,t=e.directFn,n=e.api,r=Ext.direct.Manager,i;if(t)i=e.directFn=r.parseMethod(t),Ext.isFunction(i)||Ext.Error.raise("Cannot resolve directFn "+t);else if(n)for(t in n)n.hasOwnProperty(t)&&(i=n[t],n[t]=r.parseMethod(i),Ext.isFunction(n[t])||Ext.Error.raise("Cannot resolve Direct api "+t+" method "+i));e.methodsResolved=!0},doRequest:function(e,t,n){var r=this,i=r.getWriter(),s=r.buildRequest(e),o=s.params,u=[],a,f;r.methodsResolved||r.resolveMethods(),a=r.api[s.action]||r.directFn,e.allowWrite()&&(s=i.write(s)),e.action=="read"?(f=a.directCfg.method,u=f.getArgs(o,r.paramOrder,r.paramsAsHash)):u.push(s.jsonData),Ext.apply(s,{args:u,directFn:a}),u.push(r.createRequestCallback(s,e,t,n),r),a.apply(window,u)},applyEncoding:Ext.identityFn,createRequestCallback:function(e,t,n,r){var i=this;return function(s,o){i.processResponse(o.status,t,e,o,n,r)}},extractResponseData:function(e){return Ext.isDefined(e.result)?e.result:e.data},setException:function(e,t){e.setException(t.message)},buildUrl:function(){return""}}),Ext.define("Ext.data.DirectStore",{extend:Ext.data.Store,alias:"store.direct",constructor:function(e){e=Ext.apply({},e);if(!e.proxy){var t={type:"direct",reader:{type:"json"}};Ext.copyTo(t,e,"paramOrder,paramsAsHash,directFn,api,simpleSortMode"),Ext.copyTo(t.reader,e,"totalProperty,root,idProperty"),e.proxy=t}this.callParent([e])}}),Ext.define("Ext.data.JsonP",{singleton:!0,requestCount:0,requests:{},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(e){e=Ext.apply({},e);var t=this,n=Ext.isDefined(e.disableCaching)?e.disableCaching:t.disableCaching,r=e.disableCachingParam||t.disableCachingParam,i=++t.requestCount,s=e.callbackName||"callback"+i,o=e.callbackKey||t.callbackKey,u=Ext.isDefined(e.timeout)?e.timeout:t.timeout,a=Ext.apply({},e.params),f=e.url,l=Ext.name,c,h;return n&&!a[r]&&(a[r]=Ext.Date.now()),e.params=a,a[o]=l+".data.JsonP."+s,h=t.createScript(f,a,e),t.requests[i]=c={url:f,params:a,script:h,id:i,scope:e.scope,success:e.success,failure:e.failure,callback:e.callback,callbackKey:o,callbackName:s},u>0&&(c.timeout=setTimeout(Ext.bind(t.handleTimeout,t,[c]),u)),t.setupErrorHandling(c),t[s]=Ext.bind(t.handleResponse,t,[c],!0),t.loadScript(c),c},abort:function(e){var t=this,n=t.requests,r;if(e)e.id||(e=n[e]),t.handleAbort(e);else for(r in n)n.hasOwnProperty(r)&&t.abort(n[r])},setupErrorHandling:function(e){e.script.onerror=Ext.bind(this.handleError,this,[e])},handleAbort:function(e){e.errorType="abort",this.handleResponse(null,e)},handleError:function(e){e.errorType="error",this.handleResponse(null,e)},cleanupErrorHandling:function(e){e.script.onerror=null},handleTimeout:function(e){e.errorType="timeout",this.handleResponse(null,e)},handleResponse:function(e,t){var n=!0;t.timeout&&clearTimeout(t.timeout),delete this[t.callbackName],delete this.requests[t.id],this.cleanupErrorHandling(t),Ext.fly(t.script).remove(),t.errorType?(n=!1,Ext.callback(t.failure,t.scope,[t.errorType])):Ext.callback(t.success,t.scope,[e]),Ext.callback(t.callback,t.scope,[n,e,t.errorType]),Ext.EventManager.idleEvent.fire()},createScript:function(e,t,n){var r=document.createElement("script");return r.setAttribute("src",Ext.urlAppend(e,Ext.Object.toQueryString(t))),r.setAttribute("async",!0),r.setAttribute("type","text/javascript"),r},loadScript:function(e){Ext.getHead().appendChild(e.script)}}),Ext.define("Ext.data.proxy.JsonP",{extend:Ext.data.proxy.Server,alternateClassName:"Ext.data.ScriptTagProxy",alias:["proxy.jsonp","proxy.scripttag"],defaultWriterType:"base",callbackKey:"callback",recordParam:"records",autoAppendParams:!0,constructor:function(){this.addEvents("exception"),this.callParent(arguments)},doRequest:function(e,t,n){var r=this,i=r.buildRequest(e),s=i.params;return Ext.apply(i,{callbackKey:r.callbackKey,timeout:r.timeout,scope:r,disableCaching:!1,callback:r.createRequestCallback(i,e,t,n)}),r.autoAppendParams&&(i.params={}),i.jsonp=Ext.data.JsonP.request(i),i.params=s,e.setStarted(),r.lastRequest=i,i},createRequestCallback:function(e,t,n,r){var i=this;return function(s,o,u){delete i.lastRequest,i.processResponse(s,t,e,o,n,r)}},setException:function(e,t){e.setException(e.request.jsonp.errorType)},buildUrl:function(e){var t=this,n=t.callParent(arguments),r=e.records,i=t.getWriter(),s,o,u,a;i&&e.operation.allowWrite()&&(e=i.write(e)),s=e.params,o=s.filters,delete s.filters;if(o&&o.length)for(a=0;a<o.length;a++)u=o[a],u.value&&(s[u.property]=u.value);return(!i||!i.encode)&&Ext.isArray(r)&&r.length>0&&(s[t.recordParam]=t.encodeRecords(r)),t.autoAppendParams&&(n=Ext.urlAppend(n,Ext.Object.toQueryString(s))),n},abort:function(){var e=this.lastRequest;e&&Ext.data.JsonP.abort(e.jsonp)},encodeRecords:function(e){var t=[],n=0,r=e.length;for(;n<r;n++)t.push(Ext.encode(e[n].getData()));return t}}),Ext.define("Ext.data.JsonPStore",{extend:Ext.data.Store,alias:"store.jsonp",constructor:function(e){e=Ext.apply({proxy:{type:"jsonp",reader:"json"}},e),this.callParent([e])}}),Ext.
define("Ext.data.JsonStore",{extend:Ext.data.Store,alias:"store.json",constructor:function(e){e=Ext.apply({proxy:{type:"ajax",reader:"json",writer:"json"}},e),this.callParent([e])}}),Ext.define("Ext.data.NodeInterface",{statics:{decorate:function(e){var t,n,r;typeof e=="string"?e=Ext.ModelManager.getModel(e):e.isModel&&(e=Ext.ModelManager.getModel(e.modelName));if(e.prototype.isNode)return;t=e.prototype.idProperty,n=e.prototype.fields.get(t),r=e.prototype.fields.get(t).type.type,e.override(this.getPrototypeBody()),this.applyFields(e,[{name:"parentId",type:r,defaultValue:null,useNull:n.useNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null}])},applyFields:function(e,t){var n=e.prototype,r=n.fields,i=r.keys,s=t.length,o,u;for(u=0;u<s;u++)o=t[u],Ext.Array.contains(i,o.name)||r.add(new Ext.data.Field(o))},getPrototypeBody:function(){var e={idchanged:!0,append:!0,remove:!0,bulkremove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0,rootchange:!0};return{isNode:!0,constructor:function(){var e=this;return e.callParent(arguments),e.firstChild=e.lastChild=e.parentNode=e.previousSibling=e.nextSibling=null,e.childNodes=[],e},createNode:function(e){return e.isModel||(e=Ext.ModelManager.create(e,this.modelName)),e.childNodes||(e.firstChild=e.lastChild=e.parentNode=e.previousSibling=e.nextSibling=null,e.childNodes=[]),e},isLeaf:function(){return this.get("leaf")===!0},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},updateInfo:function(e,t){var n=this,r=n.data.depth,i={},s=n.childNodes,o=s.length,u,a=n.phantom,f=n[n.persistenceProperty],l=n.fields,c=n.modified,h,p,d,v,m,g=t.parentId,y,b;t||Ext.Error.raise("NodeInterface expects update info to be passed");for(h in t){d=l.get(h),p=t[h],b=d&&d.persist,v=f[h],y=b&&h==="index"&&v!==-1&&g&&g!==c.parentId;if(!y&&n.isEqual(v,p))continue;f[h]=p;if(b)if(!y&&c.hasOwnProperty(h)){if(n.isEqual(c[h],p)){delete c[h],n.dirty=!1;for(m in c)if(c.hasOwnProperty(m)){n.dirty=!0;break}}}else n.dirty=!0,c[h]=v}e&&(n.commit(),n.phantom=a);if(n.data.depth!==r){i={depth:n.data.depth+1};for(u=0;u<o;u++)s[u].updateInfo(e,i)}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var e=this;return e.get("expandable")?!(e.isLeaf()||e.isLoaded()&&!e.phantom&&!e.hasChildNodes()):!1},triggerUIUpdate:function(){this.afterEdit([])},appendChild:function(e,t,n){var r=this,i,s,o,u,a,f={isLast:!0,parentId:r.getId(),depth:(r.data.depth||0)+1};if(!Ext.isArray(e)){e=r.createNode(e);if(t!==!0&&r.fireEventArgs("beforeappend",[r,e])===!1)return!1;o=r.childNodes.length,u=e.parentNode;if(u){if(t!==!0&&e.fireEventArgs("beforemove",[e,u,r,o])===!1)return!1;u.removeChild(e,!1,!1,!0)}return Ext.suspendLayouts(),o=r.childNodes.length,o===0&&r.setFirstChild(e),r.childNodes[o]=e,e.parentNode=r,e.nextSibling=null,r.setLastChild(e),a=r.childNodes[o-1],a?(e.previousSibling=a,a.nextSibling=e,a.updateInfo(n,{isLast:!1}),a.triggerUIUpdate()):e.previousSibling=null,f.isFirst=o===0,f.index=o,e.updateInfo(n,f),r.isLoaded()?r.childNodes.length===1&&r.triggerUIUpdate():r.set("loaded",!0),o&&r.childNodes[o-1].isExpanded()&&r.childNodes[o-1].cascadeBy(r.triggerUIUpdate),!e.isLeaf()&&e.phantom&&e.set("loaded",!0),Ext.resumeLayouts(!0),t!==!0&&(r.fireEventArgs("append",[r,e,o]),u&&e.fireEventArgs("move",[e,u,r,o])),e}r.callStore("suspendAutoSync");for(i=0,s=e.length-1;i<s;i++)r.appendChild(e[i],t,n);r.callStore("resumeAutoSync"),r.appendChild(e[s],t,n)},getOwnerTree:function(){var e=this,t;while(e.parentNode)e=e.parentNode;t=e.store;if(t){t.treeStore&&(t=t.treeStore);if(t.tree)return t.ownerTree}return undefined},removeChild:function(e,t,n,r){var i=this,s=i.indexOf(e),o,u,a;if(s===-1||n!==!0&&i.fireEventArgs("beforeremove",[i,e,!!r])===!1)return!1;Ext.suspendLayouts(),Ext.Array.erase(i.childNodes,s,1),i.firstChild===e&&i.setFirstChild(e.nextSibling),i.lastChild===e&&i.setLastChild(e.previousSibling),a=e.previousSibling,a&&(e.previousSibling.nextSibling=e.nextSibling);if(e.nextSibling){e.nextSibling.previousSibling=e.previousSibling,s===0&&e.nextSibling.updateInfo(!1,{isFirst:!0});for(o=s,u=i.childNodes.length;o<u;o++)i.childNodes[o].updateInfo(!1,{index:o})}else a&&(a.updateInfo(!1,{isLast:!0}),a.isExpanded()?a.cascadeBy(i.triggerUIUpdate):a.triggerUIUpdate());return i.childNodes.length||i.triggerUIUpdate(),Ext.resumeLayouts(!0),n!==!0&&(e.removeContext={parentNode:e.parentNode,previousSibling:e.previousSibling,nextSibling:e.nextSibling},e.previousSibling=e.nextSibling=e.parentNode=null,i.fireEventArgs("remove",[i,e,!!r]),e.removeContext=null),t?e.destroy(!0):e.clear(),e},copy:function(e,t){var n=this,r=n.callParent(arguments),i=n.childNodes?n.childNodes.length:0,s;if(t)for(s=0;s<i;s++)r.appendChild(n.childNodes[s].copy(undefined,!0));return r},clear:function(e){var t=this;t.parentNode=t.previousSibling=t.nextSibling=null,e&&(t.firstChild=t.lastChild=null)},destroy:function(e){var t=this,n=t.destroyOptions,r=t.childNodes,i=r.length,s;if(e===!0){t.clear(!0);for(s=0;s<i;s++)r[s].destroy(!0);t.childNodes=null,delete t.destroyOptions,t.callParent([n])}else t.destroyOptions=e,t.remove(!0)},insertBefore:function(e,t,n){var r=this,i=r.indexOf(t),s=e.parentNode,o=i,u,a,f;if(!t)return r.appendChild(e);if(e===t)return!1;e=r.createNode(e);if(n!==!0&&r.fireEventArgs("beforeinsert",[r,e,t])===!1)return!1;s===r&&r.indexOf(e)<i&&o--;if(s){if(n!==!0&&e.fireEventArgs("beforemove",[e,s,r,i,t])===!1)return!1;s.removeChild(e,!1,!1,!0)}o===0&&r.setFirstChild(e),Ext.Array.splice(r.childNodes,o,0,e),e.parentNode=r,e.nextSibling=t,t.previousSibling=e,a=r.childNodes[o-1],a?(e.previousSibling=a,a.nextSibling=e):e.previousSibling=null,e.updateInfo(!1,{parentId:r.getId(),index:o,isFirst:o===0,isLast:!1,depth:(r.data.depth||0)+1});for(f=o+1,u=r.childNodes.length;f<u;f++)r.childNodes[f].updateInfo(!1,{index:f});return r.isLoaded()?r.childNodes.length===1&&r.triggerUIUpdate():r.set("loaded",!0),!e.isLeaf()&&e.phantom&&e.set("loaded",!0),n!==!0&&(r.fireEventArgs("insert",[r,e,t]),s&&e.fireEventArgs("move",[e,s,r,o,t])),e},insertChild:function(e,t){var n=this.childNodes[e];return n?this.insertBefore(t,n):this.appendChild(t)},remove:function(e,t){var n=this,r=n.parentNode;return r?r.removeChild(n,e,t):e&&n.destroy(!0),n},removeAll:function(e,t,n){var r=this,i=r.childNodes,s=0,o=i.length,u;if(!o)return;r.fireEventArgs("bulkremove",[r,i,!1]);for(;s<o;++s)u=i[s],u.removeContext={parentNode:u.parentNode,previousSibling:u.previousSibling,nextSibling:u.nextSibling},u.previousSibling=u.nextSibling=u.parentNode=null,r.fireEventArgs("remove",[r,u,!1]),u.removeContext=null,e?u.destroy(!0):u.removeAll(!1,t,!0);return r.firstChild=r.lastChild=null,n?r.childNodes=null:(r.childNodes.length=0,r.triggerUIUpdate()),r},getChildAt:function(e){return this.childNodes[e]},replaceChild:function(e,t,n){var r=t?t.nextSibling:null;return this.removeChild(t,!1,n),this.insertBefore(e,r,n),t},indexOf:function(e){return Ext.Array.indexOf(this.childNodes,e)},indexOfId:function(e){var t=this.childNodes,n=t.length,r=0;for(;r<n;++r)if(t[r].getId()===e)return r;return-1},getPath:function(e,t){e=e||this.idProperty,t=t||"/";var n=[this.get(e)],r=this.parentNode;while(r)n.unshift(r.get(e)),r=r.parentNode;return t+n.join(t)},getDepth:function(){return this.get("depth")},bubble:function(e,t,n){var r=this;while(r){if(e.apply(t||r,n||[r])===!1)break;r=r.parentNode}},cascade:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead."),this.cascadeBy.apply(this,arguments)},cascadeBy:function(e,t,n){if(e.apply(t||this,n||[this])!==!1){var r=this.childNodes,i=r.length,s;for(s=0;s<i;s++)r[s].cascadeBy(e,t,n)}},eachChild:function(e,t,n){var r=this.childNodes,i=r.length,s;for(s=0;s<i;s++)if(e.apply(t||this,n||[r[s]])===!1)break},findChild:function(e,t,n){return this.findChildBy(function(){return this.get(e)==t},null,n)},findChildBy:function(e,t,n){var r=this.childNodes,i=r.length,s=0,o,u;for(;s<i;s++){o=r[s];if(e.call(t||o,o)===!0)return o;if(n){u=o.findChildBy(e,t,n);if(u!==null)return u}}return null},contains:function(e){return e.isAncestor(this)},isAncestor:function(e){var t=this.parentNode;while(t){if(t===e)return!0;t=t.parentNode}return!1},sort:function(e,t,n){var r=this.childNodes,i=r.length,s,o,u={isFirst:!0};if(i>0){Ext.Array.sort(r,e),this.setFirstChild(r[0]),this.setLastChild(r[i-1]);for(s=0;s<i;s++)o=r[s],o.previousSibling=r[s-1],o.nextSibling=r[s+1],u.isLast=s===i-1,u.index=s,o.updateInfo(!1,u),u.isFirst=!1,t&&!o.isLeaf()&&o.sort(e,!0,!0);n!==!0&&this.fireEventArgs("sort",[this,r])}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){var e=this.parentNode;while(e){if(!e.isExpanded())return!1;e=e.parentNode}return!0},expand:function(e,t,n){var r=this,i;r.isLeaf()?Ext.callback(t,n||r):r.isLoading()?r.on("expand",function(){r.expand(e,t,n)},r,{single:!0}):r.isExpanded()?e?(i=r.getOwnerTree(),r.expandChildren(!0,i?i.singleExpand:!1,t,n)):Ext.callback(t,n||r,[r.childNodes]):r.fireEventArgs("beforeexpand",[r,r.onChildNodesAvailable,r,[e,t,n]])},onChildNodesAvailable:function(e,t,n,r){var i=this,s;Ext.suspendLayouts(),i.set("expanded",!0),i.fireEventArgs("expand",[i,i.childNodes,!1]),t?(s=i.getOwnerTree(),i.expandChildren(!0,s?s.singleExpand:!1,n,r)):Ext.callback(n,r||i,[i.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(e,t,n,r){var i=this,s,o=i.childNodes,u=[],a=t?Math.min(o.length,1):o.length,f;for(s=0;s<a;++s)f=o[s],f.isLeaf()||(u[u.length]=f);a=u.length;for(s=0;s<a;++s)u[s].expand(e);n&&Ext.callback(n,r||i,[i.childNodes])},collapse:function(e,t,n){var r=this,i=r.isExpanded(),s=r.childNodes.length,o,u;if(!r.isLeaf()&&(!i&&e||r.fireEventArgs("beforecollapse",[r])!==!1)){Ext.suspendLayouts();if(r.isExpanded())e&&(u=function(){for(o=0;o<s;o++)r.childNodes[o].setCollapsed(!0)},t?t=Ext.Function.createSequence(u,t):t=u),r.set("expanded",!1),r.fireEventArgs("collapse",[r,r.childNodes,!1,t?Ext.Function.bind(t,n,[r.childNodes]):null,null]),t=null;else if(e)for(o=0;o<s;o++)r.childNodes[o].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(t,n||r,[r.childNodes])},setCollapsed:function(e){var t=this,n=t.childNodes.length,r;if(!t.isLeaf()&&t.fireEventArgs("beforecollapse",[t,Ext.emptyFn])!==!1){t.data.expanded=!1,t.fireEventArgs("collapse",[t,t.childNodes,!1,null,null]);if(e)for(r=0;r<n;r++)t.childNodes[r].setCollapsed(!0)}},collapseChildren:function(e,t,n){var r=this,i,s=r.childNodes,o=s.length,u=[],a;for(i=0;i<o;++i)a=s[i],!a.isLeaf()&&a.isLoaded()&&a.isExpanded()&&u.push(a);o=u.length;if(o)for(i=0;i<o;++i)a=u[i],i===o-1?a.collapse(e,t,n):a.collapse(e);else Ext.callback(t,n)},fireEventArgs:function(t,n){var r=Ext.data.Model.prototype.fireEventArgs,i,s,o,u,a;if(e[t]){for(s=this;i!==!1&&s;s=(a=s).parentNode)s.hasListeners[t]&&(i=r.call(s,t,n));return o=a.rootOf,i!==!1&&o&&(u=o.treeStore,u&&u.hasListeners[t]&&(i=u.fireEventArgs.call(u,t,n)),i!==!1&&o.hasListeners[t]&&(i=o.fireEventArgs.call(o,t,n))),i}return r.apply(this,arguments)},serialize:function(){var e=Ext.data.writer.Json.prototype.getRecordData(this),t=this.childNodes,n=t.length,r,i;if(n>0){r=[];for(i=0;i<n;i++)r.push(t[i].serialize());e.children=r}return e}}}}}),Ext.define("Ext.data.NodeStore",{extend:Ext.data.Store,alias:"store.node",isNodeStore:!0,node:null,recursive:!1,rootVisible:!1,isExpandingOrCollapsing:0,constructor:function(e){var t=this,n;e=e||{},Ext.apply(t,e),e.proxy={type:"proxy"},t.callParent([e]),n=t.node,n&&(t.node=null,t.setNode(n))},getTotalCount:function(){return this.getCount()},setNode:function(e){var t=this;t.node&&t.node!=e&&(t.mun(t.node,{expand:t.onNodeExpand,collapse:t.onNodeCollapse,append:t.onNodeAppend,insert:t.onNodeInsert,bulkremove:t.onBulkRemove,remove:t.onNodeRemove,sort:t.onNodeSort,scope:t}),t.node=null),e&&(Ext.data.NodeInterface.decorate(e.self),t.removeAll(),t.rootVisible?t.add(e):!e.isExpanded()&&t.treeStore.autoLoad!==!1&&e.expand(),t.mon(e,{expand:t.onNodeExpand,collapse:t.onNodeCollapse,append:t.onNodeAppend,insert:t.onNodeInsert,bulkremove:t.onBulkRemove,remove:t.onNodeRemove,sort:t.onNodeSort,scope:t}),t.node=e,e.isExpanded()&&e.isLoaded()&&t.onNodeExpand(e,e.childNodes,!0))},onNodeSort:function(e,t){var n=this;if(n.indexOf(e)!==-1||e===n.node&&!n.rootVisible&&e.isExpanded())Ext.suspendLayouts(),n.onNodeCollapse(e,t,!0),n.onNodeExpand(e,t,!0),Ext.resumeLayouts(!0)},onNodeExpand:function(e,t,n){var r=this,i=r.indexOf(e)+1,s=[];n||r.fireEvent("beforeexpand",e,t,i),r.handleNodeExpand(e,t,s),r.insert(i,s),n||r.fireEvent("expand",e,t)},handleNodeExpand:function(e,t,n){var r=this,i=t?t.length:0,s,o;if(!r.recursive&&e!==r.node)return;if(e!==this.node&&!r.isVisible(e))return;if(i)for(s=0;s<i;s++)o=t[s],n.push(o),o.isExpanded()&&(o.isLoaded()?r.handleNodeExpand(o,o.childNodes,n):(o.set("expanded",!1),o.expand()))},onBulkRemove:function(e,t,n){this.onNodeCollapse(e,t,!0)},onNodeCollapse:function(e,t,n,r,i){var s=this,o=s.indexOf(e)+1,u,a,f,l;if(!s.recursive&&e!==s.node)return;n||s.fireEvent("beforecollapse",e,t,o,r,i);if(t.length&&s.data.contains(t[0])){u=e;while(u.parentNode){f=u.nextSibling;if(f){l=!0,a=s.indexOf(f);break}u=u.parentNode}l||(a=s.getCount()),s.removeAt(o,a-o)}n||s.fireEvent("collapse",e,t,o)},onNodeAppend:function(e,t,n){var r=this,i,s;if(r.isVisible(t)){if(n===0)i=e;else{s=t.previousSibling;while(s.isExpanded()&&s.lastChild)s=s.lastChild;i=s}r.insert(r.indexOf(i)+1,t),!t.isLeaf()&&t.isExpanded()&&(t.isLoaded()?r.onNodeExpand(t,t.childNodes,!0):r.treeStore.fillCount||(t.set("expanded",!1),t.expand()))}},onNodeInsert:function(e,t,n){var r=this,i=this.indexOf(n);i!=-1&&r.isVisible(t)&&(r.insert(i,t),!t.isLeaf()&&t.isExpanded()&&(t.isLoaded()?r.onNodeExpand(t,t.childNodes,!0):(t.set("expanded",!1),t.expand())))},onNodeRemove:function(e,t,n){var r=this;r.indexOf(t)!=-1&&(!t.isLeaf()&&t.isExpanded()&&(t.parentNode=t.removeContext.parentNode,t.nextSibling=t.removeContext.nextSibling,r.onNodeCollapse(t,t.childNodes,!0),t.parentNode=t.nextSibling=null),r.remove(t))},isVisible:function(e){var t=e.parentNode;while(t){if(t===this.node&&t.data.expanded)return!0;if(!t.data.expanded)return!1;t=t.parentNode}return!1}}),Ext.define("Ext.data.Request",{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(e){Ext.apply(this,e)}}),Ext.define("Ext.data.SequentialIdGenerator",{extend:Ext.data.IdGenerator,alias:"idgen.sequential",constructor:function(){var e=this;e.callParent(arguments),e.parts=[e.prefix,""]},prefix:"",seed:1,generate:function(){var e=this,t=e.parts;return t[1]=e.seed++,t.join("")}}),Ext.define("Ext.data.Tree",{alias:"data.tree",mixins:{observable:Ext.util.Observable},root:null,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t),e&&t.setRootNode(e),t.on({scope:t,idchanged:t.onNodeIdChanged,insert:t.onNodeInsert,append:t.onNodeAppend,remove:t.onNodeRemove})},getRootNode:function(){return this.root},setRootNode:function(e){var t=this;return t.root=e,e.rootOf?e.rootOf.removeRootNode():e.parentNode&&e.parentNode.removeChild(e),e.rootOf=t,e.fireEventArgs("beforeappend",[null,e])!==!1&&(e.set("root",!0),e.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),t.nodeHash={},e.fireEvent("append",null,e),e.fireEvent("rootchange",e)),e},removeRootNode:function(){var e=this,t=e.root;return t.set("root",!1),t.fireEvent("remove",null,t,!1),t.fireEvent("rootchange",null),t.rootOf=e.root=null,t},flatten:function(){return Ext.Object.getValues(this.nodeHash)},onNodeInsert:function(e,t){this.registerNode(t,!0)},onNodeAppend:function(e,t){this.registerNode(t,!0)},onNodeRemove:function(e,t){this.unregisterNode(t,!0)},onNodeIdChanged:function(e,t,n,r){var i=this.nodeHash;i[e.internalId]=e,delete i[r]},getNodeById:function(e){return this.nodeHash[e]},registerNode:function(e,t){var n=this,r,i,s;n.nodeHash[e.internalId]=e;if(t===!0){r=e.childNodes,i=r.length;for(s=0;s<i;s++)n.registerNode(r[s],!0)}},unregisterNode:function(e,t){var n=this,r,i,s;delete n.nodeHash[e.internalId];if(t===!0){r=e.childNodes,i=r.length;for(s=0;s<i;s++)n.unregisterNode(r[s],!0)}},sort:function(e,t){this.getRootNode().sort(e,t)},filter:function(e,t){this.getRootNode().filter(e,t)}}),Ext.define("Ext.data.TreeModel",{extend:Ext.data.Model},function(){Ext.data.NodeInterface.decorate(this)}),Ext.define("Ext.data.TreeStore",{extend:Ext.data.AbstractStore,alias:"store.tree",clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",defaultRootProperty:"children",rootProperty:"children",fillCount:0,folderSort:!1,constructor:function(e){var t=this,n,r,i;e=Ext.apply({},e),r=e.fields||t.fields,r||(e.fields=[{name:"text",type:"string"}],i=e.defaultRootProperty||t.defaultRootProperty,i!==t.defaultRootProperty&&e.fields.push({name:i,type:"auto",defaultValue:null,persist:!1})),t.callParent([e]),t.tree=new Ext.data.Tree,t.tree.treeStore=t,t.tree.on({scope:t,remove:t.onNodeRemove,beforeexpand:t.onBeforeNodeExpand,append:t.onNodeAdded,insert:t.onNodeAdded,sort:t.onNodeSort}),t.onBeforeSort(),n=t.root,n&&(delete t.root,t.setRootNode(n)),Ext.isDefined(t.nodeParameter)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead."),t.nodeParam=t.nodeParameter,delete t.nodeParameter)},setProxy:function(e){var t,n;return e instanceof Ext.data.proxy.Proxy?n=Ext.isEmpty(e.getReader().root):Ext.isString(e)?n=!0:(t=e.reader,n=!t||!!Ext.isEmpty(t.root)),e=this.callParent(arguments),e.idParam=this.nodeParam,n&&(t=e.getReader(),t.root=this.defaultRootProperty,t.buildExtractors(!0)),e},onBeforeSort:function(){this.folderSort&&this.sort({property:"leaf",direction:"ASC"},"prepend",!1)},onBeforeNodeExpand:function(e,t,n,r){var i=this,s,o,u,a;e.isLoaded()?(a=[e.childNodes],r&&a.push.apply(a,r),Ext.callback(t,n||e,a)):(o=u=(e.raw||e[e.persistenceProperty])[(s=i.getProxy().getReader()).root])?(i.fillNode(e,s.extractData(o)),delete u[s.root],a=[e.childNodes],r&&a.push.apply(a,r),Ext.callback(t,n||e,a)):e.isLoading()?i.on("load",function(){a=[e.childNodes],r&&a.push.apply(a,r),Ext.callback(t,n||e,a)},i,{single:!0,priority:1001}):i.read({node:e,internalCallback:function(){delete i.lastOptions.internalCallback,a=[e.childNodes],r&&a.push.apply(a,r),Ext.callback(t,n||e,a)}})},getNewRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterUpdated)},onNodeRemove:function(e,t,n){var r=this;t.unjoin(r),!t.phantom&&!n&&Ext.Array.include(r.removed,t),r.autoSync&&!r.autoSyncSuspended&&!n&&r.sync()},onNodeAdded:function(e,t){var n=this,r=n.getProxy(),i=r.getReader(),s=t.raw||t[t.persistenceProperty],o;Ext.Array.remove(n.removed,t),t.join(n),!t.isLeaf()&&!n.lazyFill&&(o=i.getRoot(s),o&&(n.fillNode(t,i.extractData(o)),delete s[i.root])),n.autoSync&&!n.autoSyncSuspended&&(t.phantom||t.dirty)&&n.sync()},onNodeSort:function(){this.autoSync&&!this.autoSyncSuspended&&this.sync()},setRootNode:function(e,t){var n=this,r=n.model,i=r.prototype.idProperty;return e=e||{},e.isModel?e.isModel&&!e.isNode&&Ext.data.NodeInterface.decorate(r):(e=Ext.apply({},e),Ext.applyIf(e,{id:n.defaultRootId,text:n.defaultRootText,allowDrag:!1}),e[i]===undefined&&(e[i]=n.defaultRootId),Ext.data.NodeInterface.decorate(r),e=Ext.ModelManager.create(e,r)),n.getProxy().getReader().buildExtractors(!0),n.tree.setRootNode(e),t!==!0&&!e.isLoaded()&&(n.autoLoad===!0||e.isExpanded())&&(e.data.expanded=!1,e.expand()),e},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(e){return this.tree.getNodeById(e)},getById:function(e){return this.getNodeById(e)},load:function(e){e=e||{},e.params=e.params||{};var t=this,n=e.node||t.tree.getRootNode(),r=e.callback,i=e.scope,s;return n||(n=t.setRootNode({expanded:!0},!0)),n.data.expanded&&(n.data.loaded=!1,t.clearOnLoad&&(n.data.expanded=!1),e.callback=function(){t.clearOnLoad||n.collapse(),n.expand(),Ext.callback(r,i,arguments)}),e.id=n.getId(),e=Ext.apply({action:"read",filters:t.filters.items,sorters:t.getSorters(),node:e.node||n},e),t.lastOptions=e,s=new Ext.data.Operation(e),t.fireEvent("beforeload",t,s)!==!1&&(t.clearOnLoad&&(t.clearRemovedOnLoad&&t.clearRemoved(n),t.tree.un("remove",t.onNodeRemove,t),n.removeAll(!1),t.tree.on("remove",t.onNodeRemove,t)),t.loading=!0,t.proxy.read(s,t.onProxyLoad,t)),t.loading&&n&&n.set("loading",!0),t},clearRemoved:function(e){var t=this,n=t.removed,r=e.getId(),i=n.length,s=i,o={},u=[],a={},f,l,c;if(e===t.getRootNode()){t.removed=[];return}for(;s--;)f=n[s],a[f.getId()]=f;for(s=i;s--;){f=n[s],l=f;while(l&&l.getId()!==r)c=l.get("parentId"),l=l.parentNode||t.getNodeById(c)||a[c];l&&(o[f.getId()]=f)}for(s=0;s<i;s++)f=n[s],o[f.getId()]||u.push(f);t.removed=u},fillNode:function(e,t){var n=this,r=t?t.length:0,i=n.sorters,s,o,u=!1,a=r&&n.sortOnLoad&&!n.remoteSort&&i&&i.items&&i.items.length,f,l,c;for(s=1;s<r;s++){f=t[s],l=t[s-1],u=f[f.persistenceProperty].index!=l[l.persistenceProperty].index;if(u)break}return a?(u&&n.sorters.insert(0,n.indexSorter),o=new Ext.util.MixedCollection,o.addAll(t),o.sort(n.sorters.items),t=o.items,n.sorters.remove(n.indexSorter)):u&&Ext.Array.sort(t,n.sortByIndex),e.set("loaded",!0),c=n.fillCount===0,c&&n.fireEvent("beforefill",n,e,t),++n.fillCount,t.length&&e.appendChild(t,undefined,!0),c&&n.fireEvent("fillcomplete",n,e,t),--n.fillCount,t},sortByIndex:function(e,t){return e[e.persistenceProperty].index-t[t.persistenceProperty].index},onIdChanged:function(e,t,n,r){this.tree.onNodeIdChanged(e,t,n,r),this.callParent(arguments)},onProxyLoad:function(e){var t=this,n=e.wasSuccessful(),r=e.getRecords(),i=e.node,s=e.scope||t,o=[r,e,n];t.loading=!1,i.set("loading",!1),n&&(t.clearOnLoad||(r=t.cleanRecords(i,r)),r=t.fillNode(i,r)),Ext.callback(e.internalCallback,s,o),t.fireEvent("read",t,e.node,r,n),t.fireEvent("load",t,e.node,r,n),Ext.callback(e.callback,s,o)},cleanRecords:function(e,t){var n={},r=e.childNodes,i=0,s=r.length,o=[],u;for(;i<s;++i)n[r[i].getId()]=!0;for(i=0,s=t.length;i<s;++i)u=t[i],n[u.getId()]||o.push(u);return o},removeAll:function(){var e=this.getRootNode();e&&e.destroy(!0),this.fireEvent("clear",this)},doSort:function(e){var t=this;t.remoteSort?t.load():(t.tree.sort(e,!0),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),t.fireEvent("sort",t,t.sorters.getRange())}},function(){var e=this.prototype;e.indexSorter=new Ext.util.Sorter({sorterFn:e.sortByIndex})}),Ext.define("Ext.data.UuidGenerator",function(){function i(e,t){var n=e.toString(16);return n.length>t?n=n.substring(n.length-t):n.length<t&&(n=Ext.String.leftPad(n,t,"0")),n}function s(e,t){var n=Math.random()*(t-e+1);return Math.floor(n)+e}function o(e){if(typeof e=="number"){var t=Math.floor(e/r);return{lo:Math.floor(e-t*r),hi:t}}return e}var e=Math.pow(2,14),t=Math.pow(2,16),n=Math.pow(2,28),r=Math.pow(2,32);return{extend:Ext.data.IdGenerator,alias:"idgen.uuid",id:"uuid",version:4,constructor:function(){var e=this;e.callParent(arguments),e.parts=[],e.init()},generate:function(){var e=this,t=e.parts,n=e.timestamp;return t[0]=i(n.lo,8),t[1]=i(n.hi&65535,4),t[2]=i(n.hi>>>16&4095|e.version<<12,4),t[3]=i(128|e.clockSeq>>>8&63,2)+i(e.clockSeq&255,2),t[4]=i(e.salt.hi,4)+i(e.salt.lo,8),e.version==4?e.init():(++n.lo,n.lo>=r&&(n.lo=0,++n.hi)),t.join("-").toLowerCase()},getRecId:function(e){return e.getId()},init:function(){var i=this,u,a;i.version==4?(i.clockSeq=s(0,e-1),u=i.salt||(i.salt={}),a=i.timestamp||(i.timestamp={}),u.lo=s(0,r-1),u.hi=s(0,t-1),a.lo=s(0,r-1),a.hi=s(0,n-1)):(i.salt=o(i.salt),i.timestamp=o(i.timestamp),i.salt.hi|=256)},reconfigure:function(e){Ext.apply(this,e),this.init()}}}()),Ext.define("Ext.data.reader.Xml",{extend:Ext.data.reader.Reader,alternateClassName:"Ext.data.XmlReader",alias:"reader.xml",createAccessor:function(e){var t=this;return Ext.isEmpty(e)?Ext.emptyFn:Ext.isFunction(e)?e:function(n){return t.getNodeValue(Ext.DomQuery.selectNode(e,n))}},getNodeValue:function(e){if(e){typeof e.normalize=="function"&&e.normalize(),e=e.firstChild;if(e)return e.nodeValue}return undefined},getResponseData:function(e){var t=e.responseXML,n,r;return t?this.readRecords(t):(r="XML data not found in the response",n=new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:r}),this.fireEvent("exception",this,e,n),Ext.Logger.warn(r),n)},getData:function(e){return e.documentElement||e},getRoot:function(e){var t=e.nodeName,n=this.root;if(!n||t&&t==n)return e;if(Ext.DomQuery.isXml(e))return Ext.DomQuery.selectNode(n,e)},extractData:function(e){var t=this.record;return t!=e.nodeName?e=Ext.DomQuery.select(t,e):e=[e],this.callParent([e])},getAssociatedDataRoot:function(e,t){return Ext.DomQuery.select(t,e)[0]},readRecords:function(e){return Ext.isArray(e)&&(e=e[0]),this.xmlData=e,this.callParent([e])},createFieldAccessExpression:function(e,t,n){var r=this.namespace,i,s;return i=e.mapping||(r?r+"|":"")+e.name,typeof i=="function"?s=t+".mapping("+n+", this)":s='me.getNodeValue(Ext.DomQuery.selectNode("'+i+'", '+n+"))",s}}),Ext.define("Ext.data.writer.Xml",{extend:Ext.data.writer.Writer,alternateClassName:"Ext.data.XmlWriter",alias:"writer.xml",documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record",writeRecords:function(e,t){var n=this,r=[],i=0,s=t.length,o=n.documentRoot,u=n.record,a=t.length!==1,f,l;r.push(n.header||""),!o&&a&&(o=n.defaultDocumentRoot),o&&r.push("<",o,">");for(;i<s;++i){f=t[i],r.push("<",u,">");for(l in f)f.hasOwnProperty(l)&&r.push("<",l,">",f[l],"</",l,">");r.push("</",u,">")}return o&&r.push("</",o,">"),e.xmlData=r.join(""),e}}),Ext.define("Ext.data.XmlStore",{extend:Ext.data.Store,alias:"store.xml",constructor:function(e){e=Ext.apply({proxy:{type:"ajax",reader:"xml",writer:"xml"}},e),this.callParent([e])}}),Ext.define("Ext.data.association.BelongsTo",{extend:Ext.data.association.Association,alternateClassName:"Ext.data.BelongsToAssociation",alias:"association.belongsto",constructor:function(e){this.callParent(arguments);var t=this,n=t.ownerModel.prototype,r=t.associatedName,i=t.getterName||"get"+r,s=t.setterName||"set"+r;Ext.applyIf(t,{name:r,foreignKey:r.toLowerCase()+"_id",instanceName:r+"BelongsToInstance",associationKey:r.toLowerCase()}),n[i]=t.createGetter(),n[s]=t.createSetter()},createSetter:function(){var e=this,t=e.foreignKey,n=e.instanceName;return function(e,r,i){var s=e&&e.isModel,o=s?e.getId():e;s?this[n]=e:this[n]instanceof Ext.data.Model&&!this.isEqual(this.get(t),o)&&delete this[n],this.set(t,o),Ext.isFunction(r)&&(r={callback:r,scope:i||this});if(Ext.isObject(r))return this.save(r)}},createGetter:function(){var e=this,t=e.associatedName,n=e.associatedModel,r=e.foreignKey,i=e.primaryKey,s=e.instanceName;return function(e,o){e=e||{};var u=this,a=u.get(r),f,l,c;return e.reload===!0||u[s]===undefined?(l=Ext.ModelManager.create({},t),l.set(i,a),typeof e=="function"&&(e={callback:e,scope:o||u}),f=e.success,e.success=function(e){u[s]=e,f&&f.apply(this,arguments)},n.load(a,e),u[s]=l,l):(l=u[s],c=[l],o=o||e.scope||u,Ext.callback(e,o,c),Ext.callback(e.success,o,c),Ext.callback(e.failure,o,c),Ext.callback(e.callback,o,c),l)}},read:function(e,t,n){e[this.instanceName]=t.read([n]).records[0]}}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^person$/,"people"],[/^man$/,"men"],[/^(child)$/,"$1ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/people$/i,"person"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(e,t){this.singulars.unshift([e,t])},plural:function(e,t){this.plurals.unshift([e,t])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(e){return Ext.Array.indexOf(this.uncountable,e)!=-1},pluralize:function(e){if(this.isTransnumeral(e))return e;var t=this.plurals,n=t.length,r,i,s;for(s=0;s<n;s++){r=t[s],i=r[0];if(i==e||i.test&&i.test(e))return e.replace(i,r[1])}return e},singularize:function(e){if(this.isTransnumeral(e))return e;var t=this.singulars,n=t.length,r,i,s;for(s=0;s<n;s++){r=t[s],i=r[0];if(i==e||i.test&&i.test(e))return e.replace(i,r[1])}return e},classify:function(e){return Ext.String.capitalize(this.singularize(e))},ordinalize:function(e){var t=parseInt(e,10),n=t%10,r=t%100;if(11<=r&&r<=13)return e+"th";switch(n){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}},function(){var e={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},t;for(t in e)this.plural(t,e[t]),this.singular(e[t],t)}),Ext.define("Ext.data.association.HasMany",{extend:Ext.data.association.Association,alternateClassName:"Ext.data.HasManyAssociation",alias:"association.hasmany",constructor:function(e){var t=this,n,r;t.callParent(arguments),t.name=t.name||Ext.util.Inflector.pluralize(t.associatedName.toLowerCase()),n=t.ownerModel.prototype,r=t.name,Ext.applyIf(t,{storeName:r+"Store",foreignKey:t.ownerName.toLowerCase()+"_id"}),n[r]=t.createStore()},createStore:function(){var e=this,t=e.associatedModel,n=e.storeName,r=e.foreignKey,i=e.primaryKey,s=e.filterProperty,o=e.autoLoad,u=e.storeConfig||{};return function(){var e=this,a,f,l={},c;return e[n]===undefined&&(c=e.get(i),s?f={property:s,value:e.get(s),exactMatch:!0}:e.hasId(c)&&(f={property:r,value:c,exactMatch:!0}),l[r]=e.get(i),a=Ext.apply({},u,{model:t,filters:f?[f]:undefined,remoteFilter:!1,modelDefaults:l,disableMetaChangeEvent:!0}),e[n]=Ext.data.AbstractStore.create(a),o&&e[n].load()),e[n]}},read:function(e,t,n){
var r=e[this.name](),i,s,o,u;r.add(t.read(n).records),i=this.associatedModel.prototype.associations.findBy(function(t){return t.type==="belongsTo"&&t.associatedName===e.$className});if(i){s=r.data.items,o=s.length;for(u=0;u<o;u++)s[u][i.instanceName]=e}}}),Ext.define("Ext.data.association.HasOne",{extend:Ext.data.association.Association,alternateClassName:"Ext.data.HasOneAssociation",alias:"association.hasone",constructor:function(e){this.callParent(arguments);var t=this,n=t.ownerModel.prototype,r=t.associatedName,i=t.getterName||"get"+r,s=t.setterName||"set"+r;Ext.applyIf(t,{name:r,foreignKey:r.toLowerCase()+"_id",instanceName:r+"HasOneInstance",associationKey:r.toLowerCase()}),n[i]=t.createGetter(),n[s]=t.createSetter()},createSetter:function(){var e=this,t=e.foreignKey,n=e.instanceName;return function(e,r,i){var s=e&&e.isModel,o=s?e.getId():e;s?this[n]=e:this[n]instanceof Ext.data.Model&&!this.isEqual(this.get(t),o)&&delete this[n],this.set(t,o),Ext.isFunction(r)&&(r={callback:r,scope:i||this});if(Ext.isObject(r))return this.save(r)}},createGetter:function(){var e=this,t=e.ownerModel,n=e.associatedName,r=e.associatedModel,i=e.foreignKey,s=e.primaryKey,o=e.instanceName;return function(e,t){e=e||{};var u=this,a=u.get(i),f,l,c;return e.reload===!0||u[o]===undefined?(l=Ext.ModelManager.create({},n),l.set(s,a),typeof e=="function"&&(e={callback:e,scope:t||u}),f=e.success,e.success=function(e){u[o]=e,f&&f.apply(this,arguments)},r.load(a,e),u[o]=l,l):(l=u[o],c=[l],t=t||e.scope||u,Ext.callback(e,t,c),Ext.callback(e.success,t,c),Ext.callback(e.failure,t,c),Ext.callback(e.callback,t,c),l)}},read:function(e,t,n){var r=this.associatedModel.prototype.associations.findBy(function(t){return t.type==="belongsTo"&&t.associatedName===e.$className}),i=t.read([n]).records[0];e[this.instanceName]=i,r&&(i[r.instanceName]=e)}}),Ext.define("Ext.data.proxy.WebStorage",{extend:Ext.data.proxy.Client,alternateClassName:"Ext.data.WebStorageProxy",id:undefined,constructor:function(e){this.callParent(arguments),this.cache={},this.id=this.id||(this.store?this.store.storeId:undefined),this.initialize()},create:function(e,t,n){var r=this,i=e.records,s=i.length,o=r.getIds(),u,a,f;e.setStarted(),r.isHierarchical===undefined&&(r.isHierarchical=!!i[0].isNode,r.isHierarchical&&r.getStorageObject().setItem(r.getTreeKey(),!0));for(f=0;f<s;f++)a=i[f],a.phantom?(a.phantom=!1,u=r.getNextId()):u=a.getId(),r.setRecord(a,u),a.commit(),o.push(u);r.setIds(o),e.setCompleted(),e.setSuccessful(),typeof t=="function"&&t.call(n||r,e)},read:function(e,t,n){var r=this,i=[],s=0,o=!0,u=r.model,a,f,l,c,h;e.setStarted();if(r.isHierarchical)i=r.getTreeData();else{a=r.getIds(),f=a.length,h=e.id;if(h)c=r.getRecord(h),c!==null&&(l=new u(c,h,c)),l?i.push(l):o=!1;else for(;s<f;s++)h=a[s],c=r.getRecord(h),i.push(new u(c,h,c))}o&&e.setSuccessful(),e.setCompleted(),e.resultSet=Ext.create("Ext.data.ResultSet",{records:i,total:i.length,loaded:!0}),typeof t=="function"&&t.call(n||r,e)},update:function(e,t,n){var r=e.records,i=r.length,s=this.getIds(),o,u,a;e.setStarted();for(a=0;a<i;a++)o=r[a],this.setRecord(o),o.commit(),u=o.getId(),u!==undefined&&Ext.Array.indexOf(s,u)==-1&&s.push(u);this.setIds(s),e.setCompleted(),e.setSuccessful(),typeof t=="function"&&t.call(n||this,e)},destroy:function(e,t,n){var r=this,i=e.records,s=r.getIds(),o=s.length,u=[],a={},f=i.length,l;e.setStarted();for(;f--;)Ext.apply(a,r.removeRecord(i[f]));for(f=0;f<o;f++)l=s[f],a[l]||u.push(l);r.setIds(u),e.setCompleted(),e.setSuccessful(),typeof t=="function"&&t.call(n||r,e)},getRecord:function(e){var t=this,n=t.cache,r=n[e]?n[e]:Ext.decode(t.getStorageObject().getItem(t.getRecordKey(e)));return r?(n[e]=r,r[t.model.prototype.idProperty]=e,r):null},setRecord:function(e,t){t?e.setId(t):t=e.getId();var n=this,r=e.data,i={},s=n.model,o=s.prototype.fields.items,u=o.length,a=0,f,l,c,h;for(;a<u;a++)f=o[a],l=f.name,f.persist&&(i[l]=r[l]);delete i[n.model.prototype.idProperty],e.isNode&&e.get("depth")===1&&delete i.parentId,c=n.getStorageObject(),h=n.getRecordKey(t),n.cache[t]=i,c.removeItem(h),c.setItem(h,Ext.encode(i))},removeRecord:function(e){var t=this,n=e.getId(),r={},i,s;r[n]=e,t.getStorageObject().removeItem(t.getRecordKey(n)),delete t.cache[n];if(e.childNodes){s=e.childNodes;for(i=s.length;i--;)Ext.apply(r,t.removeRecord(s[i]))}return r},getRecordKey:function(e){return e.isModel&&(e=e.getId()),Ext.String.format("{0}-{1}",this.id,e)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.id)},getTreeKey:function(){return Ext.String.format("{0}-tree",this.id)},getIds:function(){var e=this,t=(e.getStorageObject().getItem(e.id)||"").split(","),n=e.model,r=t.length,i=n.prototype.fields.get(n.prototype.idProperty).type.type==="string",s;if(r==1&&t[0]==="")t=[];else for(s=0;s<r;s++)t[s]=i?t[s]:+t[s];return t},setIds:function(e){var t=this.getStorageObject(),n=e.join(",");t.removeItem(this.id),Ext.isEmpty(n)||t.setItem(this.id,n)},getNextId:function(){var e=this,t=e.getStorageObject(),n=e.getRecordCounterKey(),r=e.model,i=r.prototype.fields.get(r.prototype.idProperty).type.type==="string",s;return s=e.idGenerator.generate(),t.setItem(n,s),i||(s=+s),s},getTreeData:function(){var e=this,t=e.getIds(),n=t.length,r=[],i={},s=[],o=0,u=e.model,a=u.prototype.idProperty,f,l,c,h,p,d;for(;o<n;o++)d=t[o],l=e.getRecord(d),r.push(l),i[d]=l,l.parentId||s.push(l);f=s.length,Ext.Array.sort(r,e.sortByParentId);for(o=f;o<n;o++){l=r[o],h=l.parentId;if(!c||c[a]!==h)c=i[h],c.children=p=[];p.push(l)}for(o=n;o--;)l=r[o],!l.children&&!l.leaf&&(l.loaded=!0);for(o=f;o--;)l=s[o],s[o]=new u(l,l[a],l);return s},sortByParentId:function(e,t){return(e.parentId||0)-(t.parentId||0)},initialize:function(){var e=this,t=e.getStorageObject(),n=+t.getItem(e.getRecordCounterKey());t.setItem(e.id,t.getItem(e.id)||""),t.getItem(e.getTreeKey())&&(e.isHierarchical=!0),e.idGenerator=new Ext.data.SequentialIdGenerator({seed:n?n+1:1})},clear:function(){var e=this,t=e.getStorageObject(),n=e.getIds(),r=n.length,i;for(i=0;i<r;i++)t.removeItem(e.getRecordKey(n[i]));t.removeItem(e.getRecordCounterKey()),t.removeItem(e.getTreeKey()),t.removeItem(e.id),e.cache={}},getStorageObject:function(){}}),Ext.define("Ext.data.proxy.LocalStorage",{extend:Ext.data.proxy.WebStorage,alias:"proxy.localstorage",alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}}),Ext.define("Ext.data.proxy.Rest",{extend:Ext.data.proxy.Ajax,alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},defaultActionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},appendId:!0,batchActions:!1,buildUrl:function(e){var t=this,n=e.operation,r=n.records||[],i=r[0],s=t.format,o=t.getUrl(e),u=i?i.getId():n.id;return t.appendId&&t.isValidId(u)&&(o.match(/\/$/)||(o+="/"),o+=u),s&&(o.match(/\.$/)||(o+="."),o+=s),e.url=o,t.callParent(arguments)},isValidId:function(e){return e||e===0}}),Ext.define("Ext.data.proxy.SessionStorage",{extend:Ext.data.proxy.WebStorage,alias:"proxy.sessionstorage",alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}}),Ext.define("Ext.dd.DDTarget",{extend:Ext.dd.DragDrop,constructor:function(e,t,n){e&&this.initTarget(e,t,n)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.define("Ext.dd.DragTracker",{mixins:{observable:Ext.util.Observable},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(e){var t=this;Ext.apply(t,e),t.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","beforedragstart","dragstart","dragend","drag"),t.dragRegion=new Ext.util.Region(0,0,0,0),t.el&&t.initEl(t.el),t.mixins.observable.constructor.call(t),t.disabled&&t.disable()},initEl:function(e){var t=this;t.el=Ext.get(e),t.handle=Ext.get(t.delegate),t.delegate=t.handle?undefined:t.delegate,t.handle||(t.handle=t.el),t.handleListeners={scope:t,delegate:t.delegate,mousedown:t.onMouseDown},(t.trackOver||t.overCls)&&Ext.apply(t.handleListeners,{mouseover:t.onMouseOver,mouseout:t.onMouseOut}),t.mon(t.handle,t.handleListeners)},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){var e=this;e.active&&e.endDrag({}),e.clearListeners(),e.mun(e.handle,e.handleListeners),e.el=e.handle=null},onMouseOver:function(e,t){var n=this;!n.disabled&&(Ext.EventManager.contains(e)||n.delegate)&&(n.mouseIsOut=!1,n.overCls&&n.el.addCls(n.overCls),n.fireEvent("mouseover",n,e,n.delegate?e.getTarget(n.delegate,t):n.handle))},onMouseOut:function(e){var t=this;t.mouseIsDown?t.mouseIsOut=!0:(t.overCls&&t.el.removeCls(t.overCls),t.fireEvent("mouseout",t,e))},onMouseDown:function(e,t){var n=this,r;if(n.disabled||e.dragTracked)return;n.dragTarget=n.delegate?t:n.handle.dom,n.startXY=n.lastXY=e.getXY(),n.startRegion=Ext.fly(n.dragTarget).getRegion();if(n.fireEvent("mousedown",n,e)===!1||n.fireEvent("beforedragstart",n,e)===!1||n.onBeforeStart(e)===!1)return;n.mouseIsDown=!0,e.dragTracked=!0,r=n.el.dom,Ext.isIE&&r.setCapture&&r.setCapture(),n.preventDefault!==!1&&e.preventDefault(),Ext.getDoc().on({scope:n,mouseup:n.onMouseUp,mousemove:n.onMouseMove,selectstart:n.stopSelect}),n.autoStart&&(n.timer=Ext.defer(n.triggerStart,n.autoStart===!0?1e3:n.autoStart,n,[e]))},onMouseMove:function(e,t){var n=this,r=e.getXY(),i=n.startXY;e.preventDefault(),n.lastXY=r;if(!n.active){if(!(Math.max(Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]))>n.tolerance))return;n.triggerStart(e)}n.fireEvent("mousemove",n,e)===!1?n.onMouseUp(e):(n.onDrag(e),n.fireEvent("drag",n,e))},onMouseUp:function(e){var t=this;t.mouseIsDown=!1,t.mouseIsOut&&(t.mouseIsOut=!1,t.onMouseOut(e)),e.preventDefault(),Ext.isIE&&document.releaseCapture&&document.releaseCapture(),t.fireEvent("mouseup",t,e),t.endDrag(e)},endDrag:function(e){var t=this,n=t.active;Ext.getDoc().un({mousemove:t.onMouseMove,mouseup:t.onMouseUp,selectstart:t.stopSelect,scope:t}),t.clearStart(),t.active=!1,n&&(t.onEnd(e),t.fireEvent("dragend",t,e)),t._constrainRegion=Ext.EventObject.dragTracked=null},triggerStart:function(e){var t=this;t.clearStart(),t.active=!0,t.onStart(e),t.fireEvent("dragstart",t,e)},clearStart:function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null)},stopSelect:function(e){return e.stopEvent(),!1},onBeforeStart:function(e){},onStart:function(e){},onDrag:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var e=this;if(e.constrainTo){if(e.constrainTo instanceof Ext.util.Region)return e.constrainTo;e._constrainRegion||(e._constrainRegion=Ext.fly(e.constrainTo).getViewRegion())}else e._constrainRegion||(e._constrainRegion=e.getDragCt().getViewRegion());return e._constrainRegion},getXY:function(e){return e?this.constrainModes[e](this,this.lastXY):this.lastXY},getOffset:function(e){var t=this.getXY(e),n=this.startXY;return[t[0]-n[0],t[1]-n[1]]},constrainModes:{point:function(e,t){var n=e.dragRegion,r=e.getConstrainRegion();return r?(n.x=n.left=n[0]=n.right=t[0],n.y=n.top=n[1]=n.bottom=t[1],n.constrainTo(r),[n.left,n.top]):t},dragTarget:function(e,t){var n=e.startXY,r=e.startRegion.copy(),i=e.getConstrainRegion(),s;return i?(r.translateBy(t[0]-n[0],t[1]-n[1]),r.right>i.right&&(t[0]+=s=i.right-r.right,r.left+=s),r.left<i.left&&(t[0]+=i.left-r.left),r.bottom>i.bottom&&(t[1]+=s=i.bottom-r.bottom,r.top+=s),r.top<i.top&&(t[1]+=i.top-r.top),t):t}}}),Ext.define("Ext.dd.DragZone",{extend:Ext.dd.DragSource,constructor:function(e,t){var n=this,r=n.containerScroll;n.callParent([e,t]),r&&(e=n.scrollEl||e,e=Ext.get(e),Ext.isObject(r)&&(e.ddScrollConfig=r),Ext.dd.ScrollManager.register(e))},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(e,t){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(e,t),!0},getRepairXY:function(e){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,constructor:function(){var e=Ext.dd.DragDropManager;e.fireEvents=Ext.Function.createSequence(e.fireEvents,this.onFire,this),e.stopDrag=Ext.Function.createSequence(e.stopDrag,this.onStop,this),this.doScroll=Ext.Function.bind(this.doScroll,this),this.ddmInstance=e,this.els={},this.dragEl=null,this.proc={}},onStop:function(e){var t=Ext.dd.ScrollManager;t.dragEl=null,t.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){if(this.ddmInstance.dragCurrent){var e=this.proc,t=e.el,n=e.el.ddScrollConfig,r=n&&n.increment?n.increment:this.increment,i=n&&"animate"in n?n.animate:this.animate;i?t.scroll(e.dir,r,!0,this.animDuration,this.triggerRefresh):t.scroll(e.dir,r)&&this.triggerRefresh()}},clearProc:function(){var e=this.proc;e.id&&clearInterval(e.id),e.id=0,e.el=null,e.dir=""},startProc:function(e,t){this.clearProc(),this.proc.el=e,this.proc.dir=t;var n=e.ddScrollConfig?e.ddScrollConfig.ddGroup:undefined,r=e.ddScrollConfig&&e.ddScrollConfig.frequency?e.ddScrollConfig.frequency:this.frequency;if(n===undefined||this.ddmInstance.dragCurrent.ddGroup==n)this.proc.id=setInterval(this.doScroll,r)},onFire:function(e,t){if(t||!this.ddmInstance.dragCurrent)return;if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent)this.dragEl=this.ddmInstance.dragCurrent,this.refreshCache();var n=e.getPoint(),r=this.proc,i=this.els,s,o,u,a;for(s in i){o=i[s],u=o._region,a=o.ddScrollConfig?o.ddScrollConfig:this;if(u&&u.contains(n)&&o.isScrollable()){if(u.bottom-n.y<=a.vthresh){r.el!=o&&this.startProc(o,"down");return}if(u.right-n.x<=a.hthresh){r.el!=o&&this.startProc(o,"right");return}if(n.y-u.top<=a.vthresh){r.el!=o&&this.startProc(o,"up");return}if(n.x-u.left<=a.hthresh){r.el!=o&&this.startProc(o,"left");return}}}this.clearProc()},register:function(e){if(Ext.isArray(e))for(var t=0,n=e.length;t<n;t++)this.register(e[t]);else e=Ext.get(e),this.els[e.id]=e},unregister:function(e){if(Ext.isArray(e))for(var t=0,n=e.length;t<n;t++)this.unregister(e[t]);else e=Ext.get(e),delete this.els[e.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:undefined,refreshCache:function(){var e=this.els,t;for(t in e)typeof e[t]=="object"&&(e[t]._region=e[t].getRegion())}}),Ext.define("Ext.dd.DropTarget",{extend:Ext.dd.DDTarget,constructor:function(e,t){this.el=Ext.get(e),Ext.apply(this,t),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(e,t,n){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(e,t,n){return this.dropAllowed},notifyOut:function(e,t,n){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(e,t,n){return!1},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.define("Ext.dd.Registry",{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(e,t){if(typeof e=="string")return e;var n=e.id;return!n&&t!==!1&&(n="extdd-"+ ++this.autoIdSeed,e.id=n),n},register:function(e,t){t=t||{},typeof e=="string"&&(e=document.getElementById(e)),t.ddel=e,this.elements[this.getId(e)]=t,t.isHandle!==!1&&(this.handles[t.ddel.id]=t);if(t.handles){var n=t.handles,r,i;for(r=0,i=n.length;r<i;r++)this.handles[this.getId(n[r])]=t}},unregister:function(e){var t=this.getId(e,!1),n=this.elements[t],r,i,s;if(n){delete this.elements[t];if(n.handles){r=n.handles;for(i=0,s=r.length;i<s;i++)delete this.handles[this.getId(r[i],!1)]}}},getHandle:function(e){return typeof e!="string"&&(e=e.id),this.handles[e]},getHandleFromEvent:function(e){var t=e.getTarget();return t?this.handles[t.id]:null},getTarget:function(e){return typeof e!="string"&&(e=e.id),this.elements[e]},getTargetFromEvent:function(e){var t=e.getTarget();return t?this.elements[t.id]||this.handles[t.id]:null}}),Ext.define("Ext.dd.DropZone",{extend:Ext.dd.DropTarget,getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(e,t,n,r){},onNodeOver:function(e,t,n,r){return this.dropAllowed},onNodeOut:function(e,t,n,r){},onNodeDrop:function(e,t,n,r){return!1},onContainerOver:function(e,t,n){return this.dropNotAllowed},onContainerDrop:function(e,t,n){return!1},notifyEnter:function(e,t,n){return this.dropNotAllowed},notifyOver:function(e,t,n){var r=this.getTargetFromEvent(t);return r?(this.lastOverNode!=r&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,e,t,n),this.onNodeEnter(r,e,t,n),this.lastOverNode=r),this.onNodeOver(r,e,t,n)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,e,t,n),this.lastOverNode=null),this.onContainerOver(e,t,n))},notifyOut:function(e,t,n){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,e,t,n),this.lastOverNode=null)},notifyDrop:function(e,t,n){var r=this,i=r.getTargetFromEvent(t),s=i?r.onNodeDrop(i,e,t,n):r.onContainerDrop(e,t,n);return r.lastOverNode&&(r.onNodeOut(r.lastOverNode,e,t,n),r.lastOverNode=null),s},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.define("Ext.direct.Event",{alias:"direct.event",status:!0,constructor:function(e){Ext.apply(this,e)},getName:function(){return this.name},getData:function(){return this.data}}),Ext.define("Ext.direct.RemotingEvent",{extend:Ext.direct.Event,alias:"direct.rpc",getTransaction:function(){var e=this;return e.transaction||Ext.direct.Manager.getTransaction(e.tid)}}),Ext.define("Ext.direct.ExceptionEvent",{extend:Ext.direct.RemotingEvent,alias:"direct.exception",status:!1}),Ext.define("Ext.direct.JsonProvider",{extend:Ext.direct.Provider,alias:"direct.jsonprovider",parseResponse:function(e){return Ext.isEmpty(e.responseText)?null:Ext.isObject(e.responseText)?e.responseText:Ext.decode(e.responseText)},createEvents:function(e){var t=this,n=null,r=[],i,s,o;try{n=t.parseResponse(e)}catch(u){return i=new Ext.direct.ExceptionEvent({data:u,xhr:e,code:Ext.direct.Manager.exceptions.PARSE,message:"Error parsing json response: \n\n "+u}),[i]}if(Ext.isArray(n))for(s=0,o=n.length;s<o;++s)r.push(t.createEvent(n[s]));else Ext.isObject(n)&&r.push(t.createEvent(n));return r},createEvent:function(e){return typeof e=="object"&&"type"in e?Ext.create("direct."+e.type,e):new Ext.direct.ExceptionEvent({data:e,code:Ext.direct.Manager.exceptions.DATA,message:"Invalid data: event type is not specified"})}}),Ext.define("Ext.direct.PollingProvider",{extend:Ext.direct.JsonProvider,alias:"direct.pollingprovider",interval:3e3,constructor:function(e){var t=this;t.callParent(arguments),t.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){var e=this,t=e.url;t&&!e.pollTask&&(e.pollTask=Ext.TaskManager.start({run:e.runPoll,interval:e.interval,scope:e}),e.fireEvent("connect",e))},disconnect:function(){var e=this;e.pollTask&&(Ext.TaskManager.stop(e.pollTask),delete e.pollTask,e.fireEvent("disconnect",e))},runPoll:function(){var e=this,t=e.url;e.fireEvent("beforepoll",e)!==!1&&(Ext.isFunction(t)?t(e.baseParams):Ext.Ajax.request({url:t,callback:e.onData,scope:e,params:e.baseParams}),e.fireEvent("poll",e))},onData:function(e,t,n){var r=this,i,s,o;if(t){o=r.createEvents(n);for(i=0,s=o.length;i<s;++i)r.fireEvent("data",r,o[i])}else o=new Ext.direct.ExceptionEvent({data:null,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:n}),r.fireEvent("data",r,o)}}),Ext.define("Ext.direct.RemotingMethod",{constructor:function(e){var t=this,n=Ext.isDefined(e.params)?e.params:e.len,r,i,s,o;t.name=e.name,t.formHandler=e.formHandler;if(Ext.isNumeric(n))t.len=n,t.ordered=!0;else{t.params={},i=n.length;for(s=0;s<i;s++)o=n[s],r=Ext.isObject(o)?o.name:o,t.params[r]=!0}},getArgs:function(e,t,n){var r=this,i=[],s,o;if(r.ordered){if(r.len>0)if(t)for(s=0,o=t.length;s<o;s++)i.push(e[t[s]]);else n&&i.push(e)}else i.push(e);return i},getCallData:function(e){var t=this,n=null,r=t.len,i=t.params,s,o,u,a;if(t.ordered)s=e[r],o=e[r+1],a=e[r+2],r!==0&&(n=e.slice(0,r));else{n=Ext.apply({},e[0]),s=e[1],o=e[2],a=e[3];for(u in n)n.hasOwnProperty(u)&&!i[u]&&delete n[u]}return{data:n,callback:s,scope:o,options:a}}}),Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},constructor:function(e){var t=this;Ext.apply(t,e),t.id=t.tid=++t.self.TRANSACTION_ID,t.retryCount=0},send:function(){var e=this;e.provider.queueTransaction(e)},retry:function(){var e=this;e.retryCount++,e.send()},getProvider:function(){return this.provider}}),Ext.define("Ext.direct.RemotingProvider",{extend:Ext.direct.JsonProvider,alias:"direct.remotingprovider",enableBuffer:10,maxRetries:1,constructor:function(e){var t=this;t.callParent(arguments),t.addEvents("beforecall","call","beforecallback"),t.namespace=Ext.isString(t.namespace)?Ext.ns(t.namespace):t.namespace||Ext.global,t.transactions=new Ext.util.MixedCollection,t.callBuffer=[]},getNamespace:function(e,t){var n,r,i,s;e=e||Ext.global,n=t.toString().split(".");for(i=0,s=n.length;i<s;i++){r=n[i],e=e[r];if(typeof e=="undefined")return e}return e},createNamespaces:function(e,t){var n,r;e=e||Ext.global,n=t.toString().split(".");for(var i=0,s=n.length;i<s;i++)r=n[i],e[r]=e[r]||{},e=e[r];return e},initAPI:function(){var e=this,t=e.actions,n=e.namespace,r,i,s,o,u,a;for(r in t)if(t.hasOwnProperty(r)){e.disableNestedActions?(i=n[r],i||(i=n[r]={})):(i=e.getNamespace(n,r),i||(i=e.createNamespaces(n,r))),s=t[r];for(o=0,u=s.length;o<u;++o)a=new Ext.direct.RemotingMethod(s[o]),i[a.name]=e.createHandler(r,a)}},createHandler:function(e,t){var n=this,r=Array.prototype.slice,i;return t.formHandler?i=function(r,i,s){n.configureFormRequest(e,t,r,i,s)}:i=function(){n.configureRequest(e,t,r.call(arguments,0))},i.directCfg={action:e,method:t},i},isConnected:function(){return!!this.connected},connect:function(){var e=this;e.url&&(e.initAPI(),e.connected=!0,e.fireEvent("connect",e))},disconnect:function(){var e=this;e.connected&&(e.connected=!1,e.fireEvent("disconnect",e))},runCallback:function(e,t){var n=!!t.status,r=n?"success":"failure",i,s,o;e&&e.callback&&(i=e.callback,s=e.callbackOptions,o=typeof t.result!="undefined"?t.result:t.data,Ext.isFunction(i)?i(o,t,n,s):(Ext.callback(i[r],i.scope,[o,t,n,s]),Ext.callback(i.callback,i.scope,[o,t,n,s])))},onData:function(e,t,n){var r=this,i,s,o,u,a,f;if(t){o=r.createEvents(n);for(i=0,s=o.length;i<s;++i)u=o[i],a=r.getTransaction(u),r.fireEvent("data",r,u),a&&r.fireEvent("beforecallback",r,u,a)!==!1&&(r.runCallback(a,u,!0),Ext.direct.Manager.removeTransaction(a))}else{f=[].concat(e.transaction);for(i=0,s=f.length;i<s;++i)a=r.getTransaction(f[i]),a&&a.retryCount<r.maxRetries?a.retry():(u=new Ext.direct.ExceptionEvent({data:null,transaction:a,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:n}),r.fireEvent("data",r,u),a&&r.fireEvent("beforecallback",r,a)!==!1&&(r.runCallback(a,u,!1),Ext.direct.Manager.removeTransaction(a)))}},getTransaction:function(e){return e&&e.tid?Ext.direct.Manager.getTransaction(e.tid):null},configureRequest:function(e,t,n){var r=this,i,s,o,u,a,f,l;i=t.getCallData(n),s=i.data,o=i.callback,u=i.scope,a=i.options||{},l=Ext.apply({},{provider:r,args:n,action:e,method:t.name,data:s,callbackOptions:a,callback:u&&Ext.isFunction(o)?Ext.Function.bind(o,u):o}),a.timeout&&Ext.applyIf(l,{timeout:a.timeout}),f=new Ext.direct.Transaction(l),r.fireEvent("beforecall",r,f,t)!==!1&&(Ext.direct.Manager.addTransaction(f),r.queueTransaction(f),r.fireEvent("call",r,f,t))},getCallData:function(e){return{action:e.action,method:e.method,data:e.data,type:"rpc",tid:e.id}},sendRequest:function(e){var t=this,n,r,i,s=t.enableUrlEncode,o,u;n={url:t.url,callback:t.onData,scope:t,transaction:e,timeout:t.timeout},e.timeout&&(n.timeout=e.timeout);if(Ext.isArray(e)){r=[];for(o=0,u=e.length;o<u;++o)r.push(t.getCallData(e[o]))}else r=t.getCallData(e);s?(i={},i[Ext.isString(s)?s:"data"]=Ext.encode(r),n.params=i):n.jsonData=r,Ext.Ajax.request(n)},queueTransaction:function(e){var t=this,n=t.enableBuffer;if(e.form){t.sendFormRequest(e);return}if(n===!1||typeof e.timeout!="undefined"){t.sendRequest(e);return}t.callBuffer.push(e),n?(t.callTask||(t.callTask=new Ext.util.DelayedTask(t.combineAndSend,t)),t.callTask.delay(Ext.isNumber(n)?n:10)):t.combineAndSend()},combineAndSend:function(){var e=this,t=e.callBuffer,n=t.length;n>0&&(e.sendRequest(n==1?t[0]:t),e.callBuffer=[])},configureFormRequest:function(e,t,n,r,i){var s=this,o,u,a;o=new Ext.direct.Transaction({provider:s,action:e,method:t.name,args:[n,r,i],callback:i&&Ext.isFunction(r)?Ext.Function.bind(r,i):r,isForm:!0}),s.fireEvent("beforecall",s,o,t)!==!1&&(Ext.direct.Manager.addTransaction(o),u=String(n.getAttribute("enctype")).toLowerCase()=="multipart/form-data",a={extTID:o.id,extAction:e,extMethod:t.name,extType:"rpc",extUpload:String(u)},Ext.apply(o,{form:Ext.getDom(n),isUpload:u,params:r&&Ext.isObject(r.params)?Ext.apply(a,r.params):a}),s.fireEvent("call",s,o,t),s.sendFormRequest(o))},sendFormRequest:function(e){var t=this;Ext.Ajax.request({url:t.url,params:e.params,callback:t.onData,scope:t,form:e.form,isUpload:e.isUpload,transaction:e})}}),Ext.define("Ext.dom.Layer",{extend:Ext.Element,alternateClassName:"Ext.Layer",statics:{shims:[]},isLayer:!0,localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(e,t){e=e||{};var n=this,r=Ext.DomHelper,i=e.parentEl,s=i?Ext.getDom(i):document.body,o=e.hideMode,u=Ext.baseCSSPrefix+(e.fixed&&!Ext.isIE6&&!Ext.isIEQuirks?"fixed-layer":"layer");n.el=n,t&&(n.dom=Ext.getDom(t)),n.dom?(n.addCls(u),n.dom.parentNode||s.appendChild(n.dom)):n.dom=r.append(s,e.dh||{tag:"div",cls:u}),e.preventSync&&(n.preventSync=!0),e.id?n.id=n.dom.id=e.id:n.id=Ext.id(n.dom),Ext.Element.addToCache(n),e.cls&&n.addCls(e.cls),n.constrain=e.constrain!==!1,o?(n.setVisibilityMode(Ext.Element[o.toUpperCase()]),n.visibilityMode==Ext.Element.ASCLASS&&(n.visibilityCls=e.visibilityCls)):e.useDisplay?n.setVisibilityMode(Ext.Element.DISPLAY):n.setVisibilityMode(Ext.Element.VISIBILITY),e.shadow?(n.shadowOffset=e.shadowOffset||4,n.shadow=new Ext.Shadow({offset:n.shadowOffset,mode:e.shadow,fixed:e.fixed}),n.disableShadow()):n.shadowOffset=0,n.useShim=e.shim!==!1&&Ext.useShims,e.hidden===!0?n.hide():e.hidden===!1&&n.show()},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var e=this,t,n;return e.useShim?(e.shim||(t=e.self.shims.shift(),t||(t=e.createShim(),t.enableDisplayMode("block"),t.hide()),n=e.dom.parentNode,t.dom.parentNode!=n&&n.insertBefore(t.dom,e.dom),e.shim=t),e.shim):null},hideShim:function(){var e=this;e.shim&&(e.shim.setDisplayed(!1),e.self.shims.push(e.shim),delete e.shim)},disableShadow:function(){var e=this;e.shadow&&!e.shadowDisabled&&(e.shadowDisabled=!0,e.shadow.hide(),e.lastShadowOffset=e.shadowOffset,e.shadowOffset=0)},enableShadow:function(e){var t=this;t.shadow&&t.shadowDisabled&&(t.shadowDisabled=!1,t.shadowOffset=t.lastShadowOffset,delete t.lastShadowOffset,e&&t.sync(!0))},sync:function(e){var t=this,n=t.shadow,r,i,s,o,u,a,f,l,c,h;if(t.preventSync)return;return!t.updating&&t.isVisible()&&(n||t.useShim)&&(o=t.getShim(),u=t[t.localXYNames.get](),a=u[0],f=u[1],l=t.dom.offsetWidth,c=t.dom.offsetHeight,n&&!t.shadowDisabled?(e&&!n.isVisible()?n.show(t):n.realign(a,f,l,c),o&&(h=o.getStyle("z-index"),h>t.zindex&&t.shim.setStyle("z-index",t.zindex-2),o.show(),n.isVisible()?(r=n.el.getXY(),i=o.dom.style,s=n.el.getSize(),Ext.supports.CSS3BoxShadow&&(s.height+=6,s.width+=4,r[0]-=2,r[1]-=4),i.left=r[0]+"px",i.top=r[1]+"px",i.width=s.width+"px",i.height=s.height+"px"):(o.setSize(l,c),o[t.localXYNames.set](a,f)))):o&&(h=o.getStyle("z-index"),h>t.zindex&&t.shim.setStyle("z-index",t.zindex-2),o.show(),o.setSize(l,c),o[t.localXYNames.set](a,f))),t},remove:function(){this.hideUnders(),this.callParent()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){if(this.constrain){var e=Ext.Element.getViewWidth(),t=Ext.Element.getViewHeight(),n=Ext.getDoc().getScroll(),r=this.getXY(),i=r[0],s=r[1],o=this.shadowOffset,u=this.dom.offsetWidth+o,a=this.dom.offsetHeight+o,f=!1;i+u>e+n.left&&(i=e-u-o,f=!0),s+a>t+n.top&&(s=t-a-o,f=!0),i<n.left&&(i=n.left,f=!0),s<n.top&&(s=n.top,f=!0),f&&(Ext.Layer.superclass.setXY.call(this,[i,s]),this.sync())}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(e,t,n,r,i){var s=this,o;return o=function(){e&&s.sync(!0),r&&r()},e||s.hideUnders(!0),s.callParent([e,t,n,r,i]),t||o(),s},beforeFx:function(){return this.beforeAction(),this.callParent(arguments)},afterFx:function(){this.callParent(arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(e){return this.callParent(arguments),this.sync()},setTop:function(e){return this.callParent(arguments),this.sync()},setLeftTop:function(e,t){return this.callParent(arguments),this.sync()},setLocalX:function(){return this.callParent(arguments),this.sync()},setLocalXY:function(){return this.callParent(arguments),this.sync()},setLocalY:function(){return this.callParent(arguments),this.sync()},setXY:function(e,t,n,r,i){var s=this;return r=s.createCB(r),s.fixDisplay(),s.beforeAction(),s.callParent([e,t,n,r,i]),t||r(),s},createCB:function(e){var t=this,n=t.shadow&&t.shadow.isVisible();return function(){t.constrainXY(),t.sync(n),e&&e()}},setX:function(e,t,n,r,i){return this.setXY([e,this.getY()],t,n,r,i),this},setY:function(e,t,n,r,i){return this.setXY([this.getX(),e],t,n,r,i),this},setSize:function(e,t,n,r,i,s){var o=this;return i=o.createCB(i),o.beforeAction(),o.callParent([e,t,n,r,i,s]),n||i(),o},setWidth:function(e,t,n,r,i){var s=this;return r=s.createCB(r),s.beforeAction(),s.callParent([e,t,n,r,i]),t||r(),s},setHeight:function(e,t,n,r,i){var s=this;return r=s.createCB(r),s.beforeAction(),s.callParent([e,t,n,r,i]),t||r(),s},setBounds:function(e,t,n,r,i,s,o,u){var a=this;return o=a.createCB(o),a.beforeAction(),i?a.callParent([e,t,n,r,i,s,o,u]):(Ext.Layer.superclass.setXY.call(a,[e,t]),Ext.Layer.superclass.setSize.call(a,n,r),o()),a},setZIndex:function(e){var t=this;return t.zindex=e,t.getShim()&&t.shim.setStyle("z-index",e++),t.shadow&&t.shadow.setZIndex(e++),t.setStyle("z-index",e)},onOpacitySet:function(e){var t=this.shadow;t&&t.setOpacity(e)}}),Ext.define("Ext.draw.Matrix",{constructor:function(e,t,n,r,i,s){e!=null?this.matrix=[[e,n,i],[t,r,s],[0,0,1]]:this.matrix=[[1,0,0],[0,1,0],[0,0,1]]},add:function(e,t,n,r,i,s){var o=this,u=[[],[],[]],a=[[e,n,i],[t,r,s],[0,0,1]],f,l,c,h;for(f=0;f<3;f++)for(l=0;l<3;l++){h=0;for(c=0;c<3;c++)h+=o.matrix[f][c]*a[c][l];u[f][l]=h}o.matrix=u},prepend:function(e,t,n,r,i,s){var o=this,u=[[],[],[]],a=[[e,n,i],[t,r,s],[0,0,1]],f,l,c,h;for(f=0;f<3;f++)for(l=0;l<3;l++){h=0;for(c=0;c<3;c++)h+=a[f][c]*o.matrix[c][l];u[f][l]=h}o.matrix=u},invert:function(){var e=this.matrix,t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s=e[0][2],o=e[1][2],u=t*i-n*r;return new Ext.draw.Matrix(i/u,-n/u,-r/u,t/u,(r*o-i*s)/u,(n*s-t*o)/u)},clone:function(){var e=this.matrix,t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s=e[0][2],o=e[1][2];return new Ext.draw.Matrix(t,n,r,i,s,o)},translate:function(e,t){this.prepend(1,0,0,1,e,t)},scale:function(e,t,n,r){var i=this;t==null&&(t=e),i.add(e,0,0,t,n*(1-e),r*(1-t))},rotate:function(e,t,n){e=Ext.draw.Draw.rad(e);var r=this,i=+Math.cos(e).toFixed(9),s=+Math.sin(e).toFixed(9);r.add(i,s,-s,i,t-i*t+s*n,-(s*t)+n-i*n)},x:function(e,t){var n=this.matrix;return e*n[0][0]+t*n[0][1]+n[0][2]},y:function(e,t){var n=this.matrix;return e*n[1][0]+t*n[1][1]+n[1][2]},get:function(e,t){return+this.matrix[e][t].toFixed(4)},toString:function(){var e=
this;return[e.get(0,0),e.get(0,1),e.get(1,0),e.get(1,1),0,0].join()},toSvg:function(){var e=this;return"matrix("+[e.get(0,0),e.get(1,0),e.get(0,1),e.get(1,1),e.get(0,2),e.get(1,2)].join()+")"},toFilter:function(e,t){var n=this;return e=e||0,t=t||0,"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', filterType='bilinear', M11="+n.get(0,0)+", M12="+n.get(0,1)+", M21="+n.get(1,0)+", M22="+n.get(1,1)+", Dx="+(n.get(0,2)+e)+", Dy="+(n.get(1,2)+t)+")"},offset:function(){var e=this.matrix;return[(e[0][2]||0).toFixed(4),(e[1][2]||0).toFixed(4)]},split:function(){function e(e){return e[0]*e[0]+e[1]*e[1]}function t(t){var n=Math.sqrt(e(t));t[0]/=n,t[1]/=n}var n=this.matrix,r={translateX:n[0][2],translateY:n[1][2]},i;return i=[[n[0][0],n[0][1]],[n[1][1],n[1][1]]],r.scaleX=Math.sqrt(e(i[0])),t(i[0]),r.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*r.shear,i[1][1]-i[0][1]*r.shear],r.scaleY=Math.sqrt(e(i[1])),t(i[1]),r.shear/=r.scaleY,r.rotate=Math.asin(-i[0][1]),r.isSimple=!+r.shear.toFixed(9)&&(r.scaleX.toFixed(9)==r.scaleY.toFixed(9)||!r.rotate),r}}),Ext.define("Ext.draw.SpriteDD",{extend:Ext.dd.DragSource,constructor:function(e,t){var n=this,r=e.el;n.sprite=e,n.el=r,n.dragData={el:r,sprite:e},n.callParent([r,t]),n.sprite.setStyle("cursor","move")},showFrame:Ext.emptyFn,createFrame:Ext.emptyFn,getDragEl:function(e){return this.el},getRegion:function(){var e=this,t=e.el,n,r,i,s,o,u,a,f,l,c,h;h=e.sprite,c=h.getBBox();try{n=Ext.Element.getXY(t)}catch(p){}return n?(r=n[0],i=r+c.width,s=n[1],o=s+c.height,new Ext.util.Region(s,i,o,r)):null},startDrag:function(e,t){var n=this,r=n.sprite.attr;n.prev=n.sprite.surface.transformToViewBox(e,t)},onDrag:function(e){var t=e.getXY(),n=this,r=n.sprite,i=r.attr,s,o;t=n.sprite.surface.transformToViewBox(t[0],t[1]),s=t[0]-n.prev[0],o=t[1]-n.prev[1],r.setAttributes({translate:{x:i.translation.x+s,y:i.translation.y+o}},!0),n.prev=t},setDragElPos:function(){return!1}}),Ext.define("Ext.draw.Sprite",{mixins:{observable:Ext.util.Observable,animate:Ext.util.Animate},dirty:!1,dirtyHidden:!1,dirtyTransform:!1,dirtyPath:!0,dirtyFont:!0,zIndexDirty:!0,isSprite:!0,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(e){var t=this;e=Ext.merge({},e||{}),t.id=Ext.id(null,"ext-sprite-"),t.transformations=[],Ext.copyTo(this,e,"surface,group,type,draggable"),t.bbox={},t.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}},delete e.surface,delete e.group,delete e.type,delete e.draggable,t.setAttributes(e),t.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click"),t.mixins.observable.constructor.apply(this,arguments)},initDraggable:function(){var e=this;e.el||e.surface.createSpriteElement(e),e.dd=new Ext.draw.SpriteDD(e,Ext.isBoolean(e.draggable)?null:e.draggable),e.on("beforedestroy",e.dd.destroy,e.dd)},setAttributes:function(e,t){var n=this,r=n.fontProperties,i=r.length,s=n.pathProperties,o=s.length,u=!!n.surface,a=u&&n.surface.customAttributes||{},f=n.attr,l=!1,c,h,p,d,v,m,g,y;e=Ext.apply({},e);for(c in a)e.hasOwnProperty(c)&&typeof a[c]=="function"&&Ext.apply(e,a[c].apply(n,[].concat(e[c])));!!e.hidden!=!!f.hidden&&(n.dirtyHidden=!0);for(h=0;h<o;h++){c=s[h];if(c in e&&e[c]!==f[c]){n.dirtyPath=!0,l=!0;break}}"zIndex"in e&&(n.zIndexDirty=!0),"text"in e&&(n.dirtyFont=!0,l=!0,e.text=n.transformText(e.text));for(h=0;h<i;h++){c=r[h];if(c in e&&e[c]!==f[c]){n.dirtyFont=!0,l=!0;break}}return p=e.translation||e.translate,delete e.translate,delete e.translation,d=f.translation,p&&("x"in p&&p.x!==d.x||"y"in p&&p.y!==d.y)&&(n.dirtyTransform=!0,d.x=p.x,d.y=p.y),v=e.rotation||e.rotate,m=f.rotation,delete e.rotate,delete e.rotation,v&&("x"in v&&v.x!==m.x||"y"in v&&v.y!==m.y||"degrees"in v&&v.degrees!==m.degrees)&&(n.dirtyTransform=!0,m.x=v.x,m.y=v.y,m.degrees=v.degrees),g=e.scaling||e.scale,y=f.scaling,delete e.scale,delete e.scaling,g&&("x"in g&&g.x!==y.x||"y"in g&&g.y!==y.y||"cx"in g&&g.cx!==y.cx||"cy"in g&&g.cy!==y.cy)&&(n.dirtyTransform=!0,y.x=g.x,y.y=g.y,y.cx=g.cx,y.cy=g.cy),!n.dirtyTransform&&l&&(f.scaling.x===null||f.scaling.y===null||f.rotation.y===null||f.rotation.y===null)&&(n.dirtyTransform=!0),Ext.apply(f,e),n.dirty=!0,t===!0&&u&&n.redraw(),this},transformText:Ext.identityFn,getBBox:function(){return this.surface.getBBox(this)},setText:function(e){return this.surface.setText(this,e)},hide:function(e){return this.setAttributes({hidden:!0},e),this},show:function(e){return this.setAttributes({hidden:!1},e),this},remove:function(){return this.surface?(this.surface.remove(this),!0):!1},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var e=this;e.fireEvent("beforedestroy",e)!==!1&&(e.remove(),e.surface.onDestroy(e),e.clearListeners(),e.fireEvent("destroy"))},redraw:function(){var e=this,t=!e.el||e.dirty,n=e.surface,r;return n.renderItem(e),t&&(r=n.owner,!e.isBackground&&r&&(r.viewBox||r.autoSize)&&r.configureSurfaceSize()),this},setStyle:function(){return this.el.setStyle.apply(this.el,arguments),this},addCls:function(e){return this.surface.addCls(this,e),this},removeCls:function(e){return this.surface.removeCls(this,e),this}}),Ext.define("Ext.draw.Text",{extend:Ext.draw.Component,alias:"widget.text",text:"",focusable:!1,viewBox:!1,autoSize:!0,baseCls:Ext.baseCSSPrefix+"surface "+Ext.baseCSSPrefix+"draw-text",initComponent:function(){var e=this;e.textConfig=Ext.apply({type:"text",text:e.text,rotate:{degrees:e.degrees||0}},e.textStyle),Ext.apply(e.textConfig,e.getStyles(e.styleSelectors||e.styleSelector)),e.initialConfig.items=[e.textConfig],e.callParent(arguments)},getStyles:function(e){e=Ext.Array.from(e);var t=0,n=e.length,r,i,s,o={};for(;t<n;t++)r=Ext.util.CSS.getRule(e[t]),r&&(i=r.style,i&&Ext.apply(o,{"font-family":i.fontFamily,"font-weight":i.fontWeight,"line-height":i.lineHeight,"font-size":i.fontSize,fill:i.color}));return o},setAngle:function(e){var t=this,n,r;t.rendered?(n=t.surface,r=n.items.items[0],t.degrees=e,r.setAttributes({rotate:{degrees:e}},!0),(t.autoSize||t.viewBox)&&t.updateLayout()):t.degrees=e},setText:function(e){var t=this,n,r;t.rendered?(n=t.surface,r=n.items.items[0],t.text=e||"",n.remove(r),t.textConfig.type="text",t.textConfig.text=t.text,r=n.add(t.textConfig),r.setAttributes({rotate:{degrees:t.degrees}},!0),(t.autoSize||t.viewBox)&&t.updateLayout()):t.on({render:function(){t.setText(e)},single:!0})}}),Ext.define("Ext.draw.engine.ImageExporter",{singleton:!0,defaultUrl:"http://svg.sencha.io",supportedTypes:["image/png","image/jpeg"],widthParam:"width",heightParam:"height",typeParam:"type",svgParam:"svg",formCls:Ext.baseCSSPrefix+"hide-display",generate:function(e,t){t=t||{};var n=this,r=t.type,i;return Ext.Array.indexOf(n.supportedTypes,r)===-1?!1:(i=Ext.getBody().createChild({tag:"form",method:"POST",action:t.url||n.defaultUrl,cls:n.formCls,children:[{tag:"input",type:"hidden",name:t.widthParam||n.widthParam,value:t.width||e.width},{tag:"input",type:"hidden",name:t.heightParam||n.heightParam,value:t.height||e.height},{tag:"input",type:"hidden",name:t.typeParam||n.typeParam,value:r},{tag:"input",type:"hidden",name:t.svgParam||n.svgParam}]}),i.last(null,!0).value=Ext.draw.engine.SvgExporter.generate(e),i.dom.submit(),i.remove(),!0)}}),Ext.define("Ext.draw.engine.Svg",{extend:Ext.draw.Surface,engine:"Svg",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},parsers:{},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSvgElement:function(e,t){var n=this.domRef.createElementNS("http://www.w3.org/2000/svg",e),r;if(t)for(r in t)n.setAttribute(r,String(t[r]));return n},createSpriteElement:function(e){var t=this.createSvgElement(e.type);return t.id=e.id,t.style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)"),e.el=Ext.get(t),this.applyZIndex(e),e.matrix=new Ext.draw.Matrix,e.bbox={plain:0,transform:0},this.applyAttrs(e),this.applyTransformations(e),e.fireEvent("render",e),t},getBBoxText:function(e){var t={},n,r,i,s,o,u;if(e&&e.el){u=e.el.dom;try{return t=u.getBBox(),t}catch(a){}t={x:t.x,y:Infinity,width:0,height:0},o=u.getNumberOfChars();for(s=0;s<o;s++)n=u.getExtentOfChar(s),t.y=Math.min(n.y,t.y),r=n.y+n.height-t.y,t.height=Math.max(t.height,r),i=n.x+n.width-t.x,t.width=Math.max(t.width,i);return t}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(e){this.addCls(e,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(e){this.removeCls(e,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSvgElement("defs"))},transform:function(e,t){var n=this,r=new Ext.draw.Matrix,i=e.transformations,s=i.length,o=0,u,a;for(;o<s;o++)u=i[o],a=u.type,a=="translate"?r.translate(u.x,u.y):a=="rotate"?r.rotate(u.degrees,u.x,u.y):a=="scale"&&r.scale(u.x,u.y,u.centerX,u.centerY);e.matrix=r,t||e.el.set({transform:r.toSvg()})},setSize:function(e,t){var n=this,r=n.el;e=+e||n.width,t=+t||n.height,n.width=e,n.height=t,r.setSize(e,t),r.set({width:e,height:t}),n.callParent([e,t])},getRegion:function(){var e=this.el.getXY(),t=this.bgRect.getXY(),n=Math.max,r=n(e[0],t[0]),i=n(e[1],t[1]);return{left:r,top:i,right:r+this.width,bottom:i+this.height}},onRemove:function(e){e.el&&(e.el.destroy(),delete e.el),this.callParent(arguments)},setViewBox:function(e,t,n,r){isFinite(e)&&isFinite(t)&&isFinite(n)&&isFinite(r)&&(this.callParent(arguments),this.el.dom.setAttribute("viewBox",[e,t,n,r].join(" ")))},render:function(e){var t=this,n,r,i,s;t.el||(cfg={xmlns:"http://www.w3.org/2000/svg",version:1.1,width:t.width||0,height:t.height||0},t.forceLtr&&(cfg.direction="ltr"),n=t.createSvgElement("svg",cfg),r=t.getDefs(),i=t.createSvgElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0}),Ext.isSafari3&&(s=t.createSvgElement("rect",{x:-10,y:-10,width:"110%",height:"110%",fill:"none",stroke:"#000"})),n.appendChild(r),Ext.isSafari3&&n.appendChild(s),n.appendChild(i),e.appendChild(n),t.el=Ext.get(n),t.bgRect=Ext.get(i),Ext.isSafari3&&(t.webkitRect=Ext.get(s),t.webkitRect.hide()),t.el.on({scope:t,mouseup:t.onMouseUp,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseout:t.onMouseOut,mousemove:t.onMouseMove,mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,click:t.onClick,dblclick:t.onDblClick})),t.renderAll()},onMouseEnter:function(e){this.el.parent().getRegion().contains(e.getPoint())&&this.fireEvent("mouseenter",e)},onMouseLeave:function(e){this.el.parent().getRegion().contains(e.getPoint())||this.fireEvent("mouseleave",e)},processEvent:function(e,t){var n=t.getTarget(),r=this.surface,i;this.fireEvent(e,t),n.nodeName=="tspan"&&n.parentNode&&(n=n.parentNode),i=this.items.get(n.id),i&&i.fireEvent(e,i,t)},tuneText:function(e,t){var n=e.el.dom,r=[],i,s,o,u,a,f,l,c;t.hasOwnProperty("text")&&(o=e.tspans&&Ext.Array.map(e.tspans,function(e){return e.textContent}).join(""),!e.tspans||t.text!=o?(r=this.setText(e,t.text),e.tspans=r):r=e.tspans||[]);if(r.length){i=this.getBBoxText(e).height,c=e.el.dom.getAttribute("x");for(u=0,a=r.length;u<a;u++)l=Ext.isFF3_0||Ext.isFF3_5?2:4,r[u].setAttribute("x",c),r[u].setAttribute("dy",u?i*1.2:i/l);e.dirty=!0}},setText:function(e,t){var n=this,r=e.el.dom,i=[],s,o,u,a,f,l;while(r.firstChild)r.removeChild(r.firstChild);l=String(t).split("\n");for(a=0,f=l.length;a<f;a++)u=l[a],u&&(o=n.createSvgElement("tspan"),o.appendChild(document.createTextNode(Ext.htmlDecode(u))),r.appendChild(o),i[a]=o);return i},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(e){if(!this.el)return;e.el||this.createSpriteElement(e),e.zIndexDirty&&this.applyZIndex(e),e.dirty&&(this.applyAttrs(e),e.dirtyTransform&&this.applyTransformations(e))},redraw:function(e){e.dirty=e.zIndexDirty=!0,this.renderItem(e)},applyAttrs:function(e){var t=this,n=e.el,r=e.group,i=e.attr,s=t.parsers,o=t.gradientsMap||{},u=Ext.isSafari&&!Ext.isStrict,a,f,l,c,h,p,d,v,m;if(r){a=[].concat(r),l=a.length;for(f=0;f<l;f++)r=a[f],t.getGroup(r).add(e);delete e.group}c=t.scrubAttrs(e)||{},e.bbox.plain=0,e.bbox.transform=0,e.type=="circle"||e.type=="ellipse"?(c.cx=c.cx||c.x,c.cy=c.cy||c.y):e.type=="rect"?c.rx=c.ry=c.r:e.type=="path"&&c.d&&(c.d=Ext.draw.Draw.pathToString(Ext.draw.Draw.pathToAbsolute(c.d))),e.dirtyPath=!1,c["clip-rect"]&&(t.setClip(e,c),delete c["clip-rect"]),e.type=="text"&&c.font&&e.dirtyFont&&n.set({style:"font: "+c.font}),e.type=="image"&&n.dom.setAttributeNS(t.xlink,"href",c.src),Ext.applyIf(c,t.minDefaults[e.type]),e.dirtyHidden&&(i.hidden?t.hidePrim(e):t.showPrim(e),e.dirtyHidden=!1);for(p in c)if(c.hasOwnProperty(p)&&c[p]!=null){u&&"color|stroke|fill".indexOf(p)>-1&&c[p]in o&&(c[p]=o[c[p]]);if(p=="hidden"&&e.type=="text")continue;p in s?n.dom.setAttribute(p,s[p](c[p],e,t)):n.dom.setAttribute(p,c[p])}e.type=="text"&&t.tuneText(e,c),e.dirtyFont=!1,d=i.style,d&&n.setStyle(d),e.dirty=!1,Ext.isSafari3&&(t.webkitRect.show(),setTimeout(function(){t.webkitRect.hide()}))},setClip:function(e,t){var n=this,r=t["clip-rect"],i,s;r&&(e.clip&&e.clip.parentNode.parentNode.removeChild(e.clip.parentNode),i=n.createSvgElement("clipPath"),s=n.createSvgElement("rect"),i.id=Ext.id(null,"ext-clip-"),s.setAttribute("x",r.x),s.setAttribute("y",r.y),s.setAttribute("width",r.width),s.setAttribute("height",r.height),i.appendChild(s),n.getDefs().appendChild(i),e.el.dom.setAttribute("clip-path","url(#"+i.id+")"),e.clip=s)},applyZIndex:function(e){var t=this,n=t.items,r=n.indexOf(e),i=e.el,s;if(t.el.dom.childNodes[r+2]!==i.dom){if(r>0)do s=n.getAt(--r).el;while(!s&&r>0);i.insertAfter(s||t.bgRect)}e.zIndexDirty=!1},createItem:function(e){var t=new Ext.draw.Sprite(e);return t.surface=this,t},addGradient:function(e){e=Ext.draw.Draw.parseGradient(e);var t=this,n=e.stops.length,r=e.vector,i=Ext.isSafari&&!Ext.isStrict,s,o,u,a,f;f=t.gradientsMap||{};if(!i){e.type=="linear"?(s=t.createSvgElement("linearGradient"),s.setAttribute("x1",r[0]),s.setAttribute("y1",r[1]),s.setAttribute("x2",r[2]),s.setAttribute("y2",r[3])):(s=t.createSvgElement("radialGradient"),s.setAttribute("cx",e.centerX),s.setAttribute("cy",e.centerY),s.setAttribute("r",e.radius),Ext.isNumber(e.focalX)&&Ext.isNumber(e.focalY)&&(s.setAttribute("fx",e.focalX),s.setAttribute("fy",e.focalY))),s.id=e.id,t.getDefs().appendChild(s);for(a=0;a<n;a++)o=e.stops[a],u=t.createSvgElement("stop"),u.setAttribute("offset",o.offset+"%"),u.setAttribute("stop-color",o.color),u.setAttribute("stop-opacity",o.opacity),s.appendChild(u)}else f["url(#"+e.id+")"]=e.stops[0].color;t.gradientsMap=f},hasCls:function(e,t){return t&&(" "+(e.el.dom.getAttribute("class")||"")+" ").indexOf(" "+t+" ")!=-1},addCls:function(e,t){var n=e.el,r,i,s,o=[],u=n.getAttribute("class")||"";if(!Ext.isArray(t))typeof t=="string"&&!this.hasCls(e,t)&&n.set({"class":u+" "+t});else{for(r=0,i=t.length;r<i;r++)s=t[r],typeof s=="string"&&(" "+u+" ").indexOf(" "+s+" ")==-1&&o.push(s);o.length&&n.set({"class":" "+o.join(" ")})}},removeCls:function(e,t){var n=this,r=e.el,i=r.getAttribute("class")||"",s,o,u,a,f;Ext.isArray(t)||(t=[t]);if(i){f=i.replace(n.trimRe," ").split(n.spacesRe);for(s=0,u=t.length;s<u;s++)a=t[s],typeof a=="string"&&(a=a.replace(n.trimRe,""),o=Ext.Array.indexOf(f,a),o!=-1&&Ext.Array.erase(f,o,1));r.set({"class":f.join(" ")})}},destroy:function(){var e=this;e.callParent(),e.el&&e.el.remove(),e._defs&&Ext.get(e._defs).destroy(),e.bgRect&&Ext.get(e.bgRect).destroy(),e.webkitRect&&Ext.get(e.webkitRect).destroy(),delete e.el}}),Ext.define("Ext.draw.engine.SvgExporter",function(){var e=/,/g,t=/(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)\s('*.*'*)/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,([\d\.]+)\)/g,i,s,o,u,a=function(e){i=e,s=i.length,o=i.width,u=i.height},f={path:function(t){var n=t.attr,r=n.path,i="",s,o,u;if(Ext.isArray(r[0])){u=r.length;for(o=0;o<u;o++)i+=r[o].join(" ")}else Ext.isArray(r)?i=r.join(" "):i=r.replace(e," ");return s=h({d:i,fill:n.fill||"none",stroke:n.stroke,"fill-opacity":n.opacity,"stroke-width":n["stroke-width"],"stroke-opacity":n["stroke-opacity"],"z-index":n.zIndex,transform:t.matrix.toSvg()}),"<path "+s+"/>"},text:function(e){var n=e.attr,r=t.exec(n.font),i=r&&r[1]||"12",s=r&&r[3]||"Arial",o=n.text,u=Ext.isFF3_0||Ext.isFF3_5?2:4,a="",f;return e.getBBox(),a+='<tspan x="'+(n.x||"")+'" dy="',a+=i/u+'">',a+=Ext.htmlEncode(o)+"</tspan>",f=h({x:n.x,y:n.y,"font-size":i,"font-family":s,"font-weight":n["font-weight"],"text-anchor":n["text-anchor"],fill:n.fill||"#000","fill-opacity":n.opacity,transform:e.matrix.toSvg()}),"<text "+f+">"+a+"</text>"},rect:function(e){var t=e.attr,n=h({x:t.x,y:t.y,rx:t.rx,ry:t.ry,width:t.width,height:t.height,fill:t.fill||"none","fill-opacity":t.opacity,stroke:t.stroke,"stroke-opacity":t["stroke-opacity"],"stroke-width":t["stroke-width"],transform:e.matrix&&e.matrix.toSvg()});return"<rect "+n+"/>"},circle:function(e){var t=e.attr,n=h({cx:t.x,cy:t.y,r:t.radius,fill:t.translation.fill||t.fill||"none","fill-opacity":t.opacity,stroke:t.stroke,"stroke-opacity":t["stroke-opacity"],"stroke-width":t["stroke-width"],transform:e.matrix.toSvg()});return"<circle "+n+" />"},image:function(e){var t=e.attr,n=h({x:t.x-(t.width/2>>0),y:t.y-(t.height/2>>0),width:t.width,height:t.height,"xlink:href":t.src,transform:e.matrix.toSvg()});return"<image "+n+" />"}},l=function(){var e='<?xml version="1.0" standalone="yes"?>';return e+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',e},c=function(){var e='<svg width="'+o+'px" height="'+u+'px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',t="",s,a,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;l=i.items.items,a=l.length,h=function(e){var t=e.childNodes,n=t.length,r=0,i,s,o="",u,a,f,l;for(;r<n;r++){u=t[r],a=u.attributes,f=u.tagName,o+="<"+f;for(s=0,i=a.length;s<i;s++)l=a.item(s),o+=" "+l.name+'="'+l.value+'"';o+=">",u.childNodes.length>0&&(o+=h(u)),o+="</"+f+">"}return o};if(i.getDefs)t=h(i.getDefs());else{v=i.gradientsColl,v&&(m=v.keys,g=v.items,y=0,b=m.length);for(;y<b;y++){w=m[y],E=g[y],c=i.gradientsColl.getByKey(w),t+='<linearGradient id="'+w+'" x1="0" y1="0" x2="1" y2="1">';var L=c.colors.replace(n,"rgb($1|$2|$3)");L=L.replace(r,"rgba($1|$2|$3|$4)"),p=L.split(",");for(S=0,T=p.length;S<T;S++)d=p[S].split(" "),L=Ext.draw.Color.fromString(d[1].replace(/\|/g,",")),t+='<stop offset="'+d[0]+'" stop-color="'+L.toString()+'" stop-opacity="1"></stop>';t+="</linearGradient>"}}e+="<defs>"+t+"</defs>",e+=f.rect({attr:{width:"100%",height:"100%",fill:"#fff",stroke:"none",opacity:"0"}}),N=new Array(a);for(S=0;S<a;S++)N[S]=S;N.sort(function(e,t){return C=l[e].attr.zIndex||0,k=l[t].attr.zIndex||0,C==k?e-t:C-k});for(S=0;S<a;S++)s=l[N[S]],s.attr.hidden||(e+=f[s.type](s));return e+="</svg>",e},h=function(e){var t="",n;for(n in e)e.hasOwnProperty(n)&&e[n]!=null&&(t+=n+'="'+e[n]+'" ');return t};return{singleton:!0,generate:function(e,t){return t=t||{},a(e),l()+c()}}}),Ext.define("Ext.draw.engine.Vml",{extend:Ext.draw.Surface,engine:"Vml",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s\-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVmlPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVmlCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1e3,coordorigin:"0 0",zIndexShift:0,orderSpritesByZIndex:!1,path2vml:function(e){var t=this,n=t.NonVmlPathRe,r=t.map,i=t.valRe,s=t.zoom,o=t.bitesRe,u=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),a,f,l,c,h,p,d,v;if(String(e).match(n))u=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw);else if(!String(e).match(t.partialPathRe))return a=String(e).replace(o,function(e,t,n){var o=[],u=t.toLowerCase()=="m",a=r[t];return n.replace(i,function(e){u&&o.length===2&&(a+=o+r[t=="m"?"l":"L"],o=[]),o.push(Math.round(e*s))}),a+o}),a;f=u(e),a=[];for(h=0,p=f.length;h<p;h++){l=f[h],c=f[h][0].toLowerCase(),c=="z"&&(c="x");for(d=1,v=l.length;d<v;d++)c+=Math.round(l[d]*t.zoom)+(d!=v-1?",":"");a.push(c)}return a.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(e){this.fireEvent("mouseenter",e)},onMouseLeave:function(e){this.fireEvent("mouseleave",e)},processEvent:function(e,t){var n=t.getTarget(),r=this.surface,i;this.fireEvent(e,t),i=this.items.get(n.id),i&&i.fireEvent(e,i,t)},createSpriteElement:function(e){var t=this,n=e.attr,r=e.type,i=t.zoom,s=e.vml||(e.vml={}),o=Math.round,u=r==="image"?t.createNode("image"):t.createNode("shape"),a,f,l;return u.coordsize=i+" "+i,u.coordorigin=n.coordorigin||"0 0",Ext.get(u).addCls(t.spriteCls),r=="text"&&(s.path=a=t.createNode("path"),a.textpathok=!0,s.textpath=l=t.createNode("textpath"),l.on=!0,u.appendChild(l),u.appendChild(a)),u.id=e.id,e.el=Ext.get(u),e.el.setStyle("zIndex",-t.zIndexShift),t.el.appendChild(u),r!=="image"&&(f=t.createNode("skew"),f.on=!0,u.appendChild(f),e.skew=f),e.matrix=new Ext.draw.Matrix,e.bbox={plain:null,transform:null},this.applyAttrs(e),this.applyTransformations(e),e.fireEvent("render",e),e.el},getBBoxText:function(e){var t=e.vml;return{x:t.X+(t.bbx||0)-t.W/2,y:t.Y-t.H/2,width:t.W,height:t.H}},applyAttrs:function(e){var t=this,n=e.vml,r=e.group,i=e.attr,s=e.el,o=s.dom,u,a,f,l,c,h,p,d,v,m,g,y;if(r){f=[].concat(r),c=f.length;for(l=0;l<c;l++)r=f[l],t.getGroup(r).add(e);delete e.group}h=t.scrubAttrs(e)||{},e.zIndexDirty&&t.setZIndex(e),Ext.applyIf(h,t.minDefaults[e.type]),e.type=="image"&&(Ext.apply(e.attr,{x:h.x,y:h.y,width:h.width,height:h.height}),s.setStyle({width:h.width+"px",height:h.height+"px"}),o.src=h.src),o.href&&(o.href=h.href),o.title&&(o.title=h.title),o.target&&(o.target=h.target),o.cursor&&(o.cursor=h.cursor),e.dirtyHidden&&(h.hidden?t.hidePrim(e):t.showPrim(e),e.dirtyHidden=!1),e.dirtyPath&&(e.type=="circle"||e.type=="ellipse"?(v=h.x,m=h.y,g=h.rx||h.r||0,y=h.ry||h.r||0,o.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((v-g)*t.zoom),Math.round((m-y)*t.zoom),Math.round((v+g)*t.zoom),Math.round((m+y)*t.zoom),Math.round(v*t.zoom)),e.dirtyPath=!1):e.type!=="text"&&e.type!=="image"&&(e.attr.path=h.path=t.setPaths(e,h)||h.path,o.path=t.path2vml(h.path),e.dirtyPath=!1)),"clip-rect"in h&&t.setClip(e,h),e.type=="text"&&t.setTextAttributes(e,h),(h.opacity||h["stroke-opacity"]||h.fill)&&t.setFill(e,h),(h.stroke||h["stroke-opacity"]||h.fill)&&t.setStroke(e,h),u=i.style,u&&s.setStyle(u),e.dirty=!1},setZIndex:function(e){var t=this,n=e.attr.zIndex,r=t.zIndexShift,i,s,o,u;if(n<r){i=t.items.items,s=i.length;for(u=0;u<s;u++)(n=i[u].attr.zIndex)&&n<r&&(r=n);t.zIndexShift=r;for(u=0;u<s;u++)o=i[u],o.el&&o.el.setStyle("zIndex",o.attr.zIndex-r),o.zIndexDirty=!1}else e.el&&(e.el.setStyle("zIndex",n-r),e.zIndexDirty=!1)},setPaths:function(e,t){var n=e.attr,r=e.attr["stroke-width"]||1;return e.bbox.plain=null,e.bbox.transform=null,e.type=="circle"?(n.rx=n.ry=t.r,Ext.draw.Draw.ellipsePath(e)):e.type=="ellipse"?(n.rx=t.rx,n.ry=t.ry,Ext.draw.Draw.ellipsePath(e)):e.type=="rect"?(n.rx=n.ry=t.r,Ext.draw.Draw.rectPath(e)):e.type=="path"&&n.path?Ext.draw.Draw.pathToAbsolute(n.path):!1},setFill:function(e,t){var n=this,r=e.el.dom,i=r.fill,s=!1,o,u,a,f,l;i||(i=r.fill=n.createNode("fill"),s=!0),Ext.isArray(t.fill)&&(t.fill=t.fill[0]),t.fill=="none"?i.on=!1:(typeof t.opacity=="number"&&(i.opacity=t.opacity),typeof t["fill-opacity"]=="number"&&(i.opacity=t["fill-opacity"]),i.on=!0,typeof t.fill=="string"&&(a=t.fill.match(n.fillUrlRe),a?(a=a[1],a.charAt(0)=="#"&&(u=n.gradientsColl.getByKey(a.substring(1))),u?(f=t.rotation,l=-(u.angle+270+(f?f.degrees:0))%360,l===0&&(l=180),i.angle=l,i.type="gradient",i.method="sigma",i.colors?i.colors.value=u.colors:i.colors=u.colors):(i.src=a,i.type="tile")):(i.color=Ext.draw.Color.toHex(t.fill),i.src="",i.type="solid"))),s&&r.appendChild(i)},setStroke:function(e,t){var n=this,r=e.el.dom,i=e.strokeEl,s=!1,o,u;i||(i=e.strokeEl=n.createNode("stroke"),s=!0),Ext.isArray(t.stroke)&&(t.stroke=t.stroke[0]),!t.stroke||t.stroke=="none"||t.stroke==0||t["stroke-width"]==0?i.on=!1:(i.on=!0,t.stroke&&!t.stroke.match(n.fillUrlRe)&&(i.color=Ext.draw.Color.toHex(t.stroke)),i.dashstyle=t["stroke-dasharray"]?"dash":"solid",i.joinstyle=t["stroke-linejoin"],i.endcap=t["stroke-linecap"]||"round",i.miterlimit=t["stroke-miterlimit"]||8,o=parseFloat(t["stroke-width"]||1)*.75,u=t["stroke-opacity"]||1,Ext.isNumber(o)&&o<1?(i.weight=1,i.opacity=u*o):(i.weight=o,i.opacity=u)),s&&r.appendChild(i)},setClip:function(e,t){var n=this,r=e.el,i=e.clipEl,s=String(t["clip-rect"]).split(n.separatorRe);i||(i=e.clipEl=n.el.insertFirst(Ext.getDoc().dom.createElement("div")),i.addCls(Ext.baseCSSPrefix+"vml-sprite")),s.length==4?(s[2]=+s[2]+ +s[0],s[3]=+s[3]+ +s[1],i.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",s[0],s[1],s[2],s[3])),i.setSize(n.el.width,n.el.height)):i.setStyle("clip","")},setTextAttributes:function(e,t){var n=this,r=e.vml,i=r.textpath.style,s=n.span.style,o=n.zoom,u=Math.round,a={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},f,l;if(e.dirtyFont){t.font&&(i.font=s.font=t.font),t["font-family"]&&(i.fontFamily='"'+t["font-family"].split(",")[0].replace(n.fontFamilyRe,"")+'"',s.fontFamily=t["font-family"]);for(f in a)l=t[a[f]],l&&(i[f]=s[f]=l);n.setText(e,t.text),r.textpath.string&&(n.span.innerHTML=String(r.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br/>")),r.W=n.span.offsetWidth,r.H=n.span.offsetHeight+2,t["text-anchor"]=="middle"?i["v-text-align"]="center":t["text-anchor"]=="end"?(i["v-text-align"]="right",r.bbx=-Math.round(r.W/2)):(i["v-text-align"]="left",r.bbx=Math.round(r.W/2))}r.X=t.x,r.Y=t.y,r.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(r.X*o),Math.round(r.Y*o),Math.round(r.X*o)+1),e.bbox.plain=null,e.bbox.transform=null,e.dirtyFont=!1},setText:function(e,t){e.vml.textpath.string=Ext.htmlDecode(t)},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(e){e.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(e){e.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(e,t){var n=this;e=e||n.width,t=t||n.height,n.width=e,n.height=t,n.el&&(e!=undefined&&n.el.setWidth(e),t!=undefined&&n.el.setHeight(t)),n.callParent(arguments)},applyViewBox:function(){var e=this,t=e.viewBox,n=e.width,r=e.height,i,s,o;e.callParent();if(t&&(n||r)){i=e.items.items,s=i.length;for(o=0;o<s;o++)e.applyTransformations(i[o])}},onAdd:function(e){this.callParent(arguments),this.el&&this.renderItem(e)},onRemove:function(e){e.el&&(e.el.remove(),delete e.el),this.callParent(arguments)},render:function(e){var t=this,n=Ext.getDoc().dom,r;if(!t.createNode)try{n.namespaces.rvml||n.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),t.createNode=function(e){return n.createElement("<rvml:"+e+' class="rvml">')}}catch(i){t.createNode=function(e){return n.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}t.el||(r=n.createElement("div"),t.el=Ext.get(r),t.el.addCls(t.baseVmlCls),t.span=n.createElement("span"),Ext.get(t.span).addCls(t.measureSpanCls),r.appendChild(t.span),t.el.setSize(t.width||0,t.height||0),e.appendChild(r),t.el.on({scope:t,mouseup:t.onMouseUp,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseout:t.onMouseOut,mousemove:t.onMouseMove,mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,click:t.onClick,dblclick:t.onDblClick})),t.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(e){e.dirty=!0,this.renderItem(e)},renderItem:function(e){if(!this.el)return;e.el||this.createSpriteElement(e),e.dirty&&(this.applyAttrs(e),e.dirtyTransform&&this.applyTransformations(e))},rotationCompensation:function(e,t,n){var r=new Ext.draw.Matrix;return r.rotate(-e,.5,.5),{x:r.x(t,n),y:r.y(t,n)}},transform:function(e,t){var n=this,r=n.getBBox(e,!0),i=r.x+r.width*.5,s=r.y+r.height*.5,o=new Ext.draw.Matrix,u=e.transformations,a=u.length,f=0,l=0,c=1,h=1,p="",d=e.el,v=d.dom,m=v.style,g=n.zoom,y=e.skew,b=n.viewBoxShift,w,E,S,x,T,N,C,k,L,A,O,M;for(;f<a;f++)S=u[f],x=S.type,x=="translate"?o.translate(S.x,S.y):x=="rotate"?(o.rotate(S.degrees,S.x,S.y),l+=S.degrees):x=="scale"&&(o.scale(S.x,S.y,S.centerX,S.centerY),c*=S.x,h*=S.y);e.matrix=o.clone();if(t)return;b&&o.prepend(b.scale,0,0,b.scale,b.dx*b.scale,b.dy*b.scale),e.type!="image"&&y?(y.origin="0,0",y.matrix=o.toString(),M=o.offset(),M[0]>32767?M[0]=32767:M[0]<-32768&&(M[0]=-32768),M[1]>32767?M[1]=32767:M[1]<-32768&&(M[1]=-32768),y.offset=M):(m.filter=o.toFilter(),m.left=Math.min(o.x(r.x,r.y),o.x(r.x+r.width,r.y),o.x(r.x,r.y+r.height),o.x(r.x+r.width,r.y+r.height))+"px",m.top=Math.min(o.y(r.x,r.y),o.y(r.x+r.width,r.y),o.y(r.x,r.y+r.height),o.y(r.x+r.width,r.y+r.height))+"px")},createItem:function(e){return Ext.create("Ext.draw.Sprite",e)},getRegion:function(){return this.el.getRegion()},addCls:function(e,t){e&&e.el&&e.el.addCls(t)},removeCls:function(e,t){e&&e.el&&e.el.removeCls(t)},addGradient:function(e){var t=this.gradientsColl||(this.gradientsColl=Ext.create("Ext.util.MixedCollection")),n=[],r=Ext.create("Ext.util.MixedCollection"),i,s,o,u,a,f;r.addAll(e.stops),r.sortByKey("ASC",function(e,t){return e=parseInt(e,10),t=parseInt(t,10),e>t?1:e<t?-1:0}),i=r.keys,s=r.items,o=i.length;for(f=0;f<o;f++)u=i[f],a=s[f],n.push(u+"% "+a.color);t.add(e.id,{colors:n.join(","),angle:e.angle})},destroy:function(){var e=this;e.callParent(arguments),e.el&&e.el.remove(),delete e.el}}),Ext.define("Ext.flash.Component",{extend:Ext.Component,alternateClassName:"Ext.FlashComponent",alias:"widget.flash",flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",swfWidth:"100%",swfHeight:"100%",expressInstall:!1,renderTpl:['<div id="{swfId}" role="presentation"></div>'],initComponent:function(){this.callParent(),this.addEvents("success","failure")},beforeRender:function(){this.callParent(),Ext.applyIf(this.renderData,{swfId:this.getSwfId()})},afterRender:function(){var e=this,t=Ext.apply({},e.flashParams),n=Ext.apply({},e.flashVars);e.callParent(),t=Ext.apply({allowScriptAccess:"always",bgcolor:e.backgroundColor,wmode:e.wmode},t),n=Ext.apply({allowedDomain:document.location.hostname},n),new swfobject.embedSWF(e.url,e.getSwfId(),e.swfWidth,e.swfHeight,e.flashVersion,e.expressInstall?e.statics.EXPRESS_INSTALL_URL:undefined,n,t,e.flashAttributes,Ext.bind(e.swfCallback,e))},swfCallback:function(e){var t=this;e.success?(t.swf=Ext.get(e.ref),t.onSuccess(),t.fireEvent("success",t)):(t.onFailure(),t.fireEvent("failure",t))},getSwfId:function(){return this.swfId||(this.swfId="extswf"+this.getAutoId())},onSuccess:function(){this.swf.setStyle("visibility","inherit")},onFailure:Ext.emptyFn,beforeDestroy:function(){var e=this,t=e.swf;t&&(swfobject.removeSWF(e.getSwfId()),Ext.destroy
(t),delete e.swf),e.callParent()},statics:{EXPRESS_INSTALL_URL:"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf"}}),Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:!0,constructor:function(e){e&&Ext.apply(this,e);var t=e.params;Ext.isString(t)&&(this.params=Ext.Object.fromQueryString(t))},run:Ext.emptyFn,onFailure:function(e){this.response=e,this.failureType=Ext.form.action.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(e){return this.response=e,!e.responseText&&!e.responseXML?!0:this.result=this.handleResponse(e)},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var e=this,t,n=e.form;return{success:e.onSuccess,failure:e.onFailure,scope:e,timeout:this.timeout*1e3||n.timeout*1e3,upload:n.fileUpload?e.onSuccess:t}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}}),Ext.define("Ext.form.action.Load",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(e){var t=this.processResponse(e),n=this.form;if(t===!0||!t.success||!t.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE,n.afterAction(this,!1);return}n.clearInvalid(),n.setValues(t.data),n.afterAction(this,!0)},handleResponse:function(e){var t=this.form.reader,n,r;return t?(n=t.read(e),r=n.records&&n.records[0]?n.records[0].data:null,{success:n.success,data:r}):Ext.decode(e.responseText)}}),Ext.define("Ext.form.action.Submit",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var e=this,t=e.form;e.clientValidation===!1||t.isValid()?e.doSubmit():(e.failureType=Ext.form.action.Action.CLIENT_INVALID,t.afterAction(e,!1))},doSubmit:function(){var e=this,t=Ext.apply(e.createCallback(),{url:e.getUrl(),method:e.getMethod(),headers:e.headers}),n=e.form,r=e.jsonSubmit||n.jsonSubmit,i=r?"jsonData":"params",s;n.hasUpload()?(s=e.buildForm(),t.form=s.formEl,t.isUpload=!0):t[i]=e.getParams(r),Ext.Ajax.request(t),s&&e.cleanup(s)},cleanup:function(e){var t=e.formEl,n=e.uploadEls,r=e.uploadFields,i=r.length,s,o;for(s=0;s<i;++s)o=r[s],o.clearOnSubmit||o.restoreInput(n[s]);t&&Ext.removeNode(t)},getParams:function(e){var t=!1,n=this.callParent(),r=this.form.getValues(t,t,this.submitEmptyText!==t,e,!0);return Ext.apply({},r,n)},buildForm:function(){var e=this,t=[],n,r,i=e.form,s=e.getParams(),o=[],u=[],a=i.getFields().items,f,l=a.length,c,h,p,d,v,m;for(f=0;f<l;++f)c=a[f],c.isFileUpload()&&o.push(c);for(h in s)if(s.hasOwnProperty(h)){p=s[h];if(Ext.isArray(p)){v=p.length;for(d=0;d<v;d++)t.push(e.getFieldConfig(h,p[d]))}else t.push(e.getFieldConfig(h,p))}n={tag:"form",role:"presentation",action:e.getUrl(),method:e.getMethod(),target:e.target||"_self",style:"display:none",cn:t},o.length&&(n.encoding=n.enctype="multipart/form-data"),r=Ext.DomHelper.append(Ext.getBody(),n),l=o.length;for(f=0;f<l;++f)m=o[f].extractFileInput(),r.appendChild(m),u.push(m);return{formEl:r,uploadFields:o,uploadEls:u}},getFieldConfig:function(e,t){return{tag:"input",type:"hidden",name:e,value:Ext.String.htmlEncode(t)}},onSuccess:function(e){var t=this.form,n=!0,r=this.processResponse(e);r!==!0&&!r.success&&(r.errors&&t.markInvalid(r.errors),this.failureType=Ext.form.action.Action.SERVER_INVALID,n=!1),t.afterAction(this,n)},handleResponse:function(e){var t=this.form,n=t.errorReader,r,i,s,o,u,a;if(n){r=n.read(e),u=r.records,i=[];if(u)for(s=0,o=u.length;s<o;s++)i[s]=u[s].data;i.length<1&&(i=null),a={success:r.success,errors:i}}else try{a=Ext.decode(e.responseText)}catch(f){a={success:!1,errors:[]}}return a}}),Ext.define("Ext.util.ComponentDragger",{extend:Ext.dd.DragTracker,autoStart:500,constructor:function(e,t){this.comp=e,this.initialConstrainTo=t.constrainTo,this.callParent([t])},onStart:function(e){var t=this,n=t.comp;t.startPosition=n.getXY(),n.ghost&&!n.liveDrag&&(t.proxy=n.ghost(),t.dragTarget=t.proxy.header.el);if(t.constrain||t.constrainDelegate)t.constrainTo=t.calculateConstrainRegion();n.beginDrag&&n.beginDrag()},calculateConstrainRegion:function(){var e=this,t=e.comp,n=e.initialConstrainTo,r=t.constraintInsets,i,s,o,u=e.proxy?e.proxy.el:t.el,a=!e.constrainDelegate&&u.shadow&&t.constrainShadow&&!u.shadowDisabled?u.shadow.getShadowSize():0;return n instanceof Ext.util.Region?n=n.copy():(i=Ext.fly(n),n=i.getViewRegion(),n.right=n.left+i.dom.clientWidth),r&&(r=Ext.isObject(r)?r:Ext.Element.parseBox(r),n.adjust(r.top,r.right,r.bottom,r.length)),a&&n.adjust(a[0],-a[1],-a[2],a[3]),e.constrainDelegate||(s=Ext.fly(e.dragTarget).getRegion(),o=u.getRegion(),n.adjust(s.top-o.top,s.right-o.right,s.bottom-o.bottom,s.left-o.left)),n},onDrag:function(e){var t=this,n=t.proxy&&!t.comp.liveDrag?t.proxy:t.comp,r=t.getOffset(t.constrain||t.constrainDelegate?"dragTarget":null);n.setPagePosition(t.startPosition[0]+r[0],t.startPosition[1]+r[1])},onEnd:function(e){var t=this.comp;if(t.isDestroyed||t.destroying)return;this.proxy&&!t.liveDrag&&t.unghost(),t.endDrag&&t.endDrag()}}),Ext.define("Ext.window.Window",{extend:Ext.panel.Panel,alternateClassName:"Ext.Window",alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"offsets",floating:!0,itemCls:Ext.baseCSSPrefix+"window-item",initialAlphaNum:/^[a-z0-9]/,overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:"dialog",initComponent:function(){var e=this;e.frame=!1,e.callParent(),e.addEvents("resize","maximize","minimize","restore"),e.plain&&e.addClsWithUI("plain"),e.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var e=this,t;return t=e.callParent(),t.tabIndex=-1,t},getState:function(){var e=this,t=e.callParent()||{},n=!!e.maximized,r=e.ghostBox,i;return t.maximized=n,n?i=e.restorePos:r?i=[r.x,r.y]:i=e.getPosition(),Ext.apply(t,{size:n?e.restoreSize:e.getSize(),pos:i}),t},applyState:function(e){var t=this;e&&(t.maximized=e.maximized,t.maximized?(t.hasSavedRestore=!0,t.restoreSize=e.size,t.restorePos=e.pos):Ext.apply(t,{width:e.size.width,height:e.size.height,x:e.pos[0],y:e.pos[1]}))},onRender:function(e,t){var n=this;n.callParent(arguments),n.focusEl=n.el,n.maximizable&&n.header.on({scope:n,dblclick:n.toggleMaximize})},afterRender:function(){var e=this,t=e.header,n;e.callParent(),e.maximized&&(e.maximized=!1,e.maximize(),t&&t.removeCls(t.indicateDragCls)),e.closable?(n=e.getKeyMap(),n.on(27,e.onEsc,e)):n=e.keyMap,n&&e.hidden&&n.disable()},initDraggable:function(){this.initSimpleDraggable()},initResizable:function(){this.callParent(arguments),this.maximized&&this.resizer.disable()},onEsc:function(e,t){if(!Ext.FocusManager||!Ext.FocusManager.enabled||Ext.FocusManager.focusedCmp===this)t.stopEvent(),this.close()},beforeDestroy:function(){var e=this;e.rendered&&(delete this.animateTarget,e.hide(),Ext.destroy(e.keyMap)),e.callParent()},addTools:function(){var e=this;e.callParent(),e.minimizable&&e.addTool({type:"minimize",handler:Ext.Function.bind(e.minimize,e,[])}),e.maximizable&&(e.addTool({type:"maximize",handler:Ext.Function.bind(e.maximize,e,[])}),e.addTool({type:"restore",handler:Ext.Function.bind(e.restore,e,[]),hidden:!0}))},getFocusEl:function(){return this.getDefaultFocus()},getDefaultFocus:function(){var e=this,t,n=e.defaultButton||e.defaultFocus,r;return n!==undefined&&(Ext.isNumber(n)?t=e.query("button")[n]:Ext.isString(n)?(r=n,r.match(e.initialAlphaNum)&&(t=e.down("#"+r)),t||(t=e.down(r))):n.focus&&(t=n)),t||e.el},onFocus:function(){var e=this,t;Ext.FocusManager&&Ext.FocusManager.enabled||(t=e.getDefaultFocus())===e?e.callParent(arguments):t.focus()},onShow:function(){var e=this;e.callParent(arguments),e.expandOnShow&&e.expand(!1),e.syncMonitorWindowResize(),e.keyMap&&e.keyMap.enable()},doClose:function(){var e=this;e.hidden?(e.fireEvent("close",e),e.closeAction=="destroy"&&this.destroy()):e.hide(e.animateTarget,e.doClose,e)},afterHide:function(){var e=this;e.syncMonitorWindowResize(),e.keyMap&&e.keyMap.disable(),e.callParent(arguments)},onWindowResize:function(){var e=this,t;e.maximized?e.fitContainer():(t=e.getSizeModel(),(t.width.natural||t.height.natural)&&e.updateLayout(),e.doConstrain())},minimize:function(){return this.fireEvent("minimize",this),this},resumeHeaderLayout:function(e){this.header.resumeLayouts(e?this.isRootCfg:null)},afterCollapse:function(){var e=this,t=e.header,n=e.tools;t&&e.maximizable&&(t.suspendLayouts(),n.maximize.hide(),n.restore.hide(),this.resumeHeaderLayout(!0)),e.resizer&&e.resizer.disable(),e.callParent(arguments)},afterExpand:function(){var e=this,t=e.header,n=e.tools,r;t&&(t.suspendLayouts(),e.maximized?(n.restore.show(),r=!0):e.maximizable&&(n.maximize.show(),r=!0),this.resumeHeaderLayout(r)),e.resizer&&e.resizer.enable(),e.callParent(arguments)},maximize:function(e){var t=this,n=t.header,r=t.tools,i=t.width,s=t.height,o,u;return t.maximized||(t.expand(!1),t.hasSavedRestore||(o=t.restoreSize={width:Ext.isNumber(i)?i:null,height:Ext.isNumber(s)?s:null},t.restorePos=t.getPosition(!0)),n&&(n.suspendLayouts(),r.maximize&&(r.maximize.hide(),u=!0),r.restore&&(r.restore.show(),u=!0),t.collapseTool&&(t.collapseTool.hide(),u=!0),t.resumeHeaderLayout(u)),t.el.disableShadow(),t.dd&&(t.dd.disable(),n&&n.removeCls(n.indicateDragCls)),t.resizer&&t.resizer.disable(),t.el.addCls(Ext.baseCSSPrefix+"window-maximized"),t.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct"),t.syncMonitorWindowResize(),t.fitContainer(e=e||!!t.animateTarget?{callback:function(){t.maximized=!0,t.fireEvent("maximize",t)}}:null),e||(t.maximized=!0,t.fireEvent("maximize",t))),t},restore:function(e){var t=this,n=t.tools,r=t.header,i=t.restoreSize,s;return t.maximized&&(t.hasSavedRestore=null,t.removeCls(Ext.baseCSSPrefix+"window-maximized"),r&&(r.suspendLayouts(),n.restore&&(n.restore.hide(),s=!0),n.maximize&&(n.maximize.show(),s=!0),t.collapseTool&&(t.collapseTool.show(),s=!0),t.resumeHeaderLayout(s)),i.x=t.restorePos[0],i.y=t.restorePos[1],t.setBox(i,e=e||!!t.animateTarget?{callback:function(){t.el.enableShadow(!0),t.maximized=!1,t.fireEvent("restore",t)}}:null),t.restorePos=t.restoreSize=null,t.dd&&(t.dd.enable(),r&&r.addCls(r.indicateDragCls)),t.resizer&&t.resizer.enable(),t.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct"),t.syncMonitorWindowResize(),e||(t.el.enableShadow(!0),t.maximized=!1,t.fireEvent("restore",t))),t},syncMonitorWindowResize:function(){var e=this,t=e._monitoringResize,n=e.monitorResize||e.constrain||e.constrainHeader||e.maximized,r=e.hidden||e.destroying||e.isDestroyed;n&&!r?t||(Ext.EventManager.onWindowResize(e.onWindowResize,e,{delay:1}),e._monitoringResize=!0):t&&(Ext.EventManager.removeResizeListener(e.onWindowResize,e),e._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var e=this.callParent(arguments);return e.xtype="window",e}}),Ext.define("Ext.form.Labelable",{isLabelable:!0,autoEl:{tag:"table",cellpadding:0,role:"presentation"},childEls:["labelCell","labelEl","bodyEl","sideErrorCell","errorEl","inputRow"],labelableRenderTpl:['<tr role="presentation" id="{id}-inputRow" <tpl if="inFormLayout">id="{id}"</tpl> class="{inputRowCls}">','<tpl if="labelOnLeft">','<td role="presentation" id="{id}-labelCell" style="{labelCellStyle}" {labelCellAttrs}>',"{beforeLabelTpl}",'<label id="{id}-labelEl" {labelAttrTpl}','<tpl if="inputId && !(boxLabel && !fieldLabel)"> for="{inputId}"</tpl>',' class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>',' unselectable="on"',">","{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">','<span role="separator">{labelSeparator}</span>',"</tpl>","</tpl>","{afterLabelTextTpl}","</label>","{afterLabelTpl}","</td>","</tpl>",'<td role="presentation" class="{baseBodyCls} {fieldBodyCls} {extraFieldBodyCls}" id="{id}-bodyEl" colspan="{bodyColspan}" role="presentation">',"{beforeBodyEl}","<tpl if=\"labelAlign=='top'\">","{beforeLabelTpl}",'<div role="presentation" id="{id}-labelCell" style="{labelCellStyle}">','<label id="{id}-labelEl" {labelAttrTpl}<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>',' unselectable="on"',">","{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">','<span role="separator">{labelSeparator}</span>',"</tpl>","</tpl>","{afterLabelTextTpl}","</label>","</div>","{afterLabelTpl}","</tpl>","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","<tpl if=\"msgTarget==='side'\">","{afterBodyEl}","</td>","<td role=\"presentation\" id=\"{id}-sideErrorCell\" vAlign=\"{[values.labelAlign==='top' && !values.hideLabel ? 'bottom' : 'middle']}\" style=\"{[values.autoFitErrors ? 'display:none' : '']}\" width=\"{errorIconWidth}\">",'<div role="alert" aria-live="polite" id="{id}-errorEl" class="{errorMsgCls}" style="display:none"></div>',"</td>","<tpl elseif=\"msgTarget=='under'\">",'<div role="alert" aria-live="polite" id="{id}-errorEl" class="{errorMsgClass}" colspan="2" style="display:none"></div>',"{afterBodyEl}","</td>","</tpl>","</tr>",{disableFormats:!0}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",inputRowCls:Ext.baseCSSPrefix+"form-item-input-row",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",noWrap:!0,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],labelableRenderProps:["allowBlank","id","labelAlign","fieldBodyCls","extraFieldBodyCls","baseBodyCls","clearCls","labelSeparator","msgTarget","inputRowCls"],initLabelable:function(){var e=this,t=e.padding;t&&(e.padding=undefined,e.extraMargins=Ext.Element.parseBox(t)),e.activeErrorsTpl||(e.msgTarget=="title"?e.activeErrorsTpl=e.plaintextActiveErrorsTpl:e.activeErrorsTpl=e.htmlActiveErrorsTpl),e.addCls(Ext.plainTableCls),e.addCls(e.formItemCls),e.lastActiveError="",e.addEvents("errorchange"),e.enableBubble("errorchange")},trimLabelSeparator:function(){var e=this,t=e.labelSeparator,n=e.fieldLabel||"",r=n.substr(n.length-1);return r===t?n.slice(0,-1):n},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(e){e=e||"";var t=this,n=t.labelSeparator,r=t.labelEl;t.fieldLabel=e,t.rendered&&(Ext.isEmpty(e)&&t.hideEmptyLabel?r.parent().setDisplayed("none"):(n&&(e=t.trimLabelSeparator()+n),r.update(e),r.parent().setDisplayed("")),t.updateLayout())},getInsertionRenderData:function(e,t){var n=t.length,r,i;while(n--)r=t[n],i=this[r],i&&typeof i!="string"&&(i.isTemplate||(i=Ext.XTemplate.getTpl(this,r)),i=i.apply(e)),e[r]=i||"";return e},getLabelableRenderData:function(){var e=this,t,n,r=e.labelAlign==="top";return Ext.form.Labelable.errorIconWidth||(n=Ext.getBody().createChild({style:"position:absolute",cls:Ext.baseCSSPrefix+"form-invalid-icon"}),Ext.form.Labelable.errorIconWidth=n.getWidth()+n.getMargin("l"),n.remove()),t=Ext.copyTo({inFormLayout:e.ownerLayout&&e.ownerLayout.type==="form",inputId:e.getInputId(),labelOnLeft:!r,hideLabel:!e.hasVisibleLabel(),fieldLabel:e.getFieldLabel(),labelCellStyle:e.getLabelCellStyle(),labelCellAttrs:e.getLabelCellAttrs(),labelCls:e.getLabelCls(),labelStyle:e.getLabelStyle(),bodyColspan:e.getBodyColspan(),externalError:!e.autoFitErrors,errorMsgCls:e.getErrorMsgCls(),errorIconWidth:Ext.form.Labelable.errorIconWidth,boxLabel:e.boxLabel},e,e.labelableRenderProps,!0),e.getInsertionRenderData(t,e.labelableInsertions),t},xhooks:{beforeRender:function(){var e=this;e.setFieldDefaults(e.getHierarchyState().fieldDefaults),e.ownerLayout&&e.addCls(Ext.baseCSSPrefix+e.ownerLayout.type+"-form-item")},onRender:function(){var e=this,t,n,r={};if(e.extraMargins){t=e.el.getMargin();for(n in t)t.hasOwnProperty(n)&&(r["margin-"+n]=t[n]+e.extraMargins[n]+"px");e.el.setStyle(r)}}},hasVisibleLabel:function(){return this.hideLabel?!1:!this.hideEmptyLabel||!!this.getFieldLabel()},getLabelWidth:function(){var e=this;return e.hasVisibleLabel()?e.labelWidth+e.labelPad:0},getBodyColspan:function(){var e=this,t;return e.msgTarget==="side"&&(!e.autoFitErrors||e.hasActiveError())?t=1:t=2,e.labelAlign!=="top"&&!e.hasVisibleLabel()&&t++,t},getLabelCls:function(){var e=this.labelCls+" "+Ext.dom.Element.unselectableCls,t=this.labelClsExtra;return t?e+" "+t:e},getLabelCellStyle:function(){var e=this,t=e.hideLabel||!e.getFieldLabel()&&e.hideEmptyLabel;return t?"display:none;":""},getErrorMsgCls:function(){var e=this,t=e.hideLabel||!e.fieldLabel&&e.hideEmptyLabel;return e.errorMsgCls+(!t&&e.labelAlign==="top"?" "+Ext.baseCSSPrefix+"lbl-top-err-icon":"")},getLabelCellAttrs:function(){var e=this,t=e.labelAlign,n="";return t!=="top"&&(n='valign="top" halign="'+t+'" width="'+(e.labelWidth+e.labelPad)+'"'),n+' class="'+Ext.baseCSSPrefix+'field-label-cell"'},getLabelStyle:function(){var e=this,t=e.labelPad,n="";return e.labelAlign!=="top"&&(e.labelWidth&&(n="width:"+e.labelWidth+"px;"),t&&(n+="margin-right:"+t+"px;")),n+(e.labelStyle||"")},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(e){this.setActiveErrors(e)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(e){var t=this,n;e=Ext.Array.from(e),n=t.getTpl("activeErrorsTpl"),t.activeErrors=e,t.activeError=n.apply({fieldLabel:t.fieldLabel,errors:e,listCls:Ext.plainListCls}),t.renderActiveError()},unsetActiveError:function(){delete this.activeError,delete this.activeErrors,this.renderActiveError()},renderActiveError:function(){var e=this,t=e.getActiveError(),n=!!t;t!==e.lastActiveError&&(e.fireEvent("errorchange",e,t),e.lastActiveError=t),e.rendered&&!e.isDestroyed&&!e.preventMark&&(e.el[n?"addCls":"removeCls"](e.invalidCls),e.errorEl&&(e.errorEl.dom.innerHTML=t))},setFieldDefaults:function(e){var t;for(t in e)this.hasOwnProperty(t)||(this[t]=e[t])}}),Ext.define("Ext.form.field.Field",{isFormField:!0,disabled:!1,submitValue:!0,validateOnChange:!0,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange"),this.initValue()},initValue:function(){var e=this;e.value=e.transformOriginalValue(e.value),e.originalValue=e.lastValue=e.value,e.suspendCheckChange++,e.setValue(e.value),e.suspendCheckChange--},transformOriginalValue:Ext.identityFn,getName:function(){return this.name},getValue:function(){return this.value},setValue:function(e){var t=this;return t.value=e,t.checkChange(),t},isEqual:function(e,t){return String(e)===String(t)},isEqualAsString:function(e,t){return String(Ext.value(e,""))===String(Ext.value(t,""))},getSubmitData:function(){var e=this,t=null;return!e.disabled&&e.submitValue&&(t={},t[e.getName()]=""+e.getValue()),t},getModelData:function(e,t){var n=this,r=null;return!n.disabled&&(n.submitValue||!t)&&(r={},r[n.getName()]=n.getValue()),r},reset:function(){var e=this;e.beforeReset(),e.setValue(e.originalValue),e.clearInvalid(),delete e.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){var e=this,t,n;e.suspendCheckChange||(t=e.getValue(),n=e.lastValue,!e.isDestroyed&&e.didValueChange(t,n)&&(e.lastValue=t,e.fireEvent("change",e,t,n),e.onChange(t,n)))},didValueChange:function(e,t){return!this.isEqual(e,t)},onChange:function(e,t){this.validateOnChange&&this.validate(),this.checkDirty()},isDirty:function(){var e=this;return!e.disabled&&!e.isEqual(e.getValue(),e.originalValue)},checkDirty:function(){var e=this,t=e.isDirty();t!==e.wasDirty&&(e.fireEvent("dirtychange",e,t),e.onDirtyChange(t),e.wasDirty=t)},onDirtyChange:Ext.emptyFn,getErrors:function(e){return[]},isValid:function(){var e=this;return e.disabled||Ext.isEmpty(e.getErrors())},validate:function(){var e=this,t=e.isValid();return t!==e.wasValid&&(e.wasValid=t,e.fireEvent("validitychange",e,t)),t},batchChanges:function(e){try{this.suspendCheckChange++,e()}catch(t){throw t}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.define("Ext.layout.component.field.Field",{extend:Ext.layout.component.Auto,alias:"layout.field",type:"field",naturalSizingProp:"size",beginLayout:function(e){var t=this,n=t.owner;t.callParent(arguments),e.labelStrategy=t.getLabelStrategy(),e.errorStrategy=t.getErrorStrategy(),e.labelContext=e.getEl("labelEl"),e.bodyCellContext=e.getEl("bodyEl"),e.inputContext=e.getEl("inputEl"),e.errorContext=e.getEl("errorEl"),Ext.isIE7m&&Ext.isStrict&&e.inputContext&&(t.ieInputWidthAdjustment=e.inputContext.getPaddingInfo().width+e.inputContext.getBorderInfo().width),e.labelStrategy.prepare(e,n),e.errorStrategy.prepare(e,n)},beginLayoutCycle:function(e){var t=this,n=t.owner,r=e.widthModel,i=n[t.naturalSizingProp],s;t.callParent(arguments),r.shrinkWrap?t.beginLayoutShrinkWrap(e):r.natural?(typeof i=="number"&&!n.inputWidth?t.beginLayoutFixed(e,s=i*6.5+20,"px"):t.beginLayoutShrinkWrap(e),e.setWidth(s,!1)):t.beginLayoutFixed(e,"100","%")},beginLayoutFixed:function(e,t,n){var r=e.target,i=r.inputEl,s=r.inputWidth;r.el.setStyle("table-layout","fixed"),r.bodyEl.setStyle("width",t+n),i&&(s?i.setStyle("width",s+"px"):i.setStyle("width",r.stretchInputElFixed?"100%":"")),e.isFixed=!0},beginLayoutShrinkWrap:function(e){var t=e.target,n=t.inputEl,r=t.inputWidth;n&&n.dom&&(n.dom.removeAttribute("size"),r?n.setStyle("width",r+"px"):n.setStyle("width","")),t.el.setStyle("table-layout","auto"),t.bodyEl.setStyle("width","")},finishedLayout:function(e){var t=this.owner;this.callParent(arguments),e.labelStrategy.finishedLayout(e,t),e.errorStrategy.finishedLayout(e,t)},calculateOwnerHeightFromContentHeight:function(e,t){return t},measureContentHeight:function(e){return e.el.getHeight()},measureContentWidth:function(e){return e.el.getWidth()},measureLabelErrorHeight:function(e){return e.labelStrategy.getHeight(e)+e.errorStrategy.getHeight(e)},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},getLabelStrategy:function(){var e=this,t=e.labelStrategies,n=e.owner.labelAlign;return t[n]||t.base},getErrorStrategy:function(){var e=this,t=e.owner,n=e.errorStrategies,r=t.msgTarget;return!t.preventMark&&Ext.isString(r)?n[r]||n.elementId:n.none},labelStrategies:function(){var e={prepare:function(e,t){var n=t.labelCls+"-"+t.labelAlign,r=t.labelEl;r&&r.addCls(n)},getHeight:function(){return 0},finishedLayout:Ext.emptyFn};return{base:e,top:Ext.applyIf({getHeight:function(e){var t=e.labelContext,n=t.props,r=n.height;return r===undefined&&(n.height=r=t.el.getHeight()+t.getMarginInfo().height),r}},e),left:e,right:e}}(),errorStrategies:function(){function e(e){var t=Ext.layout.component.field.Field.tip,n;t&&t.isVisible()&&(n=t.activeTarget,n&&n.el===e.getActionEl().dom&&t.toFront(!0))}var t=Ext.applyIf,n=Ext.emptyFn,r=Ext.baseCSSPrefix+"form-invalid-icon",i,s={prepare:function(e,t){var n=t.errorEl;n&&n.setDisplayed(!1)},getHeight:function(){return 0},onFocus:n,finishedLayout:n};return{none:s,side:t({prepare:function(e,t){var n=t.errorEl,s=t.sideErrorCell,o=t.hasActiveError(),u;i||(i=(u=Ext.getBody().createChild({style:"position:absolute",cls:r})).getWidth(),u.remove()),n.addCls(r),n.set({"data-errorqtip":t.getActiveError()||""}),t.autoFitErrors?n.setDisplayed(o):n.setVisible(o),s&&t.autoFitErrors&&s.setDisplayed(o),t.bodyEl.dom.colSpan=t.getBodyColspan(),Ext.layout.component.field.Field.initTip()},onFocus:e},s),under:t({prepare:function(e,t){var n=t.errorEl,r=Ext.baseCSSPrefix+"form-invalid-under";n.addCls(r),n.setDisplayed(t.hasActiveError())},getHeight:function(e){var t=0,n,r;return e.target.hasActiveError()&&(n=e.errorContext,r=n.props,t=r.height,t===undefined&&(r.height=t=n.el.getHeight())),t}},s),qtip:t({prepare:function(e,t){Ext.layout.component.field.Field.initTip(),t.getActionEl().dom.setAttribute("data-errorqtip",t.getActiveError()||"")},onFocus:e},s),title:t({prepare:function(e,t){t.getActionEl().dom.setAttribute("title",t.getActiveError()||"")}},s),elementId:t({prepare:function(e,t){var n=Ext.fly(t.msgTarget);n&&(n.dom.innerHTML=t.getActiveError()||"",n.setDisplayed(t.hasActiveError()))}},s)}}(),statics:{initTip:function(){var e=this.tip;e||(e=this.tip=Ext.create("Ext.tip.QuickTip",{ui:"form-invalid"}),e.tagConfig=Ext.apply({},{attribute:"errorqtip"},e.tagConfig))},destroyTip:function(){var e=this.tip;e&&(e.destroy(),delete this.tip)}}}),Ext.define("Ext.form.field.Base",{extend:Ext.Component,mixins:{labelable:Ext.form.Labelable,field:Ext.form.field.Field},alias:"widget.field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],fieldSubTpl:['<input id="{id}" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:!0}],subTplInsertions:["inputAttrTpl"],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],checkChangeBuffer:50,componentLayout:"field",readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:!0,hasFocus:!1,baseCls:Ext.baseCSSPrefix+"field",maskOnDisable:!1,stretchInputElFixed:!0,initComponent:function(){var e=this;e.callParent(),e.subTplData=e.subTplData||{},e.addEvents("specialkey","writeablechange"),e.initLabelable(),e.initField(),e.name||(e.name=e.getInputId()),e.readOnly&&e.addCls(e.readOnlyCls),e.addCls(Ext.baseCSSPrefix+"form-type-"+e.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(){var e=this,t=e.inputType,n=e.getInputId(),r;return r=Ext.apply({id:n,cmpId:e.id,name:e.name||n,disabled:e.disabled,readOnly:e.readOnly,value:e.getRawValue(),type:t,fieldCls:e.fieldCls,fieldStyle:e.getFieldStyle(),tabIdx:e.tabIndex,inputCls:e.inputCls,typeCls:Ext.baseCSSPrefix+"form-"+(t==="password"?"text":t),role:e.ariaRole},e.subTplData),e.getInsertionRenderData(r,e.subTplInsertions),r},applyRenderSelectors:function(){var e=this;e.callParent(),e.addChildEls("inputEl"),e.inputEl=e.el.getById(e.getInputId())},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initRenderTpl:function(){var e=this;return e.hasOwnProperty("renderTpl")||(e.renderTpl=e.getTpl("labelableRenderTpl")),e.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(e){var t=this,n=t.inputEl;n&&n.applyStyles(e),t.fieldStyle=e},getFieldStyle:function(){var e=this.fieldStyle;return Ext.isObject(e)?Ext.DomHelper.generateStyles(e,null,!0):e||""},onRender:function(){this.callParent(arguments),this.renderActiveError()},getFocusEl:function(){return this.inputEl},isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var e=this,t=null,n;return!e.disabled&&e.submitValue&&(n=e.getSubmitValue(),n!==null&&(t={},t[e.getName()]=n)),t},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var e=this,t=e.inputEl?e.inputEl.getValue():Ext.value(e.rawValue,"");return e.rawValue=t,t},setRawValue:function(e){var t=this;return e=Ext.value(t.transformRawValue(e),""),t.rawValue=e,t.inputEl&&(t.inputEl.dom.value=e),e},transformRawValue:Ext.identityFn,valueToRaw:function(e){return""+Ext.value(e,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var e=this,t=e.rawToValue(e.processRawValue(e.getRawValue()));return e.value=t,t},setValue:function(e){var t=this;return t.setRawValue(t.valueToRaw(e)),t.mixins.field.setValue.call(t,e)},onBoxReady:function(){var e=this;e.callParent(),e.setReadOnlyOnBoxReady&&e.setReadOnly(e.readOnly)},onDisable:function(){var e=this,t=e.inputEl;e.callParent(),t&&(t.dom.disabled=!0,e.hasActiveError()&&(e.clearInvalid(),e.needsValidateOnEnable=!0))},onEnable:function(){var e=this,t=e.inputEl;e.callParent(),t&&(t.dom.disabled=!1,e.needsValidateOnEnable&&(delete e.needsValidateOnEnable,e.forceValidation=!0,e.isValid(),delete e.forceValidation))},setReadOnly:function(e){var t=this,n=t.inputEl;e=!!e,t[e?"addCls":"removeCls"](t.readOnlyCls),t.readOnly=e,n?n.dom.readOnly=e:t.rendering&&(t.setReadOnlyOnBoxReady=!0),t.fireEvent("writeablechange",t,e)},fireKey:function(e){e.isSpecialKey()&&this.fireEvent("specialkey",this,new Ext.EventObjectImpl(e))},initEvents:function(){var e=this,t=e.inputEl,n,r,i=e.checkChangeEvents,s,o=i.length,u;if(t){e.mon(t,Ext.EventManager.getKeyEvent(),e.fireKey,e),n=new Ext.util.DelayedTask(e.checkChange,e),e.onChangeEvent=r=function(){n.delay(e.checkChangeBuffer)};for(s=0;s<o;s++)u=i[s],u==="propertychange"&&(e.usesPropertychange=!0),e.mon(t,u,r)}e.callParent()},doComponentLayout:function(){var e=this,t=e.inputEl,n=e.usesPropertychange,r="propertychange",i=e.onChangeEvent;n&&e.mun(t,r,i),e.callParent(arguments),n&&e.mon(t,r,i)},onDirtyChange:function(e){this[e?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var e=this,t=e.disabled,n=e.forceValidation||!t;return n?e.validateValue(e.processRawValue(e.getRawValue())):t},validateValue:function(e){var t=this,n=t.getErrors(e),r=Ext.isEmpty(n);return t.preventMark||(r?t.clearInvalid():t.markInvalid(n)),r},markInvalid:function(e){var t=this,n=t.getActiveError(),r;t.setActiveErrors(Ext.Array.from(e)),r=t.getActiveError(),n!==r&&t.setError(r)},clearInvalid:function(){var e=this,t=e.hasActiveError();delete e.needsValidateOnEnable,e.unsetActiveError(),t&&e.setError("")},setError:function(e){var t=this,n=t.msgTarget,r;t.rendered&&(n=="title"||n=="qtip"?(t.rendered&&(r=n=="qtip"?"data-errorqtip":"title"),t.getActionEl().dom.setAttribute(r,e||"")):t.updateLayout())},renderActiveError:function(){var e=this,t=e.hasActiveError();e.inputEl&&e.inputEl[t?"addCls":"removeCls"](e.invalidCls+"-field"),e.mixins.labelable.renderActiveError.call(e)},getActionEl:function(){return this.inputEl||this.el}}),Ext.define("Ext.form.field.VTypes",function(){var e=/^[a-zA-Z_]+$/,t=/^[a-zA-Z0-9_]+$/,n=/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,r=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(e){return n.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return r.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(t){return e.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return t.test(e)},alphanumText:"This field should only contain letters, numbers and _"
,alphanumMask:/[a-z0-9_]/i}}()),Ext.define("Ext.layout.component.field.Text",{extend:Ext.layout.component.field.Field,alias:"layout.textfield",type:"textfield",setWidthInDom:!0,canGrowWidth:!0,beginLayoutCycle:function(e){this.callParent(arguments),e.heightModel.shrinkWrap&&e.inputContext.el.setStyle("height","")},measureContentWidth:function(e){var t=this,n=t.owner,r=t.callParent(arguments),i=e.inputContext,s,o,u,a,f;return n.grow&&t.canGrowWidth&&!e.state.growHandled&&(s=n.inputEl,o=Ext.util.Format.htmlEncode(s.dom.value||(n.hasFocus?"":n.emptyText)||""),o+=n.growAppend,u=s.getTextWidth(o)+i.getFrameInfo().width,a=n.growMax,f=Math.min(a,r),a=Math.max(n.growMin,a,f),u=Ext.Number.constrain(u,n.growMin,a),i.setWidth(u),e.state.growHandled=!0,i.domBlock(t,"width"),r=NaN),r},publishInnerHeight:function(e,t){e.inputContext.setHeight(t-this.measureLabelErrorHeight(e))},beginLayoutFixed:function(e,t,n){var r=this,i=r.ieInputWidthAdjustment;i&&(r.adjustIEInputPadding(e),n==="px"&&(t-=i)),r.callParent(arguments)},adjustIEInputPadding:function(e){this.owner.bodyEl.setStyle("padding-right",this.ieInputWidthAdjustment+"px")}}),Ext.define("Ext.form.field.Text",{extend:Ext.form.field.Base,alias:"widget.textfield",alternateClassName:["Ext.form.TextField","Ext.form.Text"],size:20,growMin:30,growMax:800,growAppend:"W",allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",requiredCls:Ext.baseCSSPrefix+"form-required-field",componentLayout:"textfield",valueContainsPlaceholder:!1,ariaRole:"textbox",initComponent:function(){var e=this;e.allowOnlyWhitespace===!1&&(e.allowBlank=!1),e.callParent(),e.addEvents("autosize","keydown","keyup","keypress"),e.addStateEvents("change"),e.setGrowSizePolicy()},setGrowSizePolicy:function(){this.grow&&(this.shrinkWrap|=1)},initEvents:function(){var e=this,t=e.inputEl;e.callParent(),(e.selectOnFocus||e.emptyText)&&e.mon(t,"mousedown",e.onMouseDown,e),(e.maskRe||e.vtype&&e.disableKeyFilter!==!0&&(e.maskRe=Ext.form.field.VTypes[e.vtype+"Mask"]))&&e.mon(t,"keypress",e.filterKeys,e),e.enableKeyEvents&&e.mon(t,{scope:e,keyup:e.onKeyUp,keydown:e.onKeyDown,keypress:e.onKeyPress})},isEqual:function(e,t){return this.isEqualAsString(e,t)},onChange:function(e,t){this.callParent(arguments),this.autoSize()},getSubTplData:function(){var e=this,t=e.getRawValue(),n=e.emptyText&&t.length<1,r=e.maxLength,i;return e.enforceMaxLength?r===Number.MAX_VALUE&&(r=undefined):r=undefined,n&&(Ext.supports.Placeholder?i=e.emptyText:(t=e.emptyText,e.valueContainsPlaceholder=!0)),Ext.apply(e.callParent(),{maxLength:r,readOnly:e.readOnly,placeholder:i,value:t,fieldCls:e.fieldCls+(n&&(i||t)?" "+e.emptyCls:"")+(e.allowBlank?"":" "+e.requiredCls)})},afterRender:function(){this.autoSize(),this.callParent()},onMouseDown:function(e){var t=this;t.hasFocus||t.mon(t.inputEl,"mouseup",Ext.emptyFn,t,{single:!0,preventDefault:!0})},processRawValue:function(e){var t=this,n=t.stripCharsRe,r;return n&&(r=e.replace(n,""),r!==e&&(t.setRawValue(r),e=r)),e},onDisable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){this.callParent(),this.applyEmptyText()},applyEmptyText:function(){var e=this,t=e.emptyText,n;e.rendered&&t&&(n=e.getRawValue().length<1&&!e.hasFocus,Ext.supports.Placeholder?e.inputEl.dom.placeholder=t:n&&(e.setRawValue(t),e.valueContainsPlaceholder=!0),n&&e.inputEl.addCls(e.emptyCls),e.autoSize())},afterFirstLayout:function(){this.callParent();if(Ext.isIE&&this.disabled){var e=this.inputEl;e&&(e.dom.unselectable="on")}},beforeFocus:function(){var e=this,t=e.inputEl,n=e.emptyText,r;e.callParent(arguments),n&&!Ext.supports.Placeholder&&t.dom.value===e.emptyText&&e.valueContainsPlaceholder?(e.setRawValue(""),r=!0,t.removeCls(e.emptyCls),e.valueContainsPlaceholder=!1):Ext.supports.Placeholder&&t.removeCls(e.emptyCls);if(e.selectOnFocus||r)Ext.isWebKit?(e.inputFocusTask||(e.inputFocusTask=new Ext.util.DelayedTask(e.focusInput,e)),e.inputFocusTask.delay(1)):e.focusInput()},focusInput:function(){var e=this.inputEl;e&&(e=e.dom,e&&e.select())},onFocus:function(){var e=this;e.callParent(arguments),e.emptyText&&e.autoSize()},postBlur:function(){var e=this.inputFocusTask;this.callParent(arguments),this.applyEmptyText(),e&&e.cancel()},filterKeys:function(e){if(e.ctrlKey&&!e.altKey)return;var t=e.getKey(),n=String.fromCharCode(e.getCharCode());if((Ext.isGecko||Ext.isOpera)&&(e.isNavKeyPress()||t===e.BACKSPACE||t===e.DELETE&&e.button===-1))return;if(!Ext.isGecko&&!Ext.isOpera&&e.isSpecialKey()&&!n)return;this.maskRe.test(n)||e.stopEvent()},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(e){this.callParent(arguments),e.hasOwnProperty("value")&&this.setValue(e.value)},getRawValue:function(){var e=this,t=e.callParent();return t===e.emptyText&&e.valueContainsPlaceholder&&(t=""),t},setValue:function(e){var t=this,n=t.inputEl;return n&&t.emptyText&&!Ext.isEmpty(e)&&(n.removeCls(t.emptyCls),t.valueContainsPlaceholder=!1),t.callParent(arguments),t.applyEmptyText(),t},getErrors:function(e){var t=this,n=t.callParent(arguments),r=t.validator,i=t.vtype,s=Ext.form.field.VTypes,o=t.regex,u=Ext.String.format,a,f,l;e=e||t.processRawValue(t.getRawValue()),Ext.isFunction(r)&&(a=r.call(t,e),a!==!0&&n.push(a)),f=t.allowOnlyWhitespace?e:Ext.String.trim(e);if(f.length<1||e===t.emptyText&&t.valueContainsPlaceholder){t.allowBlank||n.push(t.blankText);if(!t.validateBlank)return n;l=!0}return!l&&e.length<t.minLength&&n.push(u(t.minLengthText,t.minLength)),e.length>t.maxLength&&n.push(u(t.maxLengthText,t.maxLength)),i&&(s[i](e,t)||n.push(t.vtypeText||s[i+"Text"])),o&&!o.test(e)&&n.push(t.regexText||t.invalidText),n},selectText:function(e,t){var n=this,r=n.getRawValue(),i=!0,s=n.inputEl.dom,o,u;r.length>0&&(e=e===o?0:e,t=t===o?r.length:t,s.setSelectionRange?s.setSelectionRange(e,t):s.createTextRange&&(u=s.createTextRange(),u.moveStart("character",e),u.moveEnd("character",t-r.length),u.select()),i=Ext.isGecko||Ext.isOpera),i&&n.focus()},autoSize:function(){var e=this;e.grow&&e.rendered&&(e.autoSizing=!0,e.updateLayout())},afterComponentLayout:function(){var e=this,t;e.callParent(arguments),e.autoSizing&&(t=e.inputEl.getWidth(),t!==e.lastInputWidth&&(e.fireEvent("autosize",e,t),e.lastInputWidth=t,delete e.autoSizing))},onDestroy:function(){var e=this;e.callParent(),e.inputFocusTask&&(e.inputFocusTask.cancel(),e.inputFocusTask=null)}}),Ext.define("Ext.layout.component.field.TextArea",{extend:Ext.layout.component.field.Text,alias:"layout.textareafield",type:"textareafield",canGrowWidth:!1,naturalSizingProp:"cols",beginLayout:function(e){this.callParent(arguments),e.target.inputEl.setStyle("height","")},measureContentHeight:function(e){var t=this,n=t.owner,r=t.callParent(arguments),i,s,o,u,a,f;return n.grow&&!e.state.growHandled&&(i=e.inputContext,s=n.inputEl,a=s.getWidth(!0),o=Ext.util.Format.htmlEncode(s.dom.value)||"&#160;",o+=n.growAppend,o=o.replace(/\n/g,"<br/>"),f=Ext.util.TextMetrics.measure(s,o,a).height+i.getBorderInfo().height+i.getPaddingInfo().height,f=Ext.Number.constrain(f,n.growMin,n.growMax),i.setHeight(f),e.state.growHandled=!0,i.domBlock(t,"height"),r=NaN),r}}),Ext.define("Ext.form.field.TextArea",{extend:Ext.form.field.Text,alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="rows"> rows="{rows}" </tpl>','<tpl if="cols"> cols="{cols}" </tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="size"> size="{size}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",cols:20,rows:4,enterIsSpecial:!1,preventScrollbars:!1,componentLayout:"textareafield",setGrowSizePolicy:Ext.emptyFn,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",getSubTplData:function(){var e=this,t=e.getFieldStyle(),n=e.callParent();return e.grow&&e.preventScrollbars&&(n.fieldStyle=(t||"")+";overflow:hidden;height:"+e.growMin+"px"),Ext.applyIf(n,{cols:e.cols,rows:e.rows}),n},afterRender:function(){var e=this;e.callParent(arguments),e.needsMaxCheck=e.enforceMaxLength&&e.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength,e.needsMaxCheck&&e.inputEl.on("paste",e.onPaste,e)},transformRawValue:function(e){return this.stripReturns(e)},transformOriginalValue:function(e){return this.stripReturns(e)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(e){return e=this.stripReturns(e),this.callParent([e])},stripReturns:function(e){return e&&typeof e=="string"&&(e=e.replace(this.returnRe,"")),e},onPaste:function(e){var t=this;t.pasteTask||(t.pasteTask=new Ext.util.DelayedTask(t.pasteCheck,t)),t.pasteTask.delay(1)},pasteCheck:function(){var e=this,t=e.getValue(),n=e.maxLength;t.length>n&&(t=t.substr(0,n),e.setValue(t))},fireKey:function(e){var t=this,n=e.getKey(),r;e.isSpecialKey()&&(t.enterIsSpecial||n!==e.ENTER||e.hasModifier())&&t.fireEvent("specialkey",t,e),t.needsMaxCheck&&n!==e.BACKSPACE&&n!==e.DELETE&&!e.isNavKeyPress()&&!t.isCutCopyPasteSelectAll(e,n)&&(r=t.getValue(),r.length>=t.maxLength&&e.stopEvent())},isCutCopyPasteSelectAll:function(e,t){return e.ctrlKey?t===e.A||t===e.C||t===e.V||t===e.X:!1},autoSize:function(){var e=this,t;e.grow&&e.rendered&&(e.updateLayout(),t=e.inputEl.getHeight(),t!==e.lastInputHeight&&(e.fireEvent("autosize",e,t),e.lastInputHeight=t))},beforeDestroy:function(){var e=this.pasteTask;e&&(e.cancel(),this.pasteTask=null),this.callParent()}}),Ext.define("Ext.form.field.Display",{extend:Ext.form.field.Base,alias:"widget.displayfield",alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls}">{value}</div>',{compiled:!0,disableFormats:!0}],readOnly:!0,fieldCls:Ext.baseCSSPrefix+"form-display-field",fieldBodyCls:Ext.baseCSSPrefix+"form-display-field-body",htmlEncode:!1,noWrap:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,valueToRaw:function(e){return!e&&e!==0?"":e},isDirty:function(){return!1},isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){return this.rawValue},setRawValue:function(e){var t=this;return e=Ext.value(e,""),t.rawValue=e,t.rendered&&(t.inputEl.dom.innerHTML=t.getDisplayValue(),t.updateLayout()),e},getDisplayValue:function(){var e=this,t=this.getRawValue(),n;return e.renderer?n=e.renderer.call(e.scope||e,t,e):n=e.htmlEncode?Ext.util.Format.htmlEncode(t):t,n},getSubTplData:function(){var e=this.callParent(arguments);return e.value=this.getDisplayValue(),e}}),Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:Ext.layout.container.Auto,alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,beginLayoutCycle:function(e){var t=this,n=0,r,i,s,o,u,a;t.callParent(arguments),s=e.childItems,u=s.length;for(o=0;o<u;++o){i=s[o],r=i.target.anchorSpec;if(r){i.widthModel.calculated&&r.right&&(n|=1),i.heightModel.calculated&&r.bottom&&(n|=2);if(n==3)break}}e.anchorDimensions=n},calculateItems:function(e,t){var n=this,r=e.childItems,i=r.length,s=t.gotHeight,o=t.gotWidth,u=t.height,a=t.width,f=(o?1:0)|(s?2:0),l=e.anchorDimensions,c,h,p,d,v,m;if(!l)return!0;for(v=0;v<i;v++)h=r[v],p=h.getMarginInfo(),c=h.target.anchorSpec,o&&h.widthModel.calculated&&(m=c.right(a)-p.width,m=n.adjustWidthAnchor(m,h),h.setWidth(m)),s&&h.heightModel.calculated&&(d=c.bottom(u)-p.height,d=n.adjustHeightAnchor(d,h),h.setHeight(d));return(f&l)===l},anchorFactory:{offset:function(e){return function(t){return t+e}},ratio:function(e){return function(t){return Math.floor(t*e)}},standard:function(e){return function(t){return t-e}}},parseAnchor:function(e,t,n){if(e&&e!="none"){var r=this.anchorFactory,i;if(this.parseAnchorRE.test(e))return r.standard(n-t);if(e.indexOf("%")!=-1)return r.ratio(parseFloat(e.replace("%",""))*.01);i=parseInt(e,10);if(!isNaN(i))return r.offset(i)}return null},adjustWidthAnchor:function(e,t){return e},adjustHeightAnchor:function(e,t){return e},configureItem:function(e){var t=this,n=t.owner,r=e.anchor,i,s,o;t.callParent(arguments),!e.anchor&&e.items&&!Ext.isNumber(e.width)&&(!Ext.isIE6||!Ext.isStrict)&&(e.anchor=r=t.defaultAnchor),n.anchorSize?typeof n.anchorSize=="number"?s=n.anchorSize:(s=n.anchorSize.width,o=n.anchorSize.height):(s=n.initialConfig.width,o=n.initialConfig.height),r&&(i=r.split(" "),e.anchorSpec={right:t.parseAnchor(i[0],e.initialConfig.width,s),bottom:t.parseAnchor(i[1],e.initialConfig.height,o)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var t=e.anchorSpec,n="$",r=this.sizePolicy,i;return t&&(i=this.owner.getSizeModel(),t.right&&!i.width.shrinkWrap&&(r=r.r),t.bottom&&!i.height.shrinkWrap&&(n="b")),r[n]}}),Ext.define("Ext.window.MessageBox",{extend:Ext.window.Window,alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hide-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,iconWidth:50,ariaRole:"alertdialog",makeButton:function(e){var t=this.buttonIds[e];return new Ext.button.Button({handler:this.btnCallback,itemId:t,scope:this,text:this.buttonText[t],minWidth:75})},btnCallback:function(e){var t=this,n,r;if(t.cfg.prompt||t.cfg.multiline)t.cfg.multiline?r=t.textArea:r=t.textField,n=r.getValue(),r.reset();t.hide(),t.userCallback(e.itemId,n,t.cfg)},hide:function(){var e=this,t=e.cfg.cls;e.progressBar.reset(),t&&e.removeCls(t),e.callParent(arguments)},constructor:function(e){var t=this;t.callParent(arguments),t.minWidth=t.defaultMinWidth=t.minWidth||t.defaultMinWidth,t.maxWidth=t.defaultMaxWidth=t.maxWidth||t.defaultMaxWidth,t.minHeight=t.defaultMinHeight=t.minHeight||t.defaultMinHeight,t.maxHeight=t.defaultMaxHeight=t.maxHeight||t.defaultMaxHeight},initComponent:function(e){var t=this,n=t.id,r,i;t.title="&#160;",t.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[t.iconComponent=new Ext.Component({width:t.iconWidth,height:t.iconHeight}),t.promptContainer=new Ext.container.Container({flex:1,layout:"anchor",items:[t.msg=new Ext.form.field.Display({id:n+"-displayfield",cls:t.baseCls+"-text"}),t.textField=new Ext.form.field.Text({id:n+"-textfield",anchor:"100%",enableKeyEvents:!0,listeners:{keydown:t.onPromptKey,scope:t}}),t.textArea=new Ext.form.field.TextArea({id:n+"-textarea",anchor:"100%",height:75})]})]}),t.progressBar=new Ext.ProgressBar({id:n+"-progressbar",margin:"0 10 10 10"}),t.items=[t.topContainer,t.progressBar],t.msgButtons=[];for(r=0;r<4;r++)i=t.makeButton(r),t.msgButtons[i.itemId]=i,t.msgButtons.push(i);t.bottomTb=new Ext.toolbar.Toolbar({id:n+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[t.msgButtons[0],t.msgButtons[1],t.msgButtons[2],t.msgButtons[3]]}),t.dockedItems=[t.bottomTb],t.on("close",t.onClose,t),t.callParent()},onClose:function(){var e=this.header.child("[type=close]");e.itemId="cancel",this.btnCallback(e),delete e.itemId},onPromptKey:function(e,t){var n=this;if(t.keyCode===t.RETURN||t.keyCode===10)n.msgButtons.ok.isVisible()?n.msgButtons.ok.handler.call(n,n.msgButtons.ok):n.msgButtons.yes.isVisible()&&n.msgButtons.yes.handler.call(n,n.msgButtons.yes)},reconfigure:function(e){var t=this,n=0,r=!0,i=t.buttonText,s=t.resizer,o,u,a,f,l,c,h,p,d;t.updateButtonText(),e=e||{},t.cfg=e,e.width&&(u=e.width),e.height&&(a=e.height),t.minWidth=e.minWidth||t.defaultMinWidth,t.maxWidth=e.maxWidth||t.defaultMaxWidth,t.minHeight=e.minHeight||t.defaultMinHeight,t.maxHeight=e.maxHeight||t.defaultMaxHeight,s&&(o=s.resizeTracker,s.minWidth=o.minWidth=t.minWidth,s.maxWidth=o.maxWidth=t.maxWidth,s.minHeight=o.minHeight=t.minHeight,s.maxHeight=o.maxHeight=t.maxHeight),delete t.defaultFocus,e.defaultFocus&&(t.defaultFocus=e.defaultFocus),t.animateTarget=e.animateTarget||undefined,t.modal=e.modal!==!1,t.setTitle(e.title||""),t.setIconCls(e.iconCls||""),Ext.isObject(e.buttons)?(t.buttonText=e.buttons,n=0):(t.buttonText=e.buttonText||t.buttonText,n=Ext.isNumber(e.buttons)?e.buttons:0),n|=t.updateButtonText(),t.buttonText=i,Ext.suspendLayouts(),delete t.width,delete t.height;if(u||a)u&&t.setWidth(u),a&&t.setHeight(a);t.hidden=!1,t.rendered||t.render(Ext.getBody()),t.closable=e.closable!==!1&&!e.wait,t.header.child("[type=close]").setVisible(t.closable),!e.title&&!t.closable&&!e.iconCls?t.header.hide():t.header.show(),t.liveDrag=!e.proxyDrag,t.userCallback=Ext.Function.bind(e.callback||e.fn||Ext.emptyFn,e.scope||Ext.global),t.setIcon(e.icon,e.iconWidth,e.iconHeight),h=t.msg,e.msg?(h.setValue(e.msg),h.show()):h.hide(),l=t.textArea,c=t.textField,e.prompt||e.multiline?(t.multiline=e.multiline,e.multiline?(l.setValue(e.value),l.setHeight(e.defaultTextHeight||t.defaultTextHeight),l.show(),c.hide(),t.defaultFocus=l):(c.setValue(e.value),l.hide(),c.show(),t.defaultFocus=c)):(l.hide(),c.hide()),p=t.progressBar,e.progress||e.wait?(p.show(),t.updateProgress(0,e.progressText),e.wait===!0&&p.wait(e.waitConfig)):p.hide(),d=t.msgButtons;for(f=0;f<4;f++)n&Math.pow(2,f)?(t.defaultFocus||(t.defaultFocus=d[f]),d[f].show(),r=!1):d[f].hide();r?t.bottomTb.hide():t.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var e=this,t=e.buttonText,n=0,r,i;for(r in t)t.hasOwnProperty(r)&&(i=e.msgButtons[r],i&&(e.cfg&&e.cfg.buttonText&&(n|=Math.pow(2,Ext.Array.indexOf(e.buttonIds,r))),i.text!=t[r]&&i.setText(t[r])));return n},show:function(e){var t=this,n;return Ext.AbstractComponent.layoutSuspendCount?(Ext.on({resumelayouts:function(){t.show(e)},single:!0}),t):(t.reconfigure(e),e.cls&&t.addCls(e.cls),n=t.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),t.preventFocusOnActivate=!n.length,t.hidden=!0,t.callParent(),t)},onShow:function(){this.callParent(arguments),this.center()},updateText:function(e){this.msg.setValue(e)},setIcon:function(e,t,n){var r=this,i=r.iconComponent,s=r.messageIconCls;return s&&i.removeCls(s),e?(i.show(),i.setSize(t||r.iconWidth,n||r.iconHeight),i.addCls(Ext.baseCSSPrefix+"dlg-icon"),i.addCls(r.messageIconCls=e)):(i.removeCls(Ext.baseCSSPrefix+"dlg-icon"),i.hide()),r},updateProgress:function(e,t,n){return this.progressBar.updateProgress(e,t),n&&this.updateText(n),this},onEsc:function(){this.closable!==!1&&this.callParent(arguments)},confirm:function(e,t,n,r){return Ext.isString(e)&&(e={title:e,icon:this.QUESTION,msg:t,buttons:this.YESNO,callback:n,scope:r}),this.show(e)},prompt:function(e,t,n,r,i,s){return Ext.isString(e)&&(e={prompt:!0,title:e,minWidth:this.minPromptWidth,msg:t,buttons:this.OKCANCEL,callback:n,scope:r,multiline:i,value:s}),this.show(e)},wait:function(e,t,n){return Ext.isString(e)&&(e={title:t,msg:e,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:n}),this.show(e)},alert:function(e,t,n,r){return Ext.isString(e)&&(e={title:e,msg:t,buttons:this.OK,fn:n,scope:r,minWidth:this.minWidth}),this.show(e)},progress:function(e,t,n){return Ext.isString(e)&&(e={title:e,msg:t,progress:!0,progressText:n}),this.show(e)}},function(){Ext.MessageBox=Ext.Msg=new this}),Ext.define("Ext.form.Basic",{extend:Ext.util.Observable,alternateClassName:"Ext.form.BasicForm",constructor:function(e,t){var n=this,r;n.owner=e,n.checkValidityTask=new Ext.util.DelayedTask(n.checkValidity,n),n.checkDirtyTask=new Ext.util.DelayedTask(n.checkDirty,n),n.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:n,addHandler:n.onFieldAdd,removeHandler:n.onFieldRemove}),n.monitor.bind(e),Ext.apply(n,t),Ext.isString(n.paramOrder)&&(n.paramOrder=n.paramOrder.split(/[\s,|]/)),r=n.reader,r&&!r.isReader&&(typeof r=="string"&&(r={type:r}),n.reader=Ext.createByAlias("reader."+r.type,r)),r=n.errorReader,r&&!r.isReader&&(typeof r=="string"&&(r={type:r}),n.errorReader=Ext.createByAlias("reader."+r.type,r)),n.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"),n.callParent()},initialize:function(){this.initialized=!0,this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:"Please Wait...",trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var e=this,t=e.monitor;t&&(t.unbind(),e.monitor=null),e.clearListeners(),e.checkValidityTask.cancel(),e.checkDirtyTask.cancel(),e.isDestroyed=!0},onFieldAdd:function(e){var t=this;t.mon(e,"validitychange",t.checkValidityDelay,t),t.mon(e,"dirtychange",t.checkDirtyDelay,t),t.initialized&&t.checkValidityDelay()},onFieldRemove:function(e){var t=this;t.mun(e,"validitychange",t.checkValidityDelay,t),t.mun(e,"dirtychange",t.checkDirtyDelay,t),t.initialized&&t.checkValidityDelay()},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var e=this._boundItems;if(!e||e.getCount()===0)e=this._boundItems=new Ext.util.MixedCollection,e.addAll(this.owner.query("[formBind]"));return e},hasInvalidField:function(){return!!this.getFields().findBy(function(e){var t=e.preventMark,n;return e.preventMark=!0,n=e.isValid(),e.preventMark=t,!n})},isValid:function(){var e=this,t;return Ext.suspendLayouts(),t=e.getFields().filterBy(function(e){return!e.validate()}),Ext.resumeLayouts(!0),t.length<1},checkValidity:function(){var e=this,t;if(e.isDestroyed)return;t=!e.hasInvalidField(),t!==e.wasValid&&(e.onValidityChange(t),e.fireEvent("validitychange",e,t),e.wasValid=t)},checkValidityDelay:function(){this.checkValidityTask.delay(10)},onValidityChange:function(e){var t=this.getBoundItems(),n,r,i,s;if(t){n=t.items,i=n.length;for(r=0;r<i;r++)s=n[r],s.disabled===e&&s.setDisabled(!e)}},isDirty:function(){return!!this.getFields().findBy(function(e){return e.isDirty()})},checkDirtyDelay:function(){this.checkDirtyTask.delay(10)},checkDirty:function(){var e=this,t;if(e.isDestroyed)return;t=this.isDirty(),t!==this.wasDirty&&(this.fireEvent("dirtychange",this,t),this.wasDirty=t)},hasUpload:function(){return!!this.getFields().findBy(function(e){return e.isFileUpload()})},doAction:function(e,t){return Ext.isString(e)&&(e=Ext.ClassManager.instantiateByAlias("formaction."+e,Ext.apply({},t,{form:this}))),this.fireEvent("beforeaction",this,e)!==!1&&(this.beforeAction(e),Ext.defer(e.run,100,e)),this},submit:function(e){e=e||{};var t=this,n;return e.standardSubmit||t.standardSubmit?n="standardsubmit":n=t.api?"directsubmit":"submit",t.doAction(n,e)},load:function(e){return this.doAction(this.api?"directload":"load",e)},updateRecord:function(e){e=e||this._record;if(!e)return this;var t=e.fields.items,n=this.getFieldValues(),r={},i=0,s=t.length,o;for(;i<s;++i)o=t[i].name,n.hasOwnProperty(o)&&(r[o]=n[o]);return e.beginEdit(),e.set(r),e.endEdit(),this},loadRecord:function(e){return this._record=e,this.setValues(e.getData())},getRecord:function(){return this._record},beforeAction:function(e){var t=this,n=e.waitMsg,r=Ext.baseCSSPrefix+"mask-loading",i=t.getFields().items,s,o=i.length,u,a;for(s=0;s<o;s++)u=i[s],u.isFormField&&u.syncValue&&u.syncValue();n&&(a=t.waitMsgTarget,a===!0?t.owner.el.mask(n,r):a?(a=t.waitMsgTarget=Ext.get(a),a.mask(n,r)):(t.floatingAncestor=t.owner.up("[floating]"),t.floatingAncestor&&(t.savePreventFocusOnActivate=t.floatingAncestor.preventFocusOnActivate,t.floatingAncestor.preventFocusOnActivate=!0),Ext.MessageBox.wait(n,e.waitTitle||t.waitTitle)))},afterAction:function(e,t){var n=this;if(e.waitMsg){var r=Ext.MessageBox,i=n.waitMsgTarget;i===!0?n.owner.el.unmask():i?i.unmask():r.hide()}n.floatingAncestor&&(n.floatingAncestor.preventFocusOnActivate=n.savePreventFocusOnActivate),t?(e.reset&&n.reset(),Ext.callback(e.success,e.scope||e,[n,e]),n.fireEvent("actioncomplete",n,e)):(Ext.callback(e.failure,e.scope||e,[n,e]),n.fireEvent("actionfailed",n,e))},findField:function(e){return this.getFields().findBy(function(t){return t.id===e||t.getName()===e})},markInvalid:function(e){function u(e,n){var r=t.findField(e);r&&r.markInvalid(n)}var t=this,n,r,i,s,o;if(Ext.isArray(e)){r=e.length;for(n=0;n<r;n++)i=e[n],u(i.id,i.msg)}else if(e instanceof Ext.data.Errors){r=e.items.length;for(n=0;n<r;n++)i=e.items[n],u(i.field,i.message)}else for(o in e)e.hasOwnProperty(o)&&(s=e[o],u(o,s,e));return this},setValues:function(e){function o(e,n){var r=t.findField(e);r&&(r.setValue(n),t.trackResetOnLoad&&r.resetOriginalValue())}var t=this,n,r,i,s;Ext.suspendLayouts();if(Ext.isArray(e)){r=e.length;for(n=0;n<r;n++)i=e[n],o(i.id,i.value)}else Ext.iterate(e,o);return Ext.resumeLayouts(!0),this},getValues:function(e,t,n,r,i){var s={},o=this.getFields().items,u=o.length,a=Ext.isArray,f,l,c,h,p,d;for(d=0;d<u;d++){f=o[d];if(!t||f.isDirty()){l=f[r?"getModelData":"getSubmitData"](n,i);if(Ext.isObject(l))for(p in l)l.hasOwnProperty(p)&&(c=l[p],n&&c===""&&(c=f.emptyText||""),f.isRadio?s[p]=s[p]||c:s.hasOwnProperty(p)?(h=s[p],a(h)||(h=s[p]=[h]),a(c)?s[p]=h.concat(c):h.push(c)):s[p]=c)}}return e&&(s=Ext.Object.toQueryString(s)),s},getFieldValues:function(e){return this.getValues(!1,e,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var e=this,t=e.getFields().items,n,r=t.length;for(n=0;n<r;n++)t[n].clearInvalid();return Ext.resumeLayouts(!0),e},reset:function(e){Ext.suspendLayouts();var t=this,n=t.getFields().items,r,i=n.length;for(r=0;r<i;r++)n[r].reset();return Ext.resumeLayouts(!0),e===!0&&delete t._record,t},applyToFields:function(e){var t=this.getFields().items,n,r=t.length;for(n=0;n<r;n++)Ext.apply(t[n],e);return this},applyIfToFields:function(e){var t=this.getFields().items,n,r=t.length;for(n=0;n<r;n++)Ext.applyIf(t[n],e);return this}}),Ext.define("Ext.form.FieldAncestor",{xhooks:{initHierarchyState:function(e){this.fieldDefaults&&(e.fieldDefaults?e.fieldDefaults=Ext.apply(Ext.Object.chain(e.fieldDefaults),this.fieldDefaults):e.fieldDefaults=this.fieldDefaults)}},initFieldAncestor:function(){var e=this;e.addEvents("fieldvaliditychange","fielderrorchange"),e.monitor=new Ext.container.Monitor({scope:e,selector:"[isFormField]:not([excludeForm])",addHandler:e.onChildFieldAdd,removeHandler:e.onChildFieldRemove}),e.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},onChildFieldAdd:function(e){var t=this;t.mon(e,"errorchange",t.handleFieldErrorChange,t),t.mon(e,"validitychange",t.handleFieldValidityChange,t)},onChildFieldRemove:function(e){var t=this;t.mun(e,"errorchange",t.handleFieldErrorChange,t),t.mun(e,"validitychange",t.handleFieldValidityChange,t)},initFieldDefaults:function(){this.fieldDefaults||(this.fieldDefaults={})},handleFieldValidityChange:function(e,t){var n=this;e!==n&&(n.fireEvent("fieldvaliditychange",n,e,t),n.onFieldValidityChange(e,t))},handleFieldErrorChange:function(e,t){var n=this;e!==n&&(n.fireEvent("fielderrorchange",n,e,t),n.onFieldErrorChange(e,t))},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,beforeDestroy:function(){this.monitor.unbind(),this.callParent()}}),Ext.define("Ext.layout.component.field.FieldContainer",{extend:Ext.layout.component.field.Field,alias:"layout.fieldcontainer",type:"fieldcontainer",waitForOuterHeightInDom:!0,waitForOuterWidthInDom:!0,beginLayout:function(e){var t=this.owner;this.callParent(arguments),e.hasRawContent=!0,t.bodyEl.setStyle("height",""),t.containerEl.setStyle("height",""),e.containerElContext=e.getEl("containerEl")},measureContentHeight:function(e){return e.hasDomProp("containerLayoutDone")?this.callParent(arguments):NaN},measureContentWidth:function(e){return e.hasDomProp("containerLayoutDone")?this.callParent(arguments):NaN},publishInnerWidth:function(e,t){var n=e.bodyCellContext,r=n.el.getWidth();n.setWidth(r,!1),e.containerElContext.setWidth(r,!1)},publishInnerHeight:function(e,t){var n=e.bodyCellContext,r=e.containerElContext;t-=this.measureLabelErrorHeight(e),n.setHeight(t),r.setHeight(t)}}),Ext.define("Ext.form.FieldContainer",{extend:Ext.container.Container,mixins:{labelable:Ext.form.Labelable,fieldAncestor:Ext.form.FieldAncestor},alias:"widget.fieldcontainer",componentLayout:"fieldcontainer",componentCls:Ext.baseCSSPrefix+"form-fieldcontainer",customOverflowEl:"containerEl",childEls:["containerEl"],combineLabels:!1,labelConnector:", ",combineErrors:!1,maskOnDisable:!1,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" class="{containerElCls}" role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var e=this;e.initLabelable(),e.initFieldAncestor(),e.callParent(),e.initMonitor()},getOverflowEl:function(){return this.containerEl},onAdd:function(e){var t=this;e.isLabelable&&Ext.isGecko&&t.layout.type==="absolute"&&!t.hideLabel&&t.labelAlign!=="top"&&(e.x+=t.labelWidth+t.labelPad),t.callParent(arguments),e.isLabelable&&t.combineLabels&&(e.oldHideLabel=e.hideLabel,e.hideLabel=!0),t.updateLabel()},onRemove:function(e,t){var n=this;n.callParent(arguments),t||(e.isLabelable&&n.combineLabels&&(e.hideLabel=e.oldHideLabel),n.updateLabel())},initRenderTpl:function(){var e=this;return e.hasOwnProperty("renderTpl")||(e.renderTpl=e.getTpl("labelableRenderTpl")),e.callParent()},initRenderData:function(){var e=this,t=e.callParent();return t.containerElCls=e.containerElCls,Ext.applyIf(t,e.getLabelableRenderData())},getFieldLabel:function(){var e=this.fieldLabel||"";return!e&&this.combineLabels&&(e=Ext.Array.map(this.query("[isFieldLabelable]"),function(e){return e.getFieldLabel()}).join(this.labelConnector)),e},getSubTplData:function(){var e=this.initRenderData();return Ext.apply(e,this.subTplData),e},getSubTplMarkup:function(){var e=this,t=e.getTpl("fieldSubTpl"),n;return t.renderContent||e.setupRenderTpl(t),n=t.apply(e.getSubTplData()),n},updateLabel:function(){var e=this,t=e.labelEl;t&&e.setFieldLabel(e.getFieldLabel())},onFieldErrorChange:function(e,t){if(this.combineErrors){var n=this,r=n.getActiveError(),i=Ext.Array.filter(n.query("[isFormField]"),function(e){return e.hasActiveError()}),s=n.getCombinedErrors(i);s?n.setActiveErrors(s):n.unsetActiveError(),r!==n.getActiveError()&&n.doComponentLayout()}},getCombinedErrors:function(e){var t=[],n,r=e.length,i,s,o,u,a,f;for(n=0;n<r;n++){i=e[n],s=i.getActiveErrors(),u=s.length;for(o=0;o<u;o++)a=s[o],f=i.getFieldLabel(),t.push((f?f+": ":"")+a)}return t},getTargetEl:function(){return this.containerEl},applyTargetCls:function(e){var t=this.containerElCls;this.containerElCls=t?t+" "+e:e}}),Ext.define("Ext.layout.container.CheckboxGroup",{extend:Ext.layout.container.Container,alias:["layout.checkboxgroup"],autoFlex:!0,type:"checkboxgroup",createsInnerCt:!0,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" class="'+Ext.plainTableCls+'" cellpadding="0"','role="presentation" style="{tableStyle}">','<tbody role="presentation"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></tbody></table>"],lastOwnerItemsGeneration:null,beginLayout:function(e){var t=this,n,r,i,s,o,u=0,a=0,f=t.autoFlex,l=t.innerCt.dom.style;t.callParent(arguments),n=t.columnNodes,e.innerCtContext=e.getEl("innerCt",t);if(!e.widthModel.shrinkWrap){r=n.length;if(t.columnsArray
){for(i=0;i<r;i++)s=t.owner.columns[i],s<1&&(u+=s,a++);for(i=0;i<r;i++)s=t.owner.columns[i],s<1?o=s/u*100+"%":o=s+"px",n[i].style.width=o}else for(i=0;i<r;i++)o=f?1/r*100+"%":"",n[i].style.width=o,a++;a?a<r?(l.tableLayout="fixed",l.width="100%"):(l.tableLayout="auto",f?l.width="100%":l.width=""):(l.tableLayout="fixed",l.width="")}else l.tableLayout="auto",l.width=""},cacheElements:function(){var e=this;e.callParent(),e.rowEl=e.innerCt.down("tr"),e.columnNodes=e.rowEl.dom.childNodes},calculate:function(e){var t=this,n,r,i,s,o,u;e.getDomProp("containerChildrenSizeDone")?(n=e.innerCtContext,r=e.widthModel.shrinkWrap,i=e.heightModel.shrinkWrap,s=i||r,o=n.el.dom,u=s&&n.getPaddingInfo(),r&&e.setContentWidth(o.offsetWidth+u.width,!0),i&&e.setContentHeight(o.offsetHeight+u.height,!0)):t.done=!1},doRenderColumn:function(e,t,n){var r=t.$layout,i=r.owner,s=t.columnCount,o=i.items.items,u=o.length,a,f,l,c,h;i.vertical?(l=Math.ceil(u/s),f=n*l,u=Math.min(u,f+l),c=1):(f=n,c=s);for(;f<u;f+=c)a=o[f],r.configureItem(a),h=a.getRenderTree(),Ext.DomHelper.generateMarkup(h,e)},getColumnCount:function(){var e=this,t=e.owner,n=t.columns;return e.columnsArray?n.length:Ext.isNumber(n)?n:t.items.length},getItemSizePolicy:function(e){return this.autoSizePolicy},getRenderData:function(){var e=this,t=e.callParent(),n=e.owner,r,i=e.getColumnCount(),s,o,u,a=e.autoFlex,f=0,l=0;if(e.columnsArray)for(r=0;r<i;r++)s=e.owner.columns[r],s<1&&(f+=s,l++);t.colCls=n.groupCls,t.columnCount=i,t.columns=[];for(r=0;r<i;r++)o=t.columns[r]={},e.columnsArray?(s=e.owner.columns[r],s<1?u=s/f*100+"%":u=s+"px",o.style="width:"+u):(o.style="width:"+1/i*100+"%",l++);return t.tableStyle=l?l<i?"table-layout:fixed;width:100%":a?"table-layout:auto;width:100%":"table-layout:auto;":"table-layout:fixed;",t},initLayout:function(){var e=this,t=e.owner;e.columnsArray=Ext.isArray(t.columns),e.autoColumns=!t.columns||t.columns==="auto",e.vertical=t.vertical,e.callParent()},isValidParent:function(){return!0},setupRenderTpl:function(e){this.callParent(arguments),e.renderColumn=this.doRenderColumn},renderChildren:function(){var e=this,t=e.owner.items.generation;e.lastOwnerItemsGeneration!==t&&(e.lastOwnerItemsGeneration=t,e.renderItems(e.getLayoutItems()))},renderItems:function(e){var t=this,n=e.length,r,i,s,o,u,a;if(n){Ext.suspendLayouts(),t.autoColumns&&t.addMissingColumns(n),o=t.columnNodes.length,s=Math.ceil(n/o);for(r=0;r<n;r++)i=e[r],u=t.getRenderRowIndex(r,s,o),a=t.getRenderColumnIndex(r,s,o),i.rendered?t.isItemAtPosition(i,u,a)||t.moveItem(i,u,a):t.renderItem(i,u,a);t.autoColumns&&t.removeExceedingColumns(n),Ext.resumeLayouts(!0)}},isItemAtPosition:function(e,t,n){return e.el.dom===this.getNodeAt(t,n)},getRenderColumnIndex:function(e,t,n){return this.vertical?Math.floor(e/t):e%n},getRenderRowIndex:function(e,t,n){var r=this;return r.vertical?e%t:Math.floor(e/n)},getNodeAt:function(e,t){return this.columnNodes[t].childNodes[e]},addMissingColumns:function(e){var t=this,n=t.columnNodes.length,r,i,s,o;if(n<e){r=e-n,i=t.rowEl,s=t.owner.groupCls;for(o=0;o<r;o++)i.createChild({cls:s,tag:"td",vAlign:"top",role:"presentation"})}},removeExceedingColumns:function(e){var t=this,n=t.columnNodes.length,r,i,s;if(n>e){r=n-e,i=t.rowEl;for(s=0;s<r;s++)i.last().remove()}},renderItem:function(e,t,n){var r=this;r.configureItem(e),e.render(Ext.get(r.columnNodes[n]),t),r.afterRenderItem(e)},moveItem:function(e,t,n){var r=this,i=r.columnNodes[n],s=i.childNodes[t];i.insertBefore(e.el.dom,s||null)}}),Ext.define("Ext.form.CheckboxManager",{extend:Ext.util.MixedCollection,singleton:!0,getByName:function(e,t){return this.filterBy(function(n){return n.name==e&&n.getFormId()==t})}}),Ext.define("Ext.form.field.Checkbox",{extend:Ext.form.field.Base,alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",componentLayout:"field",stretchInputElFixed:!1,childEls:["boxLabelEl"],fieldSubTpl:['<div class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" role="{role}" {inputAttrTpl}','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {inputCls} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="boxLabel && !labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:!0,compiled:!0}],subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:!0,focusCls:"form-checkbox-focus",extraFieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:!1,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",afterLabelCls:Ext.baseCSSPrefix+"form-cb-after",wrapInnerCls:Ext.baseCSSPrefix+"form-cb-wrap-inner",noBoxLabelCls:Ext.baseCSSPrefix+"form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",ariaRole:"checkbox",onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+"form-cb",initComponent:function(){var e=this,t=e.value;t!==undefined&&(e.checked=e.isChecked(t,e.inputValue)),e.callParent(arguments),e.getManager().add(e)},initValue:function(){var e=this,t=!!e.checked;e.originalValue=e.lastValue=t,e.setValue(t)},getElConfig:function(){var e=this;return e.isChecked(e.rawValue,e.inputValue)&&e.addCls(e.checkedCls),e.callParent()},getSubTplData:function(){var e=this,t=e.boxLabel,n=e.boxLabelAlign,r=t&&n==="before";return Ext.apply(e.callParent(),{disabled:e.readOnly||e.disabled,wrapInnerCls:e.wrapInnerCls,boxLabel:t,boxLabelCls:e.boxLabelCls,boxLabelAlign:n,labelAlignedBefore:r,afterLabelCls:r?e.afterLabelCls:"",noBoxLabelCls:t?"":e.noBoxLabelCls,role:e.ariaRole})},initEvents:function(){var e=this;e.callParent(),e.mon(e.inputEl,"click",e.onBoxClick,e)},setBoxLabel:function(e){var t=this;t.boxLabel=e,t.rendered&&t.boxLabelEl.update(e)},onBoxClick:function(e){var t=this;!t.disabled&&!t.readOnly&&this.setValue(!this.checked)},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var e=this.uncheckedValue,t=Ext.isDefined(e)?e:null;return this.checked?this.inputValue:t},isChecked:function(e,t){return e===!0||e==="true"||e==="1"||e===1||((Ext.isString(e)||Ext.isNumber(e))&&t?e==t:this.onRe.test(e))},setRawValue:function(e){var t=this,n=t.inputEl,r=t.isChecked(e,t.inputValue);return n&&t[r?"addCls":"removeCls"](t.checkedCls),t.checked=t.rawValue=r,r},setValue:function(e){var t=this,n,r,i,s;if(Ext.isArray(e)){n=t.getManager().getByName(t.name,t.getFormId()).items,i=n.length;for(r=0;r<i;++r)s=n[r],s.setValue(Ext.Array.contains(e,s.inputValue))}else t.callParent(arguments);return t},valueToRaw:function(e){return e},onChange:function(e,t){var n=this,r=n.handler;r&&r.call(n.scope||n,n,e),n.callParent(arguments)},resetOriginalValue:function(e){var t=this,n,r,i,s;if(!e){n=t.getManager().getByName(t.name,t.getFormId()).items,i=n.length;for(s=0;s<i;++s)r=n[s],r!==t&&n[s].resetOriginalValue(!0)}t.callParent()},beforeDestroy:function(){this.callParent(),this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var e=this,t=e.inputEl;e.callParent(),t&&(t.dom.disabled=e.readOnly)},setReadOnly:function(e){var t=this,n=t.inputEl;n&&(n.dom.disabled=!!e||t.disabled),t.callParent(arguments)},getFormId:function(){var e=this,t;return e.formId||(t=e.up("form"),t&&(e.formId=t.id)),e.formId}}),Ext.define("Ext.form.CheckboxGroup",{extend:Ext.form.FieldContainer,mixins:{field:Ext.form.field.Field},alias:"widget.checkboxgroup",columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",extraFieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",componentCls:Ext.baseCSSPrefix+"form-checkboxgroup",ariaRole:"group",initComponent:function(){var e=this;e.callParent(),e.initField()},initValue:function(){var e=this,t=e.value;e.originalValue=e.lastValue=t||e.getValue(),t&&e.setValue(t)},onAdd:function(e){var t=this,n,r,i;if(e.isCheckbox)t.mon(e,"change",t.checkChange,t);else if(e.isContainer){n=e.items.items;for(i=0,r=n.length;i<r;i++)t.onAdd(n[i])}t.callParent(arguments)},onRemove:function(e){var t=this,n,r,i;if(e.isCheckbox)t.mun(e,"change",t.checkChange,t);else if(e.isContainer){n=e.items.items;for(i=0,r=n.length;i<r;i++)t.onRemove(n[i])}t.callParent(arguments)},isEqual:function(e,t){var n=Ext.Object.toQueryString;return n(e)===n(t)},getErrors:function(){var e=[];return!this.allowBlank&&Ext.isEmpty(this.getChecked())&&e.push(this.blankText),e},getBoxes:function(e){return this.query("[isCheckbox]"+(e||""))},eachBox:function(e,t){Ext.Array.forEach(this.getBoxes(),e,t||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var e=this.getBoxes(),t,n=e.length;for(t=0;t<n;t++)if(e[t].isDirty())return!0},setReadOnly:function(e){var t=this.getBoxes(),n,r=t.length;for(n=0;n<r;n++)t[n].setReadOnly(e);this.readOnly=e},reset:function(){var e=this,t=e.hasActiveError(),n=e.preventMark;e.preventMark=!0,e.batchChanges(function(){var t=e.getBoxes(),n,r=t.length;for(n=0;n<r;n++)t[n].reset()}),e.preventMark=n,e.unsetActiveError(),t&&e.updateLayout()},resetOriginalValue:function(){var e=this,t=e.getBoxes(),n,r=t.length;for(n=0;n<r;n++)t[n].resetOriginalValue();e.originalValue=e.getValue(),e.checkDirty()},setValue:function(e){var t=this,n=t.getBoxes(),r,i=n.length,s,o,u;return t.batchChanges(function(){for(r=0;r<i;r++)s=n[r],o=s.getName(),u=!1,e&&e.hasOwnProperty(o)&&(Ext.isArray(e[o])?u=Ext.Array.contains(e[o],s.inputValue):u=e[o]),s.setValue(u)}),t},getValue:function(){var e={},t=this.getBoxes(),n,r=t.length,i,s,o,u;for(n=0;n<r;n++)i=t[n],s=i.getName(),o=i.inputValue,i.getValue()&&(e.hasOwnProperty(s)?(u=e[s],Ext.isArray(u)||(u=e[s]=[u]),u.push(o)):e[s]=o);return e},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var e=this,t,n,r;return e.disabled?n=!0:(t=e.getErrors(),n=Ext.isEmpty(t),r=e.wasValid,n?e.unsetActiveError():e.setActiveError(t)),n!==r&&(e.wasValid=n,e.fireEvent("validitychange",e,n),e.updateLayout()),n}},function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}),Ext.define("Ext.form.FieldSet",{extend:Ext.container.Container,mixins:{fieldAncestor:Ext.form.FieldAncestor},alias:"widget.fieldset",collapsed:!1,toggleOnTitleClick:!0,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" class="{baseCls}-body {bodyTargetCls}" role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:!1,beforeDestroy:function(){var e=this,t=e.legend;t&&(delete t.ownerCt,t.destroy(),e.legend=null),e.callParent()},initComponent:function(){var e=this,t=e.baseCls;e.initFieldAncestor(),e.callParent(),e.layout.managePadding=e.layout.manageOverflow=!1,e.addEvents("beforeexpand","beforecollapse","expand","collapse"),e.collapsed&&(e.addCls(t+"-collapsed"),e.collapse());if(e.title||e.checkboxToggle||e.collapsible)e.addTitleClasses(),e.legend=Ext.widget(e.createLegendCt());e.initMonitor()},initPadding:function(e){var t=this,n=t.getProtoBody(),r=t.padding,i;if(r!==undefined){if(Ext.isIEQuirks||Ext.isIE8m)r=t.parseBox(r),i=Ext.Element.parseBox(0),i.top=r.top,r.top=0,n.setStyle("padding",t.unitizeBox(i));e.setStyle("padding",t.unitizeBox(r))}},getProtoBody:function(){var e=this,t=e.protoBody;return t||(e.protoBody=t=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:!0})),t},initRenderData:function(){var e=this,t=e.callParent();return t.bodyTargetCls=e.bodyTargetCls,e.protoBody.writeTo(t),delete e.protoBody,t},getState:function(){var e=this.callParent();return e=this.addPropertyToState(e,"collapsed"),e},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return!0},collapsedVertical:function(){return!0},createLegendCt:function(){var e=this,t=[],n={xtype:"container",baseCls:e.baseCls+"-header",id:e.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+e.baseCls+"-header-text",items:t,ownerCt:e,shrinkWrap:!0,ownerLayout:e.componentLayout};return e.checkboxToggle?t.push(e.createCheckboxCmp()):e.collapsible&&t.push(e.createToggleCmp()),t.push(e.createTitleCmp()),n},createTitleCmp:function(){var e=this,t={xtype:"component",html:e.title,cls:e.baseCls+"-header-text",id:e.id+"-legendTitle"};return e.collapsible&&e.toggleOnTitleClick&&(t.listeners={click:{element:"el",scope:e,fn:e.toggle}},t.cls+=" "+e.baseCls+"-header-text-collapsible"),e.titleCmp=Ext.widget(t)},createCheckboxCmp:function(){var e=this,t="-checkbox";return e.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:!0,name:e.checkboxName||e.id+t,cls:e.baseCls+"-header"+t,id:e.id+"-legendChk",checked:!e.collapsed,msgTarget:"none",listeners:{change:e.onCheckChange,scope:e}}),e.checkboxCmp},createToggleCmp:function(){var e=this;return e.toggleCmp=Ext.widget({xtype:"tool",height:15,width:15,type:"toggle",handler:e.toggle,id:e.id+"-legendToggle",scope:e}),e.toggleCmp},doRenderLegend:function(e,t){var n=t.$comp,r=n.legend,i;r&&(r.ownerLayout.configureItem(r),i=r.getRenderTree(),Ext.DomHelper.generateMarkup(i,e))},finishRender:function(){var e=this.legend;this.callParent(),e&&e.finishRender()},getCollapsed:function(){return this.collapsed?"top":!1},getCollapsedDockedItems:function(){var e=this.legend;return e?[e]:[]},setTitle:function(e){var t=this,n=t.legend,r=t.baseCls;return t.title=e,t.rendered?(n||(t.legend=n=Ext.widget(t.createLegendCt()),t.addTitleClasses(),n.ownerLayout.configureItem(n),n.render(t.el,0)),t.titleCmp.update(e)):n?t.titleCmp.update(e):(t.addTitleClasses(),t.legend=Ext.widget(t.createLegendCt())),t},addTitleClasses:function(){var e=this,t=e.title,n=e.baseCls;t&&e.addCls(n+"-with-title"),(t||e.checkboxToggle||e.collapsible)&&e.addCls(n+"-with-legend")},applyTargetCls:function(e){this.bodyTargetCls=e},getTargetEl:function(){return this.body||this.frameBody||this.el},getDefaultContentTarget:function(){return this.body},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setExpanded:function(e){var t=this,n=t.checkboxCmp,r=e?"expand":"collapse";if(!t.rendered||t.fireEvent("before"+r,t)!==!1)e=!!e,n&&n.setValue(e),e?t.removeCls(t.baseCls+"-collapsed"):t.addCls(t.baseCls+"-collapsed"),t.collapsed=!e,e?delete t.getHierarchyState().collapsed:t.getHierarchyState().collapsed=!0,t.rendered&&(t.updateLayout({isRoot:!1}),t.fireEvent(r,t));return t},getRefItems:function(e){var t=this.callParent(arguments),n=this.legend;return n&&(t.unshift(n),e&&t.unshift.apply(t,n.getRefItems(!0))),t},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(e,t){this.setExpanded(t)},setupRenderTpl:function(e){this.callParent(arguments),e.renderLegend=this.doRenderLegend}}),Ext.define("Ext.form.Label",{extend:Ext.Component,alias:"widget.label",autoEl:"label",maskOnDisable:!1,getElConfig:function(){var e=this;return e.html=e.text?Ext.util.Format.htmlEncode(e.text):e.html||"",Ext.apply(e.callParent(),{htmlFor:e.forId||""})},setText:function(e,t){var n=this;return t=t!==!1,t?(n.text=e,delete n.html):(n.html=e,delete n.text),n.rendered&&(n.el.dom.innerHTML=t!==!1?Ext.util.Format.htmlEncode(e):e,n.updateLayout()),n}}),Ext.define("Ext.form.Panel",{extend:Ext.panel.Panel,mixins:{fieldAncestor:Ext.form.FieldAncestor},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var e=this;e.frame&&(e.border=!1),e.initFieldAncestor(),e.callParent(),e.relayEvents(e.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]),e.pollForChanges&&e.startPolling(e.pollInterval||500)},initItems:function(){this.callParent(),this.initMonitor(),this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments),this.form.initialize()},createForm:function(){var e={},t=this.basicFormConfigs,n=t.length,r=0,i;for(;r<n;++r)i=t[r],e[i]=this[i];return new Ext.form.Basic(this,e)},getForm:function(){return this.form},loadRecord:function(e){return this.getForm().loadRecord(e)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(e){return this.getForm().updateRecord(e)},getValues:function(e,t,n,r){return this.getForm().getValues(e,t,n,r)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling(),this.form.destroy(),this.callParent()},load:function(e){this.form.load(e)},submit:function(e){this.form.submit(e)},startPolling:function(e){this.stopPolling();var t=new Ext.util.TaskRunner(e);t.start({interval:0,run:this.checkChange,scope:this}),this.pollTask=t},stopPolling:function(){var e=this.pollTask;e&&(e.stopAll(),delete this.pollTask)},checkChange:function(){var e=this.form.getFields().items,t,n=e.length;for(t=0;t<n;t++)e[t].checkChange()}}),Ext.define("Ext.form.RadioManager",{extend:Ext.util.MixedCollection,singleton:!0,getByName:function(e,t){return this.filterBy(function(n){return n.name==e&&n.getFormId()==t})},getWithValue:function(e,t,n){return this.filterBy(function(r){return r.name==e&&r.inputValue==t&&r.getFormId()==n})},getChecked:function(e,t){return this.findBy(function(n){return n.name==e&&n.checked&&n.getFormId()==t})}}),Ext.define("Ext.form.field.Radio",{extend:Ext.form.field.Checkbox,alias:["widget.radiofield","widget.radio"],alternateClassName:"Ext.form.Radio",isRadio:!0,focusCls:"form-radio-focus",inputType:"radio",ariaRole:"radio",formId:null,getGroupValue:function(){var e=this.getManager().getChecked(this.name,this.getFormId());return e?e.inputValue:null},onBoxClick:function(e){var t=this;!t.disabled&&!t.readOnly&&this.setValue(!0)},onRemoved:function(){this.callParent(arguments),this.formId=null},setValue:function(e){var t=this,n;return Ext.isBoolean(e)?t.callParent(arguments):(n=t.getManager().getWithValue(t.name,e,t.getFormId()).getAt(0),n&&n.setValue(!0)),t},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var e=this.callParent(arguments);return e&&(e[this.getName()]=this.getSubmitValue()),e},onChange:function(e,t){var n=this,r,i,s,o;n.callParent(arguments);if(e){o=n.getManager().getByName(n.name,n.getFormId()).items,i=o.length;for(r=0;r<i;r++)s=o[r],s!==n&&s.setValue(!1)}},getManager:function(){return Ext.form.RadioManager}}),Ext.define("Ext.form.RadioGroup",{extend:Ext.form.CheckboxGroup,alias:"widget.radiogroup",allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",ariaRole:"radiogroup",getBoxes:function(e){return this.query("[isRadio]"+(e||""))},checkChange:function(){var e=this.getValue(),t=Ext.Object.getKeys(e)[0];if(Ext.isArray(e[t]))return;this.callParent(arguments)},setValue:function(e){var t,n,r,i,s,o,u;if(Ext.isObject(e))for(u in e)if(e.hasOwnProperty(u)){t=e[u],n=this.items.first(),r=n?n.getFormId():null,i=Ext.form.RadioManager.getWithValue(u,t,r).items,o=i.length;for(s=0;s<o;++s)i[s].setValue(!0)}return this}}),Ext.define("Ext.form.action.DirectLoad",{extend:Ext.form.action.Load,alternateClassName:"Ext.form.Action.DirectLoad",alias:"formaction.directload",type:"directload",run:function(){var e=this,t=e.form,n=t.api,r=n.load,i,s;typeof r!="function"&&(n.load=r=Ext.direct.Manager.parseMethod(r)),i=r.directCfg.method,s=i.getArgs(e.getParams(),t.paramOrder,t.paramsAsHash),s.push(e.onComplete,e),r.apply(window,s)},processResponse:function(e){return this.result=e},onComplete:function(e,t){e?this.onSuccess(e):this.onFailure(null)}}),Ext.define("Ext.form.action.DirectSubmit",{extend:Ext.form.action.Submit,alternateClassName:"Ext.form.Action.DirectSubmit",alias:"formaction.directsubmit",type:"directsubmit",doSubmit:function(){var e=this,t=e.form,n=t.api,r=n.submit,i=Ext.Function.bind(e.onComplete,e),s=e.buildForm(),o;typeof r!="function"&&(n.submit=r=Ext.direct.Manager.parseMethod(r),e.cleanup(s));if(e.timeout||t.timeout)o={timeout:e.timeout*1e3||t.timeout*1e3};r.call(window,s.formEl,i,e,o),e.cleanup(s)},processResponse:function(e){return this.result=e},onComplete:function(e,t){e?this.onSuccess(e):this.onFailure(null)}}),Ext.define("Ext.form.action.StandardSubmit",{extend:Ext.form.action.Submit,alias:"formaction.standardsubmit",doSubmit:function(){var e=this.buildForm();e.formEl.submit(),this.cleanup(e)}}),Ext.define("Ext.layout.component.field.Trigger",{alias:"layout.triggerfield",extend:Ext.layout.component.field.Field,type:"triggerfield",setWidthInDom:!0,borderWidths:{},beginLayout:function(e){var t=this,n=t.owner,r;e.triggerWrap=e.getEl("triggerWrap"),t.callParent(arguments),r=n.getTriggerStateFlags(),r!=n.lastTriggerStateFlags&&(n.lastTriggerStateFlags=r,t.updateEditState())},beginLayoutCycle:function(e){this.callParent(arguments),e.widthModel.shrinkWrap&&!this.owner.inputWidth&&e.inputContext.el.setStyle("width","")},beginLayoutFixed:function(e,t,n){var r=this,i=e.target,s=r.ieInputWidthAdjustment||0,o="100%",u=i.triggerWrap;r.callParent(arguments),i.inputCell.setStyle("width","100%"),s&&(r.adjustIEInputPadding(e),n==="px"&&(i.inputWidth?o=i.inputWidth-r.getExtraWidth(e):o=t-s-r.getExtraWidth(e),o+="px")),i.inputEl.setStyle("width",o),o=i.inputWidth,o?u.setStyle("width",o+s+"px"):u.setStyle("width",t+n),u.setStyle("table-layout","fixed")},adjustIEInputPadding:function(e){this.owner.inputCell.setStyle("padding-right",this.ieInputWidthAdjustment+"px")},getExtraWidth:function(e){var t=this,n=t.owner,r=t.borderWidths,i=n.ui+n.triggerEl.getCount();return i in r||(r[i]=e.triggerWrap.getBorderInfo().width),r[i]+n.getTriggerWidth()},beginLayoutShrinkWrap:function(e){var t=e.target,n="",r=t.inputWidth,i=t.triggerWrap;this.callParent(arguments),r?(i.setStyle("width",r+"px"),r=r-this.getExtraWidth(e)+"px",t.inputEl.setStyle("width",r),t.inputCell.setStyle("width",r)):(t.inputCell.setStyle("width",n),t.inputEl.setStyle("width",n),i.setStyle("width",n),i.setStyle("table-layout","auto"))},getTextWidth:function(){var e=this,t=e.owner,n=t.inputEl,r;return r=(n.dom.value||(t.hasFocus?"":t.emptyText)||"")+t.growAppend,n.getTextWidth(r)},publishOwnerWidth:function(e,t){var n=this.owner;this.callParent(arguments),!n.grow&&!n.inputWidth&&(t-=this.getExtraWidth(e),n.labelAlign!="top"&&(t-=n.getLabelWidth()),e.inputContext.setWidth(t))},publishInnerHeight:function(e,t){e.inputContext.setHeight(t-this.measureLabelErrorHeight(e))},measureContentWidth:function(e){var t=this,n=t.owner,r=t.callParent(arguments),i=e.inputContext,s,o,u;return n.grow&&!e.state.growHandled?(s=t.getTextWidth()+e.inputContext.getFrameInfo().width,o=n.growMax,u=Math.min(o,r),o=Math.max(n.growMin,o,u),s=Ext.Number.constrain(s,n.growMin,o),i.setWidth(s),e.state.growHandled=!0,i.domBlock(t,"width"),r=NaN):n.inputWidth||(r-=t.getExtraWidth(e)),r},updateEditState:function(){var e=this,t=e.owner,n=t.inputEl,r=Ext.baseCSSPrefix+"trigger-noedit",i,s;e.owner.readOnly?(n.addCls(r),s=!0,i=!1):(e.owner.editable?(n.removeCls(r),s=!1):(n.addCls(r),s=!0),i=!e.owner.hideTrigger),t.triggerCell.setDisplayed(i),n.dom.readOnly=s}}),Ext.define("Ext.form.field.Trigger",{extend:Ext.form.field.Text,alias:["widget.triggerfield","widget.trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],childEls:[{name:"triggerCell",select:"."+Ext.baseCSSPrefix+"trigger-cell"},{name:"triggerEl",select:"."+Ext.baseCSSPrefix+"form-trigger"},"triggerWrap","inputCell"],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerNoEditCls:Ext.baseCSSPrefix+"trigger-noedit",hideTrigger:!1,editable:!0,readOnly:!1,repeatTriggerClick:!1,autoSize:Ext.emptyFn,monitorTab:!0,mimicing:!1,triggerIndexRe:/trigger-index-(\d+)/,extraTriggerCls:"",componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus",this.callParent(arguments)},getSubTplMarkup:function(e){var t=this,n=e.childElCls,r=t.callParent(arguments);return['<table id="',t.id,'-triggerWrap" class="',Ext.baseCSSPrefix,"form-trigger-wrap",n,'" cellpadding="0" cellspacing="0" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="',t.id,'-inputCell" class="',Ext.baseCSSPrefix,"form-trigger-input-cell",n,'" role="presentation">',r,"</td>",t.getTriggerMarkup(),"</tr>","</tbody>","</table>"].join("")},getSubTplData:function(){var e=this,t=e.callParent(),n=e.readOnly===!0,r=e.editable!==!1;return Ext.apply(t,{editableCls:n||!r?" "+e.triggerNoEditCls:"",readOnly:!r||n})},getLabelableRenderData:function(){var e=this,t=e.triggerWrapCls,n=e.callParent(arguments);return Ext.applyIf(n,{triggerWrapCls:t,triggerMarkup:e.getTriggerMarkup()})},getTriggerMarkup:function(){var e=this,t=0,n=e.readOnly||e.hideTrigger,r,i=e.triggerBaseCls,s=[],o=Ext.dom.Element.unselectableCls,u="width:"+e.triggerWidth+"px;"+(n?"display:none;":""),a=e.extraTriggerCls+" "+Ext.baseCSSPrefix+"trigger-cell "+o;e.trigger1Cls||(e.trigger1Cls=e.triggerCls);for(t=0;(r=e["trigger"+(t+1)+"Cls"])||t<1;t++)s.push({tag:"td",role:"presentation",valign:"top",cls:a,style:u,cn:{cls:[Ext.baseCSSPrefix+"trigger-index-"+t,i,r].join(" "),role:"presentation"}});return s[0].cn.cls+=" "+i+"-first",Ext.DomHelper.markup(s)},disableCheck:function(){return!this.disabled},beforeRender:function(){var e=this,t=e.triggerBaseCls,n;e.triggerWidth||(n=Ext.getBody().createChild({role:"presentation",style:"position: absolute;",cls:Ext.baseCSSPrefix+"form-trigger"}),Ext.form.field.Trigger.prototype.triggerWidth=n.getWidth(),n.remove()),e.callParent(),t!=Ext.baseCSSPrefix+"form-trigger"&&e.addChildEls({name:"triggerEl",select:"."+t}),e.lastTriggerStateFlags=e.getTriggerStateFlags()},onRender:function(){var e=this;e.callParent(arguments),e.doc=Ext.getDoc(),e.initTrigger()},getTriggerWidth:function(){var e=this,t=0;return e.triggerWrap&&!e.hideTrigger&&!e.readOnly&&(t=e.triggerEl.getCount()*e.triggerWidth),t},setHideTrigger:function(e){e!=this.hideTrigger&&(this.hideTrigger=e,this.updateLayout())},setEditable:function(e){e!=this.editable&&(this.editable=e,this.updateLayout())},setReadOnly:function(e){var t=this,n=t.readOnly;t.callParent(arguments),e!=n&&t.updateLayout()},initTrigger:function(){var e=this,t=e.triggerWrap,n=e.triggerEl,r=e.disableCheck,i,s,o,u,a,f;e.repeatTriggerClick?e.triggerRepeater=new Ext.util.ClickRepeater(t,{preventDefault:!0,handler:e.onTriggerWrapClick,listeners:{mouseup:e.onTriggerWrapMouseup,scope:e},scope:e}):e.mon(t,{click:e.onTriggerWrapClick,mouseup:e.onTriggerWrapMouseup,scope:e}),n.setVisibilityMode(Ext.Element.DISPLAY),n.addClsOnOver(e.triggerBaseCls+"-over",r,e),i=n.elements,s=i.length;for(u=0;u<s;u++)o=i[u],a=u+1,f=e["trigger"+a+"Cls"],f&&(o.addClsOnOver(f+"-over",r,e),o.addClsOnClick(f+"-click",r,e));n.addClsOnClick(e.triggerBaseCls+"-click",r,e)},onDestroy:function(){var e=this;Ext.destroyMembers(e,"triggerRepeater","triggerWrap","triggerEl"),delete e.doc,e.callParent()},onFocus:function(){var e=this;e.callParent(arguments),e.mimicing||(e.bodyEl.addCls(e.wrapFocusCls),e.mimicing=!0,e.mon(e.doc,"mousedown",e.mimicBlur,e,{delay:10}),e.monitorTab&&e.on("specialkey",e.checkTab,e))},checkTab:function(e,t){!this.ignoreMonitorTab&&t.getKey()==t.TAB&&this.triggerBlur()},getTriggerStateFlags:function(){var e=this,t=0;return e.readOnly&&(t+=1),e.editable&&(t+=2),e.hideTrigger&&(t+=4),t},onBlur:function(){var e=this,t=e.blurTask;e.blurring&&e.triggerBlur()},mimicBlur:function(e){!this.isDestroyed&&!this.bodyEl.contains(e.target)&&this.validateBlur(e)&&this.triggerBlur(e)},triggerBlur:function(e){var t=this;t.mimicing=!1,t.mun(t.doc,"mousedown",t.mimicBlur,t),t.monitorTab&&t.inputEl&&t.un("specialkey",t.checkTab,t),Ext.form.field.Trigger.superclass.onBlur.call(t,e),t.bodyEl&&t.bodyEl.removeCls(t.wrapFocusCls)},validateBlur:function(e){return!0},onTriggerWrapClick:function(){var e=this,t,n,r,i;i=arguments[e.triggerRepeater?1:0],i&&!e.readOnly&&!e.disabled&&(t=i.getTarget("."+e.triggerBaseCls,null),n=t&&t.className.match(e.triggerIndexRe),n&&(r=e["onTrigger"+(parseInt(n[1],10)+1)+"Click"]||e.onTriggerClick,r&&r.call(e,i)))},onTriggerWrapMouseup:Ext.emptyFn,onTriggerClick:Ext.emptyFn}),Ext.define("Ext.form.field.Picker",{extend:Ext.form.field.Trigger,alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",matchFieldWidth:!0,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:!0,initComponent:function(){this.callParent(),this.addEvents("expand","collapse","select")},initEvents:function(){var e=this;e.callParent(),e.keyNav=new Ext.util.KeyNav(e.inputEl,{down:e.onDownArrow,esc:{handler:e.onEsc,scope:e,defaultEventAction:!1},scope:e,forceKeyDown:!0}),e.editable||e.mon(e.inputEl,"click",e.onTriggerClick,e),Ext.isGecko&&e.inputEl.dom.setAttribute("autocomplete","off")},onEsc:function(e){Ext.isIE&&e.preventDefault(),this.isExpanded&&(this.collapse(),e.stopEvent())},onDownArrow:function(e){this.isExpanded||this.onTriggerClick()},expand:function(){var e=this,t,n,r;e.rendered&&!e.isExpanded&&!e.isDestroyed&&(e.expanding=!0,t=e.bodyEl,n=e.getPicker(),r=e.collapseIf,n.show(),e.isExpanded=!0,e.alignPicker(),t.addCls(e.openCls),e.mon(Ext.getDoc(),{mousewheel:r,mousedown:r,scope:e}),Ext.EventManager.onWindowResize(e.alignPicker,e),e.fireEvent("expand",e),e.onExpand(),delete e.expanding)},onExpand:Ext.emptyFn,alignPicker:function(){var e=this,t=e.getPicker();e.isExpanded&&(e.matchFieldWidth&&t.setWidth(e.bodyEl.getWidth()),t.isFloating()&&e.doAlign())},doAlign:function(){var e=this,t=e.picker,n="-above",r;e.picker.alignTo(e.triggerWrap,e.pickerAlign,e.pickerOffset),r=t.el.getY()<e.inputEl.getY(),e.bodyEl[r?"addCls":"removeCls"](e.openCls+n),t[r?"addCls":"removeCls"](t.baseCls+n)},collapse:function(){if(this.isExpanded&&!this.isDestroyed){var e=this,t=e.openCls,n=e.picker,r=Ext.getDoc(),i=e.collapseIf,s="-above";n.hide(),e.isExpanded=!1,e.bodyEl.removeCls([t,t+s]),n.el.removeCls(n.baseCls+s),r.un("mousewheel",i,e),r.un("mousedown",i,e),Ext.EventManager.removeResizeListener(e.alignPicker,e),e.fireEvent("collapse",e),e.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(e){var t=this;!t.isDestroyed&&!e.within(t.bodyEl,!1,!0)&&!e.within(t.picker.el,!1,!0)&&!t.isEventWithinPickerLoadMask(e)&&t.collapse()},getPicker:function(){var e=this;return e.picker||(e.picker=e.createPicker())},createPicker:Ext.emptyFn,onTriggerClick:function(){var e=this;!e.readOnly&&!e.disabled&&(e.isExpanded?e.collapse():e.expand(),e.inputEl.focus())},triggerBlur:function(){var e=this.picker;this.callParent(arguments),e&&e.isVisible()&&e.hide()},mimicBlur:function(e){var t=this,n=t.picker;(!n||!e.within(n.el,!1,!0)&&!t.isEventWithinPickerLoadMask(e))&&t.callParent(arguments)},onDestroy:function(){var e=this,t=e.picker;Ext.EventManager.removeResizeListener(e.alignPicker,e),Ext.destroy(e.keyNav),t&&(delete t.pickerField,t.destroy()),e.callParent()},isEventWithinPickerLoadMask:function(e){var t=this.picker.loadMask;return t?e.within(t.maskEl,!1,!0)||e.within(t.el,!1,!0):!1}}),Ext.define("Ext.selection.Model",{extend:Ext.util.Observable,alternateClassName:"Ext.AbstractSelectionModel",mixins:{bindable:Ext.util.Bindable},allowDeselect:undefined,toggleOnClick:!0,selected:null,pruneRemoved:!0,suspendChange:0,constructor:function(e){var t=this;e=e||{},Ext.apply(t,e),t.addEvents("selectionchange","focuschange"),t.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},t.setSelectionMode(e.mode||t.mode),t.selected=new Ext.util.MixedCollection(null,t.getSelectionId),t.callParent(arguments)},bindStore:function(e,t){var n=this;n.mixins.bindable.bindStore.apply(n,arguments),n.store&&!t&&n.refresh()},getStoreListeners:function(){var e=this;return{add:e.onStoreAdd,clear:e.onStoreClear,bulkremove:e.onStoreRemove
,update:e.onStoreUpdate,load:e.onStoreLoad,idchanged:e.onModelIdChanged,refresh:e.onStoreRefresh}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){this.suspendChange&&--this.suspendChange},selectAll:function(e){var t=this,n=t.store.getRange(),r=0,i=n.length,s=t.getSelection().length;t.suspendChanges();for(;r<i;r++)t.doSelect(n[r],!0,e);t.resumeChanges(),e||t.maybeFireSelectionChange(t.getSelection().length!==s)},deselectAll:function(e){var t=this,n=t.getSelection(),r={},i=t.store,s=n.length,o,u,a;for(o=0,u=n.length;o<u;o++)a=n[o],r[a.internalId]=i.indexOf(a);n=Ext.Array.sort(n,function(e,t){var n=r[e.internalId],i=r[t.internalId];return n<i?-1:1}),t.suspendChanges(),t.doDeselect(n,e),t.resumeChanges(),e||t.maybeFireSelectionChange(t.getSelection().length!==s)},selectWithEvent:function(e,t){var n=this,r=n.isSelected(e),i=t.shiftKey,s=t.ctrlKey,o=n.selectionStart,u=n.getSelection(),a=u.length,f=n.allowDeselect,l,c,h;switch(n.selectionMode){case"MULTI":if(i&&o)n.selectRange(o,e,s);else if(s&&r)n.doDeselect(e,!1);else if(s)n.doSelect(e,!0,!1);else if(r&&!i&&!s&&a>1){l=[];for(c=0;c<a;++c)h=u[c],h!==e&&l.push(h);n.doDeselect(l)}else r||n.doSelect(e,!1);break;case"SIMPLE":r?n.doDeselect(e):n.doSelect(e,!0);break;case"SINGLE":f&&!s&&(f=n.toggleOnClick),f&&r?n.doDeselect(e):n.doSelect(e,!1)}i||(n.isSelected(e)?n.selectionStart=e:n.selectionStart=null)},afterKeyNavigate:function(e,t){var n=this,r,i,s=n.isSelected(t),o=n.selectionStart&&n.isSelected(n.lastFocused)?n.selectionStart:n.selectionStart=n.lastFocused,u=e.getCharCode(),a=u===e.SPACE,f=u===e.UP||u===e.PAGE_UP?"up":u===e.DOWN||u===e.DOWN?"down":null;switch(n.selectionMode){case"MULTI":a?e.shiftKey?n.selectRange(o,t,e.ctrlKey):s?(n.doDeselect(t,e.ctrlKey),n.setLastFocused(null),n.setLastFocused(t)):n.doSelect(t,e.ctrlKey):e.shiftKey&&o?(i=n.store.indexOf(o),r=n.store.indexOf(t),f==="up"&&i<=r?n.deselectRange(n.lastFocused,r+1):f==="down"&&i>=r?n.deselectRange(n.lastFocused,r-1):o!==t&&n.selectRange(o,t,e.ctrlKey),n.lastSelected=t,n.setLastFocused(t)):e.ctrlKey&&s?n.setLastFocused(t):e.ctrlKey?n.setLastFocused(t):n.doSelect(t,!1);break;case"SIMPLE":s?n.doDeselect(t):n.doSelect(t,!0);break;case"SINGLE":a?s?(n.doDeselect(t),n.setLastFocused(t)):n.doSelect(t):e.ctrlKey?n.setLastFocused(t):n.allowDeselect&&s?n.doDeselect(t):n.doSelect(t,!1)}e.shiftKey||n.isSelected(t)&&(n.selectionStart=t)},selectRange:function(e,t,n){var r=this,i=r.store,s=r.selected.items,o,u,a,f,l,c,h;if(r.isLocked())return;o=r.normalizeRowRange(e,t),e=o[0],t=o[1],f=[];for(u=e;u<=t;u++)r.isSelected(i.getAt(u))||f.push(i.getAt(u));if(!n){l=[],r.suspendChanges();for(u=0,a=s.length;u<a;++u)h=s[u],c=i.indexOf(h),(c<e||c>t)&&l.push(h);for(u=0,a=l.length;u<a;++u)r.doDeselect(l[u]);r.resumeChanges()}r.doMultiSelect(f,!0)},deselectRange:function(e,t){var n=this,r=n.store,i,s,o,u;if(n.isLocked())return;i=n.normalizeRowRange(e,t),e=i[0],t=i[1],o=[];for(s=e;s<=t;s++)u=r.getAt(s),n.isSelected(u)&&o.push(u);n.doDeselect(o)},normalizeRowRange:function(e,t){var n=this.store,r;return Ext.isNumber(e)||(e=n.indexOf(e)),e=Math.max(0,e),Ext.isNumber(t)||(t=n.indexOf(t)),t=Math.min(t,n.getCount()-1),e>t&&(r=t,t=e,e=r),[e,t]},onModelIdChanged:function(e,t,n,r,i){this.selected.updateKey(i,r)},select:function(e,t,n){Ext.isDefined(e)&&this.doSelect(e,t,n)},deselect:function(e,t){this.doDeselect(e,t)},doSelect:function(e,t,n){var r=this,i;if(r.locked||!r.store)return;if(typeof e=="number"){i=r.store.getAt(e);if(!i)return;e=[i]}r.selectionMode=="SINGLE"&&e?(i=e.length?e[0]:e,r.doSingleSelect(i,n)):r.doMultiSelect(e,t,n)},doMultiSelect:function(e,t,n){var r=this,i=r.selected,s=!1,o,u,a,f,l;if(r.locked)return;e=Ext.isArray(e)?e:[e],a=e.length;if(!t&&i.getCount()>0){o=r.deselectDuringSelect(e,i.getRange(),n);if(o[0]){r.maybeFireSelectionChange(o[1]>0&&!n);return}}l=function(){i.add(f),s=!0};for(u=0;u<a;u++){f=e[u];if(r.isSelected(f))continue;r.lastSelected=f,r.onSelectChange(f,!0,n,l)}r.preventFocus||r.setLastFocused(f,n),r.maybeFireSelectionChange(s&&!n)},deselectDuringSelect:function(e,t,n){var r=this,i=t.length,s=0,o=!1,u,a;r.suspendChanges();for(a=0;a<i;++a)u=t[a],Ext.Array.contains(e,u)||(r.doDeselect(u,n)?++s:o=!0);return r.resumeChanges(),[o,s]},doDeselect:function(e,t){var n=this,r=n.selected,i=0,s,o,u=0,a=0,f;if(n.locked||!n.store)return!1;if(typeof e=="number"){o=n.store.getAt(e);if(!o)return!1;e=[o]}else Ext.isArray(e)||(e=[e]);f=function(){++a,r.remove(o)},s=e.length,n.suspendChanges();for(;i<s;i++)o=e[i],n.isSelected(o)&&(n.lastSelected===o&&(n.lastSelected=r.last(),n.lastFocused===o&&n.setLastFocused(null)),++u,n.onSelectChange(o,!1,t,f));return n.resumeChanges(),n.maybeFireSelectionChange(a>0&&!t),a===u},doSingleSelect:function(e,t){var n=this,r=!1,i=n.selected,s;if(n.locked)return;if(n.isSelected(e))return;if(i.getCount()){n.suspendChanges();if(!n.doDeselect(n.lastSelected,t)){n.resumeChanges();return}n.resumeChanges()}s=function(){i.add(e),n.lastSelected=e,r=!0},n.onSelectChange(e,!0,t,s),r&&(!t&&!n.preventFocus&&n.setLastFocused(e),n.maybeFireSelectionChange(!t))},setLastFocused:function(e,t){var n=this,r=n.lastFocused;e!==r&&(n.lastFocused=e,n.onLastFocusChanged(r,e,t))},isFocused:function(e){return e===this.getLastFocused()},maybeFireSelectionChange:function(e){var t=this;e&&!t.suspendChange&&t.fireEvent("selectionchange",t,t.getSelection())},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(e){e=e?e.toUpperCase():"SINGLE",this.selectionMode=this.modes[e]?e:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(e){this.locked=!!e},isRangeSelected:function(e,t){var n=this,r=n.store,i,s;s=n.normalizeRowRange(e,t),e=s[0],t=s[1];for(i=e;i<=t;i++)if(!n.isSelected(r.getAt(i)))return!1;return!0},isSelected:function(e){return e=Ext.isNumber(e)?this.store.getAt(e):e,this.selected.contains(e)},hasSelection:function(){return this.selected.getCount()>0},getSelectionId:function(e){return e.internalId},pruneIf:function(){var e=this,t=e.selected,n=[],r=t.length,i,s;if(e.pruneRemoved){for(i=0;i<r;i++)s=t.getAt(i),this.storeHasSelected(s)||n.push(s);if(n.length){for(i=0,r=n.length;i<r;i++)t.remove(n[i]);e.maybeFireSelectionChange(!0)}}},storeHasSelected:function(e){var t=this.store,n,r,i,s;if(e.hasId()&&t.getById(e.getId()))return!0;n=t.data.items,r=n.length,i=e.internalId;for(s=0;s<r;++s)if(i===n[s].internalId)return!0;return!1},refresh:function(){var e=this,t=e.store,n,r=[],i=[],s=e.getSelection(),o=s.length,u,a,f=0,l=e.getLastFocused();if(!t)return;for(;f<o;f++){u=s[f],t.indexOf(u)!==-1?r.push(u):e.pruneRemoved||(n=t.getById(u.getId()),n?r.push(n):i.push(u));if(e.mode==="SINGLE"&&i.length)break}e.selected.getCount()!=r.length+i.length&&(a=!0),e.clearSelections(),t.indexOf(l)!==-1&&e.setLastFocused(l,!0),r.length&&e.doSelect(r,!1,!0),i.length&&(e.selected.addAll(i),e.lastSelected||(e.lastSelected=i[i.length-1])),e.maybeFireSelectionChange(a)},clearSelections:function(){this.selected.clear(),this.lastSelected=null,this.setLastFocused(null)},onStoreAdd:Ext.emptyFn,onStoreClear:function(){this.selected.getCount()>0&&(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(e,t,n,r){var i=this;i.selectionStart&&Ext.Array.contains(t,i.selectionStart)&&(i.selectionStart=null);if(r||i.locked||!i.pruneRemoved)return;i.deselectDeletedRecords(t)},deselectDeletedRecords:function(e){var t=this,n=t.selected,r,i=e.length,s=0,o;for(r=0;r<i;r++)o=e[r],n.remove(o)&&(t.lastSelected==o&&(t.lastSelected=null),t.getLastFocused()==o&&t.setLastFocused(null),++s);s&&t.maybeFireSelectionChange(!0)},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearListeners()},onStoreUpdate:Ext.emptyFn,onStoreRefresh:Ext.emptyFn,onStoreLoad:Ext.emptyFn,onSelectChange:function(e,t,n,r){var i=this,s=t?"select":"deselect";(n||i.fireEvent("before"+s,i,e))!==!1&&r()!==!1&&(n||i.fireEvent(s,i,e))},onLastFocusChanged:function(e,t){this.fireEvent("focuschange",this,e,t)},onEditorKey:Ext.emptyFn,beforeViewRender:function(e){this.views=this.views||[],this.views.push(e),this.bindStore(e.getStore(),!0)},bindComponent:Ext.emptyFn}),Ext.define("Ext.selection.DataViewModel",{extend:Ext.selection.Model,deselectOnContainerClick:!0,enableKeyNav:!0,constructor:function(e){this.addEvents("beforedeselect","beforeselect","deselect","select"),this.callParent(arguments)},bindComponent:function(e){var t=this,n={refresh:t.refresh,scope:t};t.view=e,t.bindStore(e.getStore()),n[e.triggerEvent]=t.onItemClick,n[e.triggerCtEvent]=t.onContainerClick,e.on(n),t.enableKeyNav&&t.initKeyNav(e)},onUpdate:function(e){var t=this.view;t&&this.isSelected(e)&&t.onItemSelect(e)},onItemClick:function(e,t,n,r,i){this.selectWithEvent(t,i)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},initKeyNav:function(e){var t=this;if(!e.rendered){e.on({render:Ext.Function.bind(t.initKeyNav,t,[e]),single:!0});return}e.el.set({tabIndex:-1}),t.keyNav=new Ext.util.KeyNav({target:e.el,ignoreInputFields:!0,down:Ext.pass(t.onNavKey,[1],t),right:Ext.pass(t.onNavKey,[1],t),left:Ext.pass(t.onNavKey,[-1],t),up:Ext.pass(t.onNavKey,[-1],t),scope:t})},onNavKey:function(e){e=e||1;var t=this,n=t.view,r=t.getSelection()[0],i=t.view.store.getCount(),s;r?s=n.indexOf(n.getNode(r))+e:s=0,s<0?s=i-1:s>=i&&(s=0),t.select(s)},onSelectChange:function(e,t,n,r){var i=this,s=i.view,o=t?"select":"deselect";(n||i.fireEvent("before"+o,i,e))!==!1&&r()!==!1&&(s&&(t?s.onItemSelect(e):s.onItemDeselect(e)),n||i.fireEvent(o,i,e))},onLastFocusChanged:function(e,t,n){var r=this.view;r&&!n&&t&&(r.focusNode(t),this.fireEvent("focuschange",this,e,t))},destroy:function(){Ext.destroy(this.keyNav),this.callParent()}}),Ext.define("Ext.view.AbstractView",{extend:Ext.Component,mixins:{bindable:Ext.util.Bindable},inheritableStatics:{getRecord:function(e){return this.getBoundView(e).getRecord(e)},getBoundView:function(e){return Ext.getCmp(e.boundView)}},deferInitialRefresh:!0,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,ariaRole:"listbox",itemAriaRole:"option",last:!1,triggerEvent:"itemclick",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var e=this,t=Ext.isDefined,n=e.itemTpl,r={};n&&(Ext.isArray(n)?n=n.join(""):Ext.isObject(n)&&(r=Ext.apply(r,n.initialConfig),n=n.html),e.itemSelector||(e.itemSelector="."+e.itemCls),n=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',e.itemCls,n,e.itemAriaRole),e.tpl=new Ext.XTemplate(n,r)),e.callParent(),e.tpl=e.getTpl("tpl"),e.overItemCls&&(e.trackOver=!0),e.addEvents("beforerefresh","refresh","viewready","itemupdate","itemadd","itemremove"),e.addCmpEvents(),e.store=Ext.data.StoreManager.lookup(e.store||"ext-empty-store"),e.dataSource||(e.dataSource=e.store),e.bindStore(e.dataSource,!0,"dataSource"),e.all||(e.all=new Ext.CompositeElementLite),e.scrollState={top:0,left:0},e.on({scroll:e.onViewScroll,element:"el",scope:e})},onRender:function(){var e=this,t=e.loadMask,n=e.getMaskStore(),r={target:e,msg:e.loadingText,msgCls:e.loadingCls,useMsg:e.loadingUseMsg,store:n};e.callParent(arguments),t&&!n.proxy.isSynchronous&&(Ext.isObject(t)&&(r=Ext.apply(r,t)),e.loadMask=new Ext.LoadMask(r),e.loadMask.on({scope:e,beforeshow:e.onMaskBeforeShow,hide:e.onMaskHide}))},finishRender:function(){var e=this;e.callParent(arguments),e.up("[collapsed],[hidden]")||e.doFirstRefresh(e.dataSource)},onBoxReady:function(){var e=this;e.callParent(arguments),e.firstRefreshDone||e.doFirstRefresh(e.dataSource)},getMaskStore:function(){return this.store},onMaskBeforeShow:function(){var e=this,t=e.loadingHeight;t&&t>e.getHeight()&&(e.hasLoadingHeight=!0,e.oldMinHeight=e.minHeight,e.minHeight=t,e.updateLayout())},onMaskHide:function(){var e=this;!e.destroying&&e.hasLoadingHeight&&(e.minHeight=e.oldMinHeight,e.updateLayout(),delete e.hasLoadingHeight)},beforeRender:function(){this.callParent(arguments),this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(arguments),this.getSelectionModel().bindComponent(this)},getSelectionModel:function(){var e=this,t="SINGLE";e.simpleSelect?t="SIMPLE":e.multiSelect&&(t="MULTI");if(!e.selModel||!e.selModel.events)e.selModel=new Ext.selection.DataViewModel(Ext.apply({allowDeselect:e.allowDeselect,mode:t},e.selModel));return e.selModel.hasRelaySetup||(e.relayEvents(e.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),e.selModel.hasRelaySetup=!0),e.disableSelection&&(e.selModel.locked=!0),e.selModel},refresh:function(){var e=this,t,n,r,i,s,o;if(!e.rendered||e.isDestroyed)return;if(!e.hasListeners.beforerefresh||e.fireEvent("beforerefresh",e)!==!1)t=e.getTargetEl(),o=e.getViewRange(),s=t.dom,e.preserveScrollOnRefresh||(n=s.parentNode,r=s.style.display,s.style.display="none",i=s.nextSibling,n.removeChild(s)),e.refreshCounter?e.clearViewEl():(e.fixedNodes=t.dom.childNodes.length,e.refreshCounter=1),e.tpl.append(t,e.collectData(o,e.all.startIndex)),o.length<1?(!this.store.loading&&(!e.deferEmptyText||e.hasFirstRefresh)&&Ext.core.DomHelper.insertHtml("beforeEnd",t.dom,e.emptyText),e.all.clear()):(e.collectNodes(t.dom),e.updateIndexes(0)),e.hasFirstRefresh&&(e.refreshSelmodelOnRefresh!==!1?e.selModel.refresh():e.selModel.pruneIf()),e.hasFirstRefresh=!0,e.preserveScrollOnRefresh||(n.insertBefore(s,i),s.style.display=r),this.refreshSize(),e.fireEvent("refresh",e),e.viewReady||(e.viewReady=!0,e.fireEvent("viewready",e))},collectNodes:function(e){this.all.fill(Ext.query(this.getItemSelector(),Ext.getDom(e)),this.all.startIndex)},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(){var e=this.getSizeModel();(e.height.shrinkWrap||e.width.shrinkWrap)&&this.updateLayout()},clearViewEl:function(){var e=this,t=e.getTargetEl();if(e.fixedNodes)while(t.dom.childNodes[e.fixedNodes])t.dom.removeChild(t.dom.childNodes[e.fixedNodes]);else t.update("");e.refreshCounter++},onViewScroll:Ext.emptyFn,onIdChanged:Ext.emptyFn,saveScrollState:function(){if(this.rendered){var e=this.el.dom,t=this.scrollState;t.left=e.scrollLeft,t.top=e.scrollTop}},restoreScrollState:function(){if(this.rendered){var e=this.el.dom,t=this.scrollState;e.scrollLeft=t.left,e.scrollTop=t.top}},prepareData:function(e,t,n){var r,i,s;if(n){r=n.getAssociatedData();for(i in r)r.hasOwnProperty(i)&&(s||(e=Ext.Object.chain(e),s=!0),e[i]=r[i])}return e},collectData:function(e,t){var n=[],r=0,i=e.length,s;for(;r<i;r++)s=e[r],n[r]=this.prepareData(s.data,t+r,s);return n},bufferRender:function(e,t){var n=this,r=n.renderBuffer||(n.renderBuffer=document.createElement("div"));return n.tpl.overwrite(r,n.collectData(e,t)),Ext.DomQuery.select(n.getItemSelector(),r)},getNodeContainer:function(){return this.getTargetEl()},onUpdate:function(e,t){var n=this,r,i;if(n.viewReady){r=n.dataSource.indexOf(t);if(r>-1){i=n.bufferRender([t],r)[0];if(n.getNode(t))return n.all.replaceElement(r,i,!0),n.updateIndexes(r,r),n.selModel.onUpdate(t),n.hasListeners.itemupdate&&n.fireEvent("itemupdate",t,r,i),i}}},onAdd:function(e,t,n){var r=this,i;r.rendered&&(r.all.getCount()===0?(r.refresh(),i=r.all.slice()):(i=r.doAdd(t,n),r.refreshSelmodelOnRefresh!==!1&&r.selModel.refresh(),r.updateIndexes(n),r.refreshSize()),r.hasListeners.itemadd&&r.fireEvent("itemadd",t,n,i))},doAdd:function(e,t){var n=this,r=n.bufferRender(e,t,!0),i=n.all,s=i.getCount(),o,u,a,f;if(s===0){a=this.getNodeContainer(),f=document.createDocumentFragment();for(o=0,u=r.length;o<u;o++)f.appendChild(r[o]);a.appendChild(f)}else t<s?t===0?i.item(t).insertSibling(r,"before",!0):i.item(t-1).insertSibling(r,"after",!0):i.last().insertSibling(r,"after",!0);return i.insert(t,r),r},onRemove:function(e,t,n){var r=this,i=r.hasListeners.itemremove,s,o,u;if(r.all.getCount()){if(r.dataSource.getCount()===0){if(i)for(s=n.length-1;s>=0;--s)r.fireEvent("itemremove",t[s],n[s]);r.refresh()}else{for(s=n.length-1;s>=0;--s)o=t[s],u=n[s],r.doRemove(o,u),i&&r.fireEvent("itemremove",o,u);r.updateIndexes(n[0])}this.refreshSize()}},doRemove:function(e,t){this.all.removeElement(t,!0)},refreshNode:function(e){this.onUpdate(this.dataSource,this.dataSource.getAt(e))},updateIndexes:function(e,t){var n=this.all.elements,r=this.getViewRange(),i;e=e||0,t=t||(t===0?0:n.length-1);for(i=e;i<=t;i++)n[i].viewIndex=i,n[i].viewRecordId=r[i].internalId,n[i].boundView||(n[i].boundView=this.id)},getStore:function(){return this.store},bindStore:function(e,t,n){var r=this;r.mixins.bindable.bindStore.apply(r,arguments),t||r.getSelectionModel().bindStore(e),r.componentLayoutCounter&&r.doFirstRefresh(e)},doFirstRefresh:function(e){var t=this;t.firstRefreshDone=!0,e&&!e.loading&&(t.deferInitialRefresh?t.applyFirstRefresh():t.refresh())},applyFirstRefresh:function(){var e=this;if(e.isDestroyed)return;e.up("[isCollapsingOrExpanding]")?Ext.Function.defer(e.applyFirstRefresh,100,e):Ext.Function.defer(function(){e.isDestroyed||e.refresh()},1)},onUnbindStore:function(e){this.setMaskBind(null)},onBindStore:function(e,t,n){this.setMaskBind(e),!t&&n==="store"&&this.bindStore(e,!1,"dataSource")},setMaskBind:function(e){var t=this.loadMask;t&&t.bindStore&&t.bindStore(e)},getStoreListeners:function(){var e=this;return{idchanged:e.onIdChanged,refresh:e.onDataRefresh,add:e.onAdd,bulkremove:e.onRemove,update:e.onUpdate,clear:e.refresh}},onDataRefresh:function(){this.refreshView()},refreshView:function(){var e=this,t=!e.firstRefreshDone&&(!e.rendered||e.up("[collapsed],[isCollapsingOrExpanding],[hidden]"));t?e.deferInitialRefresh=!1:e.blockRefresh!==!0&&(e.firstRefreshDone=!0,e.refresh())},findItemByChild:function(e){return Ext.fly(e).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var e=[],t=this.selModel.getSelection(),n=t.length,r=0;for(;r<n;r++)e.push(this.getNode(t[r]));return e},getRecords:function(e){var t=[],n=0,r=e.length,i=this.dataSource.data;for(;n<r;n++)t[t.length]=i.getByKey(e[n].viewRecordId);return t},getRecord:function(e){return this.dataSource.data.getByKey(Ext.getDom(e).viewRecordId)},isSelected:function(e){var t=this.getRecord(e);return this.selModel.isSelected(t)},select:function(e,t,n){this.selModel.select(e,t,n)},deselect:function(e,t){this.selModel.deselect(e,t)},getNode:function(e){return!e&&e!==0||!this.rendered?null:Ext.isString(e)?document.getElementById(e):Ext.isNumber(e)?this.all.elements[e]:e.isModel?this.getNodeByRecord(e):e},getNodeByRecord:function(e){var t=this.all.elements,n=t.length,r=0;for(;r<n;r++)if(t[r].viewRecordId===e.internalId)return t[r];return null},getNodes:function(e,t){var n=this.all;return t===undefined?t=n.getCount():t++,n.slice(e||0,t)},indexOf:function(e){return e=this.getNode(e),!e&&e!==0?-1:Ext.isNumber(e.viewIndex)?e.viewIndex:this.all.indexOf(e)},onDestroy:function(){var e=this;e.all.clear(),e.callParent(),e.bindStore(null),e.selModel.destroy()},onItemSelect:function(e){var t=this.getNode(e);t&&Ext.fly(t).addCls(this.selectedItemCls)},onItemDeselect:function(e){var t=this.getNode(e);t&&Ext.fly(t).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(e,t,n){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var r=this.getSelectionModel();return r.select.apply(r,arguments)},clearSelections:function(){Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()");var e=this.getSelectionModel();return e.deselectAll()}})})}),Ext.define("Ext.view.View",{extend:Ext.view.AbstractView,alternateClassName:"Ext.DataView",alias:"widget.dataview",deferHighlight:Ext.isIE7m?100:0,mouseOverOutBuffer:20,inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},initComponent:function(){var e=this;e.callParent(),e.mouseOverOutBuffer?(e.handleMouseOver=Ext.Function.createBuffered(e.handleMouseOver,e.mouseOverOutBuffer,e),e.handleMouseOut=Ext.Function.createBuffered(e.handleMouseOut,e.mouseOverOutBuffer,e),e.lastMouseOverEvent=new Ext.EventObjectImpl,e.lastMouseOutEvent=new Ext.EventObjectImpl):e.deferHighlight&&(e.setHighlightedItem=Ext.Function.createBuffered(e.setHighlightedItem,e.deferHighlight,e))},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","beforedeselect","select","deselect","focuschange","highlightitem","unhighlightitem")},getFocusEl:function(){return this.getTargetEl()},afterRender:function(){var e=this,t=e.mouseOverOutBuffer;e.callParent(),e.mon(e.getTargetEl(),{scope:e,freezeEvent:!0,click:e.handleEvent,mousedown:e.handleEvent,mouseup:e.handleEvent,dblclick:e.handleEvent,contextmenu:e.handleEvent,keydown:e.handleEvent,mouseover:t?e.onMouseOver:e.handleMouseOver,mouseout:t?e.onMouseOut:e.handleMouseOut})},onMouseOver:function(e){var t=this;t.lastMouseOverEvent.setEvent(e.browserEvent,!0),t.handleMouseOver(t.lastMouseOverEvent)},onMouseOut:function(e){var t=this;t._mouseOutPending||(t._mouseOutPending=!0,t.lastMouseOutEvent.setEvent(e.browserEvent,!0),t.handleMouseOut(t.lastMouseOutEvent))},handleMouseOver:function(e){var t=this,n=t.dataRowSelector||t.itemSelector,r=e.getTarget(n);t.isDestroyed||(r?t.mouseOverItem!==r&&t.el.contains(r)&&(t.mouseOverItem=e.item=r,e.newType="mouseenter",t.handleEvent(e)):(e.item=e.newType=null,t.handleEvent(e)))},handleMouseOut:function(e){var t=this,n=t.dataRowSelector||t.itemSelector,r=e.getTarget(n),i;t.isDestroyed||(t._mouseOutPending=!1,r?e.getRelatedTarget(n)!==r&&t.mouseOverItem===r&&(i=t.self.getBoundView(r),e.item=r,e.newType="mouseleave",i.handleEvent(e),i.mouseOverItem=null):(e.item=e.newType=null,t.handleEvent(e))),e.newType=e.item=null},handleEvent:function(e){var t=this,n=e.type=="keydown"&&e.getKey();t.processUIEvent(e)!==!1&&t.processSpecialEvent(e),n===e.SPACE&&(t.inputTagRe.test(e.getTarget().tagName)||e.stopEvent())},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(e){if(!Ext.getBody().isAncestor(e.target))return;var t=this,n=e.getTarget(t.dataRowSelector||t.itemSelector,t.getTargetEl()),r=t.statics().EventMap,i,s,o=e.type,u=e.type,a;e.newType&&(u=e.newType,n=e.item),!n&&o=="keydown"&&(a=t.getSelectionModel(),s=a.lastFocused||a.getLastSelected(),s&&(n=t.getNode(s,!0)));if(n){s||(s=t.getRecord(n)),i=t.indexInStore?t.indexInStore(s):t.indexOf(n);if(!s||t.processItemEvent(s,n,i,e)===!1)return!1;if(t["onBeforeItem"+r[u]](s,n,i,e)===!1||t.fireEvent("beforeitem"+u,t,s,n,i,e)===!1||t["onItem"+r[u]](s,n,i,e)===!1)return!1;t.fireEvent("item"+u,t,s,n,i,e)}else{if(t.processContainerEvent(e)===!1||t["onBeforeContainer"+r[o]](e)===!1||t.fireEvent("beforecontainer"+o,t,e)===!1||t["onContainer"+r[o]](e)===!1)return!1;t.fireEvent("container"+o,t,e)}return!0},onItemMouseEnter:function(e,t,n,r){this.trackOver&&this.highlightItem(t)},onItemMouseLeave:function(e,t,n,r){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,setHighlightedItem:function(e){var t=this,n=t.highlightedItem,r=t.overItemCls,i=t.beforeOverItemCls,s;n!=e&&(n&&(Ext.fly(n).removeCls(r),s=n.previousSibling,i&&s&&Ext.fly(s).removeCls(i),t.fireEvent("unhighlightitem",t,n)),t.highlightedItem=e,e&&(Ext.fly(e).addCls(t.overItemCls),s=e.previousSibling,i&&s&&Ext.fly(s).addCls(i),t.fireEvent("highlightitem",t,e)))},highlightItem:function(e){this.setHighlightedItem(e)},clearHighlight:function(){this.setHighlightedItem(undefined)},onUpdate:function(e,t){var n=this,r,i,s;n.viewReady&&(r=n.getNode(t),i=n.callParent(arguments),s=n.highlightedItem,s&&s===r&&(delete n.highlightedItem,i&&n.highlightItem(i)))},refresh:function(){this.clearHighlight(),this.callParent(arguments)},focusNode:function(e){var t=this,n=t.getNode(e,!0),r=t.el,i=0,s=0,o=r.getRegion(),u;o.bottom=o.top+r.dom.clientHeight,o.right=o.left+r.dom.clientWidth,n&&(u=Ext.fly(n).getRegion(),u.top<o.top?i=u.top-o.top:u.bottom>o.bottom&&(i=u.bottom-o.bottom),u.left<o.left?s=u.left-o.left:u.right>o.right&&(s=u.right-o.right),(s||i)&&t.scrollBy(s,i,!1),r.focus())},bindStore:function(e,t,n){var r=this[n];r&&r.isFeatureStore?e.isFeatureStore?(this.bindStoreListeners(e),r.bindStore(r.store)):r.bindStore(e):this.callParent(arguments)}}),Ext.define("Ext.layout.component.BoundList",{extend:Ext.layout.component.Auto,alias:"layout.boundlist",type:"component",beginLayout:function(e){var t=this,n=t.owner,r=n.pagingToolbar;t.callParent(arguments),n.floating&&(e.savedXY=n.getXY(),n.setXY([0,-9999])),r&&(e.toolbarContext=e.context.getCmp(r)),e.listContext=e.getEl("listEl")},beginLayoutCycle:function(e){var t=this.owner;this.callParent(arguments),e.heightModel.auto&&(t.el.setHeight("auto"),t.listEl.setHeight("auto"))},getLayoutItems:function(){var e=this.owner.pagingToolbar;return e?[e]:[]},isValidParent:function(){return!0},finishedLayout:function(e){var t=e.savedXY;this.callParent(arguments),t&&this.owner.setXY(t)},measureContentWidth:function(e){return this.owner.listEl.getWidth()},measureContentHeight:function(e){return this.owner.listEl.getHeight()},publishInnerHeight:function(e,t){var n=e.toolbarContext,r=0;n&&(r=n.getProp("height")),r===undefined?this.done=!1:e.listContext.setHeight(t-e.getFrameInfo().height-r)},calculateOwnerHeightFromContentHeight:function(e){var t=this.callParent(arguments),n=e.toolbarContext;return n&&(t+=n.getProp("height")),t}}),Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",ariaRole:null,beforeRender:function(){var e=this;e.callParent(),Ext.apply(e.renderData,{text:e.text})},setText:function(e){var t=this;t.text=e,t.rendered&&(t.el.update(e),t.updateLayout())}}),Ext.define("Ext.form.field.Spinner",{extend:Ext.form.field.Trigger,alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",triggerTpl:'<td style="{triggerStyle}" class="{triggerCls}" role="presentation"><div class="'+Ext.baseCSSPrefix+"trigger-index-0 "+Ext.baseCSSPrefix+"form-trigger "+Ext.baseCSSPrefix+'form-spinner-up {spinnerUpCls} {childElCls}" role="presentation"></div>'+'<div class="'+Ext.baseCSSPrefix+"trigger-index-1 "+Ext.baseCSSPrefix+"form-trigger "+Ext.baseCSSPrefix+'form-spinner-down {spinnerDownCls} {childElCls}" role="presentation"></div>'+"</td>"+"</tr>",initComponent:function(){this.callParent(),this.addEvents("spin","spinup","spindown")},onRender:function(){var e=this,t;e.callParent(arguments),t=e.triggerEl,e.spinUpEl=t.item(0),e.spinDownEl=t.item(1),e.triggerCell=e.spinUpEl.parent(),e.keyNavEnabled&&(e.spinnerKeyNav=new Ext.util.KeyNav(e.inputEl,{scope:e,up:e.spinUp,down:e.spinDown})),e.mouseWheelEnabled&&e.mon(e.bodyEl,"mousewheel",e.onMouseWheel,e)},getSubTplMarkup:function(e){var t=this,n=e.childElCls,r=Ext.form.field.Base.prototype.getSubTplMarkup.apply(t,arguments);return'<table id="'+t.id+'-triggerWrap" class="'+Ext.baseCSSPrefix+"form-trigger-wrap"+n+'" cellpadding="0" cellspacing="0" role="presentation">'+'<tbody role="presentation">'+'<tr role="presentation"><td id="'+t.id+'-inputCell" class="'+Ext.baseCSSPrefix+"form-trigger-input-cell"+n+'" role="presentation">'+r+"</td>"+t.getTriggerMarkup()+"</tbody></table>"},getTriggerMarkup:function(){return this.getTpl("triggerTpl").apply(this.getTriggerData())},getTriggerData:function(){var e=this,t=e.readOnly||e.hideTrigger;return{triggerCls:Ext.baseCSSPrefix+"trigger-cell",triggerStyle:t?"display:none":"",spinnerUpCls:e.spinUpEnabled?"":e.trigger1Cls+"-disabled",spinnerDownCls:e.spinDownEnabled?"":e.trigger2Cls+"-disabled"}},getTriggerWidth:function(){var e=this,t=0;return e.triggerWrap&&!e.hideTrigger&&!e.readOnly&&(t=e.triggerWidth),t},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},onTriggerWrapMouseup:function(){this.inputEl.focus()},spinUp:function(){var e=this;e.spinUpEnabled&&!e.disabled&&(e.fireEvent("spin",e,"up"),e.fireEvent("spinup",e),e.onSpinUp())},spinDown:function(){var e=this;e.spinDownEnabled&&!e.disabled&&(e.fireEvent("spin",e,"down"),e.fireEvent("spindown",e),e.onSpinDown())},setSpinUpEnabled:function(e){var t=this,n=t.spinUpEnabled;t.spinUpEnabled=e,n!==e&&t.rendered&&t.spinUpEl[e?"removeCls":"addCls"](t.trigger1Cls+"-disabled")},setSpinDownEnabled:function(e){var t=this,n=t.spinDownEnabled;t.spinDownEnabled=e,n!==e&&t.rendered&&t.spinDownEl[e?"removeCls":"addCls"](t.trigger2Cls+"-disabled")},onMouseWheel:function(e){var t=this,n;t.hasFocus&&(n=e.getWheelDelta(),n>0?t.spinUp():n<0&&t.spinDown(),e.stopEvent())},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl"),this.callParent()}}),Ext.define("Ext.form.field.Number",{extend:Ext.form.field.Spinner,alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){var e=this;e.decimalSeparator===null&&(e.decimalSeparator=Ext.util.Format.decimalSeparator),e.callParent(),e.setMinValue(e.minValue),e.setMaxValue(e.maxValue)},getErrors:function(e){var t=this,n=t.callParent(arguments),r=Ext.String.format,i;return e=Ext.isDefined(e)?e:this.processRawValue(this.getRawValue()),e.length<1?n:(e=String(e).replace(t.decimalSeparator,"."),isNaN(e)&&n.push(r(t.nanText,e)),i=t.parseValue(e),t.
minValue===0&&i<0?n.push(this.negativeText):i<t.minValue&&n.push(r(t.minText,t.minValue)),i>t.maxValue&&n.push(r(t.maxText,t.maxValue)),n)},rawToValue:function(e){var t=this.fixPrecision(this.parseValue(e));return t===null&&(t=e||null),t},valueToRaw:function(e){var t=this,n=t.decimalSeparator;return e=t.parseValue(e),e=t.fixPrecision(e),e=Ext.isNumber(e)?e:parseFloat(String(e).replace(n,".")),e=isNaN(e)?"":String(e).replace(".",n),e},getSubmitValue:function(){var e=this,t=e.callParent();return e.submitLocaleSeparator||(t=t.replace(e.decimalSeparator,".")),t},onChange:function(){this.toggleSpinners(),this.callParent(arguments)},toggleSpinners:function(){var e=this,t=e.getValue(),n=t===null,r;if(e.spinUpEnabled||e.spinUpDisabledByToggle)r=n||t<e.maxValue,e.setSpinUpEnabled(r,!0);if(e.spinDownEnabled||e.spinDownDisabledByToggle)r=n||t>e.minValue,e.setSpinDownEnabled(r,!0)},setMinValue:function(e){var t=this,n;t.minValue=Ext.Number.from(e,Number.NEGATIVE_INFINITY),t.toggleSpinners(),t.disableKeyFilter!==!0&&(n=t.baseChars+"",t.allowExponential?n+=t.decimalSeparator+"e+-":(t.allowDecimals&&(n+=t.decimalSeparator),t.minValue<0&&(n+="-")),n=Ext.String.escapeRegex(n),t.maskRe=new RegExp("["+n+"]"),t.autoStripChars&&(t.stripCharsRe=new RegExp("[^"+n+"]","gi")))},setMaxValue:function(e){this.maxValue=Ext.Number.from(e,Number.MAX_VALUE),this.toggleSpinners()},parseValue:function(e){return e=parseFloat(String(e).replace(this.decimalSeparator,".")),isNaN(e)?null:e},fixPrecision:function(e){var t=this,n=isNaN(e),r=t.decimalPrecision;if(n||!e)return n?"":e;if(!t.allowDecimals||r<=0)r=0;return parseFloat(Ext.Number.toFixed(parseFloat(e),r))},beforeBlur:function(){var e=this,t=e.parseValue(e.getRawValue());Ext.isEmpty(t)||e.setValue(t)},setSpinUpEnabled:function(e,t){this.callParent(arguments),t?this.spinUpDisabledByToggle=!e:delete this.spinUpDisabledByToggle},onSpinUp:function(){var e=this;e.readOnly||e.setSpinValue(Ext.Number.constrain(e.getValue()+e.step,e.minValue,e.maxValue))},setSpinDownEnabled:function(e,t){this.callParent(arguments),t?this.spinDownDisabledByToggle=!e:delete this.spinDownDisabledByToggle},onSpinDown:function(){var e=this;e.readOnly||e.setSpinValue(Ext.Number.constrain(e.getValue()-e.step,e.minValue,e.maxValue))},setSpinValue:function(e){var t=this,n;if(t.enforceMaxLength&&t.fixPrecision(e).toString().length>t.maxLength)return;t.setValue(e)}}),Ext.define("Ext.toolbar.Paging",{extend:Ext.toolbar.Toolbar,alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",mixins:{bindable:Ext.util.Bindable},displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var e=this;return[{itemId:"first",tooltip:e.firstText,overflowText:e.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:!0,handler:e.moveFirst,scope:e},{itemId:"prev",tooltip:e.prevText,overflowText:e.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:!0,handler:e.movePrevious,scope:e},"-",e.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:e.inputItemWidth,margins:"-1 2 3 2",listeners:{scope:e,keydown:e.onPagingKeyDown,blur:e.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(e.afterPageText,1)},"-",{itemId:"next",tooltip:e.nextText,overflowText:e.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:!0,handler:e.moveNext,scope:e},{itemId:"last",tooltip:e.lastText,overflowText:e.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:!0,handler:e.moveLast,scope:e},"-",{itemId:"refresh",tooltip:e.refreshText,overflowText:e.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",disabled:e.store.isLoading(),handler:e.doRefresh,scope:e}]},initComponent:function(){var e=this,t=e.items||e.buttons||[],n;e.bindStore(e.store||"ext-empty-store",!0),n=e.getPagingItems(),e.prependButtons?e.items=t.concat(n):e.items=n.concat(t),delete e.buttons,e.displayInfo&&(e.items.push("->"),e.items.push({xtype:"tbtext",itemId:"displayItem"})),e.callParent(),e.addEvents("change","beforechange")},beforeRender:function(){this.callParent(arguments),this.store.isLoading()||this.onLoad()},updateInfo:function(){var e=this,t=e.child("#displayItem"),n=e.store,r=e.getPageData(),i,s;t&&(i=n.getCount(),i===0?s=e.emptyMsg:s=Ext.String.format(e.displayMsg,r.fromRecord,r.toRecord,r.total),t.setText(s))},onLoad:function(){var e=this,t,n,r,i,s,o,u;s=e.store.getCount(),o=s===0;if(!o){t=e.getPageData(),n=t.currentPage,r=t.pageCount;if(n>r){e.store.loadPage(r);return}i=Ext.String.format(e.afterPageText,isNaN(r)?1:r)}else n=0,r=0,i=Ext.String.format(e.afterPageText,0);Ext.suspendLayouts(),u=e.child("#afterTextItem"),u&&u.setText(i),u=e.getInputItem(),u&&u.setDisabled(o).setValue(n),e.setChildDisabled("#first",n===1||o),e.setChildDisabled("#prev",n===1||o),e.setChildDisabled("#next",n===r||o),e.setChildDisabled("#last",n===r||o),e.setChildDisabled("#refresh",!1),e.updateInfo(),Ext.resumeLayouts(!0),e.fireEvent("change",e,t)},setChildDisabled:function(e,t){var n=this.child(e);n&&n.setDisabled(t)},getPageData:function(){var e=this.store,t=e.getTotalCount();return{total:t,currentPage:e.currentPage,pageCount:Math.ceil(t/e.pageSize),fromRecord:(e.currentPage-1)*e.pageSize+1,toRecord:Math.min(e.currentPage*e.pageSize,t)}},onLoadError:function(){this.setChildDisabled("#refresh",!1)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(e){var t=this.getInputItem(),n=!1,r;if(t){r=t.getValue(),n=parseInt(r,10);if(!r||isNaN(n))return t.setValue(e.currentPage),!1}return n},onPagingBlur:function(e){var t=this.getInputItem(),n;t&&(n=this.getPageData().currentPage,t.setValue(n))},onPagingKeyDown:function(e,t){this.processKeyEvent(e,t)},processKeyEvent:function(e,t){var n=this,r=t.getKey(),i=n.getPageData(),s=t.shiftKey?10:1,o;if(r==t.RETURN)t.stopEvent(),o=n.readPageFromInput(i),o!==!1&&(o=Math.min(Math.max(1,o),i.pageCount),o!==i.currentPage&&n.fireEvent("beforechange",n,o)!==!1&&n.store.loadPage(o));else if(r==t.HOME||r==t.END)t.stopEvent(),o=r==t.HOME?1:i.pageCount,e.setValue(o);else if(r==t.UP||r==t.PAGE_UP||r==t.DOWN||r==t.PAGE_DOWN){t.stopEvent(),o=n.readPageFromInput(i);if(o){if(r==t.DOWN||r==t.PAGE_DOWN)s*=-1;o+=s,o>=1&&o<=i.pageCount&&e.setValue(o)}}},beforeLoad:function(){this.setChildDisabled("#refresh",!0)},moveFirst:function(){return this.fireEvent("beforechange",this,1)!==!1?(this.store.loadPage(1),!0):!1},movePrevious:function(){var e=this,t=e.store,n=t.currentPage-1;return n>0&&e.fireEvent("beforechange",e,n)!==!1?(t.previousPage(),!0):!1},moveNext:function(){var e=this,t=e.store,n=e.getPageData().pageCount,r=t.currentPage+1;return r<=n&&e.fireEvent("beforechange",e,r)!==!1?(t.nextPage(),!0):!1},moveLast:function(){var e=this,t=e.getPageData().pageCount;return e.fireEvent("beforechange",e,t)!==!1?(e.store.loadPage(t),!0):!1},doRefresh:function(){var e=this,t=e.store,n=t.currentPage;return e.fireEvent("beforechange",e,n)!==!1?(t.loadPage(n),!0):!1},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},unbind:function(e){this.bindStore(null)},bind:function(e){this.bindStore(e)},onDestroy:function(){this.unbind(),this.callParent()}}),Ext.define("Ext.view.BoundList",{extend:Ext.view.View,alias:"widget.boundlist",alternateClassName:"Ext.BoundList",mixins:{queryable:Ext.Queryable},pageSize:0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:!1,trackOver:!0,refreshed:0,deferInitialRefresh:!1,componentLayout:"boundlist",childEls:["listEl"],renderTpl:['<div id="{id}-listEl" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'" style="overflow:auto"></div>',"{%","var me=values.$comp, pagingToolbar=me.pagingToolbar;","if (pagingToolbar) {","pagingToolbar.ownerLayout = me.componentLayout;","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:!0}],initComponent:function(){var e=this,t=e.baseCls,n=e.itemCls;e.selectedItemCls=t+"-selected",e.trackOver&&(e.overItemCls=t+"-item-over"),e.itemSelector="."+n,e.floating&&e.addCls(t+"-floating"),e.tpl?e.tpl.isTemplate||(e.tpl=new Ext.XTemplate(e.tpl)):e.tpl=new Ext.XTemplate('<ul class="'+Ext.plainListCls+'"><tpl for=".">','<li role="option" unselectable="on" class="'+n+'">'+e.getInnerTpl(e.displayField)+"</li>","</tpl></ul>"),e.pageSize&&(e.pagingToolbar=e.createPagingToolbar()),e.callParent()},beforeRender:function(){var e=this;e.callParent(arguments),e.up("menu")&&e.addCls(Ext.baseCSSPrefix+"menu")},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){return this.pagingToolbar?[this.pagingToolbar]:[]},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:!1,ownerCt:this,ownerLayout:this.getComponentLayout()})},finishRenderChildren:function(){var e=this.pagingToolbar;this.callParent(arguments),e&&e.finishRender()},refresh:function(){var e=this,t=e.tpl,n=e.pagingToolbar,r=e.rendered;t.field=e.pickerField,t.store=e.store,e.callParent(),t.field=t.store=null,r&&n&&n.rendered&&!e.preserveScrollOnRefresh&&e.el.appendChild(n.el),r&&Ext.isIE6&&Ext.isStrict&&e.listEl.repaint()},bindStore:function(e,t){var n=this.pagingToolbar;this.callParent(arguments),n&&n.bindStore(e,t)},getTargetEl:function(){return this.listEl||this.el},getInnerTpl:function(e){return"{"+e+"}"},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl"),this.callParent()}}),Ext.define("Ext.view.BoundListKeyNav",{extend:Ext.util.KeyNav,constructor:function(e,t){var n=this;n.boundList=t.boundList,n.callParent([e,Ext.apply({},t,n.defaultHandlers)])},defaultHandlers:{up:function(){var e=this,t=e.boundList,n=t.all,r=t.highlightedItem,i=r?t.indexOf(r):-1,s=i>0?i-1:n.getCount()-1;e.highlightAt(s)},down:function(){var e=this,t=e.boundList,n=t.all,r=t.highlightedItem,i=r?t.indexOf(r):-1,s=i<n.getCount()-1?i+1:0;e.highlightAt(s)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var e=this;e.highlightAt(e.boundList.all.getCount()-1)},enter:function(e){this.selectHighlighted(e)}},highlightAt:function(e){var t=this.boundList,n=t.all.item(e);n&&(n=n.dom,t.highlightItem(n),t.getTargetEl().scrollChildIntoView(n,!1))},selectHighlighted:function(e){var t=this.boundList,n=t.getSelectionModel(),r,i;r=t.highlightedItem,r&&(i=t.getRecord(r),(e.getKey()===e.ENTER||!n.isSelected(i))&&n.selectWithEvent(i,e))}}),Ext.define("Ext.layout.component.field.ComboBox",{extend:Ext.layout.component.field.Trigger,alias:"layout.combobox",type:"combobox",startingWidth:null,getTextWidth:function(){var e=this,t=e.owner,n=t.store,r=t.displayField,i=n.data.length,s="",o=0,u=0,a,f,l;for(;o<i;o++)f=n.getAt(o).data[r],a=f.length,a>u&&(u=a,s=f);l=Math.max(e.callParent(arguments),t.inputEl.getTextWidth(s+t.growAppend));if(!e.startingWidth||t.removingRecords)e.startingWidth=l,l<t.growMin&&(t.defaultListConfig.minWidth=t.growMin),t.removingRecords=!1;return l<e.startingWidth?e.startingWidth:l}}),Ext.define("Ext.form.field.ComboBox",{extend:Ext.form.field.Picker,alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],mixins:{bindable:Ext.util.Bindable},componentLayout:"combobox",triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenName:"",hiddenDataCls:Ext.baseCSSPrefix+"hide-display "+Ext.baseCSSPrefix+"form-data-hidden",ariaRole:"combobox",fieldSubTpl:['<div class="{hiddenDataCls}" role="presentation"></div>','<input id="{id}" type="{type}" role="{role}" {inputAttrTpl} class="{fieldCls} {typeCls} {editableCls}" autocomplete="off"','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="size"> size="{size}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',"/>",{compiled:!0,disableFormats:!0}],getSubTplData:function(){var e=this;return Ext.applyIf(e.subTplData,{hiddenDataCls:e.hiddenDataCls}),e.callParent(arguments)},afterRender:function(){var e=this;e.callParent(arguments),e.setHiddenValue(e.value)},multiSelect:!1,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:!0,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelect:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:!0,ignoreSelection:0,removingRecords:null,resizeComboToGrow:function(){var e=this;return e.grow&&e.growToLongestValue},initComponent:function(){var e=this,t=Ext.isDefined,n=e.store,r=e.transform,i=e.displayTpl,s,o;Ext.applyIf(e.renderSelectors,{hiddenDataEl:"."+e.hiddenDataCls.split(" ").join(".")}),e.addEvents("beforequery","select","beforeselect","beforedeselect"),r&&(s=Ext.getDom(r),s&&(e.store||(n=Ext.Array.map(Ext.Array.from(s.options),function(e){return[e.value,e.text]})),e.name||(e.name=s.name),"value"in e||(e.value=s.value))),e.bindStore(n||"ext-empty-store",!0),n=e.store,n.autoCreated&&(e.queryMode="local",e.valueField=e.displayField="field1",n.expanded||(e.displayField="field2")),t(e.valueField)||(e.valueField=e.displayField),o=e.queryMode==="local",t(e.queryDelay)||(e.queryDelay=o?10:500),t(e.minChars)||(e.minChars=o?0:4),i?i.isTemplate||(e.displayTpl=new Ext.XTemplate(i)):e.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+e.displayField+'"]]}'+'<tpl if="xindex < xcount">'+e.delimiter+"</tpl>"+"</tpl>"),e.callParent(),e.doQueryTask=new Ext.util.DelayedTask(e.doRawQuery,e),e.store.getCount()>0&&e.setValue(e.value),s&&(e.transformInPlace&&(e.render(s.parentNode,s),delete e.renderTo),Ext.removeNode(s))},getStore:function(){return this.store},beforeBlur:function(){var e=this,t=e.queryFilter;e.doQueryTask.cancel(),e.assertValue(),t&&!t.disabled&&e.queryMode==="local"&&e.clearFilterOnBlur&&(t.disabled=!0,e.store.filter())},onFocus:function(){var e=this,t=e.queryFilter;e.callParent(arguments),!e.duringTriggerClick&&e.triggerAction!=="all"&&t&&t.disabled&&e.queryMode==="local"&&e.clearFilterOnBlur&&(delete e.lastQuery,e.doRawQuery())},assertValue:function(){var e=this,t=e.getRawValue(),n,r;e.forceSelection&&(e.multiSelect?t!==e.getDisplayValue()&&e.setValue(e.lastSelection):(n=e.findRecordByDisplay(t),n?(r=e.value,e.findRecordByValue(r)||e.select(n,!0)):e.setValue(e.lastSelection))),e.collapse()},onTypeAhead:function(){var e=this,t=e.displayField,n=e.store.findRecord(t,e.getRawValue()),r=e.getPicker(),i,s,o;n&&(i=n.get(t),s=i.length,o=e.getRawValue().length,r.highlightItem(r.getNode(n)),o!==0&&o!==s&&(e.setRawValue(i),e.selectText(o,i.length)))},resetToDefault:Ext.emptyFn,beforeReset:function(){var e=this.queryFilter;this.callParent(),e&&!e.disabled&&(e.disabled=!0,this.store.filter())},onUnbindStore:function(e){var t=this,n=t.picker,r=t.queryFilter;r&&t.store.removeFilter(r),!e&&n&&n.bindStore(null)},onBindStore:function(e,t){var n=this.picker;t||this.resetToDefault(),n&&n.bindStore(e)},getStoreListeners:function(){var e=this;return{beforeload:e.onBeforeLoad,clear:e.onClear,datachanged:e.onDataChanged,load:e.onLoad,exception:e.onException,remove:e.onRemove}},onBeforeLoad:function(){++this.ignoreSelection},onDataChanged:function(){var e=this;e.resizeComboToGrow()&&e.updateLayout()},onClear:function(){var e=this;e.resizeComboToGrow()&&(e.removingRecords=!0,e.onDataChanged())},onRemove:function(){var e=this;e.resizeComboToGrow()&&(e.removingRecords=!0)},onException:function(){this.ignoreSelection>0&&--this.ignoreSelection,this.collapse()},onLoad:function(e,t,n){var r=this;r.ignoreSelection>0&&--r.ignoreSelection,n&&!e.lastOptions.rawQuery&&(r.value==null?r.store.getCount()?r.doAutoSelect():r.setValue(r.value):r.setValue(r.value))},doRawQuery:function(){this.doQuery(this.getRawValue(),!1,!0)},doQuery:function(e,t,n){var r=this,i=r.beforeQuery({query:e||"",rawQuery:n,forceAll:t,combo:r,cancel:!1});return i===!1||i.cancel?!1:(r.queryCaching&&i.query===r.lastQuery?(r.expand(),r.queryMode==="local"&&r.doAutoSelect()):(r.lastQuery=i.query,r.queryMode==="local"?r.doLocalQuery(i):r.doRemoteQuery(i)),!0)},beforeQuery:function(e){var t=this;return t.fireEvent("beforequery",e)===!1?e.cancel=!0:e.cancel||e.query.length<t.minChars&&!e.forceAll&&(e.cancel=!0),e},doLocalQuery:function(e){var t=this,n=e.query;t.queryFilter||(t.queryFilter=new Ext.util.Filter({id:t.id+"-query-filter",anyMatch:t.anyMatch,caseSensitive:t.caseSensitive,root:"data",property:t.displayField}),t.store.addFilter(t.queryFilter,!1)),n||!e.forceAll?(t.queryFilter.disabled=!1,t.queryFilter.setValue(t.enableRegEx?new RegExp(n):n)):t.queryFilter.disabled=!0,t.store.filter(),t.store.getCount()?t.expand():t.collapse(),t.afterQuery(e)},doRemoteQuery:function(e){var t=this,n=function(){t.afterQuery(e)};t.expand(),t.pageSize?t.loadPage(1,{rawQuery:e.rawQuery,callback:n}):t.store.load({params:t.getParams(e.query),rawQuery:e.rawQuery,callback:n})},afterQuery:function(e){var t=this;t.store.getCount()&&(t.typeAhead&&t.doTypeAhead(),t.getRawValue()!==t.getDisplayValue()&&(t.ignoreSelection++,t.picker.getSelectionModel().deselectAll(),t.ignoreSelection--),e.rawQuery?(t.syncSelection(),t.picker&&!t.picker.getSelectionModel().hasSelection()&&t.doAutoSelect()):t.doAutoSelect())},loadPage:function(e,t){this.store.loadPage(e,Ext.apply({params:this.getParams(this.lastQuery)},t))},onPageChange:function(e,t){return this.loadPage(t),!1},getParams:function(e){var t={},n=this.queryParam;return n&&(t[n]=e),t},doAutoSelect:function(){var e=this,t=e.picker,n,r;t&&e.autoSelect&&e.store.getCount()>0&&(n=t.getSelectionModel().lastSelected,r=t.getNode(n||0),r&&(t.highlightItem(r),t.listEl.scrollChildIntoView(r,!1)))},doTypeAhead:function(){var e=this;e.typeAheadTask||(e.typeAheadTask=new Ext.util.DelayedTask(e.onTypeAhead,e)),e.lastKey!=Ext.EventObject.BACKSPACE&&e.lastKey!=Ext.EventObject.DELETE&&e.typeAheadTask.delay(e.typeAheadDelay)},onTriggerClick:function(){var e=this;e.duringTriggerClick=!0,!e.readOnly&&!e.disabled&&(e.isExpanded?e.collapse():(e.onFocus({}),e.triggerAction==="all"?e.doQuery(e.allQuery,!0):e.triggerAction==="last"?e.doQuery(e.lastQuery,!0):e.doQuery(e.getRawValue(),!1,!0)),e.inputEl.focus()),delete e.duringTriggerClick},onPaste:function(){var e=this;!e.readOnly&&!e.disabled&&e.editable&&e.doQueryTask.delay(e.queryDelay)},onKeyUp:function(e,t){var n=this,r=e.getKey();!n.readOnly&&!n.disabled&&n.editable&&(n.lastKey=r,(!e.isSpecialKey()||r==e.BACKSPACE||r==e.DELETE)&&n.doQueryTask.delay(n.queryDelay)),n.enableKeyEvents&&n.callParent(arguments)},initEvents:function(){var e=this;e.callParent(),e.enableKeyEvents||e.mon(e.inputEl,"keyup",e.onKeyUp,e),e.mon(e.inputEl,"paste",e.onPaste,e)},onDestroy:function(){var e=this;e.typeAheadTask&&(e.typeAheadTask.cancel(),e.typeAheadTask=null),Ext.destroy(e.listKeyNav),e.bindStore(null),e.callParent()},onAdded:function(){var e=this;e.callParent(arguments),e.picker&&(e.picker.ownerCt=e.up("[floating]"),e.picker.registerWithOwnerCt())},createPicker:function(){var e=this,t,n=Ext.apply({xtype:"boundlist",pickerField:e,selModel:{mode:e.multiSelect?"SIMPLE":"SINGLE"},floating:!0,hidden:!0,store:e.store,displayField:e.displayField,focusOnToFront:!1,pageSize:e.pageSize,tpl:e.tpl},e.listConfig,e.defaultListConfig);return t=e.picker=Ext.widget(n),e.pageSize&&t.pagingToolbar.on("beforechange",e.onPageChange,e),e.mon(t,{itemclick:e.onItemClick,refresh:e.onListRefresh,scope:e}),e.mon(t.getSelectionModel(),{beforeselect:e.onBeforeSelect,beforedeselect:e.onBeforeDeselect,selectionchange:e.onListSelectionChange,scope:e}),t},alignPicker:function(){var e=this,t=e.getPicker(),n=e.getPosition()[1]-Ext.getBody().getScroll().top,r=Ext.Element.getViewHeight()-n-e.getHeight(),i=Math.max(n,r);t.height&&(delete t.height,t.updateLayout()),t.getHeight()>i-5&&t.setHeight(i-5),e.callParent()},onListRefresh:function(){this.expanding||this.alignPicker(),this.syncSelection()},onItemClick:function(e,t){var n=this,r=n.picker.getSelectionModel().getSelection(),i=n.valueField;!n.multiSelect&&r.length&&t.get(i)===r[0].get(i)&&(n.displayTplData=[t.data],n.setRawValue(n.getDisplayValue()),n.collapse())},onBeforeSelect:function(e,t){return this.fireEvent("beforeselect",this,t,t.index)},onBeforeDeselect:function(e,t){return this.fireEvent("beforedeselect",this,t,t.index)},onListSelectionChange:function(e,t){var n=this,r=n.multiSelect,i=t.length>0;!n.ignoreSelection&&n.isExpanded&&(r||Ext.defer(n.collapse,1,n),(r||i)&&n.setValue(t,!1),i&&n.fireEvent("select",n,t),n.inputEl.focus())},onExpand:function(){var e=this,t=e.listKeyNav,n=e.selectOnTab,r=e.getPicker();t?t.enable():t=e.listKeyNav=new Ext.view.BoundListKeyNav(e.inputEl,{boundList:r,forceKeyDown:!0,tab:function(t){return n&&(this.selectHighlighted(t),e.triggerBlur()),!0},enter:function(t){var n=r.getSelectionModel(),i=n.getCount();this.selectHighlighted(t),!e.multiSelect&&i===n.getCount()&&e.collapse()}}),n&&(e.ignoreMonitorTab=!0),Ext.defer(t.enable,1,t),e.inputEl.focus()},onCollapse:function(){var e=this,t=e.listKeyNav;t&&(t.disable(),e.ignoreMonitorTab=!1)},select:function(e,t){var n=this,r=n.picker,i;e&&e.isModel&&t===!0&&r&&(i=!r.getSelectionModel().isSelected(e)),n.setValue(e,!0),i&&n.fireEvent("select",n,e)},findRecord:function(e,t){var n=this.store,r=n.findExact(e,t);return r!==-1?n.getAt(r):!1},findRecordByValue:function(e){return this.findRecord(this.valueField,e)},findRecordByDisplay:function(e){return this.findRecord(this.displayField,e)},setValue:function(e,t){var n=this,r=n.valueNotFoundText,i=n.inputEl,s,o,u,a,f=[],l=[],c=[];if(n.store.loading)return n.value=e,n.setHiddenValue(n.value),n;e=Ext.Array.from(e);for(s=0,o=e.length;s<o;s++){u=e[s];if(!u||!u.isModel)u=n.findRecordByValue(u);u?(f.push(u),l.push(u.data),c.push(u.get(n.valueField))):n.forceSelection?Ext.isDefined(r)&&l.push(r):(c.push(e[s]),a={},a[n.displayField]=e[s],l.push(a))}return n.setHiddenValue(c),n.value=n.multiSelect?c:c[0],Ext.isDefined(n.value)||(n.value=null),n.displayTplData=l,n.lastSelection=n.valueModels=f,i&&n.emptyText&&!Ext.isEmpty(e)&&i.removeCls(n.emptyCls),n.setRawValue(n.getDisplayValue()),n.checkChange(),t!==!1&&n.syncSelection(),n.applyEmptyText(),n},setHiddenValue:function(e){var t=this,n=t.hiddenName,r,i,s,o,u,a;if(!t.hiddenDataEl||!n)return;e=Ext.Array.from(e),i=t.hiddenDataEl.dom,s=i.childNodes,o=s[0],u=e.length,a=s.length,!o&&u>0&&(t.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:n})),a=1,o=i.firstChild);while(a>u)i.removeChild(s[0]),--a;while(a<u)i.appendChild(o.cloneNode(!0)),++a;for(r=0;r<u;r++)s[r].value=e[r]},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var e=this,t=e.picker,n=e.getRawValue(),r=e.value;return e.getDisplayValue()!==n&&(r=n,e.value=e.displayTplData=e.valueModels=null,t&&(e.ignoreSelection++,t.getSelectionModel().deselectAll(),e.ignoreSelection--)),r},getSubmitValue:function(){var e=this.getValue();return Ext.isEmpty(e)&&(e=""),e},isEqual:function(e,t){var n=Ext.Array.from,r,i;e=n(e),t=n(t),i=e.length;if(i!==t.length)return!1;for(r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0},clearValue:function(){this.setValue([])},syncSelection:function(){var e=this,t=e.picker,n,r,i=e.valueModels||[],s=i.length,o,u;if(t){n=[];for(o=0;o<s;o++)u=i[o],u&&u.isModel&&e.store.indexOf(u)>=0&&n.push(u);e.ignoreSelection++,r=t.getSelectionModel(),r.deselectAll(),n.length&&r.select(n,undefined,!0),e.ignoreSelection--}},onEditorTab:function(e){var t=this.listKeyNav;this.selectOnTab&&t&&t.selectHighlighted(e)}}),Ext.define("Ext.picker.Month",{extend:Ext.Component,alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",childEls:["bodyEl","prevEl","nextEl","buttonsEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner" href="#">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" href="#" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" href="#" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button" href="#">{.}</a>',"</div>","</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div id="{id}-buttonsEl" class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:!0,measureWidth:35,measureMaxHeight:20,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var e=this;e.selectedCls=e.baseCls+"-selected",e.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick"),e.small&&e.addCls(e.smallCls),e.setValue(e.value),e.activeYear=e.getYear((new Date).getFullYear()-4,-4),e.showButtons&&(e.okBtn=new Ext.button.Button({text:e.okText,handler:e.onOkClick,scope:e}),e.cancelBtn=new Ext.button.Button({text:e.cancelText,handler:e.onCancelClick,scope:e})),this.callParent()},beforeRender:function(){var e=this,t=0,n=[],r=Ext.Date.getShortMonthName,i=e.monthOffset,s=e.monthMargin,o="";e.padding&&!e.width&&e.cacheWidth(),e.callParent();for(;t<i;++t)n.push(r(t),r(t+i));Ext.isDefined(s)&&(o="margin: 0 "+s+"px;"),Ext.apply(e.renderData,{months:n,years:e.getYears(),showButtons:e.showButtons,monthStyle:o})},cacheWidth:function(){var e=this,t=e.parseBox(e.padding),n=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});e.self.prototype.width=n.getWidth()+t.left+t.right,n.remove()},afterRender:function(){var e=this,t=e.bodyEl,n=e.buttonsEl;e.callParent(),e.mon(t,"click",e.onBodyClick,e),e.mon(t,"dblclick",e.onBodyClick,e),e.years=t.select("."+e.baseCls+"-year a"),e.months=t.select("."+e.baseCls+"-month a"),e.backRepeater=new Ext.util.ClickRepeater(e.prevEl,{handler:Ext.Function.bind(e.adjustYear,e,[-e.totalYears])}),e.prevEl.addClsOnOver(e.baseCls+"-yearnav-prev-over"),e.nextRepeater=new Ext.util.ClickRepeater(e.nextEl,{handler:Ext.Function.bind(e.adjustYear,e,[e.totalYears])}),e.nextEl.addClsOnOver(e.baseCls+"-yearnav-next-over"),e.updateBody(),Ext.isDefined(e.monthMargin)||(Ext.picker.Month.prototype.monthMargin=e.calculateMonthMargin())},calculateMonthMargin:function(){var e=this,t=e.monthEl,n=e.months,r=n.first(),i=r.getMargin("l");while(i&&e.getLargest()>e.measureMaxHeight)--i,n.setStyle("margin","0 "+i+"px");return i},getLargest:function(e){var t=0;return this.months.each(function(e){var n=e.getHeight();n>t&&(t=n)}),t},setValue:function(e){var t=this,n=t.activeYear,r=t.monthOffset,i,s;return e?Ext.isDate(e)?t.value=[e.getMonth(),e.getFullYear()]:t.value=[e[0],e[1]]:t.value=[null,null],t.rendered&&(i=t.value[1],i!==null&&(i<n||i>n+t.yearOffset)&&(t.activeYear=i-t.yearOffset+1),t.updateBody()),t},getValue:function(){return this.value},hasSelection:function(){var e=this.value;return e[0]!==null&&e[1]!==null},getYears:function(){var e=this,t=e.yearOffset,n=e.activeYear,r=n+t,i=n,s=[];for(;i<r;++i)s.push(i,i+t);return s},updateBody:function(){var e=this,t=e.years,n=e.months,r=e.getYears(),i=e.selectedCls,s=e.getYear(null),o=e.value[0],u=e.monthOffset,a,f,l,c,h;if(e.rendered){t.removeCls(i),n.removeCls(i),f=t.elements,c=f.length;for(l=0;l<c;l++)h=Ext.fly(f[l]),a=r[l],h.dom.innerHTML=a,a==s&&h.addCls(i);o!==null&&(o<u?o*=2:o=(o-u)*2+1,n.item(o).addCls(i))}},getYear:function(e,t){var n=this.value[1];return t=t||0,n===null?e:n+t},onBodyClick:function(e,t){var n=this,r=e.type=="dblclick";e.getTarget("."+n.baseCls+"-month")?(e.stopEvent(),n.onMonthClick(t,r)):e.getTarget("."+n.baseCls+"-year")&&(e.stopEvent(),n.onYearClick(t,r))},adjustYear:function(e){typeof e!="number"&&(e=this.totalYears),this.activeYear+=e,this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(e,t){var n=this;n.value[0]=n.resolveOffset(n.months.indexOf(e),n.monthOffset),n.updateBody(),n.fireEvent("month"+(t?"dbl":"")+"click",n,n.value),n.fireEvent("select",n,n.value)},onYearClick:function(e,t){var n=this;n.value[1]=n.activeYear+n.resolveOffset(n.years.indexOf(e),n.yearOffset),n.updateBody(),n.fireEvent("year"+(t?"dbl":"")+"click",n,n.value),n.fireEvent("select",n,n.value)},resolveOffset:function(e,t){return e%2===0?e/2:t+Math.floor(e/2)},beforeDestroy:function(){var e=this;e.years=e.months=null,Ext.destroyMembers(e,"backRepeater","nextRepeater","okBtn","cancelBtn"),e.callParent()},finishRenderChildren:function(){var e=this;this.callParent(arguments),this.showButtons&&(e.okBtn.finishRender(),e.cancelBtn.finishRender())},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn"),this.callParent()}}),Ext.define("Ext.picker.Date",{extend:Ext.Component,alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:!0,renderTpl:['<div id="{id}-innerEl" role="grid">','<div role="presentation" class="{baseCls}-header">','<a id="{id}-prevEl" class="{baseCls}-prev {baseCls}-arrow" href="#" role="button" title="{prevText}" hidefocus="on" ></a>','<div class="{baseCls}-month" id="{id}-middleBtnEl">{%this.renderMonthBtn(values, out)%}</div>','<a id="{id}-nextEl" class="{baseCls}-next {baseCls}-arrow" href="#" role="button" title="{nextText}" hidefocus="on" ></a>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="grid">','<thead role="presentation"><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" title="{.}">','<div class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="button" hidefocus="on" class="{parent.baseCls}-date" href="#"></a>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(e){return Ext.picker.Date.prototype.getDayInitial(e)},isEndOfWeek:function(e){e--;var t=e%7===0&&e!==0;return t?'</tr><tr role="row">':""},renderTodayBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.todayBtn.getRenderTree(),t)},renderMonthBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.monthBtn.getRenderTree(),t)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d, Y",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:!0,disableAnim:!1,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:!1,focusOnSelect:!0,initHour:12,numDays:42,initComponent:function(){var e=this,t=Ext.Date.clearTime;e.selectedCls=e.baseCls+"-selected",e.disabledCellCls=e.baseCls+"-disabled",e.prevCls=
e.baseCls+"-prevday",e.activeCls=e.baseCls+"-active",e.cellCls=e.baseCls+"-cell",e.nextCls=e.baseCls+"-prevday",e.todayCls=e.baseCls+"-today",e.format||(e.format=Ext.Date.defaultFormat),e.dayNames||(e.dayNames=Ext.Date.dayNames),e.dayNames=e.dayNames.slice(e.startDay).concat(e.dayNames.slice(0,e.startDay)),e.callParent(),e.value=e.value?t(e.value,!0):t(new Date),e.addEvents("select"),e.initDisabledDays()},beforeRender:function(){var e=this,t=new Array(e.numDays),n=Ext.Date.format(new Date,e.format);e.up("menu")&&e.addCls(Ext.baseCSSPrefix+"menu"),e.padding&&!e.width&&e.cacheWidth(),e.monthBtn=new Ext.button.Split({ownerCt:e,ownerLayout:e.getComponentLayout(),text:"",tooltip:e.monthYearText,listeners:{click:e.doShowMonthPicker,arrowclick:e.doShowMonthPicker,scope:e}}),e.showToday&&(e.todayBtn=new Ext.button.Button({ownerCt:e,ownerLayout:e.getComponentLayout(),text:Ext.String.format(e.todayText,n),tooltip:Ext.String.format(e.todayTip,n),tooltipType:"title",handler:e.selectToday,scope:e})),e.callParent(),Ext.applyIf(e,{renderData:{}}),Ext.apply(e.renderData,{dayNames:e.dayNames,showToday:e.showToday,prevText:e.prevText,nextText:e.nextText,days:t}),e.protoEl.unselectable()},cacheWidth:function(){var e=this,t=e.parseBox(e.padding),n=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});e.self.prototype.width=n.getWidth()+t.left+t.right,n.remove()},finishRenderChildren:function(){var e=this;e.callParent(),e.monthBtn.finishRender(),e.showToday&&e.todayBtn.finishRender()},onRender:function(e,t){var n=this;n.callParent(arguments),n.cells=n.eventEl.select("tbody td"),n.textNodes=n.eventEl.query("tbody td a"),n.mon(n.eventEl,{scope:n,mousewheel:n.handleMouseWheel,click:{fn:n.handleDateClick,delegate:"a."+n.baseCls+"-date"}})},initEvents:function(){var e=this,t=Ext.Date,n=t.DAY;e.callParent(),e.prevRepeater=new Ext.util.ClickRepeater(e.prevEl,{handler:e.showPrevMonth,scope:e,preventDefault:!0,stopDefault:!0}),e.nextRepeater=new Ext.util.ClickRepeater(e.nextEl,{handler:e.showNextMonth,scope:e,preventDefault:!0,stopDefault:!0}),e.keyNav=new Ext.util.KeyNav(e.eventEl,Ext.apply({scope:e,left:function(r){r.ctrlKey?e.showPrevMonth():e.update(t.add(e.activeDate,n,-1))},right:function(r){r.ctrlKey?e.showNextMonth():e.update(t.add(e.activeDate,n,1))},up:function(r){r.ctrlKey?e.showNextYear():e.update(t.add(e.activeDate,n,-7))},down:function(r){r.ctrlKey?e.showPrevYear():e.update(t.add(e.activeDate,n,7))},pageUp:function(t){t.altKey?e.showPrevYear():e.showPrevMonth()},pageDown:function(t){t.altKey?e.showNextYear():e.showNextMonth()},tab:function(t){return e.doCancelFieldFocus=!0,e.handleTabClick(t),delete e.doCancelFieldFocus,!0},enter:function(e){return e.stopPropagation(),!0},home:function(n){e.update(t.getFirstDateOfMonth(e.activeDate))},end:function(n){e.update(t.getLastDateOfMonth(e.activeDate))}},e.keyNavConfig)),e.showToday&&(e.todayKeyListener=e.eventEl.addKeyListener(Ext.EventObject.SPACE,e.selectToday,e)),e.update(e.value)},handleTabClick:function(e){var t=this,n=t.getSelectedDate(t.activeDate),r=t.handler;!t.disabled&&n.dateValue&&!Ext.fly(n.parentNode).hasCls(t.disabledCellCls)&&(t.doCancelFocus=t.focusOnSelect===!1,t.setValue(new Date(n.dateValue)),delete t.doCancelFocus,t.fireEvent("select",t,t.value),r&&r.call(t.scope||t,t,t.value),t.onSelect())},getSelectedDate:function(e){var t=this,n=e.getTime(),r=t.cells,i=t.selectedCls,s=r.elements,o,u=s.length,a;r.removeCls(i);for(o=0;o<u;o++){a=Ext.fly(s[o]);if(a.dom.firstChild.dateValue==n)return a.dom.firstChild}return null},initDisabledDays:function(){var e=this,t=e.disabledDates,n="(?:",r,i,s,o;if(!e.disabledDatesRE&&t){r=t.length-1,s=t.length;for(i=0;i<s;i++)o=t[i],n+=Ext.isDate(o)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(o,e.format))+"$":o,i!=r&&(n+="|");e.disabledDatesRE=new RegExp(n+")")}},setDisabledDates:function(e){var t=this;return Ext.isArray(e)?(t.disabledDates=e,t.disabledDatesRE=null):t.disabledDatesRE=e,t.initDisabledDays(),t.update(t.value,!0),t},setDisabledDays:function(e){return this.disabledDays=e,this.update(this.value,!0)},setMinDate:function(e){return this.minDate=e,this.update(this.value,!0)},setMaxDate:function(e){return this.maxDate=e,this.update(this.value,!0)},setValue:function(e){return this.value=Ext.Date.clearTime(e,!0),this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(e){return e.substr(0,1)},focus:function(){this.update(this.activeDate)},onEnable:function(){this.callParent(),this.setDisabledStatus(!1),this.update(this.activeDate)},onDisable:function(){this.callParent(),this.setDisabledStatus(!0)},setDisabledStatus:function(e){var t=this;t.keyNav.setDisabled(e),t.prevRepeater.setDisabled(e),t.nextRepeater.setDisabled(e),t.showToday&&(t.todayKeyListener.setDisabled(e),t.todayBtn.setDisabled(e))},getActive:function(){return this.activeDate||this.value},runAnimation:function(e){var t=this.monthPicker,n={duration:200,callback:function(){e?t.hide():t.show()}};e?t.el.slideOut("t",n):t.el.slideIn("t",n)},hideMonthPicker:function(e){var t=this,n=t.monthPicker;return n&&(t.shouldAnimate(e)?t.runAnimation(!0):n.hide()),t},doShowMonthPicker:function(){this.showMonthPicker()},showMonthPicker:function(e){var t=this,n=t.el,r;return t.rendered&&!t.disabled&&(r=t.createMonthPicker(),r.setValue(t.getActive()),r.setSize(n.getSize()),r.setPosition(-n.getBorderWidth("l"),-n.getBorderWidth("t")),t.shouldAnimate(e)?t.runAnimation(!1):r.show()),t},shouldAnimate:function(e){return Ext.isDefined(e)?e:!this.disableAnim},createMonthPicker:function(){var e=this,t=e.monthPicker;return t||(e.monthPicker=t=new Ext.picker.Month({renderTo:e.el,floating:!0,padding:e.padding,shadow:!1,small:e.showToday===!1,listeners:{scope:e,cancelclick:e.onCancelClick,okclick:e.onOkClick,yeardblclick:e.onOkClick,monthdblclick:e.onOkClick}}),e.disableAnim||t.el.setStyle("display","none"),e.on("beforehide",Ext.Function.bind(e.hideMonthPicker,e,[!1]))),t},onOkClick:function(e,t){var n=this,r=t[0],i=t[1],s=new Date(i,r,n.getActive().getDate());s.getMonth()!==r&&(s=Ext.Date.getLastDateOfMonth(new Date(i,r,1))),n.setValue(s),n.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate),this.hideMonthPicker()},showPrevMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){e.stopEvent();if(!this.disabled){var t=e.getWheelDelta();t>0?this.showPrevMonth():t<0&&this.showNextMonth()}},handleDateClick:function(e,t){var n=this,r=n.handler;e.stopEvent(),!n.disabled&&t.dateValue&&!Ext.fly(t.parentNode).hasCls(n.disabledCellCls)&&(n.doCancelFocus=n.focusOnSelect===!1,n.setValue(new Date(t.dateValue)),delete n.doCancelFocus,n.fireEvent("select",n,n.value),r&&r.call(n.scope||n,n,n.value),n.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var e=this,t=e.todayBtn,n=e.handler;return t&&!t.disabled&&(e.setValue(Ext.Date.clearTime(new Date)),e.fireEvent("select",e,e.value),n&&n.call(e.scope||e,e,e.value),e.onSelect()),e},selectedUpdate:function(e){var t=this,n=e.getTime(),r=t.cells,i=t.selectedCls,s=r.elements,o,u=s.length,a;r.removeCls(i);for(o=0;o<u;o++){a=Ext.fly(s[o]);if(a.dom.firstChild.dateValue==n){t.fireEvent("highlightitem",t,a),a.addCls(i),t.isVisible()&&!t.doCancelFocus&&Ext.fly(a.dom.firstChild).focus(50);break}}},fullUpdate:function(e){var t=this,n=t.cells.elements,r=t.textNodes,i=t.disabledCellCls,s=Ext.Date,o=0,u=0,a=t.isVisible(),f=+s.clearTime(e,!0),l=+s.clearTime(new Date),c=t.minDate?s.clearTime(t.minDate,!0):Number.NEGATIVE_INFINITY,h=t.maxDate?s.clearTime(t.maxDate,!0):Number.POSITIVE_INFINITY,p=t.disabledDatesRE,d=t.disabledDatesText,v=t.disabledDays?t.disabledDays.join(""):!1,m=t.disabledDaysText,g=t.format,y=s.getDaysInMonth(e),b=s.getFirstDateOfMonth(e),w=b.getDay()-t.startDay,E=s.add(e,s.MONTH,-1),S=t.longDayFormat,x,T,N,C,k,L,A,O,M;w<0&&(w+=7),y+=w,x=s.getDaysInMonth(E)-w,T=new Date(E.getFullYear(),E.getMonth(),x,t.initHour),t.showToday&&(C=s.clearTime(new Date),N=C<c||C>h||p&&g&&p.test(s.dateFormat(C,g))||v&&v.indexOf(C.getDay())!=-1,t.disabled||(t.todayBtn.setDisabled(N),t.todayKeyListener.setDisabled(N))),k=function(e,n){M=+s.clearTime(T,!0),e.title=s.format(T,S),e.firstChild.dateValue=M,M==l&&(n+=" "+t.todayCls,e.title=t.todayText,t.todayElSpan=Ext.DomHelper.append(e.firstChild,{tag:"span",cls:Ext.baseCSSPrefix+"hide-clip",html:t.todayText},!0)),M==f&&(n+=" "+t.selectedCls,t.fireEvent("highlightitem",t,e),a&&t.floating&&Ext.fly(e.firstChild).focus(50)),M<c?(n+=" "+i,e.title=t.minText):M>h?(n+=" "+i,e.title=t.maxText):v&&v.indexOf(T.getDay())!==-1?(e.title=m,n+=" "+i):p&&g&&(O=s.dateFormat(T,g),p.test(O)&&(e.title=d.replace("%0",O),n+=" "+i)),e.className=n+" "+t.cellCls};for(;o<t.numDays;++o)o<w?(L=++x,A=t.prevCls):o>=y?(L=++u,A=t.nextCls):(L=o-w+1,A=t.activeCls),r[o].innerHTML=L,T.setDate(T.getDate()+1),k(n[o],A);t.monthBtn.setText(Ext.Date.format(e,t.monthYearFormat))},update:function(e,t){var n=this,r=n.activeDate;return n.rendered&&(n.activeDate=e,!t&&r&&n.el&&r.getMonth()==e.getMonth()&&r.getFullYear()==e.getFullYear()?n.selectedUpdate(e,r):n.fullUpdate(e,r)),n},beforeDestroy:function(){var e=this;e.rendered&&(Ext.destroy(e.todayKeyListener,e.keyNav,e.monthPicker,e.monthBtn,e.nextRepeater,e.prevRepeater,e.todayBtn),delete e.textNodes,delete e.cells.elements),e.callParent()},onShow:function(){this.callParent(arguments),this.focusOnShow&&this.focus()}}),Ext.define("Ext.form.field.Date",{extend:Ext.form.field.Picker,alias:"widget.datefield",alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:!0,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:!1,startDay:0,initComponent:function(){var e=this,t=Ext.isString,n,r;n=e.minValue,r=e.maxValue,t(n)&&(e.minValue=e.parseDate(n)),t(r)&&(e.maxValue=e.parseDate(r)),e.disabledDatesRE=null,e.initDisabledDays(),e.callParent()},initValue:function(){var e=this,t=e.value;Ext.isString(t)&&(e.value=e.rawToValue(t)),e.callParent()},initDisabledDays:function(){if(this.disabledDates){var e=this.disabledDates,t=e.length-1,n="(?:",r,i=e.length,s;for(r=0;r<i;r++)s=e[r],n+=Ext.isDate(s)?"^"+Ext.String.escapeRegex(s.dateFormat(this.format))+"$":s,r!==t&&(n+="|");this.disabledDatesRE=new RegExp(n+")")}},setDisabledDates:function(e){var t=this,n=t.picker;t.disabledDates=e,t.initDisabledDays(),n&&n.setDisabledDates(t.disabledDatesRE)},setDisabledDays:function(e){var t=this.picker;this.disabledDays=e,t&&t.setDisabledDays(e)},setMinValue:function(e){var t=this,n=t.picker,r=Ext.isString(e)?t.parseDate(e):e;t.minValue=r,n&&(n.minText=Ext.String.format(t.minText,t.formatDate(t.minValue)),n.setMinDate(r))},setMaxValue:function(e){var t=this,n=t.picker,r=Ext.isString(e)?t.parseDate(e):e;t.maxValue=r,n&&(n.maxText=Ext.String.format(t.maxText,t.formatDate(t.maxValue)),n.setMaxDate(r))},getErrors:function(e){var t=this,n=Ext.String.format,r=Ext.Date.clearTime,i=t.callParent(arguments),s=t.disabledDays,o=t.disabledDatesRE,u=t.minValue,a=t.maxValue,f=s?s.length:0,l=0,c,h,p,d;e=t.formatDate(e||t.processRawValue(t.getRawValue()));if(e===null||e.length<1)return i;c=e,e=t.parseDate(e);if(!e)return i.push(n(t.invalidText,c,Ext.Date.unescapeFormat(t.format))),i;d=e.getTime(),u&&d<r(u).getTime()&&i.push(n(t.minText,t.formatDate(u))),a&&d>r(a).getTime()&&i.push(n(t.maxText,t.formatDate(a)));if(s){p=e.getDay();for(;l<f;l++)if(p===s[l]){i.push(t.disabledDaysText);break}}return h=t.formatDate(e),o&&o.test(h)&&i.push(n(t.disabledDatesText,h)),i},rawToValue:function(e){return this.parseDate(e)||e||null},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},safeParse:function(e,t){var n=this,r=Ext.Date,i=null,s=n.useStrict,o;return r.formatContainsHourInfo(t)?i=r.parse(e,t,s):(o=r.parse(e+" "+n.initTime,t+" "+n.initTimeFormat,s),o&&(i=r.clearTime(o))),i},getSubmitValue:function(){var e=this.submitFormat||this.format,t=this.getValue();return t?Ext.Date.format(t,e):""},parseDate:function(e){if(!e||Ext.isDate(e))return e;var t=this,n=t.safeParse(e,t.format),r=t.altFormats,i=t.altFormatsArray,s=0,o;if(!n&&r){i=i||r.split("|"),o=i.length;for(;s<o&&!n;++s)n=t.safeParse(e,i[s])}return n},formatDate:function(e){return Ext.isDate(e)?Ext.Date.dateFormat(e,this.format):e},createPicker:function(){var e=this,t=Ext.String.format;return new Ext.picker.Date({pickerField:e,ownerCt:e.ownerCt,renderTo:document.body,floating:!0,hidden:!0,focusOnShow:!0,minDate:e.minValue,maxDate:e.maxValue,disabledDatesRE:e.disabledDatesRE,disabledDatesText:e.disabledDatesText,disabledDays:e.disabledDays,disabledDaysText:e.disabledDaysText,format:e.format,showToday:e.showToday,startDay:e.startDay,minText:t(e.minText,e.formatDate(e.minValue)),maxText:t(e.maxText,e.formatDate(e.maxValue)),listeners:{scope:e,select:e.onSelect},keyNavConfig:{esc:function(){e.collapse()}}})},onDownArrow:function(e){this.callParent(arguments),this.isExpanded&&this.getPicker().focus()},onSelect:function(e,t){var n=this;n.setValue(t),n.fireEvent("select",n,t),n.collapse()},onExpand:function(){var e=this.getValue();this.picker.setValue(Ext.isDate(e)?e:new Date)},onCollapse:function(){this.focus(!1,60)},beforeBlur:function(){var e=this,t=e.parseDate(e.getRawValue()),n=e.focusTask;n&&n.cancel(),t&&e.setValue(t)}}),Ext.define("Ext.form.field.FileButton",{extend:Ext.button.Button,alias:"widget.filebutton",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","fileInputEl"],inputCls:Ext.baseCSSPrefix+"form-file-input",cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:!1,renderTpl:['<span id="{id}-btnWrap" role="presentation" class="{baseCls}-wrap','<tpl if="splitCls"> {splitCls}</tpl>','{childElCls}" unselectable="on">','<span id="{id}-btnEl" class="{baseCls}-button" role="button">','<span id="{id}-btnInnerEl" class="{baseCls}-inner {innerCls}','{childElCls}" unselectable="on">',"{text}","</span>",'<span role="presentation" id="{id}-btnIconEl" class="{baseCls}-icon-el {iconCls}','{childElCls} {glyphCls}" unselectable="on" style="','<tpl if="iconUrl">background-image:url({iconUrl});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl>',"</span>","</span>","</span>",'<input id="{id}-fileInputEl" class="{childElCls} {inputCls}" type="file" size="1" name="{inputName}" role="{role}">'],getTemplateArgs:function(){var e=this.callParent();return e.inputCls=this.inputCls,e.inputName=this.inputName,e},afterRender:function(){var e=this;e.callParent(arguments),e.fileInputEl.on("change",e.fireChange,e)},fireChange:function(e){this.fireEvent("change",this,e,this.fileInputEl.dom.value)},createFileInput:function(e){var t=this;t.fileInputEl=t.el.createChild({name:t.inputName,id:e?undefined:t.id+"-fileInputEl",cls:t.inputCls,tag:"input",type:"file",size:1}),t.fileInputEl.on("change",t.fireChange,t)},reset:function(e){e&&this.fileInputEl.remove(),this.createFileInput(!e)},restoreInput:function(e){this.fileInputEl.remove(),e=Ext.get(e),this.el.appendChild(e),this.fileInputEl=e},onDisable:function(){this.callParent(),this.fileInputEl.dom.disabled=!0},onEnable:function(){this.callParent(),this.fileInputEl.dom.disabled=!1}}),Ext.define("Ext.form.field.File",{extend:Ext.form.field.Trigger,alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:!0,submitValue:!1,triggerNoEditCls:"",componentLayout:"triggerfield",childEls:["browseButtonWrap"],onRender:function(){var e=this,t=e.id,n;e.callParent(arguments),n=e.inputEl,n.dom.name="",e.button=new Ext.form.field.FileButton(Ext.apply({renderTo:t+"-browseButtonWrap",ownerCt:e,ownerLayout:e.componentLayout,id:t+"-button",ui:e.ui,disabled:e.disabled,text:e.buttonText,style:e.buttonOnly?"":e.getButtonMarginProp()+e.buttonMargin+"px",inputName:e.getName(),listeners:{scope:e,change:e.onFileChange}},e.buttonConfig)),e.fileInputEl=e.button.fileInputEl,e.buttonOnly&&e.inputCell.setDisplayed(!1),e.browseButtonWrap.dom.style.width=e.browseButtonWrap.dom.lastChild.offsetWidth+e.button.getEl().getMargin("lr")+"px",Ext.isIE&&e.button.getEl().repaint()},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" role="presentation"></td>'},onFileChange:function(e,t,n){this.duringFileSelect=!0,Ext.form.field.File.superclass.setValue.call(this,n),delete this.duringFileSelect},didValueChange:function(){return!!this.duringFileSelect},setValue:Ext.emptyFn,reset:function(){var e=this,t=e.clearOnSubmit;e.rendered&&(e.button.reset(t),e.fileInputEl=e.button.fileInputEl,t&&(e.inputEl.dom.value="",Ext.form.field.File.superclass.setValue.call(this,null))),e.callParent()},onShow:function(){this.callParent(),this.button.updateLayout()},onDisable:function(){this.callParent(),this.button.disable()},onEnable:function(){this.callParent(),this.button.enable()},isFileUpload:function(){return!0},extractFileInput:function(){var e=this,t;return e.rendered?(t=e.button.fileInputEl.dom,e.reset()):(t=document.createElement("input"),t.type="file",t.className=Ext.baseCSSPrefix+"hide-display",t.name=e.getName()),t},restoreInput:function(e){if(this.rendered){var t=this.button;t.restoreInput(e),this.fileInputEl=t.fileInputEl}},onDestroy:function(){Ext.destroyMembers(this,"button"),delete this.fileInputEl,this.callParent()},getButtonMarginProp:function(){return"margin-left:"}}),Ext.define("Ext.form.field.Hidden",{extend:Ext.form.field.Base,alias:["widget.hiddenfield","widget.hidden"],alternateClassName:"Ext.form.Hidden",inputType:"hidden",hideLabel:!0,hidden:!0,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden",this.callParent()},isEqual:function(e,t){return this.isEqualAsString(e,t)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.define("Ext.picker.Color",{extend:Ext.Component,alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",itemCls:Ext.baseCSSPrefix+"color-picker-item",value:null,clickEvent:"click",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var e=this;e.callParent(arguments),e.addEvents("select"),e.handler&&e.on("select",e.handler,e.scope,!0)},initRenderData:function(){var e=this;return Ext.apply(e.callParent(),{itemCls:e.itemCls,colors:e.colors})},onRender:function(){var e=this,t=e.clickEvent;e.callParent(arguments),e.mon(e.el,t,e.handleClick,e,{delegate:"a"}),t!="click"&&e.mon(e.el,"click",Ext.emptyFn,e,{delegate:"a",stopEvent:!0})},afterRender:function(){var e=this,t;e.callParent(arguments),e.value&&(t=e.value,e.value=null,e.select(t,!0))},handleClick:function(e,t){var n=this,r;e.stopEvent(),n.disabled||(r=t.className.match(n.colorRe)[1],n.select(r.toUpperCase()))},select:function(e,t){var n=this,r=n.selectedCls,i=n.value,s;e=e.replace("#","");if(!n.rendered){n.value=e;return}if(e!=i||n.allowReselect)s=n.el,n.value&&s.down("a.color-"+i).removeCls(r),s.down("a.color-"+e).addCls(r),n.value=e,t!==!0&&n.fireEvent("select",n,e)},clear:function(){var e=this,t=e.value,n;t&&e.rendered&&(n=e.el.down("a.color-"+t),n.removeCls(e.selectedCls)),e.value=null},getValue:function(){return this.value||null}}),Ext.define("Ext.layout.component.field.HtmlEditor",{extend:Ext.layout.component.field.FieldContainer,alias:["layout.htmleditor"],type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(e){var t=this.owner,n;Ext.isGecko&&(n=t.textareaEl.dom,this.lastValue=n.value,n.value=""),this.callParent(arguments),e.toolbarContext=e.context.getCmp(t.toolbar),e.inputCmpContext=e.context.getCmp(t.inputCmp),e.textAreaContext=e.getEl("textareaEl"),e.iframeContext=e.getEl("iframeEl")},beginLayoutCycle:function(e){var t=this,n=e.widthModel,r=e.heightModel,i=t.owner,s=i.iframeEl,o=i.textareaEl;t.callParent(arguments),n.shrinkWrap?(s.setStyle("width",""),o.setStyle("width","")):n.natural&&e.bodyCellContext.setWidth(t.naturalWidth);if(r.natural||r.shrinkWrap)s.setHeight(t.naturalHeight),o.setHeight(t.naturalHeight)},finishedLayout:function(){var e=this.owner;this.callParent(arguments),Ext.isIE9m&&Ext.isIEQuirks&&e.el.repaint(),Ext.isGecko&&(e.textareaEl.dom.value=this.lastValue)},publishOwnerWidth:function(e,t){this.callParent(arguments),t-=e.inputCmpContext.getBorderInfo().width,e.textAreaContext.setWidth(t),e.iframeContext.setWidth(t)},publishInnerWidth:function(e,t){var n=e.inputCmpContext.getBorderInfo().width,r=Ext.isStrict&&Ext.isIE8m,i=e.widthModel.natural;this.callParent(arguments),t=e.bodyCellContext.props.width-n,i?(r&&(t-=2),e.textAreaContext.setWidth(t),e.iframeContext.setWidth(t)):r&&e.textAreaContext.setWidth(t)},publishInnerHeight:function(e,t){var n=e.toolbarContext.getProp("height"),r=this.owner.sourceEditMode;this.callParent(arguments),t=e.bodyCellContext.props.height,n!==undefined?(t-=n+e.inputCmpContext.getFrameInfo().height,Ext.isIE8&&Ext.isStrict?t-=2:Ext.isIEQuirks&&(Ext.isIE8||Ext.isIE9)&&(t-=4),e.iframeContext.setHeight(t),e.textAreaContext.setHeight(t)):this.done=!1}}),Ext.define("Ext.form.field.HtmlEditor",{extend:Ext.form.FieldContainer,mixins:{field:Ext.form.field.Field},alias:"widget.htmleditor",alternateClassName:"Ext.form.HtmlEditor",componentLayout:"htmleditor",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" name="{name}" tabIndex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:!0}],stretchInputElFixed:!0,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",extraFieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",initialized:!1,activated:!1,sourceEditMode:!1,iframePad:3,hideMode:"offsets",maskOnDisable:!0,containerElCls:Ext.baseCSSPrefix+"html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,initComponent:function(){var e=this;e.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange"),e.items=[e.createToolbar(),e.createInputCmp()],e.layout={type:"vbox",align:"stretch"},e.callParent(arguments),e.initField()},createInputCmp:function(){return this.inputCmp=Ext.widget(this.getInputCmpCfg()),this.inputCmp},getInputCmpCfg:function(){var e=this,t=e.id+"-inputCmp",n={id:t,name:e.name,textareaCls:Ext.baseCSSPrefix+"hidden",value:e.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:Ext.baseCSSPrefix+"htmleditor-iframe"};return e.getInsertionRenderData(n,e.subTplInsertions),{flex:1,xtype:"component",tpl:e.getTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:t,cls:Ext.baseCSSPrefix+"html-editor-input",data:n}},createToolbar:function(){return this.toolbar=Ext.widget(this.getToolbarCfg()),this.toolbar},getToolbarCfg:function(){function u(t,n,s){return{itemId:t,cls:i+"btn-icon",iconCls:i+"edit-"+t,enableToggle:n!==!1,scope:e,handler:s||e.relayBtnCmd,clickEvent:"mousedown",tooltip:r?e.buttonTips[t]||o:o,overflowText:e.buttonTips[t].title||o,tabIndex:-1}}var e=this,t=[],n,r=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),i=Ext.baseCSSPrefix,s,o;e.enableFont&&!Ext.isSafari2&&(s=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" class="'+i+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){e.fontSelect=this.selectEl,Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var e=this.selectEl;e&&(e.dom.disabled=!0),Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var e=this.selectEl;e&&(e.dom.disabled=!1),Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){e.win.focus(),e.relayCmd("fontName",e.fontSelect.dom.value),e.deferFocus()},element:"selectEl"}}),t.push(s,"-")),e.enableFormat&&t.push(u("bold"),u("italic"),u("underline")),e.enableFontSize&&t.push("-",u("increasefontsize",!1,e.adjustFont),u("decreasefontsize",!1,e.adjustFont)),e.enableColors&&t.push("-",{itemId:"forecolor",cls:i+"btn-icon",iconCls:i+"edit-forecolor",overflowText:e.buttonTips.forecolor.title,tooltip:r?e.buttonTips.forecolor||o:o,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,clickEvent:"mousedown",handler:function(t,n){e.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+n:n),this.up("menu").hide()}}]})},{itemId:"backcolor",cls:i+"btn-icon",iconCls:i+"edit-backcolor",overflowText:e.buttonTips.backcolor.title,tooltip:r?e.buttonTips.backcolor||o:o,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,clickEvent:"mousedown",handler:function(t,n){Ext.isGecko?(e.execCmd("useCSS",!1),e.execCmd("hilitecolor","#"+n),e.execCmd("useCSS",!0),e.deferFocus()):e.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+n:n),this.up("menu").hide()}}]})}),e.enableAlignments&&t.push("-",u("justifyleft"),u("justifycenter"),u("justifyright")),Ext.isSafari2||(e.enableLinks&&t.push("-",u("createlink",!1,e.createLink)),e.enableLists&&t.push("-",u("insertorderedlist"),u("insertunorderedlist")),e.enableSourceEdit&&t.push("-",u("sourceedit",!0,function(t){e.toggleSourceEdit(!e.sourceEditMode)})));for(n=0;n<t.length;n++)t[n].itemId!=="sourceedit"&&(t[n].disabled=!0);return{xtype:"toolbar",defaultButtonUI:e.defaultButtonUI,cls:Ext.baseCSSPrefix+"html-editor-tb",enableOverflow:!0,items:t,listeners:{click:function(e){e.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(e){var t=this,n=t.textareaEl,r=t.iframeEl,i;t.readOnly=e,n&&(n.dom.readOnly=e),t.initialized&&(i=t.getEditorBody(),Ext.isIE?(r.setDisplayed(!1),i.contentEditable=!e,r.setDisplayed(!0)):t.setDesignMode(!e),i&&(i.style.cursor=e?"default":"text"),t.disableItems(e))},getDocMarkup:function(){var e=this,t=e.iframeEl.getHeight()-e.iframePad*2,n=Ext.isIE8m;return Ext.String.format((n?"":"<!DOCTYPE html>")+'<html><head><style type="text/css">'+(Ext.isOpera?"p{margin:0}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(e.rtl?"rtl;":"ltr;")+(n?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",e.iframePad,t,e.defaultFont)},getEditorBody:function(){var e=this.getDoc();return e.body||e.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var e=this,t=0,n,r,i,s,o,u,a;if(!e.defaultFont){r=e.textareaEl.getStyle("font-family"),r=Ext.String.capitalize(r.split(",")[0]),n=Ext.Array.clone(e.fontFamilies),Ext.Array.include(n,r),n.sort(),e.defaultFont=r,i=e.down("#fontSelect").selectEl.dom;for(o=0,u=n.length;o<u;++o)r=n[o],a=r.toLowerCase(),s=new Option(r,a),r==e.defaultFont&&(t=o),s.style.fontFamily=a,Ext.isIE?i.add(s):i.options.add(s);i.options[t].selected=!0}},isEqual:function(e,t){return this.isEqualAsString(e,t)},afterRender:function(){var e=this,t=e.inputCmp;e.callParent(arguments),e.iframeEl=t.iframeEl,e.textareaEl=t.textareaEl,e.inputEl=e.iframeEl,e.enableFont&&e.initDefaultFont(),e.monitorTask=Ext.TaskManager.start({run:e.checkDesignMode,scope:e,interval:100})},initFrameDoc:function(){var e=this,t,n;Ext.TaskManager.stop(e.monitorTask),t=e.getDoc(),e.win=e.getWin(),t.open(),t.write(e.getDocMarkup()),t.close(),n={run:function(){var t=e.getDoc();if(t.body||t.readyState==="complete")Ext.TaskManager.stop(n),e.setDesignMode(!0),Ext.defer(e.initEditor,10,e)},interval:10,duration:1e4,scope:e},Ext.TaskManager.start(n)},checkDesignMode:function(){var e=this,t=e.getDoc();t&&(!t.editorInitialized||e.getDesignMode()!=="on")&&e.initFrameDoc()},setDesignMode:function(e){var t=this,n=t.getDoc();n&&(t.readOnly&&(e=!1),n.designMode=/on|true/i.test(String(e).toLowerCase())?"on":"off")},getDesignMode:function(){var e=this.getDoc();return e?String(e.designMode).toLowerCase():""},disableItems:function(e){var t=this.getToolbar().items.items,n,r=t.length,i;for(n=0;n<r;n++)i=t[n],i.getItemId()!=="sourceedit"&&i.setDisabled(e)},toggleSourceEdit:function(e){var t=this,n=t.iframeEl,r=t.textareaEl,i=Ext.baseCSSPrefix+"hidden",s=t.getToolbar().getComponent("sourceedit");Ext.isBoolean(e)||(e=!t.sourceEditMode),t.sourceEditMode=e,s.pressed!==e&&s.toggle(e),e?(t.disableItems(!0),t.syncValue(),n.addCls(i),r.removeCls(i),r.dom.removeAttribute("tabIndex"),r.focus(),t.inputEl=r):(t.initialized&&t.disableItems(t.readOnly),t.pushValue(),n.removeCls(i),r.addCls(i),r.dom.setAttribute("tabIndex",-1),t.deferFocus(),t.inputEl=n),t.fireEvent("editmodechange",t,e),t.updateLayout()},createLink:function(){var e=prompt(this.createLinkText,this.defaultLinkValue);e&&e!=="http://"&&this.relayCmd("createlink",e)},clearInvalid:Ext.emptyFn,setValue:function(e){var t=this,n=t.textareaEl,r=t.inputCmp;if(e===null||e===undefined)e="";return n&&(n.dom.value=e),t.pushValue(),!t.rendered&&t.inputCmp&&(t.inputCmp.data.value=e),t.mixins.field.setValue.call(t,e),t},cleanHtml:function(e){return e=String(e),Ext.isWebKit&&(e=e.replace(/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,"")),e.charCodeAt(0)===parseInt(this.defaultValue.replace(/\D/g,""),10)&&(e=e.substring(1)),e},syncValue:function(){var e=this,t,n,r,i,s,o;e.initialized&&(t=e.getEditorBody(),r=t.innerHTML,o=e.textareaEl.dom,Ext.isWebKit&&(i=t.getAttribute("style"),s=i.match(/text-align:(.*?);/i),s&&s[1]&&(r='<div style="'+s[0]+'">'+r+"</div>")),r=e.cleanHtml(r),e.fireEvent("beforesync",e,r)!==!1&&(Ext.isGecko&&o.value===""&&r==="<br>"&&(r=""),o.value!==r&&(o.value=r,n=!0),e.fireEvent("sync",e,r),n&&e.checkChange()))},getValue:function(){var e=this,t;return e.sourceEditMode||e.syncValue(),t=e.rendered?e.textareaEl.dom.value:e.value,e.value=t,t},pushValue:function(){var e=this,t;e.initialized&&(t=e.textareaEl.dom.value||"",!e.activated&&t.length<1&&(t=e.defaultValue),e.fireEvent("beforepush",e,t)!==!1&&(e.getEditorBody().innerHTML=t,Ext.isGecko&&(e.setDesignMode(!1),e.setDesignMode(!0)),e.fireEvent("push",e,t)))},deferFocus:function(){this.focus(!1,!0)},getFocusEl:function(){var e=this,t=e.win;return t&&!e.sourceEditMode?t:e.textareaEl},focus:function(e,t){var n=this,r,i;return t?(n.focusTask||(n.focusTask=new Ext.util.DelayedTask(n.focus)),n.focusTask.delay(Ext.isNumber(t)?t:10,null,n,[e,!1])):(e&&(n.textareaEl&&n.textareaEl.dom&&(r=n.textareaEl.dom.value),r&&r.length&&n.execCmd("selectall",!0)),
i=n.getFocusEl(),i&&i.focus&&i.focus()),n},initEditor:function(){try{var e=this,t=e.getEditorBody(),n=e.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),r,i;n["background-attachment"]="fixed",t.bgProperties="fixed",Ext.DomHelper.applyStyles(t,n),r=e.getDoc();if(r)try{Ext.EventManager.removeAll(r)}catch(s){}i=Ext.Function.bind(e.onEditorEvent,e),Ext.EventManager.on(r,{mousedown:i,dblclick:i,click:i,keyup:i,buffer:100}),i=e.onRelayedEvent,Ext.EventManager.on(r,{mousedown:i,mousemove:i,mouseup:i,click:i,dblclick:i,scope:e}),Ext.isGecko&&Ext.EventManager.on(r,"keypress",e.applyCommand,e),e.fixKeys&&Ext.EventManager.on(r,"keydown",e.fixKeys,e),e.fixKeysAfter&&Ext.EventManager.on(r,"keyup",e.fixKeysAfter,e),Ext.isIE9&&Ext.isStrict&&Ext.EventManager.on(r.documentElement,"focus",e.focus,e);if(Ext.isIE8m||Ext.isIE9&&!Ext.isStrict)Ext.EventManager.on(r,"focusout",function(){e.savedSelection=r.selection.type!=="None"?r.selection.createRange():null},e),Ext.EventManager.on(r,"focusin",function(){e.savedSelection&&e.savedSelection.select()},e);Ext.EventManager.onWindowUnload(e.beforeDestroy,e),r.editorInitialized=!0,e.initialized=!0,e.pushValue(),e.setReadOnly(e.readOnly),e.fireEvent("initialize",e)}catch(o){}},beforeDestroy:function(){var e=this,t=e.monitorTask,n,r;t&&Ext.TaskManager.stop(t);if(e.rendered){Ext.EventManager.removeUnloadListener(e.beforeDestroy,e);try{n=e.getDoc();if(n){Ext.EventManager.removeAll(Ext.fly(n));for(r in n)n.hasOwnProperty&&n.hasOwnProperty(r)&&delete n[r]}}catch(i){}e.iframeEl.remove(),delete e.iframeEl,delete e.textareaEl,delete e.toolbar,delete e.inputCmp}e.callParent()},onRelayedEvent:function(e){var t=this.iframeEl,n=Ext.Element.getTrueXY(t),r=e.getXY(),i=Ext.EventManager.getPageXY(e.browserEvent);e.xy=[n[0]+i[0],n[1]+i[1]],e.injectEvent(t),e.xy=r},onFirstFocus:function(){var e=this,t,n;e.activated=!0,e.disableItems(e.readOnly);if(Ext.isGecko){e.win.focus(),t=e.win.getSelection(),t.focusNode&&!e.getValue().length&&(n=t.getRangeAt(0),n.selectNodeContents(e.getEditorBody()),n.collapse(!0),e.deferFocus());try{e.execCmd("useCSS",!0),e.execCmd("styleWithCSS",!1)}catch(r){}}e.fireEvent("activate",e)},adjustFont:function(e){var t=e.getItemId()==="increasefontsize"?1:-1,n=this.getDoc().queryCommandValue("FontSize")||"2",r=Ext.isString(n)&&n.indexOf("px")!==-1,i;n=parseInt(n,10),r?(n<=10?n=1+t:n<=13?n=2+t:n<=16?n=3+t:n<=18?n=4+t:n<=24?n=5+t:n=6+t,n=Ext.Number.constrain(n,1,6)):(i=Ext.isSafari,i&&(t*=2),n=Math.max(1,n+t)+(i?"px":0)),this.relayCmd("FontSize",n)},onEditorEvent:function(e){this.updateToolbar()},updateToolbar:function(){function f(){var e;for(t=0,n=arguments.length,s;t<n;t++){s=arguments[t];try{e=i.queryCommandState(s)}catch(o){e=!1}r[s].toggle(e)}}var e=this,t,n,r,i,s,o,u,a;if(e.readOnly)return;if(!e.activated){e.onFirstFocus();return}r=e.getToolbar().items.map,i=e.getDoc();if(e.enableFont&&!Ext.isSafari2){o=i.queryCommandValue("fontName"),s=(o?o.split(",")[0].replace(e.reStripQuotes,""):e.defaultFont).toLowerCase(),u=e.fontSelect.dom;if(s!==u.value||s!=o)u.value=s}e.enableFormat&&f("bold","italic","underline"),e.enableAlignments&&f("justifyleft","justifycenter","justifyright"),!Ext.isSafari2&&e.enableLists&&f("insertorderedlist","insertunorderedlist"),a=e.toolbar.query("menu");for(t=0;t<a.length;t++)a[t].hide();e.syncValue()},relayBtnCmd:function(e){this.relayCmd(e.getItemId())},relayCmd:function(e,t){Ext.defer(function(){var n=this;this.isDestroyed||(n.win.focus(),n.execCmd(e,t),n.updateToolbar())},10,this)},execCmd:function(e,t){var n=this,r=n.getDoc();r.execCommand(e,!1,t==undefined?null:t),n.syncValue()},applyCommand:function(e){if(e.ctrlKey){var t=this,n=e.getCharCode(),r;if(n>0){n=String.fromCharCode(n);switch(n){case"b":r="bold";break;case"i":r="italic";break;case"u":r="underline"}r&&(t.win.focus(),t.execCmd(r),t.deferFocus(),e.preventDefault())}}},insertAtCursor:function(e){var t=this,n;t.activated&&(t.win.focus(),Ext.isIE?(n=t.getDoc().selection.createRange(),n&&(n.pasteHTML(e),t.syncValue(),t.deferFocus())):(t.execCmd("InsertHTML",e),t.deferFocus()))},fixKeys:function(){return Ext.isIE?function(e){var t=this,n=e.getKey(),r=t.getDoc(),i=t.readOnly,s,o;if(n===e.TAB)e.stopEvent(),i||(s=r.selection.createRange(),s&&(s.collapse&&(s.collapse(!0),s.pasteHTML("&#160;&#160;&#160;&#160;")),t.deferFocus()));else if(n===e.ENTER&&!i){s=r.selection.createRange();if(s){o=s.parentElement();if(!o||o.tagName.toLowerCase()!=="li")e.stopEvent(),s.pasteHTML("<br />"),s.collapse(!1),s.select()}}}:Ext.isOpera?function(e){var t=this,n=e.getKey(),r=t.readOnly;n===e.TAB&&(e.stopEvent(),r||(t.win.focus(),t.execCmd("InsertHTML","&#160;&#160;&#160;&#160;"),t.deferFocus()))}:null}(),fixKeysAfter:function(){return Ext.isIE?function(e){var t=this,n=e.getKey(),r=t.getDoc(),i=t.readOnly,s;if(!i&&(n===e.BACKSPACE||n===e.DELETE)){s=r.body.innerHTML;if(s==="<p>&nbsp;</p>"||s==="<P>&nbsp;</P>")r.body.innerHTML=""}}:null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}}),Ext.define("Ext.picker.Time",{extend:Ext.view.BoundList,alias:"widget.timepicker",increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadMask:!1,initComponent:function(){var e=this,t=Ext.Date,n=t.clearTime,r=e.initDate;e.absMin=n(new Date(r[0],r[1],r[2])),e.absMax=t.add(n(new Date(r[0],r[1],r[2])),"mi",1439),e.store=e.createStore(),e.store.addFilter(e.rangeFilter=new Ext.util.Filter({id:"time-picker-filter"}),!1),e.updateList(),e.callParent()},setMinValue:function(e){this.minValue=e,this.updateList()},setMaxValue:function(e){this.maxValue=e,this.updateList()},normalizeDate:function(e){var t=this.initDate;return e.setFullYear(t[0],t[1],t[2]),e},updateList:function(){var e=this,t=e.normalizeDate(e.minValue||e.absMin),n=e.normalizeDate(e.maxValue||e.absMax);e.rangeFilter.setFilterFn(function(e){var r=e.get("date");return r>=t&&r<=n}),e.store.filter()},createStore:function(){var e=this,t=Ext.Date,n=[],r=e.absMin,i=e.absMax;while(r<=i)n.push({disp:t.dateFormat(r,e.format),date:r}),r=t.add(r,"mi",e.increment);return new Ext.data.Store({fields:["disp","date"],data:n})},focusNode:function(e){return!1}}),Ext.define("Ext.form.field.Time",{extend:Ext.form.field.ComboBox,alias:"widget.timefield",alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:!0,snapToIncrement:!1,initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",ignoreSelection:0,queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var e=this,t=e.minValue,n=e.maxValue;t&&e.setMinValue(t),n&&e.setMaxValue(n),e.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+e.displayField+'"])]}'+'<tpl if="xindex < xcount">'+e.delimiter+"</tpl>"+"</tpl>",{formatDate:Ext.Function.bind(e.formatDate,e)}),this.callParent()},transformOriginalValue:function(e){return Ext.isDefined(e)?this.rawToValue(e)||e||null:e},isEqual:function(e,t){var n=Ext.Array.from,r=Ext.Date.isEqual,i,s;e=n(e),t=n(t),s=e.length;if(s!==t.length)return!1;for(i=0;i<s;i++)if(!r(t[i],e[i]))return!1;return!0},setMinValue:function(e){var t=this,n=t.picker;t.setLimit(e,!0),n&&n.setMinValue(t.minValue)},setMaxValue:function(e){var t=this,n=t.picker;t.setLimit(e,!1),n&&n.setMaxValue(t.maxValue)},setLimit:function(e,t){var n=this,r,i;Ext.isString(e)?r=n.parseDate(e):Ext.isDate(e)&&(r=e),r?(i=n.getInitDate(),i.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())):i=null,n[t?"minValue":"maxValue"]=i},getInitDate:function(e,t){var n=this.initDateParts;return new Date(n[0],n[1],n[2],e||0,t||0,0,0)},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},getErrors:function(e){var t=this,n=Ext.String.format,r=t.callParent(arguments),i=t.minValue,s=t.maxValue,o=t.displayTplData,u=t.getRawValue(),a,f,l,c;if(o&&o.length>0)for(a=0,f=o.length;a<f;a++){c=o[a],c=c.date||c.disp,l=t.parseDate(c);if(!l){r.push(n(t.invalidText,c,Ext.Date.unescapeFormat(t.format)));continue}i&&l<i&&r.push(n(t.minText,t.formatDate(i))),s&&l>s&&r.push(n(t.maxText,t.formatDate(s)))}else u.length&&!t.parseDate(u)&&r.push(n(t.invalidText,u,Ext.Date.unescapeFormat(t.format)));return r},formatDate:function(e){var t=[],n,r;e=Ext.Array.from(e);for(n=0,r=e.length;n<r;n++)t.push(Ext.form.field.Date.prototype.formatDate.call(this,e[n]));return t.join(this.delimiter)},parseDate:function(e){var t=this,n=e,r=t.altFormats,i=t.altFormatsArray,s=0,o;if(e&&!Ext.isDate(e)){n=t.safeParse(e,t.format);if(!n&&r){i=i||r.split("|"),o=i.length;for(;s<o&&!n;++s)n=t.safeParse(e,i[s])}}return n&&t.snapToIncrement&&(n=new Date(Ext.Number.snap(n.getTime(),t.increment*60*1e3))),n},safeParse:function(e,t){var n=this,r=Ext.Date,i,s=null;return r.formatContainsDateInfo(t)?s=r.parse(e,t):(i=r.parse(n.initDate+" "+e,n.initDateFormat+" "+t),i&&(s=i)),s},getSubmitValue:function(){var e=this,t=e.submitFormat||e.format,n=e.getValue();return n?Ext.Date.format(n,t):null},createPicker:function(){var e=this,t;return e.listConfig=Ext.apply({xtype:"timepicker",selModel:{mode:e.multiSelect?"SIMPLE":"SINGLE"},cls:undefined,minValue:e.minValue,maxValue:e.maxValue,increment:e.increment,format:e.format,maxHeight:e.pickerMaxHeight},e.listConfig),t=e.callParent(),e.bindStore(t.store),t},onItemClick:function(e,t){var n=this,r=e.getSelectionModel().getSelection();!n.multiSelect&&r.length&&r.length>0&&(r=r[0],r&&Ext.Date.isEqual(t.get("date"),r.get("date"))&&n.collapse())},syncSelection:function(){var e=this,t=e.picker,n=Ext.Date.isEqual,r=[],i,s,o,u,a,f,l,c,h,p;if(t){t.clearHighlight(),s=e.getValue(),i=t.getSelectionModel(),e.ignoreSelection++;if(s===null)i.deselectAll();else{o=Ext.Array.from(s),l=t.store.data.items,h=l.length;for(u=0,a=o.length;u<a;u++){f=o[u];if(Ext.isDate(f)){for(c=0;c<h;c++){p=l[c];if(n(p.get("date"),f)){r.push(p);if(!e.multiSelect)break}}i.select(r)}}}e.ignoreSelection--}},postBlur:function(){var e=this,t=e.getValue();e.callParent(arguments),e.validateValue(t)&&e.setValue(t)},findRecordByValue:function(e){return typeof e=="string"&&(e=this.parseDate(e)),this.callParent([e])},rawToValue:function(e){var t=this,n,r,i,s;if(t.multiSelect){r=[],n=Ext.Array.from(e);for(i=0,s=n.length;i<s;i++)r.push(t.parseDate(n[i]));return r}return t.parseDate(e)},setValue:function(e){return this.getPicker(),Ext.isDate(e)&&(e=this.getInitDate(e.getHours(),e.getMinutes())),this.callParent([e])},getValue:function(){return this.rawToValue(this.callParent(arguments))}}),Ext.define("Ext.grid.CellContext",{isCellContext:!0,constructor:function(e){this.view=e},isEqual:function(e){return e?this.record===e.record&&this.columnHeader===e.columnHeader:!1},setPosition:function(e,t){var n=this;return arguments.length===1&&(e.view&&(n.view=e.view),t=e.column,e=e.row),n.setRow(e),n.setColumn(t),n},setRow:function(e){var t=this;e!==undefined&&(typeof e=="number"?(t.row=Math.max(Math.min(e,t.view.dataSource.getCount()-1),0),t.record=t.view.dataSource.getAt(e)):e.isModel?(t.record=e,t.row=t.view.indexOf(e)):e.tagName&&(t.record=t.view.getRecord(e),t.row=t.view.indexOf(t.record)))},setColumn:function(e){var t=this,n=t.view.ownerCt.getColumnManager();e!==undefined&&(typeof e=="number"?(t.column=e,t.columnHeader=n.getHeaderAtIndex(e)):e.isHeader&&(t.columnHeader=e,t.column=n.getHeaderIndex(e)))}}),Ext.define("Ext.grid.CellEditor",{extend:Ext.Editor,constructor:function(e){e=Ext.apply({},e),e.field&&(e.field.monitorTab=!1),this.callParent([e])},onShow:function(){var e=this,t=e.boundEl.first();t&&(e.isForTree&&(t=t.child(e.treeNodeSelector)),t.hide()),e.callParent(arguments)},onHide:function(){var e=this,t=e.boundEl.first();t&&(e.isForTree&&(t=t.child(e.treeNodeSelector)),t.show()),e.callParent(arguments)},afterRender:function(){var e=this,t=e.field;e.callParent(arguments),t.isCheckbox&&t.mon(t.inputEl,{mousedown:e.onCheckBoxMouseDown,click:e.onCheckBoxClick,scope:e})},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit,this.field.focus(!1,10)},realign:function(e){var t=this,n=t.boundEl,r=n.first(),i=r.dom.firstChild,s=n.getWidth(),o=Ext.Array.clone(t.offsets),u=t.grid,a,f="",l=!i||i.nodeType===3&&!Ext.String.trim(f=i.data).length;t.isForTree&&(a=t.getTreeNodeOffset(r),s-=Math.abs(a),o[0]+=a),u.columnLines&&(s-=n.getBorderWidth("rl")),e===!0&&t.field.setWidth(s),l&&(r.dom.innerHTML="X"),t.alignTo(r,t.alignment,o),l&&(r.dom.firstChild.data=f)},getTreeNodeOffset:function(e){return e.child(this.treeNodeSelector).getOffsetsTo(e)[0]},onEditorTab:function(e){var t=this.field;t.onEditorTab&&t.onEditorTab(e)},onFieldBlur:function(){this.callParent(arguments),this.selectSameEditor=!1},alignment:"l-l",hideEl:!1,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-cell-editor",treeNodeSelector:"."+Ext.baseCSSPrefix+"tree-node-text",shim:!1,shadow:!1}),Ext.define("Ext.grid.ColumnComponentLayout",{extend:Ext.layout.component.Auto,alias:"layout.columncomponent",type:"columncomponent",setWidthInDom:!0,beginLayout:function(e){this.callParent(arguments),e.titleContext=e.getEl("titleEl"),e.triggerContext=e.getEl("triggerEl")},beginLayoutCycle:function(e){var t=this.owner;this.callParent(arguments),e.widthModel.shrinkWrap&&t.el.setWidth(""),t.titleEl.setStyle({paddingTop:"",paddingBottom:""})},publishInnerHeight:function(e,t){if(!t)return;var n=this,r=n.owner,i=t-e.getBorderInfo().height,s=i,o,u,a,f;if(!r.noWrap&&!e.hasDomProp("width")){n.done=!1;return}e.hasRawContent?(u=s,o=r.textEl.getHeight(),o&&(s-=o,s>0&&(a=Math.floor(s/2),f=s-a,e.titleContext.setProp("padding-top",a),e.titleContext.setProp("padding-bottom",f)))):(u=r.titleEl.getHeight(),e.setProp("innerHeight",i-u,!1)),(Ext.isIE6||Ext.isIEQuirks)&&e.triggerContext&&e.triggerContext.setHeight(u)},measureContentHeight:function(e){return e.el.dom.offsetHeight},publishOwnerHeight:function(e,t){this.callParent(arguments),(Ext.isIE6||Ext.isIEQuirks)&&e.triggerContext&&e.triggerContext.setHeight(t)},publishInnerWidth:function(e,t){e.hasRawContent||e.setProp("innerWidth",t-e.getBorderInfo().width,!1)},calculateOwnerHeightFromContentHeight:function(e,t){var n=this.callParent(arguments);return e.hasRawContent?n:this.owner.noWrap||e.hasDomProp("width")?t+this.owner.titleEl.getHeight()+e.getBorderInfo().height:null},calculateOwnerWidthFromContentWidth:function(e,t){var n=this.owner,r=e.getPaddingInfo().width,i=this.getTriggerOffset(n,e),s;return n.isGroupHeader?s=t:s=Math.max(t,n.textEl.getWidth()+e.titleContext.getPaddingInfo().width),s+r+i},getTriggerOffset:function(e,t){var n=0;return t.widthModel.shrinkWrap&&!e.menuDisabled&&e.query(">:not([hidden])").length===0&&(n=e.self.triggerElWidth),n}}),Ext.define("Ext.grid.ColumnLayout",{extend:Ext.layout.container.HBox,alias:"layout.gridcolumn",type:"gridcolumn",reserveOffset:!1,firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){var e=this;e.scrollbarWidth===undefined&&(e.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width),e.grid=this.owner.up("[scrollerOwner]"),e.callParent()},beginLayout:function(e){var t=this,n=t.owner,r=t.grid,i=r.view,s=t.getVisibleItems(),o=s.length,u=t.firstHeaderCls,a=t.lastHeaderCls,f=[u,a],l,c;r.lockable&&(n.up("tablepanel")===i.normalGrid?i=i.normalGrid.getView():i=null);for(l=0;l<o;l++)c=s[l],c.removeCls(f),l===0&&c.addCls(u),l===o-1&&c.addCls(a);t.callParent(arguments),!n.isColumn&&t.scrollbarWidth&&!r.collapsed&&i&&i.rendered&&(e.viewTable=i.body.dom)&&(e.viewContext=e.context.getCmp(i))},roundFlex:function(e){return Math.floor(e)},calculate:function(e){this.callParent(arguments),e.state.parallelDone&&e.setProp("columnWidthsDone",!0),e.viewContext&&(e.state.tableHeight=e.viewTable.offsetHeight)},completeLayout:function(e){var t=this,n=t.owner,r=e.state;t.callParent(arguments),!e.flexedItems.length&&!r.flexesCalculated&&n.forceFit&&t.convertWidthsToFlexes(e)?(t.cacheFlexes(e),e.invalidate({state:{flexesCalculated:!0}})):e.setProp("columnWidthsDone",!0)},convertWidthsToFlexes:function(e){var t=this,n=0,r=t.sizeModels.calculated,i,s,o,u,a;i=e.childItems,s=i.length;for(o=0;o<s;o++)u=i[o],a=u.target,n+=u.props.width,!a.fixed&&a.resizable!==!1&&(a.flex=e.childItems[o].flex=u.props.width,a.width=null,u.widthModel=r);return n!==e.props.width},getContainerSize:function(e){var t=this,n,r=e.viewContext,i;return t.owner.isColumn?n=t.getColumnContainerSize(e):(n=t.callParent(arguments),r&&!r.heightModel.shrinkWrap&&r.target.componentLayout.ownerContext&&(i=r.getProp("height"),isNaN(i)?t.done=!1:e.state.tableHeight>i&&(n.width-=t.scrollbarWidth,e.state.parallelDone=!1,r.invalidate()))),n},getColumnContainerSize:function(e){var t=e.paddingContext.getPaddingInfo(),n=0,r=0,i,s,o,u;return e.widthModel.shrinkWrap||(++r,o=e.getProp("innerWidth"),i=typeof o=="number",i&&(++n,o-=t.width,o<0&&(o=0))),e.heightModel.shrinkWrap||(++r,u=e.getProp("innerHeight"),s=typeof u=="number",s&&(++n,u-=t.height,u<0&&(u=0))),{width:o,height:u,needed:r,got:n,gotAll:n==r,gotWidth:i,gotHeight:s}},publishInnerCtSize:function(e){var t=this,n=e.state.boxPlan.targetSize,r=e.peek("contentWidth"),i;return t.owner.tooNarrow=e.state.boxPlan.tooNarrow,r!=null&&!t.owner.isColumn&&(n.width=r,i=t.owner.ownerCt.view,i.scrollFlags.y&&(n.width+=t.scrollbarWidth)),t.callParent(arguments)}}),Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(e,t,n){this.headerCt=t,n&&(this.secondHeaderCt=n),this.visibleOnly=!!e},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},getHeaderIndex:function(e){return e.isGroupHeader&&(e=this.getHeaderColumns(e)[0]),Ext.Array.indexOf(this.getColumns(),e)},getHeaderAtIndex:function(e){var t=this.getColumns(),n=t[e];return n||null},getPreviousSibling:function(e){var t=this.getHeaderIndex(e),n=null;return t>0&&(n=this.getColumns()[t-1]),n},getNextSibling:function(e){var t=this.getHeaderIndex(e),n;return t!==-1&&(n=this.getColumns()[t+1]),n||null},getFirst:function(){var e=this.getColumns();return e.length>0?e[0]:null},getLast:function(){var e=this.getColumns(),t=e.length;return t>0?e[t-1]:null},getHeaderById:function(e){var t=this.getColumns(),n=t.length,r,i;for(r=0;r<n;++r){i=t[r];if(i.getItemId()===e)return i}return null},getVisibleHeaderClosestToIndex:function(e){var t=this.getHeaderAtIndex(e);return t&&t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])")),t},cacheColumns:function(){var e=this.getHeaderColumns(this.headerCt),t=this.secondHeaderCt;t&&(e=e.concat(this.getHeaderColumns(t))),this.columns=e},getHeaderColumns:function(e){var t=this.visibleOnly?e.getVisibleGridColumns():e.getGridColumns();return Ext.Array.clone(t)},invalidate:function(){var e=this.rootColumns;this.columns=null,e&&e.invalidate()},destroy:function(){this.columns=this.rootColumns=null}},function(){this.createAlias("indexOf","getHeaderIndex")}),Ext.define("Ext.layout.container.Fit",{extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit",defaultMargins:{top:0,right:0,bottom:0,left:0},manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e,t){var n=t||this.owner.getSizeModel(),r=(n.width.shrinkWrap?0:1)|(n.height.shrinkWrap?0:2);return this.sizePolicies[r]},beginLayoutCycle:function(e,t){var n=this,r=n.lastHeightModel&&n.lastHeightModel.calculated,i=n.lastWidthModel&&n.lastWidthModel.calculated,s=i||r,o=0,u=0,a,f,l,c,h,p,d,v,m,g;n.callParent(arguments),s&&e.targetContext.el.dom.tagName.toUpperCase()!="TD"&&(s=i=r=!1),f=e.childItems,h=f.length;for(l=0;l<h;++l){c=f[l];if(t){a=c.target,d=a.minHeight,v=a.minWidth;if(v||d)p=c.marginInfo||c.getMarginInfo(),d+=p.height,v+=p.height,o<d&&(o=d),u<v&&(u=v)}s&&(m=c.el.dom.style,r&&(m.height=""),i&&(m.width=""))}t&&(e.maxChildMinHeight=o,e.maxChildMinWidth=u),a=e.target,e.overflowX=!e.widthModel.shrinkWrap&&e.maxChildMinWidth&&a.scrollFlags.x||g,e.overflowY=!e.heightModel.shrinkWrap&&e.maxChildMinHeight&&a.scrollFlags.y||g},calculate:function(e){var t=this,n=e.childItems,r=n.length,i=t.getContainerSize(e),s={length:r,ownerContext:e,targetSize:i},o=e.widthModel.shrinkWrap,u=e.heightModel.shrinkWrap,a=e.overflowX,f=e.overflowY,l,c,h,p,d,v;if(a||f)l=t.getScrollbarsNeeded(a&&i.width,f&&i.height,e.maxChildMinWidth,e.maxChildMinHeight),l&&(c=Ext.getScrollbarSize(),l&1&&(i.height-=c.height),l&2&&(i.width-=c.width));for(p=0;p<r;++p)s.index=p,t.fitItem(n[p],s);if(u||o)h=e.targetContext.getPaddingInfo(),o&&(f&&!i.gotHeight?t.done=!1:(d=s.contentWidth+h.width,l&2&&(d+=c.width),e.setContentWidth(d)||(t.done=!1))),u&&(a&&!i.gotWidth?t.done=!1:(v=s.contentHeight+h.height,l&1&&(v+=c.height),e.setContentHeight(v)||(t.done=!1)))},fitItem:function(e,t){var n=this;if(e.invalid){n.done=!1;return}t.margins=e.getMarginInfo(),t.needed=t.got=0,n.fitItemWidth(e,t),n.fitItemHeight(e,t),t.got!=t.needed&&(n.done=!1)},fitItemWidth:function(e,t){var n,r;t.ownerContext.widthModel.shrinkWrap?(r=e.getProp("width")+t.margins.width,n=t.contentWidth,n===undefined?t.contentWidth=r:t.contentWidth=Math.max(n,r)):e.widthModel.calculated&&(++t.needed,t.targetSize.gotWidth&&(++t.got,this.setItemWidth(e,t))),this.positionItemX(e,t)},fitItemHeight:function(e,t){var n,r;t.ownerContext.heightModel.shrinkWrap?(r=e.getProp("height")+t.margins.height,n=t.contentHeight,n===undefined?t.contentHeight=r:t.contentHeight=Math.max(n,r)):e.heightModel.calculated&&(++t.needed,t.targetSize.gotHeight&&(++t.got,this.setItemHeight(e,t))),this.positionItemY(e,t)},positionItemX:function(e,t){var n=t.margins;(t.index||n.left)&&e.setProp("x",n.left),n.width&&e.setProp("margin-right",n.width)},positionItemY:function(e,t){var n=t.margins;(t.index||n.top)&&e.setProp("y",n.top),n.height&&e.setProp("margin-bottom",n.height)},setItemHeight:function(e,t){e.setHeight(t.targetSize.height-t.margins.height)},setItemWidth:function(e,t){e.setWidth(t.targetSize.width-t.margins.width)}}),Ext.define("Ext.panel.Table",{extend:Ext.panel.Panel,alias:"widget.tablepanel",extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:!1,viewType:null,selType:"rowmodel",scroll:!0,deferRowRender:!0,sortableColumns:!0,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,rowLines:!0,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",initComponent:function(){var e=this,t=e.columns||e.colModel,n,r,i,s=e.store=Ext.data.StoreManager.lookup(e.store||"ext-empty-store"),o;e.columnLines&&e.addBodyCls(e.colLinesCls),e.addBodyCls(e.rowLines?e.rowLinesCls:e.noRowLinesCls),e.addBodyCls(e.extraBodyCls),t.isRootHeader?(e.headerCt=t,e.headerCt.forceFit=!!e.forceFit,e.columnManager=t.columnManager,e.visibleColumnManager=t.visibleColumnManager):e.enableLocking||e.hasLockedColumns(t)?(e.self.mixin("lockable",Ext.grid.locking.Lockable),e.injectLockable()):(Ext.isArray(t)&&(t={items:t}),Ext.apply(t,{grid:e,forceFit:e.forceFit,sortable:e.sortableColumns,enableColumnMove:e.enableColumnMove,enableColumnResize:e.enableColumnResize,sealed:e.sealedColumns}),Ext.isDefined(e.enableColumnHide)&&(t.enableColumnHide=e.enableColumnHide),e.headerCt||(e.headerCt=new Ext.grid.header.Container(t))),e.columns=o=e.headerCt.getGridColumns(),e.scrollTask=new Ext.util.DelayedTask(e.syncHorizontalScroll,e),e.addEvents("reconfigure","viewready"),e.cls=e.cls||""+(" "+e.extraBaseCls),delete e.autoScroll;if(!e.hasView){if(s.buffered&&!s.remoteSort)for(r=0,i=o.length;r<i;r++)o[r].sortable=!1;e.hideHeaders&&(e.headerCt.height=0,e.headerCt.hiddenHeaders=!0,e.headerCt.addCls(e.hiddenHeaderCtCls),e.addCls(e.hiddenHeaderCls),Ext.isIEQuirks&&(e.headerCt.style={display:"none"})),e.relayHeaderCtEvents(e.headerCt),e.features=e.features||[],Ext.isArray(e.features)||(e.features=[e.features]),e.dockedItems=[].concat(e.dockedItems||[]),e.dockedItems.unshift(e.headerCt),e.viewConfig=e.viewConfig||{},n=e.getView(),e.items=[n],e.hasView=!0,e.hideHeaders||n.on({scroll:{fn:e.onHorizontalScroll,element:"el",scope:e}}),e.bindStore(s,!0),e.mon(n,{viewready:e.onViewReady,refresh:e.onRestoreHorzScroll,scope:e})}e.relayEvents(e.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","beforeitemkeydown","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermousedown","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","select","beforedeselect","deselect"]),e.callParent(arguments),e.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"]),!e.lockable&&e.headerCt&&e.headerCt.on("afterlayout",e.onRestoreHorzScroll,e)},hasLockedColumns:function(e){var t,n,r;Ext.isObject(e)&&(e=e.items);for(t=0,n=e.length;t<n;t++){r=e[t];if(!r.processed&&r.locked)return!0}},relayHeaderCtEvents:function(e){this.relayEvents(e,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var e=this,t=e.callParent(),n=e.store.getState();return t=e.addPropertyToState(t,"columns",e.headerCt.getColumnsState()),n&&(t.storeState=n),t},applyState:function(e){var t=this,n=e.sort,r=e.storeState,i=t.store,s=e.columns;delete e.columns,t.callParent(arguments),s&&t.headerCt.applyColumnsState(s),n?i.remoteSort?i.sort({property:n.property,direction:n.direction,root:n.root},null,!1):i.sort(n.property,n.direction):r&&i.applyState(r)},getStore:function(){return this.store},getView:function(){var e=this,t;return e.view||(t=e.getSelectionModel(),Ext.widget(Ext.apply({grid:e,deferInitialRefresh:e.deferRowRender!==!1,trackOver:e.trackMouseOver!==!1,scroll:e.scroll,xtype:e.viewType,store:e.store,headerCt:e.headerCt,columnLines:e.columnLines,rowLines:e.rowLines,selModel:t,features:e.features,panel:e,emptyText:e.emptyText||""},e.viewConfig)),e.view.emptyText&&(e.view.emptyText='<div class="'+e.emptyCls+'">'+e.view.emptyText+"</div>"),e.view.getComponentLayout().headerCt=e.headerCt,e.mon(e.view,{uievent:e.processEvent,scope:e}),t.view=e.view,e.headerCt.view=e.view),e.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){var e=this.ownerLockable;return e?e.getColumnManager():this.getColumnManager()},getTopLevelVisibleColumnManager:function(){var e=this.ownerLockable;return e?e.getVisibleColumnManager():this.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,processEvent:function(e,t,n,r,i,s,o,u){var a=this,f;if(i!==-1)return f=a.getColumnManager().getHeaderAtIndex(i),f.processEvent.apply(f,arguments)},determineScrollbars:function(){},invalidateScroller:function(){},scrollByDeltaY:function(e,t){this.getView().scrollBy(0,e,t)},scrollByDeltaX:function(e,t){this.getView().scrollBy(e,0,t)},afterCollapse:function(){this.saveScrollPos(),this.callParent(arguments)},afterExpand:function(){this.callParent(arguments),this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){this.delayScroll()},onHeaderMove:function(e,t,n,r,i){var s=this;s.optimizedColumnMove===!1?s.view.refresh():s.view.moveColumn(r,i,n),s.delayScroll()},onHeaderHide:function(e,t){this.view.refresh(),this.delayScroll()},onHeaderShow:function(e,t){this.view.refresh(),this.delayScroll()},onHeadersChanged:function(e,t){var n=this;n.rendered&&!n.reconfiguring&&(n.view.refresh(),n.delayScroll())},delayScroll:function(){var e=this.getScrollTarget().el;e&&this.scrollTask.delay(10,null,null,[e.dom.scrollLeft])},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var e=this.scrollLeftPos;e&&this.syncHorizontalScroll(e,!0)},getScrollerOwner:function(){var e=this;return this.scrollerOwner||(e=this.up("[scrollerOwner]")),e},getLhsMarker:function(){var e=this;return e.lhsMarker||(e.lhsMarker=Ext.DomHelper.append(e.el,{role:"presentation",cls:e.resizeMarkerCls},!0))},getRhsMarker:function(){var e=this;return e.rhsMarker||(e.rhsMarker=Ext.DomHelper.append(e.el,{role:"presentation",cls:e.resizeMarkerCls},!0))},getSelectionModel:function(){var e=this,t=e.selModel,n,r,i;return t||(t={},n=!0),t.events||(i=t.selType||e.selType,n=!t.mode,t=e.selModel=Ext.create("selection."+i,t)),e.simpleSelect?r="SIMPLE":e.multiSelect&&(r="MULTI"),Ext.applyIf(t,{allowDeselect:e.allowDeselect}),r&&n&&t.setSelectionMode(r),t.hasRelaySetup||(e.relayEvents(t,["selectionchange","beforeselect","beforedeselect","select","deselect"]),t.hasRelaySetup=!0),e.disableSelection&&(t.locked=!0),t},getScrollTarget:function(){var e=this.getScrollerOwner(),t=e.query("tableview");return t[1]||t[0]},onHorizontalScroll:function(e,t){this.syncHorizontalScroll(t.scrollLeft)},syncHorizontalScroll:function(e,t){var n=this,r;t=t===!0,n.rendered&&(t||e!==n.scrollLeftPos)&&(t&&(r=n.getScrollTarget(),r.el.dom.scrollLeft=e),n.headerCt.el.dom.scrollLeft=e,n.scrollLeftPos=e)},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(e,t){var n=this,r=n.getView(),i=e&&e.buffered,s;n.store=e,s=n.findPlugin("bufferedrenderer"),s?(n.verticalScroller=s,s.store&&s.bindStore(e)):i&&(n.verticalScroller=s=n.addPlugin(Ext.apply({ptype:"bufferedrenderer"},n.initialConfig.verticalScroller))),r.store!==e&&r.bindStore(e,!1),n.mon(e,{load:n.onStoreLoad,scope:n}),n.storeRelayers=n.relayEvents(e,["filterchange","groupchange"]),s&&(n.invalidateScrollerOnRefresh=!1),n.invalidateScrollerOnRefresh!==undefined&&(r.preserveScrollOnRefresh=!
n.invalidateScrollerOnRefresh)},unbindStore:function(){var e=this,t=e.store;t&&(e.store=null,e.mun(t,{load:e.onStoreLoad,scope:e}),Ext.destroy(e.storeRelayers))},reconfigure:function(e,t){var n=this,r=n.getView(),i,s=n.store,o=n.headerCt,u=o?o.items.getRange():n.columns;t&&(t=Ext.Array.slice(t)),n.reconfiguring=!0,n.fireEvent("beforereconfigure",n,e,t,s,u),n.lockable?n.reconfigureLockable(e,t):(Ext.suspendLayouts(),t&&(delete n.scrollLeftPos,o.removeAll(),o.add(t)),e&&(e=Ext.StoreManager.lookup(e))!==s?(n.store&&n.unbindStore(),i=r.deferInitialRefresh,r.deferInitialRefresh=!1,n.bindStore(e),r.deferInitialRefresh=i):n.getView().refresh(),o.setSortState(),Ext.resumeLayouts(!0)),n.fireEvent("reconfigure",n,e,t,s,u),delete n.reconfiguring},beforeDestroy:function(){var e=this.scrollTask;e&&(e.cancel(),this.scrollTask=null),this.callParent()},onDestroy:function(){var e=this;e.lockable&&e.destroyLockable(),e.callParent(),e.columns=e.storeRelayers=e.columnManager=e.visibleColumnManager=null},destroy:function(){var e=this;e.callParent(),e.isDestroyed&&(e.view=e.selModel=e.headerCt=null)}}),Ext.define("Ext.util.CSS",function(){var e,t=null,n=document,r=/(-[a-z])/gi,i=function(e,t){return t.charAt(1).toUpperCase()};return{singleton:!0,rules:t,initialized:!1,constructor:function(){e=this},createStyleSheet:function(t,r){var i,s=n.getElementsByTagName("head")[0],o=n.createElement("style");o.setAttribute("type","text/css"),r&&o.setAttribute("id",r);if(Ext.isIE)s.appendChild(o),i=o.styleSheet,i.cssText=t;else{try{o.appendChild(n.createTextNode(t))}catch(u){o.cssText=t}s.appendChild(o),i=o.styleSheet?o.styleSheet:o.sheet||n.styleSheets[n.styleSheets.length-1]}return e.cacheStyleSheet(i),i},removeStyleSheet:function(e){var t=n.getElementById(e);t&&t.parentNode.removeChild(t)},swapStyleSheet:function(t,r){var i;e.removeStyleSheet(t),i=n.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",t),i.setAttribute("href",r),n.getElementsByTagName("head")[0].appendChild(i)},refreshCache:function(){return e.getRules(!0)},cacheStyleSheet:function(n){t||(t=e.rules={});try{var r=n.cssRules||n.rules,i=r.length-1,s=n.imports,o=s?s.length:0,u,a;for(a=0;a<o;++a)e.cacheStyleSheet(s[a]);for(;i>=0;--i)u=r[i],u.styleSheet&&e.cacheStyleSheet(u.styleSheet),e.cacheRule(u,n)}catch(f){}},cacheRule:function(n,r){if(n.styleSheet)return e.cacheStyleSheet(n.styleSheet);var i=n.selectorText,s,o;if(i){i=i.split(","),s=i.length;for(o=0;o<s;o++)t[Ext.String.trim(i[o]).toLowerCase()]={parentStyleSheet:r,cssRule:n}}},getRules:function(n){var r={},i;(t===null||n)&&e.refreshCache();for(i in t)r[i]=t[i].cssRule;return r},refreshCache:function(){var r=n.styleSheets,i=0,s=r.length;t=e.rules={};for(;i<s;i++)try{r[i].disabled||e.cacheStyleSheet(r[i])}catch(o){}},getRule:function(n,r,i){var s,o;(!t||r)&&e.refreshCache();if(!Ext.isArray(n))return o=t[n.toLowerCase()],o&&!i&&(o=o.cssRule),o||null;for(s=0;s<n.length;s++)if(t[n[s]])return i?t[n[s].toLowerCase()]:t[n[s].toLowerCase()].cssRule;return null},createRule:function(t,n,r){var i,s=t.cssRules||t.rules,o=s.length;return t.insertRule?t.insertRule(n+"{"+r+"}",o):t.addRule(n,r||" "),e.cacheRule(i=s[o],t),i},updateRule:function(t,n,s){var o,u,a;if(!Ext.isArray(t)){o=e.getRule(t);if(o){if(arguments.length==2){a=Ext.Element.parseStyles(n);for(n in a)o.style[n.replace(r,i)]=a[n]}else o.style[n.replace(r,i)]=s;return!0}}else for(u=0;u<t.length;u++)if(e.updateRule(t[u],n,s))return!0;return!1},deleteRule:function(n){var r=e.getRule(n,!1,!0),i,s;r&&(i=r.parentStyleSheet,s=Ext.Array.indexOf(i.cssRules||i.rules,r.cssRule),i.deleteRule?i.deleteRule(s):i.removeRule(s),delete t[n])}}}),Ext.define("Ext.view.TableLayout",{extend:Ext.layout.component.Auto,alias:["layout.tableview"],type:"tableview",beginLayout:function(e){var t=this,n=t.owner.lockingPartner,r=t.owner;t.callParent(arguments),n&&(t.lockedGrid=t.owner.up("[lockable]"),t.lockedGrid.needsRowHeightSync=!0,e.lockingPartner||(e.lockingPartner=e.context.getItem(n,n.el),e.lockingPartner&&!e.lockingPartner.lockingPartner&&(e.lockingPartner.lockingPartner=e))),e.headerContext=e.context.getCmp(t.headerCt),t.owner.body.dom&&(e.bodyContext=e.getEl(t.owner.body)),Ext.isWebKit&&r.el.select(r.getBodySelector()).setStyle("table-layout","auto")},calculate:function(e){var t=this,n=t.lockingPartner,r=t.owner,i=0,s;if(e.headerContext.hasProp("columnWidthsDone")){if(!t.setColumnWidths(e)){t.done=!1;return}e.state.columnWidthsSynced=!0,e.bodyContext&&(s=t.owner.el.down("."+r.ownerCt.emptyCls,!0),s?i=s.offsetHeight:(i=e.bodyContext.el.dom.offsetHeight,e.bodyContext.setHeight(i,!1)),e.headerContext.state.boxPlan.tooNarrow&&e.ownerCtContext.sizeModel.height.shrinkWrap&&(i+=Ext.getScrollbarSize().height),e.setProp("contentHeight",i)),n&&!n.state.columnWidthsSynced?t.done=!1:t.callParent(arguments)}else t.done=!1},measureContentHeight:function(e){var t=e.lockingPartner;if(!e.bodyContext||e.state.columnWidthsSynced&&(!t||t.state.columnWidthsSynced))return this.callParent(arguments)},setColumnWidths:function(e){var t=this,n=t.owner,r=e.context,i=t.headerCt.getVisibleGridColumns(),s,o=0,u=i.length,a=0,f=0,l,c,h=!Ext.isBorderBox;r&&(r.currentLayout=t);for(o=0;o<u;o++){s=i[o],l=r.getCmp(s),c=l.props.width;if(isNaN(c))return l.getProp("width"),!1;a+=c,h&&n.columnLines&&(f||(f=r.getCmp(s).borderInfo.width||1),c-=f),n.body.select(n.getColumnSizerSelector(s)).setWidth(c)}return n.el.select(n.getBodySelector()).setWidth(a),!0},finishedLayout:function(){var e=this,t=e.owner;e.callParent(arguments),Ext.isWebKit&&t.el.select(t.getBodySelector()).setStyle("table-layout",""),t.refreshCounter&&e.lockedGrid&&e.lockedGrid.syncRowHeight&&e.lockedGrid.needsRowHeightSync&&(e.lockedGrid.syncRowHeights(),e.lockedGrid.needsRowHeightSync=!1)}}),Ext.define("Ext.view.NodeCache",{constructor:function(e){this.view=e,this.clear(),this.el=new Ext.dom.AbstractElement.Fly},clear:function(e){var t=this,n=this.elements,r,i;if(e)for(r in n)i=n[r],i.parentNode.removeChild(i);t.elements={},t.count=t.startIndex=0,t.endIndex=-1},fill:function(e,t){var n=this,r=n.elements={},i,s=e.length;t||(t=0);for(i=0;i<s;i++)r[t+i]=e[i];return n.startIndex=t,n.endIndex=t+s-1,n.count=s,this},insert:function(e,t){var n=this,r=n.elements,i,s=t.length;if(n.count){if(e<n.count)for(i=n.endIndex+s;i>=e+s;i--)r[i]=r[i-s],r[i].setAttribute("data-recordIndex",i);n.endIndex=n.endIndex+s}else n.startIndex=e,n.endIndex=e+s-1;for(i=0;i<s;i++,e++)r[e]=t[i],r[e].setAttribute("data-recordIndex",e);n.count+=s},item:function(e,t){var n=this.elements[e],r=null;return n&&(r=t?this.elements[e]:this.el.attach(this.elements[e])),r},first:function(e){return this.item(this.startIndex,e)},last:function(e){return this.item(this.endIndex,e)},getCount:function(){return this.count},slice:function(e,t){var n=this.elements,r=[],i;arguments.length<2?t=this.endIndex:t=Math.min(this.endIndex,t-1);for(i=e||this.startIndex;i<=t;i++)r.push(n[i]);return r},replaceElement:function(e,t,n){var r=this.elements,i=typeof e=="number"?e:this.indexOf(e);return i>-1&&(t=Ext.getDom(t),n&&(e=r[i],e.parentNode.insertBefore(t,e),Ext.removeNode(e),t.setAttribute("data-recordIndex",i)),this.elements[i]=t),this},indexOf:function(e){var t=this.elements,n;e=Ext.getDom(e);for(n=this.startIndex;n<=this.endIndex;n++)if(t[n]===e)return n;return-1},removeRange:function(e,t,n){var r=this,i=r.elements,s,o,u,a;t===undefined?t=r.count:t=Math.min(r.endIndex+1,t+1),e||(e=0),u=t-e;for(o=e,a=t;o<r.endIndex;o++,a++)n&&o<t&&Ext.removeNode(i[o]),a<=r.endIndex?(s=i[o]=i[a],s.setAttribute("data-recordIndex",o)):delete i[o];r.count-=u,r.endIndex-=u},removeElement:function(e,t){var n=this,r,i,s=n.elements,o,u,a=0,f,l;if(Ext.isArray(e)){r=e,e=[],u=r.length;for(a=0;a<u;a++)i=r[a],typeof i!="number"&&(i=n.indexOf(i)),i>=n.startIndex&&i<=n.endIndex&&(e[e.length]=i);Ext.Array.sort(e),u=e.length}else{if(e<n.startIndex||e>n.endIndex)return;u=1,e=[e]}for(f=l=e[0],a=0;f<=n.endIndex;f++,l++)a<u&&f===e[a]&&(l++,a++,t&&Ext.removeNode(s[f])),l<=n.endIndex&&l>=n.startIndex?(o=s[f]=s[l],o.setAttribute("data-recordIndex",f)):delete s[f];n.endIndex-=u,n.count-=u},scroll:function(e,t,n){var r=this,i=r.elements,s=e.length,o,u,a,f,l=r.view.getNodeContainer(),c=document.createDocumentFragment();if(t==-1){for(o=r.endIndex-n+1;o<=r.endIndex;o++)u=i[o],delete i[o],u.parentNode.removeChild(u);r.endIndex-=n,f=r.view.bufferRender(e,r.startIndex-=s);for(o=0;o<s;o++)i[r.startIndex+o]=f[o],c.appendChild(f[o]);l.insertBefore(c,l.firstChild)}else{a=r.startIndex+n;for(o=r.startIndex;o<a;o++)u=i[o],delete i[o],u.parentNode.removeChild(u);r.startIndex=o,f=r.view.bufferRender(e,r.endIndex+1);for(o=0;o<s;o++)i[r.endIndex+=1]=f[o],c.appendChild(f[o]);l.appendChild(c)}r.count=r.endIndex-r.startIndex+1}}),Ext.define("Ext.view.Table",{extend:Ext.view.View,alias:"widget.tableview",componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",headerRowSelector:"tr."+Ext.baseCSSPrefix+"grid-header-row",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",beforeSelectedItemCls:Ext.baseCSSPrefix+"grid-row-before-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",beforeFocusedItemCls:Ext.baseCSSPrefix+"grid-row-before-focused",tableFocusedFirstCls:Ext.baseCSSPrefix+"grid-table-focused-first",tableSelectedFirstCls:Ext.baseCSSPrefix+"grid-table-selected-first",tableOverFirstCls:Ext.baseCSSPrefix+"grid-table-over-first",overItemCls:Ext.baseCSSPrefix+"grid-row-over",beforeOverItemCls:Ext.baseCSSPrefix+"grid-row-before-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-row-(first|last|alt)(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-headerId-([^\\s]+)(?:\\s|$)",""),positionBody:!0,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:"grid",tpl:"{%values.view.tableTpl.applyOut(values, out)%}",tableTpl:["{%",'var view=values.view,tableCls="'+Ext.baseCSSPrefix+'" + view.id + "-table '+Ext.baseCSSPrefix+'grid-table";',"%}",'<table id="{view.id}-table" class="{[tableCls]}" border="0" cellspacing="0" cellpadding="0" style="{tableStyle}" {ariaTableAttr}>',"{[view.renderColumnSizer(out)]}","{[view.renderTHead(values, out)]}","{[view.renderTFoot(values, out)]}",'<tbody id="{view.id}-body" {ariaTbodyAttr}>',"{%","view.renderRows(values.rows, values.viewStartIndex, out);","%}","</tbody>","</table>",{priority:0}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-data-row";',"%}",'<tr {[values.rowId ? ("id=\\"" + values.rowId + "\\"") : ""]} ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]} {[values.rowClasses.join(" ")]}{[dataRowCls]}" ','{rowAttr:attributes} tabIndex="-1" {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} {ariaCellAttr}>','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}"','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:!1,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},renderBuffer:document.createElement("div"),constructor:function(e){e.grid.isTree&&(e.baseCls=Ext.baseCSSPrefix+"tree-view"),this.callParent([e])},initComponent:function(){var e=this,t=e.scroll;this.addEvents("beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown"),e.body=new Ext.dom.Element.Fly,e.body.id=e.id+"gridBody",e.autoScroll=undefined,e.trackOver||(e.overItemCls=null,e.beforeOverItemCls=null),t===!0||t==="both"?e.autoScroll=!0:t==="horizontal"?e.overflowX="auto":t==="vertical"&&(e.overflowY="auto"),e.selModel.view=e.headerCt.view=e,e.grid.view=e,e.initFeatures(e.grid),delete e.grid,e.itemSelector=e.getItemSelector(),e.all=new Ext.view.NodeCache(e),e.callParent()},getVisibleColumnManager:function(){var e=this.ownerCt,t=e.ownerLockable;return t?t.getVisibleColumnManager():e.getVisibleColumnManager()},moveColumn:function(e,t,n){var r=this,i=n>1?document.createDocumentFragment():undefined,s=t,o=r.getGridColumns().length,u=o-1,a=(r.firstCls||r.lastCls)&&(t===0||t==o||e===0||e==u),f,l,c,h,p,d,v;if(r.rendered&&t!==e){c=r.el.query(r.getDataRowSelector()),t>e&&i&&(s-=n);for(f=0,h=c.length;f<h;f++){p=c[f],d=p.childNodes;if(a){if(d.length===1){Ext.fly(d[0]).addCls(r.firstCls),Ext.fly(d[0]).addCls(r.lastCls);continue}e===0?(Ext.fly(d[0]).removeCls(r.firstCls),Ext.fly(d[1]).addCls(r.firstCls)):e===u&&(Ext.fly(d[u]).removeCls(r.lastCls),Ext.fly(d[u-1]).addCls(r.lastCls)),t===0?(Ext.fly(d[0]).removeCls(r.firstCls),Ext.fly(d[e]).addCls(r.firstCls)):t===o&&(Ext.fly(d[u]).removeCls(r.lastCls),Ext.fly(d[e]).addCls(r.lastCls))}if(i){for(l=0;l<n;l++)i.appendChild(d[e]);p.insertBefore(i,d[s]||null)}else p.insertBefore(d[e],d[s]||null)}v=r.el.query(r.getBodySelector());for(f=0,h=v.length;f<h;f++){p=v[f];if(i){for(l=0;l<n;l++)i.appendChild(p.childNodes[e]);p.insertBefore(i,p.childNodes[s]||null)}else p.insertBefore(p.childNodes[e],p.childNodes[s]||null)}}},scrollToTop:Ext.emptyFn,addElListener:function(e,t,n){this.mon(this,e,t,n,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(e){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(e)},getCell:function(e,t){var n=this.getNode(e,!0);return Ext.fly(n).down(t.getCellSelector())},getFeature:function(e){var t=this.featuresMC;if(t)return t.get(e)},findFeature:function(e){if(this.features)return Ext.Array.findBy(this.features,function(t){if(t.ftype===e)return!0})},initFeatures:function(e){var t=this,n,r,i,s;t.tableTpl=Ext.XTemplate.getTpl(this,"tableTpl"),t.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl"),t.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl"),t.featuresMC=new Ext.util.MixedCollection,r=t.features=t.constructFeatures(),s=r?r.length:0;for(n=0;n<s;n++)i=r[n],i.view=t,i.grid=e,t.featuresMC.add(i),i.init(e)},renderTHead:function(e,t){var n=e.view.headerFns,r,i;if(n)for(i=0,r=n.length;i<r;++i)n[i].call(this,e,t)},addHeaderFn:function(){var e=this.headerFns;e||(e=this.headerFns=[]),e.push(fn)},renderTFoot:function(e,t){var n=e.view.footerFns,r,i;if(n)for(i=0,r=n.length;i<r;++i)n[i].call(this,e,t)},addFooterFn:function(e){var t=this.footerFns;t||(t=this.footerFns=[]),t.push(e)},addTableTpl:function(e){return this.addTpl("tableTpl",e)},addRowTpl:function(e){return this.addTpl("rowTpl",e)},addCellTpl:function(e){return this.addTpl("cellTpl",e)},addTpl:function(e,t){var n=this,r,i;t=Ext.Object.chain(t),t.isTemplate||(t.applyOut=n.tplApplyOut);for(r=n[e];t.priority<r.priority;r=r.nextTpl)i=r;return i?i.nextTpl=t:n[e]=t,t.nextTpl=r,t},tplApplyOut:function(e,t){if(this.before&&this.before(e,t)===!1)return;this.nextTpl.applyOut(e,t),this.after&&this.after(e,t)},constructFeatures:function(){var e=this,t=e.features,n,r,i=0,s;if(t){r=[],s=t.length;for(;i<s;i++)n=t[i],n.isFeature||(n=Ext.create("feature."+n.ftype,n)),r[i]=n}return r},beforeRender:function(){var e=this;e.callParent(),e.enableTextSelection||e.protoEl.unselectable()},onViewScroll:function(e,t){this.ignoreScroll||(this.callParent(arguments),this.fireEvent("bodyscroll",e,t))},createRowElement:function(e,t){var n=this,r=n.renderBuffer;return n.tpl.overwrite(r,n.collectData([e],t)),Ext.fly(r).down(n.getNodeContainerSelector(),!0).firstChild},bufferRender:function(e,t){var n=this,r=n.renderBuffer;return n.tpl.overwrite(r,n.collectData(e,t)),Ext.Array.toArray(Ext.fly(r).down(n.getNodeContainerSelector(),!0).childNodes)},collectData:function(e,t){return this.rowValues.view=this,{view:this,rows:e,viewStartIndex:t,tableStyle:this.bufferedRenderer?"position:absolute;top:"+this.bufferedRenderer.bodyTop:""}},collectNodes:function(e){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(){var e=this,t,n=e.getBodySelector();n&&e.body.attach(e.el.child(n,!0)),e.hasLoadingHeight||(t=e.up("tablepanel"),Ext.suspendLayouts(),e.callParent(),t.updateLayout(),Ext.resumeLayouts(!0))},statics:{getBoundView:function(e){return Ext.getCmp(e.getAttribute("data-boundView"))}},getRecord:function(e){var t=this,n;if(t.store.isDestroyed)return;e=t.getNode(e);if(e){if(!t.hasActiveGrouping()){n=e.getAttribute("data-recordIndex");if(n){n=parseInt(n,10);if(n>-1)return t.store.data.getAt(n)}}return t.store.getByInternalId(e.getAttribute("data-recordId"))}},indexOf:function(e){return e=this.getNode(e,!1),!e&&e!==0?-1:this.all.indexOf(e)},indexInStore:function(e){e=e.isCollapsedPlaceholder?this.getNode(e):this.getNode(e,!1);if(!e&&e!==0)return-1;var t=e.getAttribute("data-recordIndex");return t?parseInt(t,10):this.dataSource.indexOf(this.getRecord(e))},renderRows:function(e,t,n){var r=this.rowValues,i=e.length,s;r.view=this,r.columns=this.ownerCt.getVisibleColumnManager().getColumns();for(s=0;s<i;s++,t++)r.itemClasses.length=r.rowClasses.length=0,this.renderRow(e[s],t,n);r.view=r.columns=r.record=null},renderColumnSizer:function(e){var t=this.getGridColumns(),n=t.length,r,i,s;for(r=0;r<n;r++)i=t[r],s=i.hidden?0:i.lastBox?i.lastBox.width:Ext.grid.header.Container.prototype.defaultWidth,e.push('<colgroup role="presentation"><col role="presentation" class="',t[r].getCellId(),'" style="width:'+s+'px"></colgroup>')},renderRow:function(e,t,n){var r=this,i=t===-1,s=r.selModel,o=r.rowValues,u=o.itemClasses,a=o.rowClasses,f,l=r.rowTpl;o.record=e,o.recordId=e.internalId,o.recordIndex=r.store.indexOf(e),o.rowIndex=t,o.rowId=r.getRowId(e),o.itemCls=o.rowCls="",o.columns||(o.columns=r.ownerCt.getVisibleColumnManager().getColumns()),u.length=a.length=0,i||(u[0]=Ext.baseCSSPrefix+"grid-row",!r.ownerCt.disableSelection&&s.isRowSelected&&(s.isRowSelected(e)&&u.push(r.selectedItemCls),r.rowValues.recordIndex<r.store.getTotalCount()-1&&s.isRowSelected(r.rowValues.recordIndex+1)&&!r.isRowStyleFirst(t+1)&&a.push(r.beforeSelectedItemCls)),r.stripeRows&&t%2!==0&&a.push(r.altRowCls),r.getRowClass&&(f=r.getRowClass(e,t,null,r.dataSource),f&&a.push(f)));if(!n)return l.apply(o);l.applyOut(o,n)},renderCell:function(e,t,n,r,i,s){var o=this,u=o.selModel,a=o.cellValues,f=a.classes,l=t.data[e.dataIndex],c=o.cellTpl,h,p,d;a.record=t,a.column=e,a.recordIndex=n,a.rowIndex=r,a.columnIndex=i,a.cellIndex=i,a.align=e.align,a.tdCls=e.tdCls,a.innerCls=e.innerCls,a.style=a.tdAttr="",a.unselectableAttr=o.enableTextSelection?"":'unselectable="on"',e.renderer&&e.renderer.call?(h=o.ownerCt.columnManager.getHeaderIndex(e),p=e.renderer.call(e.scope||o.ownerCt,l,a,t,n,h,o.dataSource,o),a.css&&(t.cssWarning=!0,a.tdCls+=" "+a.css,delete a.css)):p=l,a.value=p==null||p===""?"&#160;":p,f[1]=e.getCellId(),d=2,e.tdCls&&(f[d++]=e.tdCls),o.markDirty&&t.isModified(e.dataIndex)&&(f[d++]=o.dirtyCls),e.isFirstVisible&&(f[d++]=o.firstCls),e.isLastVisible&&(f[d++]=o.lastCls),o.enableTextSelection||(f[d++]=o.unselectableCls),a.tdCls&&(f[d++]=a.tdCls),u&&u.isCellModel&&u.isCellSelected(o,n,i)&&(f[d++]=o.selectedCellCls),f.length=d,a.tdCls=f.join(" "),c.applyOut(a,s),a.column=null},getNode:function(e,t){var n,r=this.callParent(arguments);if(r&&r.tagName)if(t){if(!(n=Ext.fly(r)).is(this.dataRowSelector))return n.down(this.dataRowSelector,!0)}else if(t===!1&&!(n=Ext.fly(r)).is(this.itemSelector))return n.up(this.itemSelector,null,!0);return r},getRowId:function(e){return this.id+"-record-"+e.internalId},constructRowId:function(e){return this.id+"-record-"+e},getNodeById:function(e,t){return e=this.constructRowId(e),this.retrieveNode(e,t)},getNodeByRecord:function(e,t){var n=this.getRowId(e);return this.retrieveNode(n,t)},retrieveNode:function(e,t){var n=this.el.getById(e,!0),r=this.itemSelector,i;return t===!1&&n&&!(i=Ext.fly(n)).is(r)?i.up(r,null,!0):n},updateIndexes:Ext.emptyFn,bodySelector:"table",nodeContainerSelector:"tbody",itemSelector:"tr."+Ext.baseCSSPrefix+"grid-row",dataRowSelector:"tr."+Ext.baseCSSPrefix+"grid-data-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"col."+Ext.baseCSSPrefix+"grid-cell-headerId",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getNodeContainer:function(){return this.el.down(this.nodeContainerSelector,!0)},getBodySelector:function(){return this.bodySelector+"."+Ext.baseCSSPrefix+this.id+"-table"},getNodeContainerSelector:function(){return this.nodeContainerSelector},getColumnSizerSelector:function(e){return this.sizerSelector+"-"+e.getItemId()},getItemSelector:function(){return this.itemSelector},getDataRowSelector:function(){return this.dataRowSelector},getCellSelector:function(e){return e?e.getCellSelector():this.cellSelector},getCellInnerSelector:function(e){return this.getCellSelector(e)+" "+this.innerSelector},addRowCls:function(e,t){var n=this.getNode(e,!1);n&&Ext.fly(n).addCls(t)},removeRowCls:function(e,t){var n=this.getNode(e,!1);n&&Ext.fly(n).removeCls(t)},setHighlightedItem:function(e){var t=this,n=t.highlightedItem;n&&t.el.isAncestor(n)&&t.isRowStyleFirst(n)&&t.toggleRowTableCls(n,t.tableOverFirstCls,!1),e=t.getNode(e,!1),e&&t.isRowStyleFirst(e)&&t.toggleRowTableCls(e,t.tableOverFirstCls,!0),t.callParent(arguments)},onRowSelect:function(e){var t=this,n=t.beforeSelectedItemCls;t.addRowCls(e,t.selectedItemCls),t.isRowStyleFirst(e)?(t.toggleRowTableCls(e,t.tableSelectedFirstCls,!0),e>0&&t.removeRowCls(e-1,n)):t.addRowCls(e-1,n)},onRowDeselect:function(e){var t=this;t.removeRowCls(e,[t.selectedItemCls,t.focusedItemCls]),t.isRowStyleFirst(e)?t.toggleRowTableCls(e,[t.tableFocusedFirstCls,t.tableSelectedFirstCls],!1):t.removeRowCls(e-1,[t.beforeFocusedItemCls,t.beforeSelectedItemCls])},onCellSelect:function(e){var t=this.getCellByPosition(e);t&&t.addCls(this.selectedCellCls)},onCellDeselect:function(e){var t=this.getCellByPosition(e,!0);t&&Ext.fly(t).removeCls(this.selectedCellCls)},getCellByPosition:function(e,t){if(e){var n=this.getNode(e.row,!0),r=this.ownerCt.getColumnManager().getHeaderAtIndex(e.column);if(r&&n)return Ext.fly(n).down(this.getCellSelector(r),t)}return!1},getFocusEl:function(){return this.focusEl},onRowFocus:function(e,t,n){var r=this;t?(r.addRowCls(e,r.focusedItemCls),r.isRowStyleFirst(e)?r.toggleRowTableCls(e,r.tableFocusedFirstCls,!0):r.addRowCls(e-1,r.beforeFocusedItemCls),n||r.focusRow(e)):(r.removeRowCls(e,r.focusedItemCls),r.isRowStyleFirst(e)?r.toggleRowTableCls(e,r.tableFocusedFirstCls,!1):r.removeRowCls(e-1,r.beforeFocusedItemCls)),(Ext.isIE6||Ext.isIE7)&&!r.ownerCt.rowLines&&r.repaintRow(e)},focusRow:function(e,t){var n=this,r,i=n.getFocusTask();if(t){i.delay(Ext.isNumber(t)?t:10,n.focusRow,n,[e,!1]);return}i.cancel(),n.isVisible(!0)&&(e=n.getNode(e,!0))&&(n.scrollRowIntoView(e),r=n.getRecord(e),n.selModel.setLastFocused(r),n.doFocus(e),n.fireEvent("rowfocus",r,e,n.indexInStore(e)))},scrollRowIntoView:function(e){e=this.getNode(e,!0),e&&Ext.fly(e).scrollIntoView(this.el,!1)},focusCell:function(e,t){var n=this,r,i=n.getFocusTask();if(t){i.delay(Ext.isNumber(t)?t:10,n.focusCell,n,[e,!1]);return}i.cancel(),n.isVisible(!0)&&(r=n.getCellByPosition(e))&&(n.scrollCellIntoView(r),n.doFocus(n.getNode(e.row)),n.fireEvent("cellfocus",e.record,r,e))},doFocus:function(e){var t=this,n=Ext.isIE,r;n&&(r=t.el.getScrollLeft(),t.ignoreScroll=!0),(t.focusEl=Ext.get(e)).focus(),n&&(t.el.setScrollLeft(r),t.ignoreScroll=!1)},scrollCellIntoView:function(e){e.row!=null&&e.column!=null&&(e=this.getCellByPosition(e)),e&&Ext.fly(e).scrollIntoView(this.el,!0)},scrollByDelta:function(e,t){t=t||"scrollTop";var n=this.el.dom;n[t]=n[t]+=e},isDataRow:function(e){return Ext.fly(e).hasCls(Ext.baseCSSPrefix+"grid-data-row")},syncRowHeights:function(e,t){e=Ext.get(e),t=Ext.get(t),e.dom.style.height=t.dom.style.height="";var n=this,r=n.rowTpl,i=e.dom.offsetHeight,s=t.dom.offsetHeight;if(i!==s){while(r){if(r.syncRowHeights&&r.syncRowHeights(e,t)===!1)break;r=r.nextTpl}i=e.dom.offsetHeight,s=t.dom.offsetHeight,i!==s&&(e=e.down("[data-recordId]")||e,t=t.down("[data-recordId]")||t,e&&t&&(e.dom.style.height=t.dom.style.height="",i=e.dom.offsetHeight,s=t.dom.offsetHeight,i>s?(e.setHeight(i),t.setHeight(i)):s>i&&(e.setHeight(s),t.setHeight(s))))}},onIdChanged:function(e,t,n,r,i){var s=this,o;s.viewReady&&(o=s.getNodeById(i),o&&(o.setAttribute("data-recordId",t.internalId),o.id=s.getRowId(t)))},onUpdate:function(e,t,n,r){var i=this,s=i.rowTpl,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;if(i.viewReady){a=i.getNodeByRecord(t,!1);if(a){v=i.overItemCls,m=i.beforeOverItemCls,g=i.focusedItemCls,y=i.beforeFocusedItemCls,b=i.selectedItemCls,w=i.beforeSelectedItemCls,o=i.indexInStore(t),u=Ext.fly(a,"_internal"),l=i.createRowElement(t,o),u.hasCls(v)&&Ext.fly(l).addCls(v),u.hasCls(m)&&Ext.fly(l).addCls(m),u.hasCls(g)&&Ext.fly(l).addCls(g),u.hasCls(y)&&Ext.fly(l).addCls(y),u.hasCls(b)&&Ext.fly(l).addCls(b),u.hasCls(w)&&Ext.fly(l).addCls(w),E=i.ownerCt.getVisibleColumnManager().getColumns();if(Ext.isIE9m&&a.mergeAttributes)a.mergeAttributes(l,!0);else{c=l.attributes,h=c.length;for(d=0;d<h;d++)p=c[d].name,p!=="id"&&a.setAttribute(p,c[d].value)}E.length&&(f=i.getNode(a,!0))&&i.updateColumns(t,f,i.getNode(l,!0),E,r);while(s){if(s.syncContent&&s.syncContent(a,l)===!1)break;s=s.nextTpl}i.fireEvent("itemupdate",t,o,a),i.refreshSize()}}},updateColumns:function(e,t,n,r,i){var s=this,o,u,a,f,l=r.length,c,h,p,d,v,m=s.editingPlugin||s.lockingPartner&&s.ownerCt.ownerLockable.view.editingPlugin,g=m&&m.editing,y=s.getCellSelector();if(t.mergeAttributes)t.mergeAttributes(n,!0);else{o=n.attributes,u=o.length;for(f=0;f<u;f++)a=o[f].name,a!=="id"&&t.setAttribute(a,o[f].value)}for(c=0;c<l;c++)h=r[c],s.shouldUpdateCell(e,h,i)&&(y=s.getCellSelector(h),p=Ext.DomQuery.selectNode(y,t),d=Ext.DomQuery.selectNode(y,n),g?Ext.fly(p).syncContent(d):(v=p.parentNode,v.insertBefore(d,p),v.removeChild(p)))},shouldUpdateCell:function(e,t,n){if(t.hasCustomRenderer||!n)return!0;if(n){var r=n.length,i,s;for(i=0;i<r;++i){s=n[i];if(s===t.dataIndex||s===e.idProperty)return!0}}return!1},refresh:function(){var e=this;e.callParent(arguments),e.headerCt.setSortState(),e.el&&!e.all.getCount()&&e.headerCt&&e.headerCt.tooNarrow&&e.el.createChild({role:"presentation",style:"position:absolute;height:1px;width:1px;left:"+(e.headerCt.getFullWidth()-1)+"px"}),e.refreshSelection()},refreshSelection:function(){var e=this,t=e.selModel,n,r,i;if(t.isRowModel){n=t.selected.items,r=n.length;for(i=0;i<r;i++)e.onRowSelect(e.indexOf(e.getNode(n[i])))}e.selModel.onLastFocusChanged(null,e.selModel.lastFocused,!0)},processItemEvent:function(e,t,n,r){if(this.indexInStore(t)!==-1){var i=this,s=r.getTarget(i.getCellSelector(),t),o,u=i.statics().EventMap,a=i.getSelectionModel(),f=r.type,l=i.features,c=l.length,h,p,d,v;f=="keydown"&&!s&&a.getCurrentPosition&&(s=i.getCellByPosition(a.getCurrentPosition(),!0));if(s){if(!s.parentNode)return!1;v=i.getHeaderByCell(s),o=i.ownerCt.getColumnManager().getHeaderIndex(v)}else o=-1;p=i.fireEvent("uievent",f,i,s,n,o,r,e,t);if(p!==!1&&i.callParent(arguments)!==!1||!a.onVetoUIEvent){for(h=0;h<c;++h){d=l[h];if(d.wrapsItem&&d.vetoEvent(e,t,n,r)===!1)return i.processSpecialEvent(r),!1}return f=="mouseover"||f=="mouseout"?!0:s?i["onBeforeCell"+u[f]](s,o,e,t,n,r)!==!1&&i.fireEvent("beforecell"+f,i,s,o,e,t,n,r)!==!1&&i["onCell"+u[f]](s,o,e,t,n,r)!==!1&&i.fireEvent("cell"+f,i,s,o,e,t,n,r)!==!1:!0}return a.onVetoUIEvent(f,i,s,n,o,r,e,t),!1}return this.processSpecialEvent(r),!1},processSpecialEvent:function(e){var t=this,n=t.features,r=n.length,i=e.type,s,o,u,a,f,l,c=t.ownerCt;t.callParent(arguments);if(i=="mouseover"||i=="mouseout")return;for(s=0;s<r;s++){o=n[s];if(o.hasFeatureEvent){a=e.getTarget(o.eventSelector,t.getTargetEl());if(a){u=o.eventPrefix,f=o.getFireEventArgs("before"+u+i,t,a,e),l=o.getFireEventArgs(u+i,t,a,e);if(t.fireEvent.apply(t,f)===!1||c.fireEvent.apply(c,f)===!1||t.fireEvent.apply(t,l)===!1||c.fireEvent.apply(c,l)===!1)return!1}}}return!0},onCellMouseDown:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,expandToFit:function(e){this.autoSizeColumn(e)},autoSizeColumn:function(e){Ext.isNumber(e)&&(e=this.getGridColumns[e]);if(e){if(e.isGroupHeader){e.autoSize();return}delete e.flex,e.setWidth(this.getMaxContentWidth(e))}},getMaxContentWidth:function(e){var t=this,n=t.el.query(e.getCellInnerSelector()),r=e.getWidth(),i=0,s=n.length,o=t.body.select(t.getColumnSizerSelector(e)),u=Math.max,a=0,f;s>0&&(Ext.supports.ScrollWidthInlinePaddingBug&&(a+=t.getCellPaddingAfter(n[0])),t.columnLines&&(a+=Ext.fly(n[0].parentNode).getBorderWidth("lr"))),o.setWidth(1),e.titleEl.setStyle("text-overflow","clip"),f=e.textEl.dom.offsetWidth+e.titleEl.getPadding("lr"),e.titleEl.setStyle("text-overflow","");for(;i<s;i++)f=u(f,n[i].scrollWidth);return f+=a,f=u(f,40),o.setWidth(r),f},getPositionByEvent:function(e){var t=this,n=e.getTarget(t.cellSelector),r=e.getTarget(t.itemSelector),i=t.getRecord(r),s=t.getHeaderByCell(n);return t.getPosition(i,s)},getHeaderByCell:function(e){if(e){var t=e.className.match(this.cellRe);if(t&&t[1])return this.ownerCt.getVisibleColumnManager().getHeaderById(t[1])}return!1},walkCells:function(e,t,n,r,i,s){if(!e)return!1;var o=this,u=e.row,a=e.column,f=o.dataSource.getCount(),l=o.ownerCt.getColumnManager(),c=o.ownerCt.getVisibleColumnManager(),h=l.getHeaderIndex(c.getFirst()),p=l.getHeaderIndex(c.getLast()),d=u,v=a,m=l.getHeaderAtIndex(a);if(!m||m.hidden||!f)return!1;n=n||{},t=t.toLowerCase();switch(t){case"right":if(a===p){if(r||u===f-1)return!1;n.ctrlKey||(d=o.walkRows(u,1),d!==u&&(v=h))}else n.ctrlKey?v=p:v=l.getHeaderIndex(c.getNextSibling(m));break;case"left":if(a===h){if(r||u===0)return!1;n.ctrlKey||(d=o.walkRows(u,-1),d!==u&&(v=p))}else n.ctrlKey?v=h:v=l.getHeaderIndex(c.getPreviousSibling(m));break;case"up":if(u===0)return!1;n.ctrlKey?d=o.walkRows(-1,1):d=o.walkRows(u,-1);break;case"down":if(u===f-1)return!1;n.ctrlKey?d=o.walkRows(f,-1):d=o.walkRows(u,1)}return i&&i.call(s||o,{row:d,column:v})!==!0?!1:(v=l.getHeaderAtIndex(v),(new Ext.grid.CellContext(o)).setPosition(d,v))},walkRows:function(e,t){var n=this,r=0,i=e,s,o=(n.dataSource.buffered?n.dataSource.getTotalCount():n.dataSource.getCount())-1,u=t<0?0:o,a=u?1:-1,f=e;do{if(u?f>=u:f<=0)return i||u;f+=a,(s=Ext.fly(n.getNode(f,!0)))&&s.isVisible(!0)&&(r+=a,i=f)}while(r!==t);return f},walkRecs:function(e,t){var n=this,r=0,i=e,s,o=(n.store.buffered?n.store.getTotalCount():n.store.getCount())-1,u=t<0?0:o,a=u?1:-1,f=n.store.indexOf(e),l;do{if(u?f>=u:f<=0)return i;f+=a,l=n.store.getAt(f),(s=Ext.fly(n.getNodeByRecord(l,!0)))&&s.isVisible(!0)&&(r+=a,i=l)}while(r!==t);return i},getFirstVisibleRowIndex:function(){var e=this,t=e.dataSource.buffered?e.dataSource.getTotalCount():e.dataSource.getCount(),n=e.indexOf(e.all.first())-1;do{n+=1;if(n===t)return}while(!Ext.fly(e.getNode(n,!0)).isVisible(!0));return n},getLastVisibleRowIndex:function(){var e=this,t=e.indexOf(e.all.last());do{t-=1;if(t===-1)return}while(!Ext.fly(e.getNode(t,!0)).isVisible(!0));return t},getHeaderCt:function(){return this.headerCt},getPosition:function(e,t){return(new Ext.grid.CellContext(this)).setPosition(e,t)},beforeDestroy:function(){var e=this;e.rendered&&e.el.removeAllListeners(),e.callParent(arguments)},onDestroy:function(){var e=this,t=e.featuresMC,n,r;if(t)for(r=0,n=t.getCount();r<n;++r)t.getAt(r).destroy();e.featuresMC=null,this.callParent(arguments)},onAdd:function(e,t,n){var r=this,i=r.selModel,s,o,u;r.callParent(arguments),r.doStripeRows(n),r.rendered&&i.isRowModel&&!t[0].isCollapsedPlaceholder&&(s=n+t.length,o=i.isRowSelected(s),u=r.indexOf(i.lastFocused)===s,(o||u)&&r.onRowDeselect(n),o&&r.onRowSelect(s),i.isRowSelected(n)&&r.onRowSelect(n)),r.selModel.onLastFocusChanged(null,r.selModel.lastFocused,!0)},onRemove:function(e,t,n){var r=this,i,s=r.selModel,o=n.length,u=0,a=0,f;r.callParent(arguments),r.doStripeRows(n[0]);if(r.rendered&&s.isRowModel&&!t[0].isCollapsedPlaceholder)for(;u<o;u++,a++)i=n[u]-a,f=r.store.getAt(i),r.onRowDeselect(i),s.isRowSelected(f)&&r.getNode(f)&&r.onRowSelect(i);s.onLastFocusChanged
(null,s.lastFocused,!0)},doStripeRows:function(e,t){var n=this,r,i,s,o;if(n.rendered&&n.stripeRows){r=n.getNodes(e,t);for(s=0,i=r.length;s<i;s++)o=r[s],o.className=o.className.replace(n.rowClsRe," "),e++,e%2===0&&(o.className+=" "+n.altRowCls)}},repaintRow:function(e){var t=this.getNode(e),n,r;if(t){n=t.childNodes,r=n.length;while(r--)n[r].className=n[r].className}},getRowStyleTableEl:function(e){var t=this;return e.tagName||(e=this.getNode(e)),(t.hasActiveGrouping()?Ext.fly(e):this.el).down("table."+Ext.baseCSSPrefix+"grid-table")},toggleRowTableCls:function(e,t,n){var r=this,i,s;e.tagName||(e=this.getNode(e)),s=r.isGrouping?Ext.fly(e):this.el,s&&(i=s.down("table."+Ext.baseCSSPrefix+"grid-table")),i&&i[n?"addCls":"removeCls"](t)},isRowStyleFirst:function(e){var t=this,n;return e===-1?!1:(e.tagName?n=t.indexOf(e):(n=e,e=this.getNode(e)),!n||t.hasActiveGrouping()&&e&&Ext.fly(e).hasCls(Ext.baseCSSPrefix+"grid-group-row"))},hasActiveGrouping:function(){return this.isGrouping&&this.store.isGrouped()},getCellPaddingAfter:function(e){return Ext.fly(e).getPadding("r")},hasVerticalScroll:function(){var e=this,t;return e.ownerCt.isLocked||!e.scrollFlags.y?!1:(t=e.el.down("table"),t?this.getHeight()<t.getHeight():!1)}}),Ext.define("Ext.grid.View",{extend:Ext.view.Table,alias:"widget.gridview",stripeRows:!0,autoScroll:!0}),Ext.define("Ext.grid.Panel",{extend:Ext.panel.Table,alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:!1,rowLines:!0}),Ext.define("Ext.grid.plugin.BufferedRendererTableView",{override:"Ext.view.Table",onAdd:function(e,t,n){var r=this,i=r.bufferedRenderer,s=r.all;r.rendered&&i&&s.getCount()+t.length>i.viewSize?n<s.startIndex+i.viewSize&&n+t.length>s.startIndex?r.refreshView():i.stretchView(r,i.getScrollHeight()):r.callParent([e,t,n])},onRemove:function(e,t,n){var r=this,i=r.bufferedRenderer,s,o,u;r.callParent([e,t,n]),r.rendered&&i&&(s=r.dataSource.getCount(),o=r.all,s>o.getCount()?(u=o.startIndex,i.renderRange(u,Math.min(u+i.viewSize,s)-1)):i.stretchView(r,i.getScrollHeight()))},onDataRefresh:function(){var e=this;e.bufferedRenderer&&(e.all.clear(),e.bufferedRenderer.onStoreClear()),e.callParent()}}),Ext.define("Ext.grid.RowEditorButtons",{extend:Ext.container.Container,alias:"widget.roweditorbuttons",frame:!0,shrinkWrap:!0,position:"bottom",constructor:function(e){var t=this,n=e.rowEditor,r=Ext.baseCSSPrefix,i=n.editingPlugin;e=Ext.apply({baseCls:r+"grid-row-editor-buttons",defaults:{xtype:"button",ui:n.buttonUI,scope:i,flex:1,minWidth:Ext.panel.Panel.prototype.minButtonWidth},items:[{cls:r+"row-editor-update-button",itemId:"update",handler:i.completeEdit,text:n.saveBtnText,disabled:n.updateButtonDisabled},{cls:r+"row-editor-cancel-button",handler:i.cancelEdit,text:n.cancelBtnText}]},e),t.callParent([e]),t.addClsWithUI(t.position)},setButtonPosition:function(e){var t=this,n=this.rowEditor,r=n.getHeight(),i=n.body,s="",o="";t.removeClsWithUI(t.position),t.position=e,t.addClsWithUI(e),e==="top"?s=r-i.getBorderWidth("t")+"px":o=r-i.getBorderWidth("b")+"px",t.el.setStyle({top:o,bottom:s})},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this.position},getFrameInfo:function(){var e=this.callParent();return e.top=!0,e}}),Ext.define("Ext.grid.RowEditor",{extend:Ext.form.Panel,alias:"widget.roweditor",saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:!1,errorCls:Ext.baseCSSPrefix+"grid-row-editor-errors-item",buttonUI:"default",hideMode:"offsets",initComponent:function(){var e=this,t=e.editingPlugin.grid,n=Ext.container.Container,r;e.cls=Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-row-editor",e.layout={type:"hbox",align:"middle"},e.lockable=t.lockable,e.lockable?e.items=[e.lockedColumnContainer=new n({id:t.id+"-locked-editor-cells",layout:{type:"hbox",align:"middle"},margin:"0 1 0 0"}),e.normalColumnContainer=new n({flex:1,id:t.id+"-normal-editor-cells",layout:{type:"hbox",align:"middle"}})]:e.lockedColumnContainer=e.normalColumnContainer=e,e.callParent(arguments),e.fields&&(e.addFieldsForColumn(e.fields,!0),e.insertColumnEditor(e.fields),delete e.fields),e.mon(e.hierarchyEventSource,{scope:e,show:e.repositionIfVisible}),r=e.getForm(),r.trackResetOnLoad=!0,r.on("validitychange",e.onValidityChange,e)},onGridResize:function(){var e=this,t=e.getClientWidth(),n=e.editingPlugin.grid,r=n.body,i=e.getFloatingButtons();e.setLocalX(r.getOffsetsTo(n)[0]+r.getBorderWidth("l")-n.el.getBorderWidth("l")),e.setWidth(t),i.setLocalX((t-i.getWidth())/2)},syncAllFieldWidths:function(){var e=this;Ext.Array.each(e.query("[isEditorComponent]"),function(t){t.column.isVisible()&&e.onColumnShow(t.column)},e)},syncFieldWidth:function(e){var t=e.getEditor(),n;t._marginWidth=t._marginWidth||t.el.getMargin("lr"),n=e.getWidth()-t._marginWidth,t.setWidth(n),t.xtype==="displayfield"&&(t.inputWidth=n)},onValidityChange:function(e,t){var n=this;n.errorSummary&&n.isVisible()&&n[t?"hideToolTip":"showToolTip"](),n.updateButton(t),n.isValid=t},updateButton:function(e){var t=this.floatingButtons;t?t.child("#update").setDisabled(!e):this.updateButtonDisabled=!e},afterRender:function(){var e=this,t=e.editingPlugin,n=t.grid,r=n.lockable?n.normalGrid.view:n.view;e.callParent(arguments),e.scrollingView=r,e.scrollingViewEl=r.el,r.mon(e.scrollingViewEl,"scroll",e.onViewScroll,e),e.mon(e.el,{click:Ext.emptyFn,stopPropagation:!0}),e.mon(n,{resize:e.onGridResize,scope:e}),e.el.swallowEvent(["keypress","keydown"]),e.fieldScroller=e.normalColumnContainer.layout.innerCt,e.fieldScroller.dom.style.overflow="hidden",e.fieldScroller.on({scroll:e.onFieldContainerScroll,scope:e}),e.initKeyNav(),e.mon(t.view,{beforerefresh:e.onBeforeViewRefresh,refresh:e.onViewRefresh,itemremove:e.onViewItemRemove,scope:e}),e.preventReposition=!0,e.syncAllFieldWidths(),delete e.preventReposition},initKeyNav:function(){var e=this,t=e.editingPlugin;e.keyNav=new Ext.util.KeyNav(e.el,{enter:t.onEnterKey,esc:t.onEscKey,scope:t})},onBeforeViewRefresh:function(e){var t=this,n=e.el.dom;t.el.dom.parentNode===n&&n.removeChild(t.el.dom)},onViewRefresh:function(e){var t=this,n=t.context,r;n&&(r=e.getNode(n.record,!0))?(n.row=r,t.reposition(),t.tooltip&&t.tooltip.isVisible()&&t.tooltip.setTarget(n.row)):t.editingPlugin.cancelEdit()},onViewItemRemove:function(e,t){var n=this.context;n&&e===n.record&&this.editingPlugin.cancelEdit()},onViewScroll:function(){var e=this,t=e.editingPlugin.view.el,n=e.scrollingViewEl,r=n.dom.scrollTop,i=n.getScrollLeft(),s=i!==e.lastScrollLeft,o=r!==e.lastScrollTop,u;e.lastScrollTop=r,e.lastScrollLeft=i,e.isVisible()&&(u=Ext.getDom(e.context.row.id),u&&t.contains(u)?o&&(e.context.row=u,e.reposition(null,!0),(e.tooltip&&e.tooltip.isVisible()||e.hiddenTip)&&e.repositionTip(),e.syncEditorClip()):e.setLocalY(-400)),e.rendered&&s&&e.syncFieldsHorizontalScroll()},syncFieldsHorizontalScroll:function(){this.fieldScroller.setScrollLeft(this.lastScrollLeft)},onFieldContainerScroll:function(){this.scrollingViewEl.setScrollLeft(this.fieldScroller.getScrollLeft())},onColumnResize:function(e,t){var n=this;n.rendered&&!n.editingPlugin.reconfiguring&&(n.onGridResize(),n.onViewScroll(),e.isGroupHeader||(n.syncFieldWidth(e),n.repositionIfVisible()))},onColumnHide:function(e){!this.editingPlugin.reconfiguring&&!e.isGroupHeader&&(e.getEditor().hide(),this.repositionIfVisible())},onColumnShow:function(e){var t=this;t.rendered&&!t.editingPlugin.reconfiguring&&!e.isGroupHeader&&e.getEditor&&(e.getEditor().show(),t.syncFieldWidth(e),t.preventReposition||this.repositionIfVisible())},onColumnMove:function(e,t,n){var r=this,i,s=1,o,u,a,f=e.isLocked()?r.lockedColumnContainer:r.normalColumnContainer;if(e.isGroupHeader){Ext.suspendLayouts(),e=e.getGridColumns(),n>t&&(n--,s=0),this.addFieldsForColumn(e);for(i=0,o=e.length;i<o;i++,t+=s,n+=s)u=e[i].getEditor(),a=f.items.indexOf(u),a===-1?f.insert(n,u):a!=n&&f.move(t,n);Ext.resumeLayouts(!0)}else n>t&&n--,this.addFieldsForColumn(e),u=e.getEditor(),a=f.items.indexOf(u),a===-1?f.insert(n,u):a!=n&&f.move(t,n)},onColumnAdd:function(e){e.isGroupHeader&&(e=e.getGridColumns()),this.addFieldsForColumn(e),this.insertColumnEditor(e),this.preventReposition=!1},insertColumnEditor:function(e){var t=this,n=t.editingPlugin,r=n.grid,i=r.lockable,s,o,u;if(Ext.isArray(e)){for(u=0,o=e.length;u<o;u++)t.insertColumnEditor(e[u]);return}if(!e.getEditor)return;e.isLocked()?(s=t.lockedColumnContainer,r=r.lockedGrid):(s=t.normalColumnContainer,i&&(r=r.normalGrid)),s.insert(r.getColumnManager().getHeaderIndex(e),e.getEditor())},onColumnRemove:function(e,t){t=t.isGroupHeader?t.getGridColumns():t,this.removeColumnEditor(t)},removeColumnEditor:function(e,t){var n=this,r,i,s;if(Ext.isArray(e)){for(s=0,i=e.length;s<i;s++)n.removeColumnEditor(e[s]);return}e.hasEditor()&&e.field.isComponent&&(r=e.getEditor(),r&&(t||e.isDestroyed?r.destroy():r.ownerCt&&r.ownerCt.remove(r,!1)))},onColumnReplace:function(e,t,n,r){this.onColumnRemove(r.ownerCt,r)},getFloatingButtons:function(){var e=this,t=e.floatingButtons;return t||(e.floatingButtons=t=new Ext.grid.RowEditorButtons({rowEditor:e})),t},repositionIfVisible:function(e){var t=this,n=t.view;if(e&&(e==t||!e.el.isAncestor(n.el)))return;t.isVisible()&&n.isVisible(!0)&&t.reposition()},getRefOwner:function(){return this.editingPlugin.grid},getRefItems:function(e){var t=this,n;return t.lockable?(n=t.lockedColumnContainer.getRefItems(e),n.push.apply(n,t.normalColumnContainer.getRefItems(e))):n=t.callParent(arguments),n.push.apply(n,t.getFloatingButtons().getRefItems(e)),n},reposition:function(e,t){var n=this,r=n.context,i=r&&Ext.get(r.row),s=0,o,u,a,f;i&&Ext.isElement(i.dom)&&(a=n.syncButtonPosition(n.getScrollDelta()),n.editingPlugin.grid.rowLines||(s=-parseInt(i.first().getStyle("border-bottom-width"),10)),o=n.calculateLocalRowTop(i),u=n.calculateEditorTop(o)+s,t||(f=function(){a&&n.scrollingViewEl.scrollBy(0,a,!0),n.focusContextCell()}),n.syncEditorClip(),e?n.animate(Ext.applyIf({to:{top:u},duration:e.duration||125,callback:f},e)):(n.setLocalY(u),f&&f()))},getScrollDelta:function(){var e=this,t=e.scrollingViewEl.dom,n=e.context,r=e.body,i=0;return n&&(i=Ext.fly(n.row).getOffsetsTo(t)[1]-r.getBorderPadding().beforeY,i>0&&(i=Math.max(i+e.getHeight()+e.floatingButtons.getHeight()-t.clientHeight-r.getBorderWidth("b"),0))),i},calculateLocalRowTop:function(e){var t=this.editingPlugin.grid;return Ext.fly(e).getOffsetsTo(t)[1]-t.el.getBorderWidth("t")+this.lastScrollTop},calculateEditorTop:function(e){return e-this.body.getBorderPadding().beforeY-this.lastScrollTop},getClientWidth:function(){var e=this,t=e.editingPlugin.grid,n;return e.lockable?n=t.lockedGrid.getWidth()+t.normalGrid.view.el.dom.clientWidth-1:n=t.view.el.dom.clientWidth,n},getEditor:function(e){var t=this;if(Ext.isNumber(e))return t.query("[isEditorComponent]")[e];if(e.isHeader&&!e.isGroupHeader)return e.getEditor()},addFieldsForColumn:function(e,t){var n=this,r,i,s;if(Ext.isArray(e)){for(r=0,i=e.length;r<i;r++)n.addFieldsForColumn(e[r],t);return}e.getEditor&&(s=e.getEditor(null,n.getDefaultFieldCfg()),e.align==="right"&&(s.fieldStyle="text-align:right"),e.xtype==="actioncolumn"&&(s.fieldCls+=" "+Ext.baseCSSPrefix+"form-action-col-field"),n.isVisible()&&n.context&&(s.is("displayfield")?n.renderColumnData(s,n.context.record,e):(s.suspendEvents(),s.setValue(n.context.record.get(e.dataIndex)),s.resumeEvents())),e.hidden?n.onColumnHide(e):e.rendered&&!t&&n.onColumnShow(e))},getDefaultFieldCfg:function(){return{xtype:"displayfield",getModelData:function(){return null}}},loadRecord:function(e){var t=this,n=t.getForm(),r=n.getFields(),i=r.items,s=i.length,o,u,a;for(o=0;o<s;o++)i[o].suspendEvents();n.loadRecord(e);for(o=0;o<s;o++)i[o].resumeEvents();a=n.isValid(),t.errorSummary&&(a?t.hideToolTip():t.showToolTip()),t.updateButton(a),u=t.query(">displayfield"),s=u.length;for(o=0;o<s;o++)t.renderColumnData(u[o],e)},renderColumnData:function(e,t,n){var r=this,i=r.editingPlugin.grid,s=i.headerCt,o=r.scrollingView,u=o.dataSource,a=n||e.column,f=t.get(a.dataIndex),l=a.editRenderer||a.renderer,c,h,p;l&&(c={tdCls:"",style:""},h=u.indexOf(t),p=s.getHeaderIndex(a),f=l.call(a.scope||s.ownerCt,f,c,t,h,p,u,o)),e.setRawValue(f),e.resetOriginalValue()},beforeEdit:function(){var e=this,t;if(e.isVisible()&&e.errorSummary&&!e.autoCancel&&e.isDirty())return t=e.getScrollDelta(),t&&e.scrollingViewEl.scrollBy(0,t,!0),e.showToolTip(),!1},startEdit:function(e,t){var n=this,r=n.editingPlugin,i=r.grid,s=n.context=r.context;n.rendered?n.syncFieldsHorizontalScroll():(n.width=n.getClientWidth(),n.render(i.el,i.el.dom.firstChild),n.getFloatingButtons().render(n.el),n.onViewScroll()),s.grid.getSelectionModel().select(e),n.isVisible()?n.reposition(!0):n.show(),n.onGridResize(),n.loadRecord(e)},syncButtonPosition:function(e){var t=this,n=t.getFloatingButtons(),r=t.scrollingViewEl.dom,i=this.getScrollDelta()-(r.scrollHeight-r.scrollTop-r.clientHeight);return i>0?(t._buttonsOnTop||(n.setButtonPosition("top"),t._buttonsOnTop=!0),e=0):t._buttonsOnTop!==!1&&(n.setButtonPosition("bottom"),t._buttonsOnTop=!1),e},syncEditorClip:function(){var e=this,t=e.getScrollDelta(),n;t?(e.isOverflowing=!0,n=e.floatingButtons.getHeight(),t>0?e.clipBottom(Math.max(e.getHeight()-t+n,-n)):t<0&&(t=Math.abs(t),e.clipTop(Math.max(t,0)))):e.isOverflowing&&(e.clearClip(),e.isOverflowing=!1)},focusContextCell:function(){var e=this.context.column,t;e.isDestroyed||(t=this.getEditor(e),t&&t.focus&&t.focus())},cancelEdit:function(){var e=this,t=e.getForm(),n=t.getFields(),r=n.items,i=r.length,s;e.hide(),t.clearInvalid();for(s=0;s<i;s++)r[s].suspendEvents();t.reset();for(s=0;s<i;s++)r[s].resumeEvents()},completeEdit:function(){var e=this,t=e.getForm();return t.isValid()?(t.updateRecord(e.context.record),e.hide(),!0):!1},onShow:function(){var e=this;e.callParent(arguments),e.needsSyncFieldWidths&&(e.suspendLayouts(),e.syncAllFieldWidths(),e.resumeLayouts(!0)),delete e.needsSyncFieldWidths,e.reposition()},onHide:function(){var e=this;e.callParent(arguments),e.tooltip&&e.hideToolTip(),e.context&&(e.context.view.focusRow(e.context.record),e.context=null)},isDirty:function(){var e=this,t=e.getForm();return t.isDirty()},getToolTip:function(){return this.tooltip||(this.tooltip=new Ext.tip.ToolTip({cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:this.errorsText,autoHide:!1,closable:!0,closeAction:"disable",anchor:"left",anchorToTarget:!1}))},hideToolTip:function(){var e=this,t=e.getToolTip();t.rendered&&t.disable(),e.hiddenTip=!1},showToolTip:function(){var e=this,t=e.getToolTip();t.showAt([0,0]),t.update(e.getErrors()),e.repositionTip(),t.enable()},repositionTip:function(){var e=this,t=e.getToolTip(),n=e.context,r=Ext.get(n.row),i=e.scrollingViewEl,s=i.dom.clientHeight,o=e.lastScrollTop,u=o+s,a=r.getHeight(),f=r.getOffsetsTo(e.context.view.body)[1],l=f+a;l>o&&f<u?(t.showAt(t.getAlignToXY(i,"tl-tr",[15,r.getOffsetsTo(i)[1]])),e.hiddenTip=!1):(t.hide(),e.hiddenTip=!0)},getErrors:function(){var e=this,t=[],n=e.query(">[isFormField]"),r=n.length,i;for(i=0;i<r;i++)t=t.concat(Ext.Array.map(n[i].getErrors(),e.createErrorListItem));return!t.length&&!e.autoCancel&&e.isDirty()&&(t[0]=e.createErrorListItem(e.dirtyText)),'<ul class="'+Ext.plainListCls+'">'+t.join("")+"</ul>"},createErrorListItem:function(e){return'<li class="'+this.errorCls+'">'+e+"</li>"},beforeDestroy:function(){Ext.destroy(this.floatingButtons,this.tooltip),this.callParent()},clipBottom:function(e){this.el.setStyle("clip","rect(-1000px auto "+e+"px auto)")},clipTop:function(e){this.el.setStyle("clip","rect("+e+"px auto 1000px auto)")},clearClip:function(e){this.el.setStyle("clip",Ext.isIE8m||Ext.isIEQuirks?"rect(-1000px auto 1000px auto)":"auto")}}),Ext.define("Ext.view.DropZone",{extend:Ext.dd.DropZone,indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",indicatorHtml:['<div class="',Ext.baseCSSPrefix,'grid-drop-indicator-left" role="presentation"></div>','<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>'].join(""),constructor:function(e){var t=this;Ext.apply(t,e),t.ddGroup||(t.ddGroup="view-dd-zone-"+t.view.id),t.callParent([t.view.el])},fireViewEvent:function(){var e=this,t;return e.lock(),t=e.view.fireEvent.apply(e.view,arguments),e.unlock(),t},getTargetFromEvent:function(e){var t=e.getTarget(this.view.getItemSelector()),n,r,i,s,o,u;if(!t){n=e.getPageY();for(s=0,r=this.view.getNodes(),o=r.length;s<o;s++){i=r[s],u=Ext.fly(i).getBox();if(n<=u.bottom)return i}}return t},getIndicator:function(){var e=this;return e.indicator||(e.indicator=new Ext.Component({ariaRole:"presentation",html:e.indicatorHtml,cls:e.indicatorCls,ownerCt:e.view,floating:!0,shadow:!1})),e.indicator},getPosition:function(e,t){var n=e.getXY()[1],r=Ext.fly(t).getRegion(),i;return r.bottom-n>=(r.bottom-r.top)/2?i="before":i="after",i},containsRecordAtOffset:function(e,t,n){if(!t)return!1;var r=this.view,i=r.indexOf(t),s=r.getNode(i+n,!0),o=s?r.getRecord(s):null;return o&&Ext.Array.contains(e,o)},positionIndicator:function(e,t,n){var r=this,i=r.view,s=r.getPosition(n,e),o=i.getRecord(e),u=t.records,a;if(!Ext.Array.contains(u,o)&&(s=="before"&&!r.containsRecordAtOffset(u,o,-1)||s=="after"&&!r.containsRecordAtOffset(u,o,1))){r.valid=!0;if(r.overRecord!=o||r.currentPosition!=s)a=Ext.fly(e).getY()-i.el.getY()-1,s=="after"&&(a+=Ext.fly(e).getHeight()),r.getIndicator().setWidth(Ext.fly(i.el).getWidth()).showAt(0,a),r.overRecord=o,r.currentPosition=s}else r.invalidateDrop()},invalidateDrop:function(){this.valid&&(this.valid=!1,this.getIndicator().hide())},onNodeOver:function(e,t,n,r){var i=this;return Ext.Array.contains(r.records,i.view.getRecord(e))||i.positionIndicator(e,r,n),i.valid?i.dropAllowed:i.dropNotAllowed},notifyOut:function(e,t,n,r){var i=this;i.callParent(arguments),i.overRecord=i.currentPosition=null,i.valid=!1,i.indicator&&i.indicator.hide()},onContainerOver:function(e,t,n){var r=this,i=r.view,s=i.dataSource.getCount();return s?r.positionIndicator(i.all.last(),n,t):(r.overRecord=r.currentPosition=null,r.getIndicator().setWidth(Ext.fly(i.el).getWidth()).showAt(0,0),r.valid=!0),r.dropAllowed},onContainerDrop:function(e,t,n){return this.onNodeDrop(e,null,t,n)},onNodeDrop:function(e,t,n,r){var i=this,s=!1,o={wait:!1,processDrop:function(){i.invalidateDrop(),i.handleNodeDrop(r,i.overRecord,i.currentPosition),s=!0,i.fireViewEvent("drop",e,r,i.overRecord,i.currentPosition)},cancelDrop:function(){i.invalidateDrop(),s=!0}},u=!1;if(i.valid){u=i.fireViewEvent("beforedrop",e,r,i.overRecord,i.currentPosition,o);if(o.wait)return;u!==!1&&(s||o.processDrop())}return u},destroy:function(){Ext.destroy(this.indicator),delete this.indicator,this.callParent()}}),Ext.define("Ext.grid.ViewDropZone",{extend:Ext.view.DropZone,indicatorHtml:'<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-left" role="presentation"></div><div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>',indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",handleNodeDrop:function(e,t,n){var r=this.view,i=r.getStore(),s,o,u,a;if(e.copy){o=e.records,e.records=[];for(u=0,a=o.length;u<a;u++)e.records.push(o[u].copy())}else e.view.store.remove(e.records,e.view===r);t&&n?(s=i.indexOf(t),n!=="before"&&s++,i.insert(s,e.records)):i.add(e.records),r.getSelectionModel().select(e.records)}}),Ext.define("Ext.grid.plugin.HeaderResizer",{extend:Ext.AbstractPlugin,alias:"plugin.gridheaderresizer",disabled:!1,config:{dynamic:!1},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1e3,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(e){this.headerCt=e,e.on("render",this.afterHeaderRender,this,{single:!0})},destroy:function(){var e=this.tracker;e&&(delete e.onBeforeStart,delete e.onStart,delete e.onDrag,delete e.onEnd,e.destroy(),this.tracker=null)},afterHeaderRender:function(){var e=this.headerCt,t=e.el;e.mon(t,"mousemove",this.onHeaderCtMouseMove,this),this.tracker=new Ext.dd.DragTracker({disabled:this.disabled,onBeforeStart:Ext.Function.bind(this.onBeforeStart,this),onStart:Ext.Function.bind(this.onStart,this),onDrag:Ext.Function.bind(this.onDrag,this),onEnd:Ext.Function.bind(this.onEnd,this),tolerance:3,autoStart:300,el:t})},onHeaderCtMouseMove:function(e,t){var n=this,r,i,s,o,u,a;n.headerCt.dragging?n.activeHd&&(n.activeHd.el.dom.style.cursor="",delete n.activeHd):(i=e.getTarget("."+n.colHeaderCls,3,!0),i&&(s=Ext.getCmp(i.id),s.isOnLeftEdge(e)?(o=s.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"),o&&(a=n.headerCt.up("tablepanel"),u=o.up("tablepanel"),u===a||a.ownerCt.isXType("tablepanel")&&a.ownerCt.view.lockedGrid===u||(o=null))):s.isOnRightEdge(e)?o=s:o=null,o?(o.isGroupHeader&&(r=o.getGridColumns(),o=r[r.length-1]),o&&!o.fixed&&o.resizable!==!1&&!n.disabled&&(n.activeHd=o,s.el.dom.style.cursor=n.eResizeCursor,s.triggerEl&&(s.triggerEl.dom.style.cursor=n.eResizeCursor))):(s.el.dom.style.cursor="",s.triggerEl&&(s.triggerEl.dom.style.cursor=""),n.activeHd=null)))},onBeforeStart:function(e){return this.dragHd=this.activeHd,!!this.dragHd&&!this.headerCt.dragging?(this.tracker.constrainTo=this.getConstrainRegion(),!0):(this.headerCt.dragging=!1,!1)},getConstrainRegion:function(){var e=this,t=e.dragHd.el,n=0,r,i;return e.headerCt.forceFit?(r=e.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"),r&&(e.headerInSameGrid(r)||(r=null),n=r.getWidth()-e.minColWidth)):(i=e.dragHd.up("tablepanel")).isLocked?n=e.dragHd.up("[scrollerOwner]").getWidth()-i.getWidth()-30:n=e.maxColWidth-t.getWidth(),e.adjustConstrainRegion(t.getRegion(),0,n,0,e.minColWidth)},onStart:function(e){var t=this,n=t.dragHd,r=n.el.getWidth(),i=n.getOwnerHeaderCt(),s,o,u,a,f,l,c;t.headerCt.dragging=!0,t.origWidth=r,t.dynamic||(u=a=i.up("tablepanel"),u.ownerLockable&&(a=u.ownerLockable),s=t.getLeftMarkerX(a),f=a.getLhsMarker(),l=a.getRhsMarker(),c=u.body.getHeight()+i.getHeight(),o=i.getOffsetsTo(a)[1],f.setLocalY(o),l.setLocalY(o),f.setHeight(c),l.setHeight(c),t.setMarkerX(f,s),t.setMarkerX(l,s+r))},onDrag:function(e){var t=this,n;t.dynamic?t.doResize():(n=this.headerCt.up("tablepanel"),n.ownerLockable&&(n=n.ownerLockable),this.setMarkerX(this.getMovingMarker(n),this.calculateDragX(n)))},getMovingMarker:function(e){return e.getRhsMarker()},onEnd:function(e){this.headerCt.dragging=!1;if(this.dragHd){if(!this.dynamic){var t=this.headerCt.up("tablepanel");t.ownerLockable&&(t=t.ownerLockable),this.setMarkerX(t.getLhsMarker(),-9999),this.setMarkerX(t.getRhsMarker(),-9999)}this.doResize()}},doResize:function(){var e=this,t=e.dragHd,n,r;t&&(r=e.tracker.getOffset("point"),t.flex&&delete t.flex,Ext.suspendLayouts(),e.adjustColumnWidth(r[0]),e.headerCt.forceFit&&(n=t.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"),n&&!e.headerInSameGrid(n)&&(n=null),n&&(delete n.flex,n.setWidth(n.getWidth()-r[0]))),Ext.resumeLayouts(!0))},headerInSameGrid:function(e){var t=this.dragHd.up("tablepanel");return!!e.up(t)},disable:function(){this.disabled=!0,this.tracker&&this.tracker.disable()},enable:function(){this.disabled=!1,this.tracker&&this.tracker.enable()},calculateDragX:function(e){return this.tracker.getXY("point")[0]-e.getX()-e.el.getBorderWidth("l")},getLeftMarkerX:function(e){return this.dragHd.getX()-e.getX()-e.el.getBorderWidth("l")-1},setMarkerX:function(e,t){e.setLocalX(t)},adjustConstrainRegion:function(e,t,n,r,i){return e.adjust(t,n,r,i)},adjustColumnWidth:function(e){this.dragHd.setWidth(this.origWidth+e)}}),Ext.define("Ext.grid.header.DragZone",{extend:Ext.dd.DragZone,colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(e){var t=this;t.headerCt=e,t.ddGroup=t.getDDGroup(),t.autoGroup=!0,t.callParent([e.el]),t.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(e){if(e.getTarget(this.colInnerSelector)){var t=e.getTarget(this.colHeaderSelector),n,r;if(t){n=Ext.getCmp(t.id);if(!this.headerCt.dragging&&n.draggable&&!n.isOnLeftEdge(e)&&!n.isOnRightEdge(e))return r=document.createElement("div"),r.role="presentation",r.innerHTML=Ext.getCmp(t.id).text,{ddel:r,header:n}}}return!1},onBeforeDrag:function(){return!this.headerCt.dragging&&!this.disabled},onInitDrag:function(){this.headerCt.dragging=!0,this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.grid.header.DropZone",{extend:Ext.dd.DropZone,colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(e){var t=this;t.headerCt=e,t.ddGroup=t.getDDGroup(),t.autoGroup=!0,t.callParent([e.el])},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.self.prototype.topIndicator=Ext.DomHelper.append(Ext.getBody(),{role:"presentation",cls:"col-move-top",html:"&#160;"},!0),this.self.prototype.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.self.prototype.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{role:"presentation",cls:"col-move-bottom",html:"&#160;"},!0)),this.bottomIndicator},getLocation:function(e,t){var n=e.getXY()[0],r=Ext.fly(t).getRegion(),i;return r.right-n<=(r.right-r.left)/2?i="after":i="before",{pos:i,header:Ext.getCmp(t.id),node:t}},positionIndicator:function(e,t,n){var r=this,i=e.header,s=r.getLocation(n,t),o=s.header,u=s.pos,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;if(o===r.lastTargetHeader&&u===r.lastDropPos)return;a=i.nextSibling("gridcolumn:not([hidden])"),f=i.previousSibling("gridcolumn:not([hidden])"),r.lastTargetHeader=o,r.lastDropPos=u;if(!o.draggable&&u==="before"&&o.getIndex()===0)return!1;e.dropLocation=s;if(i!==o&&(u==="before"&&a!==o||u==="after"&&f!==o)&&!o.isDescendantOf(i)){b=Ext.dd.DragDropManager.getRelated(r),w=b.length,E=0;for(;E<w;E++)S=b[E],S!==r&&S.invalidateDrop&&S.invalidateDrop();r.valid=!0,l=r.getTopIndicator(),c=r.getBottomIndicator(),u==="before"?(h="bc-tl",p="tc-bl"):(h="bc-tr",p="tc-br"),d=l.getAlignToXY(o.el,h),v=c.getAlignToXY(o.el,p),m=r.headerCt.el,g=m.getX()-r.indicatorXOffset,y=m.getX()+m.getWidth(),d[0]=Ext.Number.constrain(d[0],g,y),v[0]=Ext.Number.constrain(v[0],g,y),l.setXY(d),c.setXY(v),l.show(),c.show()}else r.invalidateDrop()},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(e,t,n,r){var i=this,s=r.header,o,u,a,f;if(r.header.el.dom===e)o=!1;else{r.isLock=r.isUnlock=!1,u=i.getLocation(n,e).header,o=s.ownerCt===u.ownerCt;if(!o&&!s.ownerCt.sealed&&!u.ownerCt.sealed){o=!0,a=s.up("tablepanel"),f=u.up("tablepanel"),r.isLock=f.isLocked&&!a.isLocked,r.isUnlock=!f.isLocked&&a.isLocked;if(r.isUnlock&&s.lockable===!1||r.isLock&&!s.isLockable())o=!1}}return o?i.positionIndicator(r,e,n):i.valid=!1,i.valid?i.dropAllowed:i.dropNotAllowed},hideIndicators:function(){var e=this;e.getTopIndicator().hide(),e.getBottomIndicator().hide(),e.lastTargetHeader=e.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(e,t,n,r){if(this.valid){var i=r.header,s=r.dropLocation,o=s.header,u=i.ownerCt,a=u.items.indexOf(i),f=o.ownerCt,l=f.items.indexOf(o),c=this.headerCt,h=c.visibleColumnManager,p=h.getHeaderIndex(i),d=h.getHeaderIndex(o),v=i.isGroupHeader?i.query(":not([hidden]):not([isGroupHeader])").length:1,m=u===f,g,y;s.pos==="after"&&(l++,d+=o.isGroupHeader?o.query(":not([hidden]):not([isGroupHeader])").length:1);if(r.isLock)g=u.up("[scrollerOwner]"),g.lock(i,l,f);else if(r.isUnlock)g=u.up("[scrollerOwner]"),g.unlock(i,l,f);else{this.invalidateDrop(),y=i.getWidth();if(m){l>a&&(l-=1);if(l===a){c.onHeaderMoved(i,v,p,d);return}}Ext.suspendLayouts(),i.dropMoving=!0,m?f.move(a,l):(u.remove(i,!1),f.insert(l,i)),delete i.dropMoving,f.isGroupHeader?m||(i.savedFlex=i.flex,delete i.flex,i.width=y):i.savedFlex&&(i.flex=i.savedFlex,delete i.width),c.purgeCache(),Ext.resumeLayouts(!0),c.onHeaderMoved(i,v,p,d)}}}}),Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:Ext.AbstractPlugin,alias:"plugin.gridheaderreorderer",init:function(e){this.headerCt=e,e.on({render:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var e=this;e.dragZone=new Ext.grid.header.DragZone(e.headerCt),e.dropZone=new Ext.grid.header.DropZone(e.headerCt),e.disabled&&e.dragZone.disable()},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}}),Ext.define("Ext.grid.header.Container",{extend:Ext.container.Container,border:!0,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:!1,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",triStateSort:!1,ddLock:!1,dragging:!1,sortable:!0,enableColumnHide:!0,initComponent:function(){var e=this;e.headerCounter=0,e.plugins=e.plugins||[],e.isColumn||(e.enableColumnResize&&(e.resizer=new Ext.grid.plugin.HeaderResizer,e.plugins.push(e.resizer)),e.enableColumnMove&&(e.reorderer=new Ext.grid.plugin.HeaderReorderer,e.plugins.push(e.reorderer)));if(e.isColumn&&!e.isGroupHeader){if(!e.items||e.items.length===0)e.isContainer=!1,e.layout={type:"container",calculate:Ext.emptyFn}}else e.layout=Ext.apply({type:"gridcolumn",align:"stretch"},e.initialConfig.layout),e.isGroupHeader?(e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.columnManager=new Ext.grid.ColumnManager(!1,e)):(e.isRootHeader=!0,e.columnManager=new Ext.grid.ColumnManager(!1,e),e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.grid&&(e.grid.columnManager=e.columnManager,e.grid.visibleColumnManager=e.visibleColumnManager));e.defaults=e.defaults||{},Ext.applyIf(e.defaults,{triStateSort:e.triStateSort,sortable:e.sortable}),e.menuTask=new Ext.util.DelayedTask(e.updateMenuDisabledState,e),e.callParent(),e.addEvents("columnresize","headerclick","headercontextmenu","headertriggerclick","columnmove","columnhide","columnshow","columnschanged","sortchange","menucreate")},isLayoutRoot:function(){return this.hiddenHeaders?!1:this.callParent()},getOwnerHeaderCt:function(){var e=this;return e.isRootHeader?e:e.up("[isRootHeader]")},onDestroy:function(){var e=this;e.menu&&e.menu.un("hide",e.onMenuHide,e),e.menuTask.cancel(),e.callParent(),Ext.destroy(e.resizer,e.reorderer,e.visibleColumnManager,e.columnManager,e.menu),e.columnManager=e.visibleColumnManager=null},applyColumnsState:function(e){if(!e||!e.length)return;var t=this,n=t.items.items,r=n.length,i=0,s=e.length,o,u,a,f;for(o=0;o<s;o++){a=e[o];for(f=r;f--;){u=n[f];if(u.getStateId&&u.getStateId()==a.id){i!==f&&t.moveHeader(f,i),u.applyColumnState&&u.applyColumnState(a),++i;break}}}},getColumnsState:function(){var e=this,t=[],n;return e.items.each(function(e){n=e.getColumnState&&e.getColumnState(),n&&t.push(n)}),t},onAdd:function(e){var t=this;e.headerId||(e.headerId=e.initialConfig.id||Ext.id(null,"header-")),e.getStateId()||(e.stateId=e.initialConfig.id||"h"+ ++t.headerCounter),t.callParent(arguments),t.onColumnsChanged(),t.checkMoveNotify(e)},onMove:function(e,t,n){var r=this;r.callParent(arguments),r.onColumnsChanged(),e.dropMoving||(r.checkMoveNotify(e),r.fireEvent("columnmove",r,e,t,n))},onRemove:function(e){var t=this,n=t.ownerCt;t.callParent(arguments),t.destroying||(t.onColumnsChanged(),t.checkMoveNotify(e),t.isGroupHeader&&!t.items.getCount()&&n&&(t.detachComponent(e),Ext.suspendLayouts(),n.remove(t),Ext.resumeLayouts(!0)))},checkMoveNotify:function(e){var t,n;e.isGroupHeader||(n=this.getOwnerHeaderCt(),n&&(t=n.ownerCt,t&&t.onHeadersChanged(n,e)))},onShow:function(){this.callParent(arguments),this.onColumnsChanged()},onColumnsChanged:function(){var e=this;this.purgeHeaderCtCache(e),e&&e.rendered&&e.fireEvent("columnschanged",e)},applyDefaults:function(e){var t;return e&&!e.isComponent&&e.xtype=="rownumberer"?t=e:(t=this.callParent(arguments),!e.isGroupHeader&&!("width"in t)&&!t.flex&&(t.width=this.defaultWidth)),t},setSortState:function(){var e=this.up("[store]").store,t=e.getFirstSorter
(),n;t?(n=this.down("gridcolumn[dataIndex="+t.property+"]"),n&&n.setSortState(t.direction,!1,!0)):this.clearOtherSortStates(null)},getHeaderMenu:function(){var e=this.getMenu(),t;if(e){t=e.child("#columnItem");if(t)return t.menu}return null},onHeaderVisibilityChange:function(e,t){var n=this,r=n.getHeaderMenu(),i;n.purgeHeaderCtCache(e.ownerCt),r&&(i=n.getMenuItemForHeader(r,e),i&&i.setChecked(t,!0),r.isVisible()&&n.menuTask.delay(50))},updateMenuDisabledState:function(e){var t=this,n=t.query(":not([hidden])"),r,i=n.length,s,o,u;e||(e=t.getMenu());for(r=0;r<i;++r)s=n[r],o=t.getMenuItemForHeader(e,s),o&&(u=s.isHideable()?"enable":"disable",o.menu&&(u+="CheckChange"),o[u]())},getMenuItemForHeader:function(e,t){return t?e.down("menucheckitem[headerId="+t.id+"]"):null},onHeaderShow:function(e){var t=this,n=t.ownerCt;t.forceFit&&delete t.flex,t.onHeaderVisibilityChange(e,!0),e.isGroupHeader||n&&n.onHeaderShow(t,e),t.fireEvent("columnshow",t,e),t.fireEvent("columnschanged",this)},onHeaderHide:function(e){var t=this,n=t.ownerCt;t.onHeaderVisibilityChange(e,!1),e.isGroupHeader||n&&n.onHeaderHide(t,e),t.fireEvent("columnhide",t,e),t.fireEvent("columnschanged",this)},tempLock:function(){this.ddLock=!0,Ext.Function.defer(function(){this.ddLock=!1},200,this)},onHeaderResize:function(e,t,n){var r=this,i=r.view,s=r.ownerCt;i&&i.body.dom&&(r.tempLock(),s&&s.onHeaderResize(r,e,t)),r.fireEvent("columnresize",this,e,t)},onHeaderClick:function(e,t,n){e.fireEvent("headerclick",this,e,t,n),this.fireEvent("headerclick",this,e,t,n)},onHeaderContextMenu:function(e,t,n){e.fireEvent("headercontextmenu",this,e,t,n),this.fireEvent("headercontextmenu",this,e,t,n)},onHeaderTriggerClick:function(e,t,n){var r=this;e.fireEvent("headertriggerclick",r,e,t,n)!==!1&&r.fireEvent("headertriggerclick",r,e,t,n)!==!1&&r.showMenuBy(n,e)},showMenuBy:function(e,t){var n=this.getMenu(),r=n.down("#ascItem"),i=n.down("#descItem"),s;n.activeHeader=n.ownerButton=t,t.setMenuActive(!0),s=t.sortable?"enable":"disable",r&&r[s](),i&&i[s](),n.showBy(e)},onMenuHide:function(e){e.activeHeader.setMenuActive(!1)},moveHeader:function(e,t){this.tempLock(),this.onHeaderMoved(this.move(e,t),1,e,t)},purgeHeaderCtCache:function(e){while(e){e.purgeCache();if(e.isRootHeader)return;e=e.ownerCt}},purgeCache:function(){var e=this,t=e.menu,n=e.visibleColumnManager,r=e.columnManager;e.gridVisibleColumns=e.gridDataColumns=e.hideableColumns=null,n&&(n.invalidate(),r.invalidate()),t&&t.hidden&&(t.hide(),t.destroy(),e.menu=null)},onHeaderMoved:function(e,t,n,r){var i=this,s=i.ownerCt;i.rendered&&(s&&s.onHeaderMove&&s.onHeaderMove(i,e,t,n,r),i.fireEvent("columnmove",i,e,n,r))},getMenu:function(){var e=this;return e.menu||(e.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:e.getMenuItems(),listeners:{hide:e.onMenuHide,scope:e}}),e.fireEvent("menucreate",e,e.menu)),e.updateMenuDisabledState(e.menu),e.menu},getMenuItems:function(){var e=this,t=[],n=e.enableColumnHide?e.getColumnMenu(e):null;return e.sortable&&(t=[{itemId:"ascItem",text:e.sortAscText,iconCls:e.menuSortAscCls,handler:e.onSortAscClick,scope:e},{itemId:"descItem",text:e.sortDescText,iconCls:e.menuSortDescCls,handler:e.onSortDescClick,scope:e}]),n&&n.length&&(e.sortable&&t.push("-"),t.push({itemId:"columnItem",text:e.columnsText,iconCls:e.menuColsIcon,menu:n,hideOnClick:!1})),t},onSortAscClick:function(){var e=this.getMenu(),t=e.activeHeader;t.setSortState("ASC")},onSortDescClick:function(){var e=this.getMenu(),t=e.activeHeader;t.setSortState("DESC")},getColumnMenu:function(e){var t=[],n=0,r,i=e.query(">gridcolumn[hideable]"),s=i.length,o;for(;n<s;n++)r=i[n],o=new Ext.menu.CheckItem({text:r.menuText||r.text,checked:!r.hidden,hideOnClick:!1,headerId:r.id,menu:r.isGroupHeader?this.getColumnMenu(r):undefined,checkHandler:this.onColumnCheckChange,scope:this}),t.push(o),r.on({destroy:Ext.Function.bind(o.destroy,o)});return t},onColumnCheckChange:function(e,t){var n=Ext.getCmp(e.headerId);n[t?"show":"hide"]()},getColumnCount:function(){return this.getGridColumns().length},getFullWidth:function(){var e=0,t=this.getVisibleGridColumns(),n=t.length,r=0,i;for(;r<n;r++)i=t[r],i.getDesiredWidth?e+=i.getDesiredWidth()||0:e+=i.getWidth();return e},clearOtherSortStates:function(e){var t=this.getGridColumns(),n=t.length,r=0;for(;r<n;r++)t[r]!==e&&t[r].setSortState(null,!0)},getVisibleGridColumns:function(){if(this.gridVisibleColumns)return this.gridVisibleColumns;var e=this.getGridColumns(),t=[],n=e.length,r;for(r=0;r<n;r++)e[r].hidden||(t[t.length]=e[r]);return this.gridVisibleColumns=t,t},getGridColumns:function(e,t){if(!e&&this.gridDataColumns)return this.gridDataColumns;var n=this,r=e||[],i,s,o,u,a;t=t||n.hidden;if(n.items){i=n.items.items;for(s=0,o=i.length;s<o;s++)u=i[s],u.isGroupHeader?u.getGridColumns(r,t):(u.hiddenAncestor=t,r.push(u))}e||(n.gridDataColumns=r);if(!e&&o){for(s=0,o=r.length;s<o;s++)u=r[s],u.isFirstVisible=u.isLastVisible=!1,!u.hidden&&!u.hiddenAncestor&&(a||(u.isFirstVisible=!0),a=u);a&&(a.isLastVisible=!0)}return r},getHideableColumns:function(){var e=this,t=e.hideableColumns;return t||(t=e.hideableColumns=e.query("[hideable]")),t},getHeaderIndex:function(e){return this.columnManager||(this.columnManager=this.getOwnerHeaderCt().columnManager),this.columnManager.getHeaderIndex(e)},getHeaderAtIndex:function(e){return this.columnManager||(this.columnManager=this.getOwnerHeaderCt().columnManager),this.columnManager.getHeaderAtIndex(e)},getVisibleHeaderClosestToIndex:function(e){return this.visibleColumnManager||(this.visibleColumnManager=this.getOwnerHeaderCt().visibleColumnManager),this.visibleColumnManager.getVisibleHeaderClosestToIndex(e)},applyForceFit:function(e){function v(){for(c=0,l=a.length;c<l;c++){h=a[c];if(h===e)continue;h.flex=h.flex||h.width||h.getWidth(),u+=h.flex,h.width=null}}function m(){var t;for(c=0,l=a.length;c<l;c++)h=a[c],t=h===e,i&&!t?(h.flex=r,h.width=null):t||(d=h.flex||s,h.flex=Math.max(Math.ceil(d/u*o),r),h.width=null),h.setWidth(h.width||h.flex)}var t=this,n=t.view,r=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,i=!1,s=Ext.grid.header.Container.prototype.defaultWidth,o=t.el.getViewSize().width-(n.el.dom.scrollHeight>n.el.dom.clientHeight?Ext.getScrollbarSize().width:0),u=0,a=t.getVisibleGridColumns(),f=e.hidden,l,c,h,p,d;Ext.suspendLayouts(),p=o-(a.length+1)*r,e.flex=null,f?(d=e.width||e.savedWidth,e.savedWidth=null):d=n.getMaxContentWidth(e),d>p?(e.width=p,i=!0):(e.width=d,o-=d+s,v()),m(),Ext.resumeLayouts(!0)},autoSizeColumn:function(e){var t=this.view;t&&(t.autoSizeColumn(e),this.forceFit&&this.applyForceFit(e))}}),Ext.define("Ext.grid.column.Column",{extend:Ext.grid.header.Container,alias:"widget.gridcolumn",alternateClassName:"Ext.grid.Column",baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:4,ariaRole:"columnheader",sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl"],noWrap:!0,renderTpl:['<div id="{id}-titleEl" role="presentation" {tipMarkup}class="',Ext.baseCSSPrefix,"column-header-inner",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<span id="{id}-textEl" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">',"{text}","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,editRenderer:!1,align:"left",draggable:!0,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",isHeader:!0,isColumn:!0,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:!0,initResizable:Ext.emptyFn,initComponent:function(){var e=this,t,n;e.header!=null&&(e.text=e.header,e.header=null),e.triStateSort||(e.possibleSortStates.length=2),e.columns!=null?(e.isGroupHeader=!0,e.items=e.columns,e.columns=e.flex=e.width=null,e.cls=(e.cls||"")+" "+e.groupHeaderCls,e.sortable=e.resizable=!1,e.align="center"):e.flex&&(e.minWidth=e.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth),e.addCls(Ext.baseCSSPrefix+"column-header-align-"+e.align),t=e.renderer,t?(typeof t=="string"&&(e.renderer=Ext.util.Format[t]),e.hasCustomRenderer=!0):e.defaultRenderer&&(e.scope=e,e.renderer=e.defaultRenderer),e.callParent(arguments),n={element:e.clickTargetName,click:e.onTitleElClick,contextmenu:e.onTitleElContextMenu,mouseenter:e.onTitleMouseOver,mouseleave:e.onTitleMouseOut,scope:e},e.resizable&&(n.dblclick=e.onTitleElDblClick),e.on(n)},initItems:function(){var e=this;e.callParent(arguments),e.isGroupHeader&&(e.hasVisibleChildren()||e.hide())},hasVisibleChildren:function(){var e=this.items.items,t=e.length,n;for(n=0;n<t;++n)if(!e[n].hidden)return!0;return!1},onAdd:function(e){var t=this,n=t.getOwnerHeaderCt();e.isColumn&&(e.isSubHeader=!0,e.addCls(this.groupSubHeaderCls)),t.hidden&&(n?e.hidden||t.show():e.hide()),t.callParent(arguments)},onRemove:function(e){var t=this;e.isSubHeader&&(e.isSubHeader=!1,e.removeCls(t.groupSubHeaderCls)),t.callParent(arguments),t.isGroupHeader&&!t.hasVisibleChildren()&&t.hide()},initRenderData:function(){var e=this,t="",n=e.tooltip,r=e.text,i=e.tooltipType=="qtip"?"data-qtip":"title";return Ext.isEmpty(n)||(t=i+'="'+n+'" '),Ext.applyIf(e.callParent(arguments),{text:r,empty:r==="&#160;"||r===" "||r==="",menuDisabled:e.menuDisabled,tipMarkup:t})},applyColumnState:function(e){var t=this;t.applyColumnsState(e.columns),e.hidden!=null&&(t.hidden=e.hidden),e.locked!=null&&(t.locked=e.locked),e.sortable!=null&&(t.sortable=e.sortable),e.width!=null?(t.flex=null,t.width=e.width):e.flex!=null&&(t.width=null,t.flex=e.flex)},getColumnState:function(){var e=this,t=e.items.items,n=t?t.length:0,r,i=[],s={id:e.getStateId()};e.savePropsToState(["hidden","sortable","locked","flex","width"],s);if(e.isGroupHeader){for(r=0;r<n;r++)i.push(t[r].getColumnState());i.length&&(s.columns=i)}else e.isSubHeader&&e.ownerCt.hidden&&delete e.hidden;return"width"in s&&delete s.flex,s},getStateId:function(){return this.stateId||this.headerId},setText:function(e){this.text=e,this.rendered&&this.textEl.update(e)},getIndex:function(){return this.isGroupColumn?!1:this.getOwnerHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.isGroupColumn?!1:Ext.Array.indexOf(this.getOwnerHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var e=this,t=e.up("tablepanel");e.callParent(),t&&(!e.sortable||t.sortableColumns===!1)&&!e.groupable&&!e.lockable&&(t.enableColumnHide===!1||!e.getOwnerHeaderCt().getHideableColumns().length)&&(e.menuDisabled=!0),e.protoEl.unselectable()},afterRender:function(){var e=this,t=e.triggerEl;e.callParent(arguments),(!Ext.isIE8||!Ext.isStrict)&&e.mon(e.getFocusEl(),{focus:e.onTitleMouseOver,blur:e.onTitleMouseOut,scope:e}),t&&e.self.triggerElWidth===undefined&&(t.setStyle("display","block"),e.self.triggerElWidth=t.getWidth(),t.setStyle("display","")),e.keyNav=new Ext.util.KeyNav(e.el,{enter:e.onEnterKey,down:e.onDownKey,scope:e})},afterComponentLayout:function(e,t,n,r){var i=this,s=i.getOwnerHeaderCt();i.callParent(arguments),s&&(n!=null||i.flex)&&e!==n&&s.onHeaderResize(i,e,!0)},onDestroy:function(){var e=this;Ext.destroy(e.textEl,e.keyNav,e.field),e.keyNav=null,e.callParent(arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(e){this.triggerEl&&this.onTitleElClick(e,this.triggerEl.dom||this.el.dom)},onEnterKey:function(e){this.onTitleElClick(e,this.el.dom)},onTitleElDblClick:function(e,t){var n=this,r,i;if(n.isOnLeftEdge(e))r=n.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"),r&&r.getOwnerHeaderCt()===n.getOwnerHeaderCt()&&r.autoSize();else if(n.isOnRightEdge(e)){if(n.isGroupHeader&&e.getPoint().isContainedBy(n.layout.innerCt)){i=n.query("gridcolumn:not([hidden]):not([isGroupHeader])"),this.getOwnerHeaderCt().autoSizeColumn(i[i.length-1]);return}n.autoSize()}},autoSize:function(){var e=this,t,n,r,i;if(e.isGroupHeader){t=e.query("gridcolumn:not([hidden]):not([isGroupHeader])"),n=t.length,i=this.getOwnerHeaderCt(),Ext.suspendLayouts();for(r=0;r<n;r++)i.autoSizeColumn(t[r]);Ext.resumeLayouts(!0);return}this.getOwnerHeaderCt().autoSizeColumn(this)},onTitleElClick:function(e,t){var n=this,r=n.getOwnerHeaderCt();if(r&&!r.ddLock)if(n.triggerEl&&(e.target===n.triggerEl.dom||t===n.triggerEl.dom||e.within(n.triggerEl)))r.onHeaderTriggerClick(n,e,t);else if(e.getKey()||!n.isOnLeftEdge(e)&&!n.isOnRightEdge(e))n.toggleSortState(),r.onHeaderClick(n,e,t)},onTitleElContextMenu:function(e,t){var n=this,r=n.getOwnerHeaderCt();r&&!r.ddLock&&r.onHeaderContextMenu(n,e,t)},processEvent:function(e,t,n,r,i,s){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var e=this,t,n;e.sortable&&(t=Ext.Array.indexOf(e.possibleSortStates,e.sortState),n=(t+1)%e.possibleSortStates.length,e.setSortState(e.possibleSortStates[n]))},doSort:function(e){var t=this.up("tablepanel"),n=t.store;t.ownerLockable&&n.isNodeStore&&(n=t.ownerLockable.lockedGrid.store),n.sort({property:this.getSortParam(),direction:e})},getSortParam:function(){return this.dataIndex},setSortState:function(e,t,n){var r=this,i=r.ascSortCls,s=r.descSortCls,o=r.getOwnerHeaderCt(),u=r.sortState;e=e||null;if(!r.sorting&&u!==e&&r.getSortParam()!=null){e&&!n&&(r.sorting=!0,r.doSort(e),r.sorting=!1);switch(e){case"DESC":r.addCls(s),r.removeCls(i);break;case"ASC":r.addCls(i),r.removeCls(s);break;default:r.removeCls([i,s])}o&&!r.triStateSort&&!t&&o.clearOtherSortStates(r),r.sortState=e,(r.triStateSort||e!=null)&&o.fireEvent("sortchange",o,r,e)}},isHideable:function(){var e={hideCandidate:this,result:this.hideable};return e.result&&this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[e]),e.result},hasOtherMenuEnabledChildren:function(e){var t,n;if(!this.isXType("headercontainer"))return e.result=!1,!1;t=this.query(">:not([hidden]):not([menuDisabled])"),n=t.length,Ext.Array.contains(t,e.hideCandidate)&&n--;if(n)return!1;e.hideCandidate=this},isLockable:function(){var e={result:this.lockable!==!1};return e.result&&this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[e]),e.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(e){if(!this.isXType("headercontainer"))return e.result=!1,!1;if(this.query(">:not([hidden])").length>1)return!1},hide:function(e){var t=this,n=t.getOwnerHeaderCt(),r=t.ownerCt,i,s,o,u,a;if(!n)return t.callParent(),t;if(t.rendered&&!t.isVisible())return t;n.forceFit&&(t.visibleSiblingCount=n.getVisibleGridColumns().length-1,t.flex&&(t.savedWidth=t.getWidth(),t.flex=null)),i=r.isGroupHeader;if(i&&!e){o=r.query(">:not([hidden])");if(o.length===1&&o[0]==t){t.ownerCt.hide();return}}Ext.suspendLayouts();if(t.isGroupHeader){o=t.items.items;for(a=0,u=o.length;a<u;a++)s=o[a],s.hidden||s.hide(!0)}return t.callParent(),n.onHeaderHide(t),Ext.resumeLayouts(!0),t},show:function(e,t){var n=this,r=n.getOwnerHeaderCt(),i=n.ownerCt,s,o,u,a;if(n.isVisible())return n;n.rendered&&r.forceFit&&r.applyForceFit(n),Ext.suspendLayouts(),n.isSubHeader&&i.hidden&&i.show(!1,!0),n.callParent(arguments);if(n.isGroupHeader&&t!==!0&&!n.query(":not([hidden])").length){s=n.items.items;for(u=0,o=s.length;u<o;u++)a=s[u],a.hidden&&a.show(!0)}Ext.resumeLayouts(!0),i=n.getOwnerHeaderCt(),i&&i.onHeaderShow(n)},getDesiredWidth:function(){var e=this;return e.rendered&&e.componentLayout&&e.componentLayout.lastComponentSize?e.componentLayout.lastComponentSize.width:e.flex?e.width:e.width},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-headerId-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(e){return e.getXY()[0]-this.getX()<=this.handleWidth},isOnRightEdge:function(e){return this.getX()+this.getWidth()-e.getXY()[0]<=this.handleWidth},setMenuActive:function(e){this.titleEl[e?"addCls":"removeCls"](this.headerOpenCls)}}),Ext.define("Ext.grid.column.Action",{extend:Ext.grid.column.Column,alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",sortable:!1,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",constructor:function(e){var t=this,n=Ext.apply({},e),r=n.items||t.items||[t],i,s,o;t.origRenderer=n.renderer||t.renderer,t.origScope=n.scope||t.scope,t.renderer=t.scope=n.renderer=n.scope=null,n.items=null,t.callParent([n]),t.items=r;for(s=0,o=r.length;s<o;++s)if(r[s].getClass){i=!0;break}if(t.origRenderer||i)t.hasCustomRenderer=!0},defaultRenderer:function(e,t,n,r,i,s,o){var u=this,a=Ext.baseCSSPrefix,f=u.origScope||u,l=u.items,c=l.length,h=0,p,d,v,m;d=Ext.isFunction(u.origRenderer)?u.origRenderer.apply(f,arguments)||"":"",t.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(;h<c;h++)p=l[h],v=p.disabled||(p.isDisabled?p.isDisabled.call(p.scope||f,o,r,i,p,n):!1),m=v?null:p.tooltip||(p.getTip?p.getTip.apply(p.scope||f,arguments):null),p.hasActionConfiguration||(p.stopSelection=u.stopSelection,p.disable=Ext.Function.bind(u.disableAction,u,[h],0),p.enable=Ext.Function.bind(u.enableAction,u,[h],0),p.hasActionConfiguration=!0),d+='<img role="button" alt="'+(p.altText||u.altText)+'" src="'+(p.icon||Ext.BLANK_IMAGE_URL)+'" class="'+a+"action-col-icon "+a+"action-col-"+String(h)+" "+(v?a+"item-disabled":" ")+" "+(Ext.isFunction(p.getClass)?p.getClass.apply(p.scope||f,arguments):p.iconCls||u.iconCls||"")+'"'+(m?' data-qtip="'+m+'"':"")+" />";return d},enableAction:function(e,t){var n=this;e?Ext.isNumber(e)||(e=Ext.Array.indexOf(n.items,e)):e=0,n.items[e].disabled=!1,n.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+e).removeCls(n.disabledCls),t||n.fireEvent("enable",n)},disableAction:function(e,t){var n=this;e?Ext.isNumber(e)||(e=Ext.Array.indexOf(n.items,e)):e=0,n.items[e].disabled=!0,n.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+e).addCls(n.disabledCls),t||n.fireEvent("disable",n)},destroy:function(){return delete this.items,delete this.renderer,this.callParent(arguments)},processEvent:function(e,t,n,r,i,s,o,u){var a=this,f=s.getTarget(),l,c,h,p=e=="keydown"&&s.getKey(),d;p&&!Ext.fly(f).findParent(t.getCellSelector())&&(f=Ext.fly(n).down("."+Ext.baseCSSPrefix+"action-col-icon",!0));if(f&&(l=f.className.match(a.actionIdRe))){c=a.items[parseInt(l[1],10)],d=c.disabled||(c.isDisabled?c.isDisabled.call(c.scope||a.origScope||a,t,r,i,c,o):!1);if(c&&!d)if(e=="click"||p==s.ENTER||p==s.SPACE)h=c.handler||a.handler,h&&h.call(c.scope||a.origScope||a,t,r,i,c,s,o,u);else if(e=="mousedown"&&c.stopSelection!==!1)return!1}return a.callParent(arguments)},cascade:function(e,t){e.call(t||this,this)},getRefItems:function(){return[]}}),Ext.define("Ext.grid.column.Boolean",{extend:Ext.grid.column.Column,alias:["widget.booleancolumn"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",defaultRenderer:function(e){return e===undefined?this.undefinedText:!e||e==="false"?this.falseText:this.trueText}}),Ext.define("Ext.grid.column.Check",{extend:Ext.grid.column.Column,alternateClassName:["Ext.ux.CheckColumn","Ext.grid.column.CheckColumn"],alias:"widget.checkcolumn",align:"center",stopSelection:!0,tdCls:Ext.baseCSSPrefix+"grid-cell-checkcolumn",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-checkcolumn",clickTargetName:"el",constructor:function(){this.addEvents("beforecheckchange","checkchange"),this.scope=this,this.callParent(arguments)},processEvent:function(e,t,n,r,i,s,o,u){var a=this,f=e==="keydown"&&s.getKey(),l=e=="mousedown";if(!a.disabled&&(l||f==s.ENTER||f==s.SPACE)){var c=a.dataIndex,h=!o.get(c);return a.fireEvent("beforecheckchange",a,r,h)!==!1?(o.set(c,h),a.fireEvent("checkchange",a,r,h),l&&s.stopEvent(),a.stopSelection||t.selModel.selectByPosition({row:r,column:i}),!1):!a.stopSelection}return a.callParent(arguments)},onEnable:function(){this.callParent(arguments),this._setDisabled(!1)},onDisable:function(){this._setDisabled(!0)},_setDisabled:function(e){var t=this,n=t.disabledCls,r;r=t.up("tablepanel").el.select(t.getCellSelector()),e?r.addCls(n):r.removeCls(n)},renderer:function(e,t){var n=Ext.baseCSSPrefix,r=n+"grid-checkcolumn";return this.disabled&&(t.tdCls+=" "+this.disabledCls),e&&(r+=" "+n+"grid-checkcolumn-checked"),'<img class="'+r+'" src="'+Ext.BLANK_IMAGE_URL+'"/>'}}),Ext.define("Ext.grid.column.Date",{extend:Ext.grid.column.Column,alias:["widget.datecolumn"],alternateClassName:"Ext.grid.DateColumn",initComponent:function(){this.format||(this.format=Ext.Date.defaultFormat),this.callParent(arguments)},defaultRenderer:function(e){return Ext.util.Format.date(e,this.format)}}),Ext.define("Ext.grid.column.Number",{extend:Ext.grid.column.Column,alias:["widget.numbercolumn"],alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",defaultRenderer:function(e){return Ext.util.Format.number(e,this.format)}}),Ext.define("Ext.grid.column.RowNumberer",{extend:Ext.grid.column.Column,alternateClassName:"Ext.grid.RowNumberer",alias:"widget.rownumberer",text:"&#160;",width:23,sortable:!1,draggable:!1,autoLock:!0,lockable:!1,align:"right",constructor:function(e){var t=this;t.width=t.width,t.callParent(arguments),t.scope=t},beforeRender:function(){var e=this.up("gridpanel").view.findFeature("rowbody");this.callParent(arguments),e&&this.ownerCt.items.indexOf(this)===1&&(e.colSpanDecrement=e.colSpanDecrement+1,this.rowspan=2)},resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",tdCls:Ext.baseCSSPrefix+"grid-cell-row-numberer "+Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-numberer",rowspan:undefined,renderer:function(e,t,n,r,i,s,o){var u=this.rowspan,a=s.currentPage,f=o.store.indexOf(n);return u&&(t.tdAttr='rowspan="'+u+'"'),a>1&&(f+=(a-1)*s.pageSize),f+1}}),Ext.define("Ext.grid.column.Template",{extend:Ext.grid.column.Column,alias:["widget.templatecolumn"],alternateClassName:"Ext.grid.TemplateColumn",initComponent:function(){var e=this;e.tpl=!Ext.isPrimitive(e.tpl)&&e.tpl.compile?e.tpl:new Ext.XTemplate(e.tpl),e.hasCustomRenderer=!0,e.callParent(arguments)},defaultRenderer:function(e,t,n){var r=Ext.apply({},n.data,n.getAssociatedData());return this.tpl.apply(r)}}),Ext.define("Ext.grid.feature.Feature",{extend:Ext.util.Observable,alias:"feature.feature",wrapsItem:!1,isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,constructor:function(e){this.initialConfig=e,this.callParent(arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,destroy:function(){this.clearListeners()},getFireEventArgs:function(e,t,n,r){return[e,t,n,r]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.grid.feature.AbstractSummary",{extend:Ext.grid.feature.Feature,alias:"feature.abstractsummary",summaryRowCls:Ext.baseCSSPrefix+"grid-row-summary",summaryTableCls:Ext.plainTableCls+" "+Ext.baseCSSPrefix+"grid-table",summaryRowSelector:"."+Ext.baseCSSPrefix+"grid-row-summary",summaryRowTpl:{before:function(e,t){if(e.record.isSummary&&this.summaryFeature.showSummaryRow)return this.summaryFeature.outputSummaryRecord(e.record,e,t),!1},priority:1e3},showSummaryRow:!0,init:function(){var e=this;e.view.summaryFeature=e,e.rowTpl=e.view.self.prototype.rowTpl,e.view.addRowTpl(e.summaryRowTpl).summaryFeature=e},toggleSummaryRow:function(e){this.showSummaryRow=!!e},outputSummaryRecord:function(e,t,n){var r=t.view,i=r.rowValues,s=t.columns||r.headerCt.getVisibleGridColumns(),o=s.length,u,a,f={view:r,record:e,rowStyle:"",rowClasses:[this.summaryRowCls],itemClasses:[],recordIndex:-1,rowId:r.getRowId(e),columns:s};for(u=0;u<o;u++)a=s[u],a.savedRenderer=a.renderer,a.summaryRenderer?a.renderer=a.summaryRenderer:a.summaryType||(a.renderer=Ext.emptyFn),a.dataIndex||(a.dataIndex=a.id);r.rowValues=f,r.self.prototype.rowTpl.applyOut(f,n),r.rowValues=i;for(u=0;u<o;u++)a=s[u],a.renderer=a.savedRenderer,a.savedRenderer=null},getSummary:function(e,t,n,r){var i=r.records;if(t){if(Ext.isFunction(t))return e.getAggregate(t,null,i,[n]);switch(t){case"count":return i.length;case"min":return e.getMin(i,n);case"max":return e.getMax(i,n);case"sum":return e.getSum(i,n);case"average":return e.getAverage(i,n);default:return""}}},generateSummaryData:function(){var e=this,t=e.view.store,n=t.groups.items,r=t.proxy.reader,i=n.length,s=e.getGroupField(),o={},u=e.lockingPartner,a,f,l,c,h,p,d,v;if(e.remoteRoot&&r.rawData){p=!0,v={},c=r.root,r.root=e.remoteRoot,r.buildExtractors(!0),h=r.getRoot(r.rawData)||[],i=h.length,r.convertRecordData||r.buildExtractors();for(a=0;a<i;++a)d={},r.convertRecordData(d,h[a]),v[d[s]]=d;r.root=c,r.buildExtractors(!0)}for(a=0;a<i;++a)f=n[a],p||f.isDirty()||!f.hasAggregate()?(p?l=e.populateRemoteRecord(f,v):l=e.populateRecord(f),(!u||e.view.ownerCt===e.view.ownerCt.ownerLockable.normalGrid)&&f.commit()):l=f.getAggregateRecord(),o[f.key]=l;return o},populateRemoteRecord:function(e,t){var n=e.getAggregateRecord(!0),r=t[e.key],i;n.beginEdit();for(i in r)r.hasOwnProperty(i)&&i!==n.idProperty&&n.set(i,r[i]);return n.endEdit(!0),n.commit(!0),n},populateRecord:function(e){var t=this,n=t.grid.ownerLockable?t.grid.ownerLockable.view:t.view,r=t.view.store,i=e.getAggregateRecord(),s=n.headerCt.getGridColumns(),o=s.length,u,a,f;i.beginEdit();for(u=0;u<o;++u)a=s[u],f=a.dataIndex||a.id,i.set(f,t.getSummary(r,a.summaryType,f,e));return i.endEdit(!0),i.commit(),i}}),Ext.define("Ext.grid.feature.GroupStore",{extend:Ext.util.Observable,isStore:!0,defaultViewSize:100,isFeatureStore:!0,constructor:function(e,t){var n=this;n.callParent(),n.groupingFeature=e,n.bindStore(t)},bindStore:function(e){var t=this;t.store&&(Ext.destroy(t.storeListeners),t.store=null),e&&(t.storeListeners=e.on({bulkremove:t.onBulkRemove,add:t.onAdd,update:t.onUpdate,refresh:t.onRefresh,clear:t.onClear,scope:t,destroyable:!0}),t.store=e,t.processStore(e))},processStore:function(e){var t=this,n=e.getGroups(),r=n.length,i,s,o,u=t.data,a=t.groupingFeature.groupCache,f=t.groupingFeature.clearGroupCache(),l=t.groupingFeature.startCollapsed;u?u.clear():u=t.data=new Ext.util.MixedCollection(!1,Ext.data.Store.recordIdFn);if(e.getCount()){t.groupingFeature.startCollapsed=!1;for(i=0;i<r;i++)s=n[i],f[s.name]=s,s.isCollapsed=l||a[s.name]&&a[s.name].isCollapsed,s.isCollapsed?(s.placeholder=o=new e.model(null,"group-"+s.name+"-placeholder"),o.set(e.getGroupField(),s.name),o.rows=o.children=s.children,o.isCollapsedPlaceholder=!0,u.add(o)):u.insert(t.data.length,s.children)}},isCollapsed:function(e){return this.groupingFeature.groupCache[e].isCollapsed},isInCollapsedGroup:function(e){var t=this.store,n;return t.isGrouped()&&(n=this.groupingFeature.groupCache[e.get(t.getGroupField())])?n.isCollapsed||!1:!1},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.data.getCount()},rangeCached:function(e,t){return t<this.getCount()},getRange:function(e,t,n){var r=this.data.getRange(e,t);return n&&n.callback&&n.callback.call(n.scope||this,r,e,t,n),r},getAt:function(e){return this.getRange(e,e)[0]},getById:function(e){return this.store.getById(e)},expandGroup:function(e){var t=this,n;typeof e=="string"&&(e=t.groupingFeature.groupCache[e]),e&&e.children.length&&(n=t.indexOf(e.children[0],!0,!0))!==-1&&(e.isCollapsed=!1,t.isExpandingOrCollapsing=1,t.data.removeAt(n),t.fireEvent("bulkremove",t,[t.getGroupPlaceholder(e)],[n]),t.data.insert(n,e.children),t.fireEvent("add",t,e.children,n),t.fireEvent("groupexpand",t,e),t.isExpandingOrCollapsing=0)},collapseGroup:function(e){var t=this,n,r,i,s,o,u;typeof e=="string"&&(e=t.groupingFeature.groupCache[e]);if(e&&(o=e.children.length)&&(n=t.indexOf(e.children[0],!0))!==-1){e.isCollapsed=!0,t.isExpandingOrCollapsing=2,t.data.removeRange(n,o),u=new Array(o);for(i=0,s=n;i<o;i++,s++)u[i]=s;t.fireEvent("bulkremove",t,e.children,u),t.data.insert(n,r=t.getGroupPlaceholder(e)),t.fireEvent("add",t,[r],n),t.fireEvent("groupcollapse",t,e),t.isExpandingOrCollapsing=0}},getGroupPlaceholder:function(e){if(!e.placeholder){var t=e.placeholder=new this.store.model(null,"group-"+e.name+"-placeholder");t.set(this.store.getGroupField(),e.name),t.rows=t.children=e.children,t.isCollapsedPlaceholder=!0}return e.placeholder},indexOf:function(e,t,n){var r=this,i,s,o,u,a,f=0;if(e&&(n||!r.isInCollapsedGroup(e))){i=r.store.getGroups(),s=i.length;for(o=0;o<s;o++){u=i[o];if(u.name===this.store.getGroupString(e))return a=Ext.Array.indexOf(u.children,e),f+a;f+=t&&r.isCollapsed(u.name)?1:u.children.length}}return-1},indexOfTotal:function(e){return this.store.indexOf(e)},onRefresh:function(e){this.processStore(this.store),this.fireEvent("refresh",this)},onBulkRemove:function(e,t,n){this.processStore(this.store),this.fireEvent("refresh",this)},onClear:function(e,t,n){this.processStore(this.store),this.fireEvent("clear",this)},onAdd:function(e,t,n){this.processStore(this.store),this.fireEvent("refresh",this)},onUpdate:function(e,t,n,r){var i=this,s,o,u;if(e.isGrouped()){s=t.group=i.groupingFeature.getRecordGroup(t);if(r&&Ext.Array.contains(r,i.groupingFeature.getGroupField()))return i.onRefresh(i.store);s.isCollapsed?i.fireEvent("update",i,s.placeholder):(Ext.suspendLayouts(),i.fireEvent("update",i,t,n,r),o=s.children[0],u=s.children[s.children.length-1],o!==t&&(o.group=s,i.fireEvent("update",i,o,"edit"),delete o.group),u!==t&&u!==o&&i.groupingFeature.showSummaryRow&&(u.group=s,i.fireEvent("update",i,u,"edit"),delete u.group),Ext.resumeLayouts(!0)),delete t.group}else i.fireEvent("update",i,t,n,r)}}),Ext.define("Ext.grid.feature.Grouping",{extend:Ext.grid.feature.Feature,mixins:{summary:Ext.grid.feature.AbstractSummary},alias:"feature.grouping",eventPrefix:"group",groupCls:Ext.baseCSSPrefix+"grid-group-hd",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",refreshData:{},groupInfo:{},wrapsItem:!0,groupHeaderTpl:"{columnName}: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",hdNotCollapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-not-collapsible",collapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-collapsible",ctCls:Ext.baseCSSPrefix+"group-hd-container",groupByText:"Group by this field",showGroupsText:"Show in groups",hideGroupedHeader:!1,startCollapsed:!1,enableGroupingMenu:!0,enableNoGroups:!0,collapsible:!0,expandTip:"Click to expand. CTRL key collapses all others",collapseTip:"Click to collapse. CTRL/click collapses all others",showSummaryRow:!1,tableTpl:{before:function(e){if(this.groupingFeature.disabled||e.rows.length===1&&e.rows[0].isSummary)return;this.groupingFeature.setup(e.rows,e.view.rowValues)},after:function(e){if(this.groupingFeature.disabled||e.rows.length===1&&e.rows[0].isSummary)return;this.groupingFeature.cleanup(e.rows,e.view.rowValues)},priority:200},groupTpl:["{%","var me = this.groupingFeature;","if (me.disabled) {","values.needsWrap = false;","} else {","me.setupRowData(values.record, values.rowIndex, values);","}","%}",'<tpl if="needsWrap">','<tr {[values.isCollapsedGroup ? ("id=\\"" + values.rowId + "\\"") : ""]} data-boundView="{view.id}" data-recordId="{record.internalId:htmlEncode}" data-recordIndex="{[values.isCollapsedGroup ? -1 : values.recordIndex]}" ','class="{[values.itemClasses.join(" ")]} ',Ext.baseCSSPrefix,'grid-wrap-row<tpl if="!summaryRecord"> ',Ext.baseCSSPrefix,'grid-group-row</tpl>" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,'group-hd-container" colspan="{columns.length}" {ariaCellAttr}>','<tpl if="isFirstRow">',"{%",'var groupTitleStyle = (!values.view.lockingPartner || (values.view.ownerCt === values.view.ownerCt.ownerLockable.lockedGrid) || (values.view.lockingPartner.headerCt.getVisibleGridColumns().length === 0)) ? "" : "visibility:hidden";',"%}",'<div id="{groupId}" class="',Ext.baseCSSPrefix,'grid-group-hd {collapsibleCls}" tabIndex="0" hidefocus="on" {ariaCellInnerAttr}>','<div class="',Ext.baseCSSPrefix,'grid-group-title" style="{[groupTitleStyle]}" {ariaGroupTitleAttr}>','{[values.groupHeaderTpl.apply(values.groupInfo, parent) || "&#160;"]}',"</div>","</div>","</tpl>",'<tpl if="summaryRecord || !isCollapsedGroup">','<table class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,"grid-table",'<tpl if="summaryRecord"> ',Ext.baseCSSPrefix,'grid-table-summary</tpl>"'
,'border="0" cellspacing="0" cellpadding="0" style="width:100%" {ariaSummaryTableAttr}>',"{[values.view.renderColumnSizer(out)]}",'<tpl if="!isCollapsedGroup">',"{%","values.itemClasses.length = 0;","this.nextTpl.applyOut(values, out, parent);","%}","</tpl>",'<tpl if="summaryRecord">',"{%me.outputSummaryRecord(values.summaryRecord, values, out);%}","</tpl>","</table>","</tpl>","</td>","</tr>","<tpl else>","{%this.nextTpl.applyOut(values, out, parent);%}","</tpl>",{priority:200,syncRowHeights:function(e,t){e=Ext.fly(e,"syncDest"),t=Ext.fly(t,"sycSrc");var n=this.owner,r=e.down(n.eventSelector,!0),i,s=e.down(n.summaryRowSelector,!0),o,u,a;r&&(i=t.down(n.eventSelector,!0))&&(r.style.height=i.style.height="",(u=r.offsetHeight)>(a=i.offsetHeight)?Ext.fly(i).setHeight(u):a>u&&Ext.fly(r).setHeight(a)),s&&(o=t.down(n.summaryRowSelector,!0))&&(s.style.height=o.style.height="",(u=s.offsetHeight)>(a=o.offsetHeight)?Ext.fly(o).setHeight(u):a>u&&Ext.fly(s).setHeight(a))},syncContent:function(e,t){e=Ext.fly(e,"syncDest"),t=Ext.fly(t,"sycSrc");var n=this.owner,r=e.down(n.eventSelector,!0),i=t.down(n.eventSelector,!0),s=e.down(n.summaryRowSelector,!0),o=t.down(n.summaryRowSelector,!0);r&&i&&Ext.fly(r).syncContent(i),s&&o&&Ext.fly(s).syncContent(o)}}],constructor:function(){this.groupCache={},this.callParent(arguments)},init:function(e){var t=this,n=t.view;n.store.groupField&&(n.isGrouping=!0),t.lockingPartner&&t.lockingPartner.groupCache&&(t.groupCache=t.lockingPartner.groupCache),t.mixins.summary.init.call(t),t.callParent(arguments),n.headerCt.on({columnhide:t.onColumnHideShow,columnshow:t.onColumnHideShow,columnmove:t.onColumnMove,scope:t}),n.addTableTpl(t.tableTpl).groupingFeature=t,n.addRowTpl(Ext.XTemplate.getTpl(t,"groupTpl")).groupingFeature=t,n.preserveScrollOnRefresh=!0,n.store.buffered?t.collapsible=!1:this.lockingPartner&&this.lockingPartner.dataSource?t.dataSource=n.dataSource=this.lockingPartner.dataSource:t.dataSource=n.dataSource=new Ext.grid.feature.GroupStore(t,n.store),t.grid.on({reconfigure:t.onReconfigure}),n.on({afterrender:t.afterViewRender,scope:t,single:!0})},indexOf:function(e){var t=this,n=t.view.store,r=e.isModel?n.indexOf(e):Math.min(Math.max(e,0),n.getCount()-1),i,s,o,u,a,f,l=0,c=0;i=n.getGroups();for(s=0,o=i.length;s<o;s++){u=i[s],a=t.getGroup(u.name),f=l,l=f+u.children.length;if(r<l)return r-c;a.isCollapsed&&(c+=u.children.length,c-=1)}},isInCollapsedGroup:function(e){var t,n=this.view.store;return n.isGrouped()&&(t=this.getGroup(e))?t.isCollapsed||!1:!1},clearGroupCache:function(){var e=this,t=e.groupCache={};return e.lockingPartner&&(e.lockingPartner.groupCache=t),t},vetoEvent:function(e,t,n,r){if(r.type!=="mouseover"&&r.type!=="mouseout"&&r.type!=="mouseenter"&&r.type!=="mouseleave"&&r.getTarget(this.eventSelector))return!1},enable:function(){var e=this,t=e.view,n=t.store,r;t.isGrouping=!0,e.lastGroupers&&(e.block(),n.group(e.lastGroupers),e.lastGroupers=null,e.unblock()),e.callParent(),r=e.view.headerCt.getMenu().down("#groupToggleMenuItem"),r&&r.setChecked(!0,!0),e.refreshIf()},disable:function(){var e=this,t=e.view,n=t.store,r,i=n.groupers.getRange();t.isGrouping=!1,i.length&&(e.lastGroupers=i,e.block(),n.clearGrouping(),e.unblock()),e.callParent(),r=e.view.headerCt.getMenu().down("#groupToggleMenuItem"),r&&r.setChecked(!1,!0),e.refreshIf()},refreshIf:function(){var e=this.grid.ownerCt,t=this.view;!t.store.remoteGroup&&!this.blockRefresh&&(e&&e.lockable?e.view.refresh():t.refresh())},afterViewRender:function(){var e=this,t=e.view;t.on({scope:e,groupclick:e.onGroupClick}),e.enableGroupingMenu&&e.injectGroupingMenu(),e.pruneGroupedHeader(),e.lastGroupers=e.view.store.groupers.getRange(),e.block(),e.onGroupChange(),e.unblock(),e.disabled&&e.disable()},injectGroupingMenu:function(){var e=this,t=e.view.headerCt;t.showMenuBy=e.showMenuBy,t.getMenuItems=e.getMenuItems()},onColumnHideShow:function(e,t){var n=this.view,r=n.headerCt,i=r.getMenu(),s=i.down("#groupMenuItem"),o=this.grid.getVisibleColumnManager().getColumns().length,u,a,f;s&&(r.getVisibleGridColumns().length>1?s.enable():s.disable());if(n.rendered){u=n.el.query("."+this.ctCls);for(f=0,a=u.length;f<a;++f)u[f].colSpan=o}},onColumnMove:function(){var e=this,t=e.view.store,n,r,i,s,o;if(t.isGrouped()){n=e.groupCache;for(r in n)n.hasOwnProperty(r)&&(i=n[r],s=i.children[0],o=i.children[i.children.length-1],t.fireEvent("update",t,s,"edit",null),o!==s&&e.showSummaryRow&&t.fireEvent("update",t,o,"edit",null))}},showMenuBy:function(e,t){var n=this.getMenu(),r=n.down("#groupMenuItem"),i=t.groupable===!1||t.dataIndex==null||this.view.headerCt.getVisibleGridColumns().length<2?"disable":"enable",s=n.down("#groupToggleMenuItem"),o=this.view.store.isGrouped();r[i](),s&&(s.setChecked(o,!0),s[o?"enable":"disable"]()),Ext.grid.header.Container.prototype.showMenuBy.apply(this,arguments)},getMenuItems:function(){var e=this,t=e.groupByText,n=e.disabled||!e.getGroupField(),r=e.showGroupsText,i=e.enableNoGroups,s=e.view.headerCt.getMenuItems;return function(){var o=s.call(this);return o.push("-",{iconCls:Ext.baseCSSPrefix+"group-by-icon",itemId:"groupMenuItem",text:t,handler:e.onGroupMenuItemClick,scope:e}),i&&o.push({itemId:"groupToggleMenuItem",text:r,checked:!n,checkHandler:e.onGroupToggleMenuItemClick,scope:e}),o}},onGroupMenuItemClick:function(e,t){var n=this,r=e.parentMenu,i=r.activeHeader,s=n.view,o=s.store;n.lastGroupers=null,n.block(),n.enable(),o.group(i.dataIndex),n.pruneGroupedHeader(),n.unblock(),n.refreshIf()},block:function(e){this.blockRefresh=this.view.blockRefresh=!0,this.lockingPartner&&!e&&this.lockingPartner.block(!0)},unblock:function(e){this.blockRefresh=this.view.blockRefresh=!1,this.lockingPartner&&!e&&this.lockingPartner.unblock(!0)},onGroupToggleMenuItemClick:function(e,t){this[t?"enable":"disable"]()},pruneGroupedHeader:function(){var e=this,t=e.getGroupedHeader();e.hideGroupedHeader&&t&&(Ext.suspendLayouts(),e.prunedHeader&&e.prunedHeader!==t&&e.prunedHeader.show(),e.prunedHeader=t,t.hide(),Ext.resumeLayouts(!0))},getHeaderNode:function(e){return Ext.get(this.createGroupId(e))},getGroup:function(e){e.isModel&&(e=e.get(this.view.store.getGroupField()));var t=this.groupCache,n=t[e];return n||(n=t[e]={isCollapsed:!1}),n},isExpanded:function(e){return!this.getGroup(e).isCollapsed},expand:function(e,t){this.doCollapseExpand(!1,e,t)},expandAll:function(){var e=this,t=e.groupCache,n,r=e.lockingPartner;for(n in t)t.hasOwnProperty(n)&&(t[n].isCollapsed=!1);Ext.suspendLayouts(),e.dataSource.onRefresh(),Ext.resumeLayouts(!0);for(n in t)t.hasOwnProperty(n)&&(e.afterCollapseExpand(!1,n),r&&r.afterCollapseExpand(!1,n))},collapse:function(e,t){this.doCollapseExpand(!0,e,t)},isAllCollapsed:function(){var e=this,t=e.groupCache,n;for(n in t)if(t.hasOwnProperty(n)&&!t[n].isCollapsed)return!1;return!0},isAllExpanded:function(){var e=this,t=e.groupCache,n;for(n in t)if(t.hasOwnProperty(n)&&t[n].isCollapsed)return!1;return!0},collapseAll:function(){var e=this,t=e.groupCache,n,r=e.lockingPartner;for(n in t)t.hasOwnProperty(n)&&(t[n].isCollapsed=!0);Ext.suspendLayouts(),e.dataSource.onRefresh(),r&&!r.isAllCollapsed()&&r.collapseAll(),Ext.resumeLayouts(!0);for(n in t)t.hasOwnProperty(n)&&(e.afterCollapseExpand(!0,n),r&&r.afterCollapseExpand(!0,n))},doCollapseExpand:function(e,t,n){var r=this,i=r.lockingPartner,s=r.groupCache[t];s.isCollapsed!=e&&(Ext.suspendLayouts(),e?r.dataSource.collapseGroup(s):r.dataSource.expandGroup(s),Ext.resumeLayouts(!0),r.afterCollapseExpand(e,t,n),i&&i.afterCollapseExpand(e,t,!1))},afterCollapseExpand:function(e,t,n){var r=this,i=r.view,s;s=Ext.get(this.getHeaderNode(t)),i.fireEvent(e?"groupcollapse":"groupexpand",i,s,t),n&&s.up(i.getItemSelector()).scrollIntoView(i.el,null,!0)},onGroupChange:function(){var e=this,t=e.getGroupField(),n,r,i;e.hideGroupedHeader&&(e.lastGroupers&&e.lastGroupers.length&&(n=e.getMenuItem(e.lastGroupers[0].property),n&&n.setChecked(!0)),t&&(r=e.view.headerCt.getVisibleGridColumns(),i=r.length===1&&r[0].dataIndex==t,n=e.getMenuItem(t),n&&!i&&n.setChecked(!1))),e.refreshIf(),e.lastGroupers=e.view.store.groupers.getRange()},getMenuItem:function(e){var t=this.view,n=t.headerCt.down("gridcolumn[dataIndex="+e+"]"),r=t.headerCt.getMenu();return n?r.down("menuitem[headerId="+n.id+"]"):null},onGroupKey:function(e,t){var n=this,r=n.getGroupName(t.target);r&&n.onGroupClick(n.view,t.target,r,t)},onGroupClick:function(e,t,n,r){var i=this,s=i.groupCache,o=!i.isExpanded(n),u;if(i.collapsible){if(r.ctrlKey){Ext.suspendLayouts();for(u in s)u===n?o&&i.expand(n):i.doCollapseExpand(!0,u,!1);Ext.resumeLayouts(!0);return}o?i.expand(n):i.collapse(n)}},setupRowData:function(e,t,n){var r=this,i=r.refreshData,s=r.groupInfo,o=i.header,u=i.groupField,a=r.view.dataSource,f,l,c,h;n.isCollapsedGroup=!1,n.summaryRecord=null;if(i.doGrouping){f=r.view.store.groupers.first();if(e.children){l=f.getGroupString(e.children[0]),n.isFirstRow=n.isLastRow=!0,n.itemClasses.push(r.hdCollapsedCls),n.isCollapsedGroup=n.needsWrap=!0,n.groupInfo=s,s.groupField=u,s.name=l,s.groupValue=e.children[0].get(u),s.columnName=o?o.text:u,n.collapsibleCls=r.collapsible?r.collapsibleCls:r.hdNotCollapsibleCls,n.groupId=r.createGroupId(l),s.rows=s.children=e.children,r.showSummaryRow&&(n.summaryRecord=i.summaryData[l]);return}l=f.getGroupString(e),e.group?(n.isFirstRow=e===e.group.children[0],n.isLastRow=e===e.group.children[e.group.children.length-1]):(n.isFirstRow=t===0,n.isFirstRow||(c=a.getAt(t-1),c&&(n.isFirstRow=!c.isEqual(f.getGroupString(c),l))),n.isLastRow=t==a.getTotalCount()-1,n.isLastRow||(h=a.getAt(t+1),h&&(n.isLastRow=!h.isEqual(f.getGroupString(h),l)))),n.isFirstRow&&(s.groupField=u,s.name=l,s.groupValue=e.get(u),s.columnName=o?o.text:u,n.collapsibleCls=r.collapsible?r.collapsibleCls:r.hdNotCollapsibleCls,n.groupId=r.createGroupId(l),r.isExpanded(l)||(n.itemClasses.push(r.hdCollapsedCls),n.isCollapsedGroup=!0),a.buffered?s.rows=s.children=[]:s.rows=s.children=r.getRecordGroup(e).children,n.groupInfo=s),n.isLastRow&&r.showSummaryRow&&(n.summaryRecord=i.summaryData[l]),n.needsWrap=n.isFirstRow||n.summaryRecord}},setup:function(e,t){var n=this,r=n.refreshData,i=!n.disabled&&n.view.store.isGrouped();n.skippedRows=0,t.view.bufferedRenderer&&(t.view.bufferedRenderer.variableRowHeight=!0),r.groupField=n.getGroupField(),r.header=n.getGroupedHeader(r.groupField),r.doGrouping=i,t.groupHeaderTpl=Ext.XTemplate.getTpl(n,"groupHeaderTpl"),i&&n.showSummaryRow&&(r.summaryData=n.generateSummaryData())},cleanup:function(e,t){var n=this.refreshData;t.groupInfo=t.groupHeaderTpl=t.isFirstRow=null,n.groupField=n.header=null},getGroupName:function(e){var t=this,n=t.view,r=t.eventSelector,i,s,o;s=Ext.fly(e).findParent(r),s||(o=Ext.fly(e).findParent(n.itemSelector),o&&(s=o.down(r,!0)));if(s){i=s.id.split(n.id+"-hd-");if(i.length===2)return Ext.htmlDecode(i[1])}},getRecordGroup:function(e){var t=this.view.store.groupers.first();if(t)return this.groupCache[t.getGroupString(e)]},createGroupId:function(e){return this.view.id+"-hd-"+Ext.htmlEncode(e)},createGroupCls:function(e){return this.view.id+"-"+Ext.htmlEncode(e)+"-item"},getGroupField:function(){return this.view.store.getGroupField()},getGroupedHeader:function(e){var t=this,n=t.view.headerCt,r=t.lockingPartner,i,s;return e=e||this.getGroupField(),e&&(i="[dataIndex="+e+"]",s=n.down(i),!s&&r&&(s=r.view.headerCt.down(i))),s||null},getFireEventArgs:function(e,t,n,r){return[e,t,n,this.getGroupName(n),r]},destroy:function(){var e=this,t=e.dataSource;e.view=e.prunedHeader=e.grid=e.groupCache=e.dataSource=null,e.callParent(),t&&t.bindStore(null)},onReconfigure:function(e,t,n,r,i){var s=e;t&&t!==r&&(t.buffered!==r.buffered&&Ext.Error.raise("Cannot reconfigure grouping switching between buffered and non-buffered stores"),t.buffered&&(s.bindStore(t),s.dataSource.processStore(t)))}}),Ext.define("Ext.grid.feature.GroupingSummary",{extend:Ext.grid.feature.Grouping,alias:"feature.groupingsummary",showSummaryRow:!0,vetoEvent:function(e,t,n,r){var i=this.callParent(arguments);return i!==!1&&r.getTarget(this.summaryRowSelector)&&(i=!1),i}}),Ext.define("Ext.grid.feature.RowBody",{extend:Ext.grid.feature.Feature,alias:"feature.rowbody",rowBodyCls:Ext.baseCSSPrefix+"grid-row-body",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTdSelector:"td."+Ext.baseCSSPrefix+"grid-cell-rowbody",eventPrefix:"rowbody",eventSelector:"tr."+Ext.baseCSSPrefix+"grid-rowbody-tr",colSpanDecrement:0,tableTpl:{before:function(e,t){var n=e.view,r=n.rowValues;this.rowBody.setup(e.rows,r)},after:function(e,t){var n=e.view,r=n.rowValues;this.rowBody.cleanup(e.rows,r)},priority:100},extraRowTpl:["{%","values.view.rowBodyFeature.setupRowData(values.record, values.recordIndex, values);","this.nextTpl.applyOut(values, out, parent);","%}",'<tr class="',Ext.baseCSSPrefix,'grid-rowbody-tr {rowBodyCls}" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,"grid-cell-rowbody",'" colspan="{rowBodyColspan}" {ariaCellAttr}>','<div class="',Ext.baseCSSPrefix,"grid-rowbody",' {rowBodyDivCls}" {ariaCellInnerAttr}>{rowBody}</div>',"</td>","</tr>",{priority:100,syncRowHeights:function(e,t){var n=this.owner,r=Ext.fly(e).down(n.eventSelector,!0),i,s,o;r&&(i=Ext.fly(t).down(n.eventSelector,!0))&&((s=r.offsetHeight)>(o=i.offsetHeight)?Ext.fly(i).setHeight(s):o>s&&Ext.fly(r).setHeight(o))},syncContent:function(e,t){var n=this.owner,r=Ext.fly(e).down(n.eventSelector,!0),i;r&&(i=Ext.fly(t).down(n.eventSelector,!0))&&Ext.fly(r).syncContent(i)}}],init:function(e){var t=this,n=t.view;n.rowBodyFeature=t,n.findFeature("rowwrap")||(e.mon(n,{element:"el",mousedown:t.onMouseDown,scope:t}),t.mon(e.getStore(),"remove",t.onStoreRemove,t)),n.headerCt.on({columnschanged:t.onColumnsChanged,scope:t}),n.addTableTpl(t.tableTpl).rowBody=t,n.addRowTpl(Ext.XTemplate.getTpl(this,"extraRowTpl")),t.callParent(arguments)},onStoreRemove:function(e,t,n){var r=this.view,i;r.rendered&&(i=r.getNode(n),i&&(i=Ext.fly(i).next(this.eventSelector),i&&i.remove()))},onMouseDown:function(e){var t=this,n=e.getTarget(t.eventSelector);n&&Ext.fly(n=n.previousSibling).is(t.view.getItemSelector())&&(e.target=n,t.view.handleEvent(e))},getSelectedRow:function(e,t){var n=e.getNode(t,!1);return n?Ext.fly(n).down(this.eventSelector):null},onColumnsChanged:function(e){var t=this.view.el.query(this.rowBodyTdSelector),n=e.getVisibleGridColumns().length,r=t.length,i;for(i=0;i<r;++i)t[i].colSpan=n},setupRowData:function(e,t,n){this.getAdditionalData&&Ext.apply(n,this.getAdditionalData(e.data,t,e,n))},setup:function(e,t){t.rowBodyCls=this.rowBodyCls,t.rowBodyColspan=t.view.getGridColumns().length-this.colSpanDecrement},cleanup:function(e,t){t.rowBodyCls=t.rowBodyColspan=t.rowBody=null}}),Ext.define("Ext.grid.feature.RowWrap",{extend:Ext.grid.feature.Feature,alias:"feature.rowwrap",rowWrapTd:"td."+Ext.baseCSSPrefix+"grid-rowwrap",hasFeatureEvent:!1,tableTpl:{before:function(e,t){e.view.bufferedRenderer&&(e.view.bufferedRenderer.variableRowHeight=!0)},priority:200},wrapTpl:['<tr data-boundView="{view.id}" data-recordId="{record.internalId}" data-recordIndex="{recordIndex}" class="{[values.itemClasses.join(" ")]} ',Ext.baseCSSPrefix,'grid-wrap-row" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,"grid-rowwrap ",Ext.baseCSSPrefix,'grid-td" colSpan="{columns.length}" {ariaCellAttr}>','<table class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,'grid-table" border="0" cellspacing="0" cellpadding="0" style="width:100%" {ariaCellInnerTableAttr}>',"{[values.view.renderColumnSizer(out)]}","{%","values.itemClasses.length = 0;","this.nextTpl.applyOut(values, out, parent)","%}","</table>","</td>","</tr>",{priority:200}],init:function(e){var t=this;t.view.addTableTpl(t.tableTpl),t.view.addRowTpl(Ext.XTemplate.getTpl(t,"wrapTpl")),t.view.headerCt.on({columnhide:t.onColumnHideShow,columnshow:t.onColumnHideShow,scope:t})},onColumnHideShow:function(){var e=this.view,t=e.el.query(this.rowWrapTd),n=e.headerCt.getVisibleGridColumns().length,r=t.length,i;for(i=0;i<r;++i)t[i].colSpan=n}}),Ext.define("Ext.grid.feature.Summary",{extend:Ext.grid.feature.AbstractSummary,alias:"feature.summary",dock:undefined,dockedSummaryCls:Ext.baseCSSPrefix+"docked-summary",panelBodyCls:Ext.baseCSSPrefix+"summary-",scrollPadProperty:"padding-right",init:function(e){var t=this,n=t.view;t.callParent(arguments),t.dock?(e.headerCt.on({afterlayout:t.onStoreUpdate,scope:t}),e.on({beforerender:function(){var r=[t.summaryTableCls];n.columnLines&&(r[r.length]=n.ownerCt.colLinesCls),t.summaryBar=e.addDocked({childEls:["innerCt"],renderTpl:['<div id="{id}-innerCt" role="presentation">','<table cellPadding="0" cellSpacing="0" class="'+r.join(" ")+'">','<tr class="'+t.summaryRowCls+'"></tr>',"</table>","</div>"],style:"overflow:hidden",itemId:"summaryBar",cls:[t.dockedSummaryCls,t.dockedSummaryCls+"-"+t.dock],xtype:"component",dock:t.dock,weight:1e7})[0]},afterrender:function(){e.body.addCls(t.panelBodyCls+t.dock),n.mon(n.el,{scroll:t.onViewScroll,scope:t}),t.onStoreUpdate()},single:!0}),e.headerCt.afterComponentLayout=Ext.Function.createSequence(e.headerCt.afterComponentLayout,function(){var e=this.getFullWidth(),r=t.summaryBar.innerCt,i;n.hasVerticalScroll()&&(i=Ext.getScrollbarSize().width,e-=i,r.down("table").setStyle(t.scrollPadProperty,i+"px")),r.setWidth(e)})):t.view.addFooterFn(t.renderTFoot),e.on({columnmove:t.onStoreUpdate,scope:t}),n.mon(n.store,{update:t.onStoreUpdate,datachanged:t.onStoreUpdate,scope:t})},renderTFoot:function(e,t){var n=e.view,r=n.findFeature("summary");r.showSummaryRow&&(t.push("<tfoot>"),r.outputSummaryRecord(r.createSummaryRecord(n),e,t),t.push("</tfoot>"))},toggleSummaryRow:function(e){var t=this,n=t.summaryBar;t.callParent(arguments),n&&(n.setVisible(t.showSummaryRow),t.onViewScroll())},vetoEvent:function(e,t,n,r){return!r.getTarget(this.summaryRowSelector)},onViewScroll:function(){this.summaryBar.el.dom.scrollLeft=this.view.el.dom.scrollLeft},createSummaryRecord:function(e){var t=e.headerCt.getVisibleGridColumns(),n={records:e.store.getRange()},r=t.length,i,s,o=this.summaryRecord||(this.summaryRecord=new e.store.model(null,e.id+"-summary-record"));o.beginEdit();for(i=0;i<r;i++)s=t[i],s.dataIndex||(s.dataIndex=s.id),o.set(s.dataIndex,this.getSummary(e.store,s.summaryType,s.dataIndex,n));return o.endEdit(!0),o.commit(!0),o.isSummary=!0,o},onStoreUpdate:function(){var e=this,t=e.view,n=e.createSummaryRecord(t),r=t.createRowElement(n,-1),i,s,o;if(!t.rendered)return;e.dock?i=e.summaryBar.el.down("."+e.summaryRowCls,!0):i=e.view.getNode(n),i&&(o=i.parentNode,o.insertBefore(r,i),o.removeChild(i),s=e.lockingPartner,s&&s.grid.rendered&&!e.calledFromLockingPartner&&(s.calledFromLockingPartner=!0,s.onStoreUpdate(),s.calledFromLockingPartner=!1)),e.dock&&e.onColumnHeaderLayout()},onColumnHeaderLayout:function(){var e=this.view,t=e.headerCt.getVisibleGridColumns(),n,r=t.length,i,s=this.summaryBar.el,o;for(i=0;i<r;i++)n=t[i],o=s.down(e.getCellSelector(n)),o&&(n.hidden?o.setDisplayed(!1):(o.setDisplayed(!0),o.setWidth(n.width||(n.lastBox?n.lastBox.width:100))))}}),Ext.define("Ext.grid.locking.HeaderContainer",{extend:Ext.grid.header.Container,constructor:function(e){var t=this,n,r,i=[],s=e.lockedGrid,o=e.normalGrid;t.lockable=e,t.callParent(),s.visibleColumnManager.rootColumns=o.visibleColumnManager.rootColumns=e.visibleColumnManager=t.visibleColumnManager=new Ext.grid.ColumnManager(!0,s.headerCt,o.headerCt),s.columnManager.rootColumns=o.columnManager.rootColumns=e.columnManager=t.columnManager=new Ext.grid.ColumnManager(!1,s.headerCt,o.headerCt),n=s.headerCt.events;for(r in n)n.hasOwnProperty(r)&&i.push(r);t.relayEvents(s.headerCt,i),t.relayEvents(o.headerCt,i)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var e=this,t=e.lockable.lockedGrid.headerCt.getColumnsState(),n=e.lockable.normalGrid.headerCt.getColumnsState();return t.concat(n)},applyColumnsState:function(e){var t=this,n=t.lockable.lockedGrid,r=n.headerCt,i=t.lockable.normalGrid.headerCt,s=Ext.Array.toValueMap(r.items.items,"headerId"),o=Ext.Array.toValueMap(i.items.items,"headerId"),u=[],a=[],f=1,l=e.length,c,h,p,d;for(c=0;c<l;c++)d=e[c],p=s[d.id],h=p||o[d.id],h&&(h.applyColumnState&&h.applyColumnState(d),h.locked===undefined&&(h.locked=!!p),h.locked?(u.push(h),!h.hidden&&typeof h.width=="number"&&(f+=h.width)):a.push(h));u.length+a.length==r.items.getCount()+i.items.getCount()&&(r.removeAll(!1),i.removeAll(!1),r.add(u),i.add(a),n.setWidth(f))}}),Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",mixins:{observable:Ext.util.Observable},isLockingView:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(e){var t=this,n=[],r=t.eventRelayRe,i=e.locked.getView(),s=e.normal.getView(),o,u;Ext.apply(t,{lockedView:i,normalView:s,lockedGrid:e.locked,normalGrid:e.normal,panel:e.panel}),t.mixins.observable.constructor.call(t,e),o=i.events;for(u in o)o.hasOwnProperty(u)&&r.test(u)&&n.push(u);t.relayEvents(i,n),t.relayEvents(s,n),s.on({scope:t,itemmouseleave:t.onItemMouseLeave,itemmouseenter:t.onItemMouseEnter}),i.on({scope:t,itemmouseleave:t.onItemMouseLeave,itemmouseenter:t.onItemMouseEnter}),t.panel.on({render:t.onPanelRender,scope:t})},onPanelRender:function(){var e=this,t=e.loadMask,n={target:e.panel,msg:e.loadingText,msgCls:e.loadingCls,useMsg:e.loadingUseMsg,store:e.panel.store};e.el=e.panel.body,e.fireEvent("render",e),t&&(Ext.isObject(t)&&(n=Ext.apply(n,t)),e.loadMask=new Ext.LoadMask(n))},getGridColumns:function(){var e=this.lockedGrid.headerCt.getVisibleGridColumns();return e.concat(this.normalGrid.headerCt.getVisibleGridColumns())},getEl:function(e){return this.getViewForColumn(e).getEl()},getViewForColumn:function(e){var t=this.lockedView,n;return t.headerCt.cascade(function(t){if(t===e)return n=!0,!1}),n?t:this.normalView},onItemMouseEnter:function(e,t){var n=this,r=n.lockedView,i=n.normalView,s;e.trackOver&&(e!==r&&(i=r),s=i.getNode(t,!1),i.highlightItem(s))},onItemMouseLeave:function(e,t){var n=this,r=n.lockedView,i=n.normalView;e.trackOver&&(e!==r&&(i=r),i.clearHighlight())},relayFn:function(e,t){t=t||[];var n=this.lockedView;n[e].apply(n,t),n=this.normalView,n[e].apply(n,t)},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},getNode:function(e,t){return this.normalView.getNode(e,t)},getCell:function(e,t){var n=this.getViewForColumn(t),r=n.getNode(e,!0);return Ext.fly(r).down(t.getCellSelector())},indexOf:function(e){var t=this.lockedView.indexOf(e);return t||(t=this.normalView.indexOf(e)),t},focus:function(){var e=this.getSelectionModel().getCurrentPosition(),t=e?e.view:this.normalView;t.focus()},focusRow:function(e){this.normalView.focusRow(e)},focusCell:function(e){e.view.focusCell(e)},isVisible:function(e){return this.panel.isVisible(e)},getCellByPosition:function(e,t){var n=e.column,r=this.lockedGrid.getColumnManager().getColumns().length;return n>=r?(e=Ext.apply({},e),e.column-=r,this.normalView.getCellByPosition(e,t)):this.lockedView.getCellByPosition(e,t)},getRecord:function(e){var t=this.lockedView.getRecord(e);return t||(t=this.normalView.getRecord(e)),t},scrollBy:function(){var e=this.normalView;e.scrollBy.apply(e,arguments)},addElListener:function(e,t,n){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},refresh:function(){this.relayFn("refresh",arguments)},bindStore:function(){this.relayFn("bindStore",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var e=this,t=e.loadMask;e.clearListeners(),t&&t.bindStore&&t.bindStore(null)}}),Ext.define("Ext.grid.locking.Lockable",{alternateClassName:"Ext.grid.Lockable",syncRowHeight:!0,headerCounter:0,scrollDelta:40,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","columnLines","rowLines"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){var t=this,n,r,i,s,o;if(t.subGridXType)n=t.subGridXType;else{if(!e)return"gridpanel";r=this.getXTypes().split("/"),i=r.length,s=r[i-1],o=r[i-2],o!=="tablepanel"?n=o:n=s}return n},injectLockable:function(){this.lockable=!0,this.hasView=!0;var e=this,t=Ext.getScrollbarSize().height,n=e.store=Ext.StoreManager.lookup(e.store),r=e.getSelectionModel(),i,s,o,u,a,f,l,c,h,p,d,v=e.viewConfig&&e.viewConfig.loadMask,m=e.findPlugin("bufferedrenderer");i=e.constructLockableFeatures(),e.features&&(e.features=null),s=e.constructLockablePlugins(),e.plugins=s.topPlugins,o=Ext.apply({id:e.id+"-locked",isLocked:!0,ownerLockable:e,xtype:e.determineXTypeToCreate(!0),store:n,scrollerOwner:!1,animate:!1,scroll:t?!1:"vertical",selModel:r,border:!1,cls:e.lockedGridCls,isLayoutRoot:function(){return!1},features:i.lockedFeatures,plugins:s.lockedPlugins},e.lockedGridConfig),u=Ext.apply({id:e.id+"-normal",isLocked:!1,ownerLockable:e,xtype:e.determineXTypeToCreate(),store:n,scrollerOwner:!1,selModel:r,border:!1,isLayoutRoot:function(){return!1},features:i.normalFeatures,plugins:s.normalPlugins},e.normalGridConfig),e.addCls(Ext.baseCSSPrefix+"grid-locked"),Ext.copyTo(u,e,e.bothCfgCopy,!0),Ext.copyTo(o,e,e.bothCfgCopy,!0),Ext.copyTo(u,e,e.normalCfgCopy,!0),Ext.copyTo(o,e,e.lockedCfgCopy,!0);for(a=0;a<e.normalCfgCopy.length;a++)delete e[e.normalCfgCopy[a]];for(a=0;a<e.lockedCfgCopy.length;a++)delete e[e.lockedCfgCopy[a]];e.addEvents("processcolumns","lockcolumn","unlockcolumn"),e.addStateEvents(["lockcolumn","unlockcolumn"]),f=e.processColumns(e.columns),o.width=f.lockedWidth+Ext.num(r.headerWidth,0)+(f.locked.items.length?1:0),o.columns=f.locked,u.columns=f.normal,u.flex=1,o.viewConfig=e.lockedViewConfig||{},o.viewConfig.loadingUseMsg=!1,o.viewConfig.loadMask=!1,t&&(o.viewConfig.style="border-bottom:"+t+"px solid #f6f6f6;"+(o.viewConfig.style||"")),u.viewConfig=e.normalViewConfig||{},u.viewConfig.loadMask=!1,Ext.applyIf(o.viewConfig,e.viewConfig),Ext.applyIf(u.viewConfig,e.viewConfig),e.lockedGrid=Ext.ComponentManager.create(o),e.isTree&&(e.lockedGrid.getView().animate=!1,u.store=e.lockedGrid.view.store,u.deferRowRender=!1,u.viewConfig.stripeRows=e.lockedGrid.view.stripeRows,u.rowLines=e.lockedGrid.rowLines),h=e.lockedGrid.getView(),u.viewConfig.lockingPartner=h,e.normalGrid=Ext.ComponentManager.create(u),h.lockingPartner=p=e.normalGrid.getView(),e.view=new Ext.grid.locking.View({loadingText:p.loadingText,loadingCls:p.loadingCls,loadingUseMsg:p.loadingUseMsg,loadMask:v===undefined?e.loadMask:v,locked:e.lockedGrid,normal:e.normalGrid,panel:e}),d=m?{}:{scroll:{fn:e.onLockedViewScroll,element:"el",scope:e}},t&&(e.lockedGrid.on({afterlayout:e.afterLockedViewLayout,scope:e}),h.getOverflowStyle(),h.scrollFlags.y?e.lockedGrid.headerCt.forceFit=!0:d.mousewheel={fn:e.onLockedViewMouseWheel,element:"el",scope:e}),h.on(d),d=m?{}:{scroll:{fn:e.onNormalViewScroll,element:"el",scope:e},scope:e},p.on(d),l=e.lockedGrid.headerCt,c=e.normalGrid.headerCt,e.headerCt=e.view.headerCt=new Ext.grid.locking.HeaderContainer(e),l.lockedCt=!0,l.lockableInjected=!0,c.lockableInjected=!0,l.on({add:{buffer:1,scope:e,fn:e.onLockedHeaderAdd},columnshow:e.onLockedHeaderShow,columnhide:e.onLockedHeaderHide,sortchange:e.onLockedHeaderSortChange,columnresize:e.onLockedHeaderResize,scope:e}),c.on({sortchange:e.onNormalHeaderSortChange,scope:e}),e.modifyHeaderCt(),e.items=[e.lockedGrid,e.normalGrid],e.relayHeaderCtEvents(l),e.relayHeaderCtEvents(c),e.storeRelayers=e.relayEvents(n,["filterchange","groupchange"]),e.layout={type:"hbox",align:"stretch"}},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(e){var t,n,r,i=new Ext.grid.header.Container,s=[],o=[],u={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:s},a={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:o},f={lockedWidth:0,locked:u,normal:a};Ext.isObject(e)&&(Ext.applyIf(u,e),Ext.applyIf(a,e),Ext.apply(i,e),e=e.items);for(t=0,n=e.length;t<n;++t)r=e[t],r.isComponent||(r=i.lookupComponent(i.applyDefaults(r))),r.processed=!0,r.locked||r.autoLock?(r.hidden||(f.lockedWidth+=this.getColumnWidth(r)||i.defaultWidth),s.push(r)):o.push(r),r.headerId||(r.headerId=(r.initialConfig||r).id||"h"+ ++this.headerCounter);return this.fireEvent("processcolumns",this,s,o),i.destroy(),f},getColumnWidth:function(e){var t=e.width||0,n,r,i;if(!t&&e.isGroupHeader){n=e.items.items,r=n.length;for(i=0;i<r;i++)t+=this.getColumnWidth(n[i])}return t},afterLockedViewLayout:function(){var e=this,t=e.lockedGrid.getView(),n=t.el.dom,r=e.normalGrid.headerCt.tooNarrow?Ext.getScrollbarSize().height:0;t.scrollFlags.x&&n.scrollWidth>n.clientWidth&&(r=0),t.el.dom.style.borderBottomWidth=r+"px",Ext.isBorderBox||t.el.setHeight(t.lastBox.height)},onLockedViewMouseWheel:function(e){var t=this,n=-t.scrollDelta,r=n*e.getWheelDeltas().y,i=t.lockedGrid.getView().el.dom,s,o;if(!t.ignoreMousewheel){i&&(s=i.scrollTop!==i.scrollHeight-i.clientHeight,o=i.scrollTop!==0);if(r<0&&o||r>0&&s)e.stopEvent(),i.scrollTop+=r,t.normalGrid.getView().el.dom.scrollTop=i.scrollTop,t.onNormalViewScroll()}},onLockedViewScroll:function(){var e=this,t=e.lockedGrid.getView(),n=e.normalGrid.getView(),r=n.el.dom,i=t.el.dom,s,o;r.scrollTop!==i.scrollTop&&(r.scrollTop=i.scrollTop,e.store.buffered&&(o=t.el.child("table",!0),s=n.el.child("table",!0),s.style.position="absolute",s.style.top=o.style.top))},onNormalViewScroll:function(){var e=this,t=e.lockedGrid.getView(),n=e.normalGrid.getView(),r=n.el.dom,i=t.el.dom,s,o;r.scrollTop!==i.scrollTop&&(i.scrollTop=r.scrollTop,e.store.buffered&&(o=t.el.child("table",!0),s=n.el.child("table",!0),o.style.position="absolute",o.style.top=s.style.top))},syncRowHeights:function(){var e=this,t,n=e.lockedGrid.getView(),r=e.normalGrid.getView(),i=n.all.slice(),s=r.all.slice(),o=i.length,u;if(s.length===o){for(t=0;t<o;t++)r.syncRowHeights(i[t],s[t]);u=r.el.dom.scrollTop,r.el.dom.scrollTop=u,n.el.dom.scrollTop=u}},modifyHeaderCt:function(){var e=this;e.lockedGrid.headerCt.getMenuItems=e.getMenuItems(e.lockedGrid.headerCt.getMenuItems,!0),e.normalGrid.headerCt.getMenuItems=e.getMenuItems(e.normalGrid.headerCt.getMenuItems,!1),e.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.lockedGrid.headerCt.showMenuBy,e.showMenuBy),e.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.normalGrid.headerCt.showMenuBy,e.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(e,t){var n=this.getMenu(),r=n.down("#unlockItem"),i=n.down("#lockItem"),s=r.prev();t.lockable===!1?(s.hide(),r.hide(),i.hide()):(s.show(),r.show(),i.show(),r.initialConfig.disabled||r.setDisabled(t.lockable===!1),i.initialConfig.disabled||i.setDisabled(!t.isLockable()))},getMenuItems:function(e,t){var n=this,r=n.unlockText,i=n.lockText,s=Ext.baseCSSPrefix+"hmenu-unlock",o=Ext.baseCSSPrefix+"hmenu-lock",u=Ext.Function.bind(n.onUnlockMenuClick,n),a=Ext.Function.bind(n.onLockMenuClick,n);return function(){var n=e.call(this);return n.push("-",{itemId:"unlockItem",iconCls:s,text:r,handler:u,disabled:!t}),n.push({itemId:"lockItem",iconCls:o,text:i,handler:a,disabled:t}),n}},syncLockedWidth:function(){var e=this,t=e.lockedGrid,n=t.view,r=n.el.dom,i=e.normalGrid,s=t.headerCt.getVisibleGridColumns().length,o=i.headerCt.getVisibleGridColumns().length;return Ext.suspendLayouts(),o?(i.show(),s?(t.headerCt.forceFit||(delete t.flex,t.setWidth(t.headerCt.getFullWidth())),t.addCls(e.lockedGridCls),t.show()):(t.getView().refresh(),t.hide()),n.el.setStyle(n.getOverflowStyle()),e.ignoreMousewheel=n.scrollFlags.y):(i.hide(),r.style.borderBottomWidth="0",t.flex=1,delete t.width,t.removeCls(e.lockedGridCls),t.show(),n.el.setStyle(i.view.getOverflowStyle()),e.ignoreMousewheel=!0),Ext.resumeLayouts(!0),[s,o]},onLockedHeaderAdd:function(){this.ignoreAddLockedColumn||this.syncLockedWidth()},onLockedHeaderResize:function(){this.syncLockedWidth()},onLockedHeaderHide:function(){this.syncLockedWidth()},onLockedHeaderShow:function(){this.syncLockedWidth()},onLockedHeaderSortChange:function(e,t,n){n&&this.normalGrid.headerCt.clearOtherSortStates(null,!0)},onNormalHeaderSortChange:function(e,t,n){n&&this.lockedGrid.headerCt.clearOtherSortStates(null,!0)},lock:function(e,t,n){var r=this,i=r.normalGrid,s=r.lockedGrid,o=i.headerCt,u,a;e=e||o.getMenu
().activeHeader,n=n||s.headerCt,a=e.ownerCt;if(!e.isLockable())return;e.flex&&(e.width=e.getWidth(),e.flex=null),Ext.suspendLayouts(),a.remove(e,!1),e.locked=!0,r.ignoreAddLockedColumn=!0,Ext.isDefined(t)?n.insert(t,e):n.add(e),r.ignoreAddLockedColumn=!1,u=r.syncLockedWidth(),u[0]&&s.getView().refresh(),u[1]&&i.getView().refresh(),Ext.resumeLayouts(!0),r.fireEvent("lockcolumn",r,e)},unlock:function(e,t,n){var r=this,i=r.normalGrid,s=r.lockedGrid,o=s.headerCt,u;Ext.isDefined(t)||(t=0),e=e||o.getMenu().activeHeader,n=n||i.headerCt,Ext.suspendLayouts(),e.ownerCt.remove(e,!1),e.locked=!1,n.insert(t,e),u=r.syncLockedWidth(),u[0]&&s.getView().refresh(),u[1]&&i.getView().refresh(),Ext.resumeLayouts(!0),r.fireEvent("unlockcolumn",r,e)},reconfigureLockable:function(e,t){var n=this,r=n.store,i=n.lockedGrid,s=n.normalGrid;Ext.suspendLayouts(),t&&(i.headerCt.removeAll(),s.headerCt.removeAll(),t=n.processColumns(t),n.ignoreAddLockedColumn=!0,i.headerCt.add(t.locked.items),n.ignoreAddLockedColumn=!1,s.headerCt.add(t.normal.items),n.syncLockedWidth()),e&&e!==r?(e=Ext.data.StoreManager.lookup(e),n.store=e,i.bindStore(e),s.bindStore(e)):(i.getView().refresh(),s.getView().refresh()),Ext.resumeLayouts(!0)},constructLockableFeatures:function(){var e=this.features,t,n,r,i,s=0,o;if(e){Ext.isArray(e)||(e=[e]),r=[],i=[],o=e.length;for(;s<o;s++){t=e[s],t.isFeature||(t=Ext.create("feature."+t.ftype,t));switch(t.lockableScope){case"locked":r.push(t);break;case"normal":i.push(t);break;default:t.lockableScope="both",r.push(t),i.push(n=t.clone()),n.lockingPartner=t,t.lockingPartner=n}}}return{normalFeatures:i,lockedFeatures:r}},constructLockablePlugins:function(){var e=this.plugins,t,n,r,i,s,o,u=0,a,f,l;if(e){Ext.isArray(e)||(e=[e]),i=[],s=[],o=[],a=e.length;for(;u<a;u++){t=e[u],t.init?f=t.lockableScope:(l=t.ptype?Ext.ClassManager.getByAlias("plugin."+t.ptype):Ext.ClassManager.get(t.xclass),f=l.prototype.lockableScope);switch(f){case"both":s.push(r=t.clonePlugin()),o.push(n=t.clonePlugin()),r.lockingPartner=n,n.lockingPartner=r,Ext.destroy(t);break;case"locked":s.push(t);break;case"normal":o.push(t);break;default:i.push(t)}}}return{topPlugins:i,normalPlugins:o,lockedPlugins:s}},destroyLockable:function(){Ext.destroy(this.view,this.headerCt)}},function(){this.borrow(Ext.AbstractComponent,["constructPlugin"])}),Ext.define("Ext.tree.View",{extend:Ext.view.Table,alias:"widget.treeview",isTreeView:!0,loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",leafCls:Ext.baseCSSPrefix+"grid-tree-node-leaf",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",ariaRole:"tree",blockRefresh:!0,loadMask:!1,rootVisible:!0,deferInitialRefresh:!1,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,uiFields:["expanded","loaded","checked","expandable","leaf","icon","iconCls","loading","qtip","qtitle"],treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(e){var t=e.record,n=e.view;e.rowAttr={},e.rowAttr["data-qtip"]=t.get("qtip")||"",e.rowAttr["data-qtitle"]=t.get("qtitle")||"",t.isExpanded()&&e.rowClasses.push(n.expandedCls),t.isLeaf()&&e.rowClasses.push(n.leafCls),t.isLoading()&&e.rowClasses.push(n.loadingCls)}}],initComponent:function(){var e=this,t=e.panel.getStore(),n=e.store;e.initialConfig.animate===undefined&&(e.animate=Ext.enableFx);if(!n||n===t)e.store=n=new Ext.data.NodeStore({treeStore:t,recursive:!0,rootVisible:e.rootVisible});e.node&&e.setRootNode(e.node),e.animQueue={},e.animWraps={},e.addEvents("afteritemexpand","afteritemcollapse","nodedragover"),e.callParent(arguments),e.addRowTpl(Ext.XTemplate.getTpl(e,"treeRowTpl"))},onBeforeFill:function(e,t){this.store.suspendEvents()},onFillComplete:function(e,t,n){var r=this,i=r.store,s=i.indexOf(n[0]);i.resumeEvents(),t.triggerUIUpdate();if(!n.length||s===-1)return;r.onAdd(r.store,n,s),r.refreshPartner()},onBeforeSort:function(){this.store.suspendEvents()},onSort:function(e){e.isStore&&(this.store.resumeEvents(),this.refresh(),this.refreshPartner())},refreshPartner:function(){var e=this.lockingPartner;e&&e.refresh()},getMaskStore:function(){return this.panel.getStore()},afterRender:function(){var e=this;e.callParent(arguments),e.el.on({scope:e,delegate:e.expanderSelector,mouseover:e.onExpanderMouseOver,mouseout:e.onExpanderMouseOut,click:{delegate:e.checkboxSelector,fn:e.onCheckboxChange,scope:e}})},afterComponentLayout:function(){this.callParent(arguments);var e=this.stretcher;e&&e.setWidth(this.getWidth()-Ext.getScrollbarSize().width)},processUIEvent:function(e){return e.getTarget("."+this.nodeAnimWrapCls,this.el)?!1:this.callParent(arguments)},onClear:function(){this.store.removeAll()},setRootNode:function(e){var t=this;t.store.setNode(e),t.node=e},onCheckboxChange:function(e,t){var n=this,r=e.getTarget(n.getItemSelector(),n.getTargetEl());r&&n.onCheckChange(n.getRecord(r))},onCheckChange:function(e){var t=e.get("checked");Ext.isBoolean(t)&&(t=!t,e.set("checked",t),this.fireEvent("checkchange",e,t))},getChecked:function(){var e=[];return this.node.cascadeBy(function(t){t.get("checked")&&e.push(t)}),e},isItemChecked:function(e){return e.get("checked")},createAnimWrap:function(e,t){var n=this,r=n.getNode(e),i,s,o=[];return n.renderColumnSizer(o),s=Ext.get(r),i=s.insertSibling({role:"presentation",tag:"tr",html:['<td colspan="'+n.panel.headerCt.getColumnCount()+'" role="presentation">','<div class="'+n.nodeAnimWrapCls+'" role="presentation">','<table class="'+Ext.baseCSSPrefix+n.id+"-table "+Ext.baseCSSPrefix+'grid-table" style="border:0" cellspacing="0" cellpadding="0" role="presentation">',o.join(""),"<tbody></tbody></table>","</div>","</td>"].join("")},"after"),{record:e,node:r,el:i,expanding:!1,collapsing:!1,animating:!1,animateEl:i.down("div"),targetEl:i.down("tbody")}},getAnimWrap:function(e,t){if(!this.animate)return null;var n=this.animWraps,r=n[e.internalId];if(t!==!1)while(!r&&e)e=e.parentNode,e&&(r=n[e.internalId]);return r},doAdd:function(e,t){var n=this,r=n.bufferRender(e,t,!0),i=e[0],s=i.parentNode,o=n.all,u,a=n.getAnimWrap(s),f,l,c;if(!a||!a.expanding)return n.callParent(arguments);s=a.record,f=a.targetEl,l=f.dom.childNodes,c=l.length,u=t-n.indexInStore(s)-1,!c||u>=c?f.appendChild(r):Ext.fly(l[u]).insertSibling(r,"before",!0),o.insert(t,r),a.isAnimating&&n.onExpand(s)},onRemove:function(e,t,n){var r=this,i,s;if(r.viewReady){i=r.store.getCount()===0;if(i)r.refresh();else for(s=n.length-1;s>=0;--s)r.doRemove(t[s],n[s]);if(r.hasListeners.itemremove)for(s=n.length-1;s>=0;--s)r.fireEvent("itemremove",t[s],n[s])}},doRemove:function(e,t){var n=this,r=n.all,i=n.getAnimWrap(e),s=r.item(t),o=s?s.dom:null;if(!o||!i||!i.collapsing)return n.callParent(arguments);i.targetEl.dom.insertBefore(o,i.targetEl.dom.firstChild),r.removeElement(t)},onBeforeExpand:function(e,t,n){var r=this,i;r.rendered&&r.all.getCount()&&r.animate&&r.getNode(e)&&(i=r.getAnimWrap(e,!1),i?i.collapsing&&i.targetEl.select(r.itemSelector).remove():(i=r.animWraps[e.internalId]=r.createAnimWrap(e),i.animateEl.setHeight(0)),i.expanding=!0,i.collapsing=!1)},onExpand:function(e){var t=this,n=t.animQueue,r=e.getId(),i=t.getNode(e),s=i?t.indexOf(i):-1,o,u,a,f=Ext.isIEQuirks?1:0;t.singleExpand&&t.ensureSingleExpand(e);if(s===-1)return;o=t.getAnimWrap(e,!1);if(!o){t.refreshSelection(),e.isExpandingOrCollapsing=!1,t.fireEvent("afteritemexpand",e,s,i),t.refreshSize();return}u=o.animateEl,a=o.targetEl,u.stopAnimation(),n[r]=!0,u.dom.style.height=f+"px",u.animate({from:{height:f},to:{height:a.getHeight()},duration:t.expandDuration,listeners:{afteranimate:function(){var e=a.query(t.itemSelector);e.length&&o.el.insertSibling(e,"before",!0),o.el.remove(),t.refreshSize(),delete t.animWraps[o.record.internalId],delete n[r]}},callback:function(){t.refreshSelection(),e.isExpandingOrCollapsing=!1,t.fireEvent("afteritemexpand",e,s,i)}}),o.isAnimating=!0},onBeforeCollapse:function(e,t,n,r,i){var s=this,o;s.rendered&&s.all.getCount()&&(s.animate?Ext.Array.contains(e.stores,s.store)&&(o=s.getAnimWrap(e),o?o.expanding&&o.targetEl.select(this.itemSelector).remove():o=s.animWraps[e.internalId]=s.createAnimWrap(e,n),o.expanding=!1,o.collapsing=!0,o.callback=r,o.scope=i):(s.onCollapseCallback=r,s.onCollapseScope=i),s.onRowDeselect(s.indexOf(e.firstChild)))},onCollapse:function(e){var t=this,n=t.animQueue,r=e.getId(),i=t.getNode(e),s=i?t.indexOf(i):-1,o=t.getAnimWrap(e),u;if(!t.all.getCount()||!Ext.Array.contains(e.stores,t.store))return;if(!o){t.refreshSelection(),e.isExpandingOrCollapsing=!1,t.fireEvent("afteritemcollapse",e,s,i),t.refreshSize(),Ext.callback(t.onCollapseCallback,t.onCollapseScope),t.onCollapseCallback=t.onCollapseScope=null;return}u=o.animateEl,n[r]=!0,u.stopAnimation(),u.animate({to:{height:Ext.isIEQuirks?1:0},duration:t.collapseDuration,listeners:{afteranimate:function(){o.el.remove(),t.refreshSize(),delete t.animWraps[o.record.internalId],delete n[r]}},callback:function(){t.refreshSelection(),e.isExpandingOrCollapsing=!1,t.fireEvent("afteritemcollapse",e,s,i),Ext.callback(o.callback,o.scope),o.callback=o.scope=null}}),o.isAnimating=!0},isAnimating:function(e){return!!this.animQueue[e.getId()]},expand:function(e,t,n,r){var i=this,s=!!i.animate,o;if(!s||!e.isExpandingOrCollapsing)return e.isLeaf()||(e.isExpandingOrCollapsing=s),Ext.suspendLayouts(),o=e.expand(t,n,r),Ext.resumeLayouts(!0),o},collapse:function(e,t,n,r){var i=this,s=!!i.animate;if(!s||!e.isExpandingOrCollapsing)return e.isLeaf()||(e.isExpandingOrCollapsing=s),e.collapse(t,n,r)},toggle:function(e,t,n,r){e.isExpanded()?this.collapse(e,t,n,r):this.expand(e,t,n,r)},onItemDblClick:function(e,t,n){var r=this,i=r.editingPlugin;r.callParent(arguments),r.toggleOnDblClick&&e.isExpandable()&&(!i||i.clicksToEdit!==2)&&r.toggle(e)},onBeforeItemMouseDown:function(e,t,n,r){return r.getTarget(this.expanderSelector,t)?!1:this.callParent(arguments)},onItemClick:function(e,t,n,r){return r.getTarget(this.expanderSelector,t)&&e.isExpandable()?(this.toggle(e,r.ctrlKey),!1):this.callParent(arguments)},onExpanderMouseOver:function(e,t){e.getTarget(this.cellSelector,10,!0).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(e,t){e.getTarget(this.cellSelector,10,!0).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){var e=this,t=e.callParent(arguments);return Ext.apply(t,{beforeexpand:e.onBeforeExpand,expand:e.onExpand,beforecollapse:e.onBeforeCollapse,collapse:e.onCollapse,write:e.onStoreWrite,datachanged:e.onStoreDataChanged})},onBindStore:function(){var e=this,t=e.getTreeStore();e.callParent(arguments),e.mon(t,{scope:e,beforefill:e.onBeforeFill,fillcomplete:e.onFillComplete}),t.remoteSort||e.mon(t,{scope:e,beforesort:e.onBeforeSort,sort:e.onSort})},onUnbindStore:function(){var e=this,t=e.getTreeStore();e.callParent(arguments),e.mun(t,{scope:e,beforefill:e.onBeforeFill,fillcomplete:e.onFillComplete}),t.remoteSort||e.mun(t,{scope:e,beforesort:e.onBeforeSort,sort:e.onSort})},getTreeStore:function(){return this.panel.store},ensureSingleExpand:function(e){var t=e.parentNode;t&&t.eachChild(function(t){t!==e&&t.isExpanded()&&t.collapse()})},shouldUpdateCell:function(e,t,n){if(n){var r=0,i=n.length;for(;r<i;++r)if(Ext.Array.contains(this.uiFields,n[r]))return!0}return this.callParent(arguments)},onStoreWrite:function(e,t){var n=this.panel.store;n.fireEvent("write",n,t)},onStoreDataChanged:function(e,t){var n=this.panel.store;n.fireEvent("datachanged",n)}}),Ext.define("Ext.grid.plugin.BufferedRendererTreeView",{override:"Ext.tree.View",onRemove:function(e,t,n){var r=this;r.rendered&&r.bufferedRenderer?r.refreshView():r.callParent([e,t,n])}}),Ext.define("Ext.grid.plugin.BufferedRenderer",{extend:Ext.AbstractPlugin,alias:"plugin.bufferedrenderer",lockableScope:"both",percentageFromEdge:.35,variableRowHeight:!1,numFromEdge:8,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:0,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,init:function(e){var t=this,n=e.view,r={scroll:{fn:t.onViewScroll,element:"el",scope:t},boxready:t.onViewResize,resize:t.onViewResize,refresh:t.onViewRefresh,scope:t,destroyable:!0};!t.variableRowHeight&&e.ownerLockable&&(e.ownerLockable.syncRowHeight=!1);if(e.isTree||e.ownerLockable&&e.ownerLockable.isTree)n.blockRefresh=!1,n.loadMask=!0;n.positionBody&&(r.refresh=t.onViewRefresh),t.grid=e,t.view=n,n.bufferedRenderer=t,n.preserveScrollOnRefresh=!0,t.bindStore(n.dataSource),n.getViewRange=function(){return t.getViewRange()},t.position=0,t.gridListeners=e.on("reconfigure",t.onReconfigure,t),t.viewListeners=n.on(r)},bindStore:function(e){var t=this;t.store&&t.unbindStore(),t.storeListeners=e.on({scope:t,clear:t.onStoreClear,destroyable:!0}),t.store=e,t.view.componentLayout.layoutCount&&t.onViewResize(t.view,0,t.view.getHeight())},onReconfigure:function(e,t){t&&t!==this.store&&this.bindStore(t)},unbindStore:function(){this.storeListeners.destroy(),this.store=null},onStoreClear:function(){var e=this;e.view.rendered&&!e.store.isDestroyed&&(e.scrollTop!==0&&(e.ignoreNextScrollEvent=!0,e.view.el.dom.scrollTop=0),e.bodyTop=e.scrollTop=e.position=e.scrollHeight=0,e.lastScrollDirection=e.scrollOffset=null,delete e.rowHeight)},onViewRefresh:function(){var e=this,t=e.view,n=e.scrollHeight,r;t.all.getCount()&&delete e.rowHeight,r=e.getScrollHeight(),(!n||r!=n)&&e.stretchView(t,r),e.scrollTop!==t.el.dom.scrollTop?e.onViewScroll():(e.setBodyTop(e.bodyTop),t.all.getCount()&&(e.viewSize=0,e.onViewResize(t,null,t.getHeight())))},onViewResize:function(e,t,n,r,i){if(!i||n!==i){var s=this,o;o=Math.ceil(n/s.rowHeight)+s.trailingBufferZone+s.leadingBufferZone,s.viewSize=s.setViewSize(o)}},stretchView:function(e,t){var n=this,r=n.store.buffered?n.store.getTotalCount():n.store.getCount();if(n.stretcher)n.stretcher.dom.style.marginTop=t-1+"px";else{var i=e.el;e.refreshCounter&&e.fixedNodes++,r&&n.view.all.endIndex===r-1&&(t=n.bodyTop+e.body.dom.offsetHeight),this.stretcher=i.createChild({style:{width:"1px",height:"1px",marginTop:t-1+"px",left:0,position:"absolute"}},i.dom.firstChild)}},setViewSize:function(e){if(e!==this.viewSize){this.scrollTop=this.view.el.dom.scrollTop;var t=this,n=t.store,r=t.view.all.getCount(),i,s,o=t.lockingPartner;t.viewSize=n.viewSize=e,r&&(i=t.view.all.startIndex,s=Math.min(i+e-1,(n.buffered?n.getTotalCount():n.getCount())-1),o&&o.disable(),t.renderRange(i,s),o&&o.enable())}return e},getViewRange:function(){var e=this,t=e.view.all,n=e.store;return n.data.getCount()?n.getRange(t.startIndex,t.startIndex+(e.viewSize||n.defaultViewSize)-1):[]},scrollTo:function(e,t,n,r){var i=this,s=i.view,o=s.el.dom,u=i.store,a=u.buffered?u.getTotalCount():u.getCount(),f,l,c,h,p,d,v,m;(d=s.dataSource.groupingFeature)&&d.collapsible!==!1?(e=Math.min(Math.max(e,0),s.store.getCount()-1),m=s.store.getAt(e),e=d.indexOf(e),v=d.getGroup(m),v.isCollapsed&&(d.expand(v.name),a=u.buffered?u.getTotalCount():u.getCount())):e=Math.min(Math.max(e,0),a-1),f=Math.max(Math.min(e-(i.leadingBufferZone+i.trailingBufferZone)/2,a-i.viewSize+1),0),p=f*i.rowHeight,l=Math.min(f+i.viewSize-1,a-1),u.getRange(f,l,{callback:function(a,f,l){i.renderRange(f,l,!0),c=u.data.getRange(e,e)[0],h=s.getNode(c,!1),s.body.dom.style.top=p+"px",i.position=i.scrollTop=o.scrollTop=p=Math.min(Math.max(0,p-s.body.getOffsetsTo(h)[1]),o.scrollHeight-o.clientHeight),Ext.isIE&&(o.scrollTop=p),t&&s.selModel.select(c),n&&n.call(r||i,e,c)}})},onViewScroll:function(e,t){var n=this,r=n.store,i=r.buffered?r.getTotalCount():r.getCount(),s,o,u=n.scrollTop=n.view.el.dom.scrollTop,a=!1;if(n.ignoreNextScrollEvent){n.ignoreNextScrollEvent=!1;return}if(!(n.disabled||i<n.viewSize)){s=u-n.position,o=s>0?1:-1;if(Math.abs(s)>=20||o!==n.lastScrollDirection)n.lastScrollDirection=o,n.handleViewScroll(n.lastScrollDirection),a=!0}a||n.lockingPartner&&n.lockingPartner.scrollTop!==u&&(n.lockingPartner.view.el.dom.scrollTop=u)},handleViewScroll:function(e){var t=this,n=t.view.all,r=t.store,i=t.viewSize,s=r.buffered?r.getTotalCount():r.getCount(),o,u;e==-1?n.startIndex&&t.getFirstVisibleRowIndex()-n.startIndex<t.numFromEdge&&(o=Math.max(0,t.getLastVisibleRowIndex()+t.trailingBufferZone-i)):n.endIndex<s-1&&n.endIndex-t.getLastVisibleRowIndex()<t.numFromEdge&&(o=Math.max(0,t.getFirstVisibleRowIndex()-t.trailingBufferZone));if(o!=null){u=Math.min(o+i-1,s-1);if(o!==n.startIndex||u!==n.endIndex){t.renderRange(o,u);return}}t.lockingPartner&&t.lockingPartner.view.el&&t.lockingPartner.scrollTop!==t.scrollTop&&(t.lockingPartner.view.el.dom.scrollTop=t.scrollTop)},renderRange:function(e,t,n){var r=this,i=r.view.all,s=r.store;if(e!==i.startIndex||t!==i.endIndex)s.rangeCached(e,t)?(r.cancelLoad(),r.synchronousRender||n?r.onRangeFetched(null,e,t):(r.renderTask||(r.renderTask=new Ext.util.DelayedTask(r.onRangeFetched,r,null,!1)),r.renderTask.delay(1,null,null,[null,e,t]))):r.attemptLoad(e,t)},onRangeFetched:function(e,t,n,r){var i=this,s=i.view,o,u=s.all,a,f=0,l=t*i.rowHeight,c,h=i.lockingPartner;if(s.isDestroyed)return;if(!e){e=i.store.getRange(t,n);if(!e)return}if(t>u.endIndex||n<u.startIndex)u.clear(!0),c=l;u.getCount()?n>u.endIndex?(a=Math.max(t-u.startIndex,0),i.variableRowHeight&&(f=u.item(u.startIndex+a,!0).offsetTop),u.scroll(Ext.Array.slice(e,u.endIndex+1-t),1,a,t,n),i.variableRowHeight?c=i.bodyTop+f:c=l):(a=Math.max(u.endIndex-n,0),o=u.startIndex,u.scroll(Ext.Array.slice(e,0,u.startIndex-t),-1,a,t,n),i.variableRowHeight?c=i.bodyTop-u.item(o,!0).offsetTop:c=l):s.doAdd(e,t),i.position=i.scrollTop,s.positionBody&&i.setBodyTop(c,l),h&&!h.disabled&&!r&&(h.onRangeFetched(e,t,n,!0),h.scrollTop!==i.scrollTop&&(h.view.el.dom.scrollTop=i.scrollTop))},setBodyTop:function(e,t){var n=this,r=n.view,i=n.store,s=r.body.dom,o;e=Math.floor(e),t!==undefined&&(o=e-t,e=t),s.style.position="absolute",s.style.top=(n.bodyTop=e)+"px",o&&(n.scrollTop=n.position=r.el.dom.scrollTop-=o),r.all.endIndex===(i.buffered?i.getTotalCount():i.getCount())-1&&n.stretchView(r,n.bodyTop+s.offsetHeight)},getFirstVisibleRowIndex:function(e,t,n,r){var i=this,s=i.view,o=s.all,u=o.elements,a=s.el.dom.clientHeight,f,l;if(o.getCount()&&i.variableRowHeight){if(!arguments.length){e=o.startIndex,t=o.endIndex,n=i.scrollTop,r=n+a;if(i.bodyTop>r||i.bodyTop+s.body.getHeight()<n)return Math.floor(i.scrollTop/i.rowHeight);f=e+Math.min(i.numFromEdge+(i.lastScrollDirection==-1?i.leadingBufferZone:i.trailingBufferZone),Math.floor((t-e)/2))}else f=e+Math.floor((t-e)/2);l=i.bodyTop+u[f].offsetTop;if(l+u[f].offsetHeight<n)return i.getFirstVisibleRowIndex(f+1,t,n,r);if(l<=n)return f;if(f!==e)return i.getFirstVisibleRowIndex(e,f-1,n,r)}return Math.floor(i.scrollTop/i.rowHeight)},getLastVisibleRowIndex:function(e,t,n,r){var i=this,s=i.view,o=s.all,u=o.elements,a=s.el.dom.clientHeight,f,l,c;if(o.getCount()&&i.variableRowHeight){if(!arguments.length){e=o.startIndex,t=o.endIndex,n=i.scrollTop,r=n+a;if(i.bodyTop>r||i.bodyTop+s.body.getHeight()<n)return Math.floor(i.scrollTop/i.rowHeight)+Math.ceil(a/i.rowHeight);f=t-Math.min(i.numFromEdge+(i.lastScrollDirection==1?i.leadingBufferZone:i.trailingBufferZone),Math.floor((t-e)/2))}else f=e+Math.floor((t-e)/2);l=i.bodyTop+u[f].offsetTop;if(l>r)return i.getLastVisibleRowIndex(e,f-1,n,r);c=l+u[f].offsetHeight;if(c>=r)return f;if(f!==t)return i.getLastVisibleRowIndex(f+1,t,n,r)}return i.getFirstVisibleRowIndex()+Math.ceil(a/i.rowHeight)},getScrollHeight:function(){var e=this,t=e.view,n=e.store,r=!e.hasOwnProperty("rowHeight"),i=e.store.getCount();return i?(r&&t.all.getCount()&&(e.rowHeight=Math.floor(t.body.getHeight()/t.all.getCount())),this.scrollHeight=Math.floor((n.buffered?n.getTotalCount():n.getCount())*e.rowHeight)):0},attemptLoad:function(e,t){var n=this;n.scrollToLoadBuffer?(n.loadTask||(n.loadTask=new Ext.util.DelayedTask(n.doAttemptLoad,n,[])),n.loadTask.delay(n.scrollToLoadBuffer,n.doAttemptLoad,n,[e,t])):n.store.getRange(e,t,{callback:n.onRangeFetched,scope:n,fireEvent:!1})},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(e,t){this.store.getRange(e,t,{callback:this.onRangeFetched,scope:this,fireEvent:!1})},destroy:function(){var e=this,t=e.view;t&&t.el&&t.el.un("scroll",e.onViewScroll,e),Ext.destroy(e.viewListeners,e.storeListeners,e.gridListeners)}}),Ext.define("Ext.grid.plugin.Editing",{alias:"editing.editing",extend:Ext.AbstractPlugin,mixins:{observable:Ext.util.Observable},clicksToEdit:2,triggerEvent:undefined,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldXType:"textfield",editStyle:"",constructor:function(e){var t=this;t.addEvents("beforeedit","edit","validateedit","canceledit"),t.callParent(arguments),t.mixins.observable.constructor.call(t),t.on("edit",function(e,n){t.fireEvent("afteredit",e,n)})},init:function(e){var t=this;t.grid=e,t.view=e.view,t.initEvents(),t.mon(e,{beforereconfigure:t.onBeforeReconfigure,reconfigure:t.onReconfigure,scope:t,beforerender:{fn:t.onReconfigure,single:!0,scope:t}}),e.relayEvents(t,t.relayedEvents),t.grid.ownerLockable&&t.grid.ownerLockable.relayEvents(t,t.relayedEvents),e.isEditable=!0,e.editingPlugin=e.view.editingPlugin=t},onBeforeReconfigure:function(){this.reconfiguring=!0},onReconfigure:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns()),delete this.reconfiguring},destroy:function(){var e=this,t=e.grid;Ext.destroy(e.keyNav),e.clearListeners(),t&&(t.editingPlugin=t.view.editingPlugin=e.grid=e.view=e.editor=e.keyNav=null)},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(e){e.isGroupHeader?e=e.getGridColumns():Ext.isArray(e)||(e=[e]);var t=this,n,r=e.length,i;for(n=0;n<r;n++)i=e[n],i.getEditor||(i.getEditor=function(e,n){return t.getColumnField(this,n)}),i.hasEditor||(i.hasEditor=function(){return t.hasColumnField(this)}),i.setEditor||(i.setEditor=function(e){t.setColumnField(this,e)})},removeFieldAccessors:function(e){e.isGroupHeader?e=e.getGridColumns():Ext.isArray(e)||(e=[e]);var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],r.getEditor=r.hasEditor=r.setEditor=null},getColumnField:function(e,t){var n=e.field;if(!n||!n.isFormField)n=e.field=this.createColumnField(e,t);return n},hasColumnField:function(e){return!!e.field},setColumnField:function(e,t){e.field=t,e.field=this.createColumnField(e)},createColumnField:function(e,t){var n=e.field;return!n&&e.editor&&(n=e.editor,e.editor=null),!n&&t&&(n=t),n&&(n.isComponent?(n.column=e,n.isEditorComponent=!0):(Ext.isString(n)?n={name:e.dataIndex,xtype:n,column:e,isEditorComponent:!0}:n=Ext.apply({name:e.dataIndex,column:e,isEditorComponent:!0},n),n=Ext.ComponentManager.create(n,this.defaultFieldXType)),e.field=n),n},initEvents:function(){var e=this;e.initEditTriggers(),e.initLockableEvents(),e.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var e=this,t=e.view;e.triggerEvent=="cellfocus"?e.mon(t,"cellfocus",e.onCellFocus,e):e.triggerEvent=="rowfocus"?e.mon(t,"rowfocus",e.onRowFocus,e):(t.getSelectionModel().isCellModel&&(t.onCellFocus=Ext.Function.bind(e.beforeViewCellFocus,e)),e.mon(t,e.triggerEvent||"cell"+(e.clicksToEdit===1?"click":"dblclick"),e.onCellClick,e)),e.initAddRemoveHeaderEvents(),t.on("render",e.initKeyNavHeaderEvents,e,{single:!0})},initLockableEvents:function(){var e=this,t=e.grid.ownerLockable;t&&t.on({lockcolumn:e.onColumnLockUnlock,unlockcolumn:e.onColumnLockUnlock,scope:e})},beforeViewCellFocus:function(e){(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(e.row,e.columnHeader))&&this.view.focusCell.apply(this.view,arguments)},onRowFocus:function(e,t,n){this.startEdit(t,0)},onCellFocus:function(e,t,n){this.startEdit(n.row,n.column)},onCellClick:function(e,t,n,r,i,s,o){var u=e.expanderSelector,a=e.ownerCt.getColumnManager().getHeaderAtIndex(n),f=a.getEditor(r);(f&&!u||!o.getTarget(u))&&this.startEdit(r,a)},initAddRemoveHeaderEvents:function(){var e=this;e.mon(e.grid.headerCt,{scope:e,add:e.onColumnAdd,remove:e.onColumnRemove,columnmove:e.onColumnMove})},initKeyNavHeaderEvents:function(){var e=this;e.keyNav=Ext.create("Ext.util.KeyNav",e.view.el,{enter:e.onEnterKey,esc:e.onEscKey,scope:e})},onColumnAdd:function(e,t){this.initFieldAccessors(t)},onColumnRemove:function(e,t){this.removeFieldAccessors(t)},onColumnMove:function(e,t,n,r){this.initFieldAccessors(t)},onColumnLockUnlock:function(e,t){this.initFieldAccessors(t)},onEnterKey:function(e){var t=this,n=t.grid,r=n.getSelectionModel(),i,s,o;r.getCurrentPosition&&(s=r.getCurrentPosition())?(i=s.record,o=s.columnHeader):(i=r.getLastSelected(),o=n.getColumnManager().getHeaderAtIndex(0)),i&&o&&t.startEdit(i,o)},onEscKey:function(e){return this.cancelEdit()},beforeEdit:Ext.emptyFn,startEdit:function(e,t){var n=this,r,i=n.grid.lockable?n.grid:n.view;if(!i.componentLayoutCounter)return i.on({boxready:Ext.Function.bind(n.startEdit,n,[e,t]),single:!0}),!1;if(n.grid.collapsed||!n.grid.view.isVisible(!0))return!1;r=n.getEditingContext(e,t);if(r==null)return!1;if(!n.preventBeforeCheck)if(n.beforeEdit(r)===!1||n.fireEvent("beforeedit",n,r)===!1||r.cancel)return!1;return r},getEditingContext:function(e,t){var n=this,r=n.grid,i=r.getColumnManager(),s,o,u,a;Ext.isNumber(t)&&(t=i.getHeaderAtIndex(t)),t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])"));if(!t)return;s=t.getOwnerHeaderCt().view,o=s.getNode(e,!0);if(!o)return;a=i.getHeaderIndex(t),Ext.isNumber(e)?(u=e,e=s.getRecord(o)):u=s.indexOf(o);if(!e)return;return{grid:r,view:s,store:s.dataSource,record:e,field:t.dataIndex,value:e.get(t.dataIndex),row:o,column:t,rowIdx:u,colIdx:a}},cancelEdit:function(){var e=this;e.editing=!1,e.fireEvent("canceledit",e,e.context)},completeEdit:function(){var e=this;e.editing&&e.validateEdit()&&e.fireEvent("edit",e,e.context),e.context=null,e.editing=!1},validateEdit:function(){var e=this,t=e.context;return e.fireEvent("validateedit",e,t)!==!1&&!t.cancel}}),Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:Ext.grid.plugin.Editing,lockableScope:"both",init:function(e){var t=this,n=t.lockingPartner;t.callParent(arguments),n?n.editors?t.editors=n.editors:t.editors=n.editors=new Ext.util.MixedCollection(!1,function(e){return e.editorId}):t.editors=new Ext.util.MixedCollection(!1,function(e){return e.editorId})},onReconfigure:function(e,t,n){n&&this.editors.clear(),this.callParent()},destroy:function(){var e=this;e.editors&&(e.editors.each(Ext.destroy,Ext),e.editors.clear()),e.callParent(arguments)},onBodyScroll:function(){var e=this,t=e.getActiveEditor(),n=e.view.el.getScroll();t&&t.editing&&t.editingPlugin===e&&(n.top!==e.scroll.top?t.field&&(t.field.triggerBlur?t.field.triggerBlur():t.field.blur()):t.realign()),e.scroll=n},initCancelTriggers:function(){var e=this,t=e.grid,n=t.view;e.mon(n,"bodyscroll",e.onBodyScroll,e),e.mon(t,{columnresize:e.cancelEdit,columnmove:e.cancelEdit,scope:e})},isCellEditable:function(e,t){var n=this,r=n.getEditingContext(e,t);if(n.grid.view.isVisible(!0)&&r){t=r.column,e=r.record;if(t&&n.getEditor(e,t))return!0}},startEdit:function(e,t,n){var r=this,i,s,o;if(!n){r.preventBeforeCheck=!0,n=r.callParent(arguments),delete r.preventBeforeCheck;if(n===!1)return!1}if(n&&r.grid.view.isVisible(!0))return e=n.record,t=n.column,s=t&&t.getEditor(e)&&r.beforeEdit(n)!==!1&&r.fireEvent("beforeedit",r,n)!==!1&&!n.cancel,s&&(o=r.getEditor(e,t),i=o.editing),r.completeEdit(),s?(r.context=n,n.originalValue=n.value=e.get(t.dataIndex),r.grid.view.cancelFocus(),r.view.scrollCellIntoView(r.getCell(e,t)),o?(Ext.isIE&&i&&(o.selectSameEditor=!0),r.showEditor(o,n,n.value),!0):!1):!1},showEditor:function(e,t,n){var r=this,i=t.record,s=t.column,o=r.grid.getSelectionModel(),u=o.preventFocus,a=o.getCurrentPosition();if(!s.up(r.view.ownerCt))return r.lockingPartner.showEditor(e,r.lockingPartner.getEditingContext(a.record,a.columnHeader),n);r.setEditingContext(t),r.setActiveEditor(e),r.setActiveRecord(i),r.setActiveColumn(s);if(!a||!o.isCellSelected(r.view,i,s))o.preventFocus=!0,o.selectByPosition({row:i,column:s,view:r.view}),o.preventFocus=u;Ext.isIE&&Ext.EventObject.type==="click"?Ext.Function.defer(e.startEdit,1,e,[r.getCell(i,s),n,t]):e.startEdit(r.getCell(i,s),n,t),r.editing=!0,r.scroll=r.view.el.getScroll()},completeEdit:function(){var e=this.getActiveEditor();e&&(e.completeEdit(),this.editing=!1)},setEditingContext:function(e){this.context=e,this.lockingPartner&&(this.lockingPartner.context=e)},setActiveEditor:function(e){this.activeEditor=e,this.lockingPartner&&(this.lockingPartner.activeEditor=e)},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(e){this.activeColumn=e,this.lockingPartner&&(this.lockingPartner.activeColumn=e)},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(e){this.activeRecord=e,this.lockingPartner&&(this.lockingPartner.activeRecord=e)},getActiveRecord:function(){return this.activeRecord},getEditor:function(e,t){var n=this,r=n.editors,i=t.getItemId(),s=r.getByKey(i),o=n.grid.ownerLockable||n.grid;if(!s){s=t.getEditor(e);if(!s)return!1;s instanceof Ext.grid.CellEditor?s.floating=!0:s=new Ext.grid.CellEditor({floating:!0,editorId:i,field:s}),s.field.excludeForm=!0,o.add(s),s.on({scope:n,specialkey:n.onSpecialKey,complete:n.onEditComplete,canceledit:n.cancelEdit}),t.on("removed",n.cancelActiveEdit,n),r.add(s)}return t.isTreeColumn&&(s.isForTree=t.isTreeColumn,s.addCls(Ext.baseCSSPrefix+"tree-cell-editor")),s.grid=n.grid,s.editingPlugin=n,s},cancelActiveEdit:function(e){var t=this.context;t&&t.column===e&&this.cancelEdit()},setColumnField:function(e,t){var n=this.editors.getByKey(e.getItemId());Ext.destroy(n,e.field),this.editors.removeAtKey(e.getItemId()),this.callParent(arguments)},getCell:function(e,t){return this.grid.getView().getCell(e,t)},onSpecialKey:function(e,t,n){var r;if(n.getKey()===n.TAB){n.stopEvent(),e&&e.onEditorTab(n),r=e.up("tablepanel").getSelectionModel();if(r.onEditorTab)return r.onEditorTab(e.editingPlugin,n)}},onEditComplete:function(e,t,n){var r=this,i=r.getActiveColumn(),s=r.context,o;if(i){o=s.record,r.setActiveEditor(null),r.setActiveColumn(null),r.setActiveRecord(null),s.value=t;if(!r.validateEdit()){r.editing=!1;return}o.isEqual(t,n)||o.set(i.dataIndex,t),s.view.focusRow(s.rowIdx,100),r.fireEvent("edit",r,s),r.editing=!1}},cancelEdit:function(){var e=this,t=e.context,n=e.getActiveEditor();e.setActiveEditor(null),e.setActiveColumn(null),e.setActiveRecord(null);if(n){n.field&&(e.context.value="editedValue"in n?n.editedValue:n.getValue(),n.cancelEdit()),t.view.focusRow(t.rowIdx,100),e.callParent(arguments);return}return!0},startEditByPosition:function(e){var t=this.grid.getColumnManager(),n,r;return e.isCellContext||(e=(new Ext.grid.CellContext(this.view)).setPosition(e)),n=t.getHeaderIndex(e.columnHeader),e.setColumn(t.getVisibleHeaderClosestToIndex(n)),this.startEdit(e.record,e.columnHeader)}}),Ext.define("Ext.grid.plugin.DivRenderer",{alias:"plugin.divrenderer",extend:Ext.AbstractPlugin,tableTpl:['<div id="{view.id}-table" class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,'grid-table" style="{tableStyle}" {ariaTableAttr}>',"{%","values.view.renderRows(values.rows, values.viewStartIndex, out);","%}","</div>",{priority:0}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-data-row";',"%}",'<dl {[values.rowId ? ("id=\\"" + values.rowId + "\\"") : ""]} ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]} {[values.rowClasses.join(" ")]}{[dataRowCls]}" ','style="position:relative" ',"{rowAttr:attributes} {ariaRowAttr}>",'<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, xindex - 1, out, parent)","%}","</tpl>","</dl>",{priority:0}],cellTpl:['<dt class="{tdCls}" {tdAttr} data-cellIndex="{cellIndex}" {ariaCellAttr}>','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner"','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</dt>",{priority:0}],selectors:{bodySelector:"div",nodeContainerSelector:"div",itemSelector:"dl."+Ext.baseCSSPrefix+"grid-row",dataRowSelector:"dl."+Ext.baseCSSPrefix+"grid-data-row",cellSelector:"dt."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getNodeContainerSelector:function(){return this.getBodySelector()},getNodeContainer:function(){return this.el.getById(this.id+"-table",!0)}},init:function(e){var t=e.getView();t.tableTpl=Ext.XTemplate.getTpl(this,"tableTpl"),t.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl"),t.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl"),Ext.apply(t,this.selectors
)}}),Ext.define("Ext.grid.plugin.DragDrop",{extend:Ext.AbstractPlugin,alias:"plugin.gridviewdragdrop",dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:!0,enableDrag:!0,containerScroll:!1,init:function(e){e.on("render",this.onViewRender,this,{single:!0})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},enable:function(){var e=this;e.dragZone&&e.dragZone.unlock(),e.dropZone&&e.dropZone.unlock(),e.callParent()},disable:function(){var e=this;e.dragZone&&e.dragZone.lock(),e.dropZone&&e.dropZone.lock(),e.callParent()},onViewRender:function(e){var t=this,n;t.enableDrag&&(t.containerScroll&&(n=e.getEl()),t.dragZone=new Ext.view.DragZone({view:e,ddGroup:t.dragGroup||t.ddGroup,dragText:t.dragText,containerScroll:t.containerScroll,scrollEl:n})),t.enableDrop&&(t.dropZone=new Ext.grid.ViewDropZone({view:e,ddGroup:t.dropGroup||t.ddGroup}))}}),Ext.define("Ext.grid.plugin.RowEditing",{extend:Ext.grid.plugin.Editing,alias:"plugin.rowediting",lockableScope:"top",editStyle:"row",autoCancel:!0,errorSummary:!0,constructor:function(){var e=this;e.callParent(arguments),e.clicksToMoveEditor||(e.clicksToMoveEditor=e.clicksToEdit),e.autoCancel=!!e.autoCancel},destroy:function(){Ext.destroy(this.editor),this.callParent(arguments)},onBeforeReconfigure:function(){this.callParent(arguments),this.cancelEdit()},onReconfigure:function(e,t,n){var r=this.editor;this.callParent(arguments),n&&r&&r.rendered&&(r.needsSyncFieldWidths=!0)},startEdit:function(e,t){var n=this,r=n.getEditor(),i;Ext.isEmpty(t)&&(t=n.grid.getTopLevelVisibleColumnManager().getHeaderAtIndex(0));if(r.beforeEdit()!==!1){i=n.callParent([e,t]);if(i)return n.context=i,n.lockingPartner&&n.lockingPartner.cancelEdit(),r.startEdit(i.record,i.column,i),n.editing=!0,!0}return!1},cancelEdit:function(){var e=this;if(e.editing){e.getContextFieldValues(),e.getEditor().cancelEdit(),e.callParent(arguments);return}return!0},completeEdit:function(){var e=this;e.editing&&e.validateEdit()&&(e.editing=!1,e.fireEvent("edit",e,e.context))},onEnterKey:function(){this.getEditor().getForm().isValid()&&this.completeEdit()},validateEdit:function(){return this.getContextFieldValues(),this.editing=this.callParent(arguments)&&this.getEditor().completeEdit(),this.editing},getEditor:function(){var e=this;return e.editor||(e.editor=e.initEditor()),e.editor},getContextFieldValues:function(){var e=this.editor,t=this.context,n=t.record,r={},i={},s=e.query(">[isFormField]"),o=s.length,u,a,f;for(u=0;u<o;u++)f=s[u],a=f.name,r[a]=f.getValue(),i[a]=n.get(a);Ext.apply(t,{newValues:r,originalValues:i})},initEditor:function(){return new Ext.grid.RowEditor(this.initEditorConfig())},initEditorConfig:function(){var e=this,t=e.grid,n=e.view,r=t.headerCt,i=["saveBtnText","cancelBtnText","errorsText","dirtyText"],s,o=i.length,u={autoCancel:e.autoCancel,errorSummary:e.errorSummary,fields:r.getGridColumns(),hidden:!0,view:n,editingPlugin:e},a;for(s=0;s<o;s++)a=i[s],Ext.isDefined(e[a])&&(u[a]=e[a]);return u},initEditTriggers:function(){var e=this,t=e.view,n=e.clicksToMoveEditor===1?"click":"dblclick";e.callParent(arguments),e.clicksToMoveEditor!==e.clicksToEdit&&e.mon(t,"cell"+n,e.moveEditorByClick,e),t.on({render:function(){e.mon(e.grid.headerCt,{scope:e,columnresize:e.onColumnResize,columnhide:e.onColumnHide,columnshow:e.onColumnShow})},single:!0})},startEditByClick:function(){var e=this;(!e.editing||e.clicksToMoveEditor===e.clicksToEdit)&&e.callParent(arguments)},moveEditorByClick:function(){var e=this;e.editing&&e.superclass.onCellClick.apply(e,arguments)},onColumnAdd:function(e,t){if(t.isHeader){var n=this,r;n.initFieldAccessors(t),r=n.editor,r&&r.onColumnAdd(t)}},onColumnRemove:function(e,t){if(t.isHeader){var n=this,r=n.getEditor();r&&r.onColumnRemove(e,t),n.removeFieldAccessors(t)}},onColumnResize:function(e,t,n){if(t.isHeader){var r=this,i=r.getEditor();i&&i.onColumnResize(t,n)}},onColumnHide:function(e,t){var n=this,r=n.getEditor();r&&r.onColumnHide(t)},onColumnShow:function(e,t){var n=this,r=n.getEditor();r&&r.onColumnShow(t)},onColumnMove:function(e,t,n,r){var i=this,s=i.getEditor();i.initFieldAccessors(t),s&&s.onColumnMove(t,n,r)},setColumnField:function(e,t){var n=this,r=n.getEditor();r&&r.removeColumnEditor(e,!0),n.callParent(arguments),r&&r.insertColumnEditor(e)},createColumnField:function(e,t){var n=this.editor,r;return n&&(r=n.getDefaultFieldCfg()),this.callParent([e,t||r])}}),Ext.define("Ext.grid.plugin.RowExpander",{extend:Ext.AbstractPlugin,lockableScope:"normal",alias:"plugin.rowexpander",rowBodyTpl:null,expandOnEnter:!0,expandOnDblClick:!0,selectRowOnExpand:!1,rowBodyTrSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowCollapsedCls:Ext.baseCSSPrefix+"grid-row-collapsed",addCollapsedCls:{before:function(e,t){var n=this.rowExpander;n.recordsExpanded[e.record.internalId]||e.itemClasses.push(n.rowCollapsedCls)},priority:500},setCmp:function(e){var t=this,n,r;t.callParent(arguments),t.recordsExpanded={},t.rowBodyTpl=Ext.XTemplate.getTpl(t,"rowBodyTpl"),n=this.rowBodyTpl,r=[{ftype:"rowbody",lockableScope:"normal",recordsExpanded:t.recordsExpanded,rowBodyHiddenCls:t.rowBodyHiddenCls,rowCollapsedCls:t.rowCollapsedCls,setupRowData:t.getRowBodyFeatureData,setup:t.setup,getRowBodyContents:function(e){return n.applyTemplate(e.getData())}},{ftype:"rowwrap",lockableScope:"normal"}],e.features?e.features=Ext.Array.push(r,e.features):e.features=r},init:function(e){var t=this,n=e,r,i,s;e.lockable&&(e=e.lockedGrid),t.callParent(arguments),t.grid=e,r=t.view=e.getView(),t.addExpander(),t.bindView(r),r.addRowTpl(t.addCollapsedCls).rowExpander=t,e.ownerLockable&&(n=e.ownerLockable,n.syncRowHeight=!1,s=n.lockedGrid.getView(),t.bindView(s),s.addRowTpl(t.addCollapsedCls).rowExpander=t,n.mon(n,"columnschanged",t.refreshRowHeights,t),n.mon(n.store,"datachanged",t.refreshRowHeights,t)),n.on("beforereconfigure",t.beforeReconfigure,t),e.ownerLockable&&!e.rowLines&&r.on("rowfocus",t.refreshRowHeights,t)},beforeReconfigure:function(e,t,n,r,i){var s=this.getHeaderConfig();s.locked=!0,n.unshift(s)},addExpander:function(){var e=this,t=e.grid,n=e.getHeaderConfig();t.ownerLockable&&(t=t.ownerLockable.lockedGrid,t.width+=n.width),t.headerCt.insert(0,n),t.getSelectionModel().injectCheckbox=1},getRowBodyFeatureData:function(e,t,n){var r=this;r.self.prototype.setupRowData.apply(r,arguments),n.rowBody=r.getRowBodyContents(e),n.rowBodyCls=r.recordsExpanded[e.internalId]?"":r.rowBodyHiddenCls},setup:function(e,t){var n=this;n.self.prototype.setup.apply(n,arguments),n.grid.ownerLockable||(t.rowBodyColspan-=1)},bindView:function(e){this.expandOnEnter&&e.on("itemkeydown",this.onKeyDown,this),this.expandOnDblClick&&e.on("itemdblclick",this.onDblClick,this)},onKeyDown:function(e,t,n,r,i){if(i.getKey()==i.ENTER){var s=e.store,o=e.getSelectionModel().getSelection(),u=o.length,a=0;for(;a<u;a++)r=s.indexOf(o[a]),this.toggleRow(r,o[a])}},onDblClick:function(e,t,n,r,i){this.toggleRow(r,t)},toggleRow:function(e,t){var n=this,r=n.view,i=r.getNode(e),s=Ext.fly(i,"_rowExpander"),o=s.down(n.rowBodyTrSelector,!0),u=s.hasCls(n.rowCollapsedCls),a=u?"removeCls":"addCls",f,l,c;Ext.suspendLayouts(),s[a](n.rowCollapsedCls),Ext.fly(o)[a](n.rowBodyHiddenCls),n.recordsExpanded[t.internalId]=u,r.refreshSize(),n.grid.ownerLockable?(f=n.grid.ownerLockable,c=f.getView(),r=f.lockedGrid.view,l=s.getHeight(),s.setHeight(u?l:""),s=Ext.fly(r.getNode(e),"_rowExpander"),s.setHeight(u?l:""),s[a](n.rowCollapsedCls),r.refreshSize()):c=r,c.fireEvent(u?"expandbody":"collapsebody",s.dom,t,o),Ext.resumeLayouts(!0)},refreshRowHeights:function(){Ext.globalEvents.on({idle:this.doRefreshRowHeights,scope:this,single:!0})},doRefreshRowHeights:function(){var e=this,t=e.recordsExpanded,n,r,i=e.grid.ownerLockable.lockedGrid.view,s=e.grid.ownerLockable.normalGrid.view,o,u,a,f;for(n in t)t.hasOwnProperty(n)&&(r=this.view.store.data.get(n),u=i.getNode(r,!1),o=s.getNode(r,!1),u.style.height=o.style.height="",a=u.offsetHeight,f=o.offsetHeight,f>a?u.style.height=f+"px":a>f&&(o.style.height=a+"px"))},getHeaderConfig:function(){var e=this;return{width:24,lockable:!1,sortable:!1,resizable:!1,draggable:!1,hideable:!1,menuDisabled:!0,tdCls:Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-expander",renderer:function(t,n){return e.grid.ownerLockable||(n.tdAttr+=' rowspan="2"'),'<div class="'+Ext.baseCSSPrefix+'grid-row-expander" role="presentation"></div>'},processEvent:function(t,n,r,i,s,o,u){if(t=="mousedown"&&o.getTarget("."+Ext.baseCSSPrefix+"grid-row-expander"))return e.toggleRow(i,u),e.selectRowOnExpand}}}}),Ext.define("Ext.grid.property.Grid",{extend:Ext.grid.Panel,alias:"widget.propertygrid",alternateClassName:"Ext.grid.PropertyGrid",valueField:"value",nameField:"name",inferTypes:!0,enableColumnMove:!1,columnLines:!0,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,gridCls:Ext.baseCSSPrefix+"property-grid",initComponent:function(){var e=this;e.source=e.source||{},e.addCls(e.gridCls),e.plugins=e.plugins||[],e.plugins.push(new Ext.grid.plugin.CellEditing({clicksToEdit:e.clicksToEdit,startEdit:function(t,n){return this.self.prototype.startEdit.call(this,t,e.valueColumn)}})),e.selModel={selType:"cellmodel",onCellSelect:function(t){return t.columnHeader=e.valueColumn,t.column=e.valueColumn.getVisibleIndex(),this.self.prototype.onCellSelect.call(this,t)}},e.sourceConfig=Ext.apply({},e.sourceConfig),e.store||(e.propStore=e.store=new Ext.grid.property.Store(e,e.source)),e.configure(e.sourceConfig),e.sortableColumns&&e.store.sort("name","ASC"),e.columns=new Ext.grid.property.HeaderContainer(e,e.store),e.addEvents("beforepropertychange","propertychange"),e.callParent(),e.getView().walkCells=this.walkCells,e.editors={date:new Ext.grid.CellEditor({field:new Ext.form.field.Date({selectOnFocus:!0})}),string:new Ext.grid.CellEditor({field:new Ext.form.field.Text({selectOnFocus:!0})}),number:new Ext.grid.CellEditor({field:new Ext.form.field.Number({selectOnFocus:!0})}),"boolean":new Ext.grid.CellEditor({field:new Ext.form.field.ComboBox({editable:!1,store:[[!0,e.headerCt.trueText],[!1,e.headerCt.falseText]]})})},e.store.on("update",e.onUpdate,e)},configure:function(e){var t=this,n=t.store,r=0,i=t.store.getCount(),s=t.nameField,o=t.valueField,u,a,f,l;t.configureLegacy(e);if(t.inferTypes)for(;r<i;++r)f=n.getAt(r),u=f.get(s),t.getConfig(u,"type")||(a=f.get(o),Ext.isDate(a)?l="date":Ext.isNumber(a)?l="number":Ext.isBoolean(a)?l="boolean":l="string",t.setConfig(u,"type",l))},getConfig:function(e,t,n){var r=this.sourceConfig[e],i;return r&&(i=r[t]),i||n},setConfig:function(e,t,n){var r=this.sourceConfig,i=r[e];return i?i.__copied||(i=Ext.apply({__copied:!0},i),r[e]=i):i=r[e]={__copied:!0},i[t]=n,n},configureLegacy:function(e){var t=this;t.copyLegacyObject(e,t.customRenderers,"renderer"),t.copyLegacyObject(e,t.customEditors,"editor"),t.copyLegacyObject(e,t.propertyNames,"displayName")},copyLegacyObject:function(e,t,n){var r;for(r in t)t.hasOwnProperty(r)&&(e[r]||(e[r]={}),e[r][n]=t[r])},onUpdate:function(e,t,n){var r=this,i,s;r.rendered&&n==Ext.data.Model.EDIT&&(i=t.get(r.valueField),s=t.modified.value,r.fireEvent("beforepropertychange",r.source,t.getId(),i,s)!==!1?(r.source&&(r.source[t.getId()]=i),t.commit(),r.fireEvent("propertychange",r.source,t.getId(),i,s)):t.reject())},walkCells:function(e,t,n,r,i,s){var o=this,u=o.ownerCt.valueColumn;return t=="left"?t="up":t=="right"&&(t="down"),e=Ext.view.Table.prototype.walkCells.call(o,e,t,n,r,i,s),e.columnHeader=u,e.column=u.getVisibleIndex(),e},getCellEditor:function(e,t){var n=this,r=e.get(n.nameField),i=e.get(n.valueField),s=n.getConfig(r,"editor"),o=n.getConfig(r,"type"),u=n.editors;if(s)s instanceof Ext.grid.CellEditor||(s instanceof Ext.form.field.Base||(s=Ext.ComponentManager.create(s,"textfield")),s=n.setConfig(r,"editor",new Ext.grid.CellEditor({field:s})));else if(o)switch(o){case"date":s=u.date;break;case"number":s=u.number;break;case"boolean":s=n.editors["boolean"];break;default:s=u.string}else Ext.isDate(i)?s=u.date:Ext.isNumber(i)?s=u.number:Ext.isBoolean(i)?s=u["boolean"]:s=u.string;return s.editorId=r,s},beforeDestroy:function(){var e=this;e.callParent(),e.destroyEditors(e.editors),e.destroyEditors(e.customEditors),delete e.source},destroyEditors:function(e){for(var t in e)e.hasOwnProperty(t)&&Ext.destroy(e[t])},setSource:function(e,t){var n=this;n.source=e,t!==undefined&&(n.sourceConfig=Ext.apply({},t),n.configure(n.sourceConfig)),n.propStore.setSource(e)},getSource:function(){return this.propStore.getSource()},setProperty:function(e,t,n){this.propStore.setValue(e,t,n)},removeProperty:function(e){this.propStore.remove(e)}}),Ext.define("Ext.grid.property.HeaderContainer",{extend:Ext.grid.header.Container,alternateClassName:"Ext.grid.PropertyColumnModel",nameWidth:115,nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",nameColumnCls:Ext.baseCSSPrefix+"grid-property-name",nameColumnInnerCls:Ext.baseCSSPrefix+"grid-cell-inner-property-name",constructor:function(e,t){var n=this;n.grid=e,n.store=t,n.callParent([{isRootHeader:!0,enableColumnResize:Ext.isDefined(e.enableColumnResize)?e.enableColumnResize:n.enableColumnResize,enableColumnMove:Ext.isDefined(e.enableColumnMove)?e.enableColumnMove:n.enableColumnMove,items:[{header:n.nameText,width:e.nameColumnWidth||n.nameWidth,sortable:e.sortableColumns,dataIndex:e.nameField,renderer:Ext.Function.bind(n.renderProp,n),itemId:e.nameField,menuDisabled:!0,tdCls:n.nameColumnCls,innerCls:n.nameColumnInnerCls},{header:n.valueText,renderer:Ext.Function.bind(n.renderCell,n),getEditor:Ext.Function.bind(n.getCellEditor,n),sortable:e.sortableColumns,flex:1,fixed:!0,dataIndex:e.valueField,itemId:e.valueField,menuDisabled:!0}]}]),n.grid.valueColumn=n.items.items[1]},getCellEditor:function(e){return this.grid.getCellEditor(e,this)},renderProp:function(e){return this.getPropertyName(e)},renderCell:function(e,t,n){var r=this,i=r.grid,s=i.getConfig(n.get(i.nameField),"renderer"),o=e;return s?s.apply(r,arguments):(Ext.isDate(e)?o=r.renderDate(e):Ext.isBoolean(e)&&(o=r.renderBool(e)),Ext.util.Format.htmlEncode(o))},renderDate:Ext.util.Format.date,renderBool:function(e){return this[e?"trueText":"falseText"]},getPropertyName:function(e){return this.grid.getConfig(e,"displayName",e)}}),Ext.define("Ext.grid.property.Property",{extend:Ext.data.Model,alternateClassName:"Ext.PropGridProperty",fields:[{name:"name",type:"string"},{name:"value"}],idProperty:"name"}),Ext.define("Ext.grid.property.Store",{extend:Ext.data.Store,alternateClassName:"Ext.grid.PropertyStore",sortOnLoad:!1,constructor:function(e,t){var n=this;n.grid=e,n.source=t,n.callParent([{data:t,model:Ext.grid.property.Property,proxy:n.getProxy()}])},getProxy:function(){return this.proxy||(Ext.grid.property.Store.prototype.proxy=new Ext.data.proxy.Memory({model:Ext.grid.property.Property,reader:this.getReader()})),this.proxy},getReader:function(){return this.reader||(Ext.grid.property.Store.prototype.reader=new Ext.data.reader.Reader({model:Ext.grid.property.Property,buildExtractors:Ext.emptyFn,read:function(e){return this.readRecords(e)},readRecords:function(e){var t,n,r={records:[],success:!0};for(n in e)e.hasOwnProperty(n)&&(t=e[n],this.isEditableValue(t)&&r.records.push(new Ext.grid.property.Property({name:n,value:t},n)));return r.total=r.count=r.records.length,new Ext.data.ResultSet(r)},isEditableValue:function(e){return Ext.isPrimitive(e)||Ext.isDate(e)||e===null}})),this.reader},setSource:function(e){var t=this;t.source=e,t.suspendEvents(),t.removeAll(),t.proxy.data=e,t.load(),t.resumeEvents(),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)},getProperty:function(e){return Ext.isNumber(e)?this.getAt(e):this.getById(e)},setValue:function(e,t,n){var r=this,i=r.getRec(e);i?(i.set("value",t),r.source[e]=t):n&&(r.source[e]=t,i=new Ext.grid.property.Property({name:e,value:t},e),r.add(i))},remove:function(e){var t=this.getRec(e);t&&(this.callParent([t]),delete this.source[e])},getRec:function(e){return this.getById(e)},getSource:function(){return this.source}}),Ext.define("Ext.layout.ClassList",function(){var e=Ext.String.splitWords,t=Ext.Array.toMap;return{dirty:!1,constructor:function(n){this.owner=n,this.map=t(this.classes=e(n.el.className))},add:function(e){var t=this;t.map[e]||(t.map[e]=!0,t.classes.push(e),t.dirty||(t.dirty=!0,t.owner.markDirty()))},addMany:function(t){Ext.each(e(t),this.add,this)},contains:function(e){return this.map[e]},flush:function(){this.owner.el.className=this.classes.join(" "),this.dirty=!1},remove:function(e){var t=this;t.map[e]&&(delete t.map[e],t.classes=Ext.Array.filter(t.classes,function(t){return t!=e}),t.dirty||(t.dirty=!0,t.owner.markDirty()))},removeMany:function(n){var r=this,i=t(e(n));r.classes=Ext.Array.filter(r.classes,function(e){return i[e]?(delete r.map[e],r.dirty||(r.dirty=!0,r.owner.markDirty()),!1):!0})}}}()),Ext.define("Ext.util.Queue",{constructor:function(){this.clear()},add:function(e){var t=this,n=t.getKey(e);return t.map[n]||(++t.length,t.items.push(e),t.map[n]=e),e},clear:function(){var e=this,t=e.items;return e.items=[],e.map={},e.length=0,t},contains:function(e){var t=this.getKey(e);return this.map.hasOwnProperty(t)},getCount:function(){return this.length},getKey:function(e){return e.id},remove:function(e){var t=this,n=t.getKey(e),r=t.items,i;return t.map[n]&&(i=Ext.Array.indexOf(r,e),Ext.Array.erase(r,i,1),delete t.map[n],--t.length),e}}),Ext.define("Ext.layout.ContextItem",{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,isBorderBoxValue:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(e){var t=this,n=Ext.layout.SizeModel.sizeModels,r=n.configured,i=n.shrinkWrap,s,o,u,a,f,l,c,h,p,d,v,m,g,y;Ext.apply(t,e),s=t.el,t.id=s.id,t.flushedProps={},t.props=f={},t.styles={},c=t.target,c.isComponent?(t.wrapsComponent=!0,t.framing=c.frameSize||null,t.isComponentChild=c.ownerLayout&&c.ownerLayout.isComponentLayout,o=c.lastBox,u=c.ownerCt,u&&(a=u.el&&t.context.items[u.el.id])&&(t.ownerCtContext=a),t.sizeModel=l=c.getSizeModel(a&&a.widthModel.pairsByHeightOrdinal[a.heightModel.ordinal]),t.widthModel=m=l.width,t.heightModel=g=l.height,o&&o.invalid===!1&&(d=c.width===(h=o.width),v=c.height===(p=o.height),m===i&&g===i?y=!0:m===r&&d&&(y=g===i||g===r&&v),y&&(t.optOut=!0,f.width=h,f.height=p))):o=s.lastBox,t.lastBox=o},init:function(e,t){var n=this,r=n.props,i=n.dirty,s=n.ownerCtContext,o=n.target.ownerLayout,u=!n.state,a=e||u,f,l,c,h,p,d,v=n.heightModel,m=n.widthModel,g,y,b=0;n.dirty=n.invalid=!1,n.props={},n.remainingChildDimensions=0,n.boxChildren&&(n.boxChildren.length=0),u||(n.clearAllBlocks("blocks"),n.clearAllBlocks("domBlocks"));if(!n.wrapsComponent)return a;d=n.target,n.state={};if(u)d.beforeLayout&&d.beforeLayout!==Ext.emptyFn&&d.beforeLayout(),!s&&(h=d.ownerCt)&&(s=n.context.items[h.el.id]),s?(n.ownerCtContext=s,n.isBoxParent=d.ownerLayout.isItemBoxParent(n)):n.isTopLevel=!0,n.frameBodyContext=n.getEl("frameBody");else{s=n.ownerCtContext,n.isTopLevel=!s,f=n.children;for(l=0,c=f.length;l<c;++l)f[l].init(!0)}return n.hasRawContent=!(d.isContainer&&d.items.items.length>0),e?(n.widthModel=n.heightModel=null,p=d.getSizeModel(s&&s.widthModel.pairsByHeightOrdinal[s.heightModel.ordinal]),u&&(n.sizeModel=p),n.widthModel=p.width,n.heightModel=p.height,s&&!n.isComponentChild&&(s.remainingChildDimensions+=2)):r&&(n.recoverProp("x",r,i),n.recoverProp("y",r,i),n.widthModel.calculated?n.recoverProp("width",r,i):"width"in r&&++b,n.heightModel.calculated?n.recoverProp("height",r,i):"height"in r&&++b,s&&!n.isComponentChild&&(s.remainingChildDimensions+=b)),r&&o&&o.manageMargins&&(n.recoverProp("margin-top",r,i),n.recoverProp("margin-right",r,i),n.recoverProp("margin-bottom",r,i),n.recoverProp("margin-left",r,i)),t&&(g=t.heightModel,y=t.widthModel,y&&g&&m&&v&&m.shrinkWrap&&v.shrinkWrap&&y.constrainedMax&&g.constrainedMin&&(g=null),y&&(n.widthModel=y),g&&(n.heightModel=g),t.state&&Ext.apply(n.state,t.state)),a},initContinue:function(e){var t=this,n=t.ownerCtContext,r=t.target,i=t.widthModel,s=r.getHierarchyState(),o;return i.fixed?s.inShrinkWrapTable=!1:delete s.inShrinkWrapTable,e&&(n&&i.shrinkWrap?(o=n.isBoxParent?n:n.boxParent,o&&o.addBoxChild(t)):i.natural&&(t.boxParent=n)),e},initDone:function(e){var t=this,n=t.props,r=t.state;t.remainingChildDimensions===0&&(n.containerChildrenSizeDone=!0),e&&(n.containerLayoutDone=!0),t.boxChildren&&t.boxChildren.length&&t.widthModel.shrinkWrap&&(t.el.setWidth(1e4),r.blocks=(r.blocks||0)+1)},initAnimation:function(){var e=this,t=e.target,n=e.ownerCtContext;n&&n.isTopLevel?e.animatePolicy=t.ownerLayout.getAnimatePolicy(e):!n&&t.isCollapsingOrExpanding&&t.animCollapse&&(e.animatePolicy=t.componentLayout.getAnimatePolicy(e)),e.animatePolicy&&e.context.queueAnimation(e)},addCls:function(e){this.getClassList().addMany(e)},removeCls:function(e){this.getClassList().removeMany(e)},addBlock:function(e,t,n){var r=this,i=r[e]||(r[e]={}),s=i[n]||(i[n]={});s[t.id]||(s[t.id]=t,++t.blockCount,++r.context.blockCount)},addBoxChild:function(e){var t=this,n,r=e.widthModel;e.boxParent=this,e.measuresBox=r.shrinkWrap?e.hasRawContent:r.natural,e.measuresBox&&(n=t.boxChildren,n?n.push(e):t.boxChildren=[e])},addPositionStyles:function(e,t){var n=t.x,r=t.y,i=0;return n!==undefined&&(e.left=n+"px",++i),r!==undefined&&(e.top=r+"px",++i),i},addTrigger:function(e,t){var n=this,r=t?"domTriggers":"triggers",i=n[r]||(n[r]={}),s=n.context,o=s.currentLayout,u=i[e]||(i[e]={});u[o.id]||(u[o.id]=o,++o.triggerCount,u=s.triggers[t?"dom":"data"],(u[o.id]||(u[o.id]=[])).push({item:this,prop:e}),n.props[e]!==undefined&&(!t||!(n.dirty&&e in n.dirty))&&++o.firedTriggers)},boxChildMeasured:function(){var e=this,t=e.state,n=t.boxesMeasured=(t.boxesMeasured||0)+1;n==e.boxChildren.length&&(t.clearBoxWidth=1,++e.context.progressCount,e.markDirty())},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(e){var t=e.getStyles(e.borderNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},marginInfo:function(e){var t=e.getStyles(e.marginNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},paddingInfo:function(e){var t=e.frameBodyContext||e,n=t.getStyles(e.paddingNames,e.trblNames);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}},checkCache:function(e){return this.cacheMissHandlers[e](this)},clearAllBlocks:function(e){var t=this[e],n;if(t)for(n in t)this.clearBlocks(e,n)},clearBlocks:function(e,t){var n=this[e],r=n&&n[t],i,s,o;if(r){delete n[t],i=this.context;for(o in r)s=r[o],--i.blockCount,!--s.blockCount&&!s.pending&&!s.done&&i.queueLayout(s)}},block:function(e,t){this.addBlock("blocks",e,t)},domBlock:function(e,t){this.addBlock("domBlocks",e,t)},fireTriggers:function(e,t){var n=this[e],r=n&&n[t],i=this.context,s,o;if(r)for(o in r)s=r[o],++s.firedTriggers,!s.done&&!s.blockCount&&!s.pending&&i.queueLayout(s)},flush:function(){var e=this,t=e.dirty,n=e.state,r=e.el;e.dirtyCount=0,e.classList&&e.classList.dirty&&e.classList.flush(),"attributes"in e&&(r.set(e.attributes),delete e.attributes),"innerHTML"in e&&(r.innerHTML=e.innerHTML,delete e.innerHTML),n&&n.clearBoxWidth&&(n.clearBoxWidth=0,e.el.setStyle("width",null),--n.blocks||e.context.queueItemLayouts(e)),t&&(delete e.dirty,e.writeProps(t,!0))},flushAnimations:function(){var e=this,t=e.previousSize,n,r,i,s,o,u,a,f,l,c,h;if(t){n=e.target,r=n.layout&&n.layout.animate,r&&(i=Ext.isNumber(r)?r:r.duration),s=Ext.Object.getKeys(e.animatePolicy),o=Ext.apply({},{from:{},to:{},duration:i||Ext.fx.Anim.prototype.duration},r);for(u=0,a=0,f=s.length;a<f;a++)l=s[a],c=t[l],h=e.peek(l),c!=h&&(l=e.translateProps[l]||l,o.from[l]=c,o.to[l]=h,++u);u&&(e.isCollapsingOrExpanding===1?n.componentLayout.undoLayout(e):e.writeProps(o.from),e.el.animate(o),Ext.fx.Manager.getFxQueue(e.el.id)[0].on({afteranimate:function(){e.isCollapsingOrExpanding===1?(n.componentLayout.redoLayout(e),n.afterCollapse(!0)):e.isCollapsingOrExpanding===2&&n.afterExpand(!0)}}))}},getBorderInfo:function(){var e=this,t=e.borderInfo;return t||(e.borderInfo=t=e.checkCache("borderInfo")),t},getClassList:function(){return this.classList||(this.classList=new Ext.layout.ClassList(this))},getEl:function(e,t){var n=this,r,i,s;if(e){if(e.dom)i=e;else{r=n.target,t&&(r=t),i=r[e];if(typeof i=="function"){i=i.call(r);if(i===n.el)return this}}i&&(s=n.context.getEl(n,i))}return s||null},getFrameInfo:function(){var e=this,t=e.frameInfo,n,r;return t||(n=e.framing,r=e.getBorderInfo(),e.frameInfo=t=n?{top:n.top+r.top,right:n.right+r.right,bottom:n.bottom+r.bottom,left:n.left+r.left,width:n.width+r.width,height:n.height+r.height}:r),t},getMarginInfo:function(){var e=this,t=e.marginInfo,n,r,i,s,o;return t||(e.wrapsComponent?(n=e.target,s=n.ownerLayout,o=s?s.id:null,r=s&&s.manageMargins,t=n.margin$,t&&t.ownerId!==o&&(t=null),t||(t=e.parseMargins(n,n.margin)||e.checkCache("marginInfo"),r&&(i=e.parseMargins(n,n.margins,s.defaultMargins),i&&(t={top:t.top+i.top,right:t.right+i.right,bottom:t.bottom+i.bottom,left:t.left+i.left}),e.setProp("margin-top",0),e.setProp("margin-right",0),e.setProp("margin-bottom",0),e.setProp("margin-left",0)),t.ownerId=o,n.margin$=t),t.width=t.left+t.right,t.height=t.top+t.bottom):t=e.checkCache("marginInfo"),e.marginInfo=t),t},clearMarginCache:function(){delete this.marginInfo,delete this.target.margin$},getPaddingInfo:function(){var e=this,t=e.paddingInfo;return t||(e.paddingInfo=t=e.checkCache("paddingInfo")),t},getProp:function(e){var t=this,n=t.props[e];return t.addTrigger(e),n},getDomProp:function(e){var t=this,n=t.dirty&&e in t.dirty?undefined:t.props[e];return t.addTrigger(e,!0),n},getStyle:function(e){var t=this,n=t.styles,r,i;return e in n?i=n[e]:(r=t.styleInfo[e],i=t.el.getStyle(e),r&&r.parseInt&&(i=parseInt(i,10)||0),n[e]=i),i},getStyles:function(e,t){var n=this,r=n.styles,i={},s=0,o=e.length,u,a,f,l,c,h,p,d;t=t||e;for(u=0;u<o;++u)l=e[u],l in r?(i[t[u]]=r[l],++s,u&&s==1&&(a=e.slice(0,u),f=t.slice(0,u))):s&&((a||(a=[])).push(l),(f||(f=[])).push(t[u]));if(s<o){a=a||e,f=f||t,h=n.styleInfo,p=n.el.getStyle(a);for(u=a.length;u--;)l=a[u],c=h[l],d=p[l],c&&c.parseInt&&(d=parseInt(d,10)||0),i[f[u]]=d,r[l]=d}return i},hasProp:function(e){return this.getProp(e)!=null},hasDomProp:function(e){return this.getDomProp(e)!=null},invalidate:function(e){this.context.queueInvalidate(this,e)},markDirty:function(){++this.dirtyCount==1&&this.context.queueFlush(this)},onBoxMeasured:function(){var e=this.boxParent,t=this.state;e&&e.widthModel.shrinkWrap&&!t.boxMeasured&&this.measuresBox&&(t.boxMeasured=1,e.boxChildMeasured())},parseMargins:function(e,t,n){t===!0&&(t=5);var r=typeof t,i;if(r=="string"||r=="number")i=e.parseBox(t);else if(t||n)i={top:0,right:0,bottom:0,left:0},n&&Ext.apply(i,this.parseMargins(e,n)),t&&(t=Ext.apply(i,e.parseBox(t)));return i},peek:function(e){return this.props[e]},recoverProp:function(e,t,n){var r=this,i=r.props,s;e in t&&(i[e]=t[e],n&&e in n&&(s=r.dirty||(r.dirty={}),s[e]=n[e]))},redo:function(e){var t=this,n,r,i;t.revertProps(t.props);if(e&&t.wrapsComponent){if(t.childItems)for(i=0,n=t.childItems,r=n.length;i<r;i++)n[i].redo(e);for(i=0,n=t.children,r=n.length;i<r;i++)n[i].redo()}},removeEl:function(e,t){var n=this,r,i;if(e){if(e.dom)i=e;else{r=n.target,t&&(r=t),i=r[e];if(typeof i=="function"){i=i.call(r);if(i===n.el)return this}}i&&n.context.removeEl(n,i)}},revertProps:function(e){var t,n=this.flushedProps,r={};for(t in e)n.hasOwnProperty(t)&&(r[t]=e[t]);this.writeProps(r)},setAttribute:function(e,t){var n=this;n.attributes||(n.attributes={}),n.attributes[e]=t,n.markDirty()},setBox:function(e){var t=this;"left"in e&&t.setProp("x",e.left),"top"in e&&t.setProp("y",e.top),t.setSize(e.width,e.height)},setContentHeight:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentHeight",e)},setContentWidth:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentWidth",e)},setContentSize:function(e,t,n){return this.setContentWidth(e,n)+this.setContentHeight(t,n)==2},setProp:function(e,t,n){var r=this,i=typeof t,s,o;if(i=="undefined"||i==="number"&&isNaN(t))return 0;if(r.props[e]===t)return 1;r.props[e]=t,++r.context.progressCount;if(n===!1)r.fireTriggers("domTriggers",e),r.clearBlocks("domBlocks",e);else{o=r.styleInfo[e];if(o){r.dirty||(r.dirty={});if(e=="width"||e=="height")s=r.isBorderBoxValue,s===null&&(r.isBorderBoxValue=s=!!r.el.isBorderBox()),s||(r.borderInfo||r.getBorderInfo(),r.paddingInfo||r.getPaddingInfo());r.dirty[e]=t,r.markDirty()}}return r.fireTriggers("triggers",e),r.clearBlocks("blocks",e),1},setHeight:function(e,t){var n=this,r=n.target,i=n.ownerCtContext,s,o,u,a,f;e<0&&(e=0);if(!n.wrapsComponent){if(!n.setProp("height",e,t))return NaN}else{u=n.collapsedVert?0:r.minHeight||0,e=Ext.Number.constrain(e,u,r.maxHeight),a=n.props.height;if(!n.setProp("height",e,t))return NaN;i&&!n.isComponentChild&&isNaN(a)&&(f=--i.remainingChildDimensions,f||i.setProp("containerChildrenSizeDone",!0)),s=n.frameBodyContext,s&&(o=n.getFrameInfo(),s.setHeight(e-o.height,t))}return e},setWidth:function(e,t){var n=this,r=n.target,i=n.ownerCtContext,s,o,u,a,f;e<0&&(e=0);if(!n.wrapsComponent){if(!n.setProp("width",e,t))return NaN}else{u=n.collapsedHorz?0:r.minWidth||0,e=Ext.Number.constrain(e,u,r.maxWidth),a=n.props.width;if(!n.setProp("width",e,t))return NaN;i&&!n.isComponentChild&&isNaN(a)&&(f=--i.remainingChildDimensions,f||i.setProp("containerChildrenSizeDone",!0)),s=n.frameBodyContext,s&&(o=n.getFrameInfo(),s.setWidth(e-o.width,t))}return e},setSize:function(e,t,n){this.setWidth(e,n),this.setHeight(t,n)},translateProps:{x:"left",y:"top"},undo:function(e){var t=this,n,r,i;t.revertProps(t.lastBox);if(e&&t.wrapsComponent){if(t.childItems)for(i=0,n=t.childItems,r=n.length;i<r;i++)n[i].undo(e);for(i=0,n=t.children,r=n.length;i<r;i++)n[i].undo()}},unsetProp:function(e){var t=this.dirty;delete this.props[e],t&&delete t[e]},writeProps:function(e,t){if(!e||typeof e!="object")return;var n=this,r=n.el,i={},s=0,o=n.styleInfo,u,a,f,l=e.width,c=e.height,h=n.isBorderBoxValue,p=n.target,d=Math.max,v=0,m=0,g,y,b,w,E,S;"displayed"in e&&r.setDisplayed(e.displayed);for(a in e)t&&(n.fireTriggers("domTriggers",a),n.clearBlocks("domBlocks",a),n.flushedProps[a]=1),u=o[a],u&&u.dom&&(u.suffix&&(f=parseInt(e[a],10))?i[a]=f+u.suffix:i[a]=e[a],++s);if("x"in e||"y"in e)p.isComponent?p.setPosition(e.x,e.y):s+=n.addPositionStyles(i,e);!h&&(l>0||c>0)&&(n.frameBodyContext||(v=n.paddingInfo.width,m=n.paddingInfo.height),l&&(l=d(parseInt(l,10)-(n.borderInfo.width+v),0),i.width=l+"px",++s),c&&(c=d(parseInt(c,10)-(n.borderInfo.height+m),0),i.height=c+"px",++s)),n.wrapsComponent&&Ext.isIE9&&Ext.isStrict&&((g=l!==undefined&&n.hasOverflowY)||(y=c!==undefined&&n.hasOverflowX))&&(b=n.isAbsolute,b===undefined&&(b=!1,S=n.target.getTargetEl(),E=S.getStyle("position"),E=="absolute"&&(E=S.getStyle("box-sizing"),b=E=="border-box"),n.isAbsolute=b),b&&(w=Ext.getScrollbarSize(),g&&(l=parseInt(l,10)+w.width,i.width=l+"px",++s),y&&(c=parseInt(c,10)+w.height,i.height=c+"px",++s))),s&&r.setStyle(i)}},function(){var e={dom:!0,parseInt:!0,suffix:"px"},t={dom:!0},n={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:n,containerLayoutDone:n,displayed:n,done:n,x:n,y:n,columnWidthsDone:n,left:e,top:e,right:e,bottom:e,width:e,height:e,"border-top-width":e,"border-right-width":e,"border-bottom-width":e,"border-left-width":e,"margin-top":e,"margin-right":e,"margin-bottom":e,"margin-left":e,"padding-top":e,"padding-right":e,"padding-bottom":e,"padding-left":e,"line-height":t,display:t}}),Ext.define("Ext.layout.Context",{remainingLayouts:0,state:0,constructor:function(e){var t=this;Ext.apply(t,e),t.items={},t.layouts={},t.blockCount=0,t.cycleCount=0,t.flushCount=0,t.calcCount=0,t.animateQueue=t.newQueue(),t.completionQueue=t.newQueue(),t.finalizeQueue=t.newQueue(),t.finishQueue=t.newQueue(),t.flushQueue=t.newQueue(),t.invalidateData={},t.layoutQueue=t.newQueue(),t.invalidQueue=[],t.triggers={data:{},dom:{}}},callLayout:function(e,t){this.currentLayout=e,e[t](this.getCmp(e.owner))},cancelComponent:function(e,t,n){var r=this,i=e,s=!e.isComponent,o=s?i.length:1,u,a,f,l,c,h,p,d,v,m;for(u=0;u<o;++u){s&&(e=i[u]),n&&e.ownerCt&&(m=this.items[e.ownerCt.el.id],m&&Ext.Array.remove(m.childItems,r.getCmp(e)));if(!
t){p=r.invalidQueue,f=p.length;if(f){r.invalidQueue=h=[];for(a=0;a<f;++a)d=p[a],v=d.item.target,v!=e&&!v.isDescendant(e)&&h.push(d)}}c=e.componentLayout,r.cancelLayout(c),c.getLayoutItems&&(l=c.getLayoutItems(),l.length&&r.cancelComponent(l,!0)),e.isContainer&&!e.collapsed&&(c=e.layout,r.cancelLayout(c),l=c.getVisibleItems(),l.length&&r.cancelComponent(l,!0))}},cancelLayout:function(e){var t=this;t.completionQueue.remove(e),t.finalizeQueue.remove(e),t.finishQueue.remove(e),t.layoutQueue.remove(e),e.running&&t.layoutDone(e),e.ownerContext=null},clearTriggers:function(e,t){var n=e.id,r=this.triggers[t?"dom":"data"],i=r&&r[n],s=i&&i.length||0,o,u,a;for(o=0;o<s;++o)a=i[o],u=a.item,r=t?u.domTriggers:u.triggers,delete r[a.prop][n]},flush:function(){var e=this,t=e.flushQueue.clear(),n=t.length,r;if(n){++e.flushCount;for(r=0;r<n;++r)t[r].flush()}},flushAnimations:function(){var e=this,t=e.animateQueue.clear(),n=t.length,r;if(n){for(r=0;r<n;r++)t[r].target.animate!==!1&&t[r].flushAnimations();Ext.fx.Manager.runner()}},flushInvalidates:function(){var e=this,t=e.invalidQueue,n=t&&t.length,r,i,s,o;e.invalidQueue=[];if(n){i=[];for(o=0;o<n;++o)r=(s=t[o]).item.target,r.container.isDetachedBody||(i.push(r),s.options&&(e.invalidateData[r.id]=s.options));e.invalidate(i,null)}},flushLayouts:function(e,t,n){var r=this,i=n?r[e].items:r[e].clear(),s=i.length,o,u;if(s){for(o=0;o<s;++o)u=i[o],u.running||r.callLayout(u,t);r.currentLayout=null}},getCmp:function(e){return this.getItem(e,e.el)},getEl:function(e,t){var n=this.getItem(t,t);return n.parent||(n.parent=e,e.children.length?e.children.push(n):e.children=[n]),n},getItem:function(e,t){var n=t.id,r=this.items,i=r[n]||(r[n]=new Ext.layout.ContextItem({context:this,target:e,el:t}));return i},handleFailure:function(){var e=this.layouts,t,n;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(n in e)t=e[n],e.hasOwnProperty(n)&&(t.running=!1,t.ownerContext=null)},invalidate:function(e,t){var n=this,r=!e.isComponent,i,s,o,u,a,f,l,c,h,p,d;for(o=0,l=r?e.length:1;o<l;++o)u=r?e[o]:e,u.rendered&&!u.hidden&&(a=n.getCmp(u),c=u.componentLayout,s=!c.ownerContext,h=u.isContainer&&!u.collapsed?u.layout:null,p=n.invalidateData[a.id],delete n.invalidateData[a.id],d=a.init(t,p),p&&n.processInvalidate(p,a,"before"),c.beforeLayoutCycle&&c.beforeLayoutCycle(a),h&&h.beforeLayoutCycle&&h.beforeLayoutCycle(a),d=a.initContinue(d),i=!0,c.getLayoutItems&&(c.renderChildren(),f=c.getLayoutItems(),f.length&&n.invalidate(f,!0)),h&&(i=!1,h.renderChildren(),f=h.getVisibleItems(),f.length&&n.invalidate(f,!0)),a.initDone(i),n.resetLayout(c,a,s),h&&n.resetLayout(h,a,s),a.initAnimation(),p&&n.processInvalidate(p,a,"after"));n.currentLayout=null},layoutDone:function(e){var t=e.ownerContext;e.running=!1,e.isComponentLayout?(t.measuresBox&&t.onBoxMeasured(),t.setProp("done",!0)):t.setProp("containerLayoutDone",!0),--this.remainingLayouts,++this.progressCount},newQueue:function(){return new Ext.util.Queue},processInvalidate:function(e,t,n){if(e[n]){var r=this,i=r.currentLayout;r.currentLayout=e.layout||null,e[n](t,e),r.currentLayout=i}},queueAnimation:function(e){this.animateQueue.add(e)},queueCompletion:function(e){this.completionQueue.add(e)},queueFinalize:function(e){this.finalizeQueue.add(e)},queueFlush:function(e){this.flushQueue.add(e)},chainFns:function(e,t,n){var r=this,i=e.layout,s=t.layout,o=e[n],u=t[n];return function(n){var a=r.currentLayout;o&&(r.currentLayout=i,o.call(e.scope||e,n,e)),r.currentLayout=s,u.call(t.scope||t,n,t),r.currentLayout=a}},queueInvalidate:function(e,t){var n=this,r=[],i=n.invalidQueue,s=i.length,o,u,a,f,l;e.isComponent?e=n.getCmp(o=e):o=e.target,e.invalid=!0;while(s--){u=i[s],a=u.item.target;if(o.isDescendant(a))return;if(a==o){(f=u.options)?t&&(t.widthModel&&(f.widthModel=t.widthModel),t.heightModel&&(f.heightModel=t.heightModel),(l=f.state)?t.state&&Ext.apply(l,t.state):f.state=t.state,t.before&&(f.before=n.chainFns(f,t,"before")),t.after&&(f.after=n.chainFns(f,t,"after"))):u.options=t;return}a.isDescendant(o)||r.push(u)}r.push({item:e,options:t}),n.invalidQueue=r},queueItemLayouts:function(e){var t=e.isComponent?e:e.target,n=t.componentLayout;!n.pending&&!n.invalid&&!n.done&&this.queueLayout(n),n=t.layout,n&&!n.pending&&!n.invalid&&!n.done&&this.queueLayout(n)},queueLayout:function(e){this.layoutQueue.add(e),e.pending=!0},removeEl:function(e,t){var n=t.id,r=e.children,i=this.items;r&&Ext.Array.remove(r,i[n]),delete i[n]},resetLayout:function(e,t,n){var r=this;r.currentLayout=e,e.done=!1,e.pending=!0,e.firedTriggers=0,r.layoutQueue.add(e),n?(r.layouts[e.id]=e,e.running=!0,e.finishedLayout&&r.finishQueue.add(e),++r.remainingLayouts,++e.layoutCount,e.ownerContext=t,e.beginCount=0,e.blockCount=0,e.calcCount=0,e.triggerCount=0,e.initialized||e.initLayout(),e.beginLayout(t)):(++e.beginCount,e.running||(++r.remainingLayouts,e.running=!0,e.isComponentLayout&&t.unsetProp("done"),r.completionQueue.remove(e),r.finalizeQueue.remove(e))),e.beginLayoutCycle(t,n)},run:function(){var e=this,t=!1,n=100;e.flushInvalidates(),e.state=1,e.totalCount=e.layoutQueue.getCount(),e.flush();while((e.remainingLayouts||e.invalidQueue.length)&&n--){e.invalidQueue.length&&e.flushInvalidates();if(e.runCycle())t=!1;else if(!t)e.flush(),t=!0,e.flushLayouts("completionQueue","completeLayout");else if(!e.invalidQueue.length){e.state=2;break}!e.remainingLayouts&&!e.invalidQueue.length&&(e.flush(),e.flushLayouts("completionQueue","completeLayout"),e.flushLayouts("finalizeQueue","finalizeLayout"))}return e.runComplete()},runComplete:function(){var e=this;return e.state=2,e.remainingLayouts?(e.handleFailure(),!1):(e.flush(),e.flushLayouts("finishQueue","finishedLayout",!0),e.flushLayouts("finishQueue","notifyOwner"),e.flush(),e.flushAnimations(),!0)},runCycle:function(){var e=this,t=e.layoutQueue.clear(),n=t.length,r;++e.cycleCount,e.progressCount=0;for(r=0;r<n;++r)e.runLayout(e.currentLayout=t[r]);return e.currentLayout=null,e.progressCount>0},runLayout:function(e){var t=this,n=t.getCmp(e.owner);e.pending=!1;if(n.state.blocks)return;e.done=!0,++e.calcCount,++t.calcCount,e.calculate(n),e.done?(t.layoutDone(e),e.completeLayout&&t.queueCompletion(e),e.finalizeLayout&&t.queueFinalize(e)):!e.pending&&!e.invalid&&!(e.blockCount+e.triggerCount-e.firedTriggers)&&t.queueLayout(e)},setItemSize:function(e,t,n){var r=e,i=1,s,o;e.isComposite?(r=e.elements,i=r.length,e=r[0]):!e.dom&&!e.el&&(i=r.length,e=r[0]);for(o=0;o<i;)s=this.get(e),s.setSize(t,n),e=r[++o]}}),Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:Ext.layout.component.Auto,type:"body",beginLayout:function(e){this.callParent(arguments),e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e,t){var n=this,r=n.lastWidthModel,i=n.lastHeightModel,s=n.owner.body;n.callParent(arguments),r&&r.fixed&&e.widthModel.shrinkWrap&&s.setWidth(null),i&&i.fixed&&e.heightModel.shrinkWrap&&s.setHeight(null)},calculateOwnerHeightFromContentHeight:function(e,t){var n=this.callParent(arguments);return e.targetContext!=e&&(n+=e.getPaddingInfo().height),n},calculateOwnerWidthFromContentWidth:function(e,t){var n=this.callParent(arguments);return e.targetContext!=e&&(n+=e.getPaddingInfo().width),n},measureContentWidth:function(e){return e.bodyContext.setWidth(e.bodyContext.el.dom.offsetWidth,!1)},measureContentHeight:function(e){return e.bodyContext.setHeight(e.bodyContext.el.dom.offsetHeight,!1)},publishInnerHeight:function(e,t){var n=t-e.getFrameInfo().height,r=e.targetContext;return r!=e&&(n-=e.getPaddingInfo().height),e.bodyContext.setHeight(n,!e.heightModel.natural)},publishInnerWidth:function(e,t){var n=t-e.getFrameInfo().width,r=e.targetContext;r!=e&&(n-=e.getPaddingInfo().width),e.bodyContext.setWidth(n,!e.widthModel.natural)}}),Ext.define("Ext.layout.component.FieldSet",{extend:Ext.layout.component.Body,alias:["layout.fieldset"],type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(e){e.target.collapsed&&(e.heightModel=this.sizeModels.shrinkWrap)},beginLayoutCycle:function(e){var t=e.target,n;this.callParent(arguments),t.collapsed&&(e.setContentHeight(0),e.restoreMinHeight=t.minHeight,delete t.minHeight,e.widthModel.shrinkWrap&&(n=t.lastComponentSize,e.setContentWidth(n&&n.contentWidth||this.defaultCollapsedWidth)))},finishedLayout:function(e){var t=this.owner,n=e.restoreMinHeight;this.callParent(arguments),n&&(t.minHeight=n)},calculateOwnerHeightFromContentHeight:function(e,t){var n=e.getBorderInfo(),r=e.target.legend;return e.getProp("contentHeight")+e.getPaddingInfo().height+(Ext.isIEQuirks||Ext.isIE8m?e.bodyContext.getPaddingInfo().top:0)+(r?r.getHeight():n.top)+n.bottom},publishInnerHeight:function(e,t){var n=e.target.legend;n&&(t-=n.getHeight()),this.callParent([e,t])},getLayoutItems:function(){var e=this.owner.legend;return e?[e]:[]}}),Ext.define("Ext.layout.component.field.Slider",{alias:["layout.sliderfield"],extend:Ext.layout.component.field.Field,type:"sliderfield",beginLayout:function(e){this.callParent(arguments),e.endElContext=e.getEl("endEl"),e.innerElContext=e.getEl("innerEl"),e.bodyElContext=e.getEl("bodyEl")},publishInnerHeight:function(e,t){var n=t-this.measureLabelErrorHeight(e),r,i;this.owner.vertical?(r=e.endElContext.getPaddingInfo(),i=e.inputContext.getPaddingInfo(),e.innerElContext.setHeight(n-i.height-r.height)):e.bodyElContext.setHeight(n)},publishInnerWidth:function(e,t){if(!this.owner.vertical){var n=e.endElContext.getPaddingInfo(),r=e.inputContext.getPaddingInfo();e.innerElContext.setWidth(t-r.left-n.right-e.labelContext.getProp("width"))}},beginLayoutFixed:function(e,t,n){var r=this,i=r.ieInputWidthAdjustment;i&&r.owner.bodyEl.setStyle("padding-right",i+"px"),r.callParent(arguments)}}),Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:Ext.layout.container.Anchor,alternateClassName:"Ext.layout.AbsoluteLayout",targetCls:Ext.baseCSSPrefix+"abs-layout-ct",itemCls:Ext.baseCSSPrefix+"abs-layout-item",ignoreOnContentChange:!0,type:"absolute",adjustWidthAnchor:function(e,t){var n=this.targetPadding,r=t.getStyle("left");return e-r+n.left},adjustHeightAnchor:function(e,t){var n=this.targetPadding,r=t.getStyle("top");return e-r+n.top},isItemLayoutRoot:function(e){return this.ignoreOnContentChange||this.callParent(arguments)},isItemShrinkWrap:function(e){return!0},beginLayout:function(e){var t=this,n=t.getTarget();t.callParent(arguments),n.dom!==document.body&&n.position(),t.targetPadding=e.targetContext.getPaddingInfo()},isItemBoxParent:function(e){return!0},onContentChange:function(){return this.ignoreOnContentChange?!1:this.callParent(arguments)},calculateContentSize:function(e,t){var n=this,r=(t||0)|((e.widthModel.shrinkWrap?1:0)|(e.heightModel.shrinkWrap?2:0)),i=r&1||undefined,s=r&2||undefined,o=e.childItems,u=o.length,a=0,f=0,l=0,c=e.props,h,p,d,v,m,g,y;i&&(isNaN(c.contentWidth)?++l:i=undefined),s&&(isNaN(c.contentHeight)?++l:s=undefined);if(l){for(m=0;m<u;++m){d=o[m],p=d.target,v=s&&d.getProp("height"),y=i&&d.getProp("width"),g=d.getMarginInfo(),v+=g.bottom,y+=g.right,a=Math.max(a,(p.y||0)+v),f=Math.max(f,(p.x||0)+y);if(isNaN(a)&&isNaN(f)){n.done=!1;return}}if(i||s)h=e.targetContext.getPaddingInfo();i&&!e.setContentWidth(f+h.width)&&(n.done=!1),s&&!e.setContentHeight(a+h.height)&&(n.done=!1)}}}),Ext.define("Ext.layout.container.Accordion",{extend:Ext.layout.container.VBox,alias:["layout.accordion"],alternateClassName:"Ext.layout.AccordionLayout",targetCls:Ext.baseCSSPrefix+"accordion-layout-ct",itemCls:[Ext.baseCSSPrefix+"box-item",Ext.baseCSSPrefix+"accordion-item"],align:"stretch",fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:undefined,animate:!0,activeOnTop:!1,multi:!1,defaultAnimatePolicy:{y:!0,height:!0},constructor:function(){var e=this;e.callParent(arguments),!e.multi&&e.animate?e.animatePolicy=Ext.apply({},e.defaultAnimatePolicy):e.animatePolicy=null},beforeRenderItems:function(e){var t=this,n=e.length,r=0,i=t.owner,s=t.collapseFirst,o=Ext.isDefined(s),u=t.getExpanded(!0)[0],a=t.multi,f;for(;r<n;r++){f=e[r];if(!f.rendered){if(!a||f.collapsible!==!1)f.collapsible=!0;f.collapsible&&(o&&(f.collapseFirst=s),t.hideCollapseTool?(f.hideCollapseTool=t.hideCollapseTool,f.titleCollapse=!0):t.titleCollapse&&f.titleCollapse===undefined&&(f.titleCollapse=t.titleCollapse)),delete f.hideHeader,delete f.width,f.title=f.title||"&#160;",f.addBodyCls(Ext.baseCSSPrefix+"accordion-body"),a||(u?f.collapsed=u!==f:f.hasOwnProperty("collapsed")&&f.collapsed===!1?u=f:f.collapsed=!0,i.mon(f,"show",t.onComponentShow,t)),f.headerOverCls=Ext.baseCSSPrefix+"accordion-hd-over"}}!t.processing&&!a&&(u?t.activeOnTop&&(u.collapsed=!1,t.configureItem(u),i.items.indexOf(u)>0&&i.insert(0,u)):n&&(e[0].collapsed=!1))},getItemsRenderTree:function(e){return this.beforeRenderItems(e),this.callParent(arguments)},renderItems:function(e,t){this.beforeRenderItems(e),this.callParent(arguments)},configureItem:function(e){this.callParent(arguments),e.animCollapse=e.border=!1,this.fill&&(e.flex=1)},beginLayout:function(e){this.callParent(arguments),this.updatePanelClasses(e)},updatePanelClasses:function(e){var t=e.visibleItems,n=t.length,r=!0,i,s,o;for(i=0;i<n;i++)s=t[i],o=s.header,o.addCls(Ext.baseCSSPrefix+"accordion-hd"),r?o.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"):o.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"),i+1==n&&s.collapsed?o.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"):o.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"),r=s.collapsed},onBeforeComponentExpand:function(e){var t=this,n=t.owner,r=t.multi,i=t.animate,s=!r&&!t.animate&&t.activeOnTop,o,u;t.processing||(t.processing=!0,u=n.deferLayouts,n.deferLayouts=!0,r||(o=t.getExpanded()[0],o&&o!==e&&o.collapse()),s&&(Ext.suspendLayouts(),n.insert(0,e),Ext.resumeLayouts()),n.deferLayouts=u,t.processing=!1)},onBeforeComponentCollapse:function(e){var t=this,n=t.owner,r,i,s;if(t.owner.items.getCount()===1)return!1;t.processing||(t.processing=!0,s=n.deferLayouts,n.deferLayouts=!0,r=e.next()||e.prev(),t.multi?(i=t.getExpanded(),i.length===1&&r.expand()):r&&r.expand(),n.deferLayouts=s,t.processing=!1)},onComponentShow:function(e){this.onBeforeComponentExpand(e)},onRemove:function(e,t){var n=this,r;n.callParent(arguments),!n.owner.destroying&&!n.multi&&!e.collapsed&&(r=n.owner.items.first(),r&&r.expand())},getExpanded:function(e){var t=this.owner.items.items,n=t.length,r=0,i=[],s,o;for(;r<n;++r)o=t[r],o.hidden||(e?s=o.hasOwnProperty("collapsed")&&o.collapsed===!1:s=!o.collapsed,s&&i.push(o));return i}}),Ext.define("Ext.resizer.Splitter",{extend:Ext.Component,alias:"widget.splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:!0,collapsible:!1,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:!1,vertical:!1,size:5,ariaRole:"separator",getTrackerConfig:function(){return{xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this}},beforeRender:function(){var e=this,t=e.getCollapseTarget();e.callParent(),t.collapsed&&e.addCls(e.collapsedClsInternal),e.canResize||e.addCls(e.baseCls+"-noresize"),Ext.applyIf(e.renderData,{collapseDir:e.getCollapseDirection(),collapsible:e.collapsible||t.collapsible}),e.protoEl.unselectable()},onRender:function(){var e=this,t;e.callParent(arguments),e.performCollapse!==!1&&(e.renderData.collapsible&&e.mon(e.collapseEl,"click",e.toggleTargetCmp,e),e.collapseOnDblClick&&e.mon(e.el,"dblclick",e.toggleTargetCmp,e)),e.mon(e.getCollapseTarget(),{collapse:e.onTargetCollapse,expand:e.onTargetExpand,beforeexpand:e.onBeforeTargetExpand,beforecollapse:e.onBeforeTargetCollapse,scope:e}),e.canResize&&(e.tracker=Ext.create(e.getTrackerConfig()),e.relayEvents(e.tracker,["beforedragstart","dragstart","dragend"])),t=e.collapseEl,t&&(t.lastCollapseDirCls=e.collapseDirProps[e.collapseDirection].cls)},getCollapseDirection:function(){var e=this,t=e.collapseDirection,n,r,i,s;return t||(n=e.collapseTarget,n.isComponent&&(t=n.collapseDirection),t||(s=e.ownerCt.layout.type,n.isComponent?(i=e.ownerCt.items,r=Number(i.indexOf(n)===i.indexOf(e)-1)<<1|Number(s==="hbox")):r=Number(e.collapseTarget==="prev")<<1|Number(s==="hbox"),t=["bottom","right","top","left"][r]),e.collapseDirection=t),e.setOrientation(t==="top"||t==="bottom"?"horizontal":"vertical"),t},getCollapseTarget:function(){var e=this;return e.collapseTarget.isComponent?e.collapseTarget:e.collapseTarget==="prev"?e.previousSibling():e.nextSibling()},setCollapseEl:function(e){var t=this.collapseEl;t&&t.setDisplayed(e)},onBeforeTargetExpand:function(e){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(e){this.el.addCls([this.collapsedClsInternal,this.collapsedCls]),this.setCollapseEl("")},onTargetExpand:function(e){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls]),this.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var e=this,t=e.collapseEl,n=e.collapseDirProps[e.collapseDirection],r;t&&(r=t.lastCollapseDirCls,r&&t.removeCls(r),t.addCls(t.lastCollapseDirCls=n.cls))},applyOrientation:function(){var e=this,t=e.orientation,n=e.orientationProps[t],r=e.size,i=n.fixedAxis,s=n.stretchedAxis,o=e.baseCls+"-";e[t]=!0,e[n.opposite]=!1;if(!e.hasOwnProperty(i)||e[i]==="100%")e[i]=r;if(!e.hasOwnProperty(s)||e[s]===r)e[s]="100%";e.removeCls(o+n.opposite),e.addCls(o+t)},setOrientation:function(e){var t=this;t.orientation!==e&&(t.orientation=e,t.applyOrientation())},updateOrientation:function(){delete this.collapseDirection,this.getCollapseDirection(),this.applyCollapseDirection()},toggleTargetCmp:function(e,t){var n=this.getCollapseTarget(),r=n.placeholder,i;Ext.isFunction(n.expand)&&Ext.isFunction(n.collapse)&&(r&&!r.hidden?i=!0:i=!n.hidden,i&&(n.collapsed?n.expand():n.collapseDirection?n.collapse():n.collapse(this.renderData.collapseDir)))},setSize:function(){var e=this;e.callParent(arguments),Ext.isIE&&e.el&&e.el.repaint()},beforeDestroy:function(){Ext.destroy(this.tracker),this.callParent()}}),Ext.define("Ext.resizer.BorderSplitter",{extend:Ext.resizer.Splitter,alias:"widget.bordersplitter",collapseTarget:null,getTrackerConfig:function(){var e=this.callParent();return e.xclass="Ext.resizer.BorderSplitterTracker",e}}),Ext.define("Ext.layout.container.Border",{extend:Ext.layout.container.Container,alias:"layout.border",alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:!0,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:!0,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:!1,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(e,t,n){var r=this,i=r.axisProps[n],s=!i.horizontal,o=i.sizeProp,u=0,a=e.childItems,f=a.length,l,c,h,p,d,v,m,g,y,b,w;for(c=0;c<f;++c){h=a[c],d=h.target,h.layoutPos={};if(d.region){h.region=v=d.region,h.isCenter=d.isCenter,h.isHorz=d.isHorz,h.isVert=d.isVert,h.weight=d.weight||r.regionWeights[v]||0,t[d.id]=h;if(d.isCenter){l=h,p=d.flex,e.centerRegion=l;continue}if(s!==h.isVert)continue;h.reverseWeighting=v==i.borderEnd,g=d[o],y=typeof g,d.collapsed||(y=="string"&&(m=r.percentageRe.exec(g))?h.percentage=parseInt(m[1],10):d.flex&&(u+=h.flex=d.flex))}}return l&&(b=l.target,(w=b.placeholderFor)?!p&&s===w.collapsedVertical()&&(p=0,l.collapseAxis=n):b.collapsed&&s===b.collapsedVertical()&&(p=0,l.collapseAxis=n)),p==null&&(p=1),u+=p,Ext.apply({before:s?"top":"left",totalFlex:u},i)},beginLayout:function(e){var t=this,n=t.getLayoutItems(),r=t.padding,i=typeof r,s=!1,o,u,a,f,l,c,h,p,d;if(r){if(i=="string"||i=="number")r=Ext.util.Format.parseBox(r)}else r=e.getEl("getTargetEl").getPaddingInfo(),s=!0;e.outerPad=r,e.padOnContainer=s;for(f=0,a=n.length;f<a;++f)u=n[f],c=t.getSplitterTarget(u),c&&(h=undefined,p=!!u.hidden,c.split?p!==c.hidden&&(h=!c.hidden):c.isCollapsingOrExpanding&&(h=!!c.collapsed),h?u.show():h===!1&&u.hide());t.callParent(arguments),n=e.childItems,a=n.length,l={},e.borderAxisHorz=t.beginAxis(e,l,"horz"),e.borderAxisVert=t.beginAxis(e,l,"vert");for(f=0;f<a;++f)o=n[f],c=t.getSplitterTarget(o.target),c&&(d=l[c.id],d||(d=e.getEl(c.el,t),d.region=c.region),o.collapseTarget=c=d,o.weight=c.weight,o.reverseWeighting=c.reverseWeighting,c.splitter=o,o.isHorz=c.isHorz,o.isVert=c.isVert);t.sortWeightedItems(n,"reverseWeighting"),t.setupSplitterNeighbors(n)},calculate:function(e){var t=this,n=t.getContainerSize(e),r=e.childItems,i=r.length,s=e.borderAxisHorz,o=e.borderAxisVert,u=e.outerPad,a=e.padOnContainer,f,l,c,h,p,d;s.begin=u[t.padOnContainerProp],o.begin=u.top,p=s.end=s.flexSpace=n.width+(a?u[t.padOnContainerProp]:-u[t.padNotOnContainerProp]),d=o.end=o.flexSpace=n.height+(a?u.top:-u.bottom);for(f=0;f<i;++f){l=r[f],c=l.getMarginInfo();if(l.isHorz||l.isCenter)s.addUnflexed(c.width),p-=c.width;if(l.isVert||l.isCenter)o.addUnflexed(c.height),d-=c.height;if(!l.flex&&!l.percentage)if(l.isHorz||l.isCenter&&l.collapseAxis==="horz")h=l.getProp("width"),s.addUnflexed(h),l.collapseTarget&&(p-=h);else if(l.isVert||l.isCenter&&l.collapseAxis==="vert")h=l.getProp("height"),o.addUnflexed(h),l.collapseTarget&&(d-=h)}for(f=0;f<i;++f)l=r[f],c=l.getMarginInfo(),l.percentage&&(l.isHorz?(h=Math.ceil(p*l.percentage/100),h=l.setWidth(h),s.addUnflexed(h)):l.isVert&&(h=Math.ceil(d*l.percentage/100),h=l.setHeight(h),o.addUnflexed(h)));for(f=0;f<i;++f)l=r[f],l.isCenter||(t.calculateChildAxis(l,s),t.calculateChildAxis(l,o));t.finishAxis(e,o)+t.finishAxis(e,s)<2?t.done=!1:t.finishPositions(r)},calculateChildAxis:function(e,t){var n=e.collapseTarget,r="set"+t.sizePropCap,i=t.sizeProp,s=e.getMarginInfo()[i],o,u,a,f,l;n?o=n.region:(o=e.region,a=e.flex),u=o==t.borderBegin,!u&&o!=t.borderEnd?(e[r](t.end-t.begin-s),f=t.begin):(a?(l=Math.ceil(t.flexSpace*(a/t.totalFlex)),l=e[r](l)):e.percentage?l=e.peek(i):l=e.getProp(i),l+=s,u?(f=t.begin,t.begin+=l):t.end=f=t.end-l),e.layoutPos[t.posProp]=f},finishAxis:function(e,t){var n=t.end-t.begin,r=e.centerRegion;return r&&(r["set"+t.sizePropCap](n-r.getMarginInfo()[t.sizeProp]),r.layoutPos[t.posProp]=t.begin),Ext.isNumber(n)?1:0},finishPositions:function(e){var t=e.length,n,r,i=this.horzPositionProp;for(n=0;n<t;++n)r=e[n],r.setProp("x",r.layoutPos.x+r.marginInfo[i]),r.setProp("y",r.layoutPos.y+r.marginInfo.top)},getLayoutItems:function(){var e=this.owner,t=e&&e.items&&e.items.items||[],n=t.length,r=[],i=0,s,o;for(;i<n;i++)s=t[i],o=s.placeholderFor,(s.hidden||(!s.floated||s.isCollapsingOrExpanding===2)&&(!o||o.isCollapsingOrExpanding!==2))&&r.push(s);return r},getPlaceholder:function(e){return e.getPlaceholder&&e.getPlaceholder()},getSplitterTarget:function(e){var t=e.collapseTarget;return t&&t.collapsed?t.placeholder||t:t},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},insertSplitter:function(e,t,n,r){var i=e.region,s=Ext.apply({xtype:"bordersplitter",collapseTarget:e,id:e.id+"-splitter",hidden:n,canResize:e.splitterResize!==!1,splitterFor:e},r),o=t+(i==="south"||i==="east"?0:1);e.collapseMode==="mini"&&(s.collapsedCls=e.collapsedCls),e.splitter=this.owner.add(o,s)},onAdd:function(e,t){var n=this,r=e.placeholderFor,i=e.region,s,o,u;n.callParent(arguments),i?(Ext.apply(e,n.regionFlags[i]),e.initBorderRegion&&e.initBorderRegion(),i==="center"?n.centerRegion=e:(s=e.split,o=!!e.hidden,typeof s=="object"&&(u=s,s=!0),(e.isHorz||e.isVert)&&(s||e.collapseMode=="mini")&&n.insertSplitter(e,t,o||!s,u)),e.hasOwnProperty("collapseMode")||(e.collapseMode=n.panelCollapseMode),e.hasOwnProperty("animCollapse")||(e.collapseMode!=="placeholder"?e.animCollapse=!1:e.animCollapse=n.panelCollapseAnimate)):r&&(Ext.apply(e,n.regionFlags[r.region]),e.region=r.region,e.weight=r.weight)},onDestroy:function(){this.centerRegion=null,this.callParent()},onRemove:function(e,t){var n=this,r=e.region,i=e.splitter,s=n.owner,o=s.destroying,u;r&&(e.isCenter&&(n.centerRegion=null),delete e.isCenter,delete e.isHorz,delete e.isVert,i&&!s.destroying&&s.doRemove(i,!0),delete e.splitter),n.callParent(arguments),!o&&!t&&e.rendered&&(u=e.getEl(),u.setStyle("top",""),u.setStyle(n.horzPositionProp,""))},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"top"},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"bottom"},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"left"},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"right"}},setupSplitterNeighbors:function(e){var t={},n=e.length,r=this.touchedRegions,i,s,o,u,a,f,l,c,h;for(i=0;i<n;++i){f=e[i].target,l=f.region;if(f.isCenter)o=f;else if(l){h=r[l];for(s=0,u=h.length;s<u;++s)a=t[h[s]],a&&a.neighbors.push(f);f.placeholderFor?c=f.placeholderFor.splitter:c=f.splitter,c&&(c.neighbors=[]),t[l]=c}}if(o){h=r.center;for(s=0,u=h.length;s<u;++s)a=t[h[s]],a&&a.neighbors.push(o)}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var t=this,n=this.sizePolicies,r,i,s,o;if(e.isCenter)return o=e.placeholderFor,o?o.collapsedVertical()?n.vert:n.horz:e.collapsed?e.collapsedVertical()?n.vert:n.horz:n.flexAll;return r=e.collapseTarget,r?r.isVert?n.vert:n.horz:e.region?(e.isVert?(i=e.height,s=n.vert):(i=e.width,s=n.horz),e.flex||typeof i=="string"&&t.percentageRe.test(i)?n.flexAll:s):t.autoSizePolicy}},function(){var e={addUnflexed:function(e){this.flexSpace=Math.max(this.flexSpace-e,0)}},t=this.prototype.axisProps;Ext.apply(t.horz,e),Ext.apply(t.vert,e)}),Ext.define("Ext.layout.container.Card",{extend:Ext.layout.container.Fit,alternateClassName:"Ext.layout.CardLayout",alias:"layout.card",type:"card",hideInactive:!0,deferredRender:!1,getRenderTree:function(){var e=this,t=e.getActiveItem();if(t){t.hasListeners.beforeactivate&&t.fireEvent("beforeactivate",t)===!1?t=e.activeItem=e.owner.activeItem=null:t.hasListeners.activate&&t.on({boxready:function(){t.fireEvent("activate",t)},single:!0});if(!e.deferredRender)return e.callParent(arguments);if(t)return e.getItemsRenderTree([t])}},renderChildren:function(){var e=this,t=e.getActiveItem();e.deferredRender?t&&e.renderItems([t],e.getRenderTarget()):e.callParent()},isValidParent:function(e,t,n){var r=e.el?e.el.dom:Ext.getDom(e);return r&&r.parentNode===(t.dom||t)||!1},getActiveItem:function(){var e=this,t=e.parseActiveItem(e.activeItem||e.owner&&e.owner.activeItem);return t&&e.owner.items.indexOf(t)!=-1?e.activeItem=t:e.activeItem=null,e.activeItem},parseActiveItem:function(e){return e&&e.isComponent?e:typeof e=="number"||e===undefined?this.getLayoutItems()[e||0]:this.owner.getComponent(e)},configureItem:function(e){e===this.getActiveItem()?e.hidden=!1:e.hidden=!0,this.callParent(arguments)},onRemove:function(e){this.callParent(arguments),e===this.activeItem&&(this.activeItem=null)},getAnimation:function(e,t){var n=(e||{}).cardSwitchAnimation;return n===!1?!1:n||t.cardSwitchAnimation},getNext:function(){var e=arguments[0],t=this.getLayoutItems(),n=Ext.Array.indexOf(t,this.activeItem);return t[n+1]||(e?t[0]:!1)},next:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getNext(t),e)},getPrev:function(){var e=arguments[0],t=this.getLayoutItems(),n=Ext.Array.indexOf(t,this.activeItem);return t[n-1]||(e?t[t.length-1]:!1)},prev:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getPrev(t),e)},setActiveItem:function(e){var t=this,n=t.owner,r=t.activeItem,i=n.rendered,s;return e=t.parseActiveItem(e),s=n.items.indexOf(e),s==-1&&(s=n.items.items.length,Ext.suspendLayouts(),e=n.add(e),Ext.resumeLayouts()),e&&r!=e?e.fireEvent("beforeactivate",e,r)===!1?!1:r&&r.fireEvent("beforedeactivate",r,e)===!1?!1:(i?(Ext.suspendLayouts(),e.rendered||t.renderItem(e,t.getRenderTarget(),n.items.length),r&&(t.hideInactive&&(r.hide(),r.hiddenByLayout=!0),r.fireEvent("deactivate",r,e)),e.hidden&&e.show(),e.hidden||(t.activeItem=e),Ext.resumeLayouts(!0)):t.activeItem=e,e.fireEvent("activate",e,r),t.activeItem):!1}}),Ext.define("Ext.layout.container.Column",{extend:Ext.layout.container.Auto,alias:["layout.column"],alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",columnWidthSizePolicy:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},createsInnerCt:!0,manageOverflow:!0,isItemShrinkWrap:function(e){return!0},getItemSizePolicy:function(e,t){if(e.columnWidth){t||(t=this.owner.getSizeModel());if(!t.width.shrinkWrap)return this.columnWidthSizePolicy}return this.autoSizePolicy},calculateItems:function(e,t){var n=this,r=e.targetContext,i=e.childItems,s=i.length,o=0,u=t.gotWidth,a,f,l,c,h,p;if(u===!1)r.domBlock(n,"width"),a=!0;else{if(!u)return!0;f=t.width}for(l=0;l<s;++l)c=i[l],h=c.getMarginInfo().width,c.widthModel.calculated||(p=c.getProp("width"),typeof p!="number"&&(c.block(n,"width"),a=!0),o+=p+h);if(!a){f=f<o?0:f-o;for(l=0;l<s;++l)c=i[l],c.widthModel.calculated&&(h=c.marginInfo.width,p=c.target.columnWidth,p=Math.floor(p*f)-h,p=c.setWidth(p),o+=p+h);e.setContentWidth(o+e.paddingContext.getPaddingInfo().width)}return!a},setCtSizeIfNeeded:function(e,t){var n=this,r=e.paddingContext.getPaddingInfo();n.callParent(arguments),(Ext.isIEQuirks||Ext.isIE7m)&&n.isShrinkWrapTpl&&r.right&&e.outerCtContext.setProp("width",t.width+r.left)}}),Ext.define("Ext.layout.container.Form",{alias:"layout.form",extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.FormLayout",tableCls:Ext.baseCSSPrefix+"form-layout-table",type:"form",createsInnerCt:!0,manageOverflow:!0,lastOverflowAdjust:{width:0,height:0},childEls:["formTable"],padRow:'<tr role="presentation"><td class="'+Ext.baseCSSPrefix+'form-item-pad" colspan="3" role="presentation"></td></tr>',renderTpl:['<table id="{ownerId}-formTable" class="{tableCls}" style="width:100%" cellpadding="0" role="presentation">',"{%this.renderBody(out,values)%}","</table>","{%this.renderPadder(out,values)%}"],getRenderData:function(){var e=this.callParent();return e.tableCls=this.tableCls,e},calculate:function(e){var t=this,n=t.getContainerSize(e,!0),r,i,s=0,o,u=e.sizeModel.height.shrinkWrap;u&&(e.hasDomProp("containerChildrenSizeDone")?e.setProp("contentHeight",t.formTable.dom.offsetHeight+e.targetContext.getPaddingInfo().height):t.done=!1);if(n.gotWidth){r=t.formTable.dom.offsetWidth,i=e.childItems;for(o=i.length;s<o;++s)i[s].setWidth(r,!1)}else t.done=!1},getRenderTarget:function(){return this.formTable},getRenderTree:function(){var e=this,t=e.callParent(arguments),n,r;for(n=0,r=t.length;n<r;n++)t[n]=e.transformItemRenderTree(t[n]);return t},transformItemRenderTree:function(e){return e.tag&&e.tag=="table"?(e.tag="tbody",e.role="presentation",delete e.cellspacing,delete e.cellpadding,Ext.isIE6&&(e.cn=this.padRow),e):{tag:"tbody",role:"presentation",cn:{tag:"tr",role:"presentation",cn:{tag:"td",role:"presentation",colspan:3,style:"width:100%",cn:e}}}},isValidParent:function(e,t,n){return!0},isItemShrinkWrap:function(e){return(e.shrinkWrap===!0?3:e.shrinkWrap||0)&2},getItemSizePolicy:function(e){return{setsWidth:1,setsHeight:0}},beginLayoutCycle:function(e,t){var n=this.overflowPadderEl;n&&n.setStyle("display","none"),e.state.overflowAdjust||(e.state.overflowAdjust=this.lastOverflowAdjust)},calculateOverflow:function(e,t,n){var r=this,i=e.targetContext,s=r.manageOverflow,o=e.state,u=o.overflowAdjust,a,f,l,c,h,p,d,v,m,g,y,b,w;if(s&&!o.secondPass&&!r.reserveScrollbar){b=r.getOverflowXStyle(e)==="auto",w=r.getOverflowYStyle(e)==="auto",t.gotWidth||(
b=!1),t.gotHeight||(w=!1);if(b||w){p=Ext.getScrollbarSize(),d=e.peek("contentWidth"),v=e.peek("contentHeight"),c=i.getPaddingInfo(),d-=c.width,v-=c.height,m=t.width,g=t.height,y=r.getScrollbarsNeeded(m,g,d,v),o.overflowState=y,typeof n=="number"&&(y&=~n),u={width:b&&y&2?p.width:0,height:w&&y&1?p.height:0};if(u.width!==r.lastOverflowAdjust.width||u.height!==r.lastOverflowAdjust.height)r.done=!1,e.invalidate({state:{overflowAdjust:u,overflowState:o.overflowState,secondPass:!0}})}}if(!r.done)return;l=e.padElContext||(e.padElContext=e.getEl("overflowPadderEl",r)),l&&(y=o.overflowState,a=e.peek("contentWidth"),f=1,y?(c=i.getPaddingInfo(),h=r.scrollRangeFlags,y&2&&h&1&&(f+=c.bottom),y&1&&h&4&&(a+=c.right),l.setProp("display",""),l.setSize(a,f)):l.setProp("display","none"))},completeLayout:function(e){this.lastOverflowAdjust=e.state.overflowAdjust},doRenderPadder:function(e,t){var n=t.$layout,r=n.owner,i=n.getScrollRangeFlags();n.manageOverflow&&i&5&&(e.push('<div id="',r.id,'-overflowPadderEl" role="presentation"','style="font-size: 1px; height: 1px; margin-top: -1px; position: relative; z-index: -99999'),e.push('"></div>'),n.scrollRangeFlags=i)},getContainerSize:function(e,t,n){var r=e.targetContext,i=r.getFrameInfo(),s=r.getPaddingInfo(),o=0,u=0,a=n?null:e.state.overflowAdjust,f,l,c,h;return e.widthModel.shrinkWrap||(++u,c=t?r.getDomProp("width"):r.getProp("width"),f=typeof c=="number",f&&(++o,c-=i.width+s.width,a&&(c-=a.width))),e.heightModel.shrinkWrap||(++u,h=t?r.getDomProp("height"):r.getProp("height"),l=typeof h=="number",l&&(++o,h-=i.height+s.height,a&&(h-=a.height))),{width:c,height:h,needed:u,got:o,gotAll:o==u,gotWidth:f,gotHeight:l}},getOverflowXStyle:function(e){var t=this;return t.overflowXStyle||(t.overflowXStyle=t.owner.scrollFlags.overflowX||e.targetContext.getStyle("overflow-x"))},getOverflowYStyle:function(e){var t=this;return t.overflowYStyle||(t.overflowYStyle=t.owner.scrollFlags.overflowY||e.targetContext.getStyle("overflow-y"))},getScrollRangeFlags:function(){var e=-1;return function(){if(e<0){var t=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"border-box",role:"presentation",style:{width:"100px",height:"100px",padding:"10px",overflow:"auto"},children:[{role:"presentation",style:{border:"1px solid red",width:"150px",height:"150px",margin:"0 5px 5px 0"}}]}),n=t.dom.scrollHeight,r=t.dom.scrollWidth,i={175:0,165:1,170:2,160:3},s={175:0,165:4,170:8,160:12};e=(i[n]||0)|(s[r]||0),t.remove()}return e}}(),initLayout:function(){var e=this,t=Ext.getScrollbarSize().width;e.callParent(),t&&e.manageOverflow&&!e.hasOwnProperty("lastOverflowAdjust")&&(e.owner.scrollFlags.y||e.reserveScrollbar)&&(e.lastOverflowAdjust={width:t,height:0})},setupRenderTpl:function(e){this.callParent(arguments),e.renderPadder=this.doRenderPadder}}),Ext.define("Ext.menu.Item",{extend:Ext.Component,alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,mixins:{queryable:Ext.Queryable},activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:!0,clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:['<tpl if="plain">',"{text}","<tpl else>",'<a id="{id}-itemEl"',' class="{linkCls} {indentCls}{childElCls}"',' href="{href}" role="presentation" ','<tpl if="hrefTarget"> target="{hrefTarget}"</tpl>',' hidefocus="true"',' unselectable="on"','<tpl if="tabIndex">',' tabIndex="{tabIndex}"',"</tpl>",">",'<span id="{id}-textEl" class="{textCls}{childElCls}" unselectable="on">{text}</span>','<tpl if="hasIcon">','<div role="presentation" id="{id}-iconEl" class="{baseIconCls}','{[values.rightIcon ? "-right" : ""]} {iconCls}','{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl>',"</div>","</tpl>",'<tpl if="showCheckbox">','<div role="presentation" id="{id}-checkEl" class="{baseIconCls}','{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} ','{groupCls} {checkboxCls}{childElCls}">',"</div>","</tpl>",'<tpl if="hasMenu">','<div role="presentation" id="{id}-arrowEl" class="{arrowCls}{childElCls}"></div>',"</tpl>","</a>","</tpl>"],maskOnDisable:!1,iconAlign:"left",activate:function(e){var t=this;if(e||!t.activated&&t.canActivate&&t.rendered&&!t.isDisabled()&&t.isVisible())t.plain||t.el.addCls(t.activeCls),t.focus(!1,!0),t.activated=!0,t.hasListeners.activate&&t.fireEvent("activate",t)},getFocusEl:function(){return this.itemEl},deactivate:function(){var e=this,t;e.activated&&(t=e.up(""),e.plain||e.el.removeCls(e.activeCls),t&&t.focus(!1,!0),e.hideMenu(),e.activated=!1,e.hasListeners.deactivate&&e.fireEvent("deactivate",e))},deferHideMenu:function(){this.menu.isVisible()&&this.menu.hide()},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var e;Ext.menu.Manager.hideAll(),Ext.Element.getActiveElement()||(e=this.up(":not([hidden])"),e&&e.focus())},expandMenu:function(e){var t=this;t.menu&&(t.cancelDeferHide(),e===0?t.doExpandMenu():(clearTimeout(t.expandMenuTimer),t.expandMenuTimer=Ext.defer(t.doExpandMenu,Ext.isNumber(e)?e:t.menuExpandDelay,t)))},doExpandMenu:function(){var e=this,t=e.menu;e.activated&&(!t.rendered||!t.isVisible())&&(e.parentMenu.activeChild=t,t.parentItem=e,t.parentMenu=e.parentMenu,t.showBy(e,e.menuAlign))},getRefItems:function(e){var t=this.menu,n;return t&&(n=t.getRefItems(e),n.unshift(t)),n||[]},hideMenu:function(e){var t=this;t.menu&&(clearTimeout(t.expandMenuTimer),t.hideMenuTimer=Ext.defer(t.deferHideMenu,Ext.isNumber(e)?e:t.menuHideDelay,t))},initComponent:function(){var e=this,t=Ext.baseCSSPrefix,n=[t+"menu-item"],r;e.addEvents("activate","click","deactivate","textchange","iconchange"),e.plain&&n.push(t+"menu-item-plain"),e.cls&&n.push(e.cls),e.cls=n.join(" "),e.menu&&(r=e.menu,delete e.menu,e.setMenu(r)),e.callParent(arguments)},onClick:function(e){var t=this,n=t.clickHideDelay;t.href||e.stopEvent();if(t.disabled)return;t.hideOnClick&&(n?t.deferHideParentMenusTimer=Ext.defer(t.deferHideParentMenus,n,t):t.deferHideParentMenus()),Ext.callback(t.handler,t.scope||t,[t,e]),t.fireEvent("click",t,e),t.hideOnClick||t.focus()},onRemoved:function(){var e=this;e.activated&&e.parentMenu.activeItem===e&&e.parentMenu.deactivateActiveItem(),e.callParent(arguments),e.parentMenu=e.ownerButton=null},beforeDestroy:function(){var e=this;e.rendered&&e.clearTip(),e.callParent()},onDestroy:function(){var e=this;clearTimeout(e.expandMenuTimer),e.cancelDeferHide(),clearTimeout(e.deferHideParentMenusTimer),e.setMenu(null),e.callParent(arguments)},beforeRender:function(){var e=this,t=e.glyph,n=Ext._glyphFontFamily,r=!!(e.icon||e.iconCls||t),i=!!e.menu,s=e.iconAlign==="right"&&!i,o=e.isMenuCheckItem,u=[],a=e.ownerCt,f=a.plain,l;e.callParent(),r&&i&&e.showCheckbox&&(r=!1),typeof t=="string"&&(l=t.split("@"),t=l[0],n=l[1]);if(!f||r&&!s||o)a.showSeparator&&!f?u.push(e.indentCls):u.push(e.indentNoSeparatorCls);i?u.push(e.indentRightArrowCls):r&&(s||o)&&u.push(e.indentRightIconCls),Ext.applyIf(e.renderData,{href:e.href||"#",hrefTarget:e.hrefTarget,icon:e.icon,iconCls:e.iconCls,glyph:t,glyphCls:t?Ext.baseCSSPrefix+"menu-item-glyph":undefined,glyphFontFamily:n,hasIcon:r,hasMenu:i,indent:!f||r||o,isCheckItem:o,rightIcon:s,plain:e.plain,text:e.text,arrowCls:e.arrowCls,baseIconCls:e.baseIconCls,textCls:e.textCls,indentCls:u.join(" "),linkCls:e.linkCls,groupCls:e.group?e.groupCls:"",tabIndex:e.tabIndex})},onRender:function(){var e=this;e.callParent(arguments),e.tooltip&&e.setTooltip(e.tooltip,!0)},setMenu:function(e,t){var n=this,r=n.menu,i=n.arrowEl;r&&(delete r.parentItem,delete r.parentMenu,delete r.ownerItem,(t===!0||t!==!1&&n.destroyMenu)&&Ext.destroy(r)),e?(n.menu=Ext.menu.Manager.get(e),n.menu.ownerItem=n):n.menu=null,n.rendered&&!n.destroying&&i&&i[n.menu?"addCls":"removeCls"](n.arrowCls)},setHandler:function(e,t){this.handler=e||null,this.scope=t},setIcon:function(e){var t=this.iconEl,n=this.icon;t&&(t.src=e||Ext.BLANK_IMAGE_URL),this.icon=e,this.fireEvent("iconchange",this,n,e)},setIconCls:function(e){var t=this,n=t.iconEl,r=t.iconCls;n&&(t.iconCls&&n.removeCls(t.iconCls),e&&n.addCls(e)),t.iconCls=e,t.fireEvent("iconchange",t,r,e)},setText:function(e){var t=this,n=t.textEl||t.el,r=t.text;t.text=e,t.rendered&&(n.update(e||""),t.ownerCt.updateLayout()),t.fireEvent("textchange",t,r,e)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(e,t){var n=this;return n.rendered?(t||n.clearTip(),Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:n.itemEl.id},e)),n.tooltip=e):n.itemEl.dom.setAttribute(n.getTipAttr(),e)):n.tooltip=e,n}}),Ext.define("Ext.menu.CheckItem",{extend:Ext.menu.Item,alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:!1,checkChangeDisabled:!1,ariaRole:"menuitemcheckbox",childEls:["itemEl","iconEl","textEl","checkEl"],showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var e=this;e.checked=!!e.checked,e.addEvents("beforecheckchange","checkchange"),e.callParent(arguments),Ext.menu.Manager.registerCheckable(e),e.group&&e.initialConfig.hideOnClick!==!1&&(e.hideOnClick=!0)},beforeRender:function(){var e=this;e.callParent(),Ext.apply(e.renderData,{checkboxCls:e.checkboxCls,showCheckbox:e.showCheckbox})},afterRender:function(){var e=this;e.callParent(),e.checked=!e.checked,e.setChecked(!e.checked,!0),e.checkChangeDisabled&&e.disableCheckChange()},disableCheckChange:function(){var e=this,t=e.checkEl;t&&t.addCls(e.disabledCls),!(Ext.isIE10p||Ext.isIE9&&Ext.isStrict)&&e.rendered&&e.el.repaint(),e.checkChangeDisabled=!0},enableCheckChange:function(){var e=this,t=e.checkEl;t&&t.removeCls(e.disabledCls),e.checkChangeDisabled=!1},onClick:function(e){var t=this;!t.disabled&&!t.checkChangeDisabled&&(!t.checked||!t.group)&&t.setChecked(!t.checked),this.callParent([e])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),this.callParent(arguments)},setChecked:function(e,t){var n=this,r=n.checkedCls,i=n.uncheckedCls,s=n.el;n.checked!==e&&(t||n.fireEvent("beforecheckchange",n,e)!==!1)&&(s&&(e?(s.addCls(r),s.removeCls(i)):(s.addCls(i),s.removeCls(r))),n.checked=e,Ext.menu.Manager.onCheckChange(n,e),t||(Ext.callback(n.checkHandler,n.scope||n,[n,e]),n.fireEvent("checkchange",n,e)))}}),Ext.define("Ext.menu.KeyNav",{extend:Ext.util.KeyNav,constructor:function(e){var t=this;t.menu=e.target,t.callParent([Ext.apply({down:t.down,enter:t.enter,esc:t.escape,left:t.left,right:t.right,space:t.enter,tab:t.tab,up:t.up},e)])},down:function(e){var t=this,n=t.menu.focusedItem;if(n&&e.getKey()==Ext.EventObject.DOWN&&t.isWhitelisted(n))return!0;t.focusNextItem(1)},enter:function(e){var t=this.menu,n=t.focusedItem;if(t.activeItem)t.onClick(e);else if(n&&n.isFormField)return!0},escape:function(e){Ext.menu.Manager.hideAll()},focusNextItem:function(e){var t=this.menu,n=t.items,r=t.focusedItem,i=r?n.indexOf(r):-1,s=i+e,o=n.length,u=0,a;while(u<o&&s!==i){s<0?s=o-1:s>=o&&(s=0),a=n.getAt(s);if(t.canActivateItem(a)){t.setActiveItem(a);break}s+=e,++u}},isWhitelisted:function(e){return Ext.FocusManager.isWhitelisted(e)},left:function(e){var t=this.menu,n=t.focusedItem;if(n&&this.isWhitelisted(n))return!0;t.hide(),t.parentMenu&&t.parentMenu.focus()},right:function(e){var t=this.menu,n=t.focusedItem,r=t.activeItem,i;if(n&&this.isWhitelisted(n))return!0;r&&(i=t.activeItem.menu,i&&(r.expandMenu(0),i.setActiveItem(i.child(":focusable"))))},tab:function(e){var t=this;e.shiftKey?t.up(e):t.down(e)},up:function(e){var t=this,n=t.menu.focusedItem;if(n&&e.getKey()==Ext.EventObject.UP&&t.isWhitelisted(n))return!0;t.focusNextItem(-1)}}),Ext.define("Ext.menu.Separator",{extend:Ext.menu.Item,alias:"widget.menuseparator",canActivate:!1,focusable:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(e,t){var n=this;n.callParent(),n.addCls(n.separatorCls)}}),Ext.define("Ext.menu.Menu",{extend:Ext.panel.Panel,alias:"widget.menu",enableKeyNav:!0,allowOtherMenus:!1,ariaRole:"menu",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:undefined,defaultMinWidth:120,initComponent:function(){var e=this,t=Ext.baseCSSPrefix,n=[t+"menu"],r=e.bodyCls?[e.bodyCls]:[],i=e.floating!==!1;e.addEvents("click","mouseenter","mouseleave","mouseover"),Ext.menu.Manager.register(e),e.plain&&n.push(t+"menu-plain"),e.cls=n.join(" "),r.push(t+"menu-body",Ext.dom.Element.unselectableCls),e.bodyCls=r.join(" "),e.layout||(e.layout={type:"vbox",align:"stretchmax",overflowHandler:"Scroller"}),i?e.minWidth===undefined&&(e.minWidth=e.defaultMinWidth):(e.hidden=!!e.initialConfig.hidden,e.constrain=!1),e.callParent(arguments)},registerWithOwnerCt:function(){this.floating&&(this.ownerCt=null,Ext.WindowManager.register(this))},initHierarchyEvents:Ext.emptyFn,isVisible:function(){return this.callParent()},getHierarchyState:function(){var e=this.callParent();return e.hidden=this.hidden,e},beforeRender:function(){this.callParent(arguments),this.getSizeModel().width.shrinkWrap||(this.layout.align="stretch")},onBoxReady:function(){var e=this;e.callParent(arguments),e.showSeparator&&(e.iconSepEl=e.layout.getElementTarget().insertFirst({role:"presentation",cls:Ext.baseCSSPrefix+"menu-icon-separator",html:"&#160;"})),e.mon(e.el,{click:e.onClick,mouseover:e.onMouseOver,scope:e}),e.mouseMonitor=e.el.monitorMouseLeave(100,e.onMouseLeave,e),e.enableKeyNav&&(e.keyNav=new Ext.menu.KeyNav({target:e,keyMap:e.getKeyMap()}))},getRefOwner:function(){return this.parentMenu||this.ownerButton||this.callParent(arguments)},canActivateItem:function(e){return e&&!e.isDisabled()&&e.isVisible()&&(e.canActivate||!e.isMenuItem)},deactivateActiveItem:function(e){var t=this,n=t.activeItem,r=t.focusedItem;n&&(n.deactivate(),n.activated||delete t.activeItem),r&&e&&(r.blur(),delete t.focusedItem)},getFocusEl:function(){return this.focusedItem||this.el},hide:function(){this.deactivateActiveItem(!0),this.callParent(arguments)},getItemFromEvent:function(e){var t=this,n=t.layout.getRenderTarget().dom,r=e.getTarget();while(r.parentNode!==n){r=r.parentNode;if(!r)return}return Ext.getCmp(r.id)},lookupComponent:function(e){var t=this;return typeof e=="string"?e=t.lookupItemFromString(e):Ext.isObject(e)&&(e=t.lookupItemFromObject(e)),e.minWidth=e.minWidth||t.minWidth,e},lookupItemFromObject:function(e){var t=this,n=Ext.baseCSSPrefix,r;return e.isComponent||(e.xtype?e=Ext.ComponentManager.create(e,e.xtype):e=Ext.create("Ext.menu."+(Ext.isBoolean(e.checked)?"Check":"")+"Item",e)),e.isMenuItem&&(e.parentMenu=t),!e.isMenuItem&&!e.dock&&(r=[n+"menu-item-cmp"],!t.plain&&(e.indent!==!1||e.iconCls==="no-icon")&&r.push(n+"menu-item-indent"),e.rendered?e.el.addCls(r):e.cls=(e.cls||"")+" "+r.join(" ")),e},lookupItemFromString:function(e){return e=="separator"||e=="-"?new Ext.menu.Separator:new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:e})},onClick:function(e){var t=this,n;if(t.disabled){e.stopEvent();return}n=e.type==="click"?t.getItemFromEvent(e):t.activeItem,n&&n.isMenuItem&&(!n.menu||!t.ignoreParentClicks?n.onClick(e):e.stopEvent());if(!n||n.disabled)n=undefined;t.fireEvent("click",t,n,e)},onDestroy:function(){var e=this;Ext.menu.Manager.unregister(e),e.parentMenu=e.ownerButton=null,e.rendered&&(e.el.un(e.mouseMonitor),Ext.destroy(e.keyNav),e.keyNav=null),e.callParent(arguments)},onMouseLeave:function(e){var t=this;t.deactivateActiveItem();if(t.disabled)return;t.fireEvent("mouseleave",t,e)},onMouseOver:function(e){var t=this,n=e.getRelatedTarget(),r=!t.el.contains(n),i=t.getItemFromEvent(e),s=t.parentMenu,o=t.parentItem;r&&s&&(s.setActiveItem(o),o.cancelDeferHide(),s.mouseMonitor.mouseenter());if(t.disabled)return;i&&!i.activated&&(t.setActiveItem(i),i.activated&&i.expandMenu&&i.expandMenu()),r&&t.fireEvent("mouseenter",t,e),t.fireEvent("mouseover",t,i,e)},setActiveItem:function(e){var t=this;e&&e!=t.activeItem&&(t.deactivateActiveItem(),t.canActivateItem(e)&&(e.activate?(e.activate(!0),e.activated&&(t.activeItem=e,t.focusedItem=e)):(e.focus(),t.focusedItem=e)))},showBy:function(e,t,n){var r=this;return r.callParent(arguments),r.hidden||r.setVerticalPosition(),r},beforeShow:function(){var e=this,t;e.floating&&(e.savedMaxHeight=e.maxHeight,t=e.container.getViewSize().height,e.maxHeight=Math.min(e.maxHeight||t,t)),e.callParent(arguments)},afterShow:function(){var e=this;e.callParent(arguments),e.floating&&(e.maxHeight=e.savedMaxHeight)},setVerticalPosition:function(){var e=this,t,n=e.getY(),r=n,i=e.getHeight(),s=Ext.Element.getViewportHeight().height,o=e.el.parent(),u=o.getViewSize().height,a=n-o.getScroll().top;o=null,e.floating&&(t=e.maxHeight?e.maxHeight:u-a,i>u?r=n-a:t<i?r=n-(i-t):n+i>s&&(r=s-i)),e.setY(r)}}),Ext.define("Ext.menu.ColorPicker",{extend:Ext.menu.Menu,alias:"widget.colormenu",hideOnClick:!0,pickerId:null,initComponent:function(){var e=this,t=Ext.apply({},e.initialConfig);delete t.listeners,Ext.apply(e,{plain:!0,showSeparator:!1,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",margin:0,id:e.pickerId,xtype:"colorpicker"},t)}),e.callParent(arguments),e.picker=e.down("colorpicker"),e.relayEvents(e.picker,["select"]),e.hideOnClick&&e.on("select",e.hidePickerOnSelect,e)},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.menu.DatePicker",{extend:Ext.menu.Menu,alias:"widget.datemenu",hideOnClick:!0,pickerId:null,initComponent:function(){var e=this,t=Ext.apply({},e.initialConfig);delete t.listeners,Ext.apply(e,{showSeparator:!1,plain:!0,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",margin:0,border:!1,id:e.pickerId,xtype:"datepicker"},t)}),e.callParent(arguments),e.picker=e.down("datepicker"),e.relayEvents(e.picker,["select"]),e.hideOnClick&&e.on("select",e.hidePickerOnSelect,e)},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.panel.Tool",{extend:Ext.Component,alias:"widget.tool",isTool:!0,baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",childEls:["toolEl"],renderTpl:['<img id="{id}-toolEl" src="{blank}" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"/>'],toolOwner:null,tooltipType:"qtip",stopEvent:!0,height:15,width:15,initComponent:function(){var e=this;e.addEvents("click"),e.type=e.type||e.id,Ext.applyIf(e.renderData,{baseCls:e.baseCls,blank:Ext.BLANK_IMAGE_URL,type:e.type}),e.tooltip=e.tooltip||e.qtip,e.callParent()},afterRender:function(){var e=this,t;e.callParent(arguments),e.el.on({click:e.onClick,mousedown:e.onMouseDown,mouseover:e.onMouseOver,mouseout:e.onMouseOut,scope:e}),e.tooltip&&(Ext.quickTipsActive&&Ext.isObject(e.tooltip)?Ext.tip.QuickTipManager.register(Ext.apply({target:e.id},e.tooltip)):(t=e.tooltipType=="qtip"?"data-qtip":"title",e.el.dom.setAttribute(t,e.tooltip)))},getFocusEl:function(){return this.el},setType:function(e){var t=this,n=t.type;return t.type=e,t.rendered?(n&&t.toolEl.removeCls(t.baseCls+"-"+n),t.toolEl.addCls(t.baseCls+"-"+e)):t.renderData.type=e,t},onClick:function(e,t){var n=this;return n.disabled?!1:(n.el.removeCls(n.toolPressedCls),n.el.removeCls(n.toolOverCls),n.stopEvent!==!1&&e.stopEvent(),n.handler?Ext.callback(n.handler,n.scope||n,[e,t,n.ownerCt,n]):n.callback&&Ext.callback(n.callback,n.scope||n,[n.toolOwner||n.ownerCt,n,e]),n.fireEvent("click",n,e),!0)},onDestroy:function(){var e=this;Ext.quickTipsActive&&Ext.isObject(e.tooltip)&&Ext.tip.QuickTipManager.unregister(e.id),e.keyMap&&e.keyMap.destroy(),e.callParent()},onMouseDown:function(){if(this.disabled)return!1;this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled)return!1;this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}),Ext.define("Ext.resizer.SplitterTracker",{extend:Ext.dd.DragTracker,enabled:!0,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var e;e=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"}),e.unselectable(),e.setSize(Ext.Element.getViewWidth(!0),Ext.Element.getViewHeight(!0)),e.show()},getPrevCmp:function(){var e=this.getSplitter();return e.previousSibling(":not([hidden])")},getNextCmp:function(){var e=this.getSplitter();return e.nextSibling(":not([hidden])")},onBeforeStart:function(e){var t=this,n=t.getPrevCmp(),r=t.getNextCmp(),i=t.getSplitter().collapseEl,s=e.getTarget(),o;return!n||!r?!1:i&&s===t.getSplitter().collapseEl.dom?!1:r.collapsed||n.collapsed?!1:(t.prevBox=n.getEl().getBox(),t.nextBox=r.getEl().getBox(),t.constrainTo=o=t.calculateConstrainRegion(),o?o:!1)},onStart:function(e){var t=this.getSplitter();this.createDragOverlay(),t.addCls(t.baseCls+"-active")},calculateConstrainRegion:function(){var e=this,t=e.getSplitter(),n=t.getWidth(),r=t.defaultSplitMin,i=t.orientation,s=e.prevBox,o=e.getPrevCmp(),u=e.nextBox,a=e.getNextCmp(),f,l,c;return i==="vertical"?(c={prevCmp:o,nextCmp:a,prevBox:s,nextBox:u,defaultMin:r,splitWidth:n},f=new Ext.util.Region(s.y,e.getVertPrevConstrainRight(c),s.bottom,e.getVertPrevConstrainLeft(c)),l=new Ext.util.Region(u.y,e.getVertNextConstrainRight(c),u.bottom,e.getVertNextConstrainLeft(c))):(f=new Ext.util.Region(s.y+(o.minHeight||r),s.right,(o.maxHeight?s.y+o.maxHeight:u.bottom-(a.minHeight||r))+n,s.x),l=new Ext.util.Region((a.maxHeight?u.bottom-a.maxHeight:s.y+(o.minHeight||r))-n,u.right,u.bottom-(a.minHeight||r),u.x)),f.intersect(l)},performResize:function(e,t){var n=this,r=n.getSplitter(),i=r.orientation,s=n.getPrevCmp(),o=n.getNextCmp(),u=r.ownerCt,a=u.query(">[flex]"),f=a.length,l=i==="vertical",c=0,h=l?"width":"height",p=0,d,v;for(;c<f;c++)d=a[c],v=l?d.getWidth():d.getHeight(),p+=v,d.flex=v;t=l?t[0]:t[1],s&&(v=n.prevBox[h]+t,s.flex?s.flex=v:s[h]=v),o&&(v=n.nextBox[h]-t,o.flex?o.flex=v:o[h]=v),u.updateLayout()},endDrag:function(){var e=this;e.overlay&&(e.overlay.remove(),delete e.overlay),e.callParent(arguments)},onEnd:function(e){var t=this,n=t.getSplitter();n.removeCls(n.baseCls+"-active"),t.performResize(e,t.getResizeOffset())},onDrag:function(e){var t=this,n=t.getOffset("dragTarget"),r=t.getSplitter(),i=r.getEl(),s=r.orientation;s==="vertical"?i.setX(t.startRegion.left+n[0]):i.setY(t.startRegion.top+n[1])},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(e){return(e.prevCmp.maxWidth?e.prevBox.x+e.prevCmp.maxWidth:e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin))+e.splitWidth},getVertPrevConstrainLeft:function(e){return e.prevBox.x+(e.prevCmp.minWidth||e.defaultMin)},getVertNextConstrainRight:function(e){return e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin)},getVertNextConstrainLeft:function(e){return(e.nextCmp.maxWidth?e.nextBox.right-e.nextCmp.maxWidth:e.prevBox.x+(e.prevBox.minWidth||e.defaultMin))-e.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}}),Ext.define("Ext.resizer.BorderSplitterTracker",{extend:Ext.resizer.SplitterTracker,getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var e=this,t=e.splitter,n=t.collapseTarget,r=t.defaultSplitMin,i=t.vertical?"Width":"Height",s="min"+i,o="max"+i,u="get"+i,a=t.neighbors,f=a.length,l=n.el.getBox(),c=l.x,h=l.y,p=l.right,d=l.bottom,v=t.vertical?p-c:d-h,m,g,y,b,w,E,S;y=(n[s]||Math.min(v,r))-v,b=n[o],b?b-=v:b=1e9,S=v;for(m=0;m<f;++m)g=a[m],v=g[u](),w=v-g[o],E=v-(g[s]||Math.min(v,r)),isNaN(w)||y<w&&(y=w),b>E&&(b=E);return b-y<2?null:(l=new Ext.util.Region(h,p,d,c),e.constraintAdjusters[e.getCollapseDirection()](l,y,b,t),e.dragInfo={minRange:y,maxRange:b,targetSize:S},l)},constraintAdjusters:{left:function(e,t,n,r){e[0]=e.x=e.left=e.right+t,e.right+=n+r.getWidth()},top:function(e,t,n,r){e[1]=e.y=e.top=e.bottom+t,e.bottom+=n+r.getHeight()},bottom:function(e,t,n,r){e.bottom=e.top-t,e.top-=n+r.getHeight()},right:function(e,t,n,r){e.right=e.left-t,e[0]=e.x=e.left=e.x-n+r.getWidth()}},onBeforeStart:function(e){var t=this,n=t.splitter,r=n.collapseTarget,i=n.neighbors,s=t.getSplitter().collapseEl,o=e.getTarget(),u=i.length,a,f;if(s&&o===n.collapseEl.dom)return!1;if(r.collapsed)return!1;for(a=0;a<u;++a){f=i[a];if(f.collapsed&&f.isHorz===r.isHorz)return!1}return(t.constrainTo=t.calculateConstrainRegion())?!0:!1},performResize:function(e,t){var n=this,r=n.splitter,i=r.getCollapseDirection(),s=r.collapseTarget,o=n.splitAdjusters[r.vertical?"horz":"vert"],u=t[o.index],a=n.dragInfo,f;if(i=="right"||i=="bottom")u=-u;u=Math.min(Math.max(a.minRange,u),a.maxRange),u&&((f=r.ownerCt).suspendLayouts(),o.adjustTarget(s,a.targetSize,u),f.resumeLayouts(!0))},splitAdjusters:{horz:{index:0,adjustTarget:function(e,t,n){e.flex=null,e.setSize(t+n)}},vert:{index:1,adjustTarget:function(e,t,n){e.flex=null,e.setSize(undefined,t+n)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}}),Ext.define("Ext.resizer.Handle",{extend:Ext.Component,handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",ariaRole:"presentation",beforeRender:function(){var e=this;e.callParent(),e.protoEl.unselectable(),e.addCls(e.baseHandleCls,e.baseHandleCls+"-"+e.region,e.handleCls)}}),Ext.define("Ext.resizer.ResizeTracker",{extend:Ext.dd.DragTracker,dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(e){var t=this,n,r,i;e.el||(e.target.isComponent?t.el=e.target.getEl():t.el=e.target),this.callParent(arguments),t.preserveRatio&&t.minWidth&&t.minHeight&&(n=t.minWidth/t.el.getWidth(),r=t.minHeight/t.el.getHeight(),r>n?t.minWidth=t.el.getWidth()*r:t.minHeight=t.el.getHeight()*n),t.throttle&&(i=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(t,arguments)},t.throttle),t.resize=function(e,n,r){r?Ext.resizer.ResizeTracker.prototype.resize.apply(t,arguments):i.apply(null,arguments)})},onBeforeStart:function(e){this.startBox=this.target.getBox()},getDynamicTarget:function(){var e=this,t=e.target;return e.dynamic?t:(e.proxy||(e.proxy=e.createProxy(t)),e.proxy.show(),e.proxy)},createProxy:function(e){var t,n=this.proxyCls;return e.isComponent?t=e.getProxy().addCls(n):t=e.createProxy({tag:"div",role:"presentation",cls:n,id:e.id+"-rzproxy"},Ext.getBody()),t.removeCls(Ext.baseCSSPrefix+"proxy-el"),t},onStart:function(e){this.activeResizeHandle=Ext.get(this.getDragTarget().id),this.dynamic||this.resize(this.startBox,{horizontal:"none",vertical:"none"})},onDrag:function(e){(this.dynamic||this.proxy)&&this.updateDimensions(e)},updateDimensions:function(e,t){var n=this,r=n.activeResizeHandle.region,i=n.getOffset(n.constrainTo?"dragTarget":null),s=n.startBox,o,u=0,a=0,f,l,c=0,h=0,p,d=i[0]<0?"right":"left",v=i[1]<0?"down":"up",m,g,y,b,w;r=n.convertRegionName(r);switch(r){case"south":a=i[1],g=2;break;case"north":a=-i[1],h=-a,g=2;break;case"east":u=i[0],g=1;break;case"west":u=-i[0],c=-u,g=1;break;case"northeast":a=-i[1],h=-a,u=i[0],m=[s.x,s.y+s.height],g=3;break;case"southeast":a=i[1],u=i[0],m=[s.x,s.y],g=3;break;case"southwest":u=-i[0],c=-u,a=i[1],m=[s.x+s.width,s.y],g=3;break;case"northwest":a=-i[1],h=-a,u=-i[0],c=-u,m=[s.x+s.width,s.y+s.height],g=3}y={width:s.width+u,height:s.height+a,x:s.x+c,y:s.y+h},f=Ext.Number.snap(y.width,n.widthIncrement),l=Ext.Number.snap(y.height,n.heightIncrement);if(f!=y.width||l!=y.height){switch(r){case"northeast":y.y-=l-y.height;break;case"north":y.y-=l-y.height;break;case"southwest":y.x-=f-y.width;break;case"west":y.x-=f-y.width;break;case"northwest":y.x-=f-y.width,y.y-=l-y.height}y.width=f,y.height=l}y.width<n.minWidth||y.width>n.maxWidth?(y.width=Ext.Number.constrain(y.width,n.minWidth,n.maxWidth),c&&(y.x=s.x+(s.width-y.width))):n.lastX=y.x,y.height<n.minHeight||y.height>n.maxHeight?(y.height=Ext.Number.constrain(y.height,n.minHeight,n.maxHeight),h&&(y.y=s.y+(s.height-y.height))):n.lastY=y.y;if(n.preserveRatio||e.shiftKey)o=n.startBox.width/n.startBox.height,b=Math.min(Math.max(n.minHeight,y.width/o),n.maxHeight),w=Math.min(Math.max(n.minWidth,y.height*o),n.maxWidth),g==1?y.height=b:g==2?y.width=w:(p=Math.abs(m[0]-this.lastXY[0])/Math.abs(m[1]-this.lastXY[1]),p>o?y.height=b:y.width=w,r=="northeast"?y.y=s.y-(y.height-s.height):r=="northwest"?(y.y=s.y-(y.height-s.height),y.x=s.x-(y.width-s.width)):r=="southwest"&&(y.x=s.x-(y.width-s.width)));a===0&&(v="none"),u===0&&(d="none"),n.resize(y,{horizontal:d,vertical:v},t)},getResizeTarget:function(e){return e?this.target:this.getDynamicTarget()},resize:function(e,t,n){var r=this,i=r.getResizeTarget(n);i.setBox(e),r.originalTarget&&(r.dynamic||n)&&r.originalTarget.setBox(e)},onEnd:function(e){this.updateDimensions(e,!0),this.proxy&&this.proxy.hide()},convertRegionName:function(e){return e}}),Ext.define("Ext.resizer.Resizer",{mixins:{observable:Ext.util.Observable},alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(e){var t=this,n,r,i,s=t.handles,o,u,a,f=0,l,c=[],h,p,d,v,m=Ext.dom.Element.unselectableCls;t.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(e)||Ext.isElement(e)||e.dom)n=e,e=arguments[1]||{},e.target=n;t.mixins.observable.constructor.call(t,e),n=t.target,n?n.isComponent?(n.addClsWithUI("resizable"),t.el=n.getEl(),n.minWidth&&(t.minWidth=n.minWidth),n.minHeight&&(t.minHeight=n.minHeight),n.maxWidth&&(t.maxWidth=n.maxWidth),n.maxHeight&&(t.maxHeight=n.maxHeight),n.floating&&(t.hasOwnProperty("handles")||(t.handles="n ne e se s sw w nw"))):t.el=t.target=Ext.get(n):t.target=t.el=Ext.get(t.el),i=t.el.dom.tagName.toUpperCase();if(i=="TEXTAREA"||i=="IMG"||i=="TABLE")t.originalTarget=t.target,r=t.el,d=r.getBox(),t.target=t.el=t.el.wrap({role:"presentation",cls:t.wrapCls,id:t.el.id+"-rzwrap",style:r.getStyles("margin-top","margin-bottom")}),t.el.setPositioning(r.getPositioning()),r.clearPositioning(),t.el.setBox(d),r.setStyle("position","absolute");t.el.position(),t.pinned&&t.el.addCls(t.pinnedCls),t.resizeTracker=new Ext.resizer.ResizeTracker({disabled:t.disabled,target:t.target,constrainTo:t.constrainTo,overCls:t.overCls,throttle:t.throttle,originalTarget:t.originalTarget,delegate:"."+t.handleCls,dynamic:t.dynamic,preserveRatio:t.preserveRatio,heightIncrement:t.heightIncrement,widthIncrement:t.widthIncrement,minHeight:t.minHeight,maxHeight:t.maxHeight,minWidth:t.minWidth,maxWidth:t.maxWidth}),t.resizeTracker.on({mousedown:t.onBeforeResize,drag:t.onResize,dragend:t.onResizeEnd,scope:t}),t.handles=="all"&&(t.handles="n s e w ne nw se sw"),s=t.handles=t.handles.split(t.delimiterRe),u=t.possiblePositions,a=s.length,o=t.handleCls+" "+t.handleCls+"-{0}",t.target.isComponent&&(v=t.target.baseCls,o+=" "+v+"-handle "+v+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(o+=" "+v+"-handle-{0}-br")),h=Ext.isIE6?' style="height:'+t.el.getHeight()+'px"':"";for(;f<a;f++)s[f]&&u[s[f]]&&(l=u[s[f]],l==="east"||l==="west"?p=h:p="",c.push('<div id="',t.el.id,"-",l,'-handle"',' class="',Ext.String.format(o,l)," ",m,'"',' unselectable="on" role="presentation"',p,"></div>"));Ext.DomHelper.append(t.el,c.join(""));for(f=0;f<a;f++)s[f]&&u[s[f]]&&(l=u[s[f]],t[l]=t.el.getById(t.el.id+"-"+l+"-handle"),t[l].region=l,t.transparent&&t[l].setOpacity(0));Ext.isNumber(t.width)&&(t.width=Ext.Number.constrain(t.width,t.minWidth,t.maxWidth)),Ext.isNumber(t.height)&&(t.height=Ext.Number.constrain(t.height,t.minHeight,t.maxHeight));if(t.width!==null||t.height!==null)t.originalTarget&&(t.originalTarget.setWidth
(t.width),t.originalTarget.setHeight(t.height)),t.resizeTo(t.width,t.height);t.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(e,t){var n=this.el.getBox();return this.fireEvent("beforeresize",this,n.width,n.height,t)},onResize:function(e,t){var n=this,r=n.el.getBox();return n.forceHandlesHeight(),n.fireEvent("resizedrag",n,r.width,r.height,t)},onResizeEnd:function(e,t){var n=this,r=n.el.getBox();return n.forceHandlesHeight(),n.fireEvent("resize",n,r.width,r.height,t)},resizeTo:function(e,t){var n=this;n.target.setSize(e,t),n.fireEvent("resize",n,e,t,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var e=this,t,n=e.handles,r=n.length,i=e.possiblePositions,s;e.resizeTracker.destroy();for(t=0;t<r;t++)(s=e[i[n[t]]])&&s.remove()},forceHandlesHeight:function(){var e=this,t;Ext.isIE6&&(t=e.east,t&&t.setHeight(e.el.getHeight()),t=e.west,t&&t.setHeight(e.el.getHeight()),e.el.repaint())}}),Ext.define("Ext.selection.CellModel",{extend:Ext.selection.Model,alias:"selection.cellmodel",isCellModel:!0,enableKeyNav:!0,preventWrap:!1,noSelection:{row:-1,column:-1},constructor:function(){this.addEvents("deselect","select"),this.callParent(arguments)},bindComponent:function(e){var t=this,n=e.ownerCt;t.primaryView=e,t.views=t.views||[],t.views.push(e),t.bindStore(e.getStore(),!0),e.on({cellclick:t.onCellClick,refresh:t.onViewRefresh,scope:t}),n.optimizedColumnMove!==!1&&n.on("columnmove",t.onColumnMove,t),t.enableKeyNav&&t.initKeyNav(e)},initKeyNav:function(e){var t=this;if(!e.rendered){e.on("render",Ext.Function.bind(t.initKeyNav,t,[e],0),t,{single:!0});return}e.el.set({tabIndex:-1}),t.keyNav=new Ext.util.KeyNav({target:e.el,ignoreInputFields:!0,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,tab:t.onKeyTab,scope:t})},getHeaderCt:function(){var e=this.getCurrentPosition(),t=e?e.view:this.primaryView;return t.headerCt},onKeyUp:function(e){this.doMove("up",e)},onKeyDown:function(e){this.doMove("down",e)},onKeyLeft:function(e){this.doMove("left",e)},onKeyRight:function(e){this.doMove("right",e)},doMove:function(e,t){this.keyNavigation=!0,this.move(e,t),this.keyNavigation=!1},select:function(e,t,n){var r=this,i,s=r.getCurrentPosition(),o=r.view.store;if(e||e===0)e.isModel?(i=o.indexOf(e),i!==-1?e={row:i,column:s?s.column:0}:e=null):typeof e=="number"&&(e={row:e,column:0});e?r.selectByPosition(e,n):r.deselect()},deselect:function(e,t){this.selectByPosition(null,t)},move:function(e,t){var n=this,r=n.getCurrentPosition(),i;if(r){i=r.view.walkCells(r,e,t,n.preventWrap);if(i)return n.setCurrentPosition(i)}},getCurrentPosition:function(){return this.selecting?this.nextSelection:this.selection},setCurrentPosition:function(e,t,n){var r=this,i=r.selection;r.lastSelection=i,e&&(e=e.isCellContext?e:(new Ext.grid.CellContext(r.primaryView)).setPosition(e)),!n&&i&&(e&&e.record===i.record&&e.columnHeader===i.columnHeader&&e.view===i.view?e=null:r.onCellDeselect(r.selection,t));if(e)return r.nextSelection=e,r.selecting=!0,r.onCellSelect(r.nextSelection,t),r.selecting=!1,r.selection=e},isCellSelected:function(e,t,n){var r=this,i,s=r.getCurrentPosition();if(s&&s.view===e)return i=(new Ext.grid.CellContext(e)).setPosition({row:t,column:n}),i.record===s.record&&i.columnHeader===s.columnHeader},onStoreRemove:function(e,t,n){var r=this,i=r.getCurrentPosition();r.callParent(arguments),i&&e.getCount()&&e.indexOf(i.record)!==-1?r.setCurrentPosition({row:i.record,column:i.columnHeader},!0,!0):r.selection=null},onStoreAdd:function(){var e=this,t=e.getCurrentPosition();e.callParent(arguments),t?e.setCurrentPosition({row:t.record,column:t.columnHeader},!0,!0):e.selection=null},onCellClick:function(e,t,n,r,i,s,o){var u;s!==-1&&(u=(new Ext.grid.CellContext(e)).setPosition({view:e,row:i,column:e.ownerCt.getColumnManager().getHeaderAtIndex(n)}),this.setCurrentPosition(u))},onCellSelect:function(e,t){e&&e.row!==undefined&&e.row>-1&&this.doSelect(e.record,!1,t)},onCellDeselect:function(e,t){e&&e.row!==undefined&&this.doDeselect(e.record,t)},onSelectChange:function(e,t,n,r){var i=this,s,o,u;t?(s=i.nextSelection,o="select"):(s=i.lastSelection||i.noSelection,o="deselect"),u=s.view||i.primaryView,(n||i.fireEvent("before"+o,i,e,s.row,s.column))!==!1&&r()!==!1&&(t?(i.preventFocus||u.focusCell(s,!0),u.onCellSelect(s)):(u.onCellDeselect(s),delete i.selection),n||i.fireEvent(o,i,e,s.row,s.column))},onKeyTab:function(e,t){var n=this,r=n.getCurrentPosition(),i;r&&(i=r.view.editingPlugin,i&&n.wasEditing?n.onEditorTab(i,e):n.move(e.shiftKey?"left":"right",e))},onEditorTab:function(e,t){var n=this,r=t.shiftKey?"left":"right",i=n.move(r,t);i&&(e.startEdit(i.record,i.columnHeader)?n.wasEditing=!1:(i.view.scrollCellIntoView(i),n.wasEditing=!0))},refresh:function(){var e=this.getCurrentPosition(),t;e&&(t=this.store.indexOf(this.selected.last()))!==-1&&(e.row=t)},onColumnMove:function(e,t,n,r){var i=e.up("tablepanel");i&&this.onViewRefresh(i.view)},onUpdate:function(e){var t=this,n;t.isSelected(e)&&(n=t.selecting?t.nextSelection:t.selection,t.view.onCellSelect(n))},onViewRefresh:function(e){var t=this,n=t.getCurrentPosition(),r,i=e.headerCt,s,o;n&&n.view===e&&(s=n.record,o=n.columnHeader,o.isDescendantOf(i)||(o=i.queryById(o.id)||i.down('[text="'+o.text+'"]')||i.down('[dataIndex="'+o.dataIndex+'"]')),n.record?o&&e.store.indexOfId(s.getId())!==-1&&(r=(new Ext.grid.CellContext(e)).setPosition({row:s,column:o}),t.setCurrentPosition(r)):t.selection=null)},selectByPosition:function(e,t){this.setCurrentPosition(e,t)}}),Ext.define("Ext.selection.RowModel",{extend:Ext.selection.Model,alias:"selection.rowmodel",deltaScroll:5,enableKeyNav:!0,ignoreRightMouseSelection:!1,isRowModel:!0,constructor:function(){this.addEvents("beforedeselect","beforeselect","deselect","select"),this.views=[],this.callParent(arguments)},bindComponent:function(e){var t=this;e.on({itemcontextmenu:t.onRowClick,itemclick:t.onRowClick,scope:t}),t.enableKeyNav&&t.initKeyNav(e)},initKeyNav:function(e){var t=this;if(!e.rendered){e.on("render",Ext.Function.bind(t.initKeyNav,t,[e],0),t,{single:!0});return}e.el.set({tabIndex:-1}),t.keyNav=new Ext.util.KeyNav({target:e,ignoreInputFields:!0,eventName:"itemkeydown",processEvent:function(e,t,n,r,i){return i.record=t,i.recordIndex=r,i},up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,space:t.onKeySpace,enter:t.onKeyEnter,scope:t})},onUpdate:function(e){var t=this,n=t.view,r;n&&t.isSelected(e)&&(r=n.indexOf(e),n.onRowSelect(r),e===t.lastFocused&&n.onRowFocus(r,!0))},getRowsVisible:function(){var e=!1,t=this.views[0],n=t.all.first(),r,i;return n&&(r=n.getHeight(),i=t.el.getHeight(),e=Math.floor(i/r)),e},onKeyEnd:function(e){var t=this,n=t.views[0];n.bufferedRenderer?n.bufferedRenderer.scrollTo(t.store.getCount()-1,!1,function(n,r){t.afterKeyNavigate(e,r)}):t.afterKeyNavigate(e,n.getRecord(n.all.getCount()-1))},onKeyHome:function(e){var t=this,n=t.views[0];n.bufferedRenderer?n.bufferedRenderer.scrollTo(0,!1,function(n,r){t.afterKeyNavigate(e,r)}):t.afterKeyNavigate(e,n.getRecord(0))},onKeyPageUp:function(e){var t=this,n=t.views[0],r=t.getRowsVisible(),i,s;r&&(n.bufferedRenderer?(i=Math.max(e.recordIndex-r,0),(t.lastKeyEvent||(t.lastKeyEvent=new Ext.EventObjectImpl)).setEvent(e.browserEvent),n.bufferedRenderer.scrollTo(i,!1,t.afterBufferedScrollTo,t)):(s=n.walkRecs(e.record,-r),t.afterKeyNavigate(e,s)))},onKeyPageDown:function(e){var t=this,n=t.views[0],r=t.getRowsVisible(),i,s;r&&(n.bufferedRenderer?(i=Math.min(e.recordIndex+r,t.store.getCount()-1),(t.lastKeyEvent||(t.lastKeyEvent=new Ext.EventObjectImpl)).setEvent(e.browserEvent),n.bufferedRenderer.scrollTo(i,!1,t.afterBufferedScrollTo,t)):(s=n.walkRecs(e.record,r),t.afterKeyNavigate(e,s)))},onKeySpace:function(e){var t=this.lastFocused;t&&this.afterKeyNavigate(e,t)},onKeyEnter:Ext.emptyFn,onKeyUp:function(e){var t=this.views[0].walkRecs(e.record,-1);t&&this.afterKeyNavigate(e,t)},onKeyDown:function(e){var t=e.record.isExpandingOrCollapsing?null:this.views[0].walkRecs(e.record,1);t&&this.afterKeyNavigate(e,t)},afterBufferedScrollTo:function(e,t){this.afterKeyNavigate(this.lastKeyEvent,t)},scrollByDeltaX:function(e){var t=this.views[0],n=t.up(),r=n.horizontalScroller;r&&r.scrollByDeltaX(e)},onKeyLeft:function(e){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(e){this.scrollByDeltaX(this.deltaScroll)},onRowClick:function(e,t,n,r,i){var s=this;if(r!==-1){if(!s.allowRightMouseSelection(i))return;s.processSelection(e,t,n,r,i)}},processSelection:function(e,t,n,r,i){this.selectWithEvent(t,i)},allowRightMouseSelection:function(e){var t=this.ignoreRightMouseSelection&&e.button!==0;return t&&(t=this.hasSelection()),!t},onSelectChange:function(e,t,n,r){var i=this,s=i.views,o=s.length,u=s[0].indexOf(e),a=t?"select":"deselect",f=0;if((n||i.fireEvent("before"+a,i,e,u))!==!1&&r()!==!1){for(;f<o;f++)t?s[f].onRowSelect(u,n):s[f].onRowDeselect(u,n);n||i.fireEvent(a,i,e,u)}},onLastFocusChanged:function(e,t,n){var r=this.views,i=r.length,s,o=0;if(e){s=r[0].indexOf(e);if(s!=-1)for(;o<i;o++)r[o].onRowFocus(s,!1,!0)}if(t){s=r[0].indexOf(t);if(s!=-1)for(o=0;o<i;o++)r[o].onRowFocus(s,!0,n)}this.callParent(arguments)},onEditorTab:function(e,t){var n=this,r=e.context.view,i=e.getActiveRecord(),s=e.getActiveColumn(),o=r.getPosition(i,s),u=t.shiftKey?"left":"right",a;do{a=o,o=r.walkCells(o,u,t,n.preventWrap);if(a&&a.isEqual(o))return}while(o&&(!o.columnHeader.getEditor(i)||!e.startEditByPosition(o)))},getCurrentPosition:function(){var e=this.selected.getAt(0);if(e)return(new Ext.grid.CellContext(this.view)).setPosition(this.store.indexOf(e),0)},selectByPosition:function(e){var t=new Ext.grid.CellContext(this.view);t.setPosition(e.row,e.column),this.select(t.record)},selectNext:function(e,t){var n=this,r=n.store,i=n.getSelection(),s=i[i.length-1],o=n.views[0].indexOf(s)+1,u;return o===r.getCount()||o===0?u=!1:(n.doSelect(o,e,t),u=!0),u},selectPrevious:function(e,t){var n=this,r=n.getSelection(),i=r[0],s=n.views[0].indexOf(i)-1,o;return s<0?o=!1:(n.doSelect(s,e,t),o=!0),o},isRowSelected:function(e){return this.isSelected(e)},isCellSelected:function(e,t,n){return this.isSelected(t)}}),Ext.define("Ext.selection.TreeModel",{extend:Ext.selection.RowModel,alias:"selection.treemodel",constructor:function(e){this.callParent(arguments),this.pruneRemoved&&(this.pruneRemoved=!1,this.pruneRemovedNodes=!0)},bindStore:function(e,t){var n=this;n.callParent(arguments),n.pruneRemovedNodes&&n.view.mon(n.treeStore,{remove:n.onNodeRemove,scope:n})},onNodeRemove:function(e,t,n){n||this.deselectDeletedRecords([t])},onKeyRight:function(e,t){this.navExpand(e,t)},navExpand:function(e,t){var n=this.getLastFocused(),r=this.view;n&&(n.isExpanded()?this.onKeyDown(e,t):n.isExpandable()&&(r.isTreeView||(r=r.lockingPartner),r.expand(n)))},onKeyLeft:function(e,t){this.navCollapse(e,t)},navCollapse:function(e,t){var n=this,r=this.getLastFocused(),i=this.view,s;r&&(s=r.parentNode,r.isExpanded()?(i.isTreeView||(i=i.lockingPartner),i.collapse(r)):s&&!s.isRoot()&&(e.shiftKey?(n.selectRange(s,r,e.ctrlKey,"up"),n.setLastFocused(s)):e.ctrlKey?n.setLastFocused(s):n.select(s)))},onKeySpace:function(e,t){e.record.data.checked!=null?this.toggleCheck(e):this.callParent(arguments)},onKeyEnter:function(e,t){e.record.data.checked!=null?this.toggleCheck(e):this.callParent(arguments)},toggleCheck:function(e){var t=this.view,n=this.getLastSelected();e.stopEvent(),n&&(t.isTreeView||(t=t.lockingPartner),t.onCheckChange(n))}}),Ext.define("Ext.slider.Thumb",{topZIndex:1e4,constructor:function(e){var t=this;Ext.apply(t,e||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:!1}),t.callParent([e])},render:function(){var e=this;e.el=e.slider.innerEl.insertFirst(e.getElConfig()),e.onRender()},onRender:function(){this.disabled&&this.disable(),this.initEvents()},getElConfig:function(){var e=this,t=e.slider,n={};return n[t.vertical?"bottom":t.horizontalProp]=t.calculateThumbPosition(t.normalizeValue(e.value))+"%",{style:n,id:this.id,cls:this.cls,role:"presentation"}},move:function(e,t){var n=this,r=n.el,i=n.slider,s=i.vertical?"bottom":i.horizontalProp,o,u;e+="%",t?(o={},o[s]=e,Ext.supports.GetPositionPercentage||(u={},u[s]=r.dom.style[s]),new Ext.fx.Anim({target:r,duration:350,from:u,to:o})):r.dom.style[s]=e},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var e=this;e.disabled=!1,e.el&&e.el.removeCls(e.slider.disabledCls)},disable:function(){var e=this;e.disabled=!0,e.el&&e.el.addCls(e.slider.disabledCls)},initEvents:function(){var e=this,t=e.el;e.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(e.onBeforeDragStart,e),onStart:Ext.Function.bind(e.onDragStart,e),onDrag:Ext.Function.bind(e.onDrag,e),onEnd:Ext.Function.bind(e.onDragEnd,e),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"}),e.tracker.initEl(t)},onBeforeDragStart:function(e){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(e){var t=this,n=t.slider;n.onDragStart(t,e),t.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag"),t.dragging=t.slider.dragging=!0,t.dragStartValue=t.value,n.fireEvent("dragstart",n,e,t)},onDrag:function(e){var t=this,n=t.slider,r=t.index,i=t.getValueFromTracker(),s,o;i!==undefined&&(t.constrain&&(s=n.thumbs[r+1],o=n.thumbs[r-1],o!==undefined&&i<=o.value&&(i=o.value),s!==undefined&&i>=s.value&&(i=s.value)),n.setValue(r,i,!1),n.fireEvent("drag",n,e,t))},getValueFromTracker:function(){var e=this.slider,t=e.getTrackpoint(this.tracker.getXY());if(t!==undefined)return e.reversePixelValue(t)},onDragEnd:function(e){var t=this,n=t.slider,r=t.value;n.onDragEnd(t,e),t.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag"),t.dragging=n.dragging=!1,n.fireEvent("dragend",n,e),t.dragStartValue!=r&&n.fireEvent("changecomplete",n,r,t)},destroy:function(){Ext.destroy(this.tracker)}}),Ext.define("Ext.slider.Tip",{extend:Ext.tip.Tip,minWidth:10,alias:"widget.slidertip",offsets:null,align:null,position:"",defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:!0,init:function(e){var t=this,n,r;t.position||(t.position=e.vertical?t.defaultVerticalPosition:t.defaultHorizontalPosition);switch(t.position){case"top":r=[0,-10],n="b-t?";break;case"bottom":r=[0,10],n="t-b?";break;case"left":r=[-10,0],n="r-l?";break;case"right":r=[10,0],n="l-r?"}t.align||(t.align=n),t.offsets||(t.offsets=r),e.on({scope:t,dragstart:t.onSlide,drag:t.onSlide,dragend:t.hide,destroy:t.destroy})},onSlide:function(e,t,n){var r=this;r.show(),r.update(r.getText(n)),r.el.alignTo(n.el,r.align,r.offsets)},getText:function(e){return String(e.value)}}),Ext.define("Ext.slider.Multi",{extend:Ext.form.field.Base,alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl} class="'+Ext.baseCSSPrefix+"slider {fieldCls} {vertical}",'{childElCls}"','<tpl if="tabIdx != null"> tabIndex="{tabIdx}"</tpl>','<tpl if="isVertical"> aria-orientation="vertical"<tpl else> aria-orientation="horizontal"</tpl>',">",'<div id="{cmpId}-endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(e,t){var n=t.$comp,r=0,i=n.thumbs,s=i.length,o,u;for(;r<s;r++)o=i[r],u=o.getElConfig(),u.id=n.id+"-thumb-"+r,Ext.DomHelper.generateMarkup(u,e)},disableFormats:!0}],horizontalProp:"left",vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,componentLayout:"sliderfield",useTips:!0,tipText:null,ariaRole:"slider",initValue:function(){var e=this,t=Ext.value,n=t(e.values,[t(e.value,t(e.minValue,0))]),r=0,i=n.length;e.originalValue=n;for(;r<i;r++)e.addThumb(n[r])},initComponent:function(){var e=this,t,n,r,i,s;e.thumbs=[],e.keyIncrement=Math.max(e.increment,e.keyIncrement),e.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),e.callParent();if(e.useTips){Ext.isObject(e.useTips)?t=Ext.apply({},e.useTips):t=e.tipText?{getText:e.tipText}:{},s=e.plugins=e.plugins||[],i=s.length;for(r=0;r<i;r++)if(s[r].isSliderTip){n=!0;break}n||e.plugins.push(new Ext.slider.Tip(t))}},addThumb:function(e){var t=this,n=new Ext.slider.Thumb({ownerCt:t,ownerLayout:t.getComponentLayout(),value:e,slider:t,index:t.thumbs.length,constrain:t.constrainThumbs,disabled:!!t.readOnly});return t.thumbs.push(n),t.rendered&&n.render(),n},promoteThumb:function(e){var t=this.thumbs,n=t.length,r,i,s;for(s=0;s<n;s++)i=t[s],i==e?i.bringToFront():i.sendToBack()},getSubTplData:function(){var e=this;return Ext.apply(e.callParent(),{$comp:e,isVertical:e.vertical,vertical:e.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:e.minValue,maxValue:e.maxValue,value:e.value,tabIdx:e.tabIndex,childElCls:""})},onRender:function(){var e=this,t=e.thumbs,n=t.length,r=0,i;e.callParent(arguments);for(r=0;r<n;r++)i=t[r],i.el=e.el.getById(e.id+"-thumb-"+r),i.onRender()},initEvents:function(){var e=this;e.mon(e.el,{scope:e,mousedown:e.onMouseDown,keydown:e.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(e){var t=this,n=t.vertical,r=t.innerEl,i,s,o;return n?(o="top",i=r.getHeight()):(o=t.horizontalProp,i=r.getWidth()),e=t.transformTrackPoints(r.translatePoints(e)),s=Ext.Number.constrain(e[o],0,i),n?i-s:s},transformTrackPoints:Ext.identityFn,onMouseDown:function(e){var t=this,n=!1,r=0,i=t.thumbs,s=i.length,o;if(t.disabled)return;for(;r<s;r++)n=n||e.target==i[r].el.dom;t.clickToChange&&!n&&(o=t.getTrackpoint(e.getXY()),o!==undefined&&t.onClickChange(o)),t.focus()},onClickChange:function(e){var t=this,n,r;n=t.getNearest(e),n.disabled||(r=n.index,t.setValue(r,Ext.util.Format.round(t.reversePixelValue(e),t.decimalPrecision),undefined,!0))},getNearest:function(e){var t=this,n=t.reversePixelValue(e),r=t.getRange()+5,i=null,s=t.thumbs,o=0,u=s.length,a,f,l;for(;o<u;o++)a=t.thumbs[o],f=a.value,l=Math.abs(f-n),Math.abs(l<=r)&&(i=a,r=l);return i},onKeyDown:function(e){var t=this,n,r;if(t.disabled||t.thumbs.length!==1){e.preventDefault();return}n=e.getKey();switch(n){case e.UP:case e.RIGHT:e.stopEvent(),r=e.ctrlKey?t.maxValue:t.getValue(0)+t.keyIncrement,t.setValue(0,r,undefined,!0);break;case e.DOWN:case e.LEFT:e.stopEvent(),r=e.ctrlKey?t.minValue:t.getValue(0)-t.keyIncrement,t.setValue(0,r,undefined,!0);break;default:e.preventDefault()}},normalizeValue:function(e){var t=this,n=t.zeroBasedSnapping?"snap":"snapInRange";return e=Ext.Number[n](e,t.increment,t.minValue,t.maxValue),e=Ext.util.Format.round(e,t.decimalPrecision),e=Ext.Number.constrain(e,t.minValue,t.maxValue),e},setMinValue:function(e){var t=this,n=t.thumbs,r=n.length,i,s;t.minValue=e;for(s=0;s<r;++s)i=n[s],i.value<e&&t.setValue(s,e,!1);t.syncThumbs()},setMaxValue:function(e){var t=this,n=t.thumbs,r=n.length,i,s;t.maxValue=e;for(s=0;s<r;++s)i=n[s],i.value>e&&t.setValue(s,e,!1);t.syncThumbs()},setValue:function(e,t,n,r){var i=this,s=i.thumbs,o,u,a,f;if(Ext.isArray(e)){f=e,n=t;for(a=0,u=f.length;a<u;++a)o=s[a],o&&i.setValue(a,f[a],n);return i}return o=i.thumbs[e],t=i.normalizeValue(t),t!==o.value&&i.fireEvent("beforechange",i,t,o.value,o)!==!1&&(o.value=t,i.rendered&&(o.move(i.calculateThumbPosition(t),Ext.isDefined(n)?n!==!1:i.animate),i.fireEvent("change",i,t,o),i.checkDirty(),r&&i.fireEvent("changecomplete",i,t,o))),i},calculateThumbPosition:function(e){var t=this,n=t.minValue,r=(e-n)/t.getRange()*100;return isNaN(r)&&(r=n),r},getRatio:function(){var e=this,t=e.innerEl,n=e.vertical?t.getHeight():t.getWidth(),r=e.getRange();return r===0?n:n/r},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(e){return this.minValue+e/this.getRatio()},reversePercentageValue:function(e){return this.minValue+this.getRange()*(e/100)},onDisable:function(){var e=this,t=0,n=e.thumbs,r=n.length,i,s,o;e.callParent();for(;t<r;t++)i=n[t],s=i.el,i.disable(),Ext.isIE&&(o=s.getXY(),s.hide(),e.innerEl.addCls(e.disabledCls).dom.disabled=!0,e.thumbHolder||(e.thumbHolder=e.endEl.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"slider-thumb "+e.disabledCls})),e.thumbHolder.show().setXY(o))},onEnable:function(){var e=this,t=0,n=e.thumbs,r=n.length,i,s;this.callParent();for(;t<r;t++)i=n[t],s=i.el,i.enable(),Ext.isIE&&(e.innerEl.removeCls(e.disabledCls).dom.disabled=!1,e.thumbHolder&&e.thumbHolder.hide(),s.show(),e.syncThumbs())},syncThumbs:function(){if(this.rendered){var e=this.thumbs,t=e.length,n=0;for(;n<t;n++)e[n].move(this.calculateThumbPosition(e[n].value))}},getValue:function(e){return Ext.isNumber(e)?this.thumbs[e].value:this.getValues()},getValues:function(){var e=[],t=0,n=this.thumbs,r=n.length;for(;t<r;t++)e.push(n[t].value);return e},getSubmitValue:function(){var e=this;return e.disabled||!e.submitValue?null:e.getValue()},reset:function(){var e=this,t=[].concat(e.originalValue),n=0,r=t.length,i;for(;n<r;n++)i=t[n],e.setValue(n,i);e.clearInvalid(),delete e.wasValid},setReadOnly:function(e){var t=this,n=t.thumbs,r=n.length,i=0;t.callParent(arguments),e=t.readOnly;for(;i<r;++i)e?n[i].disable():n[i].enable()},beforeDestroy:function(){var e=this,t=e.thumbs,n=0,r=t.length,i;Ext.destroy(e.innerEl,e.endEl,e.focusEl);for(;n<r;n++)i=t[n],Ext.destroy(i);e.callParent()}}),Ext.define("Ext.tab.Tab",{extend:Ext.button.Button,alias:"widget.tab",isTab:!0,baseCls:Ext.baseCSSPrefix+"tab",closeElOverCls:Ext.baseCSSPrefix+"tab-close-btn-over",activeCls:"active",closableCls:"closable",closable:!0,closeText:"Close Tab",active:!1,childEls:["closeEl"],scale:!1,position:"top",ariaRole:"tab",initComponent:function(){var e=this;e.addEvents("activate","deactivate","beforeclose","close"),e.callParent(arguments),e.card&&e.setCard(e.card),e.overCls=["over",e.position+"-over"]},getTemplateArgs:function(){var e=this,t=e.callParent();return t.closable=e.closable,t.closeText=e.closeText,t},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this.position},beforeRender:function(){var e=this,t=e.up("tabbar"),n=e.up("tabpanel");e.callParent(),e.addClsWithUI(e.position),e.active&&e.addClsWithUI([e.activeCls,e.position+"-"+e.activeCls]),e.syncClosableUI(),e.minWidth||(e.minWidth=t?t.minTabWidth:e.minWidth,!e.minWidth&&n&&(e.minWidth=n.minTabWidth),e.minWidth&&e.iconCls&&(e.minWidth+=25)),e.maxWidth||(e.maxWidth=t?t.maxTabWidth:e.maxWidth,!e.maxWidth&&n&&(e.maxWidth=n.maxTabWidth))},onRender:function(){var e=this;e.setElOrientation(),e.callParent(arguments),e.closable&&e.closeEl.addClsOnOver(e.closeElOverCls),e.initKeyNav()},initKeyNav:function(){var e=this;e.keyNav=new Ext.util.KeyNav(e.el,{enter:e.onEnterKey,del:e.onDeleteKey,scope:e})},setElOrientation:function(){var e=this.position;(e==="left"||e==="right")&&this.el.setVertical(e==="right"?90:270)},enable:function(e){var t=this;return t.callParent(arguments),t.removeClsWithUI(t.position+"-disabled"),t},disable:function(e){var t=this;return t.callParent(arguments),t.addClsWithUI(t.position+"-disabled"),t},onDestroy:function(){var e=this;Ext.destroy(e.keyNav),delete e.keyNav,e.callParent(arguments)},setClosable:function(e){var t=this;e=!arguments.length||!!e,t.closable!=e&&(t.closable=e,t.card&&(t.card.closable=e),t.syncClosableUI(),t.rendered&&(t.syncClosableElements(),t.updateLayout()))},syncClosableElements:function(){var e=this,t=e.closeEl;e.closable?(t||(t=e.closeEl=e.btnWrap.insertSibling({tag:"a",role:"presentation",cls:e.baseCls+"-close-btn",href:"#",title:e.closeText},"after")),t.addClsOnOver(e.closeElOverCls)):t&&(t.remove(),delete e.closeEl)},syncClosableUI:function(){var e=this,t=[e.closableCls,e.closableCls+"-"+e.position];e.closable?e.addClsWithUI(t):e.removeClsWithUI(t)},setCard:function(e){var t=this;t.card=e,t.setText(t.title||e.title),t.setIconCls(t.iconCls||e.iconCls),t.setIcon(t.icon||e.icon),t.setGlyph(t.glyph||e.glyph)},onCloseClick:function(){var e=this;if(e.fireEvent("beforeclose",e)!==!1)if(e.tabBar){if(e.tabBar.closeTab(e)===!1)return}else e.fireClose()},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(e){var t=this;t.tabBar&&t.tabBar.onClick(e,t.el)},onDeleteKey:function(e){this.closable&&this.onCloseClick()},activate:function(e){var t=this;t.active=!0,t.addClsWithUI([t.activeCls,t.position+"-"+t.activeCls]),e!==!0&&t.fireEvent("activate",t)},deactivate:function(e){var t=this;t.active=!1,t.removeClsWithUI([t.activeCls,t.position+"-"+t.activeCls]),e!==!0&&t.fireEvent("deactivate",t)}}),Ext.define("Ext.util.Point",{extend:Ext.util.Region,statics:{fromEvent:function(e){return e=e.browserEvent||e,e=e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0]:e,new this(e.pageX,e.pageY)}},constructor:function(e,t){this.callParent([t,e,t,e])},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(e){return this.x==e.x&&this.y==e.y},isWithin:function(e,t){return Ext.isObject(t)||(t={x:t,y:t}),this.x<=e.x+t.x&&this.x>=e.x-t.x&&this.y<=e.y+t.y&&this.y>=e.y-t.y},isContainedBy:function(e){return e instanceof Ext.util.Region||(e=Ext.get(e.el||e).getRegion()),e.contains(this)},roundedEquals:function(e){return Math.round(this.x)==Math.round(e.x)&&Math.round(this.y)==Math.round(e.y)}},function(){this.prototype.translate=Ext.util.Region.prototype.translateBy}),Ext.define("Ext.tab.Bar",{extend:Ext.panel.Header,alias:"widget.tabbar",baseCls:Ext.baseCSSPrefix+"tab-bar",isTabBar:!0,defaultType:"tab",plain:!1,ariaRole:"tablist",childEls:["body","strip"],renderTpl:['<div id="{id}-body" role="presentation" class="{baseCls}-body {bodyCls} {bodyTargetCls}{childElCls}','<tpl if="ui"> {baseCls}-body-{ui}','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values)%}","</div>",'<div id="{id}-strip" role="presentation" class="{baseCls}-strip {baseCls}-strip-{dock}{childElCls}','<tpl if="ui"> {baseCls}-strip-{ui}','<tpl for="uiCls"> {parent.baseCls}-strip-{parent.ui}-{.}</tpl>','</tpl>">',"</div>"],_reverseDockNames:{left:"right",right:"left"},initComponent:function(){var e=this;e.plain&&e.addCls(e.baseCls+"-plain"),e.addClsWithUI(e.orientation),e.addEvents("change"),e.callParent(arguments),Ext.merge(e.layout,e.initialConfig.layout),e.layout.align=e.orientation=="vertical"?"left":"top",e.layout.overflowHandler=new Ext.layout.container.boxOverflow.Scroller(e.layout),e.remove(e.titleCmp),delete e.titleCmp,Ext.apply(e.renderData,{bodyCls:e.bodyCls,dock:e.dock})},onRender:function(){var e=this;e.callParent(),e.orientation==="vertical"&&(Ext.isIE8||Ext.isIE9)&&Ext.isStrict&&e.el.on({mousemove:e.onMouseMove,scope:e})},afterRender:function(){var e=this.layout;this.callParent(),Ext.isIE9&&Ext.isStrict&&this.orientation==="vertical"&&e.innerCt.on("scroll",function(){e.innerCt.dom.scrollLeft=0})},afterLayout:function(){this.adjustTabPositions(),this.callParent(arguments)},adjustTabPositions:function(){var e=this.items.items,t=e.length,n;if(!Ext.isIE9m)if(this.dock==="right")while(t--)n=e[t],n.isVisible()&&n.el.setStyle("left",n.lastBox.width+"px");else if(this.dock==="left")while(t--)n=e[t],n.isVisible()&&n.el.setStyle("left",-n.lastBox.height+"px")},getLayout:function(){var e=this;return e.layout.type=e.orientation==="horizontal"?"hbox":"vbox",e.callParent(arguments)},onAdd:function(e){e.position=this.dock,this.callParent(arguments)},onRemove:function(e){var t=this;e===t.previousTab&&(t.previousTab=null),t.callParent(arguments)},afterComponentLayout:function(e){var t=this,n=t.needsScroll;t.callParent(arguments),n&&t.layout.overflowHandler.scrollToItem(t.activeTab),delete t.needsScroll},onClick:function(e,t){var n=this,r=n.tabPanel,i,s,o,u;if(e.getTarget("."+Ext.baseCSSPrefix+"box-scroller"))return;n.orientation==="vertical"&&(Ext.isIE8||Ext.isIE9)&&Ext.isStrict?(u=n.getTabInfoFromPoint(e.getXY()),s=u.tab,o=u.close):(i=e.getTarget("."+Ext.tab.Tab.prototype.baseCls),s=i&&Ext.getCmp(i.id),o=s&&s.closeEl&&t===s.closeEl.dom),o&&e.preventDefault(),s&&s.isDisabled&&!s.isDisabled()&&(s.closable&&o?s.onCloseClick():(r?r.setActiveTab(s.card):n.setActiveTab(s),s.focus()))},onMouseMove:function(e){var t=this,n=t._overTab,r,i;if(e.getTarget("."+Ext.baseCSSPrefix+"box-scroller"))return;r=t.getTabInfoFromPoint(e.getXY()),i=r.tab,i!==n&&(n&&n.rendered&&(n.onMouseLeave(e),t._overTab=null),i?(i.onMouseEnter(e),t._overTab=i,i.disabled||t.el.setStyle("cursor","pointer")):t.el.setStyle("cursor","default"))},onMouseLeave:function(e){var t=this._overTab;t&&t.rendered&&t.onMouseLeave(e)},getTabInfoFromPoint:function(e){var t=this,n=t.items.items,r=n.length,i=t.layout.innerCt,s=i.getXY(),o=new Ext.util.Point(e[0],e[1]),u=0,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;for(;u<r;u++){a=n[u].lastBox,g=s[0]+a.x,y=s[1]-i.dom.scrollTop+a.y,b=a.width,w=a.height,f=new Ext.util.Region(y,g+b,y+w,g);if(f.contains(o)){T=n[u],l=T.closeEl,l&&(t._isTabReversed===undefined&&(t._isTabReversed=S=T.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1),x=S?this._reverseDockNames[t.dock]:t.dock,v=l.getWidth(),m=l.getHeight(),h=t.getCloseXY(l,g,y,b,w,v,m,x),p=h[0],d=h[1],E=new Ext.util.Region(d,p+v,d+m,p),c=E.contains(o));break}}return{tab:T,close:c}},getCloseXY:function(e,t,n,r,i,s,o,u){var a=e.getXY(),f,l;return u==="right"?(f=t+r-(a[1]-n+o),l=n+(a[0]-t)):(f=t+(a[1]-n),l=n+t+i-a[0]-s),[f,l]},closeTab:function(e){var t=this,n=e.card,r=t.tabPanel,i;if(n&&n.fireEvent("beforeclose",n)===!1)return!1;i=t.findNextActivatable(e),Ext.suspendLayouts();if(r&&n){delete e.ownerCt,n.fireEvent("close",n),r.remove(n);if(!!r.getComponent(n))return e.ownerCt=t,Ext.resumeLayouts(!0),!1;e.fireClose(),t.remove(e)}i&&(r?r.setActiveTab(i.card):t.setActiveTab(i),i.focus()),Ext.resumeLayouts(!0)},findNextActivatable:function(e){var t=this;if(e.active&&t.items.getCount()>1)return t.previousTab&&t.previousTab!==e&&!t.previousTab.disabled?t.previousTab:e.next("tab[disabled=false]")||e.prev("tab[disabled=false]")},setActiveTab:function(e,t){var n=this;!e.disabled&&e!==n.activeTab&&(n.activeTab&&(n.activeTab.isDestroyed?n.previousTab=null:(n.previousTab=n.activeTab,n.activeTab.deactivate())),e.activate(),n.activeTab=e,n.needsScroll=!0,t||(n.fireEvent("change",n,e,e.card),n.updateLayout()))}}),Ext.define("Ext.tree.Column",{extend:Ext.grid.column.Column,alias:"widget.treecolumn",tdCls:Ext.baseCSSPrefix+"grid-cell-treecolumn",autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:Ext.baseCSSPrefix+"tree-icon",checkboxCls:Ext.baseCSSPrefix+"tree-checkbox",elbowCls:Ext.baseCSSPrefix+"tree-elbow",expanderCls:Ext.baseCSSPrefix+"tree-expander",textCls:Ext.baseCSSPrefix+"tree-node-text",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-treecolumn",isTreeColumn:!0,cellTpl:['<tpl for="lines">','<img src="{parent.blankUrl}" class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"/>',"</tpl>",'<img src="{blankUrl}" class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"/>','<tpl if="checked !== null">','<input type="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"/>',"</tpl>",'<img src="{blankUrl}" role="presentation" class="{childCls} {baseIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else>parent</tpl> {iconCls}"','<tpl if="icon">style="background-image:url({icon})"</tpl>/>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],initComponent:function(){var e=this,t=e.renderer;typeof t=="string"&&(t=Ext.util.Format[t]),e.origRenderer=t,e.origScope=e.scope||window,e.renderer=e.treeRenderer,e.scope=e,e.callParent()},treeRenderer:function(e,t,n,r,i,s,o){var u=this,a=n.get("cls"),f;return a&&(t.tdCls+=" "+a),f=u.initTemplateRendererData(e,t,n,r,i,s,o),u.getTpl("cellTpl").apply(f)},initTemplateRendererData:function(e,t,n,r,i,s,o){var u=this,a=u.origRenderer,f=n.data,l=n.parentNode,c=o.rootVisible,h=[],p;while(l&&(c||l.data.depth>0))p=l.data,h[c?p.depth:p.depth-1]=p.isLast?0:1,l=l.parentNode;return{record:n,baseIconCls:u.iconCls,iconCls:f.iconCls,icon:f.icon,checkboxCls:u.checkboxCls,checked:f.checked,elbowCls:u.elbowCls,expanderCls:u.expanderCls,textCls:u.textCls,leaf:f.leaf,expandable:n.isExpandable(),isLast:f.isLast,blankUrl:Ext.BLANK_IMAGE_URL,href:f.href,hrefTarget:f.hrefTarget,lines:h,metaData:t,childCls:u.getChildCls?u.getChildCls()+" ":"",value:a?a.apply(u.
origScope,arguments):e}}}),Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:Ext.selection.RowModel,mode:"MULTI",injectCheckbox:0,checkOnly:!1,showHeaderCheckbox:undefined,checkSelector:"."+Ext.baseCSSPrefix+"grid-row-checker",headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",constructor:function(){var e=this;e.callParent(arguments),e.mode==="SINGLE"&&e.showHeaderCheckbox!==!0&&(e.showHeaderCheckbox=!1)},beforeViewRender:function(e){var t=this,n;t.callParent(arguments);if(!t.hasLockedHeader()||e.headerCt.lockedCt)t.showHeaderCheckbox!==!1&&e.headerCt.on("headerclick",t.onHeaderClick,t),t.addCheckbox(e,!0),n=e.ownerCt,e.headerCt.lockedCt&&(n=n.ownerCt),t.mon(n,"reconfigure",t.onReconfigure,t)},bindComponent:function(e){var t=this;t.sortable=!1,t.callParent(arguments)},hasLockedHeader:function(){var e=this.views,t=e.length,n;for(n=0;n<t;n++)if(e[n].headerCt.lockedCt)return!0;return!1},addCheckbox:function(e,t){var n=this,r=n.injectCheckbox,i=e.headerCt;r!==!1&&(r=="first"?r=0:r=="last"&&(r=i.getColumnCount()),Ext.suspendLayouts(),e.getStore().buffered&&(n.showHeaderCheckbox=!1),i.add(r,n.getHeaderConfig()),Ext.resumeLayouts()),t!==!0&&e.refresh()},onReconfigure:function(e,t,n){n&&this.addCheckbox(this.views[0])},toggleUiHeader:function(e){var t=this.views[0],n=t.headerCt,r=n.child("gridcolumn[isCheckerHd]"),i=this.checkerOnCls;r&&(e?r.addCls(i):r.removeCls(i))},onHeaderClick:function(e,t,n){if(t.isCheckerHd){n.stopEvent();var r=this,i=t.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");r.preventFocus=!0,i?r.deselectAll():r.selectAll(),delete r.preventFocus}},getHeaderConfig:function(){var e=this,t=e.showHeaderCheckbox!==!1;return{isCheckerHd:t,text:"&#160;",clickTargetName:"el",width:e.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",cls:t?Ext.baseCSSPrefix+"column-header-checkbox ":"",renderer:Ext.Function.bind(e.renderer,e),editRenderer:e.editRenderer||e.renderEmpty,locked:e.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments),this.updateHeaderState()},renderer:function(e,t,n,r,i,s,o){var u=Ext.baseCSSPrefix;return t.tdCls=u+"grid-cell-special "+u+"grid-cell-row-checker",'<div class="'+u+'grid-row-checker" role="presentation">&#160;</div>'},processSelection:function(e,t,n,r,i){var s=this,o=i.getTarget(s.checkSelector),u;if(s.checkOnly&&!o)return;o?(u=s.getSelectionMode(),u!=="SINGLE"&&s.setSelectionMode("SIMPLE"),s.selectWithEvent(t,i),s.setSelectionMode(u)):s.selectWithEvent(t,i)},onSelectChange:function(){this.callParent(arguments),this.suspendChange||this.updateHeaderState()},onStoreLoad:function(){this.callParent(arguments),this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments),this.updateHeaderState()},maybeFireSelectionChange:function(e){e&&!this.suspendChange&&this.updateHeaderState(),this.callParent(arguments)},resumeChanges:function(){this.callParent(),this.suspendChange||this.updateHeaderState()},updateHeaderState:function(){var e=this,t=e.store,n=t.getCount(),r=e.views,i=!1,s=0,o,u,a;if(!t.buffered&&n>0){o=e.selected,i=!0;for(a=0,u=o.getCount();a<u;++a){if(!e.storeHasSelected(o.getAt(a)))break;++s}i=n===s}r&&r.length&&e.toggleUiHeader(i)}}),Ext.define("Ext.slider.Single",{extend:Ext.slider.Multi,alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],getValue:function(){return this.callParent([0])},setValue:function(e,t){var n=arguments,r=n.length;if(r==1||r<=3&&typeof n[1]!="number")n=Ext.toArray(n),n.unshift(0);return this.callParent(n)},getNearest:function(){return this.thumbs[0]}}),Ext.define("Ext.state.CookieProvider",{extend:Ext.state.Provider,constructor:function(e){var t=this;t.path="/",t.expires=new Date(Ext.Date.now()+6048e5),t.domain=null,t.secure=!1,t.callParent(arguments),t.state=t.readCookies()},set:function(e,t){var n=this;if(typeof t=="undefined"||t===null){n.clear(e);return}n.setCookie(e,t),n.callParent(arguments)},clear:function(e){this.clearCookie(e),this.callParent(arguments)},readCookies:function(){var e={},t=document.cookie+";",n=/\s?(.*?)=(.*?);/g,r=this.prefix,i=r.length,s,o,u;while((s=n.exec(t))!=null)o=s[1],u=s[2],o&&o.substring(0,i)==r&&(e[o.substr(i)]=this.decodeValue(u));return e},setCookie:function(e,t){var n=this;document.cookie=n.prefix+e+"="+n.encodeValue(t)+(n.expires==null?"":"; expires="+n.expires.toGMTString())+(n.path==null?"":"; path="+n.path)+(n.domain==null?"":"; domain="+n.domain)+(n.secure==1?"; secure":"")},clearCookie:function(e){var t=this;document.cookie=t.prefix+e+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(t.path==null?"":"; path="+t.path)+(t.domain==null?"":"; domain="+t.domain)+(t.secure==1?"; secure":"")}}),Ext.define("Ext.util.LocalStorage",{id:null,destroyed:!1,lazyKeys:!0,prefix:"",session:!1,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(e){var t=this,n=t.cache,r={_users:1},i;return Ext.isString(e)?r.id=e:Ext.apply(r,e),(i=n[r.id])?++i._users:i=new t(r),i},supported:!0},constructor:function(e){var t=this;Ext.apply(t,e),t._users&&(Ext.util.LocalStorage.cache[t.id]=t),t.init()},init:function(){var e=this,t=e.id;!e.prefix&&t&&(e.prefix=t+"-"),e._store=e.session?window.sessionStorage:window.localStorage},destroy:function(){var e=this;delete Ext.util.LocalStorage.cache[e.id],e._store=e._keys=null,e.destroyed=!0,e.destroy=Ext.emptyFn},getKeys:function(){var e=this,t=e._store,n=e.prefix,r=e._keys,i=n.length,s,o;if(!r){e._keys=r=[];for(s=t.length;s--;)o=t.key(s),o.length>i&&n===o.substring(0,i)&&r.push(o.substring(i))}return r},release:function(){--this._users||this.destroy()},save:Ext.emptyFn,clear:function(){var e=this,t=e._store,n=e.prefix,r=e._keys||e.getKeys(),i;for(i=r.length;i--;)t.removeItem(n+r[i]);r.length=0},key:function(e){var t=this._keys||this.getKeys();return 0<=e&&e<t.length?t[e]:null},getItem:function(e){var t=this.prefix+e;return this._store.getItem(t)},removeItem:function(e){var t=this,n=t.prefix+e,r=t._store,i=t._keys,s=r.length;r.removeItem(n),i&&s!==r.length&&(t.lazyKeys?t._keys=null:Ext.Array.remove(i,e))},setItem:function(e,t){var n=this,r=n.prefix+e,i=n._store,s=i.length,o=n._keys;i.setItem(r,t),o&&s!==i.length&&o.push(e)}},function(){var e=this;if("localStorage"in window)return;if(!Ext.isIE){e.supported=!1;return}e.override({data:null,flushDelay:1,init:function(){var e=this,t=e.data,n;e.el=n=document.createElement("div"),n.id=e.id||(e.id="extjs-localstore"),n.addBehavior("#default#userdata"),Ext.getHead().dom.appendChild(n),n.load(e.id),t=n.getAttribute("xdata"),e.data=t=t?Ext.decode(t):{},e._flushFn=function(){e._timer=null,e.save(0)}},destroy:function(){var e=this,t=e.el;t&&(e._timer&&e.save(),t.parentNode.removeChild(t),e.data=e.el=null,e.callParent())},getKeys:function(){var e=this,t=e._keys;return t||(e._keys=t=Ext.Object.getKeys(e.data)),t},save:function(e){var t=this;e?t._timer||(t._timer=setTimeout(t._flushFn,e)):(t._timer&&(clearTimeout(t._timer),t._timer=null),t.el.setAttribute("xdata",Ext.encode(t.data)),t.el.save(t.id))},clear:function(){var e=this;e.data={},e._keys=null,e.save(e.flushDelay)},getItem:function(e){var t=this.data;return e in t?t[e]:null},removeItem:function(e){var t=this,n=t._keys,r=t.data;e in r&&(delete r[e],n&&(t.lazyKeys?t._keys=null:Ext.Array.remove(n,e)),t.save(t.flushDelay))},setItem:function(e,t){var n=this,r=n.data,i=n._keys;i&&!(e in r)&&i.push(e),r[e]=t,n.save(n.flushDelay)}})}),Ext.define("Ext.state.LocalStorageProvider",{extend:Ext.state.Provider,alias:"state.localstorage",constructor:function(){var e=this;e.callParent(arguments),e.store=e.getStorageObject(),e.store?e.state=e.readLocalStorage():e.state={}},readLocalStorage:function(){var e=this.store,t={},n=e.getKeys(),r=n.length,i;while(r--)i=n[r],t[i]=this.decodeValue(e.getItem(i));return t},set:function(e,t){var n=this;n.clear(e),t!=null&&(n.store.setItem(e,n.encodeValue(t)),n.callParent(arguments))},clear:function(e){this.store.removeItem(e),this.callParent(arguments)},getStorageObject:function(){var e=this.prefix,t=e,n=t.length-1;return t.charAt(n)==="-"&&(t=t.substring(0,n)),new Ext.util.LocalStorage({id:t,prefix:e})}}),Ext.define("Ext.tab.Panel",{extend:Ext.panel.Panel,alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],tabPosition:"top",removePanelHeader:!0,plain:!1,itemCls:Ext.baseCSSPrefix+"tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:!0,initComponent:function(){var e=this,t=[].concat(e.dockedItems||[]),n=e.activeTab||(e.activeTab=0),r=e.tabPosition;e.layout=new Ext.layout.container.Card(Ext.apply({owner:e,deferredRender:e.deferredRender,itemCls:e.itemCls,activeItem:n},e.layout)),e.tabBar=new Ext.tab.Bar(Ext.apply({ui:e.ui,dock:e.tabPosition,orientation:r=="top"||r=="bottom"?"horizontal":"vertical",plain:e.plain,cardLayout:e.layout,tabPanel:e},e.tabBar)),t.push(e.tabBar),e.dockedItems=t,e.addEvents("beforetabchange","tabchange"),e.callParent(arguments),n=e.activeTab=e.getComponent(n),n&&e.tabBar.setActiveTab(n.tab,!0)},setActiveTab:function(e){var t=this,n;e=t.getComponent(e);if(e)return n=t.getActiveTab(),n===e||t.fireEvent("beforetabchange",t,e,n)===!1?!1:(e.isComponent||(Ext.suspendLayouts(),e=t.add(e),Ext.resumeLayouts()),t.activeTab=e,Ext.suspendLayouts(),t.layout.setActiveItem(e),e=t.activeTab=t.layout.getActiveItem(),e&&e!==n?(t.tabBar.setActiveTab(e.tab),Ext.resumeLayouts(!0),n!==e&&t.fireEvent("tabchange",t,e,n)):Ext.resumeLayouts(!0),e)},getActiveTab:function(){var e=this,t=e.getComponent(e.activeTab);return t&&e.items.indexOf(t)!=-1?e.activeTab=t:e.activeTab=null,e.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(e,t){var n=this,r=e.tabConfig||{},i={xtype:"tab",ui:n.tabBar.ui,card:e,disabled:e.disabled,closable:e.closable,hidden:e.hidden&&!e.hiddenByLayout,tooltip:e.tooltip,tabBar:n.tabBar,position:n.tabPosition};e.closeText!==undefined&&(i.closeText=e.closeText),r=Ext.applyIf(r,i),e.tab=n.tabBar.insert(t,r),e.on({scope:n,enable:n.onItemEnable,disable:n.onItemDisable,beforeshow:n.onItemBeforeShow,iconchange:n.onItemIconChange,iconclschange:n.onItemIconClsChange,titlechange:n.onItemTitleChange}),e.isPanel&&(n.removePanelHeader&&(e.rendered?e.header&&e.header.hide():e.header=!1),e.isPanel&&n.border&&e.setBorder(!1))},onItemEnable:function(e){e.tab.enable()},onItemDisable:function(e){e.tab.disable()},onItemBeforeShow:function(e){if(e!==this.activeTab)return this.setActiveTab(e),!1},onItemIconChange:function(e,t){e.tab.setIcon(t)},onItemIconClsChange:function(e,t){e.tab.setIconCls(t)},onItemTitleChange:function(e,t){e.tab.setText(t)},doRemove:function(e,t){var n=this,r;n.destroying||n.items.getCount()==1?n.activeTab=null:(r=n.tabBar.items.indexOf(n.tabBar.findNextActivatable(e.tab)))!==-1&&n.setActiveTab(r),this.callParent(arguments),delete e.tab.card,delete e.tab},onRemove:function(e,t){var n=this;e.un({scope:n,enable:n.onItemEnable,disable:n.onItemDisable,beforeshow:n.onItemBeforeShow}),!n.destroying&&e.tab.ownerCt===n.tabBar&&n.tabBar.remove(e.tab)}}),Ext.define("Ext.toolbar.Spacer",{extend:Ext.Component,alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:!1,ariaRole:"presentation"}),Ext.define("Ext.tree.Panel",{extend:Ext.panel.Table,alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:!1,rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},rootVisible:!0,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:!0,arrowCls:Ext.baseCSSPrefix+"tree-arrows",linesCls:Ext.baseCSSPrefix+"tree-lines",noLinesCls:Ext.baseCSSPrefix+"tree-no-lines",autoWidthCls:Ext.baseCSSPrefix+"autowidth-table",constructor:function(e){e=e||{},e.animate===undefined&&(e.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx),this.enableAnimations=e.animate,delete e.animate,this.callParent([e])},initComponent:function(){var e=this,t=[e.treeCls],n=e.store,r;e.useArrows&&(t.push(e.arrowCls),e.lines=!1),e.lines?t.push(e.linesCls):e.useArrows||t.push(e.noLinesCls),Ext.isString(n)?n=e.store=Ext.StoreMgr.lookup(n):!n||!n.isStore?(n=Ext.apply({type:"tree",root:e.root,fields:e.fields,model:e.model,folderSort:e.folderSort},n),n=e.store=Ext.StoreMgr.lookup(n)):e.root&&(n=e.store=Ext.data.StoreManager.lookup(n),n.setRootNode(e.root),e.folderSort!==undefined&&(n.folderSort=e.folderSort,n.sort())),e.viewConfig=Ext.apply({rootVisible:e.rootVisible,animate:e.enableAnimations,singleExpand:e.singleExpand,node:n.getRootNode(),hideHeaders:e.hideHeaders},e.viewConfig),e.columns||(e.initialConfig.hideHeaders===undefined&&(e.hideHeaders=!0),e.addCls(e.autoWidthCls),e.columns=[{xtype:"treecolumn",text:"Name",width:Ext.isIE6?"100%":1e4,dataIndex:e.displayField}]),e.cls&&t.push(e.cls),e.cls=t.join(" "),e.callParent(),e.selModel.treeStore=e.store,r=e.getView(),e.relayEvents(r,["checkchange","afteritemexpand","afteritemcollapse"]),r.isLockingView||!r.rootVisible&&!e.getRootNode()&&e.setRootNode({expanded:!0})},bindStore:function(e,t){var n=this;n.store=e,n.storeListeners=n.mon(e,{destroyable:!0,load:n.onStoreLoad,rootchange:n.onRootChange,clear:n.onClear,scope:n}),n.storeRelayers=n.relayEvents(e,["beforeload","load"]),n.storeRelayers1=n.mon(e,{destroyable:!0,append:n.createRelayer("itemappend"),remove:n.createRelayer("itemremove"),move:n.createRelayer("itemmove",[0,4]),insert:n.createRelayer("iteminsert"),beforeappend:n.createRelayer("beforeitemappend"),beforeremove:n.createRelayer("beforeitemremove"),beforemove:n.createRelayer("beforeitemmove"),beforeinsert:n.createRelayer("beforeiteminsert"),expand:n.createRelayer("itemexpand",[0,1]),collapse:n.createRelayer("itemcollapse",[0,1]),beforeexpand:n.createRelayer("beforeitemexpand",[0,1]),beforecollapse:n.createRelayer("beforeitemcollapse",[0,1])}),e.ownerTree=n,t||n.view.setRootNode(n.getRootNode())},unbindStore:function(){var e=this,t=e.store;t&&(Ext.destroy(e.storeListeners,e.storeRelayers,e.storeRelayers1),delete t.ownerTree)},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(e){this.view.setRootNode(e)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(e){return e.get("checked")},expandNode:function(e,t,n,r){return this.getView().expand(e,t,n,r||this)},collapseNode:function(e,t,n,r){return this.getView().collapse(e,t,n,r||this)},expandAll:function(e,t){var n=this,r=n.getRootNode(),i=n.enableAnimations;r&&(i||Ext.suspendLayouts(),r.expand(!0,e,t||n),i||Ext.resumeLayouts(!0))},collapseAll:function(e,t){var n=this,r=n.getRootNode(),i=n.enableAnimations,s=n.getView();r&&(i||Ext.suspendLayouts(),t=t||n,s.rootVisible?r.collapse(!0,e,t):r.collapseChildren(!0,e,t),i||Ext.resumeLayouts(!0))},expandPath:function(e,t,n,r,i){var s=this,o=s.getRootNode(),u=1,a=s.getView(),f,l;t=t||s.getRootNode().idProperty,n=n||"/";if(Ext.isEmpty(e)){Ext.callback(r,i||s,[!1,null]);return}f=e.split(n);if(o.get(t)!=f[1]){Ext.callback(r,i||s,[!1,o]);return}l=function(){if(++u===f.length){Ext.callback(r,i||s,[!0,o]);return}var e=o.findChild(t,f[u]);if(!e){Ext.callback(r,i||s,[!1,o]);return}o=e,o.expand(!1,l)},o.expand(!1,l)},selectPath:function(e,t,n,r,i){var s=this,o,u,a;t=t||s.getRootNode().idProperty,n=n||"/",u=e.split(n),a=u.pop(),u.length>1?s.expandPath(u.join(n),t,n,function(e,n){var o=n;if(e&&n){n=n.findChild(t,a);if(n){s.getSelectionModel().select(n),Ext.callback(r,i||s,[!0,n]);return}}Ext.callback(r,i||s,[!1,o])},s):(o=s.getRootNode(),o.getId()===a?(s.getSelectionModel().select(o),Ext.callback(r,i||s,[!0,o])):Ext.callback(r,i||s,[!1,null]))}}),Ext.define("Ext.view.DragZone",{extend:Ext.dd.DragZone,containerScroll:!1,constructor:function(e){var t=this,n,r,i;Ext.apply(t,e),t.ddGroup||(t.ddGroup="view-dd-zone-"+t.view.id),n=t.view,r=n.ownerCt,r?i=r.getTargetEl().dom:i=n.el.dom.parentNode,t.callParent([i]),t.ddel=Ext.get(document.createElement("div")),t.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(e,t,n){var r=this;r.initTarget(e,t,n),r.view.on("itemmousedown",r.onItemMouseDown,r)},onValidDrop:function(e,t,n){this.callParent(),e.el.focus()},onItemMouseDown:function(e,t,n,r,i){this.isPreventDrag(i,t,n,r)||(e.focusRow&&e.focusRow(t),this.handleMouseDown(i))},isPreventDrag:function(e){return!1},getDragData:function(e){var t=this.view,n=e.getTarget(t.getItemSelector());if(n)return{copy:t.copy||t.allowCopy&&e.ctrlKey,event:new Ext.EventObjectImpl(e),view:t,ddel:this.ddel,item:n,records:t.getSelectionModel().getSelection(),fromPosition:Ext.fly(n).getXY()}},onInitDrag:function(e,t){var n=this,r=n.dragData,i=r.view,s=i.getSelectionModel(),o=i.getRecord(r.item);return s.isSelected(o)||s.selectWithEvent(o,n.DDMInstance.mousedownEvent),r.records=s.getSelection(),n.ddel.update(n.getDragText()),n.proxy.update(n.ddel.dom),n.onStartDrag(e,t),!0},getDragText:function(){var e=this.dragData.records.length;return Ext.String.format(this.dragText,e,e==1?"":"s")},getRepairXY:function(e,t){return t?t.fromPosition:!1}}),Ext.define("Ext.tree.ViewDragZone",{extend:Ext.view.DragZone,isPreventDrag:function(e,t){return t.get("allowDrag")===!1||!!e.getTarget(this.view.expanderSelector)},getDragText:function(){var e=this.dragData.records,t=e.length,n=e[0].get(this.displayField),r="s";return t===1&&n?n:(n||(r=""),Ext.String.format(this.dragText,t,r))},afterRepair:function(){var e=this,t=e.view,n=t.selectedItemCls,r=e.dragData.records,i,s=r.length,o=Ext.fly,u;if(Ext.enableFx&&e.repairHighlight)for(i=0;i<s;i++)u=t.getNode(r[i]),o(u.firstChild).highlight(e.repairHighlightColor,{listeners:{beforeanimate:function(){t.isSelected(u)&&o(u).removeCls(n)},afteranimate:function(){t.isSelected(u)&&o(u).addCls(n)}}});e.dragging=!1}}),Ext.define("Ext.tree.ViewDropZone",{extend:Ext.view.DropZone,allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:Ext.baseCSSPrefix+"tree-ddindicator",expandNode:function(e){var t=this.view;this.expandProcId=!1,!e.isLeaf()&&!e.isExpanded()&&(t.expand(e),this.expandProcId=!1)},queueExpand:function(e){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[e])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},getPosition:function(e,t){var n=this.view,r=n.getRecord(t),i=e.getPageY(),s=r.isLeaf(),o=!1,u=Ext.fly(t).getRegion(),a;return r.isRoot()?"append":this.appendOnly?s?!1:"append":(this.allowParentInserts||(o=r.hasChildNodes()&&r.isExpanded()),a=(u.bottom-u.top)/(s?2:3),i>=u.top&&i<u.top+a?"before":!o&&(s||i>=u.bottom-a&&i<=u.bottom)?"after":"append")},isValidDropPoint:function(e,t,n,r,i){if(!e||!i.item)return!1;var s=this.view,o=s.getRecord(e),u=i.records,a=u.length,f=u.length,l,c;if(!(o&&t&&a))return!1;for(l=0;l<f;l++){c=u[l];if(c.isNode&&c.contains(o))return!1}return t==="append"&&o.get("allowDrop")===!1?!1:t!="append"&&o.parentNode.get("allowDrop")===!1?!1:Ext.Array.contains(u,o)?!1:s.fireEvent("nodedragover",o,t,i,r)!==!1},onNodeOver:function(e,t,n,r){var i=this.getPosition(n,e),s=this.dropNotAllowed,o=this.view,u=o.getRecord(e),a=this.getIndicator(),f=0;return this.cancelExpand(),i=="append"&&!this.expandProcId&&!Ext.Array.contains(r.records,u)&&!u.isLeaf()&&!u.isExpanded()&&this.queueExpand(u),this.isValidDropPoint(e,i,t,n,r)?(this.valid=!0,this.currentPosition=i,this.overRecord=u,a.setWidth(Ext.fly(e).getWidth()),f=Ext.fly(e).getY()-Ext.fly(o.el).getY()-1,i=="before"?(s=u.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between",a.showAt(0,f),t.proxy.show()):i=="after"?(s=u.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between",f+=Ext.fly(e).getHeight(),a.showAt(0,f),t.proxy.show()):(s=Ext.baseCSSPrefix+"tree-drop-ok-append",a.hide())):this.valid=!1,this.currentCls=s,s},onNodeOut:function(e,t,n,r){this.valid=!1,this.getIndicator().hide()},onContainerOver:function(e,t,n){return t.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},notifyOut:function(){this.callParent(arguments),this.cancelExpand()},handleNodeDrop:function(e,t,n){var r=this,i=r.view,s=t?t.parentNode:i.panel.getRootNode(),o=i.getStore().treeStore.model,u,a,f,l,c,h,p,d;if(e.copy){u=e.records,e.records=[];for(a=0,f=u.length;a<f;a++)l=u[a],l.isNode?e.records.push(l.copy(undefined,!0)):e.records.push(new o(l.data,l.getId()))}r.cancelExpand(),n=="before"?(c=s.insertBefore,h=[null,t],t=s):n=="after"?(t.nextSibling?(c=s.insertBefore,h=[null,t.nextSibling]):(c=s.appendChild,h=[null]),t=s):(!t.isExpanded()&&!t.isLoading()&&(p=!0),c=t.appendChild,h=[null]),d=function(){var n,s;Ext.suspendLayouts();for(a=0,f=e.records.length;a<f;a++)l=e.records[a],l.isNode||(l.isModel?l=new o(l.data,l.getId()):l=new o(l),e.records[a]=l),h[0]=l,c.apply(t,h);r.sortOnDrop&&t.sort(t.getOwnerTree().store.generateComparator()),Ext.resumeLayouts(!0);if(Ext.enableFx&&r.dropHighlight){n=r.dropHighlightColor;for(a=0;a<f;a++)s=i.getNode(e.records[a]),s&&Ext.fly(s).highlight(n)}},p?t.expand(!1,d):t.isLoading()?t.on({expand:d,delay:1,single:!0}):d()}}),Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:Ext.AbstractPlugin,alias:"plugin.treeviewdragdrop",dragText:"{0} selected node{1}",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:"TreeDD",containerScroll:!1,expandDelay:1e3,enableDrop:!0,enableDrag:!0,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,nodeHighlightOnRepair:Ext.enableFx,displayField:"text",init:function(e){e.on("render",this.onViewRender,this,{single:!0})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onViewRender:function(e){var t=this,n;t.enableDrag&&(t.containerScroll&&(n=e.getEl()),t.dragZone=new Ext.tree.ViewDragZone({view:e,ddGroup:t.dragGroup||t.ddGroup,dragText:t.dragText,displayField:t.displayField,repairHighlightColor:t.nodeHighlightColor,repairHighlight:t.nodeHighlightOnRepair,scrollEl:n})),t.enableDrop&&(t.dropZone=new Ext.tree.ViewDropZone({view:e,ddGroup:t.dropGroup||t.ddGroup,allowContainerDrops:t.allowContainerDrops,appendOnly:t.appendOnly,allowParentInserts:t.allowParentInserts,expandDelay:t.expandDelay,dropHighlightColor:t.nodeHighlightColor,dropHighlight:t.nodeHighlightOnDrop,sortOnDrop:t.sortOnDrop,containerScroll:t.containerScroll}))}},function(){var e=this.prototype;e.nodeHighlightOnDrop=e.nodeHighlightOnRepair=Ext.enableFx}),Ext.define("Ext.util.Cookies",{singleton:!0,set:function(e,t){var n=arguments,r=arguments.length,i=r>2?n[2]:null,s=r>3?n[3]:"/",o=r>4?n[4]:null,u=r>5?n[5]:!1;document.cookie=e+"="+escape(t)+(i===null?"":"; expires="+i.toGMTString())+(s===null?"":"; path="+s)+(o===null?"":"; domain="+o)+(u===!0?"; secure":"")},get:function(e){var t=e+"=",n=t.length,r=document.cookie.length,i=0,s=0;while(i<r){s=i+n;if(document.cookie.substring(i,s)==t)return this.getCookieVal(s);i=document.cookie.indexOf(" ",i)+1;if(i===0)break}return null},clear:function(e,t){this.get(e)&&(t=t||"/",document.cookie=e+"="+"; expires=Thu, 01-Jan-70 00:00:01 GMT; path="+t)},getCookieVal:function(e){var t=document.cookie.indexOf(";",e);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))}}),Ext.define("Ext.util.Grouper",{extend:Ext.util.Sorter,isGrouper:!0,getGroupString:function(e){return e.get(this.property)}}),Ext.define("Ext.util.History",{singleton:!0,alternateClassName:"Ext.History",mixins:{observable:Ext.util.Observable},useTopWindow:!0,fieldId:Ext.baseCSSPrefix+"history-field",iframeId:Ext.baseCSSPrefix+"history-frame",constructor:function(){var e=this;e.oldIEMode=Ext.isIE7m||!Ext.isStrict&&Ext.isIE8,e.iframe=null,e.hiddenField=null,e.ready=!1,e.currentToken=null,e.mixins.observable.constructor.call(e)},getHash:function(){var e=window.location.href,t=e.indexOf("#");return t>=0?e.substr(t+1):null},setHash:function(e){var t=this,n=t.useTopWindow?window.top:window;try{n.location.hash=e}catch(r){}},doSave:function(){this.hiddenField.value=this.currentToken},handleStateChange:function(e){this.currentToken=e,this.fireEvent("change",e)},updateIFrame:function(e){var t='<html><body><div id="state" role="presentation">'+Ext.util.Format.htmlEncode(e)+"</div></body></html>",n;try{return n=this.iframe.contentWindow.document,n.open(),n.write(t),n.close(),!0}catch(r){return!1}},checkIFrame:function(){var e=this,t=e.iframe.contentWindow,n,r,i,s;if(!t||!t.document){Ext.Function.defer(this.checkIFrame,10,this);return}n=t.document,r=n.getElementById("state"),i=r?r.innerText:null,s=e.getHash(),Ext.TaskManager.start({run:function(){var n=t.document,r=n.getElementById("state"),o=r?r.innerText:null,u=e.getHash();o!==i?(i=o,e.handleStateChange(o),e.setHash(o),s=o,e.doSave()):u!==s&&(s=u,e.updateIFrame(u))},interval:50,scope:e}),e.ready=!0,e.fireEvent("ready",e)},startUp:function(){var e=this,t;e.currentToken=e.hiddenField.value||this.getHash(),e.oldIEMode?e.checkIFrame():(t=e.getHash(),Ext.TaskManager.start({run:function(){var n=e.getHash();n!==t&&(t=n,e.handleStateChange(t),e.doSave())},interval:50,scope:e}),e.ready=!0,e.fireEvent("ready",e))},init:function(e,t){var n=this,r=Ext.DomHelper;if(n.ready){Ext.callback(e,t,[n]);return}if(!Ext.isReady){Ext.onReady(function(){n.init(e,t)});return}n.hiddenField=Ext.getDom(n.fieldId),n.hiddenField||(n.hiddenField=Ext.getBody().createChild({id:Ext.id(),tag:"form",role:"presentation",cls:Ext.baseCSSPrefix+"hide-display",children:[{tag:"input",type:"hidden",id:n.fieldId}]},!1,!0).firstChild),n.oldIEMode&&(n.iframe=Ext.getDom(n.iframeId),n.iframe||(n.iframe=r.append(n.hiddenField.parentNode,{tag:"iframe",role:"presentation",id:n.iframeId,src:Ext.SSL_SECURE_URL}))),n.addEvents("ready","change"),e&&n.on("ready",e,t,{single:!0}),n.startUp()},add:function(e,t){var n=this;return t!==!1&&n.getToken()===e?!0:n.oldIEMode?n.updateIFrame(e):(n.setHash(e),!0)},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}}),Ext.define("Ext.ux.grid.menu.ListMenu",{extend:"Ext.menu.Menu",idField:"id",labelField:"text",loadingText:"Loading...",loadOnShow:!0,single:!1,plain:!0,constructor:function(e){var t=this,n;t.selected=[],t.addEvents("checkchange"),t.callParent(arguments),n=t.grid.store,t.store?(t.add({text:t.loadingText,iconCls:"loading-indicator"}),t.store.on("load",t.onLoad,t)):n.data.length?t.createMenuStore():n.on("load",t.createMenuStore,t,{single:!0})},destroy:function(){var e=this,t=e.store;t&&(e.autoStore?t.destroyStore():t.un("unload",e.onLoad,e)),e.callParent()},show:function(){var e=this;e.loadOnShow&&!e.loaded&&!e.store.loading&&e.store.load(),e.callParent()},onLoad:function(e,t){var n=this,r,i,s,o,u={checkchange:n.checkChange,scope:n};Ext.suspendLayouts(),n.removeAll(!0),r=n.single?Ext.id():null;for(s=0,o=t.length;s<o;s++)i=t[s].get(n.idField),n.add(Ext.create("Ext.menu.CheckItem",{text:t[s].get(n.labelField),group:r,checked:Ext.Array.contains(n.selected,i),hideOnClick:!1,value:i,listeners:u}));n.loaded=!0,Ext.resumeLayouts(!0),n.fireEvent("load",n,t)},createMenuStore:function(){var e=this,t=[],n,r,i;e.options=e.grid.store.collect(e.dataIndex,!1,!0);for(n=0,r=e.options.length;n<r;n++){i=e.options[n];switch(Ext.type(i)){case"array":t.push(i);break;case"object":t.push([i[e.idField],i[e.labelField]]);break;default:i!=null&&t.push([i,i])}}e.store=Ext.create("Ext.data.ArrayStore",{fields:[e.idField,e.labelField],data:t,listeners:{load:e.onLoad,scope:e}}),e.loaded=!0,e.autoStore=!0},getSelected:function(){return this.selected},setSelected:function(e){e=this.selected=[].concat(e),this.loaded&&this.items.each(function(t){t.setChecked(!1,!0);for(var n=0,r=e.length;n<r;n++)t.value==e[n]&&t.setChecked(!0,!0)})},checkChange:function(e,t){var n=[];this.items.each(function(e){e.checked&&n.push(e.value)}),this.selected=n,this.fireEvent("checkchange",e,t)}}),Ext.define("Ext.ux.grid.menu.RangeMenu",{extend:"Ext.menu.Menu",fieldCls:"Ext.form.field.Number",itemIconCls:{gt:"ux-rangemenu-gt",lt:"ux-rangemenu-lt",eq:"ux-rangemenu-eq"},fieldLabels:{gt:"Greater Than",lt:"Less Than",eq:"Equal To"},menuItemCfgs:{emptyText:"Enter Number...",selectOnFocus:!1,width:155},menuItems:["lt","gt","-","eq"],plain:!0,constructor:function(e){var t=this,n,r,i,s,o,u,a;t.callParent(arguments),n=t.fields=t.fields||{},r=t.fieldCfg=t.fieldCfg||{},t.addEvents("update"),t.updateTask=Ext.create("Ext.util.DelayedTask",t.fireUpdate,t);for(i=0,s=t.menuItems.length;i<s;i++)o=t.menuItems[i],o!=="-"&&(u={itemId:"range-"+o,enableKeyEvents:!0,hideEmptyLabel:!1,labelCls:"ux-rangemenu-icon "+t.itemIconCls[o],labelSeparator:"",labelWidth:29,listeners:{scope:t,change:t.onInputChange,keyup:t.onInputKeyUp,el:{click:this.stopFn}},activate:Ext.emptyFn,deactivate:Ext.emptyFn},Ext.apply(u,Ext.applyIf(n[o]||{},r[o]),t.menuItemCfgs),a=u.fieldCls||t.fieldCls,o=n[o]=Ext.create(a,u)),t.add(o)},stopFn:function(e){e.stopPropagation()},fireUpdate:function(){this.fireEvent("update",this)},getValue:function(){var e={},t=this.fields,n,r;for(n in t)t.hasOwnProperty(n)&&(r=t[n],r.isValid()&&r.getValue()!==null&&(e[n]=r.getValue()));return e},setValue:function(e){var t=this,n=t.fields,r,i;for(r in n)n.hasOwnProperty(r)&&(i=n[r],i.suspendEvents(),i.setValue(r in e?e[r]:""),i.resumeEvents());t.fireEvent("update",t)},onInputKeyUp:function(e,t){t.getKey()===t.RETURN&&e.isValid()&&(t.stopEvent(),this.hide())},onInputChange:function(e){var t=this,n=t.fields,r=n.eq,i=n.gt,s=n.lt;e==r?(i&&i.setValue(null),s&&s.setValue(null)):r.setValue(null),this.updateTask.delay(this.updateBuffer)}}),Ext.define("Ext.ux.grid.filter.Filter",{extend:"Ext.util.Observable",active:!1,dataIndex:null,menu:null,updateBuffer:500,constructor:function(e){Ext.apply(this,e),this.addEvents("activate","deactivate","serialize","update"),Ext.ux.grid.filter.Filter.superclass.constructor.call(this),this.menu=this.createMenu(e),this.init(e),e&&e.value&&(this.setValue(e.value),this.setActive(e.active!==!1,!0),delete e.value)},destroy:function(){this.menu&&this.menu.destroy(),this.clearListeners()},init:Ext.emptyFn,createMenu:function(e){return e.plain=!0,Ext.create("Ext.menu.Menu",e)},getValue:Ext.emptyFn,setValue:Ext.emptyFn,isActivatable:function(){return!0},getSerialArgs:Ext.emptyFn,validateRecord:function(){return!0},serialize:function(){var e=this.getSerialArgs();return this.fireEvent("serialize",e,this),e},fireUpdate:function(){this.active&&this.fireEvent("update",this),this.setActive(this.isActivatable())},setActive:function(e,t){this.active!=e&&(this.active=e,t!==!0&&this.fireEvent(e?"activate":"deactivate",this))}}),Ext.define("Ext.ux.grid.FiltersFeature",{extend:"Ext.grid.feature.Feature",alias:"feature.filters",uses:["Ext.ux.grid.menu.ListMenu","Ext.ux.grid.menu.RangeMenu","Ext.ux.grid.filter.BooleanFilter","Ext.ux.grid.filter.DateFilter","Ext.ux.grid.filter.DateTimeFilter","Ext.ux.grid.filter.ListFilter","Ext.ux.grid.filter.NumericFilter","Ext.ux.grid.filter.StringFilter"],autoReload:!0,filterCls:"ux-filtered-column",local:!1,menuFilterText:"Filters",paramPrefix:"filter",showMenu:!0,stateId:undefined,updateBuffer:500,hasFeatureEvent:!1,constructor:function(e){var t=this;t.callParent(arguments),t.deferredUpdate=Ext.create("Ext.util.DelayedTask",t.reload,t),t.filters=t.createFiltersCollection(),t.filterConfigs=e.filters},init:function(e){var t=this,n=t.view,r=n.headerCt;t.bindStore(n.getStore(),!0),r.on("menucreate",t.onMenuCreate,t),n.on("refresh",t.onRefresh,t),e.on({scope:t,beforestaterestore:t.applyState,beforestatesave:t.saveState,beforedestroy:t.destroy}),e.filters=t,e.addEvents("filterupdate"),t.createFilters()},createFiltersCollection:function(){return Ext.create("Ext.util.MixedCollection",!1,function(e){return e?e.dataIndex:null})},createFilters:function(){function f(e,t,n){e&&(n||t)&&(o=s.get(e),u={dataIndex:e,type:o&&o.type&&o.type.type||"auto"},Ext.isObject(t)&&Ext.apply(u,t),r.replace(u))}var e=this,t=e.filters.getCount(),n=e.getGridPanel(),r=e.createFiltersCollection(),i=n.store.model,s=i.prototype.fields,o,u,a;t&&(a={},e.saveState(null,a)),Ext.Array.each(e.filterConfigs,function(e){f(e.dataIndex,e)}),Ext.Array.each(n.columnManager.getColumns(),function(e){e.filterable===!1?r.removeAtKey(e.dataIndex):f(e.dataIndex,e.filter,e.filterable)}),e.removeAll(),r.items&&e.initializeFilters(r.items),t&&e.applyState
(null,a)},initializeFilters:function(e){var t=this,n=e.length,r,i,s;for(r=0;r<n;r++)i=e[r],i&&(s=t.getFilterClass(i.type),i=i.menu?i:new s(Ext.apply({grid:t.grid},i)),t.filters.add(i),Ext.util.Observable.capture(i,t.onStateChange,t))},onMenuCreate:function(e,t){var n=this;n.filtersNeedReCreating&&(n.createFilters(),n.filtersNeedReCreating=!1),t.on({beforeshow:n.onMenuBeforeShow,destroy:n.onMenuDestroy,scope:n})},onMenuDestroy:function(){this.filtersNeedReCreating=!0},onMenuBeforeShow:function(e){var t=this,n,r;if(t.showMenu){n=t.menuItem;if(!n||n.isDestroyed)t.createMenuItem(e),n=t.menuItem;r=t.getMenuFilter(),r&&(n.setMenu(r.menu,!1),n.setChecked(r.active),n.setDisabled(r.disabled===!0)),n.setVisible(!!r),t.sep.setVisible(!!r)}},createMenuItem:function(e){var t=this;t.sep=e.add("-"),t.menuItem=e.add({checked:!1,itemId:"filters",text:t.menuFilterText,listeners:{scope:t,checkchange:t.onCheckChange,beforecheckchange:t.onBeforeCheck}})},getGridPanel:function(){return this.grid},applyState:function(e,t){var n=this,r,i;n.applyingState=!0,n.clearFilters();if(t.filters)for(r in t.filters)t.filters.hasOwnProperty(r)&&(i=n.filters.get(r),i&&(i.setValue(t.filters[r]),i.setActive(!0)));n.deferredUpdate.cancel(),n.local&&n.reload(),delete n.applyingState,delete t.filters},saveState:function(e,t){var n={};return this.filters.each(function(e){e.active&&(n[e.dataIndex]=e.getValue())}),t.filters=n},destroy:function(){var e=this;Ext.destroyMembers(e,"menuItem","sep"),e.removeAll(),e.clearListeners()},removeAll:function(){this.filters&&(Ext.destroy.apply(Ext,this.filters.items),this.filters.clear())},bindStore:function(e){var t=this;t.store&&t.storeListeners&&t.store.un(t.storeListeners),e?(t.storeListeners={scope:t},t.local?t.storeListeners.load=t.onLoad:t.storeListeners["before"+(e.buffered?"prefetch":"load")]=t.onBeforeLoad,e.on(t.storeListeners)):delete t.storeListeners,t.store=e},getMenuFilter:function(){var e=this.view.headerCt.getMenu().activeHeader;return e?this.filters.get(e.dataIndex):null},onCheckChange:function(e,t){this.getMenuFilter().setActive(t)},onBeforeCheck:function(e,t){return!t||this.getMenuFilter().isActivatable()},onStateChange:function(e,t){if(e!=="serialize"){var n=this,r=n.getGridPanel();t==n.getMenuFilter()&&n.menuItem.setChecked(t.active,!1),(n.autoReload||n.local)&&!n.applyingState&&n.deferredUpdate.delay(n.updateBuffer),n.updateColumnHeadings(),n.applyingState||r.saveState(),r.fireEvent("filterupdate",n,t)}},onBeforeLoad:function(e,t){var n;t.params=t.params||{},this.cleanParams(t.params),n=this.buildQuery(this.getFilterData()),e.getProxy().isSynchronous&&this.hasActiveFilter()&&(t.filters=[new Ext.util.Filter({filterFn:this.getRecordFilter()})]),Ext.apply(t.params,n)},onLoad:function(e){this.filters.length&&e.filterBy(this.getRecordFilter())},onRefresh:function(){this.updateColumnHeadings()},updateColumnHeadings:function(){var e=this,t=e.view.headerCt;t&&t.items.each(function(t){var n=e.getFilter(t.dataIndex);t[n&&n.active?"addCls":"removeCls"](e.filterCls)})},reload:function(){var e=this,t=e.view.getStore();e.local?(t.clearFilter(!0),t.filterBy(e.getRecordFilter()),t.sort()):(e.deferredUpdate.cancel(),t.buffered&&t.data.clear(),t.loadPage(1))},getRecordFilter:function(){var e=[],t,n,r=this.lockingPartner;return this.filters.each(function(t){t.active&&e.push(t)}),r&&r.filters.each(function(t){t.active&&e.push(t)}),t=e.length,function(r){for(n=0;n<t;n++)if(!e[n].validateRecord(r))return!1;return!0}},hasActiveFilter:function(){var e=!1;return this.filters.each(function(t){if(t.active)return e=!0,!1}),e},addFilter:function(e){var t=this,n=t.getGridPanel().columnManager.getColumns(),r,i,s,o,u;for(r=0,i=n.length;r<i;r++)s=n[r],s.dataIndex===e.dataIndex&&(s.filter=e);t.view.headerCt.menu?t.createFilters():t.view.headerCt.getMenu();for(r=0,o=t.filters.items.length;r<o;r++){u=t.filters.items[r];if(u.dataIndex===e.dataIndex)return u}},addFilters:function(e){if(e){var t=this,n,r;for(n=0,r=e.length;n<r;n++)t.addFilter(e[n])}},getFilter:function(e){return this.filters.get(e)},clearFilters:function(){this.filters.each(function(e){e.setActive(!1)})},getFilterItems:function(){var e=this;return e.lockingPartner?e.filters.items.concat(e.lockingPartner.filters.items):e.filters.items},getFilterData:function(){var e=this.getFilterItems(),t=[],n,r,i,s,o,u;for(n=0,r=e.length;n<r;n++){i=e[n];if(i.active){s=[].concat(i.serialize());for(o=0,u=s.length;o<u;o++)t.push({field:i.dataIndex,data:s[o]})}}return t},buildQuery:function(e){var t={},n,r,i,s,o,u,a=e.length;if(!this.encode)for(n=0;n<a;n++){r=e[n],i=[this.paramPrefix,"[",n,"]"].join(""),t[i+"[field]"]=r.field,s=i+"[data]";for(o in r.data)t[[s,"[",o,"]"].join("")]=r.data[o]}else{u=[];for(n=0;n<a;n++)r=e[n],u.push(Ext.apply({},{field:r.field},r.data));u.length>0&&(t[this.paramPrefix]=Ext.JSON.encode(u))}return t},cleanParams:function(e){if(this.encode)delete e[this.paramPrefix];else{var t,n;t=new RegExp("^"+this.paramPrefix+"[[0-9]+]");for(n in e)t.test(n)&&delete e[n]}},getFilterClass:function(e){switch(e){case"auto":e="string";break;case"int":case"float":e="numeric";break;case"bool":e="boolean"}return Ext.ClassManager.getByAlias("gridfilter."+e)}}),Ext.define("Ext.ux.grid.filter.BooleanFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.boolean",defaultValue:!1,yesText:"Yes",noText:"No",init:function(e){var t=Ext.id();this.options=[Ext.create("Ext.menu.CheckItem",{text:this.yesText,group:t,checked:this.defaultValue===!0}),Ext.create("Ext.menu.CheckItem",{text:this.noText,group:t,checked:this.defaultValue===!1})],this.menu.add(this.options[0],this.options[1]);for(var n=0;n<this.options.length;n++)this.options[n].on("click",this.fireUpdate,this),this.options[n].on("checkchange",this.fireUpdate,this)},getValue:function(){return this.options[0].checked},setValue:function(e){this.options[e?0:1].setChecked(!0)},getSerialArgs:function(){var e={type:"boolean",value:this.getValue()};return e},validateRecord:function(e){return e.get(this.dataIndex)==this.getValue()}}),Ext.define("Ext.ux.grid.filter.DateFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.date",uses:["Ext.picker.Date","Ext.menu.Menu"],afterText:"After",beforeText:"Before",compareMap:{before:"lt",after:"gt",on:"eq"},dateFormat:"m/d/Y",menuItems:["before","after","-","on"],menuItemCfgs:{selectOnFocus:!0,width:125},onText:"On",pickerOpts:{},init:function(e){var t=this,n,r,i,s,o;n=Ext.apply(t.pickerOpts,{xtype:"datepicker",minDate:t.minDate,maxDate:t.maxDate,format:t.dateFormat,listeners:{scope:t,select:t.onMenuSelect}}),t.fields={};for(r=0,i=t.menuItems.length;r<i;r++)s=t.menuItems[r],s!=="-"&&(o={itemId:"range-"+s,text:t[s+"Text"],menu:Ext.create("Ext.menu.Menu",{plain:!0,items:[Ext.apply(n,{itemId:s})]}),listeners:{scope:t,checkchange:t.onCheckChange}},s=t.fields[s]=Ext.create("Ext.menu.CheckItem",o)),t.menu.add(s);t.values={}},onCheckChange:function(e,t){var n=this,r=e.menu.items.first(),i=r.itemId,s=n.values;t?s[i]=r.getValue():delete s[i],n.setActive(n.isActivatable()),n.fireEvent("update",n)},onInputKeyUp:function(e,t){var n=t.getKey();n==t.RETURN&&e.isValid()&&(t.stopEvent(),this.menu.hide())},onMenuSelect:function(e,t){var n=this.fields,r=this.fields[e.itemId];r.setChecked(!0),r==n.on?(n.before.setChecked(!1,!0),n.after.setChecked(!1,!0)):(n.on.setChecked(!1,!0),r==n.after&&this.getFieldValue("before")<t?n.before.setChecked(!1,!0):r==n.before&&this.getFieldValue("after")>t&&n.after.setChecked(!1,!0)),this.values[e.itemId]=t,this.fireEvent("update",this),e.up("menu").hide()},getValue:function(){var e,t={};for(e in this.fields)this.fields[e].checked&&(t[e]=this.getFieldValue(e));return t},setValue:function(e,t){var n;for(n in this.fields)e[n]?(this.getPicker(n).setValue(e[n]),this.fields[n].setChecked(!0)):t||this.fields[n].setChecked(!1);this.fireEvent("update",this)},isActivatable:function(){var e;for(e in this.fields)if(this.fields[e].checked)return!0;return!1},getSerialArgs:function(){var e=[];for(var t in this.fields)this.fields[t].checked&&e.push({type:"date",comparison:this.compareMap[t],value:Ext.Date.format(this.getFieldValue(t),this.dateFormat)});return e},getFieldValue:function(e){return this.values[e]},getPicker:function(e){return this.fields[e].menu.items.first()},validateRecord:function(e){var t,n,r=e.get(this.dataIndex),i=Ext.Date.clearTime;if(!Ext.isDate(r))return!1;r=i(r,!0).getTime();for(t in this.fields)if(this.fields[t].checked){n=i(this.getFieldValue(t),!0).getTime();if(t=="before"&&n<=r)return!1;if(t=="after"&&n>=r)return!1;if(t=="on"&&n!=r)return!1}return!0}}),Ext.define("Ext.ux.grid.filter.ListFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.list",phpMode:!1,init:function(e){this.dt=Ext.create("Ext.util.DelayedTask",this.fireUpdate,this)},createMenu:function(e){var t=Ext.create("Ext.ux.grid.menu.ListMenu",e);return t.on("checkchange",this.onCheckChange,this),t},getValue:function(){return this.menu.getSelected()},setValue:function(e){this.menu.setSelected(e),this.fireEvent("update",this)},isActivatable:function(){return this.getValue().length>0},getSerialArgs:function(){return{type:"list",value:this.phpMode?this.getValue().join(","):this.getValue()}},onCheckChange:function(){this.dt.delay(this.updateBuffer)},validateRecord:function(e){var t=this.getValue();return Ext.Array.indexOf(t,e.get(this.dataIndex))>-1}}),Ext.define("Ext.ux.grid.filter.NumericFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.numeric",uses:["Ext.form.field.Number"],createMenu:function(e){var t=this,n;return n=Ext.create("Ext.ux.grid.menu.RangeMenu",e),n.on("update",t.fireUpdate,t),n},getValue:function(){return this.menu.getValue()},setValue:function(e){this.menu.setValue(e)},isActivatable:function(){var e=this.getValue(),t;for(t in e)if(e[t]!==undefined)return!0;return!1},getSerialArgs:function(){var e,t=[],n=this.menu.getValue();for(e in n)t.push({type:"numeric",comparison:e,value:n[e]});return t},validateRecord:function(e){var t=e.get(this.dataIndex),n=this.getValue(),r=Ext.isNumber;return r(n.eq)&&t!=n.eq?!1:r(n.lt)&&t>=n.lt?!1:r(n.gt)&&t<=n.gt?!1:!0}}),Ext.define("Ext.ux.grid.filter.StringFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.string",iconCls:"ux-gridfilter-text-icon",emptyText:"Enter Filter Text...",selectOnFocus:!0,width:125,init:function(e){Ext.applyIf(e,{enableKeyEvents:!0,labelCls:"ux-rangemenu-icon "+this.iconCls,hideEmptyLabel:!1,labelSeparator:"",labelWidth:29,listeners:{scope:this,keyup:this.onInputKeyUp,el:{click:function(e){e.stopPropagation()}}}}),this.inputItem=Ext.create("Ext.form.field.Text",e),this.menu.add(this.inputItem),this.menu.showSeparator=!1,this.updateTask=Ext.create("Ext.util.DelayedTask",this.fireUpdate,this)},getValue:function(){return this.inputItem.getValue()},setValue:function(e){this.inputItem.setValue(e),this.fireEvent("update",this)},isActivatable:function(){return this.inputItem.getValue().length>0},getSerialArgs:function(){return{type:"string",value:this.getValue()}},validateRecord:function(e){var t=e.get(this.dataIndex);return typeof t!="string"?this.getValue().length===0:t.toLowerCase().indexOf(this.getValue().toLowerCase())>-1},onInputKeyUp:function(e,t){var n=t.getKey();if(n==t.RETURN&&e.isValid()){t.stopEvent(),this.menu.hide();return}this.updateTask.delay(this.updateBuffer)}}),Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var e=this.statusAlign==="right";this.callParent(arguments),this.currIconCls=this.iconCls||this.defaultIconCls,this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""}),e?(this.cls+=" x-status-right",this.add("->"),this.add(this.statusEl)):(this.insert(0,this.statusEl),this.insert(1,"->"))},setStatus:function(e){var t=this;e=e||{},Ext.suspendLayouts(),Ext.isString(e)&&(e={text:e}),e.text!==undefined&&t.setText(e.text),e.iconCls!==undefined&&t.setIcon(e.iconCls);if(e.clear){var n=e.clear,r=t.autoClear,i={useDefaults:!0,anim:!0};Ext.isObject(n)?(n=Ext.applyIf(n,i),n.wait&&(r=n.wait)):Ext.isNumber(n)?(r=n,n=i):Ext.isBoolean(n)&&(n=i),n.threadId=this.activeThreadId,Ext.defer(t.clearStatus,r,t,[n])}return Ext.resumeLayouts(!0),t},clearStatus:function(e){e=e||{};var t=this,n=t.statusEl;if(e.threadId&&e.threadId!==t.activeThreadId)return t;var r=e.useDefaults?t.defaultText:t.emptyText,i=e.useDefaults?t.defaultIconCls?t.defaultIconCls:"":"";return e.anim?n.el.puff({remove:!1,useDisplay:!0,callback:function(){n.el.show(),t.setStatus({text:r,iconCls:i})}}):t.setStatus({text:r,iconCls:i}),t},setText:function(e){var t=this;return t.activeThreadId++,t.text=e||"",t.rendered&&t.statusEl.setText(t.text),t},getText:function(){return this.text},setIcon:function(e){var t=this;return t.activeThreadId++,e=e||"",t.rendered?(t.currIconCls&&(t.statusEl.removeCls(t.currIconCls),t.currIconCls=null),e.length>0&&(t.statusEl.addCls(e),t.currIconCls=e)):t.currIconCls=e,t},showBusy:function(e){return Ext.isString(e)&&(e={text:e}),e=Ext.applyIf(e||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(e)}}),typeof DEBUG_MODE=="undefined"&&(DEBUG_MODE=!0),typeof EVENTABLE=="undefined"&&(EVENTABLE=!0),Stativus={DEFAULT_TREE:"default",SUBSTATE_DELIM:"SUBSTATE:",version:"0.5"},Stativus.State={isState:!0,_data:null,_isNone:function(e){return e===undefined||e===null},goToState:function(e){var t=this.statechart;if(t)t.goToState(e,this.globalConcurrentState,this.localConcurrentState);else if(DEBUG_MODE)throw"Cannot goToState cause state doesnt have a statechart"},goToHistoryState:function(e,t){var n=this.statechart;if(n)n.goToHistoryState(e,this.globalConcurrentState,this.localConcurrentState,t);else if(DEBUG_MODE)throw"Cannot goToState cause state doesnt have a statechart"},sendEvent:function(e){var t=this.statechart;if(t)t.sendEvent.apply(t,arguments);else if(DEBUG_MODE)throw"Cannot sendEvent cause state doesnt have a statechart"},getData:function(e){if(this._isNone(e))return e;var t=this.statechart,n=this._data[e];return this._isNone(n)&&(n=t.getData(e,this.parentState,this.globalConcurrentState)),n},setData:function(e,t){if(this._isNone(e))return t;this._data[e]=t},setHistoryState:function(e){this.history=this.history||{},this.substatesAreConcurrent?(this.history[this.localConcurrentState]=e.name,DEBUG_MODE&&console.log(["HISTORY STATE: For",this.name,":: substree =",this.localConcurrentState,"=> history state set to:",e.name].join(" "))):(this.history=e.name,DEBUG_MODE&&console.log(["HISTORY STATE: For",this.name,"=> history state set to:",e.name].join(" ")))}},Stativus.State.create=function(e){function o(){}var t,n,r,i,s;e=e||[],o.prototype=this,t=new o,t._data={};for(i=0,s=e.length||0;i<s;i++){r=e[i];if(typeof r=="object")for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t},Stativus.Statechart={isStatechart:!0,create:function(e){function n(){}var t;return n.prototype=this,t=new n,t._all_states={},t._all_states[Stativus.DEFAULT_TREE]={},t._states_with_concurrent_substates={},t._current_subtrees={},t._current_state={},t._current_state[Stativus.DEFAULT_TREE]=null,t._goToStateLocked=!1,t._sendEventLocked=!1,t._pendingStateTransitions=[],t._pendingEvents=[],t._active_subtrees={},DEBUG_MODE&&(t.inState=function(e,t){var n=!1,r=this.currentState(t);if(!r)throw"Doesn't appear that you are in any states, perhaps you forgot to 'initStates'?";return r.forEach(function(t){t.name===e&&(n=!0)}),n},t.getActiveStates=t.currentState),t},addState:function(e){var t,n,r,i,s,o,u,a,f=[],l,c,h=this;for(c=1,l=arguments.length;c<l;c++)f[c-1]=a=arguments[c];l===1&&(f[0]=a={}),a.name=e,a.statechart=this,a.history=null,t=a.globalConcurrentState||Stativus.DEFAULT_TREE,a.globalConcurrentState=t,r=a.substatesAreConcurrent,i=a.parentState,o=this._states_with_concurrent_substates[t],r&&(n=this._states_with_concurrent_substates[t]||{},n[e]=!0,this._states_with_concurrent_substates[t]=n),i&&o&&o[i]&&(i=this._all_states[t][i],i&&(i.substates=i.substates||[],i.substates.push(e))),u=Stativus.State.create(f),u.sendAction=u.sendEvent,n=this._all_states[t],n||(n={});if(DEBUG_MODE&&n[e])throw["Trying to add state",e,"to state tree",t,"and it already exists"].join(" ");n[e]=u,this._all_states[t]=n,u._beenAdded=!0,s=u.states||[];if(DEBUG_MODE&&s.length===1&&u.substatesAreConcurrent)throw["Trying to add substates in property 'states' to "+u.name+", but must have more than ONE substate"];return s.forEach(function(n,r){var i=[],s=!1,o;if(typeof n=="object"&&n.length>0){if(DEBUG_MODE&&typeof n[0]!="string")throw"#addState: invalid substate array...Must have the name at index=0";i=i.concat(n),s=!0}else if(typeof n=="string")i.push(n),s=!0;else if(typeof n=="object"){if(typeof n.name!="string"&&DEBUG_MODE)throw"#addState: invalid substate hash...Must have a 'name' property";i.push(n.name),i.push(n),s=!0}if(s)o=i.length-1,i[o].parentState=e,i[o].globalConcurrentState=t,h.addState.apply(h,i);else if(DEBUG_MODE)throw"#addState: invalid substate at index="+r}),this},initStates:function(e){var t,n;this._inInitialSetup=!0;if(typeof e=="string")this.goToState(e,Stativus.DEFAULT_TREE);else if(typeof e=="object")for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.goToState(n,t));return this._inInitialSetup=!1,this._flushPendingEvents(),this},goToState:function(e,t,n){var r,i=this._all_states[t],s,o,u=[],a=[],f,l,c,h,p,d,v,m,g,y,b;if(DEBUG_MODE&&!t)throw"#goToState: invalid global parallel state";r=n?this._current_state[n]:this._current_state[t],p=i[e];if(this._checkAllCurrentStates(p,n||t))return;if(DEBUG_MODE&&!p)throw"#goToState: Could not find requested state: "+e;if(this._goToStateLocked){this._pendingStateTransitions.push({requestedState:e,tree:t});return}this._goToStateLocked=!0,u=this._parentStatesWithRoot(p),a=r?this._parentStatesWithRoot(r):[],l=-1;for(s=0,o=a.length;s<o;s++){c=s,l=u.indexOf(a[s]);if(l>=0)break}l<0&&(l=u.length-1),this._enterStates=u,this._enterStateMatchIndex=l,this._enterStateConcurrentTree=n,this._enterStateTree=t,this._exitStateStack=[],r&&r.substatesAreConcurrent&&this._fullExitFromSubstates(t,r);for(v=0;v<c;v+=1)r=a[v],this._exitStateStack.push(r);this._unwindExitStateStack()},goToHistoryState:function(e,t,n,r){var i=this._all_states[t],s,o;if(DEBUG_MODE)if(!t||!i)throw"#goToHistoryState: State requesting does not have a valid global parallel tree";s=i[e],s&&(o=s.history||s.initialSubstate);if(!o)o=e;else if(r){this.goToHistoryState(o,t,r);return}this.goToState(o,t)},currentState:function(e){var t,n,r,i,s,o=this._current_state,u,a,f,l,c,h;e=e||"default",u=o[e],h=this._all_states[e],u&&u.isState&&(t=this._parentStates(u));if(u&&u.substatesAreConcurrent){i=this._active_subtrees[e]||[];for(a=0,f=i.length;a<f;a++)r=i[a],l=o[r],l&&(c=h[l.parentState]),c&&t.indexOf(c)<0&&t.unshift(c),l&&t.indexOf(l)<0&&t.unshift(l)}return t},sendEvent:function(e){var t=[],n=arguments.length,r;if(n<1)return;for(r=1;r<n;r++)t[r-1]=arguments[r];if(this._inInitialSetup||this._sendEventLocked||this._goToStateLocked){this._pendingEvents.push({evt:e,args:t});return}this._sendEventLocked=!0,this._structureCrawl("_cascadeEvents",e,t),this._sendEventLocked=!1,this._inInitialSetup||this._flushPendingEvents()},getData:function(e,t,n){var r=this._all_states[n],i;if(!r)return null;i=r[t];if(i&&i.isState)return i.getData(e)},getState:function(e,t){var n,r;return t=t||Stativus.DEFAULT_TREE,n=this._all_states[t],n?(r=n[e],r):null},_structureCrawl:function(e,t,n){var r,i=this._current_state,s,o,u,a,f,l,c,h,p,d,v=Stativus.SUBSTATE_DELIM;for(r in i){if(!i.hasOwnProperty(r))continue;p=!1,h=null,l=i[r];if(!l||r.slice(0,v.length)===v)continue;f=this._all_states[r];if(!f)continue;c=this._active_subtrees[r]||[];for(s=0,o=c.length;s<o;s++)h=c[s],u=i[h],a=p?[!0,!0]:this[e](t,n,u,f,h),p=a[0],DEBUG_MODE&&(d=a[1]);p||(a=this[e](t,n,l,f,null),p=a[0],DEBUG_MODE&&(d||(d=a[1]))),DEBUG_MODE&&(d||console.log(["ACTION/EVENT:{"+t+"} with",n.length||0,"argument(s)","found NO state to handle this"].join(" ")))}},_cascadeEvents:function(e,t,n,r,i){var s,o,u,a,f=!1;i&&(o=i.split("=>"),u=o.length||0,a=o[u-1]);while(!s&&n){n[e]&&(DEBUG_MODE&&console.log(["EVENT:",n.name,"fires","["+e+"]","with",t.length||0,"argument(s)"].join(" ")),s=n[e].apply(n,t),f=!0);if(i&&a===n.name)return[s,f];n=!s&&n.parentState?r[n.parentState]:null}return[s,f]},_checkAllCurrentStates:function(e,t){var n=this.currentState(t)||[];return n===e?!0:typeof n=="string"&&e===this._all_states[t][n]?!0:n.indexOf&&n.indexOf(e)>-1?!0:!1},_flushPendingEvents:function(){var e,t=this._pendingEvents.shift();if(!t)return;e=t.args,e.unshift(t.evt),this.sendEvent.apply(this,e)},_flushPendingStateTransitions:function(){var e=this._pendingStateTransitions.shift(),t;return e?(this.goToState(e.requestedState,e.tree),!0):!1},_parentStateObject:function(e,t){if(e&&t&&this._all_states[t]&&this._all_states[t][e])return this._all_states[t][e]},_fullEnter:function(e){var t,n=!1;if(!e)return;DEBUG_MODE&&console.log("ENTER: "+e.name),e.enterState&&e.enterState(),e.didEnterState&&e.didEnterState(),e.parentState&&(t=e.statechart.getState(e.parentState,e.globalConcurrentState),t.setHistoryState(e)),this._unwindEnterStateStack()},_fullExit:function(e){var t;if(!e)return;var n=!1;e.exitState&&e.exitState(),e.didExitState&&e.didExitState(),DEBUG_MODE&&console.log("EXIT: "+e.name),this._unwindExitStateStack()},_initiateEnterStateSequence:function(){var e,t,n,r,i,s,o;e=this._enterStates,t=this._enterStateMatchIndex,n=this._enterStateConcurrentTree,r=this._enterStateTree,i=this._all_states[r],this._enterStateStack=this._enterStateStack||[],s=t-1,o=e[s],o&&this._cascadeEnterSubstates(o,e,s-1,n||r,i),this._unwindEnterStateStack(),e=null,t=null,n=null,r=null,delete this._enterStates,delete this._enterStateMatchIndex,delete this._enterStateConcurrentTree,delete this._enterStateTree},_cascadeEnterSubstates:function(e,t,n,r,i){var s,o=t.length,u,a,f=this,l,c,h,p,d;if(!e)return;h=e.name,this._enterStateStack.push(e),this._current_state[r]=e,e.localConcurrentState=r;if(e.substatesAreConcurrent){r=e.globalConcurrentState||Stativus.DEFAULT_TREE,nTreeBase=[Stativus.SUBSTATE_DELIM,r,h].join("=>"),e.history=e.history||{},a=e.substates||[],a.forEach(function(e){l=nTreeBase+"=>"+e,s=i[e],c=s.globalConcurrentState||Stativus.DEFAULT_TREE,d=f._active_subtrees[c]||[],d.unshift(l),f._active_subtrees[c]=d,n>-1&&t[n]===s&&(n-=1),f._cascadeEnterSubstates(s,t,n,l,i)});return}s=t[n],s?(n>-1&&t[n]===s&&(n-=1),this._cascadeEnterSubstates(s,t,n,r,i)):(s=i[e.initialSubstate],this._cascadeEnterSubstates(s,t,n,r,i))},_fullExitFromSubstates:function(e,t){var n,r,i,s=this;if(!e||!t||!e||!t.substates)return;r=this._all_states[e],n=this._current_state,this._exitStateStack=this._exitStateStack||[],t.substates.forEach(function(i){var o,u,a,f,l;o=[Stativus.SUBSTATE_DELIM,e,t.name,i].join("=>"),u=n[o];while(u&&u!==t){f=!1;if(!u)continue;s._exitStateStack.unshift(u),u.substatesAreConcurrent&&s._fullExitFromSubstates(e,u),a=u.parentState,u=r[a]}s._active_subtrees[e]=s._removeFromActiveTree(e,o)})},_unwindExitStateStack:function(){var e,t=!1,n;this._exitStateStack=this._exitStateStack||[],e=this._exitStateStack.shift(),e?(e.willExitState&&(n={_statechart:this,_start:e,restart:function(){var e=this._statechart;DEBUG_MODE&&console.log(["RESTART: after async processing on,",this._start.name,"is about to fully exit"].join(" ")),e&&e._fullExit(this._start)}},t=e.willExitState(n),DEBUG_MODE&&(t?console.log("ASYNC: Delayed exit "+e.name):console.warn("ASYNC: Didn't return 'true' willExitState on "+e.name+" which is needed if you want async"))),t||this._fullExit(e)):(delete this._exitStateStack,this._initiateEnterStateSequence())},_unwindEnterStateStack:function(){var e,t=!1,n,r;this._exitStateStack=this._exitStateStack||[],e=this._enterStateStack.shift(),e?(e.willEnterState&&(n={_statechart:this,_start:e,restart:function(){var e=this._statechart;DEBUG_MODE&&console.log(["RESTART: after async processing on,",this._start.name,"is about to fully enter"].join(" ")),e&&e._fullEnter(this._start)}},t=e.willEnterState(n),DEBUG_MODE&&(t?console.log("ASYNC: Delayed enter "+e.name):console.warn("ASYNC: Didn't return 'true' willExitState on "+e.name+" which is needed if you want async"))),t||this._fullEnter(e)):(delete this._enterStateStack,this._goToStateLocked=!1,r=this._flushPendingStateTransitions(),!r&&!this._inInitialSetup&&this._flushPendingEvents())},_removeFromActiveTree:function(e,t){var n=[],r=this._active_subtrees[e];return r?t?(r.forEach(function(e){e!==t&&n.push(e)}),n):r:[]},_parentStates:function(e){var t=[],n=e;t.push(n),n=this._parentStateObject(n.parentState,n.globalConcurrentState);while(n)t.push(n),n=this._parentStateObject(n.parentState,n.globalConcurrentState);return t},_parentStatesWithRoot:function(e){var t=this._parentStates(e);return t.push("root"),t}},Stativus.createStatechart=function(){return this.Statechart.create()};if(EVENTABLE){Stativus.Statechart._internalTryToPerform=function(e,t,n){var r=this,i,s;if(!e||!e.className)return;s=e.className.split(/\s+/).map(function(e){return"."+e}),e.id&&s.push("#"+e.id),s.forEach(function(e){i=(e+" "+t).replace(/^\s\s*/,"").replace(/\s\s*$/,""),r._structureCrawl("_cascadeActionHandler",i,n)})},Stativus.Statechart._cascadeActionHandler=function(e,t,n,r,i){var s,o,u,a,f=!1,l;i&&(o=i.split("=>"),u=o.length||0,a=o[u-1]);while(!s&&n){l=n.actions?n.actions[e]:null;if(l)return DEBUG_MODE&&console.log(["ACTION LOOKUP:",n.name,"will fire [",l,"] for","["+e+"]","with",t.length||0,"argument(s)"].join(" ")),t.unshift(l),this.sendEvent.apply(this,t),[!0,!0];if(i&&a===n.name)return[s,f];n=!s&&n.parentState?r[n.parentState]:null}return[s,f]};var jQueryIsLoaded=!1;try{jQuery&&(jQueryIsLoaded=!0)}catch(err){jQueryIsLoaded=!1}if(jQueryIsLoaded){var findEventableNodeData=function(e){var t,n,r,i,s=$(e),o,u;return s.hasClass("eventable")&&(o=s),o||(t=s.parents(".eventable"),t&&t.length>0&&(o=t)),o&&(i=o.attr("data"),i=i?i.split("::"):[],o=o[0]),[o,i]};Stativus.Statechart.tryToPerform=function(e){if(!e)return;var t,n=[],r=findEventableNodeData(e.target);if(!r[0])return;r[1].push(e),this._internalTryToPerform(r[0],e.type,r[1])}}else Stativus.Statechart.tryToPerform=function(e){if(!e)return;var t=[],n=arguments.length,r,i;if(n<2)return;for(r=2;r<n;r++)t[r-2]=arguments[r];t.push(e),this._internalTryToPerform(e.target,e.type,t)}}typeof window!="undefined"?window.Stativus=Stativus:typeof exports!="undefined"&&(module.exports=Stativus),Ext.define("MyApp.view.SignatureCapture",{extend:"Ext.Container",alias:"widget.signatureCapture",layout:{type:"vbox",align:"left"},height:250,width:600,border:1,items:[{xtype:"panel",id:"signature",html:'<canvas id="signaturePanel" width="600" height="210">no canvas support</canvas>'},{xtype:"hidden",id:"signatureContent"},{xtype:"panel",layout:"hbox",items:[{xtype:"button",text:"Save Signature",hidden:!0,id:"save"},{xtype:"button",text:"Clear Signature",id:"clear"}]}],initComponent:function(){this.callParent(),this.down("#signatureContent").name=this.name+"_data",this.down("#clear").on("click",function(e){this.signPad.width=this.signPad.width,this.signPadContext.lineWidth=3},this),this.down("#save").on("click",function(e){this.generateSignature()},this)},generateSignature:function(){var e=this.signPad.toDataURL(),t=e.replace(/^data:image\/(png|jpg);base64,/,"");this.down("#signatureContent").setValue(t)},afterRender:function(){this.callParent(),console.log("Signature Panel rendered, get ready to Sign!"),this.signPad=Ext.getDom("signaturePanel"),this.signPad&&this.signPad.getContext&&(this.signPadContext=this.signPad.getContext("2d"));if(!this.signPad||!this.signPadContext){alert("Error creating signature pad.");return}this.signPad.width=this.down("#signature").getWidth(),this.signPad.height=this.down("#signature").getHeight(),_this=this,this.signPad.addEventListener("mousedown",function(e){_this.eventSignPad(e)},!1),this.signPad.addEventListener("mousemove",function(e){_this.eventSignPad(e)},!1),this.signPad.addEventListener("mouseup",function(e){_this.eventSignPad(e)},!1),this.signPad.addEventListener("touchstart",function(e){_this.eventTouchPad(e)},!1),this.signPad.addEventListener("touchmove",function(e){_this.eventTouchPad(e)},!1),this.signPad.addEventListener("touchend",function(e){_this.eventTouchPad(e)},!1),sign=new this.signCap,this.signPadContext.lineWidth=3},signCap:function(){var e=this;this.draw=!1,this.start=!1,this.mousedown=function(t){_this.signPadContext.beginPath(),_this.signPadContext.arc(t._x,t._y,1,0*Math.PI,2*Math.PI),_this.signPadContext.fill(),_this.signPadContext.stroke(),_this.signPadContext.moveTo(t._x,t._y),e.draw=!0},this.mousemove=function(t){e.draw&&(_this.signPadContext.lineTo(t._x,t._y),_this.signPadContext.stroke())},this.mouseup=function(t){e.draw&&(e.mousemove(t),e.draw=!1,_this.generateSignature())},this.touchstart=function(t){_this.signPadContext.beginPath(),_this.signPadContext.arc(t._x,t._y,1,0*Math.PI,2*Math.PI),_this.signPadContext.fill(),_this.signPadContext.stroke(),_this.signPadContext.moveTo(t._x,t._y),e.start=!0},this.touchmove=function(t){t.preventDefault(),e.start&&(_this.signPadContext.lineTo(t._x,t._y),_this.signPadContext.stroke())},this.touchend=function(t){e.start&&(e.touchmove(t),e.start=!1)}},eventSignPad:function(e){if(e.offsetX||e.offsetX==0)e._x=e.offsetX,e._y=e.offsetY;else if(e.layerX||e.layerX==0)e._x=e.layerX,e._y=e.layerY;var t=sign[e.type];t&&t(e)},eventTouchPad:function(e){var t=Ext.get("signature");e._x=e.targetTouches[0].pageX-t.getX(),e._y=e.targetTouches[0].pageY-t.getY();var n=sign[e.type];n&&n(e)}}),Ext.define("GeoExt.data.LayerModel",{alternateClassName:"GeoExt.data.LayerRecord",extend:"Ext.data.Model",requires:["Ext.data.proxy.Memory","Ext.data.reader.Json"],alias:"model.gx_layer",statics:{createFromLayer:function(e){return this.proxy.reader.readRecords([e]).records[0]}},fields:["id",{name:"title",type:"string",mapping:"name"},{name:"legendURL",type:"string",mapping:"metadata.legendURL"},{name:"hideTitle",type:"bool",mapping:"metadata.hideTitle"},{name:"hideInLegend",type:"bool",mapping:"metadata.hideInLegend"}],proxy:{type:"memory",reader:{type:"json"}},getLayer:function(){return this.raw}}),Ext.define("GeoExt.data.LayerStore",{requires:["GeoExt.data.LayerModel"],extend:"Ext.data.Store",model:"GeoExt.data.LayerModel",statics:{MAP_TO_STORE:1,STORE_TO_MAP:2},map:null,constructor:function(e){var t=this;e=Ext.apply({},e);var n=GeoExt.MapPanel&&e.map instanceof GeoExt.MapPanel?e.map.map:e.map;delete e.map,e.layers&&(e.data=e.layers),delete e.layers;var r={initDir:e.initDir};delete e.initDir,t.callParent([e]),n&&this.bind(n,r)},bind:function(e,t){var n=this;if(n.map)return;n.map=e,t=Ext.apply({},t);var r=t.initDir;t.initDir==undefined&&(r=GeoExt.data.LayerStore.MAP_TO_STORE|GeoExt.data.LayerStore.STORE_TO_MAP);var i=e.layers.slice(0);r&GeoExt.data.LayerStore.STORE_TO_MAP&&n.each(function(e){n.map.addLayer(e.getLayer())},n),r&GeoExt.data.LayerStore.MAP_TO_STORE&&n.loadRawData(i,!0),e.events.on({changelayer:n.onChangeLayer,addlayer:n.onAddLayer,removelayer:n.onRemoveLayer,scope:n}),n.on({load:n.onLoad,clear:n.onClear,add:n.onAdd,remove:n.onRemove,update:n.onUpdate,scope:n}),n.data.on({replace:n.onReplace,scope:n}),n.fireEvent("bind",n,e)},unbind:function(){var e=this;e.map&&(e.map.events.un({changelayer:e.onChangeLayer,addlayer:e.onAddLayer,removelayer:e.onRemoveLayer,scope:e}),e.un("load",e.onLoad,e),e.un("clear",e.onClear,e),e.un("add",e.onAdd,e),e.un("remove",e.onRemove,e),e.data.un("replace",e.onReplace,e),e.map=null)},onChangeLayer:function(e){var t=e.layer,n=this.findBy(function(e,n){return e.getLayer()===t});if(n>-1){var r=this.getAt(n);if(e.property==="order"){if(!this._adding&&!this._removing){var i=this.map.getLayerIndex(t);i!==n&&(this._removing=!0,this.remove(r),delete this._removing,this._adding=!0,this.insert(i,[r]),delete this._adding)}}else e.property==="name"?r.set("title",t.name):this.fireEvent("update",this,r,Ext.data.Record.EDIT)}},onAddLayer:function(e){var t=this;if(!t._adding){t._adding=!0;var n=t.proxy.reader.read(e.layer);t.add(n.records),delete t._adding}},onRemoveLayer:function(e){if(this.map.unloadDestroy){if(!this._removing){var t=e.layer;this._removing=!0,this.remove(this.getByLayer(t)),delete this._removing}}else this.unbind()},onLoad:function(e,t,n){if(n){Ext.isArray(t)||(t=[t]);if(!this._addRecords){this._removing=!0;for(var r=this.map.layers.length-1;r>=0;r--)this.map.removeLayer(this.map.layers[r]);delete this._removing}var i=t.length;if(i>0){var s=new Array(i);for(var o=0;o<i;o++)s[o]=t[o].getLayer();this._adding=!0,this.map.addLayers(s),delete this
._adding}}delete this._addRecords},onClear:function(e){this._removing=!0;for(var t=this.map.layers.length-1;t>=0;t--)this.map.removeLayer(this.map.layers[t]);delete this._removing},onAdd:function(e,t,n){if(!this._adding){this._adding=!0;var r;for(var i=t.length-1;i>=0;--i)r=t[i].getLayer(),this.map.addLayer(r),n!==this.map.layers.length-1&&this.map.setLayerIndex(r,n);delete this._adding}},onRemove:function(e,t,n){if(!this._removing){var r=t.getLayer();this.map.getLayer(r.id)!=null&&(this._removing=!0,this.removeMapLayer(t),delete this._removing)}},onUpdate:function(e,t,n){if(n===Ext.data.Record.EDIT&&t.modified&&t.modified.title){var r=t.getLayer(),i=t.get("title");i!==r.name&&r.setName(i)}},removeMapLayer:function(e){this.map.removeLayer(e.getLayer())},onReplace:function(e,t,n){this.removeMapLayer(t)},getByLayer:function(e){var t=this.findBy(function(t){return t.getLayer()===e});if(t>-1)return this.getAt(t)},destroy:function(){var e=this;e.unbind(),e.callParent()},loadRecords:function(e,t){t&&t.addRecords&&(this._addRecords=!0),this.callParent(arguments)}}),Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",alias:"widget.viewport",requires:["Ext.EventManager"],alternateClassName:"Ext.Viewport",isViewport:!0,ariaRole:"application",preserveElOnDestroy:!0,viewportCls:Ext.baseCSSPrefix+"viewport",initComponent:function(){var e=this,t=document.body.parentNode,n=e.el=Ext.getBody();Ext.getScrollbarSize(),e.width=e.height=undefined,e.callParent(arguments),Ext.fly(t).addCls(e.viewportCls),e.autoScroll&&(Ext.fly(t).setStyle(e.getOverflowStyle()),delete e.autoScroll),n.setHeight=n.setWidth=Ext.emptyFn,n.dom.scroll="no",e.allowDomMove=!1,e.renderTo=e.el},applyTargetCls:function(e){this.el.addCls(e)},onRender:function(){var e=this;e.callParent(arguments),e.width=Ext.Element.getViewportWidth(),e.height=Ext.Element.getViewportHeight()},afterFirstLayout:function(){var e=this;e.callParent(arguments),setTimeout(function(){Ext.EventManager.onWindowResize(e.fireResize,e)},1)},fireResize:function(e,t){(e!=this.width||t!=this.height)&&this.setSize(e,t)},initHierarchyState:function(e){this.callParent([this.hierarchyState=Ext.rootHierarchyState])},beforeDestroy:function(){var e=this;e.removeUIFromElement(),e.el.removeCls(e.baseCls),Ext.fly(document.body.parentNode).removeCls(e.viewportCls),e.callParent()}}),Ext.define("Ext.window.MessageBox",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.field.Text","Ext.form.field.TextArea","Ext.form.field.Display","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hide-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,iconWidth:50,ariaRole:"alertdialog",makeButton:function(e){var t=this.buttonIds[e];return new Ext.button.Button({handler:this.btnCallback,itemId:t,scope:this,text:this.buttonText[t],minWidth:75})},btnCallback:function(e){var t=this,n,r;if(t.cfg.prompt||t.cfg.multiline)t.cfg.multiline?r=t.textArea:r=t.textField,n=r.getValue(),r.reset();t.hide(),t.userCallback(e.itemId,n,t.cfg)},hide:function(){var e=this,t=e.cfg.cls;e.progressBar.reset(),t&&e.removeCls(t),e.callParent(arguments)},constructor:function(e){var t=this;t.callParent(arguments),t.minWidth=t.defaultMinWidth=t.minWidth||t.defaultMinWidth,t.maxWidth=t.defaultMaxWidth=t.maxWidth||t.defaultMaxWidth,t.minHeight=t.defaultMinHeight=t.minHeight||t.defaultMinHeight,t.maxHeight=t.defaultMaxHeight=t.maxHeight||t.defaultMaxHeight},initComponent:function(e){var t=this,n=t.id,r,i;t.title="&#160;",t.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[t.iconComponent=new Ext.Component({width:t.iconWidth,height:t.iconHeight}),t.promptContainer=new Ext.container.Container({flex:1,layout:"anchor",items:[t.msg=new Ext.form.field.Display({id:n+"-displayfield",cls:t.baseCls+"-text"}),t.textField=new Ext.form.field.Text({id:n+"-textfield",anchor:"100%",enableKeyEvents:!0,listeners:{keydown:t.onPromptKey,scope:t}}),t.textArea=new Ext.form.field.TextArea({id:n+"-textarea",anchor:"100%",height:75})]})]}),t.progressBar=new Ext.ProgressBar({id:n+"-progressbar",margin:"0 10 10 10"}),t.items=[t.topContainer,t.progressBar],t.msgButtons=[];for(r=0;r<4;r++)i=t.makeButton(r),t.msgButtons[i.itemId]=i,t.msgButtons.push(i);t.bottomTb=new Ext.toolbar.Toolbar({id:n+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[t.msgButtons[0],t.msgButtons[1],t.msgButtons[2],t.msgButtons[3]]}),t.dockedItems=[t.bottomTb],t.on("close",t.onClose,t),t.callParent()},onClose:function(){var e=this.header.child("[type=close]");e.itemId="cancel",this.btnCallback(e),delete e.itemId},onPromptKey:function(e,t){var n=this;if(t.keyCode===t.RETURN||t.keyCode===10)n.msgButtons.ok.isVisible()?n.msgButtons.ok.handler.call(n,n.msgButtons.ok):n.msgButtons.yes.isVisible()&&n.msgButtons.yes.handler.call(n,n.msgButtons.yes)},reconfigure:function(e){var t=this,n=0,r=!0,i=t.buttonText,s=t.resizer,o,u,a,f,l,c,h,p,d;t.updateButtonText(),e=e||{},t.cfg=e,e.width&&(u=e.width),e.height&&(a=e.height),t.minWidth=e.minWidth||t.defaultMinWidth,t.maxWidth=e.maxWidth||t.defaultMaxWidth,t.minHeight=e.minHeight||t.defaultMinHeight,t.maxHeight=e.maxHeight||t.defaultMaxHeight,s&&(o=s.resizeTracker,s.minWidth=o.minWidth=t.minWidth,s.maxWidth=o.maxWidth=t.maxWidth,s.minHeight=o.minHeight=t.minHeight,s.maxHeight=o.maxHeight=t.maxHeight),delete t.defaultFocus,e.defaultFocus&&(t.defaultFocus=e.defaultFocus),t.animateTarget=e.animateTarget||undefined,t.modal=e.modal!==!1,t.setTitle(e.title||""),t.setIconCls(e.iconCls||""),Ext.isObject(e.buttons)?(t.buttonText=e.buttons,n=0):(t.buttonText=e.buttonText||t.buttonText,n=Ext.isNumber(e.buttons)?e.buttons:0),n|=t.updateButtonText(),t.buttonText=i,Ext.suspendLayouts(),delete t.width,delete t.height;if(u||a)u&&t.setWidth(u),a&&t.setHeight(a);t.hidden=!1,t.rendered||t.render(Ext.getBody()),t.closable=e.closable!==!1&&!e.wait,t.header.child("[type=close]").setVisible(t.closable),!e.title&&!t.closable&&!e.iconCls?t.header.hide():t.header.show(),t.liveDrag=!e.proxyDrag,t.userCallback=Ext.Function.bind(e.callback||e.fn||Ext.emptyFn,e.scope||Ext.global),t.setIcon(e.icon,e.iconWidth,e.iconHeight),h=t.msg,e.msg?(h.setValue(e.msg),h.show()):h.hide(),l=t.textArea,c=t.textField,e.prompt||e.multiline?(t.multiline=e.multiline,e.multiline?(l.setValue(e.value),l.setHeight(e.defaultTextHeight||t.defaultTextHeight),l.show(),c.hide(),t.defaultFocus=l):(c.setValue(e.value),l.hide(),c.show(),t.defaultFocus=c)):(l.hide(),c.hide()),p=t.progressBar,e.progress||e.wait?(p.show(),t.updateProgress(0,e.progressText),e.wait===!0&&p.wait(e.waitConfig)):p.hide(),d=t.msgButtons;for(f=0;f<4;f++)n&Math.pow(2,f)?(t.defaultFocus||(t.defaultFocus=d[f]),d[f].show(),r=!1):d[f].hide();r?t.bottomTb.hide():t.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var e=this,t=e.buttonText,n=0,r,i;for(r in t)t.hasOwnProperty(r)&&(i=e.msgButtons[r],i&&(e.cfg&&e.cfg.buttonText&&(n|=Math.pow(2,Ext.Array.indexOf(e.buttonIds,r))),i.text!=t[r]&&i.setText(t[r])));return n},show:function(e){var t=this,n;return Ext.AbstractComponent.layoutSuspendCount?(Ext.on({resumelayouts:function(){t.show(e)},single:!0}),t):(t.reconfigure(e),e.cls&&t.addCls(e.cls),n=t.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),t.preventFocusOnActivate=!n.length,t.hidden=!0,t.callParent(),t)},onShow:function(){this.callParent(arguments),this.center()},updateText:function(e){this.msg.setValue(e)},setIcon:function(e,t,n){var r=this,i=r.iconComponent,s=r.messageIconCls;return s&&i.removeCls(s),e?(i.show(),i.setSize(t||r.iconWidth,n||r.iconHeight),i.addCls(Ext.baseCSSPrefix+"dlg-icon"),i.addCls(r.messageIconCls=e)):(i.removeCls(Ext.baseCSSPrefix+"dlg-icon"),i.hide()),r},updateProgress:function(e,t,n){return this.progressBar.updateProgress(e,t),n&&this.updateText(n),this},onEsc:function(){this.closable!==!1&&this.callParent(arguments)},confirm:function(e,t,n,r){return Ext.isString(e)&&(e={title:e,icon:this.QUESTION,msg:t,buttons:this.YESNO,callback:n,scope:r}),this.show(e)},prompt:function(e,t,n,r,i,s){return Ext.isString(e)&&(e={prompt:!0,title:e,minWidth:this.minPromptWidth,msg:t,buttons:this.OKCANCEL,callback:n,scope:r,multiline:i,value:s}),this.show(e)},wait:function(e,t,n){return Ext.isString(e)&&(e={title:t,msg:e,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:n}),this.show(e)},alert:function(e,t,n,r){return Ext.isString(e)&&(e={title:e,msg:t,buttons:this.OK,fn:n,scope:r,minWidth:this.minWidth}),this.show(e)},progress:function(e,t,n){return Ext.isString(e)&&(e={title:e,msg:t,progress:!0,progressText:n}),this.show(e)}},function(){Ext.MessageBox=Ext.Msg=new this}),Ext.define("GeoExt.panel.Map",{extend:"Ext.panel.Panel",requires:["GeoExt.data.LayerStore"],alias:"widget.gx_mappanel",alternateClassName:"GeoExt.MapPanel",statics:{guess:function(){var e=Ext.ComponentQuery.query("gx_mappanel");return e&&e.length>0?e[0]:null}},center:null,zoom:null,extent:null,prettyStateKeys:!1,layout:"fit",map:null,layers:null,stateEvents:["aftermapmove","afterlayervisibilitychange","afterlayeropacitychange","afterlayerorderchange","afterlayernamechange","afterlayeradd","afterlayerremove"],initComponent:function(){console.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$44"),this.map instanceof OpenLayers.Map||(this.map=new OpenLayers.Map(Ext.applyIf(this.map||{},{allOverlays:!0})));var e=this.layers;if(!e||e instanceof Array)this.layers=Ext.create("GeoExt.data.LayerStore",{layers:e,map:this.map.layers.length>0?this.map:null});Ext.isString(this.center)?this.center=OpenLayers.LonLat.fromString(this.center):Ext.isArray(this.center)&&(this.center=new OpenLayers.LonLat(this.center[0],this.center[1])),Ext.isString(this.extent)?this.extent=OpenLayers.Bounds.fromString(this.extent):Ext.isArray(this.extent)&&(this.extent=OpenLayers.Bounds.fromArray(this.extent)),this.callParent(arguments),this.on("resize",this.onResize,this),this.on("afterlayout",function(){typeof this.map.getViewport=="function"&&this.items.each(function(e){typeof e.addToMapPanel=="function"&&e.getEl().appendTo(this.map.getViewport())},this)},this),this.map.events.on({moveend:this.onMoveend,changelayer:this.onChangelayer,addlayer:this.onAddlayer,removelayer:this.onRemovelayer,scope:this})},onMoveend:function(e){this.fireEvent("aftermapmove",this,this.map,e)},onChangelayer:function(e){var t=this.map;e.property&&(e.property==="visibility"?this.fireEvent("afterlayervisibilitychange",this,t,e):e.property==="order"?this.fireEvent("afterlayerorderchange",this,t,e):e.property==="nathis"?this.fireEvent("afterlayernathischange",this,t,e):e.property==="opacity"&&this.fireEvent("afterlayeropacitychange",this,t,e))},onAddlayer:function(){this.fireEvent("afterlayeradd")},onRemovelayer:function(){this.fireEvent("afterlayerremove")},onResize:function(){var e=this.map;this.body.dom!==e.div?(e.render(this.body.dom),this.layers.bind(e),e.layers.length>0?this.setInitialExtent():this.layers.on("add",this.setInitialExtent,this,{single:!0})):e.updateSize()},setInitialExtent:function(){var e=this.map;e.getCenter()||(this.center||this.zoom?e.setCenter(this.center,this.zoom):this.extent instanceof OpenLayers.Bounds?e.zoomToExtent(this.extent,!0):e.zoomToMaxExtent())},getState:function(){var e=this,t=e.map,n=e.callParent(arguments)||{},r;if(!t)return;var i=t.getCenter();return i&&Ext.applyIf(n,{x:i.lon,y:i.lat,zoom:t.getZoom()}),e.layers.each(function(t){r=t.getLayer(),layerId=this.prettyStateKeys?t.get("title"):t.get("id"),n=e.addPropertyToState(n,"visibility_"+layerId,r.getVisibility()),n=e.addPropertyToState(n,"opacity_"+layerId,r.opacity===null?1:r.opacity)},e),n},applyState:function(e){var t=this;map=t.map,t.center=new OpenLayers.LonLat(e.x,e.y),t.zoom=e.zoom;var n,r,i,s,o,u,a=map.layers;for(n=0,r=a.length;n<r;n++)i=a[n],s=t.prettyStateKeys?i.name:i.id,o=e["visibility_"+s],o!==undefined&&(o=/^true$/i.test(o),i.isBaseLayer?o&&map.setBaseLayer(i):i.setVisibility(o)),u=e["opacity_"+s],u!==undefined&&i.setOpacity(u)},onBeforeAdd:function(e){Ext.isFunction(e.addToMapPanel)&&e.addToMapPanel(this),this.callParent(arguments)},beforeDestroy:function(){this.map&&this.map.events&&this.map.events.un({moveend:this.onMoveend,changelayer:this.onChangelayer,scope:this}),(!this.initialConfig.map||!(this.initialConfig.map instanceof OpenLayers.Map))&&this.map&&this.map.destroy&&this.map.destroy(),delete this.map,this.callParent(arguments)}}),Ext.define("GeoExt.Action",{extend:"Ext.Action",alias:"widget.gx_action",control:null,activateOnEnable:!1,deactivateOnDisable:!1,map:null,uScope:null,uHandler:null,uToggleHandler:null,uCheckHandler:null,constructor:function(e){this.uScope=e.scope,this.uHandler=e.handler,this.uToggleHandler=e.toggleHandler,this.uCheckHandler=e.checkHandler,e.scope=this,e.handler=this.pHandler,e.toggleHandler=this.pToggleHandler,e.checkHandler=this.pCheckHandler,this.control=e.control;var t=this.control;delete e.control,this.activateOnEnable=!!e.activateOnEnable,delete e.activateOnEnable,this.deactivateOnDisable=!!e.deactivateOnDisable,delete e.deactivateOnDisable,t&&(e.map&&(e.map.addControl(t),delete e.map),(e.pressed||e.checked)&&t.map&&t.activate(),t.active&&(e.pressed=!0,e.checked=!0),t.events.on({activate:this.onCtrlActivate,deactivate:this.onCtrlDeactivate,scope:this})),this.callParent(arguments)},pHandler:function(e){var t=this.control;t&&t.type==OpenLayers.Control.TYPE_BUTTON&&t.trigger(),this.uHandler&&this.uHandler.apply(this.uScope,arguments)},pToggleHandler:function(e,t){this.changeControlState(t),this.uToggleHandler&&this.uToggleHandler.apply(this.uScope,arguments)},pCheckHandler:function(e,t){this.changeControlState(t),this.uCheckHandler&&this.uCheckHandler.apply(this.uScope,arguments)},changeControlState:function(e){e?this._activating||(this._activating=!0,this.control.activate(),this.initialConfig.pressed=!0,this.initialConfig.checked=!0,this._activating=!1):this._deactivating||(this._deactivating=!0,this.control.deactivate(),this.initialConfig.pressed=!1,this.initialConfig.checked=!1,this._deactivating=!1)},onCtrlActivate:function(){var e=this.control;e.type==OpenLayers.Control.TYPE_BUTTON?this.enable():(this.safeCallEach("toggle",[!0]),this.safeCallEach("setChecked",[!0]))},onCtrlDeactivate:function(){var e=this.control;e.type==OpenLayers.Control.TYPE_BUTTON?this.disable():(this.safeCallEach("toggle",[!1]),this.safeCallEach("setChecked",[!1]))},safeCallEach:function(e,t){var n=this.items;for(var r=0,i=n.length;r<i;r++)n[r][e]&&(n[r].rendered?n[r][e].apply(n[r],t):n[r].on({render:Ext.Function.bind(n[r][e],n[r],t),single:!0}))},setDisabled:function(e){return!e&&this.activateOnEnable&&this.control&&!this.control.active&&this.control.activate(),e&&this.deactivateOnDisable&&this.control&&this.control.active&&this.control.deactivate(),GeoExt.Action.superclass.setDisabled.apply(this,arguments)}}),Ext.define("GeoExt.form.field.GeocoderComboBox",{extend:"Ext.form.field.ComboBox",requires:["GeoExt.panel.Map","Ext.data.JsonStore","Ext.data.proxy.JsonP"],alias:"widget.gx_geocodercombo",alternateClassName:"GeoExt.form.GeocoderComboBox",emptyText:"Search",srs:"EPSG:4326",zoom:10,queryDelay:100,valueField:"bounds",displayField:"name",locationField:"lonlat",url:"http://nominatim.openstreetmap.org/search?format=json",queryParam:"q",minChars:3,store:null,center:null,locationFeature:null,initComponent:function(){return this.map&&this.setMap(this.map),Ext.isString(this.srs)&&(this.srs=new OpenLayers.Projection(this.srs)),this.store||(this.store=Ext.create("Ext.data.JsonStore",{root:null,fields:[{name:"name",mapping:"display_name"},{name:"bounds",convert:function(e,t){var n=t.raw.boundingbox;return[n[2],n[0],n[3],n[1]]}},{name:"lonlat",convert:function(e,t){return[t.raw.lon,t.raw.lat]}}],proxy:Ext.create("Ext.data.proxy.JsonP",{url:this.url,callbackKey:"json_callback"})})),this.on({added:this.findMapPanel,select:this.handleSelect,focus:function(){this.clearValue(),this.removeLocationFeature()},scope:this}),this.callParent(arguments)},findMapPanel:function(){var e=this.up("gx_mappanel");e&&this.setMap(e)},handleSelect:function(e,t){this.map||this.findMapPanel();var n=this.getValue();if(Ext.isArray(n)){var r=this.map.getProjectionObject();delete this.center,delete this.locationFeature,n.length===4?this.map.zoomToExtent(OpenLayers.Bounds.fromArray(n).transform(this.srs,r)):this.map.setCenter(OpenLayers.LonLat.fromArray(n).transform(this.srs,r),Math.max(this.map.getZoom(),this.zoom)),t=t[0],this.center=this.map.getCenter();var i=t.get(this.locationField);if(this.layer&&i){var s=(new OpenLayers.Geometry.Point(i[0],i[1])).transform(this.srs,r);this.locationFeature=new OpenLayers.Feature.Vector(s,t.data),this.layer.addFeatures([this.locationFeature])}}},removeLocationFeature:function(){this.locationFeature&&this.layer.destroyFeatures([this.locationFeature])},clearResult:function(){this.center&&!this.map.getCenter().equals(this.center)&&this.clearValue()},setMap:function(e){e instanceof GeoExt.panel.Map&&(e=e.map),this.map=e,e.events.on({moveend:this.clearResult,click:this.removeLocationFeature,scope:this})},addToMapPanel:Ext.emptyFn,beforeDestroy:function(){this.map&&this.map.events&&this.map.events.un({moveend:this.clearResult,click:this.removeLocationFeature,scope:this}),this.removeLocationFeature(),delete this.map,delete this.layer,delete this.center,this.callParent(arguments)}}),Ext.define("Ext.XTemplate",{extend:"Ext.Template",requires:"Ext.XTemplateCompiler",emptyObj:{},apply:function(e,t){return this.applyOut(e,[],t).join("")},applyOut:function(e,t,n){var r=this,i;r.fn||(i=new Ext.XTemplateCompiler({useFormat:r.disableFormats!==!0,definitions:r.definitions}),r.fn=i.compile(r.html));try{r.fn(t,e,n||r.emptyObj,1,1)}catch(s){Ext.log("Error: "+s.message)}return t},compile:function(){return this},statics:{getTpl:function(e,t){var n=e[t],r;if(n&&!n.isTemplate){n=Ext.ClassManager.dynInstantiate("Ext.XTemplate",n);if(e.hasOwnProperty(t))r=e;else for(r=e.self.prototype;r&&!r.hasOwnProperty(t);r=r.superclass);r[t]=n,n.owner=r}return n||null}}});var OpenLayers={VERSION_NUMBER:"Release 2.12-rc3",singleFile:!0,_getScriptLocation:function(){for(var e=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,t=document.getElementsByTagName("script"),n,r="",i=0,s=t.length;i<s;i++)if(n=t[i].getAttribute("src"))if(n=n.match(e)){r=n[1];break}return function(){return r}}(),ImgPath:""};OpenLayers.Class=function(){var e=arguments.length,t=arguments[0],n=arguments[e-1],r="function"==typeof n.initialize?n.initialize:function(){t.prototype.initialize.apply(this,arguments)};return 1<e?(e=[r,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),n),OpenLayers.inherit.apply(null,e)):r.prototype=n,r},OpenLayers.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n;var r,i,n=2;for(r=arguments.length;n<r;n++)i=arguments[n],"function"==typeof i&&(i=i.prototype),OpenLayers.Util.extend(e.prototype,i)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(e,t){e=e||{};if(t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},OpenLayers.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var e=e.split("-"),t=e[0],n=1,r=e.length;n<r;n++)var i=e[n],t=t+(i.charAt(0).toUpperCase()+i.substring(1));return t},format:function(e,t,n){return t||(t=window),e.replace(OpenLayers.String.tokenRegEx,function(e,r){for(var i,s=r.split(/\.+/),o=0;o<s.length;o++)0==o&&(i=t),i=i[s[o]];return"function"==typeof i&&(i=n?i.apply(null,n):i()),"undefined"==typeof i?"undefined":i})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return OpenLayers.String.numberRegEx.test(e)},numericIf:function(e){return OpenLayers.String.isNumeric(e)?parseFloat(e):e}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return 0<t&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,r){t="undefined"!=typeof t?t:0,n="undefined"!=typeof n?n:OpenLayers.Number.thousandsSeparator,r="undefined"!=typeof r?r:OpenLayers.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1==i.length&&null==t&&(t=0),e=i[0];if(n)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(e);)e=e.replace(s,"$1"+n+"$2");return 0==t?t=e:(n=1<i.length?i[1]:"0",null!=t&&(n+=Array(t-n.length+1).join("0")),t=e+r+n),t}},OpenLayers.Function={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var i=e.length;if("function"!=typeof t)throw new TypeError;for(var s=0;s<i;s++)if(s in e){var o=e[s];t.call(n,o,s,e)&&r.push(o)}}return r}},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,n,r){OpenLayers.Util.isArray(e)&&(r=e[3],n=e[2],t=e[1],e=e[0]),null!=e&&(this.left=OpenLayers.Util.toFloat(e)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=n&&(this.right=OpenLayers.Util.toFloat(n)),null!=r&&(this.top=OpenLayers.Util.toFloat(r))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return null!=e&&(t=this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){null==e&&(e=6);var n=Math.pow(10,e),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,s=Math.round(this.right*n)/n,n=Math.round(this.top*n)/n;return!0===t?i+","+r+","+n+","+s:r+","+i+","+s+","+n},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){null==t&&(t=this.getCenterLonLat());var n,r;return"OpenLayers.LonLat"==t.CLASS_NAME?(n=t.lon,r=t.lat):(n=t.x,r=t.y),new OpenLayers.Bounds((this.left-n)*e+n,(this.bottom-r)*e+r,(this.right-n)*e+n,(this.top-r)*e+r)},add:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){var t=null;if(e){switch(e.CLASS_NAME){case"OpenLayers.LonLat":t=new OpenLayers.Bounds(e.lon,e.lat,e.lon,e.lat);break;case"OpenLayers.Geometry.Point":t=new OpenLayers.Bounds(e.x,e.y,e.x,e.y);break;case"OpenLayers.Bounds":t=e}if(t){this.centerLonLat=null;if(null==this.left||t.left<this.left)this.left=t.left;if(null==this.bottom||t.bottom<this.bottom)this.bottom=t.bottom;if(null==this.right||t.right>this.right)this.right=t.right;if(null==this.top||t.top>this.top)this.top=t.top}}},containsLonLat:function(e,t){"boolean"==typeof t&&(t={inclusive:t});var t=t||{},n=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;return r&&!n&&(n=r.getWidth(),r=Math.round((e.lon-(r.left+r.right)/2)/n),n=this.containsLonLat({lon:e.lon-r*n,lat:e.lat},{inclusive:t.inclusive})),n},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,n){null==n&&(n=!0);if(null==e||null==t)return!1;var e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t),r=!1;return r=n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top},intersectsBounds:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};if(t.worldBounds)var n=this.wrapDateLine(t.worldBounds),e=e.wrapDateLine(t.worldBounds);else n=this;null==t.inclusive&&(t.inclusive=!0);var r=!1,i=n.left==e.right||n.right==e.left||n.top==e.bottom||n.bottom==e.top;if(t.inclusive||!i)var r=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,i=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,s=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right,r=(e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top||r)&&(i||s);if(t.worldBounds&&!r){var o=t.worldBounds,i=o.getWidth(),s=!o.containsBounds(n),o=!o.containsBounds(e);s&&!o?(e=e.add(-i,0),r=n.intersectsBounds(e,{inclusive:t.inclusive})):o&&!s&&(n=n.add(-i,0),r=e.intersectsBounds(n,{inclusive:t.inclusive}))}return r},containsBounds:function(e,t,n){null==t&&(t=!1),null==n&&(n=!0);var r=this.contains(e.left,e.bottom,n),i=this.contains(e.right,e.bottom,n),s=this.contains(e.left,e.top,n),e=this.contains(e.right,e.top,n);return t?r||i||s||e:r&&i&&s&&e},determineQuadrant:function(e){var t="",n=this.getCenterLonLat(),t=t+(e.lat<n.lat?"b":"t");return t+=e.lon<n.lon?"l":"r"},transform:function(e,t){this.centerLonLat=null;var n=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),r=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),i=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),s=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(n.x,i.x),this.bottom=Math.min(n.y,r.y),this.right=Math.max(r.x,s.x),this.top=Math.max(i.y,s.y),this},wrapDateLine:function(e,t){var t=t||{},n=t.leftTolerance||0,r=t.rightTolerance||0,i=this.clone();if(e){for(var s=e.getWidth();i.left<e.left&&i.right-r<=e.left;)i=i.add(s,0);for(;i.left+n>=e.right&&i.right>e.right;)i=i.add(-s,0);n=i.left+n,n<e.right&&n>e.left&&i.right-r>e.right&&(i=i.add(-s,0))}return i},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){var n=e.split(",");return OpenLayers.Bounds.fromArray(n,t)},OpenLayers.Bounds.fromArray=function(e,t){return!0===t?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){var t;return t=""+("t"==e.charAt(0)?"b":"t"),t+="l"==e.charAt(1)?"r":"l"},OpenLayers.Element={visible:function(e){return"none"!=OpenLayers.Util.getElement(e).style.display},toggle:function(){for(var e=0,t=arguments.length;e<t;e++){var n=OpenLayers.Util.getElement(arguments[e]),r=OpenLayers.Element.visible(n)?"none":"";n.style.display=r}},remove:function(e){e=OpenLayers.Util.getElement(e),e.parentNode.removeChild(e)},getHeight:function(e){return e=OpenLayers.Util.getElement(e),e.offsetHeight},hasClass:function(e,t){var n=e.className;return!!n&&RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){return OpenLayers.Element.hasClass(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClass:function(e,t){var n=e.className;return n&&(e.className=OpenLayers.String.trim(n.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),e},toggleClass:function(e,t){return OpenLayers.Element.hasClass(e,t)?OpenLayers.Element.removeClass(e,t):OpenLayers.Element.addClass(e,t),e},getStyle:function(e,t){var e=OpenLayers.Util.getElement(e),n=null;if(e&&e.style){n=e.style[OpenLayers.String.camelize(t)],n||(document.defaultView&&document.defaultView.getComputedStyle?n=(n=document.defaultView.getComputedStyle(e,null))?n.getPropertyValue(t):null:e.currentStyle&&(n=e.currentStyle[OpenLayers.String.camelize(t)]));var r=["left","top","right","bottom"];window.opera&&-1!=OpenLayers.Util.indexOf(r,t)&&"static"==OpenLayers.Element.getStyle(e,"position")&&(n="auto")}return"auto"==n?null:n}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(e,t){OpenLayers.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=OpenLayers.Util.toFloat(e),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(e),this.lat+OpenLayers.Util.toFloat(t))},equals:function(e){var t=!1;return null!=e&&(t=this.lon==e.lon&&this.lat==e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t},transform:function(e,t){var n=OpenLayers.Projection.transform({x:this.lon,y:this.lat},e,t);return this.lon=n.x,this.lat=n.y,this},wrapDateLine:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(e){return e=e.split(","),new OpenLayers.LonLat(e[0],e[1])},OpenLayers.LonLat.fromArray=function(e){var t=OpenLayers.Util.isArray(e);return new OpenLayers.LonLat(t&&e[0],t&&e[1])},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(e,t){this.x=parseFloat(e),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},add:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+e,this.y+t)},offset:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(e,t){this.w=parseFloat(e),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(e){var t=!1;return null!=e&&(t=this.w==e.w&&this.h==e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(e){alert(e)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t)if(-1!=e[t].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(e){var t;e||(e="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language),e=e.split("-"),e[0]=e[0].toLowerCase(),"object"==typeof OpenLayers.Lang[e[0]]&&(t=e[0]);if(e[1]){var n=e[0]+"-"+e[1].toUpperCase();"object"==typeof OpenLayers.Lang[n]&&(t=n)}t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+e.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(e,t){var n=OpenLayers.Lang[OpenLayers.Lang.getCode()];return(n=n&&n[e])||(n=e),t&&
(n=OpenLayers.String.format(n,t)),n}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];"string"==typeof r&&(r=document.getElementById(r));if(1==arguments.length)return r;e.push(r)}return e},OpenLayers.Util.isElement=function(e){return!!e&&1===e.nodeType},OpenLayers.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},"undefined"==typeof window.$&&(window.$=OpenLayers.Util.getElement),OpenLayers.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]==t&&e.splice(n,1);return e},OpenLayers.Util.indexOf=function(e,t){if(typeof e.indexOf=="function")return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return n;return-1},OpenLayers.Util.modifyDOMElement=function(e,t,n,r,i,s,o,u){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),i&&(e.style.position=i),s&&(e.style.border=s),o&&(e.style.overflow=o),parseFloat(u)>=0&&parseFloat(u)<1?(e.style.filter="alpha(opacity="+u*100+")",e.style.opacity=u):parseFloat(u)==1&&(e.style.filter="",e.style.opacity="")},OpenLayers.Util.createDiv=function(e,t,n,r,i,s,o,u){var a=document.createElement("div");return r&&(a.style.backgroundImage="url("+r+")"),e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),i||(i="absolute"),OpenLayers.Util.modifyDOMElement(a,e,t,n,i,s,o,u),a},OpenLayers.Util.createImage=function(e,t,n,r,i,s,o,u){var a=document.createElement("img");return e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),i||(i="relative"),OpenLayers.Util.modifyDOMElement(a,e,t,n,i,s,null,o),u&&(a.style.display="none",t=function(){a.style.display="",OpenLayers.Event.stopObservingElement(a)},OpenLayers.Event.observe(a,"load",t),OpenLayers.Event.observe(a,"error",t)),a.style.alt=e,a.galleryImg="no",r&&(a.src=r),a},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(OpenLayers.Util.alphaHackNeeded==null){var e=navigator.appVersion.split("MSIE"),e=parseFloat(e[1]),t=!1;try{t=!!document.body.filters}catch(n){}OpenLayers.Util.alphaHackNeeded=t&&e>=5.5&&e<7}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(e,t,n,r,i,s,o,u,a){OpenLayers.Util.modifyDOMElement(e,t,n,r,s,null,null,a),t=e.childNodes[0],i&&(t.src=i),OpenLayers.Util.modifyDOMElement(t,e.id+"_innerImage",null,r,"relative",o),OpenLayers.Util.alphaHack()&&(e.style.display!="none"&&(e.style.display="inline-block"),u==null&&(u="scale"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t.src+"', sizingMethod='"+u+"')",parseFloat(e.style.opacity)>=0&&parseFloat(e.style.opacity)<1&&(e.style.filter=e.style.filter+(" alpha(opacity="+e.style.opacity*100+")")),t.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(e,t,n,r,i,s,o,u,a){var f=OpenLayers.Util.createDiv(),a=OpenLayers.Util.createImage(null,null,null,null,null,null,null,a);return a.className="olAlphaImg",f.appendChild(a),OpenLayers.Util.modifyAlphaImageDiv(f,e,t,n,r,i,s,o,u),f},OpenLayers.Util.upperCaseObject=function(e){var t={},n;for(n in e)t[n.toUpperCase()]=e[n];return t},OpenLayers.Util.applyDefaults=function(e,t){var e=e||{},n=typeof window.Event=="function"&&t instanceof window.Event,r;for(r in t)if(e[r]===void 0||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))e[r]=t[r];return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},OpenLayers.Util.getParameterString=function(e){var t=[],n;for(n in e){var r=e[n];if(r!=null&&typeof r!="function"){if(typeof r=="object"&&r.constructor==Array){for(var i=[],s,o=0,u=r.length;o<u;o++)s=r[o],i.push(encodeURIComponent(s===null||s===void 0?"":s));r=i.join(",")}else r=encodeURIComponent(r);t.push(encodeURIComponent(n)+"="+r)}}return t.join("&")},OpenLayers.Util.urlAppend=function(e,t){var n=e;if(t)var r=(e+" ").split(/[?&]/),n=n+(r.pop()===" "?t:r.length?"&"+t:"?"+t);return n},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(e){return OpenLayers.Util.getImagesLocation()+e},OpenLayers.Util.Try=function(){for(var e=null,t=0,n=arguments.length;t<n;t++){var r=arguments[t];try{e=r();break}catch(i){}}return e},OpenLayers.Util.getXmlNodeValue=function(e){var t=null;return OpenLayers.Util.Try(function(){t=e.text,t||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t},OpenLayers.Util.mouseLeft=function(e,t){for(var n=e.relatedTarget?e.relatedTarget:e.toElement;n!=t&&n!=null;)n=n.parentNode;return n!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(e,t){return t==null&&(t=OpenLayers.Util.DEFAULT_PRECISION),typeof e!="number"&&(e=parseFloat(e)),t===0?e:parseFloat(e.toPrecision(t))},OpenLayers.Util.rad=function(e){return e*Math.PI/180},OpenLayers.Util.deg=function(e){return e*180/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(e,t){for(var n=OpenLayers.Util.VincentyConstants,r=n.a,i=n.b,n=n.f,s=OpenLayers.Util.rad(t.lon-e.lon),o=Math.atan((1-n)*Math.tan(OpenLayers.Util.rad(e.lat))),u=Math.atan((1-n)*Math.tan(OpenLayers.Util.rad(t.lat))),a=Math.sin(o),o=Math.cos(o),f=Math.sin(u),u=Math.cos(u),l=s,c=2*Math.PI,h=20;Math.abs(l-c)>1e-12&&--h>0;){var p=Math.sin(l),d=Math.cos(l),v=Math.sqrt(u*p*u*p+(o*f-a*u*d)*(o*f-a*u*d));if(v==0)return 0;var d=a*f+o*u*d,m=Math.atan2(v,d),g=Math.asin(o*u*p/v),y=Math.cos(g)*Math.cos(g),p=d-2*a*f/y,b=n/16*y*(4+n*(4-3*y)),c=l,l=s+(1-b)*n*Math.sin(g)*(m+b*v*(p+b*d*(-1+2*p*p)))}return h==0?NaN:(r=y*(r*r-i*i)/(i*i),n=r/1024*(256+r*(-128+r*(74-47*r))),(i*(1+r/16384*(4096+r*(-768+r*(320-175*r))))*(m-n*v*(p+n/4*(d*(-1+2*p*p)-n/6*p*(-3+4*v*v)*(-3+4*p*p))))).toFixed(3)/1e3)},OpenLayers.Util.destinationVincenty=function(e,t,n){for(var r=OpenLayers.Util,i=r.VincentyConstants,s=i.a,o=i.b,u=i.f,i=e.lon,e=e.lat,a=r.rad(t),t=Math.sin(a),a=Math.cos(a),e=(1-u)*Math.tan(r.rad(e)),f=1/Math.sqrt(1+e*e),l=e*f,c=Math.atan2(e,a),e=f*t,h=1-e*e,s=h*(s*s-o*o)/(o*o),p=1+s/16384*(4096+s*(-768+s*(320-175*s))),d=s/1024*(256+s*(-128+s*(74-47*s))),s=n/(o*p),v=2*Math.PI;Math.abs(s-v)>1e-12;)var m=Math.cos(2*c+s),g=Math.sin(s),y=Math.cos(s),b=d*g*(m+d/4*(y*(-1+2*m*m)-d/6*m*(-3+4*g*g)*(-3+4*m*m))),v=s,s=n/(o*p)+b;return n=l*g-f*y*a,o=Math.atan2(l*y+f*g*a,(1-u)*Math.sqrt(e*e+n*n)),t=Math.atan2(g*t,f*y-l*g*a),a=u/16*h*(4+u*(4-3*h)),m=t-(1-a)*u*e*(s+a*g*(m+a*y*(-1+2*m*m))),Math.atan2(e,-n),new OpenLayers.LonLat(i+r.deg(m),r.deg(o))},OpenLayers.Util.getParameters=function(e){var e=e===null||e===void 0?window.location.href:e,t="";if(OpenLayers.String.contains(e,"?"))var t=e.indexOf("?")+1,n=OpenLayers.String.contains(e,"#")?e.indexOf("#"):e.length,t=e.substring(t,n);for(var e={},t=t.split(/[&;]/),n=0,r=t.length;n<r;++n){var i=t[n].split("=");if(i[0]){var s=i[0];try{s=decodeURIComponent(s)}catch(o){s=unescape(s)}i=(i[1]||"").replace(/\+/g," ");try{i=decodeURIComponent(i)}catch(u){i=unescape(i)}i=i.split(","),i.length==1&&(i=i[0]),e[s]=i}}return e},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(e){return e==null&&(e="id_"),OpenLayers.Util.lastSeqID=OpenLayers.Util.lastSeqID+1,e+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(e){return e>1?1/e:e},OpenLayers.Util.getResolutionFromScale=function(e,t){var n;return e&&(t==null&&(t="degrees"),n=1/(OpenLayers.Util.normalizeScale(e)*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)),n},OpenLayers.Util.getScaleFromResolution=function(e,t){return t==null&&(t="degrees"),e*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH},OpenLayers.Util.pagePosition=function(e){var t=[0,0],n=OpenLayers.Util.getViewportElement();if(!e||e==window||e==n)return t;var r=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&OpenLayers.Element.getStyle(e,"position")=="absolute"&&(e.style.top==""||e.style.left==""),i=null;if(e.getBoundingClientRect)e=e.getBoundingClientRect(),i=n.scrollTop,t[0]=e.left+n.scrollLeft,t[1]=e.top+i;else if(document.getBoxObjectFor&&!r)e=document.getBoxObjectFor(e),n=document.getBoxObjectFor(n),t[0]=e.screenX-n.screenX,t[1]=e.screenY-n.screenY;else{t[0]=e.offsetLeft,t[1]=e.offsetTop,i=e.offsetParent;if(i!=e)for(;i;)t[0]=t[0]+i.offsetLeft,t[1]=t[1]+i.offsetTop,i=i.offsetParent;n=OpenLayers.BROWSER_NAME;if(n=="opera"||n=="safari"&&OpenLayers.Element.getStyle(e,"position")=="absolute")t[1]=t[1]-document.body.offsetTop;for(i=e.offsetParent;i&&i!=document.body;){t[0]=t[0]-i.scrollLeft;if(n!="opera"||i.tagName!="TR")t[1]=t[1]-i.scrollTop;i=i.offsetParent}}return t},OpenLayers.Util.getViewportElement=function(){var e=arguments.callee.viewportElement;return e==void 0&&(e=OpenLayers.BROWSER_NAME=="msie"&&document.compatMode!="CSS1Compat"?document.body:document.documentElement,arguments.callee.viewportElement=e),e},OpenLayers.Util.isEquivalentUrl=function(e,t,n){n=n||{},OpenLayers.Util.applyDefaults(n,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0});var e=OpenLayers.Util.createUrlObject(e,n),t=OpenLayers.Util.createUrlObject(t,n),r;for(r in e)if(r!=="args"&&e[r]!=t[r])return!1;for(r in e.args){if(e.args[r]!=t.args[r])return!1;delete t.args[r]}for(r in t.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(e,t){t=t||{};if(!/^\w+:\/\//.test(e)){var n=window.location,r=n.port?":"+n.port:"",r=n.protocol+"//"+n.host.split(":").shift()+r;e.indexOf("/")===0?e=r+e:(n=n.pathname.split("/"),n.pop(),e=r+n.join("/")+"/"+e)}t.ignoreCase&&(e=e.toLowerCase()),n=document.createElement("a"),n.href=e,r={},r.host=n.host.split(":").shift(),r.protocol=n.protocol,r.port=t.ignorePort80?n.port=="80"||n.port=="0"?"":n.port:n.port==""||n.port=="0"?"80":n.port,r.hash=t.ignoreHash||n.hash==="#"?"":n.hash;var i=n.search;return i||(i=e.indexOf("?"),i=i!=-1?e.substr(i):""),r.args=OpenLayers.Util.getParameters(i),r.pathname=n.pathname.charAt(0)=="/"?n.pathname:"/"+n.pathname,r},OpenLayers.Util.removeTail=function(e){var t=null,t=e.indexOf("?"),n=e.indexOf("#");return t=t==-1?n!=-1?e.substr(0,n):e:n!=-1?e.substr(0,Math.min(t,n)):e.substr(0,t)},OpenLayers.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("webkit")==-1&&e.indexOf("gecko")!=-1}(),OpenLayers.CANVAS_SUPPORTED=function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")}(),OpenLayers.BROWSER_NAME=function(){var e="",t=navigator.userAgent.toLowerCase();return t.indexOf("opera")!=-1?e="opera":t.indexOf("msie")!=-1?e="msie":t.indexOf("safari")!=-1?e="safari":t.indexOf("mozilla")!=-1&&(e=t.indexOf("firefox")!=-1?"firefox":"mozilla"),e}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(e,t,n){var r,i,s=document.createElement("div");s.style.visibility="hidden";var o=n&&n.containerElement?n.containerElement:document.body;t&&(t.w?(r=t.w,s.style.width=r+"px"):t.h&&(i=t.h,s.style.height=i+"px")),n&&n.displayClass&&(s.className=n.displayClass),t=document.createElement("div"),t.innerHTML=e,t.style.overflow="visible";if(t.childNodes){e=0;for(n=t.childNodes.length;e<n;e++)t.childNodes[e].style&&(t.childNodes[e].style.overflow="visible")}s.appendChild(t),o.appendChild(s),e=!1;for(n=s.parentNode;n&&n.tagName.toLowerCase()!="body";){var u=OpenLayers.Element.getStyle(n,"position");if(u=="absolute"){e=!0;break}if(u&&u!="static")break;n=n.parentNode}return e||(s.style.position="absolute"),r||(r=parseInt(t.scrollWidth),s.style.width=r+"px"),i||(i=parseInt(t.scrollHeight)),s.removeChild(t),o.removeChild(s),new OpenLayers.Size(r,i)},OpenLayers.Util.getScrollbarWidth=function(){var e=OpenLayers.Util._scrollbarWidth;if(e==null){var t=null,n=null,t=e=0,t=document.createElement("div");t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",n=document.createElement("div"),n.style.width="100%",n.style.height="200px",t.appendChild(n),document.body.appendChild(t),e=n.offsetWidth,t.style.overflow="scroll",t=n.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=e-t,e=OpenLayers.Util._scrollbarWidth}return e},OpenLayers.Util.getFormattedLonLat=function(e,t,n){n||(n="dms");var e=(e+540)%360-180,r=Math.abs(e),i=Math.floor(r),s=r=(r-i)/(1/60),r=Math.floor(r),s=Math.round((s-r)/(1/60)*10),s=s/10;return s>=60&&(s-=60,r+=1,r>=60&&(r-=60,i+=1)),i<10&&(i="0"+i),i+="°",n.indexOf("dm")>=0&&(r<10&&(r="0"+r),i+=r+"'",n.indexOf("dms")>=0&&(s<10&&(s="0"+s),i+=s+'"')),i=t=="lon"?i+(e<0?OpenLayers.i18n("W"):OpenLayers.i18n("E")):i+(e<0?OpenLayers.i18n("S"):OpenLayers.i18n("N"))},OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e},destroy:function(){},read:function(){throw Error("Read not implemented.")},write:function(){throw Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.CSWGetRecords=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetRecords.DEFAULTS),t=OpenLayers.Format.CSWGetRecords["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSWGetRecords version: "+e.version;return new t(e)},OpenLayers.Format.CSWGetRecords.DEFAULTS={version:"2.0.2"},OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handler:null,eventListeners:null,events:null,initialize:function(e){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null);if(this.handlers){for(var e in this.handlers)this.handlers.hasOwnProperty(e)&&"function"==typeof this.handlers[e].destroy&&this.handlers[e].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(e){this.map=e,this.handler&&this.handler.setMap(e)},draw:function(e){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title)&&(this.div.title=this.title),null!=e&&(this.position=e.clone()),this.moveTo(this.position),this.div},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},activate:function(){return this.active?!1:(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return this.active?(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0):!1},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1==e.touches.length},isMultiTouch:function(e){return e.touches&&1<e.touches.length},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},isRightClick:function(e){return e.which&&3==e.which||e.button&&2==e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=OpenLayers.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){e=OpenLayers.Util.getElement(e),r=r||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent)&&(t="keydown"),this.observers||(this.observers={});if(!e._eventCacheID){var i="eventCacheID_";e.id&&(i=e.id+"_"+i),e._eventCacheID=OpenLayers.Util.createUniqueID(i)}i=e._eventCacheID,this.observers[i]||(this.observers[i]=[]),this.observers[i].push({element:e,name:t,observer:n,useCapture:r}),e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},stopObservingElement:function(e){e=OpenLayers.Util.getElement(e)._eventCacheID,this._removeElementObservers(OpenLayers.Event.observers[e])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;0<=t;t--){var n=e[t];OpenLayers.Event.stopObserving.apply(this,[n.element,n.name,n.observer,n.useCapture])}},stopObserving:function(e,t,n,r){var r=r||!1,e=OpenLayers.Util.getElement(e),i=e._eventCacheID;"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown");var s=!1,o=OpenLayers.Event.observers[i];if(o)for(var u=0;!s&&u<o.length;){var a=o[u];if(a.name==t&&a.observer==n&&a.useCapture==r){o.splice(u,1),0==o.length&&delete OpenLayers.Event.observers[i],s=!0;break}u++}return s&&(e.removeEventListener?e.removeEventListener(t,n,r):e&&e.detachEvent&&e.detachEvent("on"+t,n)),s},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var e in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[e]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(e,t,n,r,i){OpenLayers.Util.extend(this,i),this.object=e,this.fallThrough=r,this.listeners={},this.extensions={},this.extensionCount={},null!=t&&this.attachToElement(t)},destroy:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(){},attachToElement:function(e){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++)OpenLayers.Event.observe(e,this.BROWSER_EVENTS[t],this.eventHandler);OpenLayers.Event.observe(e,"dragstart",OpenLayers.Event.stop)},on:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])},register:function(e,t,n,r){e in OpenLayers.Events&&!this.extensions[e]&&(this.extensions[e]=new OpenLayers.Events[e](this));if(null!=n){null==t&&(t=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0),t={obj:t,func:n},r?(i.splice(this.extensionCount[e],0,t),"object"==typeof r&&r.extension&&this.extensionCount[e]++):i.push(t)}},registerPriority:function(e,t,n){this.register(e,t,n,!0)},un:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])},unregister:function(e,t,n){null==t&&(t=this.object),e=this.listeners[e];if(null!=e)for(var r=0,i=e.length;r<i;r++)if(e[r].obj==t&&e[r].func==n){e.splice(r,1);break}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},triggerEvent:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var n=n.slice(),r,i=0,s=n.length;i<s&&(r=n[i],r=r.func.apply(r.obj,[t]),void 0==r||0!=r);i++);return this.fallThrough||OpenLayers.Event.stop(t,!0),r}},handleBrowserEvent:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){if((n=e.touches)&&n[0]){for(var r=0,i=0,s=n.length,o,u=0;u<s;++u)o=n[u],r+=o.clientX,i+=o.clientY;e.clientX=r/s,e.clientY=i/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)},getMousePosition:function(e){this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache();if(!this.element.scrolls){var t=OpenLayers.Util.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(e){this.target=e;for(e=this.events.length-1;0<=e;--e)this.target.register(this.events[e],this,this.buttonClick,{extension:!0})},destroy:function(){for(var e=this.events.length-1;0<=e;--e)this.target.unregister(this.events[e],this,this.buttonClick);delete this.target},getPressedButton:function(e){var t=3,n;do{if(OpenLayers.Element.hasClass(e,"olButton")){n=e;break}e=e.parentNode}while(0<--t&&e);return n},buttonClick:function(e){var t=!0,n=OpenLayers.Event.element(e);if(n&&(OpenLayers.Event.isLeftClick(e)||!~e.type.indexOf("mouse")))if(n=this.getPressedButton(n)){if("keydown"===e.type)switch(e.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:n}),OpenLayers.Event.stop(e),t=!1}else this.startEvt&&(this.completeRegEx.test(e.type)&&(t=OpenLayers.Util.pagePosition(n),this.target.triggerEvent("buttonclick",{buttonElement:n,buttonXY:{x:this.startEvt.clientX-t[0],y:this.startEvt.clientY-t[1]}})),this.cancelRegEx.test(e.type)&&delete this.startEvt,OpenLayers.Event.stop(e),t=!1);this.startRegEx.test(e.type)&&(this.startEvt=e,OpenLayers.Event.stop(e),t=!1)}else delete this.startEvt;return t}}),OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:!1,handlers:null,resolutionFactor:1,maximized:!1,initialize:function(e){this.layers=[],this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,[e])},destroy:function(){this.mapDiv&&(this.handlers.click&&this.handlers.click.destroy(),this.handlers.drag&&this.handlers.drag.destroy(),this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle),this.extentRectangle=null,this.rectEvents&&(this.rectEvents.destroy(),this.rectEvents=null),this.ovmap&&(this.ovmap.destroy(),this.ovmap=null),this.element.removeChild(this.mapDiv),this.mapDiv=null,this.div.removeChild(this.element),this.element=null,this.maximizeDiv&&(this.div.removeChild(this.maximizeDiv),this.maximizeDiv=null),this.minimizeDiv&&(this.div.removeChild(this.minimizeDiv),this.minimizeDiv=null),this.map.events.un({buttonclick:this.onButtonClick,moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments))},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(0===this.layers.length){if(!this.map.baseLayer)return this.map.events.register("changebaselayer",this,this.baseLayerDraw),this.div;this.layers=[this.map.baseLayer.clone()]}this.element=document.createElement("div"),this.element.className=this.displayClass+"Element",this.element.style.display="none",this.mapDiv=document.createElement("div"),this.mapDiv.style.width=this.size.w+"px",this.mapDiv.style.height=this.size.h+"px",this.mapDiv.style.position="relative",this.mapDiv.style.overflow="hidden",this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap"),this.extentRectangle=document.createElement("div"),this.extentRectangle.style.position="absolute",this.extentRectangle.style.zIndex=1e3,this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.element.appendChild(this.mapDiv),this.div.appendChild(this.element);if(this.outsideViewport)this.element.style.display="";else{this.div.className+=" "+this.displayClass+"Container";var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,e,"absolute"),this.maximizeDiv.style.display="none",this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton",this.div.appendChild(this.maximizeDiv),e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,e,"absolute"),this.minimizeDiv.style.display="none",this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton",this.div.appendChild(this.minimizeDiv),this.minimizeControl()}return this.map.getExtent()&&this.update(),this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this}),this.maximized&&this.maximizeControl(),this.div},baseLayerDraw:function(){this.draw(),this.map.events.unregister("changebaselayer",this,this.baseLayerDraw)},rectDrag:function(e){var t=this.handlers.drag.last.x-e.x,n=this.handlers.drag.last.y-e.y;if(0!=t||0!=n){var r=this.rectPxBounds.top,i=this.rectPxBounds.left,e=Math.abs(this.rectPxBounds.getHeight()),s=this.rectPxBounds.getWidth(),n=Math.max(0,r-n),n=Math.min(n,this.ovmap.size.h-this.hComp-e),t=Math.max(0,i-t),t=Math.min(t,this.ovmap.size.w-this.wComp-s);this.setRectPxBounds(new OpenLayers.Bounds(t,n+e,t+s,n))}},mapDivClick:function(e){var t=this.rectPxBounds.getCenterPixel(),n=e.xy.x-t.x,r=e.xy.y-t.y,i=this.rectPxBounds.top,s=this.rectPxBounds.left,e=Math.abs(this.rectPxBounds.getHeight()),t=this.rectPxBounds.getWidth(),r=Math.max(0,i+r),r=Math.min(r,this.ovmap.size.h-e),n=Math.max(0,s+n),n=Math.min(n,this.ovmap.size.w-t);this.setRectPxBounds(new OpenLayers.Bounds(n,r+e,n+t,r)),this.updateMapToRect()},onButtonClick:function(e){e.buttonElement===this.minimizeDiv?this.minimizeControl():e.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(e){this.element.style.display="",this.showToggle(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.element.style.display="none",this.showToggle(!0),null!=e&&OpenLayers.Event.stop(e)},showToggle:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":""},update:function(){null==this.ovmap&&this.createMap(),(this.autoPan||!this.isSuitableOverview())&&this.updateOverview(),this.updateRectToMap()},isSuitableOverview:function(){var e=this.map.getExtent(),t=this.map.maxExtent,e=new OpenLayers.Bounds(Math.max(e.left,t.left),Math.max(e.bottom,t.bottom),Math.min(e.right,t.right),Math.min(e.top,t.top));return this.ovmap.getProjection()!=this.map.getProjection()&&(e=e.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())),t=this.ovmap.getResolution()/this.map.getResolution(),t>this.minRatio&&t<=this.maxRatio&&this.ovmap.getExtent().containsBounds(e)},updateOverview:function(){var e=this.map.getResolution(),t=this.ovmap.getResolution(),n=t/e;n>this.maxRatio?t=this.minRatio*e:n<=this.minRatio&&(t=this.maxRatio*e),this.ovmap.getProjection()!=this.map.getProjection()?(e=this.map.center.clone(),e.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())):e=this.map.center,this.ovmap.setCenter(e,this.ovmap.getZoomForResolution(t*this.resolutionFactor)),this.updateRectToMap()},createMap:function(){var e=OpenLayers.Util.extend({controls:[],maxResolution:"auto"
,fallThrough:!1},this.mapOptions);this.ovmap=new OpenLayers.Map(this.mapDiv,e),this.ovmap.viewPortDiv.appendChild(this.extentRectangle),OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy),this.ovmap.addLayers(this.layers),this.ovmap.zoomToMaxExtent(),this.wComp=(this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")))?this.wComp:2,this.hComp=(this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width")))?this.hComp:2,this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap}),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:!0,"double":!1,stopSingle:!0,stopDouble:!0,pixelTolerance:1,map:this.ovmap}),this.handlers.click.activate(),this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,!0),this.rectEvents.register("mouseover",this,function(){!this.handlers.drag.active&&!this.map.dragging&&this.handlers.drag.activate()}),this.rectEvents.register("mouseout",this,function(){this.handlers.drag.dragging||this.handlers.drag.deactivate()});if(this.ovmap.getProjection()!=this.map.getProjection()){var e=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,t=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=e&&t?OpenLayers.INCHES_PER_UNIT[e]/OpenLayers.INCHES_PER_UNIT[t]:1}},updateRectToMap:function(){var e=this.getRectBoundsFromMapBounds(this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent());e&&this.setRectPxBounds(e)},updateMapToRect:function(){var e=this.getMapBoundsFromRectBounds(this.rectPxBounds);this.ovmap.getProjection()!=this.map.getProjection()&&(e=e.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject())),this.map.panTo(e.getCenterLonLat())},setRectPxBounds:function(e){var t=Math.max(e.top,0),n=Math.max(e.left,0),r=Math.min(e.top+Math.abs(e.getHeight()),this.ovmap.size.h-this.hComp),e=Math.min(e.left+e.getWidth(),this.ovmap.size.w-this.wComp),i=Math.max(e-n,0),s=Math.max(r-t,0);i<this.minRectSize||s<this.minRectSize?(this.extentRectangle.className=this.displayClass+this.minRectDisplayClass,i=n+i/2-this.minRectSize/2,this.extentRectangle.style.top=Math.round(t+s/2-this.minRectSize/2)+"px",this.extentRectangle.style.left=Math.round(i)+"px",this.extentRectangle.style.height=this.minRectSize+"px",this.extentRectangle.style.width=this.minRectSize+"px"):(this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.extentRectangle.style.top=Math.round(t)+"px",this.extentRectangle.style.left=Math.round(n)+"px",this.extentRectangle.style.height=Math.round(s)+"px",this.extentRectangle.style.width=Math.round(i)+"px"),this.rectPxBounds=new OpenLayers.Bounds(Math.round(n),Math.round(r),Math.round(e),Math.round(t))},getRectBoundsFromMapBounds:function(e){var t=this.getOverviewPxFromLonLat({lon:e.left,lat:e.bottom}),e=this.getOverviewPxFromLonLat({lon:e.right,lat:e.top}),n=null;return t&&e&&(n=new OpenLayers.Bounds(t.x,t.y,e.x,e.y)),n},getMapBoundsFromRectBounds:function(e){var t=this.getLonLatFromOverviewPx({x:e.left,y:e.bottom}),e=this.getLonLatFromOverviewPx({x:e.right,y:e.top});return new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)},getLonLatFromOverviewPx:function(e){var t=this.ovmap.size,n=this.ovmap.getResolution(),r=this.ovmap.getExtent().getCenterLonLat();return{lon:r.lon+(e.x-t.w/2)*n,lat:r.lat-(e.y-t.h/2)*n}},getOverviewPxFromLonLat:function(e){var t=this.ovmap.getResolution(),n=this.ovmap.getExtent();if(n)return{x:Math.round(1/t*(e.lon-n.left)),y:Math.round(1/t*(n.top-e.lat))}},CLASS_NAME:"OpenLayers.Control.OverviewMap"}),OpenLayers.Animation=function(e){var t=!(!e.requestAnimationFrame&&!e.webkitRequestAnimationFrame&&!e.mozRequestAnimationFrame&&!e.oRequestAnimationFrame&&!e.msRequestAnimationFrame),n=function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,16)};return function(n,r){t.apply(e,[n,r])}}(),r=0,i={};return{isNative:t,requestFrame:n,start:function(e,t,s){var t=0<t?t:Number.POSITIVE_INFINITY,o=++r,u=+(new Date);return i[o]=function(){i[o]&&+(new Date)-u<=t?(e(),i[o]&&n(i[o],s)):delete i[o]},n(i[o],s),o},stop:function(e){delete i[e]}}}(window),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,animationId:null,playing:!1,initialize:function(e){this.easing=e?e:OpenLayers.Easing.Expo.easeOut},start:function(e,t,n,r){this.playing=!0,this.begin=e,this.finish=t,this.duration=n,this.callbacks=r.callbacks,this.time=0,OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var e={},t;for(t in this.begin){var n=this.begin[t],r=this.finish[t];if(null==n||null==r||isNaN(n)||isNaN(r))throw new TypeError("invalid value for Tween");e[t]=this.easing.apply(this,[this.time,n,r-n,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&this.callbacks.eachStep.call(this,e),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(e,t,n,r){return n*e/r+t},easeOut:function(e,t,n,r){return n*e/r+t},easeInOut:function(e,t,n,r){return n*e/r+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(e,t,n,r){return 0==e?t:n*Math.pow(2,10*(e/r-1))+t},easeOut:function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},easeInOut:function(e,t,n,r){return 0==e?t:e==r?t+n:1>(e/=r/2)?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOut:function(e,t,n,r){return 1>(e/=r/2)?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.projCode=e,window.Proj4js&&(this.proj=new Proj4js.Proj(e))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(e){var t=!1;return e&&(e instanceof OpenLayers.Projection||(e=new OpenLayers.Projection(e)),window.Proj4js&&this.proj.defData&&e.proj.defData?t=this.proj.defData.replace(this.titleRegEx,"")==e.proj.defData.replace(this.titleRegEx,""):e.getCode&&(t=this.getCode(),e=e.getCode(),t=t==e||!!OpenLayers.Projection.transforms[t]&&OpenLayers.Projection.transforms[t][e]===OpenLayers.Projection.nullTransform)),t},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34]}},OpenLayers.Projection.addTransform=function(e,t,n){if(n===OpenLayers.Projection.nullTransform){var r=OpenLayers.Projection.defaults[e];r&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=r)}OpenLayers.Projection.transforms[e]||(OpenLayers.Projection.transforms[e]={}),OpenLayers.Projection.transforms[e][t]=n},OpenLayers.Projection.transform=function(e,t,n){if(t&&n)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),n instanceof OpenLayers.Projection||(n=new OpenLayers.Projection(n)),t.proj&&n.proj)e=Proj4js.transform(t.proj,n.proj,e);else{var t=t.getCode(),n=n.getCode(),r=OpenLayers.Projection.transforms;r[t]&&r[t][n]&&r[t][n](e)}return e},OpenLayers.Projection.nullTransform=function(e){return e},function(){function e(e){return e.x=180*e.x/r,e.y=180/Math.PI*(2*Math.atan(Math.exp(e.y/r*Math.PI))-Math.PI/2),e}function t(e){return e.x=e.x*r/180,e.y=Math.log(Math.tan((90+e.y)*Math.PI/360))/Math.PI*r,e}function n(n,r){var i=OpenLayers.Projection.addTransform,s=OpenLayers.Projection.nullTransform,o,u,f,l,c;o=0;for(u=r.length;o<u;++o){f=r[o],i(n,f,t),i(f,n,e);for(c=o+1;c<u;++c)l=r[c],i(f,l,s),i(l,f,s)}}var r=20037508.34,i=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],s=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"],o;for(o=i.length-1;0<=o;--o)n(i[o],s);for(o=s.length-1;0<=o;--o)n(s[o],i)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!0,panTween:null,eventListeners:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,paddingForPopups:null,minPx:null,maxPx:null,initialize:function(e,t){1===arguments.length&&"object"==typeof e&&(e=(t=e)&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"/assets/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t),OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]),this.maxExtent&&!(this.maxExtent instanceof OpenLayers.Bounds)&&(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),this.minExtent&&!(this.minExtent instanceof OpenLayers.Bounds)&&(this.minExtent=new OpenLayers.Bounds(this.minExtent)),this.restrictedExtent&&!(this.restrictedExtent instanceof OpenLayers.Bounds)&&(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),this.center&&!(this.center instanceof OpenLayers.LonLat)&&(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(e),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap");var n=this.id+"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(n,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),n=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(n),this.layerContainerDiv.style.width="100px",this.layerContainerDiv.style.height="100px",this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),9>parseFloat(navigator.appVersion.split("MSIE")[1])?this.events.register("resize",this,this.updateSize):(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy));if(this.theme){for(var n=!0,r=document.getElementsByTagName("link"),i=0,s=r.length;i<s;++i)if(OpenLayers.Util.isEquivalentUrl(r.item(i).href,this.theme)){n=!1;break}n&&(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(n))}null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution))),i=0;for(s=this.controls.length;i<s;i++)this.addControlToMap(this.controls[i]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom))},getViewport:function(){return this.viewPortDiv},render:function(e){this.div=OpenLayers.Util.getElement(e),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;this.panTween&&(this.panTween.stop(),this.panTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy?OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy):this.events.unregister("resize",this,this.updateSize),this.paddingForPopups=null;if(null!=this.controls){for(var e=this.controls.length-1;0<=e;--e)this.controls[e].destroy();this.controls=null}if(null!=this.layers){for(e=this.layers.length-1;0<=e;--e)this.layers[e].destroy(!1);this.layers=null}this.viewPortDiv&&this.div.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.options=this.events=null},setOptions:function(e){var t=this.minPx&&e.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,e),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(e,t,n){var r="function"==typeof n.test;return OpenLayers.Array.filter(this[e],function(e){return e[t]==n||r&&n.test(e[t])})},getLayersBy:function(e,t){return this.getBy("layers",e,t)},getLayersByName:function(e){return this.getLayersBy("name",e)},getLayersByClass:function(e){return this.getLayersBy("CLASS_NAME",e)},getControlsBy:function(e,t){return this.getBy("controls",e,t)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},getLayer:function(e){for(var t=null,n=0,r=this.layers.length;n<r;n++){var i=this.layers[n];if(i.id==e){t=i;break}}return t},setLayerZIndex:function(e,t){e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var e=0,t=this.layers.length;e<t;e++)this.setLayerZIndex(this.layers[e],e)},addLayer:function(e){for(var t=0,n=this.layers.length;t<n;t++)if(this.layers[t]==e)return!1;return!1===this.events.triggerEvent("preaddlayer",{layer:e})?!1:(this.allOverlays&&(e.isBaseLayer=!1),e.div.className="olLayerDiv",e.div.style.overflow="",this.setLayerZIndex(e,this.layers.length),e.isFixed?this.viewPortDiv.appendChild(e.div):this.layerContainerDiv.appendChild(e.div),this.layers.push(e),e.setMap(this),e.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(e):e.setVisibility(!1):e.redraw(),this.events.triggerEvent("addlayer",{layer:e}),e.events.triggerEvent("added",{map:this,layer:e}),e.afterAdd(),!0)},addLayers:function(e){for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},removeLayer:function(e,t){if(!1!==this.events.triggerEvent("preremovelayer",{layer:e})){null==t&&(t=!0),e.isFixed?this.viewPortDiv.removeChild(e.div):this.layerContainerDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.layers,e),e.removeMap(this),e.map=null;if(this.baseLayer==e&&(this.baseLayer=null,t))for(var n=0,r=this.layers.length;n<r;n++){var i=this.layers[n];if(i.isBaseLayer||this.allOverlays){this.setBaseLayer(i);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:e}),e.events.triggerEvent("removed",{map:this,layer:e})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(e){return OpenLayers.Util.indexOf(this.layers,e)},setLayerIndex:function(e,t){var n=this.getLayerIndex(e);0>t?t=0:t>this.layers.length&&(t=this.layers.length);if(n!=t){this.layers.splice(n,1),this.layers.splice(t,0,e);for(var n=0,r=this.layers.length;n<r;n++)this.setLayerZIndex(this.layers[n],n);this.events.triggerEvent("changelayer",{layer:e,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(e):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(e,t){var n=this.getLayerIndex(e)+t;this.setLayerIndex(e,n)},setBaseLayer:function(e){if(e!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,e)){var t=this.getCachedCenter(),n=OpenLayers.Util.getResolutionFromScale(this.getScale(),e.units);null!=this.baseLayer&&!this.allOverlays&&this.baseLayer.setVisibility(!1),this.baseLayer=e;if(!this.allOverlays||this.baseLayer.visibility)this.baseLayer.setVisibility(!0),!1===this.baseLayer.inRange&&this.baseLayer.redraw();null!=t&&(e=this.getZoomForResolution(n||this.resolution,!0),this.setCenter(t,e,!1,!0)),this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(e,t){this.controls.push(e),this.addControlToMap(e,t)},addControls:function(e,t){for(var n=1===arguments.length?[]:t,r=0,i=e.length;r<i;r++)this.addControl(e[r],n[r]?n[r]:null)},addControlToMap:function(e,t){e.outsideViewport=null!=e.div,this.displayProjection&&!e.displayProjection&&(e.displayProjection=this.displayProjection),e.setMap(this);var n=e.draw(t);n&&!e.outsideViewport&&(n.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(n)),e.autoActivate&&e.activate()},getControl:function(e){for(var t=null,n=0,r=this.controls.length;n<r;n++){var i=this.controls[n];if(i.id==e){t=i;break}}return t},removeControl:function(e){e&&e==this.getControl(e.id)&&(e.div&&e.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.controls,e))},addPopup:function(e,t){if(t)for(var n=this.popups.length-1;0<=n;--n)this.removePopup(this.popups[n]);e.map=this,this.popups.push(e);if(n=e.draw())n.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(n)},removePopup:function(e){OpenLayers.Util.removeItem(this.popups,e);if(e.div)try{this.layerContainerDiv.removeChild(e.div)}catch(t){}e.map=null},getSize:function(){var e=null;return null!=this.size&&(e=this.size.clone()),e},updateSize:function(){var e=this.getCurrentSize();if(e&&!isNaN(e.h)&&!isNaN(e.w)){this.events.clearMouseCache();var t=this.getSize();null==t&&(this.size=t=e);if(!e.equals(t)){this.size=e,e=0;for(t=this.layers.length;e<t;e++)this.layers[e].onMapResize();e=this.getCachedCenter(),null!=this.baseLayer&&null!=e&&(t=this.getZoom(),this.zoom=null,this.setCenter(e,t))}}},getCurrentSize:function(){var e=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);if(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))e.w=this.div.offsetWidth,e.h=this.div.offsetHeight;if(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))e.w=parseInt(this.div.style.width),e.h=parseInt(this.div.style.height);return e},calculateBounds:function(e,t){var n=null;null==e&&(e=this.getCachedCenter()),null==t&&(t=this.getResolution());if(null!=e&&null!=t)var n=this.size.w*t/2,r=this.size.h*t/2,n=new OpenLayers.Bounds(e.lon-n,e.lat-r,e.lon+n,e.lat+r);return n},getCenter:function(){var e=null,t=this.getCachedCenter();return t&&(e=t.clone()),e},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(e,t,n){n=OpenLayers.Util.applyDefaults(n,{animate:!0,dragging:!1});if(n.dragging)(0!=e||0!=t)&&this.moveByPx(e,t);else{var r=this.getViewPortPxFromLonLat(this.getCachedCenter()),e=r.add(e,t);if(this.dragging||!e.equals(r))r=this.getLonLatFromViewPortPx(e),n.animate?this.panTo(r):(this.moveTo(r),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend")))}},panTo:function(e){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(e)){this.panTween||(this.panTween=new OpenLayers.Tween(this.panMethod));var t=this.getCachedCenter();if(!e.equals(t)){var t=this.getPixelFromLonLat(t),n=this.getPixelFromLonLat(e),r=0,i=0;this.panTween.start({x:0,y:0},{x:n.x-t.x,y:n.y-t.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(e){this.moveByPx(e.x-r,e.y-i),r=Math.round(e.x),i=Math.round(e.y)},this),done:OpenLayers.Function.bind(function(){this.moveTo(e),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(e)},setCenter:function(e,t,n,r){this.panTween&&this.panTween.stop(),this.moveTo(e,t,{dragging:n,forceZoomChange:r})},moveByPx:function(e,t){var n=this.size.w/2,r=this.size.h/2,i=n+e,s=r+t,o=this.baseLayer.wrapDateLine,u=0,a=0;this.restrictedExtent&&(u=n,a=r,o=!1),e=o||i<=this.maxPx.x-u&&i>=this.minPx.x+u?Math.round(e):0,t=s<=this.maxPx.y-a&&s>=this.minPx.y+a?Math.round(t):0;if(e||t){this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,e&&(this.layerContainerDiv.style.left=parseInt(this.layerContainerDiv.style.left)-e+"px",this.minPx.x-=e,this.maxPx.x-=e),t&&(this.layerContainerDiv.style.top=parseInt(this.layerContainerDiv.style.top)-t+"px",this.minPx.y-=t,this.maxPx.y-=t),r=0;for(i=this.layers.length;r<i;++r)if(n=this.layers[r],n.visibility&&(n===this.baseLayer||n.inRange))n.moveByPx(e,t),n.events.triggerEvent("move");this.events.triggerEvent("move")}},adjustZoom:function(e){var t=this.baseLayer.resolutions,n=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(e)>n)for(var r=e|0,i=t.length;r<i;++r)if(t[r]<=n){e=r;break}return e},moveTo:function(e,t,n){null!=e&&!(e instanceof OpenLayers.LonLat)&&(e=new OpenLayers.LonLat(e)),n||(n={}),null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t)));if(this.baseLayer.wrapDateLine){var r=t,t=this.adjustZoom(t);t!==r&&(e=this.getCenter())}var r=n.dragging||this.dragging,i=n.forceZoomChange;!this.getCachedCenter()&&!this.isValidLonLat(e)&&(e=this.maxExtent.getCenterLonLat(),this.center=e.clone());if(null!=this.restrictedExtent){null==e&&(e=this.center),null==t&&(t=this.getZoom());var s=this.getResolutionForZoom(t),s=this.calculateBounds(e,s);if(!this.restrictedExtent.containsBounds(s)){var o=this.restrictedExtent.getCenterLonLat();s.getWidth()>this.restrictedExtent.getWidth()?e=new OpenLayers.LonLat(o.lon,e.lat):s.left<this.restrictedExtent.left?e=e.add(this.restrictedExtent.left-s.left,0):s.right>this.restrictedExtent.right&&(e=e.add(this.restrictedExtent.right-s.right,0)),s.getHeight()>this.restrictedExtent.getHeight()?e=new OpenLayers.LonLat(e.lon,o.lat):s.bottom<this.restrictedExtent.bottom?e=e.add(0,this.restrictedExtent.bottom-s.bottom):s.top>this.restrictedExtent.top&&(e=e.add(0,this.restrictedExtent.top-s.top))}}i=i||this.isValidZoomLevel(t)&&t!=this.getZoom(),s=this.isValidLonLat(e)&&!e.equals(this.center);if(i||s||r){r||this.events.triggerEvent("movestart"),s&&(!i&&this.center&&this.centerLayerContainer(e),this.center=e.clone()),e=i?this.getResolutionForZoom(t):this.getResolution();if(i||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerDiv.style.left="0px",this.layerContainerDiv.style.top="0px";var s=this.getMaxExtent({restricted:!0}),u=s.getCenterLonLat(),o=this.center.lon-u.lon,u=u.lat-this.center.lat,a=Math.round(s.getWidth()/e),f=Math.round(s.getHeight()/e);this.minPx={x:(this.size.w-a)/2-o/e,y:(this.size.h-f)/2-u/e},this.maxPx={x:this.minPx.x+Math.round(s.getWidth()/e),y:this.minPx.y+Math.round(s.getHeight()/e)}}i&&(this.zoom=t,this.resolution=e),e=this.getExtent(),this.baseLayer.visibility&&(this.baseLayer.moveTo(e,i,n.dragging),n.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:i})),e=this.baseLayer.getExtent();for(t=this.layers.length-1;0<=t;--t)if(s=this.layers[t],s!==this.baseLayer&&!s.isBaseLayer&&(o=s.calculateInRange(),s.inRange!=o&&((s.inRange=o)||s.display(!1),this.events.triggerEvent("changelayer",{layer:s,property:"visibility"})),o&&s.visibility))s.moveTo(e,i,n.dragging),n.dragging||s.events.triggerEvent("moveend",{zoomChanged:i});this.events.triggerEvent("move"),r||this.events.triggerEvent("moveend");if(i){t=0;for(n=this.popups.length;t<n;t++)this.popups[t].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(e){var t=this.getViewPortPxFromLonLat(this.layerContainerOrigin),n=this.getViewPortPxFromLonLat(e);if(null!=t&&null!=n){var r=parseInt(this.layerContainerDiv.style.left),e=parseInt(this.layerContainerDiv.style.top),i=Math.round(t.x-n.x),t=Math.round(t.y-n.y);this.layerContainerDiv.style.left=i+"px",this.layerContainerDiv.style.top=t+"px",r-=i,e-=t,this.minPx.x-=r,this.maxPx.x-=r,this.minPx.y-=e,this.maxPx.y-=e}},isValidZoomLevel:function(e){return null!=e&&0<=e&&e<this.getNumZoomLevels()},isValidLonLat:function(e){var t=!1;return null!=e&&(t=this.getMaxExtent(),t=t.containsLonLat(e,{worldBounds:this.baseLayer.wrapDateLine&&t})),t},getProjection:function(){var e=this.getProjectionObject();return e?e.getCode():null},getProjectionObject:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.projection),e},getMaxResolution:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.maxResolution),e},getMaxExtent:function(e){var t=null;return e&&e.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.numZoomLevels),e},getExtent:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.getExtent()),e},getResolution:function(){var e=null;return null!=this.baseLayer?e=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(e=this.layers[0].getResolution()),e},getUnits:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.units),e},getScale:function(){var e=null;return null!=this.baseLayer&&(e=this.getResolution(),e=OpenLayers.Util.getScaleFromResolution(e,this.baseLayer.units)),e},getZoomForExtent:function(e,t){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.getZoomForExtent(e,t)),n},getResolutionForZoom:function(e){var t=null;return this.baseLayer&&(t=this.baseLayer.getResolutionForZoom(e)),t},getZoomForResolution:function(e,t){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.getZoomForResolution(e,t)),n},zoomTo:function(e){this.isValidZoomLevel(e)&&this.setCenter(null,e)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(e,t){e instanceof OpenLayers.Bounds||(e=new OpenLayers.Bounds(e));var n=e.getCenterLonLat();if(this.baseLayer.wrapDateLine){n=this.getMaxExtent();for(e=e.clone();e.right<e.left;)e.right+=n.getWidth();n=e.getCenterLonLat().wrapDateLine(n)}this.setCenter(n,this.getZoomForExtent(e,t))},zoomToMaxExtent:function(e){this.zoomToExtent(this.getMaxExtent({restricted:e?e.restricted:!0}))},zoomToScale:function(e,t){var n=OpenLayers.Util.getResolutionFromScale(e,this.baseLayer.units),r=this.size.w*n/2,n=this.size.h*n/2,i=this.getCachedCenter();this.zoomToExtent(new OpenLayers.Bounds(i.lon-r,i.lat-n,i.lon+r,i.lat+n),t)},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getLonLatFromViewPortPx(e)),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getViewPortPxFromLonLat(e)),t},getLonLatFromPixel:function(e){return this.getLonLatFromViewPortPx(e)},getPixelFromLonLat:function(e){return e=this.getViewPortPxFromLonLat(e),e.x=Math.round(e.x),e.y=Math.round(e.y),e},getGeodesicPixelSize:function(e){var t=e?this.getLonLatFromPixel(e):this.getCachedCenter()||new OpenLayers.LonLat(0,0),n=this.getResolution(),e=t.add(-n/2,0),r=t.add(n/2,0),i=t.add(0,-n/2),t=t.add(0,n/2),n=new OpenLayers.Projection("EPSG:4326"),s=this.getProjectionObject()||n;return s.equals(n)||(e.transform(s,n),r.transform(s,n),i.transform(s,n),t.transform(s,n)),new OpenLayers.Size(OpenLayers.Util.distVincenty(e,r),OpenLayers.Util.distVincenty(i,t))},getViewPortPxFromLayerPx:function(e){var t=null;if(null!=e)var t=parseInt(this.layerContainerDiv.style.left),n=parseInt(this.layerContainerDiv.style.top),t=e.add(t,n);return t},getLayerPxFromViewPortPx:function(e){var t=null;if(null!=e){var t=-parseInt(this.layerContainerDiv.style.left),n=-parseInt(this.layerContainerDiv.style.top),t=e.add(t,n);if(isNaN(t.x)||isNaN(t.y))t=null}return t},getLonLatFromLayerPx:function(e){return e=this.getViewPortPxFromLayerPx(e),this.getLonLatFromViewPortPx(e)},getLayerPxFromLonLat:function(e){return this.getLayerPxFromViewPortPx(this.getPixelFromLonLat(e))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(e,t){this.metadata={},this.addOptions(t),this.name=e,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object)&&this.events.on(this.eventListeners)},destroy:function(e){null==e&&(e=!0),null!=this.map&&this.map.removeLayer(this,e),this.options=this.div=this.name=this.map=this.projection=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.events=this.eventListeners=null},clone:function(e){return null==e&&(e=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(e,this),e.map=null,e},getOptions:function(){var e={},t;for(t in this.options)e[t]=this[t];return e},setName:function(e){e!=this.name&&(this.name=e,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(e,t){null==this.options&&(this.options={}),e&&("string"==typeof e.projection&&(e.projection=new OpenLayers.Projection(e.projection)),e.projection&&OpenLayers.Util.applyDefaults(e,OpenLayers.Projection.defaults[e.projection.getCode()]),e.maxExtent&&!(e.maxExtent instanceof OpenLayers.Bounds)&&(e.maxExtent=new OpenLayers.Bounds(e.maxExtent)),e.minExtent&&!(e.minExtent instanceof OpenLayers.Bounds))&&(e.minExtent=new OpenLayers.Bounds(e.minExtent)),OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits());if(this.map){var n=this.map.getResolution(),r=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]),i;for(i in e)if(e.hasOwnProperty(i)&&0<=OpenLayers.Util.indexOf(r,i)){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(n),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var e=!1;if(this.map){this.inRange=this.calculateInRange();var t=this.getExtent();t&&this.inRange&&this.visibility&&(this.moveTo(t,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),e=!0)}return e},moveTo:function(){var e=this.visibility
;this.isBaseLayer||(e=e&&this.inRange),this.display(e)},moveByPx:function(){},setMap:function(e){null==this.map&&(this.map=e,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(){},getImageSize:function(){return this.imageSize||this.tileSize},setTileSize:function(e){this.tileSize=e=e?e:this.tileSize?this.tileSize:this.map.getTileSize(),this.gutter&&(this.imageSize=new OpenLayers.Size(e.w+2*this.gutter,e.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(e){e!=this.visibility&&(this.visibility=e,this.display(e),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(e){e!=("none"!=this.div.style.display)&&(this.div.style.display=e&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var e=!1;return this.alwaysInRange?e=!0:this.map&&(e=this.map.getResolution(),e=e>=this.minResolution&&e<=this.maxResolution),e},setIsBaseLayer:function(e){e!=this.isBaseLayer&&(this.isBaseLayer=e,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var e,t,n,r={},i=!0;e=0;for(t=this.RESOLUTION_PROPERTIES.length;e<t;e++)n=this.RESOLUTION_PROPERTIES[e],r[n]=this.options[n],i&&this.options[n]&&(i=!1);null==this.alwaysInRange&&(this.alwaysInRange=i),null==r.resolutions&&(r.resolutions=this.resolutionsFromScales(r.scales)),null==r.resolutions&&(r.resolutions=this.calculateResolutions(r));if(null==r.resolutions){e=0;for(t=this.RESOLUTION_PROPERTIES.length;e<t;e++)n=this.RESOLUTION_PROPERTIES[e],r[n]=null!=this.options[n]?this.options[n]:this.map[n];null==r.resolutions&&(r.resolutions=this.resolutionsFromScales(r.scales)),null==r.resolutions&&(r.resolutions=this.calculateResolutions(r))}var s;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(s=this.options.maxResolution),this.options.minScale&&(s=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var o;this.options.minResolution&&"auto"!==this.options.minResolution&&(o=this.options.minResolution),this.options.maxScale&&(o=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),r.resolutions&&(r.resolutions.sort(function(e,t){return t-e}),s||(s=r.resolutions[0]),o||(o=r.resolutions[r.resolutions.length-1]));if(this.resolutions=r.resolutions){t=this.resolutions.length,this.scales=Array(t);for(e=0;e<t;e++)this.scales[e]=OpenLayers.Util.getScaleFromResolution(this.resolutions[e],this.units);this.numZoomLevels=t}if(this.minResolution=o)this.maxScale=OpenLayers.Util.getScaleFromResolution(o,this.units);if(this.maxResolution=s)this.minScale=OpenLayers.Util.getScaleFromResolution(s,this.units)},resolutionsFromScales:function(e){if(null!=e){var t,n,r;r=e.length,t=Array(r);for(n=0;n<r;n++)t[n]=OpenLayers.Util.getResolutionFromScale(e[n],this.units);return t}},calculateResolutions:function(e){var t,n,r=e.maxResolution;null!=e.minScale?r=OpenLayers.Util.getResolutionFromScale(e.minScale,this.units):"auto"==r&&null!=this.maxExtent&&(t=this.map.getSize(),n=this.maxExtent.getWidth()/t.w,t=this.maxExtent.getHeight()/t.h,r=Math.max(n,t)),n=e.minResolution,null!=e.maxScale?n=OpenLayers.Util.getResolutionFromScale(e.maxScale,this.units):"auto"==e.minResolution&&null!=this.minExtent&&(t=this.map.getSize(),n=this.minExtent.getWidth()/t.w,t=this.minExtent.getHeight()/t.h,n=Math.max(n,t)),"number"!=typeof r&&"number"!=typeof n&&null!=this.maxExtent&&(r=this.tileSize||this.map.getTileSize(),r=Math.max(this.maxExtent.getWidth()/r.w,this.maxExtent.getHeight()/r.h)),t=e.maxZoomLevel,e=e.numZoomLevels,"number"==typeof n&&"number"==typeof r&&void 0===e?e=Math.floor(Math.log(r/n)/Math.log(2))+1:void 0===e&&null!=t&&(e=t+1);if(!("number"!=typeof e||0>=e||"number"!=typeof r&&"number"!=typeof n)){t=Array(e);var i=2;"number"==typeof n&&"number"==typeof r&&(i=Math.pow(r/n,1/(e-1)));var s;if("number"==typeof r)for(s=0;s<e;s++)t[s]=r/Math.pow(i,s);else for(s=0;s<e;s++)t[e-1-s]=n*Math.pow(i,s);return t}},getResolution:function(){return this.getResolutionForZoom(this.map.getZoom())},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(e,t){var n=this.map.getSize();return this.getZoomForResolution(Math.max(e.getWidth()/n.w,e.getHeight()/n.h),t)},getDataExtent:function(){},getResolutionForZoom:function(e){e=Math.max(0,Math.min(e,this.resolutions.length-1));if(this.map.fractionalZoom)var t=Math.floor(e),n=Math.ceil(e),e=this.resolutions[t]-(e-t)*(this.resolutions[t]-this.resolutions[n]);else e=this.resolutions[Math.round(e)];return e},getZoomForResolution:function(e,t){var n,r;if(this.map.fractionalZoom){var i=0,s=this.resolutions[i],o=this.resolutions[this.resolutions.length-1],u;n=0;for(r=this.resolutions.length;n<r;++n)if(u=this.resolutions[n],u>=e&&(s=u,i=n),u<=e){o=u;break}n=s-o,n=0<n?i+(s-e)/n:i}else{s=Number.POSITIVE_INFINITY,n=0;for(r=this.resolutions.length;n<r;n++)if(t){i=Math.abs(this.resolutions[n]-e);if(i>s)break;s=i}else if(this.resolutions[n]<e)break;n=Math.max(0,n-1)}return n},getLonLatFromViewPortPx:function(e){var t=null,n=this.map;if(null!=e&&n.minPx){var t=n.getResolution(),r=n.getMaxExtent({restricted:!0}),t=new OpenLayers.LonLat((e.x-n.minPx.x)*t+r.left,(n.minPx.y-e.y)*t+r.top);this.wrapDateLine&&(t=t.wrapDateLine(this.maxExtent))}return t},getViewPortPxFromLonLat:function(e,t){var n=null;return null!=e&&(t=t||this.map.getResolution(),n=this.map.calculateBounds(null,t),n=new OpenLayers.Pixel(1/t*(e.lon-n.left),1/t*(n.top-e.lat))),n},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=this.div.childNodes,n=0,r=t.length;n<r;++n){var i=t[n].firstChild||t[n],s=t[n].lastChild;s&&"iframe"===s.nodeName.toLowerCase()&&(i=s.parentNode),OpenLayers.Util.modifyDOMElement(i,null,null,null,null,null,null,e)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(e){this.div.style.zIndex=e},adjustBounds:function(e){if(this.gutter)var t=this.gutter*this.map.getResolution(),e=new OpenLayers.Bounds(e.left-t,e.bottom-t,e.right+t,e.top+t);return this.wrapDateLine&&(t={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},e=e.wrapDateLine(this.maxExtent,t)),e},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.SphericalMercator={getExtent:function(){var e=null;return e=this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(e){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(e){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var e=0;e<=this.MAX_ZOOM_LEVEL;++e)this.RESOLUTIONS[e]=156543.03390625/Math.pow(2,e);this.units="m",this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var e=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(n,r){var i=OpenLayers.Projection.transform({x:n,y:r},e,t);return new OpenLayers.LonLat(i.x,i.y)}}(),inverseMercator:function(){var e=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(n,r){var i=OpenLayers.Projection.transform({x:n,y:r},t,e);return new OpenLayers.LonLat(i.x,i.y)}}()},OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.pane=this.mapObject=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1,this.pane.style.display=this.div.style.display,this.pane.style.width="100%",this.pane.style.height="100%","msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")"),this.isFixed?this.map.viewPortDiv.appendChild(this.pane):this.map.layerContainerDiv.appendChild(this.pane),this.loadMapObject(),null==this.mapObject&&this.loadWarningMessage()},removeMap:function(e){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane),OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var e=this.map.getSize(),t=Math.min(e.w,300),n=Math.min(e.h,200),t=new OpenLayers.Size(t,n),e=(new OpenLayers.Pixel(e.w/2,e.h/2)).add(-t.w/2,-t.h/2),e=OpenLayers.Util.createDiv(this.name+"_warning",e,t,null,null,null,"auto");e.style.padding="7px",e.style.backgroundColor="yellow",e.innerHTML=this.getWarningHTML(),this.div.appendChild(e)},getWarningHTML:function(){return""},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments),this.pane.style.display=this.div.style.display},setZIndex:function(e){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(e,t){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments),this.dragPanMapObject?this.dragPanMapObject(e,-t):this.moveTo(this.map.getCachedCenter())},moveTo:function(e,t,n){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);if(null!=this.mapObject){var r=this.map.getCenter(),i=this.map.getZoom();if(null!=r){var s=this.getOLLonLatFromMapObjectLonLat(this.getMapObjectCenter()),o=this.getOLZoomFromMapObjectZoom(this.getMapObjectZoom());if(!r.equals(s)||i!=o)!t&&s&&this.dragPanMapObject&&this.smoothDragPan?(i=this.map.getViewPortPxFromLonLat(s),r=this.map.getViewPortPxFromLonLat(r),this.dragPanMapObject(r.x-i.x,i.y-r.y)):(r=this.getMapObjectLonLatFromOLLonLat(r),i=this.getMapObjectZoomFromOLZoom(i),this.setMapObjectCenter(r,i,n))}}},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(t=this.getOLLonLatFromMapObjectLonLat(this.getMapObjectLonLatFromMapObjectPixel(this.getMapObjectPixelFromOLPixel(e)))),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(t=this.getOLPixelFromMapObjectPixel(this.getMapObjectPixelFromMapObjectLonLat(this.getMapObjectLonLatFromOLLonLat(e)))),t},getOLLonLatFromMapObjectLonLat:function(e){var t=null;return null!=e&&(t=this.getLongitudeFromMapObjectLonLat(e),e=this.getLatitudeFromMapObjectLonLat(e),t=new OpenLayers.LonLat(t,e)),t},getMapObjectLonLatFromOLLonLat:function(e){var t=null;return null!=e&&(t=this.getMapObjectLonLatFromLonLat(e.lon,e.lat)),t},getOLPixelFromMapObjectPixel:function(e){var t=null;return null!=e&&(t=this.getXFromMapObjectPixel(e),e=this.getYFromMapObjectPixel(e),t=new OpenLayers.Pixel(t,e)),t},getMapObjectPixelFromOLPixel:function(e){var t=null;return null!=e&&(t=this.getMapObjectPixelFromXY(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Layer.EventPane"}),OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var e=["minZoomLevel","maxZoomLevel","numZoomLevels"],t=0,n=e.length;t<n;t++){var r=e[t];this[r]=null!=this.options[r]?this.options[r]:this.map[r]}if(null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)this.minZoomLevel=this.MIN_ZOOM_LEVEL;e=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1,t=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels,this.numZoomLevels=null!=t?Math.min(t,e):e,this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1;if(null!=this.RESOLUTIONS){e=0,this.resolutions=[];for(t=this.minZoomLevel;t<=this.maxZoomLevel;t++)this.resolutions[e++]=this.RESOLUTIONS[t];this.maxResolution=this.resolutions[0],this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,arguments);var e=null,t=this.map.getSize(),n=this.getExtent();return null!=t&&null!=n&&(e=Math.max(n.getWidth()/t.w,n.getHeight()/t.h)),e},getExtent:function(){var e=this.map.getSize(),t=this.getLonLatFromViewPortPx({x:0,y:0}),e=this.getLonLatFromViewPortPx({x:e.w,y:e.h});return null!=t&&null!=e?new OpenLayers.Bounds(t.lon,e.lat,e.lon,t.lat):null},getZoomForResolution:function(e){return null!=this.resolutions?OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments):this.getZoomForExtent(OpenLayers.Layer.prototype.getExtent.apply(this,[]))},getOLZoomFromMapObjectZoom:function(e){var t=null;return null!=e&&(t=e-this.minZoomLevel,this.map.baseLayer!==this&&(t=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))),t},getMapObjectZoomFromOLZoom:function(e){var t=null;return null!=e&&(t=e+this.minZoomLevel,this.map.baseLayer!==this&&(t=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))),t},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"}),OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,2145767211914062e-20,1072883605957031e-20,536441802978515e-20,268220901489257e-20,1341104507446289e-21,6.705522537231445e-7],type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(e,t){t=t||{},t.version||(t.version="function"==typeof GMap2?"2":"3");var n=OpenLayers.Layer.Google["v"+t.version.replace(/\./g,"_")];if(!n)throw"Unsupported Google Maps API version: "+t.version;OpenLayers.Util.applyDefaults(t,n),OpenLayers.Util.applyDefaults(t,n.DEFAULTS),t.maxExtent&&(t.maxExtent=t.maxExtent.clone()),OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[e,t]),OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,[e,t]),this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(e){var t=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments),this.setOpacity(t)},display:function(e){this._dragging||this.setGMapVisibility(e),OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(e,t,n){this._dragging=n,OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments),delete this._dragging},setOpacity:function(e){e!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=e);if(this.getVisibility()){var t=this.getMapContainer();OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,e)}},destroy:function(){if(this.map){this.setGMapVisibility(!1);var e=OpenLayers.Layer.Google.cache[this.map.id];e&&1>=e.count&&this.removeGMapElements()}OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var e=OpenLayers.Layer.Google.cache[this.map.id];if(e){var t=this.mapObject&&this.getMapContainer();t&&t.parentNode&&t.parentNode.removeChild(t),(t=e.termsOfUse)&&t.parentNode&&t.parentNode.removeChild(t),(e=e.poweredBy)&&e.parentNode&&e.parentNode.removeChild(e)}},removeMap:function(e){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var t=OpenLayers.Layer.Google.cache[e.id];t&&(1>=t.count?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[e.id]):--t.count),delete this.termsOfUse,delete this.poweredBy,delete this.mapObject,delete this.dragObject,OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(e){var t=null;return null!=e&&(t=e.getSouthWest(),e=e.getNorthEast(),this.sphericalMercator?(t=this.forwardMercator(t.lng(),t.lat()),e=this.forwardMercator(e.lng(),e.lat())):(t=new OpenLayers.LonLat(t.lng(),t.lat()),e=new OpenLayers.LonLat(e.lng(),e.lat())),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)),t},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(e){return this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lon:e.lng()},getLatitudeFromMapObjectLonLat:function(e){return this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lat:e.lat()},getXFromMapObjectPixel:function(e){return e.x},getYFromMapObjectPixel:function(e){return e.y},CLASS_NAME:"OpenLayers.Layer.Google"}),OpenLayers.Layer.Google.cache={},OpenLayers.Layer.Google.v2={termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){this.type||(this.type=G_NORMAL_MAP);var e,t,n,r=OpenLayers.Layer.Google.cache[this.map.id];if(r)e=r.mapObject,t=r.termsOfUse,n=r.poweredBy,++r.count;else{var r=this.map.viewPortDiv,i=document.createElement("div");i.id=this.map.id+"_GMap2Container",i.style.position="absolute",i.style.width="100%",i.style.height="100%",r.appendChild(i);try{e=new GMap2(i),t=i.lastChild,r.appendChild(t),t.style.zIndex="1100",t.style.right="",t.style.bottom="",t.className="olLayerGoogleCopyright",n=i.lastChild,r.appendChild(n),n.style.zIndex="1100",n.style.right="",n.style.bottom="",n.className="olLayerGooglePoweredBy gmnoprint"}catch(s){throw s}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:e,termsOfUse:t,poweredBy:n,count:1}}this.mapObject=e,this.termsOfUse=t,this.poweredBy=n,-1===OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)&&this.mapObject.addMapType(this.type),"function"==typeof e.getDragObject?this.dragObject=e.getDragObject():this.dragPanMapObject=null,!1===this.isBaseLayer&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){if(this.visibility&&this.mapObject.isLoaded())this.mapObject.checkResize();else{if(!this._resized)var e=this,t=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(t),delete e._resized,e.mapObject.checkResize(),e.moveTo(e.map.getCenter(),e.map.getZoom())});this._resized=!0}},setGMapVisibility:function(e){var t=OpenLayers.Layer.Google.cache[this.map.id];if(t){var n=this.mapObject.getContainer();!0===e?(this.mapObject.setMapType(this.type),n.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",t.displayed=this.id):(t.displayed===this.id&&delete t.displayed,t.displayed||(n.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(e){var t=null;return null!=e&&(t=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),e=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right),t=new GLatLngBounds(new GLatLng(t.lat,t.lon),new GLatLng(e.lat,e.lon))),t},setMapObjectCenter:function(e,t){this.mapObject.setCenter(e,t)},dragPanMapObject:function(e,t){this.dragObject.moveBy(new GSize(-e,t))},getMapObjectLonLatFromMapObjectPixel:function(e){return this.mapObject.fromContainerPixelToLatLng(e)},getMapObjectPixelFromMapObjectLonLat:function(e){return this.mapObject.fromLatLngToContainerPixel(e)},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var n;return this.sphericalMercator?(n=this.inverseMercator(e,t),n=new GLatLng(n.lat,n.lon)):n=new GLatLng(t,e),n},getMapObjectPixelFromXY:function(e,t){return new GPoint(e,t)}},OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(e){window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[e]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var t in this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},read:function(e){var t=e.indexOf("<");return 0<t&&(e=e.substring(t)),t=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var t;return t=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,t.loadXML(e),t},this),function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(e),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML}),this.keepData&&(this.data=t),t},write:function(e){if(this.xmldom)e=e.xml;else{var t=new XMLSerializer;if(1==e.nodeType){var n=document.implementation.createDocument("","",null);n.importNode&&(e=n.importNode(e,!0)),n.appendChild(e),e=t.serializeToString(n)}else e=t.serializeToString(e)}return e},createElementNS:function(e,t){return this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createTextNode:function(e){return"string"!=typeof e&&(e=""+e),this.xmldom?this.xmldom.createTextNode(e):document.createTextNode(e)},getElementsByTagNameNS:function(e,t,n){var r=[];if(e.getElementsByTagNameNS)r=e.getElementsByTagNameNS(t,n);else for(var e=e.getElementsByTagName("*"),i,s,o=0,u=e.length;o<u;++o)(i=e[o],s=i.prefix?i.prefix+":"+n:n,"*"==n||s==i.nodeName)&&("*"==t||t==i.namespaceURI)&&r.push(i);return r},getAttributeNodeNS:function(e,t,n){var r=null;if(e.getAttributeNodeNS)r=e.getAttributeNodeNS(t,n);else for(var e=e.attributes,i,s,o=0,u=e.length;o<u;++o)if(i=e[o],i.namespaceURI==t&&(s=i.prefix?i.prefix+":"+n:n,s==i.nodeName)){r=i;break}return r},getAttributeNS:function(e,t,n){var r="";if(e.getAttributeNS)r=e.getAttributeNS(t,n)||"";else if(e=this.getAttributeNodeNS(e,t,n))r=e.nodeValue;return r},getChildValue:function(e,t){var n=t||"";if(e)for(var r=e.firstChild;r;r=r.nextSibling)switch(r.nodeType){case 3:case 4:n+=r.nodeValue}return n},isSimpleContent:function(e){for(var t=!0,e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){t=!1;break}return t},contentType:function(e){for(var t=!1,n=!1,r=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY,e=e.firstChild;e;e=e.nextSibling){switch(e.nodeType){case 1:n=!0;break;case 8:break;default:t=!0}if(n&&t)break}if(n&&t)r=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(n)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return r},hasAttributeNS:function(e,t,n){var r=!1;return r=e.hasAttributeNS?e.hasAttributeNS(t,n):!!this.getAttributeNodeNS(e,t,n)},setAttributeNS:function(e,t,n,r){if(e.setAttributeNS)e.setAttributeNS(t,n,r);else{if(!this.xmldom)throw"setAttributeNS not implemented";t?(t=e.ownerDocument.createNode(2,n,t),t.nodeValue=r,e.setAttributeNode(t)):e.setAttribute(n,r)}},createElementNSPlus:function(e,t){var t=t||{},n=t.uri||this.namespaces[t.prefix];n||(n=e.indexOf(":"),n=this.namespaces[e.substring(0,n)]),n||(n=this.namespaces[this.defaultPrefix]),n=this.createElementNS(n,e),t.attributes&&this.setAttributes(n,t.attributes);var r=t.value;return null!=r&&n.appendChild(this.createTextNode(r)),n},setAttributes:function(e,t){var n,r,i;for(i in t)null!=t[i]&&t[i].toString&&(n=t[i].toString(),r=this.namespaces[i.substring(0,i.indexOf(":"))]||null,this.setAttributeNS(e,r,i,n))},readNode:function(e,t){t||(t={});var n=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];if(n){var r=e.localName||e.nodeName.split(":").pop();(n=n[r]||n["*"])&&n.apply(this,[e,t])}return t},readChildNodes:function(e,t){t||(t={});for(var n=e.childNodes,r,i=0,s=n.length;i<s;++i)r=n[i],1==r.nodeType&&this.readNode(r,t);return t},writeNode:function(e,t,n){var r,i=e.indexOf(":");return 0<i?(r=e.substring(0,i),e=e.substring(i+1)):r=n?this.namespaceAlias[n.namespaceURI]:this.defaultPrefix,t=this.writers[r][e].apply(this,[t]),n&&n.appendChild(t),t},getChildEl:function(e,t,n){return e&&this.getThisOrNextEl(e.firstChild,t,n)},getNextEl:function(e,t,n){return e&&this.getThisOrNextEl(e.nextSibling,t,n)},getThisOrNextEl:function(e,t,n){e:for(;e;e=e.nextSibling)switch(e.nodeType){case 1:if((!t||t===(e.localName||e.nodeName.split(":").pop()))&&(!n||n===e.namespaceURI))break e;e=null;break e;case 3:if(/^\s*$/.test(e.nodeValue))break;case 4:case 6:case 12:case 10:case 11:e=null;break e}return e||null},lookupNamespaceURI:function(e,t){var n=null;if(e)if(e.lookupNamespaceURI)n=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){n=e.namespaceURI;break e}if(n=e.attributes.length)for(var r,i=0;i<n;++i){if(r=e.attributes[i],"xmlns"===r.prefix&&r.name==="xmlns:"+t){n=r.value||null;break e}if("xmlns"===r.name&&null===t){n=r.value||null;break e}}n=this.lookupNamespaceURI(e.parentNode,t);break e;case 2:n=this.lookupNamespaceURI(e.ownerElement,t);break e;case 9:n=this.lookupNamespaceURI(e.documentElement,t);break e;case 6:case 12:case 10:case 11:break e;default:n=this.lookupNamespaceURI(e.parentNode,t)}return n},getXMLDoc:function(){return!OpenLayers.Format.XML.document&&!this.xmldom&&(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.WFST=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.WFST.DEFAULTS),t=OpenLayers.Format.WFST["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFST version: "+e.version;return new t(e)},OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"},OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(e){this.stateName={},this.stateName[OpenLayers.State.INSERT]="wfs:Insert",this.stateName[OpenLayers.State.UPDATE]="wfs:Update",this.stateName[OpenLayers.State.DELETE]="wfs:Delete",OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},getSrsName:function(e,t){var n=t&&t.srsName;return n||(n=e&&e.layer?e.layer.projection.getCode():this.srsName),n},read:function(e,t){t=t||{},OpenLayers.Util.applyDefaults(t,{output:"features"}),"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var n={};return e&&this.readNode(e,n,!0),n.features&&"features"===t.output&&(n=n.features),n},readers:{wfs:{FeatureCollection:function(e,t){t.features=[],this.readChildNodes(e,t)}}},write:function(e,t){var n=this.writeNode("wfs:Transaction",{features:e,options:t}),r=this.schemaLocationAttr();return r&&this.setAttributeNS(n,this.namespaces.xsi,"xsi:schemaLocation",r),OpenLayers.Format.XML.prototype.write.apply(this,[n])},writers:{wfs:{GetFeature:function(e){var t=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:e&&e.handle,outputFormat:e&&e.outputFormat,maxFeatures:e&&e.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(e)}});if("string"==typeof this.featureType)this.writeNode("Query",e,t);else for(var n=0,r=this.featureType.length;n<r;n++)e.featureType=this.featureType[n],this.writeNode("Query",e,t);return t},Transaction:function(e){var e=e||{},t=e.options||{},n=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:t.handle}}),r,i=e.features;if(i){!0===t.multi&&OpenLayers.Util.extend(this.geometryTypes,{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.multiCurve?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":!0===this.multiSurface?"MultiSurface":"MultiPolygon"});var s,o,e=0;for(r=i.length;e<r;++e)o=i[e],(s=this.stateName[o.state])&&this.writeNode(s,{feature:o,options:t},n);!0===t.multi&&this.setGeometryTypes()}if(t.nativeElements){e=0;for(r=t.nativeElements.length;e<r;++e)this.writeNode("wfs:Native",t.nativeElements[e],n)}return n},Native:function(e){return this.createElementNSPlus("wfs:Native",{attributes:{vendorId:e.vendorId,safeToIgnore:e.safeToIgnore},value:e.value})},Insert:function(e){var t=e.feature,e=e.options,e=this.createElementNSPlus("wfs:Insert",{attributes:{handle:e&&e.handle}});return this.srsName=this.getSrsName(t),this.writeNode("feature:_typeName",t,e),e},Update:function(e){var t=e.feature,e=e.options,e=this.createElementNSPlus("wfs:Update",{attributes:{handle:e&&e.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});this.featureNS&&e.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var n=t.modified;null!==this.geometryName&&(!n||void 0!==n.geometry)&&(this.srsName=this.getSrsName(t),this.writeNode("Property",{name:this.geometryName,value:t.geometry},e));for(var r in t.attributes)void 0!==t.attributes[r]&&(!n||!n.attributes||n.attributes&&void 0!==n.attributes[r])&&this.writeNode("Property",{name:r,value:t.attributes[r]},e);return this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),e),e},Property:function(e){var t=this.createElementNSPlus("wfs:Property");return this.writeNode("Name",e.name,t),null!==e.value&&this.writeNode("Value",e.value,t),t},Name:function(e){return this.createElementNSPlus("wfs:Name",{value:e})},Value:function(e){var t;return e instanceof OpenLayers.Geometry?(t=this.createElementNSPlus("wfs:Value"),e=this.writeNode("feature:_geometry",e).firstChild,t.appendChild(e)):t=this.createElementNSPlus("wfs:Value",{value:e}),t},Delete:function(e){var t=e.feature,e=e.options,e=this.createElementNSPlus("wfs:Delete",{attributes:{handle:e&&e.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});return this.featureNS&&e.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),e),e}}},schemaLocationAttr:function(e){var e=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},e),t=OpenLayers.Util.extend({},this.schemaLocations);e.schema&&(t[e.featurePrefix]=e.schema);var e=[],n,r;for(r in t)(n=this.namespaces[r])&&e.push(n+" "+t[r]);return e.join(" ")||void 0},setFilterProperty:function(e){if(e.filters)for(var t=0,n=e.filters.length;t<n;++t)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,e.filters[t]);else e instanceof OpenLayers.Filter.Spatial&&!e.property&&(e.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"}),OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t={exceptionReport:null};return e.documentElement&&(this.readChildNodes(e,t),null===t.exceptionReport&&(t=(new OpenLayers.Format.OWSCommon).read(e))),t},readers:{ogc:{ServiceExceptionReport:function(e,t){t.exceptionReport={exceptions:[]},this.readChildNodes(e,t.exceptionReport)},ServiceException:function(e,t){var n={code:e.getAttribute("code"),locator:e.getAttribute("locator"),text:this.getChildValue(e)};t.exceptions.push(n)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"
}),OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,errorProperty:null,name:null,stringifyOutput:!1,parser:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),e=this.CLASS_NAME,this.name=e.substring(e.lastIndexOf(".")+1)},getVersion:function(e,t){var n;return e?(n=this.version,n||(n=e.getAttribute("version"),n||(n=this.defaultVersion))):n=t&&t.version||this.version||this.defaultVersion,n},getParser:function(e){var e=e||this.defaultVersion,t=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=e){var n=OpenLayers.Format[this.name]["v"+e.replace(/\./g,"_")+t];if(!n)throw"Can't find a "+this.name+" parser for version "+e+t;this.parser=new n(this.options)}return this.parser},write:function(e,t){this.parser=this.getParser(this.getVersion(null,t));var n=this.parser.write(e,t);return!1===this.stringifyOutput?n:OpenLayers.Format.XML.prototype.write.apply(this,[n])},read:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var n=this.getVersion(e.documentElement);this.parser=this.getParser(n);var r=this.parser.read(e,t);if(null!==this.errorProperty&&void 0===r[this.errorProperty]){var i=new OpenLayers.Format.OGCExceptionReport;r.error=i.read(e)}return r.version=n,r},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"}),OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(e,t,n){this.layer=e,this.lonlat=t,this.data=null!=n?n:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.data=this.lonlat=this.id=this.layer=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var e=!1;return null!=this.layer&&null!=this.layer.map&&(e=this.layer.map.getExtent().containsLonLat(this.lonlat)),e},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(e){return null!=this.lonlat&&(this.popup||(this.popup=new(this.popupClass?this.popupClass:OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,e)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this),this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(e,t,n){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=e?e:null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=n?n:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.modified=this.geometry=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(e){var t=!1;return this.layer&&this.layer.map&&(t=this.layer.map.getExtent(),e?(e=this.geometry.getBounds(),t=t.intersectsBounds(e)):t=t.toGeometry().intersects(this.geometry)),t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(e,t,n){var r=!1;return this.geometry&&(r=this.geometry.atPoint(e,t,n)),r},destroyPopup:function(){},move:function(e){if(this.layer&&this.geometry.move){var e="OpenLayers.LonLat"==e.CLASS_NAME?this.layer.getViewPortPxFromLonLat(e):e,t=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),n=this.layer.map.getResolution();return this.geometry.move(n*(e.x-t.x),n*(t.y-e.y)),this.layer.drawFeature(this),t}},toState:function(e){if(e==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=e}else if(e==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=e}else if(e==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=e}else e==OpenLayers.State.UNKNOWN&&(this.state=e)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(e||OpenLayers.Feature.Vector.style["default"]),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy(),this.rules[e]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(e){for(var t=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),e),n=this.rules,r,i=[],s=!1,o=0,u=n.length;o<u;o++)r=n[o],r.evaluate(e)&&(r instanceof OpenLayers.Rule&&r.elseFilter?i.push(r):(s=!0,this.applySymbolizer(r,t,e)));if(0==s&&0<i.length){s=!0,o=0;for(u=i.length;o<u;o++)this.applySymbolizer(i[o],t,e)}return 0<n.length&&0==s&&(t.display="none"),null!=t.label&&"string"!=typeof t.label&&(t.label=""+t.label),t},applySymbolizer:function(e,t,n){var r=n.geometry?this.getSymbolizerPrefix(n.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0],e=e.symbolizer[r]||e.symbolizer;return!0===this.defaultsPerSymbolizer&&(r=this.defaultStyle,OpenLayers.Util.applyDefaults(e,{pointRadius:r.pointRadius}),(!0===e.stroke||!0===e.graphic)&&OpenLayers.Util.applyDefaults(e,{strokeWidth:r.strokeWidth,strokeColor:r.strokeColor,strokeOpacity:r.strokeOpacity,strokeDashstyle:r.strokeDashstyle,strokeLinecap:r.strokeLinecap}),(!0===e.fill||!0===e.graphic)&&OpenLayers.Util.applyDefaults(e,{fillColor:r.fillColor,fillOpacity:r.fillOpacity}),!0===e.graphic&&OpenLayers.Util.applyDefaults(e,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})),this.createLiterals(OpenLayers.Util.extend(t,e),n)},createLiterals:function(e,t){var n=OpenLayers.Util.extend({},t.attributes||t.data);OpenLayers.Util.extend(n,this.context);for(var r in this.propertyStyles)e[r]=OpenLayers.Style.createLiteral(e[r],n,t,r);return e},findPropertyStyles:function(){var e={};this.addPropertyStyles(e,this.defaultStyle);for(var t=this.rules,n,r,i=0,s=t.length;i<s;i++){n=t[i].symbolizer;for(var o in n){if(r=n[o],"object"!=typeof r){this.addPropertyStyles(e,n);break}this.addPropertyStyles(e,r)}}return e},addPropertyStyles:function(e,t){var n,r;for(r in t)n=t[r],"string"==typeof n&&n.match(/\$\{\w+\}/)&&(e[r]=!0);return e},addRules:function(e){Array.prototype.push.apply(this.rules,e),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(e){this.defaultStyle=e,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(e){for(var t=OpenLayers.Style.SYMBOLIZER_PREFIXES,n=0,r=t.length;n<r;n++)if(-1!=e.CLASS_NAME.indexOf(t[n]))return t[n]},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,n=this.rules.length;t<n;++t)e.rules.push(this.rules[t].clone())}return e.context=this.context&&OpenLayers.Util.extend({},this.context),t=OpenLayers.Util.extend({},this.defaultStyle),new OpenLayers.Style(t,e)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(e,t,n,r){return"string"==typeof e&&-1!=e.indexOf("${")&&(e=OpenLayers.String.format(e,t,[n,r]),e=isNaN(e)||!e?e:parseFloat(e)),e},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.Filter=OpenLayers.Class({initialize:function(e){OpenLayers.Util.extend(this,e)},destroy:function(){},evaluate:function(){return!0},clone:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"}),OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(e){this.fids=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},evaluate:function(e){for(var t=0,n=this.fids.length;t<n;t++)if((e.fid||e.id)==this.fids[t])return!0;return!1},clone:function(){var e=new OpenLayers.Filter.FeatureId;return OpenLayers.Util.extend(e,this),e.fids=this.fids.slice(),e},CLASS_NAME:"OpenLayers.Filter.FeatureId"}),OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(e){this.filters=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},destroy:function(){this.filters=null,OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(e){var t,n;switch(this.type){case OpenLayers.Filter.Logical.AND:t=0;for(n=this.filters.length;t<n;t++)if(0==this.filters[t].evaluate(e))return!1;return!0;case OpenLayers.Filter.Logical.OR:t=0;for(n=this.filters.length;t<n;t++)if(1==this.filters[t].evaluate(e))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(e)}},clone:function(){for(var e=[],t=0,n=this.filters.length;t<n;++t)e.push(this.filters[t].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:e})},CLASS_NAME:"OpenLayers.Filter.Logical"}),OpenLayers.Filter.Logical.AND="&&",OpenLayers.Filter.Logical.OR="||",OpenLayers.Filter.Logical.NOT="!",OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(e){OpenLayers.Filter.prototype.initialize.apply(this,[e]),this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===e.matchCase&&(this.matchCase=null)},evaluate:function(e){e instanceof OpenLayers.Feature.Vector&&(e=e.attributes);var t=!1,e=e[this.property];switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:t=this.value,t=!this.matchCase&&"string"==typeof e&&"string"==typeof t?e.toUpperCase()==t.toUpperCase():e==t;break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:t=this.value,t=!this.matchCase&&"string"==typeof e&&"string"==typeof t?e.toUpperCase()!=t.toUpperCase():e!=t;break;case OpenLayers.Filter.Comparison.LESS_THAN:t=e<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:t=e>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:t=e<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:t=e>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:t=e>=this.lowerBoundary&&e<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:t=RegExp(this.value,"gi").test(e)}return t},value2regex:function(e,t,n){if("."==e)throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return e=e?e:"*",t=t?t:".",this.value=this.value.replace(RegExp("\\"+(n?n:"!")+"(.|$)","g"),"\\$1"),this.value=this.value.replace(RegExp("\\"+t,"g"),"."),this.value=this.value.replace(RegExp("\\"+e,"g"),".*"),this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+e),this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+t)},regex2value:function(){var e=this.value,e=e.replace(/!/g,"!!"),e=e.replace(/(\\)?\\\./g,function(e,t){return t?e:"!."}),e=e.replace(/(\\)?\\\*/g,function(e,t){return t?e:"!*"}),e=e.replace(/\\\\/g,"\\");return e=e.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"}),OpenLayers.Filter.Comparison.EQUAL_TO="==",OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=",OpenLayers.Filter.Comparison.LESS_THAN="<",OpenLayers.Filter.Comparison.GREATER_THAN=">",OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=",OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=",OpenLayers.Filter.Comparison.BETWEEN="..",OpenLayers.Filter.Comparison.LIKE="~",OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"}),OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"}),OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){var t={};return this.readers.ogc.Filter.apply(this,[e,t]),t.filter},readers:{ogc:{_expression:function(e){for(var t="",n=e.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 1:e=this.readNode(n),e.property?t+="${"+e.property+"}":void 0!==e.value&&(t+=e.value);break;case 3:case 4:t+=n.nodeValue}return t},Filter:function(e,t){var n={fids:[],filters:[]};this.readChildNodes(e,n),0<n.fids.length?t.filter=new OpenLayers.Filter.FeatureId({fids:n.fids}):0<n.filters.length&&(t.filter=n.filters[0])},FeatureId:function(e,t){var n=e.getAttribute("fid");n&&t.fids.push(n)},And:function(e,t){var n=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(e,n),t.filters.push(n)},Or:function(e,t){var n=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(e,n),t.filters.push(n)},Not:function(e,t){var n=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsLessThan:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsGreaterThan:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsLessThanOrEqualTo:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsGreaterThanOrEqualTo:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsBetween:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(e,n),t.filters.push(n)},Literal:function(e,t){t.value=OpenLayers.String.numericIf(this.getChildValue(e))},PropertyName:function(e,t){t.property=this.getChildValue(e)},LowerBoundary:function(e,t){t.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e))},UpperBoundary:function(e,t){t.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e))},Intersects:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(e,t){t.distance=parseInt(this.getChildValue(e)),t.distanceUnits=e.getAttribute("units")},Function:function(){}}},readSpatial:function(e,t,n){n=new OpenLayers.Filter.Spatial({type:n}),this.readChildNodes(e,n),n.value=n.components[0],delete n.components,t.filters.push(n)},writeOgcExpression:function(e,t){if(e instanceof OpenLayers.Filter.Function){var n=this.writeNode("Function",e,t);t.appendChild(n)}else this.writeNode("Literal",e,t);return t},write:function(e){return this.writers.ogc.Filter.apply(this,[e])},writeFeatureIdNodes:function(e,t){for(var n=0,r=e.fids.length;n<r;++n)this.writeNode("FeatureId",e.fids[n],t)},writers:{ogc:{Filter:function(e){var t=this.createElementNSPlus("ogc:Filter");return"FID"===e.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,e,t):this.writeNode(this.getFilterType(e),e,t),t},FeatureId:function(e){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:e}})},And:function(e){for(var t=this.createElementNSPlus("ogc:And"),n,r=0,i=e.filters.length;r<i;++r)n=e.filters[r],"FID"===n.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,n,t):this.writeNode(this.getFilterType(n),n,t);return t},Or:function(e){for(var t=this.createElementNSPlus("ogc:Or"),n,r=0,i=e.filters.length;r<i;++r)n=e.filters[r],"FID"===n.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,n,t):this.writeNode(this.getFilterType(n),n,t);return t},Not:function(e){var t=this.createElementNSPlus("ogc:Not"),e=e.filters[0];return"FID"===e.type?OpenLayers.Format.Filter.v1.prototype.writeFeatureIdNodes.call(this,e,t):this.writeNode(this.getFilterType(e),e,t),t},PropertyIsLessThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLessThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsBetween:function(e){var t=this.createElementNSPlus("ogc:PropertyIsBetween");return this.writeNode("PropertyName",e,t),this.writeNode("LowerBoundary",e,t),this.writeNode("UpperBoundary",e,t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})},Literal:function(e){return this.createElementNSPlus("ogc:Literal",{value:e})},LowerBoundary:function(e){var t=this.createElementNSPlus("ogc:LowerBoundary");return this.writeOgcExpression(e.lowerBoundary,t),t},UpperBoundary:function(e){var t=this.createElementNSPlus("ogc:UpperBoundary");return this.writeNode("Literal",e.upperBoundary,t),t},INTERSECTS:function(e){return this.writeSpatial(e,"Intersects")},WITHIN:function(e){return this.writeSpatial(e,"Within")},CONTAINS:function(e){return this.writeSpatial(e,"Contains")},DWITHIN:function(e){var t=this.writeSpatial(e,"DWithin");return this.writeNode("Distance",e,t),t},Distance:function(e){return this.createElementNSPlus("ogc:Distance",{attributes:{units:e.distanceUnits},value:e.distance})},Function:function(e){for(var t=this.createElementNSPlus("ogc:Function",{attributes:{name:e.name}}),e=e.params,n=0,r=e.length;n<r;n++)this.writeOgcExpression(e[n],t);return t}}},getFilterType:function(e){var t=this.filterMap[e.type];if(!t)throw"Filter writing not supported for rule type: "+e.type;return t},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"FeatureId"},CLASS_NAME:"OpenLayers.Format.Filter.v1"}),OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(e){e&&(this.bounds=e.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(){},getVertices:function(){},atPoint:function(e,t,n){var r=!1;return null!=this.getBounds()&&null!=e&&(t=null!=t?t:0,n=null!=n?n:0,r=(new OpenLayers.Bounds(this.bounds.left-t,this.bounds.bottom-n,this.bounds.right+t,this.bounds.top+n)).containsLonLat(e)),r},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(e){var t;if(OpenLayers.Format&&OpenLayers.Format.WKT){var n=OpenLayers.Geometry.fromWKT.format;n||(n=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=n),e=n.read(e);if(e instanceof OpenLayers.Feature.Vector)t=e.geometry;else if(OpenLayers.Util.isArray(e)){t=e.length;for(var n=Array(t),r=0;r<t;++r)n[r]=e[r].geometry;t=new OpenLayers.Geometry.Collection(n)}}return t},OpenLayers.Geometry.segmentsIntersect=function(e,t,n){var r=n&&n.point,n=n&&n.tolerance,i=!1,s=e.x1-t.x1,o=e.y1-t.y1,u=e.x2-e.x1,a=e.y2-e.y1,f=t.y2-t.y1,l=t.x2-t.x1,c=f*u-l*a,f=l*o-f*s,o=u*o-a*s;0==c?0==f&&0==o&&(i=!0):(s=f/c,c=o/c,0<=s&&1>=s&&0<=c&&1>=c&&(r?(u=e.x1+s*u,c=e.y1+s*a,i=new OpenLayers.Geometry.Point(u,c)):i=!0));if(n)if(i){if(r){e=[e,t],t=0;e:for(;2>t;++t){s=e[t];for(a=1;3>a;++a)if(u=s["x"+a],c=s["y"+a],r=Math.sqrt(Math.pow(u-i.x,2)+Math.pow(c-i.y,2)),r<n){i.x=u,i.y=c;break e}}}}else{e=[e,t],t=0;e:for(;2>t;++t){u=e[t],c=e[(t+1)%2];for(a=1;3>a;++a)if(s={x:u["x"+a],y:u["y"+a]},o=OpenLayers.Geometry.distanceToSegment(s,c),o.distance<n){i=r?new OpenLayers.Geometry.Point(s.x,s.y):!0;break e}}}return i},OpenLayers.Geometry.distanceToSegment=function(e,t){var n=e.x,r=e.y,i=t.x1,s=t.y1,o=t.x2,u=t.y2,a=o-i,f=u-s,l=(a*(n-i)+f*(r-s))/(Math.pow(a,2)+Math.pow(f,2));return 0>=l||(1<=l?(i=o,s=u):(i+=l*a,s+=l*f)),{distance:Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),x:i,y:s}},OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(e,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(e),this.y=parseFloat(t)},clone:function(e){return null==e&&(e=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(e,this),e},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(e,t){var n=(!t||!1!==t.edge)&&t&&t.details,r,i,s,o,u;return e instanceof OpenLayers.Geometry.Point?(i=this.x,s=this.y,o=e.x,u=e.y,r=Math.sqrt(Math.pow(i-o,2)+Math.pow(s-u,2)),r=n?{x0:i,y0:s,x1:o,y1:u,distance:r}:r):(r=e.distanceTo(this,t),n&&(r={x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0,distance:r.distance})),r},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},toShortString:function(){return this.x+", "+this.y},move:function(e,t){this.x+=e,this.y+=t,this.clearBounds()},rotate:function(e,t){var e=e*(Math.PI/180),n=this.distanceTo(t),r=e+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+n*Math.cos(r),this.y=t.y+n*Math.sin(r),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(e,t,n){return this.x=t.x+e*(void 0==n?1:n)*(this.x-t.x),this.y=t.y+e*(this.y-t.y),this.clearBounds(),this},intersects:function(e){var t=!1;return t="OpenLayers.Geometry.Point"==e.CLASS_NAME?this.equals(e):e.intersects(this)},transform:function(e,t){return e&&t&&(OpenLayers.Projection.transform(this,e,t),this.bounds=null),this},getVertices:function(){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(e){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=e&&this.addComponents(e)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());return OpenLayers.Util.applyDefaults(a,this),a},getComponentsString:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")},calculateBounds:function(){this.bounds=null;var e=new OpenLayers.Bounds,t=this.components;if(t)for(var n=0,r=t.length;n<r;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)},addComponents:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++)this.addComponent(e[t])},addComponent:function(e,t){var n=!1;if(e&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,e.CLASS_NAME))){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),r=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(r)}else this.components.push(e);e.parent=this,this.clearBounds(),n=!0}return n},removeComponents:function(e){var t=!1;OpenLayers.Util.isArray(e)||(e=[e]);for(var n=e.length-1;0<=n;--n)t=this.removeComponent(e[n])||t;return t},removeComponent:function(e){return OpenLayers.Util.removeItem(this.components,e),this.clearBounds(),!0},getLength:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getLength();return e},getArea:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e},getGeodesicArea:function(e){for(var t=0,n=0,r=this.components.length;n<r;n++)t+=this.components[n].getGeodesicArea(e);return t},getCentroid:function(e){if(!e)return this.components.length&&this.components[0].getCentroid();e=this.components.length;if(!e)return!1;for(var t=[],n=[],r=0,i=Number.MAX_VALUE,s,o=0;o<e;++o){s=this.components[o];var u=s.getArea();s=s.getCentroid(!0),!isNaN(u)&&!isNaN(s.x)&&!isNaN(s.y)&&(t.push(u),r+=u,i=u<i&&0<u?u:i,n.push(s))}e=t.length;if(0===r){for(o=0;o<e;++o)t[o]=1;r=t.length}else{for(o=0;o<e;++o)t[o]/=i;r/=i}for(var a=i=0,o=0;o<e;++o)s=n[o],u=t[o],i+=s.x*u,a+=s.y*u;return new OpenLayers.Geometry.Point(i/r,a/r)},getGeodesicLength:function(e){for(var t=0,n=0,r=this.components.length;n<r;n++)t+=this.components[n].getGeodesicLength(e);return t},move:function(e,t){for(var n=0,r=this.components.length;n<r;n++)this.components[n].move(e,t)},rotate:function(e,t){for(var n=0,r=this.components.length;n<r;++n)this.components[n].rotate(e,t)},resize:function(e,t,n){for(var r=0;r<this.components.length;++r)this.components[r].resize(e,t,n);return this},distanceTo:function(e,t){for(var n=(!t||!1!==t.edge)&&t&&t.details,r,i,s,o=Number.POSITIVE_INFINITY,u=0,a=this.components.length;u<a&&!(r=this.components[u].distanceTo(e,t),s=n?r.distance:r,s<o&&(o=s,i=r,0==o));++u);return i},equals:function(e){var t=!0;if(!e||!e.CLASS_NAME||this.CLASS_NAME!=e.CLASS_NAME)t=!1;else if(!OpenLayers.Util.isArray(e.components)||e.components.length!=this.components.length)t=!1;else for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}return t},transform:function(e,t){if(e&&t){for(var n=0,r=this.components.length;n<r;n++)this.components[n].transform(e,t);this.bounds=null}return this},intersects:function(e){for(var t=!1,n=0,r=this.components.length;n<r&&!(t=e.intersects(this.components[n]));++n);return t},getVertices:function(e){for(var t=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(e,t){this.addComponent(e,t)},removePoint:function(e){this.removeComponent(e)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var e=0;if(this.components&&1<this.components.length)for(var t=1,n=this.components.length;t<n;t++)e+=this.components[t-1].distanceTo(this.components[t]);return e},getGeodesicLength:function(e){var t=this;if(e){var n=new OpenLayers.Projection("EPSG:4326");n.equals(e)||(t=this.clone().transform(e,n))}e=0;if(t.components&&1<t.components.length)for(var r,i=1,s=t.components.length;i<s;i++)n=t.components[i-1],r=t.components[i],e+=OpenLayers.Util.distVincenty({lon:n.x,lat:n.y},{lon:r.x,lat:r.y});return 1e3*e},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(e){var t=this.components&&2<this.components.length;return t&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),t},intersects:function(e){var t=!1,n=e.CLASS_NAME;if("OpenLayers.Geometry.LineString"==n||"OpenLayers.Geometry.LinearRing"==n||"OpenLayers.Geometry.Point"==n){var r=this.getSortedSegments(),e="OpenLayers.Geometry.Point"==n?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y}]:e.getSortedSegments(),i,s,o,u,a,f,l,c=0,h=r.length;e:for(;c<h;++c){n=r[c],i=n.x1,s=n.x2,o=n.y1,u=n.y2;var p=0,d=e.length;for(;p<d;++p){a=e[p];if(a.x1>s)break;if(!(a.x2<i)&&(f=a.y1,l=a.y2,!(Math.min(f,l)>Math.max(o,u))&&!(Math.max(f,l)<Math.min(o,u))&&OpenLayers.Geometry.segmentsIntersect(n,a))){t=!0;break e}}}}else t=e.intersects(this);return t},getSortedSegments:function(){for(var e=this.components.length-1,t=Array(e),n,r,i=0;i<e;++i)n=this.components[i],r=this.components[i+1],t[i]=n.x<r.x?{x1:n.x,y1:n.y,x2:r.x,y2:r.y}:{x1:r.x,y1:r.y,x2:n.x,y2:n.y};return t.sort(function(e,t){return e.x1-t.x1})},splitWithSegment:function(e,t){for(var n=!t||!1!==t.edge,r=t&&t.tolerance,i=[],s=this.getVertices(),o=[],u=[],a=!1,f,l,c,h={point:!0,tolerance:r},p=null,d=0,v=s.length-2;d<=v;++d)if(r=s[d],o.push(r.clone()),f=s[d+1],l={x1:r.x,y1:r.y,x2:f.x,y2:f.y},l=OpenLayers.Geometry.segmentsIntersect(e,l,h),l instanceof OpenLayers.Geometry.Point&&((c=l.x===e.x1&&l.y===e.y1||l.x===e.x2&&l.y===e.y2||l.equals(r)||l.equals(f)?!0:!1)||n))l.equals(u[u.length-1])||u.push(l.clone()),(0!==d||!l.equals(r))&&!l.equals(f)&&(a=!0,l.equals(r)||o.push(l),i.push(new OpenLayers.Geometry.LineString(o)),o=[l.clone()]);a&&(o.push(f.clone()),i.push(new OpenLayers.Geometry.LineString(o)));if(0<u.length)var m=e.x1<e.x2?1:-1,g=e.y1<e.y2?1:-1,p={lines:i,points:u.sort(function(e,t){return m*e.x-m*t.x||g*e.y-g*t.y})};return p},split:function(e,t){var n=null,r=t&&t.mutual,i,s,o,u;if(e instanceof OpenLayers.Geometry
.LineString){var a=this.getVertices(),f,l,c,h,p,d=[];o=[];for(var v=0,m=a.length-2;v<=m;++v){f=a[v],l=a[v+1],c={x1:f.x,y1:f.y,x2:l.x,y2:l.y},u=u||[e],r&&d.push(f.clone());for(var g=0;g<u.length;++g)if(h=u[g].splitWithSegment(c,t))if(p=h.lines,0<p.length&&(p.unshift(g,1),Array.prototype.splice.apply(u,p),g+=p.length-2),r)for(var y=0,b=h.points.length;y<b;++y)p=h.points[y],p.equals(f)||(d.push(p),o.push(new OpenLayers.Geometry.LineString(d)),d=p.equals(l)?[]:[p.clone()])}r&&0<o.length&&0<d.length&&(d.push(l.clone()),o.push(new OpenLayers.Geometry.LineString(d)))}else n=e.splitWith(this,t);u&&1<u.length?s=!0:u=[],o&&1<o.length?i=!0:o=[];if(s||i)n=r?[o,u]:u;return n},splitWith:function(e,t){return e.split(this,t)},getVertices:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(e,t){var n=(!t||!1!==t.edge)&&t&&t.details,r,i={},s=Number.POSITIVE_INFINITY;if(e instanceof OpenLayers.Geometry.Point){for(var o=this.getSortedSegments(),u=e.x,a=e.y,f,l=0,c=o.length;l<c;++l)if(f=o[l],r=OpenLayers.Geometry.distanceToSegment(e,f),r.distance<s){if(s=r.distance,i=r,0===s)break}else if(f.x2>u&&(a>f.y1&&a<f.y2||a<f.y1&&a>f.y2))break;i=n?{distance:i.distance,x0:i.x,y0:i.y,x1:u,y1:a}:i.distance}else if(e instanceof OpenLayers.Geometry.LineString){var o=this.getSortedSegments(),u=e.getSortedSegments(),h,p,d=u.length,v={point:!0},l=0,c=o.length;e:for(;l<c;++l){a=o[l],f=a.x1,p=a.y1;for(var m=0;m<d;++m){if(r=u[m],h=OpenLayers.Geometry.segmentsIntersect(a,r,v)){s=0,i={distance:0,x0:h.x,y0:h.y,x1:h.x,y1:h.y};break e}r=OpenLayers.Geometry.distanceToSegment({x:f,y:p},r),r.distance<s&&(s=r.distance,i={distance:s,x0:f,y0:p,x1:r.x,y1:r.y})}}n||(i=i.distance),0!==s&&a&&(r=e.distanceTo(new OpenLayers.Geometry.Point(a.x2,a.y2),t),l=n?r.distance:r,l<s&&(i=n?{distance:s,x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0}:l))}else i=e.distanceTo(this,t),n&&(i={distance:i.distance,x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0});return i},simplify:function(e){if(this&&null!==this){var t=this.getVertices();if(3>t.length)return this;var n=function(e,t,r,s){for(var o=0,u=0,a=t,f;a<r;a++){f=e[t];var l=e[r],h=e[a],h=Math.abs(.5*(f.x*l.y+l.x*h.y+h.x*f.y-l.x*f.y-h.x*l.y-f.x*h.y));f=Math.sqrt(Math.pow(f.x-l.x,2)+Math.pow(f.y-l.y,2)),f=2*(h/f),f>o&&(o=f,u=a)}o>s&&u!=t&&(i.push(u),n(e,t,u,s),n(e,u,r,s))},r=t.length-1,i=[];i.push(0);for(i.push(r);t[0].equals(t[r]);)r--,i.push(r);n(t,0,r,e),e=[],i.sort(function(e,t){return e-t});for(r=0;r<i.length;r++)e.push(t[i[r]]);return new OpenLayers.Geometry.LineString(e)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(e,t){for(var n=null,r=t&&t.mutual,i,s,o,u,a=[],f=[e],l=0,c=this.components.length;l<c;++l){s=this.components[l],o=!1;for(var h=0;h<f.length;++h)if(i=s.split(f[h],t)){if(r){o=i[0];for(var p=0,d=o.length;p<d;++p)0===p&&a.length?a[a.length-1].addComponent(o[p]):a.push(new OpenLayers.Geometry.MultiLineString([o[p]]));o=!0,i=i[1]}if(i.length){i.unshift(h,1),Array.prototype.splice.apply(f,i);break}}o||(a.length?a[a.length-1].addComponent(s.clone()):a=[new OpenLayers.Geometry.MultiLineString(s.clone())])}a&&1<a.length?o=!0:a=[],f&&1<f.length?u=!0:f=[];if(o||u)n=r?[a,f]:f;return n},splitWith:function(e,t){var n=null,r=t&&t.mutual,i,s,o,u,a,f;if(e instanceof OpenLayers.Geometry.LineString){f=[],a=[e];for(var l=0,c=this.components.length;l<c;++l){o=!1,s=this.components[l];for(var h=0;h<a.length;++h)if(i=a[h].split(s,t)){r&&(o=i[0],o.length&&(o.unshift(h,1),Array.prototype.splice.apply(a,o),h+=o.length-2),i=i[1],0===i.length&&(i=[s.clone()])),o=0;for(var p=i.length;o<p;++o)0===o&&f.length?f[f.length-1].addComponent(i[o]):f.push(new OpenLayers.Geometry.MultiLineString([i[o]]));o=!0}o||(f.length?f[f.length-1].addComponent(s.clone()):f=[new OpenLayers.Geometry.MultiLineString([s.clone()])])}}else n=e.split(this);a&&1<a.length?u=!0:a=[],f&&1<f.length?o=!0:f=[];if(u||o)n=r?[a,f]:f;return n},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(e,t){var n=!1,r=this.components.pop();if(null!=t||!e.equals(r))n=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments);return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]),n},removeComponent:function(e){var t=this.components&&3<this.components.length;return t&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])),t},move:function(e,t){for(var n=0,r=this.components.length;n<r-1;n++)this.components[n].move(e,t)},rotate:function(e,t){for(var n=0,r=this.components.length;n<r-1;++n)this.components[n].rotate(e,t)},resize:function(e,t,n){for(var r=0,i=this.components.length;r<i-1;++r)this.components[r].resize(e,t,n);return this},transform:function(e,t){if(e&&t){for(var n=0,r=this.components.length;n<r-1;n++)this.components[n].transform(e,t);this.bounds=null}return this},getCentroid:function(){if(this.components&&2<this.components.length){for(var e=0,t=0,n=0;n<this.components.length-1;n++)var r=this.components[n],i=this.components[n+1],e=e+(r.x+i.x)*(r.x*i.y-i.x*r.y),t=t+(r.y+i.y)*(r.x*i.y-i.x*r.y);return n=-1*this.getArea(),new OpenLayers.Geometry.Point(e/(6*n),t/(6*n))}return null},getArea:function(){var e=0;if(this.components&&2<this.components.length){for(var t=e=0,n=this.components.length;t<n-1;t++)var r=this.components[t],i=this.components[t+1],e=e+(r.x+i.x)*(i.y-r.y);e=-e/2}return e},getGeodesicArea:function(e){var t=this;if(e){var n=new OpenLayers.Projection("EPSG:4326");n.equals(e)||(t=this.clone().transform(e,n))}e=0,n=t.components&&t.components.length;if(2<n){for(var r,i,s=0;s<n-1;s++)r=t.components[s],i=t.components[s+1],e+=OpenLayers.Util.rad(i.x-r.x)*(2+Math.sin(OpenLayers.Util.rad(r.y))+Math.sin(OpenLayers.Util.rad(i.y)));e=40680631590769*e/2}return e},containsPoint:function(e){for(var t=OpenLayers.Number.limitSigDigs,n=t(e.x,14),e=t(e.y,14),r=this.components.length-1,i,s,o,u,a,f=0,l=0;l<r;++l)if(i=this.components[l],o=t(i.x,14),i=t(i.y,14),s=this.components[l+1],u=t(s.x,14),s=t(s.y,14),i==s){if(e==i&&(o<=u&&n>=o&&n<=u||o>=u&&n<=o&&n>=u)){f=-1;break}}else{a=t((e-s)*((u-o)/(s-i))+u,14);if(a==n&&(i<s&&e>=i&&e<=s||i>s&&e<=i&&e>=s)){f=-1;break}a<=n||o!=u&&(a<Math.min(o,u)||a>Math.max(o,u))||(i<s&&e>=i&&e<s||i>s&&e<i&&e>=s)&&++f}return-1==f?1:!!(f&1)},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var n=0,r=e.components.length;n<r&&!(t=e.components[n].intersects(this));++n);return t},getVertices:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var e=0;if(this.components&&0<this.components.length)for(var e=e+Math.abs(this.components[0].getArea()),t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea());return e},getGeodesicArea:function(e){var t=0;if(this.components&&0<this.components.length)for(var t=t+Math.abs(this.components[0].getGeodesicArea(e)),n=1,r=this.components.length;n<r;n++)t-=Math.abs(this.components[n].getGeodesicArea(e));return t},containsPoint:function(e){var t=this.components.length,n=!1;if(0<t&&(n=this.components[0].containsPoint(e),1!==n&&n&&1<t))for(var r,i=1;i<t;++i)if(r=this.components[i].containsPoint(e)){n=1===r?1:!1;break}return n},intersects:function(e){var t=!1,n,r;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){n=0;for(r=this.components.length;n<r&&!(t=e.intersects(this.components[n]));++n);if(!t){n=0;for(r=e.components.length;n<r&&!(t=this.containsPoint(e.components[n]));++n);}}else{n=0;for(r=e.components.length;n<r&&!(t=this.intersects(e.components[n]));++n);}if(!t&&"OpenLayers.Geometry.Polygon"==e.CLASS_NAME){var i=this.components[0];n=0;for(r=i.components.length;n<r&&!(t=e.containsPoint(i.components[n]));++n);}return t},distanceTo:function(e,t){return t&&!1===t.edge&&this.intersects(e)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[e,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(e,t,n,r){var i=Math.PI*(1/n-.5);r&&(i+=r/180*Math.PI);for(var s,o=[],u=0;u<n;++u)s=i+2*u*Math.PI/n,r=e.x+t*Math.cos(s),s=e.y+t*Math.sin(s),o.push(new OpenLayers.Geometry.Point(r,s));return e=new OpenLayers.Geometry.LinearRing(o),new OpenLayers.Geometry.Polygon([e])},OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var e=this.getElementsByTagNameNS(e.documentElement,this.gmlns,this.featureName),t=[],n=0;n<e.length;n++){var r=this.parseFeature(e[n]);r&&t.push(r)}return t},parseFeature:function(e){for(var t="MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "),n,r,i,s=0;s<t.length;++s)if(n=t[s],r=this.getElementsByTagNameNS(e,this.gmlns,n),0<r.length){if(!(i=this.parseGeometry[n.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+n);i=i.apply(this,[r[0]]),this.internalProjection&&this.externalProjection&&i.transform(this.externalProjection,this.internalProjection);break}var o;n=this.getElementsByTagNameNS(e,this.gmlns,"Box");for(s=0;s<n.length;++s)t=n[s],r=this.parseGeometry.box.apply(this,[t]),t=t.parentNode,"boundedBy"===(t.localName||t.nodeName.split(":").pop())?o=r:i=r.toGeometry();var u;this.extractAttributes&&(u=this.parseAttributes(e)),u=new OpenLayers.Feature.Vector(i,u),u.bounds=o,u.gml={featureType:e.firstChild.nodeName.split(":")[1],featureNS:e.firstChild.namespaceURI,featureNSPrefix:e.firstChild.prefix};for(var e=e.firstChild,a;e&&(1!=e.nodeType||!(a=e.getAttribute("fid")||e.getAttribute("id")));)e=e.nextSibling;return u.fid=a,u},parseGeometry:{point:function(e){var t,n;return n=[],t=this.getElementsByTagNameNS(e,this.gmlns,"pos"),0<t.length&&(n=t[0].firstChild.nodeValue,n=n.replace(this.regExes.trimSpace,""),n=n.split(this.regExes.splitSpace)),0==n.length&&(t=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),0<t.length&&(n=t[0].firstChild.nodeValue,n=n.replace(this.regExes.removeSpace,""),n=n.split(","))),0==n.length&&(t=this.getElementsByTagNameNS(e,this.gmlns,"coord"),0<t.length&&(e=this.getElementsByTagNameNS(t[0],this.gmlns,"X"),t=this.getElementsByTagNameNS(t[0],this.gmlns,"Y"),0<e.length&&0<t.length&&(n=[e[0].firstChild.nodeValue,t[0].firstChild.nodeValue]))),2==n.length&&(n[2]=null),this.xy?new OpenLayers.Geometry.Point(n[0],n[1],n[2]):new OpenLayers.Geometry.Point(n[1],n[0],n[2])},multipoint:function(e){var e=this.getElementsByTagNameNS(e,this.gmlns,"Point"),t=[];if(0<e.length)for(var n,r=0;r<e.length;++r)(n=this.parseGeometry.point.apply(this,[e[r]]))&&t.push(n);return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e,t){var n,r;r=[];var i=[];n=this.getElementsByTagNameNS(e,this.gmlns,"posList");if(0<n.length){r=this.getChildValue(n[0]),r=r.replace(this.regExes.trimSpace,""),r=r.split(this.regExes.splitSpace);var s=parseInt(n[0].getAttribute("dimension")),o,u,a;for(n=0;n<r.length/s;++n)o=n*s,u=r[o],a=r[o+1],o=2==s?null:r[o+2],this.xy?i.push(new OpenLayers.Geometry.Point(u,a,o)):i.push(new OpenLayers.Geometry.Point(a,u,o))}if(0==r.length&&(n=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),0<n.length)){r=this.getChildValue(n[0]),r=r.replace(this.regExes.trimSpace,""),r=r.replace(this.regExes.trimComma,","),s=r.split(this.regExes.splitSpace);for(n=0;n<s.length;++n)r=s[n].split(","),2==r.length&&(r[2]=null),this.xy?i.push(new OpenLayers.Geometry.Point(r[0],r[1],r[2])):i.push(new OpenLayers.Geometry.Point(r[1],r[0],r[2]))}return r=null,0!=i.length&&(r=t?new OpenLayers.Geometry.LinearRing(i):new OpenLayers.Geometry.LineString(i)),r},multilinestring:function(e){var e=this.getElementsByTagNameNS(e,this.gmlns,"LineString"),t=[];if(0<e.length)for(var n,r=0;r<e.length;++r)(n=this.parseGeometry.linestring.apply(this,[e[r]]))&&t.push(n);return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){var e=this.getElementsByTagNameNS(e,this.gmlns,"LinearRing"),t=[];if(0<e.length)for(var n,r=0;r<e.length;++r)(n=this.parseGeometry.linestring.apply(this,[e[r],!0]))&&t.push(n);return new OpenLayers.Geometry.Polygon(t)},multipolygon:function(e){var e=this.getElementsByTagNameNS(e,this.gmlns,"Polygon"),t=[];if(0<e.length)for(var n,r=0;r<e.length;++r)(n=this.parseGeometry.polygon.apply(this,[e[r]]))&&t.push(n);return new OpenLayers.Geometry.MultiPolygon(t)},envelope:function(e){var t=[],n,r,i=this.getElementsByTagNameNS(e,this.gmlns,"lowerCorner");if(0<i.length){n=[],0<i.length&&(n=i[0].firstChild.nodeValue,n=n.replace(this.regExes.trimSpace,""),n=n.split(this.regExes.splitSpace)),2==n.length&&(n[2]=null);var s=this.xy?new OpenLayers.Geometry.Point(n[0],n[1],n[2]):new OpenLayers.Geometry.Point(n[1],n[0],n[2])}e=this.getElementsByTagNameNS(e,this.gmlns,"upperCorner");if(0<e.length){n=[],0<e.length&&(n=e[0].firstChild.nodeValue,n=n.replace(this.regExes.trimSpace,""),n=n.split(this.regExes.splitSpace)),2==n.length&&(n[2]=null);var o=this.xy?new OpenLayers.Geometry.Point(n[0],n[1],n[2]):new OpenLayers.Geometry.Point(n[1],n[0],n[2])}return s&&o&&(t.push(new OpenLayers.Geometry.Point(s.x,s.y)),t.push(new OpenLayers.Geometry.Point(o.x,s.y)),t.push(new OpenLayers.Geometry.Point(o.x,o.y)),t.push(new OpenLayers.Geometry.Point(s.x,o.y)),t.push(new OpenLayers.Geometry.Point(s.x,s.y)),t=new OpenLayers.Geometry.LinearRing(t),r=new OpenLayers.Geometry.Polygon([t])),r},box:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),n=e=null;0<t.length&&(t=t[0].firstChild.nodeValue,t=t.split(" "),2==t.length&&(e=t[0].split(","),n=t[1].split(",")));if(null!==e&&null!==n)return new OpenLayers.Bounds(parseFloat(e[0]),parseFloat(e[1]),parseFloat(n[0]),parseFloat(n[1]))}},parseAttributes:function(e){for(var t={},e=e.firstChild,n,r,i;e;){if(1==e.nodeType){e=e.childNodes;for(n=0;n<e.length;++n)if(r=e[n],1==r.nodeType)if(i=r.childNodes,1==i.length){if(i=i[0],3==i.nodeType||4==i.nodeType)r=r.prefix?r.nodeName.split(":")[1]:r.nodeName,i=i.nodeValue.replace(this.regExes.trimSpace,""),t[r]=i}else t[r.nodeName.split(":").pop()]=null;break}e=e.nextSibling}return t},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),n=0;n<e.length;n++)t.appendChild(this.createFeatureXML(e[n]));return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=this.buildGeometryNode(e.geometry),n=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName);n.appendChild(t);var t=this.createElementNS(this.gmlns,"gml:"+this.featureName),r=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName);r.setAttribute("fid",e.fid||e.id),r.appendChild(n);for(var i in e.attributes){var n=this.createTextNode(e.attributes[i]),s=this.createElementNS(this.featureNS,this.featurePrefix+":"+i.substring(i.lastIndexOf(":")+1));s.appendChild(n),r.appendChild(s)}return t.appendChild(r),t},buildGeometryNode:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t=e.CLASS_NAME;return this.buildGeometry[t.substring(t.lastIndexOf(".")+1).toLowerCase()].apply(this,[e])},buildGeometry:{point:function(e){var t=this.createElementNS(this.gmlns,"gml:Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){for(var t=this.createElementNS(this.gmlns,"gml:MultiPoint"),e=e.components,n,r,i=0;i<e.length;i++)n=this.createElementNS(this.gmlns,"gml:pointMember"),r=this.buildGeometry.point.apply(this,[e[i]]),n.appendChild(r),t.appendChild(n);return t},linestring:function(e){var t=this.createElementNS(this.gmlns,"gml:LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){for(var t=this.createElementNS(this.gmlns,"gml:MultiLineString"),e=e.components,n,r,i=0;i<e.length;++i)n=this.createElementNS(this.gmlns,"gml:lineStringMember"),r=this.buildGeometry.linestring.apply(this,[e[i]]),n.appendChild(r),t.appendChild(n);return t},linearring:function(e){var t=this.createElementNS(this.gmlns,"gml:LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t=this.createElementNS(this.gmlns,"gml:Polygon"),e=e.components,n,r,i=0;i<e.length;++i)n=0==i?"outerBoundaryIs":"innerBoundaryIs",n=this.createElementNS(this.gmlns,"gml:"+n),r=this.buildGeometry.linearring.apply(this,[e[i]]),n.appendChild(r),t.appendChild(n);return t},multipolygon:function(e){for(var t=this.createElementNS(this.gmlns,"gml:MultiPolygon"),e=e.components,n,r,i=0;i<e.length;++i)n=this.createElementNS(this.gmlns,"gml:polygonMember"),r=this.buildGeometry.polygon.apply(this,[e[i]]),n.appendChild(r),t.appendChild(n);return t},bounds:function(e){var t=this.createElementNS(this.gmlns,"gml:Box");return t.appendChild(this.buildCoordinatesNode(e)),t}},buildCoordinatesNode:function(e){var t=this.createElementNS(this.gmlns,"gml:coordinates");t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," ");var n=[];if(e instanceof OpenLayers.Bounds)n.push(e.left+","+e.bottom),n.push(e.right+","+e.top);else for(var e=e.components?e.components:[e],r=0;r<e.length;r++)n.push(e[r].x+","+e[r].y);return n=this.createTextNode(n.join(" ")),t.appendChild(n),t},CLASS_NAME:"OpenLayers.Format.GML"}),OpenLayers.Format.GML||(OpenLayers.Format.GML={}),OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.setGeometryTypes(),e&&e.featureNS&&this.setNamespace("feature",e.featureNS),this.singleFeatureType=!e||typeof e.featureType=="string"},read:function(e){typeof e=="string"&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&e.nodeType==9&&(e=e.documentElement);var t=[];this.readNode(e,{features:t},!0);if(t.length==0){var n=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");if(n.length)for(var e=0,r=n.length;e<r;++e)this.readNode(n[e],{features:t},!0);else n=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMembers"),n.length&&this.readNode(n[0],{features:t},!0)}return t},readNode:function(e,t,n){return n===!0&&this.autoConfig===!0&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null),!this.featureNS&&!(e.prefix in this.namespaces)&&e.parentNode.namespaceURI==this.namespaces.gml&&this.regExes.featureMember.test(e.parentNode.nodeName)&&(this.featureType=e.nodeName.split(":").pop(),this.setNamespace("feature",e.namespaceURI),this.featureNS=e.namespaceURI,this.autoConfig=!0),OpenLayers.Format.XML.prototype.readNode.apply(this,[e,t])},readers:{gml:{featureMember:function(e,t){this.readChildNodes(e,t)},featureMembers:function(e,t){this.readChildNodes(e,t)},name:function(e,t){t.name=this.getChildValue(e)},boundedBy:function(e,t){var n={};this.readChildNodes(e,n),n.components&&n.components.length>0&&(t.bounds=n.components[0])},Point:function(e,t){var n={points:[]};this.readChildNodes(e,n),t.components||(t.components=[]),t.components.push(n.points[0])},coordinates:function(e,t){for(var n=this.getChildValue(e).replace(this.regExes.trimSpace,""),n=n.replace(this.regExes.trimComma,","),n=n.split(this.regExes.splitSpace),r,i=n.length,s=Array(i),o=0;o<i;++o)r=n[o].split(","),s[o]=this.xy?new OpenLayers.Geometry.Point(r[0],r[1],r[2]):new OpenLayers.Geometry.Point(r[1],r[0],r[2]);t.points=s},coord:function(e,t){var n={};this.readChildNodes(e,n),t.points||(t.points=[]),t.points.push(new OpenLayers.Geometry.Point(n.x,n.y,n.z))},X:function(e,t){t.x=this.getChildValue(e)},Y:function(e,t){t.y=this.getChildValue(e)},Z:function(e,t){t.z=this.getChildValue(e)},MultiPoint:function(e,t){var n={components:[]};this.readChildNodes(e,n),t.components=[new OpenLayers.Geometry.MultiPoint(n.components)]},pointMember:function(e,t){this.readChildNodes(e,t)},LineString:function(e,t){var n={};this.readChildNodes(e,n),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(n.points))},MultiLineString:function(e,t){var n={components:[]};this.readChildNodes(e,n),t.components=[new OpenLayers.Geometry.MultiLineString(n.components)]},lineStringMember:function(e,t){this.readChildNodes(e,t)},Polygon:function(e,t){var n={outer:null,inner:[]};this.readChildNodes(e,n),n.inner.unshift(n.outer),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.Polygon(n.inner))},LinearRing:function(e,t){var n={};this.readChildNodes(e,n),t.components=[new OpenLayers.Geometry.LinearRing(n.points)]},MultiPolygon:function(e,t){var n={components:[]};this.readChildNodes(e,n),t.components=[new OpenLayers.Geometry.MultiPolygon(n.components)]},polygonMember:function(e,t){this.readChildNodes(e,t)},GeometryCollection:function(e,t){var n={components:[]};this.readChildNodes(e,n),t.components=[new OpenLayers.Geometry.Collection(n.components)]},geometryMember:function(e,t){this.readChildNodes(e,t)}},feature:{"*":function(e,t){var n,r=e.localName||e.nodeName.split(":").pop();t.features?!this.singleFeatureType&&OpenLayers.Util.indexOf(this.featureType,r)!==-1?n="_typeName":r===this.featureType&&(n="_typeName"):e.childNodes.length==0||e.childNodes.length==1&&e.firstChild.nodeType==3?this.extractAttributes&&(n="_attribute"):n="_geometry",n&&this.readers.feature[n].apply(this,[e,t])},_typeName:function(e,t){var n={components:[],attributes:{}};this.readChildNodes(e,n),n.name&&(n.attributes.name=n.name);var r=new OpenLayers.Feature.Vector(n.components[0],n.attributes);this.singleFeatureType||(r.type=e.nodeName.split(":").pop(),r.namespace=e.namespaceURI);var i=e.getAttribute("fid")||this.getAttributeNS(e,this.namespaces.gml,"id");i&&(r.fid=i),this.internalProjection&&this.externalProjection&&r.geometry&&r.geometry.transform(this.externalProjection,this.internalProjection),n.bounds&&(r.bounds=n.bounds),t.features.push(r)},_geometry:function(e,t){this.geometryName||(this.geometryName=e.nodeName.split(":").pop()),this.readChildNodes(e,t)},_attribute:function(e,t){var n=e.localName||e.nodeName.split(":").pop(),r=this.getChildValue(e);t.attributes[n]=r}},wfs:{FeatureCollection:function(e,t){this.readChildNodes(e,t)}}},write:function(e){return e=this.writeNode("gml:"+(OpenLayers.Util.isArray(e)?"featureMembers":"featureMember"),e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:{featureMember:function(e){var t=this.createElementNSPlus("gml:featureMember");return this.writeNode("feature:_typeName",e,t),t},MultiPoint:function(e){for(var t=this.createElementNSPlus("gml:MultiPoint"),e=e.components||[e],n=0,r=e.length;n<r;++n)this.writeNode("pointMember",e[n],t);return t},pointMember:function(e){var t=this.createElementNSPlus("gml:pointMember");return this.writeNode("Point",e,t),t},MultiLineString:function(e){for(var t=this.createElementNSPlus("gml:MultiLineString"),e=e.components||[e],n=0,r=e.length;n<r;++n)this.writeNode("lineStringMember",e[n],t);return t},lineStringMember:function(e){var t=this.createElementNSPlus("gml:lineStringMember");return this.writeNode("LineString",e,t),t},MultiPolygon:function(e){for(var t=this.createElementNSPlus("gml:MultiPolygon"),e=e.components||[e],n=0,r=e.length;n<r;++n)this.writeNode("polygonMember",e[n],t);return t},polygonMember:function(e){var t=this.createElementNSPlus("gml:polygonMember");return this.writeNode("Polygon",e,t),t},GeometryCollection:function(e){for(var t=this.createElementNSPlus("gml:GeometryCollection"),n=0,r=e.components.length;n<r;++n)this.writeNode("geometryMember",e.components[n],t);return t},geometryMember:function(e){var t=this.createElementNSPlus("gml:geometryMember"),e=this.writeNode("feature:_geometry",e);return t.appendChild(e.firstChild),t}},feature:{_typeName:function(e){var t=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:e.fid}});e.geometry&&this.writeNode("feature:_geometry",e.geometry,t);for(var n in e.attributes){var r=e.attributes[n];r!=null&&this.writeNode("feature:_attribute",{name:n,value:r},t)}return t},_geometry:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone().transform(this.internalProjection,this.externalProjection));var t=this.createElementNSPlus("feature:"+this.geometryName),e=this.writeNode("gml:"+this.geometryTypes[e.CLASS_NAME],e,t);return this.srsName&&e.setAttribute("srsName",this.srsName),t},_attribute:function(e){return this.createElementNSPlus("feature:"+e.name,{value:e.value})}},wfs:{FeatureCollection:function(e){for(var t=this.createElementNSPlus("wfs:FeatureCollection"),n=0,r=e.length;n<r;++n)this.writeNode("gml:featureMember",e[n],t);return t}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"}),OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:!1,multiCurve:!0,surface:!1,multiSurface:!0,initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(e,t){this.readChildNodes(e,t)},Curve:function(e,t){var n={points:[]};this.readChildNodes(e,n),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(n.points))},segments:function(e,t){this.readChildNodes(e,t)},LineStringSegment:function(e,t){var n={};this.readChildNodes(e,n),n.points&&Array.prototype.push.apply(t.points,n.points)},pos:function(e,t){var n=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),n=this.xy?new OpenLayers.Geometry.Point(n[0],n[1],n[2]):new OpenLayers.Geometry.Point(n[1],n[0],n[2]);t.points=[n]},posList:function(e,t){for(var n=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(this.regExes.splitSpace),r=parseInt(e.getAttribute("dimension"))||2,i,s,o,u=Array(n.length/r),a=0,f=n.length;a<f;a+=r)i=n[a],s=n[a+1],o=2==r?void 0:n[a+2],u[a/r]=this.xy?new OpenLayers.Geometry.Point(i,s,o):new OpenLayers.Geometry.Point(s,i,o);t.points=u},Surface:function(e,t){this.readChildNodes(e,t)},patches:function(e,t){this.readChildNodes(e,t)},PolygonPatch:function(e,t){this.readers.gml.Polygon.apply(this,[e,t])},exterior:function(e,t){var n={};this.readChildNodes(e,n),t.outer=n.components[0]},interior:function(e,t){var n={};this.readChildNodes(e,n),t.inner.push(n.components[0])},MultiCurve:function(e,t){var n={components:[]};this.readChildNodes(e,n),0<n.components.length&&(t.components=[new OpenLayers.Geometry.MultiLineString(n.components)])},curveMember:function(e,t){this.readChildNodes(e,t)},MultiSurface:function(e,t){var n={components:[]};this.readChildNodes(e,n),0<n.components.length&&(t.components=[new OpenLayers.Geometry.MultiPolygon(n.components)])},surfaceMember:function(e,t){this.readChildNodes(e,t)},surfaceMembers:function(e,t){this.readChildNodes(e,t)},pointMembers:function(e,t){this.readChildNodes(e,t)},lineStringMembers:function(e,t){this.readChildNodes(e,t)},polygonMembers:function(e,t){this.readChildNodes(e,t)},geometryMembers:function(e,t){this.readChildNodes(e,t)},Envelope:function(e,t){var n={points:Array(2)};this.readChildNodes(e,n),t.components||(t.components=[]);var r=n.points[0],n=n.points[1];t.components.push(new OpenLayers.Bounds(r.x,r.y,n.x,n.y))},lowerCorner:function(e,t){var n={};this.readers.gml.pos.apply(this,[e,n]),t.points[0]=n.points[0]},upperCorner:function(e,t){var n={};this.readers.gml.pos.apply(this,[e,n]),t.points[1]=n.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){return e=this.writeNode("gml:"+(OpenLayers.Util.isArray(e)?"featureMembers":"featureMember"),e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(e){for(var t=this.createElementNSPlus("gml:featureMembers"),n=0,r=e.length;n<r;++n)this.writeNode("feature:_typeName",e[n],t);return t},Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("pos",e,t),t},pos:function(e){return this.createElementNSPlus("gml:pos",{value:this.xy?e.x+" "+e.y:e.y+" "+e.x})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("posList",e.components,t),t},Curve:function(e){var t=this.createElementNSPlus("gml:Curve");return this.writeNode("segments",e,t),t},segments:function(e){var t=this.createElementNSPlus("gml:segments");return this.writeNode("LineStringSegment",e,t),t},LineStringSegment:function(e){var t=this.createElementNSPlus("gml:LineStringSegment");return this.writeNode("posList",e.components,t),t},posList:function(e){for(var t=e.length,n=Array(t),r,i=0;i<t;++i)r=e[i],n[i]=this.xy?r.x+" "+r.y:r.y+" "+r.x;return this.createElementNSPlus("gml:posList",{value:n.join(" ")})},Surface:function(e){var t=this.createElementNSPlus("gml:Surface");return this.writeNode("patches",e,t),t},patches:function(e){var t=this.createElementNSPlus("gml:patches");return this.writeNode("PolygonPatch",e,t),t},PolygonPatch:function(e){var t=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});this.writeNode("exterior",e.components[0],t);for(var n=1,r=e.components.length;n<r;++n)this.writeNode("interior",e.components[n],t);return t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",e.components[0],t);for(var n=1,r=e.components.length;n<r;++n)this.writeNode("interior",e.components[n],t);return t},exterior:function(e){var t=this.createElementNSPlus("gml:exterior");return this.writeNode("LinearRing",e,t),t},interior:function(e){var t=this.createElementNSPlus("gml:interior");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("posList",e.components,t),t},MultiCurve:function(e){for(var t=this.createElementNSPlus("gml:MultiCurve"),e=e.components||[e],n=0,r=e.length;n<r;++n)this.writeNode("curveMember",e[n],t);return t},curveMember:function(e){var t=this.createElementNSPlus("gml:curveMember");return this.curve?this.writeNode("Curve",e,t):this.writeNode("LineString",e,t),t},MultiSurface:function(e){for(var t=this.createElementNSPlus("gml:MultiSurface"),e=e.components||[e],n=0,r=e.length;n<r;++n)
this.writeNode("surfaceMember",e[n],t);return t},surfaceMember:function(e){var t=this.createElementNSPlus("gml:surfaceMember");return this.surface?this.writeNode("Surface",e,t):this.writeNode("Polygon",e,t),t},Envelope:function(e){var t=this.createElementNSPlus("gml:Envelope");return this.writeNode("lowerCorner",e,t),this.writeNode("upperCorner",e,t),this.srsName&&t.setAttribute("srsName",this.srsName),t},lowerCorner:function(e){return this.createElementNSPlus("gml:lowerCorner",{value:this.xy?e.left+" "+e.bottom:e.bottom+" "+e.left})},upperCorner:function(e){return this.createElementNSPlus("gml:upperCorner",{value:this.xy?e.right+" "+e.top:e.top+" "+e.right})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.curve?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":!1===this.multiCurve?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":!0===this.surface?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":!1===this.multiSurface?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"}),OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var n=e.getAttribute("matchCase"),n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:"false"!==n&&"0"!==n});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsNotEqualTo:function(e,t){var n=e.getAttribute("matchCase"),n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:"false"!==n&&"0"!==n});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsLike:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(e,n);var r=e.getAttribute("wildCard"),i=e.getAttribute("singleChar"),s=e.getAttribute("escapeChar");n.value2regex(r,i,s),t.filters.push(n)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:e.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX");e.property&&this.writeNode("PropertyName",e,t);var n=this.writeNode("gml:Envelope",e.value);return e.projection&&n.setAttribute("srsName",e.projection),t.appendChild(n),t},SortBy:function(e){for(var t=this.createElementNSPlus("ogc:SortBy"),n=0,r=e.length;n<r;n++)this.writeNode("ogc:SortProperty",e[n],t);return t},SortProperty:function(e){var t=this.createElementNSPlus("ogc:SortProperty");return this.writeNode("ogc:PropertyName",e,t),this.writeNode("ogc:SortOrder","DESC"==e.order?"DESC":"ASC",t),t},SortOrder:function(e){return this.createElementNSPlus("ogc:SortOrder",{value:e})}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(e,t){var n=this.createElementNSPlus("ogc:"+t);this.writeNode("PropertyName",e,n);if(e.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",e.value,n);else{var r;r=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Envelope",e.value),e.projection&&r.setAttribute("srsName",e.projection),n.appendChild(r)}return n},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"}),OpenLayers.Format.OWSCommon=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",getVersion:function(e){var t=this.version;return t||((e=e.getAttribute("xmlns:ows"))&&"1.1"===e.substring(e.lastIndexOf("/")+1)&&(t="1.1.0"),t||(t=this.defaultVersion)),t},CLASS_NAME:"OpenLayers.Format.OWSCommon"}),OpenLayers.Format.OWSCommon.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e,t){OpenLayers.Util.applyDefaults(t,this.options);var n={};return this.readChildNodes(e,n),n},readers:{ows:{Exception:function(e,t){var n={code:e.getAttribute("exceptionCode"),locator:e.getAttribute("locator"),texts:[]};t.exceptions.push(n),this.readChildNodes(e,n)},ExceptionText:function(e,t){var n=this.getChildValue(e);t.texts.push(n)},ServiceIdentification:function(e,t){t.serviceIdentification={},this.readChildNodes(e,t.serviceIdentification)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t["abstract"]=this.getChildValue(e)},Keywords:function(e,t){t.keywords={},this.readChildNodes(e,t.keywords)},Keyword:function(e,t){t[this.getChildValue(e)]=!0},ServiceType:function(e,t){t.serviceType={codeSpace:e.getAttribute("codeSpace"),value:this.getChildValue(e)}},ServiceTypeVersion:function(e,t){t.serviceTypeVersion=this.getChildValue(e)},Fees:function(e,t){t.fees=this.getChildValue(e)},AccessConstraints:function(e,t){t.accessConstraints=this.getChildValue(e)},ServiceProvider:function(e,t){t.serviceProvider={},this.readChildNodes(e,t.serviceProvider)},ProviderName:function(e,t){t.providerName=this.getChildValue(e)},ProviderSite:function(e,t){t.providerSite=this.getAttributeNS(e,this.namespaces.xlink,"href")},ServiceContact:function(e,t){t.serviceContact={},this.readChildNodes(e,t.serviceContact)},IndividualName:function(e,t){t.individualName=this.getChildValue(e)},PositionName:function(e,t){t.positionName=this.getChildValue(e)},ContactInfo:function(e,t){t.contactInfo={},this.readChildNodes(e,t.contactInfo)},Phone:function(e,t){t.phone={},this.readChildNodes(e,t.phone)},Voice:function(e,t){t.voice=this.getChildValue(e)},Address:function(e,t){t.address={},this.readChildNodes(e,t.address)},DeliveryPoint:function(e,t){t.deliveryPoint=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},AdministrativeArea:function(e,t){t.administrativeArea=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ElectronicMailAddress:function(e,t){t.electronicMailAddress=this.getChildValue(e)},Role:function(e,t){t.role=this.getChildValue(e)},OperationsMetadata:function(e,t){t.operationsMetadata={},this.readChildNodes(e,t.operationsMetadata)},Operation:function(e,t){var n=e.getAttribute("name");t[n]={},this.readChildNodes(e,t[n])},DCP:function(e,t){t.dcp={},this.readChildNodes(e,t.dcp)},HTTP:function(e,t){t.http={},this.readChildNodes(e,t.http)},Get:function(e,t){t.get||(t.get=[]);var n={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,n),t.get.push(n)},Post:function(e,t){t.post||(t.post=[]);var n={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,n),t.post.push(n)},Parameter:function(e,t){t.parameters||(t.parameters={});var n=e.getAttribute("name");t.parameters[n]={},this.readChildNodes(e,t.parameters[n])},Constraint:function(e,t){t.constraints||(t.constraints={});var n=e.getAttribute("name");t.constraints[n]={},this.readChildNodes(e,t.constraints[n])},Value:function(e,t){t[this.getChildValue(e)]=!0},OutputFormat:function(e,t){t.formats.push({value:this.getChildValue(e)}),this.readChildNodes(e,t)},WGS84BoundingBox:function(e,t){var n={};n.crs=e.getAttribute("crs"),t.BoundingBox?t.BoundingBox.push(n):(t.projection=n.crs,n=t),this.readChildNodes(e,n)},BoundingBox:function(e,t){this.readers.ows.WGS84BoundingBox.apply(this,[e,t])},LowerCorner:function(e,t){var n=this.getChildValue(e).replace(this.regExes.trimSpace,""),n=n.replace(this.regExes.trimComma,","),n=n.split(this.regExes.splitSpace);t.left=n[0],t.bottom=n[1]},UpperCorner:function(e,t){var n=this.getChildValue(e).replace(this.regExes.trimSpace,""),n=n.replace(this.regExes.trimComma,","),n=n.split(this.regExes.splitSpace);t.right=n[0],t.top=n[1],t.bounds=new OpenLayers.Bounds(t.left,t.bottom,t.right,t.top),delete t.left,delete t.bottom,delete t.right,delete t.top},Language:function(e,t){t.language=this.getChildValue(e)}}},writers:{ows:{BoundingBox:function(e){var t=this.createElementNSPlus("ows:BoundingBox",{attributes:{crs:e.projection}});return this.writeNode("ows:LowerCorner",e,t),this.writeNode("ows:UpperCorner",e,t),t},LowerCorner:function(e){return this.createElementNSPlus("ows:LowerCorner",{value:e.bounds.left+" "+e.bounds.bottom})},UpperCorner:function(e){return this.createElementNSPlus("ows:UpperCorner",{value:e.bounds.right+" "+e.bounds.top})},Identifier:function(e){return this.createElementNSPlus("ows:Identifier",{value:e})},Title:function(e){return this.createElementNSPlus("ows:Title",{value:e})},Abstract:function(e){return this.createElementNSPlus("ows:Abstract",{value:e})},OutputFormat:function(e){return this.createElementNSPlus("ows:OutputFormat",{value:e})}}},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1"}),OpenLayers.Format.OWSCommon.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.success=!1,t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("language"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Format.OWSCommon.v1.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_0_0"}),OpenLayers.Format.WFST.v1_1_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0,OpenLayers.Format.WFST.v1,{version:"1.1.0",schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t){return OpenLayers.Format.GML.v3.prototype.readNode.apply(this,[e,t])},readers:{wfs:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){t.numberOfFeatures=parseInt(e.getAttribute("numberOfFeatures")),OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this,arguments)},TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},TransactionSummary:function(e,t){t.success=!0},InsertResults:function(e,t){this.readChildNodes(e,t)},Feature:function(e,t){var n={fids:[]};this.readChildNodes(e,n),t.insertIds.push(n.fids[0])}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows},writers:{wfs:OpenLayers.Util.applyDefaults({GetFeature:function(e){var t=OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this,arguments);return e&&this.setAttributes(t,{resultType:e.resultType,startIndex:e.startIndex,count:e.count}),t},Query:function(e){var e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName},e),t=e.featurePrefix,n=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType,srsName:e.srsName}});e.featureNS&&n.setAttribute("xmlns:"+t,e.featureNS);if(e.propertyNames)for(var t=0,r=e.propertyNames.length;t<r;t++)this.writeNode("wfs:PropertyName",{property:e.propertyNames[t]},n);return e.filter&&(OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this,e.filter),this.writeNode("ogc:Filter",e.filter,n)),n},PropertyName:function(e){return this.createElementNSPlus("wfs:PropertyName",{value:e.property})}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_1_0"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(e){e=e||{},OpenLayers.Util.extend(this,e),this.options=e},mergeWithDefaultFilter:function(e){return e&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,e]}):e||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(e){e=e||{},e.filter=this.mergeWithDefaultFilter(e.filter)},create:function(){},update:function(){},"delete":function(){},commit:function(){},abort:function(){},createCallback:function(e,t,n){return OpenLayers.Function.bind(function(){e.apply(this,[t,n])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(e){OpenLayers.Util.extend(this,e)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!!window.JSON&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"==typeof b)){var d=function(e,t){if(t&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(t[n]=d(n,t[n]));return b(e,t)};c=d("",c)}}catch(e){}return this.keepData&&(this.data=c),c},write:function(e,t){this.pretty=!!t;var n=null,r=typeof e;if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch(i){OpenLayers.Console.error("Trouble serializing: "+i)}return n},writeIndent:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(e){if(null==e)return"null";if(e.constructor==Date)return this.serialize.date.apply(this,[e]);if(e.constructor==Array)return this.serialize.array.apply(this,[e]);var t=["{"];this.level+=1;var n,r,i,s=!1;for(n in e)e.hasOwnProperty(n)&&(r=OpenLayers.Format.JSON.prototype.write.apply(this,[n,this.pretty]),i=OpenLayers.Format.JSON.prototype.write.apply(this,[e[n],this.pretty]),null!=r&&null!=i&&(s&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),i),s=!0));return this.level-=1,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,i=e.length;r<i;++r)t=OpenLayers.Format.JSON.prototype.write.apply(this,[e[r],this.pretty]),null!=t&&(0<r&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r?r:(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?""+e:"null"},"boolean":function(e){return""+e},date:function(e){function t(e){return 10>e?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(e,t,n){var t=t?t:"FeatureCollection",r=null,i=null;if(i="string"==typeof e?OpenLayers.Format.JSON.prototype.read.apply(this,[e,n]):e){if("string"!=typeof i.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+e);else if(this.isValidType(i,t))switch(t){case"Geometry":try{r=this.parseGeometry(i)}catch(s){OpenLayers.Console.error(s)}break;case"Feature":try{r=this.parseFeature(i),r.type="Feature"}catch(o){OpenLayers.Console.error(o)}break;case"FeatureCollection":switch(r=[],i.type){case"Feature":try{r.push(this.parseFeature(i))}catch(u){r=null,OpenLayers.Console.error(u)}break;case"FeatureCollection":e=0;for(t=i.features.length;e<t;++e)try{r.push(this.parseFeature(i.features[e]))}catch(a){r=null,OpenLayers.Console.error(a)}break;default:try{var f=this.parseGeometry(i);r.push(new OpenLayers.Feature.Vector(f))}catch(l){r=null,OpenLayers.Console.error(l)}}}}else OpenLayers.Console.error("Bad JSON: "+e);return r},isValidType:function(e,t){var n=!1;switch(t){case"Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),e.type)?OpenLayers.Console.error("Unsupported geometry type: "+e.type):n=!0;break;case"FeatureCollection":n=!0;break;default:e.type==t?n=!0:OpenLayers.Console.error("Cannot convert types from "+e.type+" to "+t)}return n},parseFeature:function(e){var t,n,r;n=e.properties?e.properties:{},r=e.geometry&&e.geometry.bbox||e.bbox;try{t=this.parseGeometry(e.geometry)}catch(i){throw i}return t=new OpenLayers.Feature.Vector(t,n),r&&(t.bounds=OpenLayers.Bounds.fromArray(r)),e.id&&(t.fid=e.id),t},parseGeometry:function(e){if(null==e)return null;var t,n=!1;if("GeometryCollection"==e.type){if(!OpenLayers.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;t=e.geometries.length;for(var n=Array(t),r=0;r<t;++r)n[r]=this.parseGeometry.apply(this,[e.geometries[r]]);t=new OpenLayers.Geometry.Collection(n),n=!0}else{if(!OpenLayers.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(i){throw i}}return this.internalProjection&&this.externalProjection&&!n&&t.transform(this.externalProjection,this.internalProjection),t},parseCoords:{point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new OpenLayers.Geometry.Point(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(s){throw s}t.push(n)}return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(s){throw s}t.push(n)}return new OpenLayers.Geometry.LineString(t)},multilinestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(s){throw s}t.push(n)}return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){for(var t=[],n,r,i=0,s=e.length;i<s;++i){try{r=this.parseCoords.linestring.apply(this,[e[i]])}catch(o){throw o}n=new OpenLayers.Geometry.LinearRing(r.components),t.push(n)}return new OpenLayers.Geometry.Polygon(t)},multipolygon:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.polygon.apply(this,[e[r]])}catch(s){throw s}t.push(n)}return new OpenLayers.Geometry.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[0][1])])])}},write:function(e,t){var n={type:null};if(OpenLayers.Util.isArray(e)){n.type="FeatureCollection";var r=e.length;n.features=Array(r);for(var i=0;i<r;++i){var s=e[i];if(!s instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+s;n.features[i]=this.extract.feature.apply(this,[s])}}else 0==e.CLASS_NAME.indexOf("OpenLayers.Geometry")?n=this.extract.geometry.apply(this,[e]):e instanceof OpenLayers.Feature.Vector&&(n=this.extract.feature.apply(this,[e]),e.layer&&e.layer.projection&&(n.crs=this.createCRSObject(e)));return OpenLayers.Format.JSON.prototype.write.apply(this,[n,t])},createCRSObject:function(e){var e=e.layer.projection.toString(),t={};return e.match(/epsg:/i)&&(e=parseInt(e.substring(e.indexOf(":")+1)),t=4326==e?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+e}}),t},extract:{feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),t={type:"Feature",properties:e.attributes,geometry:t};return null!=e.fid&&(t.id=e.fid),t},geometry:function(e){if(null==e)return null;this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t=e.CLASS_NAME.split(".")[2],e=this.extract[t.toLowerCase()].apply(this,[e]);return"Collection"==t?{type:"GeometryCollection",geometries:e}:{type:t,coordinates:e}},point:function(e){return[e.x,e.y]},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=Array(t),r=0;r<t;++r)n[r]=this.extract.geometry.apply(this,[e.components[r]]);return n}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Protocol.Script=OpenLayers.Class(OpenLayers.Protocol,{url:null,params:null,callback:null,callbackTemplate:"OpenLayers.Protocol.Script.registry.${id}",callbackKey:"callback",callbackPrefix:"",scope:null,format:null,pendingRequests:null,srsInBBOX:!1,initialize:function(e){e=e||{},this.params={},this.pendingRequests={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),this.format||(this.format=new OpenLayers.Format.GeoJSON);if(!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,n){return t.write(e,n)}}},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=OpenLayers.Util.applyDefaults(e,this.options),e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=new OpenLayers.Protocol.Response({requestType:"read"}),n=this.createRequest(e.url,e.params,OpenLayers.Function.bind(function(n){t.data=n,this.handleRead(t,e)},this));return t.priv=n,t},createRequest:function(e,t,n){var n=OpenLayers.Protocol.Script.register(n),r=OpenLayers.String.format(this.callbackTemplate,{id:n}),t=OpenLayers.Util.extend({},t);return t[this.callbackKey]=this.callbackPrefix+r,e=OpenLayers.Util.urlAppend(e,OpenLayers.Util.getParameterString(t)),t=document.createElement("script"),t.type="text/javascript",t.src=e,t.id="OpenLayers_Protocol_Script_"+n,this.pendingRequests[t.id]=t,document.getElementsByTagName("head")[0].appendChild(t),t},destroyRequest:function(e){OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()),delete this.pendingRequests[e.id],e.parentNode&&e.parentNode.removeChild(e)},handleRead:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){t.callback&&(e.data?(e.features=this.parseFeatures(e.data),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,this.destroyRequest(e.priv),t.callback.call(t.scope,e))},parseFeatures:function(e){return this.format.read(e)},abort:function(e){if(e)this.destroyRequest(e.priv);else for(var t in this.pendingRequests)this.destroyRequest(this.pendingRequests[t])},destroy:function(){this.abort(),delete this.params,delete this.format,OpenLayers.Protocol.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Protocol.Script"}),function(){var e=OpenLayers.Protocol.Script,t=0;e.registry={},e.register=function(n){var r="c"+ ++t;return e.registry[r]=function(){n.apply(this,arguments)},r},e.unregister=function(t){delete e.registry[t]}}(),OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.controls=[],this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var e,t=this.controls.length-1;0<=t;t--)e=this.controls[t],e.events&&e.events.un({activate:this.iconOn,deactivate:this.iconOff}),e.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var e,t=0,n=this.controls.length;t<n;t++)e=this.controls[t],(e===this.defaultControl||this.saveState&&this.activeState[e.id])&&e.activate();return!0===this.saveState&&(this.defaultControl=null),this.redraw(),!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var e,t=0,n=this.controls.length;t<n;t++)e=this.controls[t],this.activeState[e.id]=e.deactivate();return this.redraw(),!0}return!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick),this.addControlsToMap(this.controls),this.div},redraw:function(){for(var e=this.div.childNodes.length-1;0<=e;e--)this.div.removeChild(this.div.childNodes[e]);this.div.innerHTML="";if(this.active)for(var e=0,t=this.controls.length;e<t;e++)this.div.appendChild(this.controls[e].panel_div)},activateControl:function(e){if(!this.active)return!1;if(e.type==OpenLayers.Control.TYPE_BUTTON)e.trigger();else if(e.type==OpenLayers.Control.TYPE_TOGGLE)e.active?e.deactivate():e.activate();else if(this.allowDepress&&e.active)e.deactivate();else{for(var t,n=0,r=this.controls.length;n<r;n++)t=this.controls[n],t!=e&&(t.type===OpenLayers.Control.TYPE_TOOL||null==t.type)&&t.deactivate();e.activate()}},addControls:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.controls=this.controls.concat(e);for(var t=0,n=e.length;t<n;t++){var r=e[t],i=this.createControlMarkup(r);OpenLayers.Element.addClass(i,r.displayClass+"ItemInactive"),OpenLayers.Element.addClass(i,"olButton"),""!=r.title&&!i.title&&(i.title=r.title),r.panel_div=i}this.map&&(this.addControlsToMap(e),this.redraw())},createControlMarkup:function(){return document.createElement("div")},addControlsToMap:function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],!0===t.autoActivate?(t.autoActivate=!1,this.map.addControl(t),t.autoActivate=!0):(this.map.addControl(t),t.deactivate()),t.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var e=this.panel_div;e.className=e.className.replace(RegExp("\\b("+this.displayClass+"Item)Inactive\\b"),"$1Active")},iconOff:function(){var e=this.panel_div;e.className=e.className.replace(RegExp("\\b("+this.displayClass+"Item)Active\\b"),"$1Inactive")},onButtonClick:function(e){for(var t=this.controls,e=e.buttonElement,n=t.length-1;0<=n;--n)if(t[n].panel_div===e){this.activateControl(t[n]);break}},getControlsBy:function(e,t){var n="function"==typeof t.test;return OpenLayers.Array.filter(this.controls,function(r){return r[e]==t||n&&t.test(r[e])})},getControlsByName:function(e){return this.getControlsBy("name",e)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},CLASS_NAME:"OpenLayers.Control.Panel"}),OpenLayers.Control.ZoomIn=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomIn()},CLASS_NAME:"OpenLayers.Control.ZoomIn"}),OpenLayers.Control.ZoomOut=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomOut()},CLASS_NAME:"OpenLayers.Control.ZoomOut"}),OpenLayers.Control.ZoomToMaxExtent=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map&&this.map.zoomToMaxExtent()},CLASS_NAME:"OpenLayers.Control.ZoomToMaxExtent"}),OpenLayers.Control.ZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.ZoomIn,new OpenLayers.Control.ZoomToMaxExtent,new OpenLayers.Control.ZoomOut])},CLASS_NAME:"OpenLayers.Control.ZoomPanel"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(e,t,n,r){OpenLayers.Layer.prototype.initialize.apply(this,[e,r]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},n))},destroy:function(){this.params=this.url=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setUrl:function(e){this.url=e},mergeNewParams:function(e){return this.params=OpenLayers.Util.extend(this.params,e),e=this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),e},redraw:function(e){return e?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(e,t){for(var n=1,r=0,i=e.length;r<i;r++)n*=e.charCodeAt(r)*this.URL_HASH_FACTOR,n-=Math.floor(n);return t[Math.floor(n*t.length)]},getFullRequestString:function(e,t){var n=t||this.url,r=OpenLayers.Util.extend({},this.params),r=OpenLayers.Util.extend(r,e),i=OpenLayers.Util.getParameterString(r);OpenLayers.Util.isArray(n)&&(n=this.selectUrl(i,n));var i=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(n)),s;for(s in r)s.toUpperCase()in i&&delete r[s];return i=OpenLayers.Util.getParameterString(r),OpenLayers.Util.urlAppend(n,i)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(e,t,n,r,i,s){this.layer=e,this.position=t.clone(),this.setBounds(n),this.url=r,i&&(this.size=i.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,s),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=this.eventListeners=null},draw:function(e){e||this.clear();var t=this.shouldDraw();return t&&!e&&(t=!1!==this.events.triggerEvent("beforedraw")),t},shouldDraw:function(){var e=!1,t=this.layer.maxExtent;if(t){var n=this.layer.map,n=n.baseLayer.wrapDateLine&&n.getMaxExtent();this.bounds.intersectsBounds(t,{inclusive:!1,worldBounds:n})&&(e=!0)}return e||this.layer.displayOutsideMaxExtent},setBounds:function(e){e=e.clone();if(this.layer.map.baseLayer.wrapDateLine)var t=this.layer.map.getMaxExtent(),n=this.layer.map.getResolution
(),e=e.wrapDateLine(t,{leftTolerance:n,rightTolerance:n});this.bounds=e},moveTo:function(e,t,n){null==n&&(n=!0),this.setBounds(e),this.position=t.clone(),n&&this.draw()},clear:function(){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(e,t,n,r,i,s){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=r,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack();if(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden";null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);return e?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.positionTile(),this.renderTile()):this.unload(),e},renderTile:function(){this.layer.div.appendChild(this.getTile());if(this.layer.async){var e=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(t){e==this.asyncRequestId&&(this.url=t,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var e=this.getTile().style,t=this.frame?this.size:this.layer.getImageSize(this.bounds);e.left=this.position.x+"%",e.top=this.position.y+"%",e.width=t.w+"%",e.height=t.h+"%"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var e=this.imgDiv;if(e){OpenLayers.Event.stopObservingElement(e);var t=this.getTile();t.parentNode===this.layer.div&&this.layer.div.removeChild(t),this.setImgSrc(),!0===this.layerAlphaHack&&(e.style.filter=""),OpenLayers.Element.removeClass(e,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=document.createElement("img"),this.imgDiv.className="olTileImage",this.imgDiv.galleryImg="no";var e=this.imgDiv.style;if(this.frame){var t=0,n=0;this.layer.gutter&&(t=100*(this.layer.gutter/this.layer.tileSize.w),n=100*(this.layer.gutter/this.layer.tileSize.h)),e.left=-t+"%",e.top=-n+"%",e.width=2*t+100+"%",e.height=2*n+100+"%"}e.visibility="hidden",e.opacity=0,1>this.layer.opacity&&(e.filter="alpha(opacity="+100*this.layer.opacity+")"),e.position="absolute",this.layerAlphaHack&&(e.paddingTop=e.height,e.height="0",e.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},initImage:function(){this.events.triggerEvent(this._loadEvent);var e=this.getImage();if(this.url&&e.getAttribute("src")==this.url)this.onImageLoad();else{var t=OpenLayers.Function.bind(function(){OpenLayers.Event.stopObservingElement(e),OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(e,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url)},this);e.getAttribute("src")==this.blankImageUrl?t():(OpenLayers.Event.observe(e,"load",t),OpenLayers.Event.observe(e,"error",t),this.crossOriginKeyword&&e.removeAttribute("crossorigin"),e.src=this.blankImageUrl)}},setImgSrc:function(e){var t=this.imgDiv;t.style.visibility="hidden",t.style.opacity=0,e&&(this.crossOriginKeyword&&("data:"!==e.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=e)},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var e;return this.frame?(e=this.frame.cloneNode(!1),e.appendChild(this.imgDiv)):e=this.imgDiv,this.imgDiv=null,e}},onImageLoad:function(){var e=this.imgDiv;OpenLayers.Event.stopObservingElement(e),e.style.visibility="inherit",e.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend");if(7>parseFloat(navigator.appVersion.split("MSIE")[1])&&this.layer&&this.layer.div){var t=document.createElement("span");t.style.display="none";var n=this.layer.div;n.appendChild(t),window.setTimeout(function(){t.parentNode===n&&t.parentNode.removeChild(t)},0)}!0===this.layerAlphaHack&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='scale')")},onImageError:function(){var e=this.imgDiv;null!=e.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(e,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var e=document.createElement("canvas");e.width=this.size.w,e.height=this.size.h,this.canvasContext=e.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:null,numLoadingTiles:0,tileLoadingDelay:85,serverResolutions:null,moveTimerId:null,deferMoveGriddedTiles:null,tileQueueId:null,tileQueue:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,initialize:function(e,t,n,r){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this.tileQueue=[],null===this.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),null===this.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid"),OpenLayers.Animation.isNative||(this.deferMoveGriddedTiles=OpenLayers.Function.bind(function(){this.moveGriddedTiles(!0),this.moveTimerId=null},this))},setMap:function(e){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,e),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(){null!==this.moveTimerId&&(window.clearTimeout(this.moveTimerId),this.moveTimerId=null),this.clearTileQueue(),null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null)},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.tileSize=this.grid=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){this.clearTileQueue();if(this.grid){for(var e=0,t=this.grid.length;e<t;e++)for(var n=this.grid[e],r=0,i=n.length;r<i;r++)this.destroyTile(n[r]);this.grid=[],this.gridResolution=null}},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e.gridResolution=null,e.backBuffer=null,e.backBufferTimerId=null,e.tileQueue=[],e.tileQueueId=null,e.loading=!1,e.moveTimerId=null,e},moveTo:function(e,t,n){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),e=e||this.map.getExtent();if(null!=e){var r=!this.grid.length||t,i=this.getTilesBounds(),s=this.map.getResolution(),o=this.getServerResolution(s);if(this.singleTile){if(r||!n&&!i.containsBounds(e))t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),(!t||"resize"===this.transitionEffect)&&this.applyBackBuffer(o),this.initSingleTile(e)}else(r=r||!i.intersectsBounds(e,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}),s!==o?(e=this.map.calculateBounds(null,o),r&&this.transformDiv(o/s)):(this.div.style.width="100%",this.div.style.height="100%",this.div.style.left="0%",this.div.style.top="0%"),r)?(t&&"resize"===this.transitionEffect&&this.applyBackBuffer(o),this.initGriddedTiles(e)):this.moveGriddedTiles()}},getTileData:function(e){var t=null,n=e.lon,r=e.lat,i=this.grid.length;if(this.map&&i){var s=this.map.getResolution(),e=this.tileSize.w,o=this.tileSize.h,u=this.grid[0][0].bounds,a=u.left,u=u.top;if(n<a&&this.map.baseLayer.wrapDateLine)var f=this.map.getMaxExtent().getWidth(),l=Math.ceil((a-n)/f),n=n+f*l;n=(n-a)/(s*e),r=(u-r)/(s*o),s=Math.floor(n),a=Math.floor(r),0<=a&&a<i&&(i=this.grid[a][s])&&(t={tile:i,i:Math.floor((n-s)*e),j:Math.floor((r-a)*o)})}return t},queueTileDraw:function(e){return e=e.object,~OpenLayers.Util.indexOf(this.tileQueue,e)||this.tileQueue.push(e),this.tileQueueId||(this.tileQueueId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.drawTileFromQueue,this),null,this.div)),!1},drawTileFromQueue:function(){0===this.tileQueue.length?this.clearTileQueue():this.tileQueue.shift().draw(!0)},clearTileQueue:function(){OpenLayers.Animation.stop(this.tileQueueId),this.tileQueueId=null,this.tileQueue=[]},destroyTile:function(e){this.removeTileMonitoringHooks(e),e.destroy()},getServerResolution:function(e){e=e||this.map.getResolution();if(this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,e)){var t,n;for(t=this.serverResolutions.length-1;0<=t;t--)if(n=this.serverResolutions[t],n>e){e=n;break}if(-1===t)throw"no appropriate resolution in serverResolutions"}return e},getServerZoom:function(){return this.map.getZoomForResolution(this.getServerResolution())},transformDiv:function(e){this.div.style.width=100*e+"%",this.div.style.height=100*e+"%";var t=this.map.getSize(),n=parseInt(this.map.layerContainerDiv.style.left,10),r=(parseInt(this.map.layerContainerDiv.style.top,10)-t.h/2)*(e-1);this.div.style.left=(n-t.w/2)*(e-1)+"%",this.div.style.top=r+"%"},getResolutionScale:function(){return parseInt(this.div.style.width,10)/100},applyBackBuffer:function(e){null!==this.backBufferTimerId&&this.removeBackBuffer();var t=this.backBuffer;if(!t){t=this.createBackBuffer();if(!t)return;this.div.insertBefore(t,this.div.firstChild),this.backBuffer=t;var n=this.grid[0][0].bounds;this.backBufferLonLat={lon:n.left,lat:n.top},this.backBufferResolution=this.gridResolution}var n=t.style,r=this.backBufferResolution/e;n.width=100*r+"%",n.height=100*r+"%",e=this.getViewPortPxFromLonLat(this.backBufferLonLat,e),n=parseInt(this.map.layerContainerDiv.style.left,10),r=parseInt(this.map.layerContainerDiv.style.top,10),t.style.left=Math.round(e.x-n)+"%",t.style.top=Math.round(e.y-r)+"%"},createBackBuffer:function(){var e;if(0<this.grid.length){e=document.createElement("div"),e.id=this.div.id+"_bb",e.className="olBackBuffer",e.style.position="absolute",e.style.width="100%",e.style.height="100%";for(var t=0,n=this.grid.length;t<n;t++)for(var r=0,i=this.grid[t].length;r<i;r++){var s=this.grid[t][r].createBackBuffer();s&&(s.style.top=t*this.tileSize.h+"%",s.style.left=r*this.tileSize.w+"%",e.appendChild(s))}}return e},removeBackBuffer:function(){this.backBuffer&&(this.div.removeChild(this.backBuffer),this.backBufferResolution=this.backBuffer=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(){this.singleTile||this.moveGriddedTiles()},setTileSize:function(e){this.singleTile&&(e=this.map.getSize(),e.h=parseInt(e.h*this.ratio),e.w=parseInt(e.w*this.ratio)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[e])},getTilesBounds:function(){var e=null,t=this.grid.length;if(t)var e=this.grid[t-1][0].bounds,t=this.grid[0].length*e.getWidth(),n=this.grid.length*e.getHeight(),e=new OpenLayers.Bounds(e.left,e.bottom,e.left+t,e.bottom+n);return e},initSingleTile:function(e){this.clearTileQueue();var t=e.getCenterLonLat(),n=e.getWidth()*this.ratio,e=e.getHeight()*this.ratio,t=new OpenLayers.Bounds(t.lon-n/2,t.lat-e/2,t.lon+n/2,t.lat+e/2),n=this.map.getLayerPxFromLonLat({lon:t.left,lat:t.top});this.grid.length||(this.grid[0]=[]),(e=this.grid[0][0])?e.moveTo(t,n):(e=this.addTile(t,n),this.addTileMonitoringHooks(e),e.draw(),this.grid[0][0]=e),this.removeExcessTiles(1,1),this.gridResolution=this.getServerResolution()},calculateGridLayout:function(e,t,n){var r=n*this.tileSize.w,n=n*this.tileSize.h,i=e.left-t.lon,s=Math.floor(i/r)-this.buffer,i=-(i/r-s)*this.tileSize.w,s=t.lon+s*r,e=e.top-(t.lat+n),o=Math.ceil(e/n)+this.buffer;return{tilelon:r,tilelat:n,tileoffsetlon:s,tileoffsetlat:t.lat+o*n,tileoffsetx:i,tileoffsety:-(o-e/n)*this.tileSize.h}},getTileOrigin:function(){var e=this.tileOrigin;if(!e)var e=this.getMaxExtent(),t={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],e=new OpenLayers.LonLat(e[t[0]],e[t[1]]);return e},initGriddedTiles:function(e){this.clearTileQueue();var t=this.map.getSize(),n=Math.ceil(t.h/this.tileSize.h)+Math.max(1,2*this.buffer),t=Math.ceil(t.w/this.tileSize.w)+Math.max(1,2*this.buffer),r=this.getTileOrigin(),i=this.getServerResolution(),r=this.calculateGridLayout(e,r,i),i=Math.round(r.tileoffsetx),s=Math.round(r.tileoffsety),o=r.tileoffsetlon,u=r.tileoffsetlat,a=r.tilelon,f=r.tilelat,l=i,c=o,h=0,p=parseInt(this.map.layerContainerDiv.style.left),d=parseInt(this.map.layerContainerDiv.style.top),r=[],v=this.map.getCenter();do{var m=this.grid[h++];m||(m=[],this.grid.push(m));var o=c,i=l,g=0;do{var y=new OpenLayers.Bounds(o,u,o+a,u+f),b=i,b=b-p,w=s,w=w-d,w=new OpenLayers.Pixel(b,w);(b=m[g++])?b.moveTo(y,w,!1):(b=this.addTile(y,w),this.addTileMonitoringHooks(b),m.push(b)),y=y.getCenterLonLat(),r.push({tile:b,distance:Math.pow(y.lon-v.lon,2)+Math.pow(y.lat-v.lat,2)}),o+=a,i+=this.tileSize.w}while(o<=e.right+a*this.buffer||g<t);u-=f,s+=this.tileSize.h}while(u>=e.bottom-f*this.buffer||h<n);this.removeExcessTiles(h,g),this.gridResolution=this.getServerResolution(),r.sort(function(e,t){return e.distance-t.distance}),e=0;for(n=r.length;e<n;++e)r[e].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(e,t){var n=new this.tileClass(this,t,e,null,this.tileSize,this.tileOptions);return n.events.register("beforedraw",this,this.queueTileDraw),n},addTileMonitoringHooks:function(e){e.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:e}),this.numLoadingTiles++},e.onLoadEnd=function(){this.numLoadingTiles--,this.events.triggerEvent("tileloaded",{tile:e}),0===this.tileQueue.length&&0===this.numLoadingTiles&&(this.loading=!1,this.events.triggerEvent("loadend"),this.backBuffer&&(this.backBufferTimerId=window.setTimeout(OpenLayers.Function.bind(this.removeBackBuffer,this),this.removeBackBufferDelay)))},e.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:e})},e.events.on({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},moveGriddedTiles:function(e){if(!e&&!OpenLayers.Animation.isNative)null!=this.moveTimerId&&window.clearTimeout(this.moveTimerId),this.moveTimerId=window.setTimeout(this.deferMoveGriddedTiles,this.tileLoadingDelay);else for(var e=this.buffer||1,t=this.getResolutionScale();;){var n=this.grid[0][0].position.x*t+parseInt(this.div.style.left,10)+parseInt(this.map.layerContainerDiv.style.left),r=this.grid[0][0].position.y*t+parseInt(this.div.style.top,10)+parseInt(this.map.layerContainerDiv.style.top),i=this.tileSize.w*t,s=this.tileSize.h*t;if(n>-i*(e-1))this.shiftColumn(!0);else if(n<-i*e)this.shiftColumn(!1);else if(r>-s*(e-1))this.shiftRow(!0);else{if(!(r<-s*e))break;this.shiftRow(!1)}}},shiftRow:function(e){for(var t=this.grid,n=t[e?0:this.grid.length-1],r=this.getServerResolution(),i=e?-this.tileSize.h:this.tileSize.h,r=r*-i,s=e?t.pop():t.shift(),o=0,u=n.length;o<u;o++){var a=n[o],f=a.bounds.clone(),a=a.position.clone();f.bottom+=r,f.top+=r,a.y+=i,s[o].moveTo(f,a)}e?t.unshift(s):t.push(s)},shiftColumn:function(e){for(var t=e?-this.tileSize.w:this.tileSize.w,n=this.getServerResolution()*t,r=0,i=this.grid.length;r<i;r++){var s=this.grid[r],o=s[e?0:s.length-1],u=o.bounds.clone(),o=o.position.clone();u.left+=n,u.right+=n,o.x+=t;var a=e?this.grid[r].pop():this.grid[r].shift();a.moveTo(u,o),e?s.unshift(a):s.push(a)}},removeExcessTiles:function(e,t){for(;this.grid.length>e;)for(var n=this.grid.pop(),r=0,i=n.length;r<i;r++){var s=n[r];this.destroyTile(s)}for(;this.grid[0].length>t;){r=0;for(i=this.grid.length;r<i;r++)n=this.grid[r],s=n.pop(),this.destroyTile(s)}},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(e){var t=this.maxExtent,n=this.getResolution(),r=n*this.tileSize.w,n=n*this.tileSize.h,i=this.getLonLatFromViewPortPx(e),e=t.left+r*Math.floor((i.lon-t.left)/r),t=t.bottom+n*Math.floor((i.lat-t.bottom)/n);return new OpenLayers.Bounds(e,t,e+r,t+n)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.Format.ArcXML=OpenLayers.Class(OpenLayers.Format.XML,{fontStyleKeys:"antialiasing blockout font fontcolor fontsize fontstyle glowing interval outline printmode shadow transparency".split(" "),request:null,response:null,initialize:function(e){this.request=new OpenLayers.Format.ArcXML.Request,this.response=new OpenLayers.Format.ArcXML.Response;if(e)if("feature"==e.requesttype){this.request.get_image=null;var t=this.request.get_feature.query;this.addCoordSys(t.featurecoordsys,e.featureCoordSys),this.addCoordSys(t.filtercoordsys,e.filterCoordSys),e.polygon?(t.isspatial=!0,t.spatialfilter.polygon=e.polygon):e.envelope&&(t.isspatial=!0,t.spatialfilter.envelope={minx:0,miny:0,maxx:0,maxy:0},this.parseEnvelope(t.spatialfilter.envelope,e.envelope))}else"image"==e.requesttype?(this.request.get_feature=null,t=this.request.get_image.properties,this.parseEnvelope(t.envelope,e.envelope),this.addLayers(t.layerlist,e.layers),this.addImageSize(t.imagesize,e.tileSize),this.addCoordSys(t.featurecoordsys,e.featureCoordSys),this.addCoordSys(t.filtercoordsys,e.filterCoordSys)):this.request=null;OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},parseEnvelope:function(e,t){t&&4==t.length&&(e.minx=t[0],e.miny=t[1],e.maxx=t[2],e.maxy=t[3])},addLayers:function(e,t){for(var n=0,r=t.length;n<r;n++)e.push(t[n])},addImageSize:function(e,t){null!==t&&(e.width=t.w,e.height=t.h,e.printwidth=t.w,e.printheight=t.h)},addCoordSys:function(e,t){"string"==typeof t?(e.id=parseInt(t),e.string=t):"object"==typeof t&&null!==t.proj&&(e.id=t.proj.srsProjNumber,e.string=t.proj.srsCode)},iserror:function(e){var t=null;return e?(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]),e=e.documentElement.getElementsByTagName("ERROR"),t=null!==e&&0<e.length):t=""!==this.response.error,t},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=null;e&&e.documentElement&&(t="ARCXML"==e.documentElement.nodeName?e.documentElement:e.documentElement.getElementsByTagName("ARCXML")[0]);if(!t||"parsererror"===t.firstChild.nodeName){var n,r;try{n=e.firstChild.nodeValue,r=e.firstChild.childNodes[1].firstChild.nodeValue}catch(i){}throw{message:"Error parsing the ArcXML request",error:n,source:r}}return this.parseResponse(t)},write:function(e){e||(e=this.request);var t=this.createElementNS("","ARCXML");t.setAttribute("version","1.1");var n=this.createElementNS("","REQUEST");if(null!=e.get_image){var r=this.createElementNS("","GET_IMAGE");n.appendChild(r);var i=this.createElementNS("","PROPERTIES");r.appendChild(i),e=e.get_image.properties,null!=e.featurecoordsys&&(r=this.createElementNS("","FEATURECOORDSYS"),i.appendChild(r),0===e.featurecoordsys.id?r.setAttribute("string",e.featurecoordsys.string):r.setAttribute("id",e.featurecoordsys.id)),null!=e.filtercoordsys&&(r=this.createElementNS("","FILTERCOORDSYS"),i.appendChild(r),0===e.filtercoordsys.id?r.setAttribute("string",e.filtercoordsys.string):r.setAttribute("id",e.filtercoordsys.id)),null!=e.envelope&&(r=this.createElementNS("","ENVELOPE"),i.appendChild(r),r.setAttribute("minx",e.envelope.minx),r.setAttribute("miny",e.envelope.miny),r.setAttribute("maxx",e.envelope.maxx),r.setAttribute("maxy",e.envelope.maxy)),r=this.createElementNS("","IMAGESIZE"),i.appendChild(r),r.setAttribute("height",e.imagesize.height),r.setAttribute("width",e.imagesize.width);if(e.imagesize.height!=e.imagesize.printheight||e.imagesize.width!=e.imagesize.printwidth)r.setAttribute("printheight",e.imagesize.printheight),r.setArrtibute("printwidth",e.imagesize.printwidth);null!=e.background&&(r=this.createElementNS("","BACKGROUND"),i.appendChild(r),r.setAttribute("color",e.background.color.r+","+e.background.color.g+","+e.background.color.b),null!==e.background.transcolor&&r.setAttribute("transcolor",e.background.transcolor.r+","+e.background.transcolor.g+","+e.background.transcolor.b));if(null!=e.layerlist&&0<e.layerlist.length){r=this.createElementNS("","LAYERLIST"),i.appendChild(r);for(i=0;i<e.layerlist.length;i++){var s=this.createElementNS("","LAYERDEF");r.appendChild(s),s.setAttribute("id",e.layerlist[i].id),s.setAttribute("visible",e.layerlist[i].visible);if("object"==typeof e.layerlist[i].query){var o=e.layerlist[i].query;if(0>o.where.length)continue;var u=null,u="boolean"==typeof o.spatialfilter&&o.spatialfilter?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY");u.setAttribute("where",o.where),"number"==typeof o.accuracy&&0<o.accuracy&&u.setAttribute("accuracy",o.accuracy),"number"==typeof o.featurelimit&&2e3>o.featurelimit&&u.setAttribute("featurelimit",o.featurelimit),"string"==typeof o.subfields&&"#ALL#"!=o.subfields&&u.setAttribute("subfields",o.subfields),"string"==typeof o.joinexpression&&0<o.joinexpression.length&&u.setAttribute("joinexpression",o.joinexpression),"string"==typeof o.jointables&&0<o.jointables.length&&u.setAttribute("jointables",o.jointables),s.appendChild(u)}"object"==typeof e.layerlist[i].renderer&&this.addRenderer(s,e.layerlist[i].renderer)}}}else null!=e.get_feature&&(r=this.createElementNS("","GET_FEATURES"),r.setAttribute("outputmode","newxml"),r.setAttribute("checkesc","true"),e.get_feature.geometry?r.setAttribute("geometry",e.get_feature.geometry):r.setAttribute("geometry","false"),e.get_feature.compact&&r.setAttribute("compact",e.get_feature.compact),"number"==e.get_feature.featurelimit&&r.setAttribute("featurelimit",e.get_feature.featurelimit),r.setAttribute("globalenvelope","true"),n.appendChild(r),null!=e.get_feature.layer&&0<e.get_feature.layer.length&&(i=this.createElementNS("","LAYER"),i.setAttribute("id",e.get_feature.layer),r.appendChild(i)),e=e.get_feature.query,null!=e)&&(i=null,i=e.isspatial?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),r.appendChild(i),"number"==typeof e.accuracy&&i.setAttribute("accuracy",e.accuracy),null!=e.featurecoordsys&&(r=this.createElementNS("","FEATURECOORDSYS"),0==e.featurecoordsys.id?r.setAttribute("string",e.featurecoordsys.string):r.setAttribute("id",e.featurecoordsys.id),i.appendChild(r)),null!=e.filtercoordsys&&(r=this.createElementNS("","FILTERCOORDSYS"),0===e.filtercoordsys.id?r.setAttribute("string",e.filtercoordsys.string):r.setAttribute("id",e.filtercoordsys.id),i.appendChild(r)),0<e.buffer&&(r=this.createElementNS("","BUFFER"),r.setAttribute("distance",e.buffer),i.appendChild(r)),e.isspatial&&(r=this.createElementNS("","SPATIALFILTER"),r.setAttribute("relation",e.spatialfilter.relation),i.appendChild(r),e.spatialfilter.envelope?(s=this.createElementNS("","ENVELOPE"),s.setAttribute("minx",e.spatialfilter.envelope.minx),s.setAttribute("miny",e.spatialfilter.envelope.miny),s.setAttribute("maxx",e.spatialfilter.envelope.maxx),s.setAttribute("maxy",e.spatialfilter.envelope.maxy),r.appendChild(s)):"object"==typeof e.spatialfilter.polygon&&r.appendChild(this.writePolygonGeometry(e.spatialfilter.polygon))),null!=e.where&&0<e.where.length&&i.setAttribute("where",e.where));return t.appendChild(n),OpenLayers.Format.XML.prototype.write.apply(this,[t])},addGroupRenderer:function(e,t){var n=this.createElementNS("","GROUPRENDERER");e.appendChild(n);for(var r=0;r<t.length;r++)this.addRenderer(n,t[r])},addRenderer:function(e,t){if(OpenLayers.Util.isArray(t))this.addGroupRenderer(e,t);else{var n=this.createElementNS("",t.type.toUpperCase()+"RENDERER");e.appendChild(n),"VALUEMAPRENDERER"==n.tagName?this.addValueMapRenderer(n,t):"VALUEMAPLABELRENDERER"==n.tagName?this.addValueMapLabelRenderer(n,t):"SIMPLELABELRENDERER"==n.tagName?this.addSimpleLabelRenderer(n,t):"SCALEDEPENDENTRENDERER"==n.tagName&&this.addScaleDependentRenderer(n,t)}},addScaleDependentRenderer:function(e,t){("string"==typeof t.lower||"number"==typeof t.lower)&&e.setAttribute("lower",t.lower),("string"==typeof t.upper||"number"==typeof t.upper)&&e.setAttribute("upper",t.upper),this.addRenderer(e,t.renderer)},addValueMapLabelRenderer:function(e,t){e.setAttribute("lookupfield",t.lookupfield),e.setAttribute("labelfield",t.labelfield);if("object"==typeof t.exacts)for(var n=0,r=t.exacts.length;n<r;n++){var i=t.exacts[n],s=this.createElementNS("","EXACT");"string"==typeof i.value&&s.setAttribute("value",i.value),"string"==typeof i.label&&s.setAttribute("label",i.label),"string"==typeof i.method&&s.setAttribute("method",i.method),e.appendChild(s);if("object"==typeof i.symbol){var o=null;"text"==i.symbol.type&&(o=this.createElementNS("","TEXTSYMBOL"));if(null!=o){for(var u=this.fontStyleKeys,a=0,f=u.length;a<f;a++){var l=u[a];i.symbol[l]&&o.setAttribute(l,i.symbol[l])}s.appendChild(o)}}}},addValueMapRenderer:function(e,t){e.setAttribute("lookupfield",t.lookupfield);if("object"==typeof t.ranges)for(var n=0,r=t.ranges.length;n<r;n++){var i=t.ranges[n],s=this.createElementNS("","RANGE");s.setAttribute("lower",i.lower),s.setAttribute("upper",i.upper),e.appendChild(s);if("object"==typeof i.symbol){var o=null;"simplepolygon"==i.symbol.type&&(o=this.createElementNS("","SIMPLEPOLYGONSYMBOL")),null!=o&&("string"==typeof i.symbol.boundarycolor&&o.setAttribute("boundarycolor",i.symbol.boundarycolor),"string"==typeof i.symbol.fillcolor&&o.setAttribute("fillcolor",i.symbol.fillcolor),"number"==typeof i.symbol.filltransparency&&o.setAttribute("filltransparency",i.symbol.filltransparency),s.appendChild(o))}}else if("object"==typeof t.exacts){n=0;for(r=t.exacts.length;n<r;n++)i=t.exacts[n],s=this.createElementNS("","EXACT"),"string"==typeof i.value&&s.setAttribute("value",i.value),"string"==typeof i.label&&s.setAttribute("label",i.label),"string"==typeof i.method&&s.setAttribute("method",i.method),e.appendChild(s),"object"==typeof i.symbol&&(o=null,"simplemarker"==i.symbol.type&&(o=this.createElementNS("","SIMPLEMARKERSYMBOL")),null!=o&&("string"==typeof i.symbol.antialiasing&&o.setAttribute("antialiasing",i.symbol.antialiasing),"string"==typeof i.symbol.color&&o.setAttribute("color",i.symbol.color),"string"==typeof i.symbol.outline&&o.setAttribute("outline",i.symbol.outline),"string"==typeof i.symbol.overlap&&o.setAttribute("overlap",i.symbol.overlap),"string"==typeof i.symbol.shadow&&o.setAttribute("shadow",i.symbol.shadow),"number"==typeof i.symbol.transparency&&o.setAttribute("transparency",i.symbol.transparency),"string"==typeof i.symbol.usecentroid&&o.setAttribute("usecentroid",i.symbol.usecentroid),"number"==typeof i.symbol.width&&o.setAttribute("width",i.symbol.width),s.appendChild(o)))}},addSimpleLabelRenderer:function(e,t){e.setAttribute("field",t.field);for(var n="featureweight howmanylabels labelbufferratio labelpriorities labelweight linelabelposition rotationalangles".split(" "),r=0,i=n.length;r<i;r++){var s=n[r];t[s]&&e.setAttribute(s,t[s])}if("text"==t.symbol.type){var o=t.symbol,u=this.createElementNS("","TEXTSYMBOL");e.appendChild(u),n=this.fontStyleKeys,r=0;for(i=n.length;r<i;r++)s=n[r],o[s]&&u.setAttribute(s,t[s])}},writePolygonGeometry:function(e){if(e instanceof OpenLayers.Geometry.Polygon){for(var t=this.createElementNS("","POLYGON"),n=0,r=e.components.length;n<r;n++){for(var i=e.components[n],s=this.createElementNS("","RING"),o=0,u=i.components.length;o<u;o++){var a=i.components[o],f=this.createElementNS("","POINT");f.setAttribute("x",a.x),f.setAttribute("y",a.y),s.appendChild(f)}t.appendChild(s)}return t}throw{message:"Cannot write polygon geometry to ArcXML with an "+e.CLASS_NAME+" object.",geometry:e}},parseResponse:function(e){"string"==typeof e&&(e=(new OpenLayers.Format.XML).read(e));var t=new OpenLayers.Format.ArcXML.Response,n=e.getElementsByTagName("ERROR");if(null!=n&&0<n.length)t.error=this.getChildValue(n,"Unknown error.");else{n=e.getElementsByTagName("RESPONSE");if(null==n||0==n.length)return t.error="No RESPONSE tag found in ArcXML response.",t;var r=n[0].firstChild.nodeName;"#text"==r&&(r=n[0].firstChild.nextSibling.nodeName);if("IMAGE"==r)n=e.getElementsByTagName("ENVELOPE"),e=e.getElementsByTagName("OUTPUT"),null==n||0==n.length?t.error="No ENVELOPE tag found in ArcXML response.":null==e||0==e.length?t.error="No OUTPUT tag found in ArcXML response.":(n=this.parseAttributes(n[0]),r=this.parseAttributes(e[0]),t.image="string"==typeof r.type?{envelope:n,output:{type:r.type,data:this.getChildValue(e[0])}}:{envelope:n,output:r});else if("FEATURES"==r){if(e=n[0].getElementsByTagName("FEATURES"),n=e[0].getElementsByTagName("FEATURECOUNT"),t.features.featurecount=n[0].getAttribute("count"),0<t.features.featurecount){n=e[0].getElementsByTagName("ENVELOPE"),t.features.envelope=this.parseAttributes(n[0],"number"),e=e[0].getElementsByTagName("FEATURE");for(n=0;n<e.length;n++){for(var r=new OpenLayers.Feature.Vector,i=e[n].getElementsByTagName("FIELD"),s=0;s<i.length;s++){var o=i[s].getAttribute("name"),u=i[s].getAttribute("value");r.attributes[o]=u}i=e[n].getElementsByTagName("POLYGON");if(0<i.length){i=i[0].getElementsByTagName("RING"),s=[];for(o=0;o<i.length;o++){u=[],u.push(this.parsePointGeometry(i[o]));for(var a=i[o].getElementsByTagName("HOLE"),f=0;f<a.length;f++)u.push(this.parsePointGeometry(a[f]));s.push(new OpenLayers.Geometry.Polygon(u))}r.geometry=1==s.length?s[0]:new OpenLayers.Geometry.MultiPolygon(s)}t.features.feature.push(r)}}}else t.error="Unidentified response type."}return t},parseAttributes:function(e,t){for(var n={},r=0;r<e.attributes.length;r++)n[e.attributes[r].nodeName]="number"==t?parseFloat(e.attributes[r].nodeValue):e.attributes[r].nodeValue;return n},parsePointGeometry:function(e){var t=[],n=e.getElementsByTagName("COORDS");if(0<n.length){e=this.getChildValue(n[0]),e=e.split(/;/);for(n=0;n<e.length;n++){var r=e[n].split(/ /);t.push(new OpenLayers.Geometry.Point(r[0],r[1]))}}else if(e=e.getElementsByTagName("POINT"),0<e.length)for(n=0;n<e.length;n++)t.push(new OpenLayers.Geometry.Point(parseFloat(e[n].getAttribute("x")),parseFloat(e[n].getAttribute("y"))));return new OpenLayers.Geometry.LinearRing(t)},CLASS_NAME:"OpenLayers.Format.ArcXML"}),OpenLayers.Format.ArcXML.Request=OpenLayers.Class({initialize:function(){return OpenLayers.Util.extend(this,{get_image:{properties:{background:null,draw:!0,envelope:{minx:0,miny:0,maxx:0,maxy:0},featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},imagesize:{height:0,width:0,dpi:96,printheight:0,printwidth:0,scalesymbols:!1},layerlist:[],output:{baseurl:"",legendbaseurl:"",legendname:"",legendpath:"",legendurl:"",name:"",path:"",type:"jpg",url:""}}},get_feature:{layer:"",query:{isspatial:!1,featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},buffer:0,where:"",spatialfilter:{relation:"envelope_intersection",envelope:null}}},environment:{separators:{cs:" ",ts:";"}},layer:[],workspaces:[]})},CLASS_NAME:"OpenLayers.Format.ArcXML.Request"}),OpenLayers.Format.ArcXML.Response=OpenLayers.Class({initialize:function(){return OpenLayers.Util.extend(this,{image:{envelope:null,output:""},features:{featurecount:0,envelope:null,feature:[]},error:""})},CLASS_NAME:"OpenLayers.Format.ArcXML.Response"}),OpenLayers.ProxyHost="",OpenLayers.Request={DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(e,t){var n=0!==e.indexOf("http"),r=!n&&e.match(this.URL_SPLIT_REGEX);if(r){var i=window.location,n=r[1]==
i.protocol&&r[3]==i.hostname,r=r[4],i=i.port;if(80!=r&&""!=r||"80"!=i&&""!=i)n=n&&r==i}return n||(t?e="function"==typeof t?t(e):t+encodeURIComponent(e):OpenLayers.Console.warn(OpenLayers.i18n("proxyNeeded"),{url:e})),e},issue:function(e){var t=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost}),e=OpenLayers.Util.applyDefaults(e,t),t=!1,n;for(n in e.headers)e.headers.hasOwnProperty(n)&&"x-requested-with"===n.toLowerCase()&&(t=!0);!1===t&&(e.headers["X-Requested-With"]="XMLHttpRequest");var r=new OpenLayers.Request.XMLHttpRequest,i=OpenLayers.Util.urlAppend(e.url,OpenLayers.Util.getParameterString(e.params||{})),i=OpenLayers.Request.makeSameOrigin(i,e.proxy);r.open(e.method,i,e.async,e.user,e.password);for(var s in e.headers)r.setRequestHeader(s,e.headers[s]);var o=this.events,u=this;return r.onreadystatechange=function(){r.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==o.triggerEvent("complete",{request:r,config:e,requestUrl:i})&&u.runCallbacks({request:r,config:e,requestUrl:i})},!1===e.async?r.send(e.data):window.setTimeout(function(){0!==r.readyState&&r.send(e.data)},0),r},runCallbacks:function(e){var t=e.request,n=e.config,r=n.scope?OpenLayers.Function.bind(n.callback,n.scope):n.callback,i;n.success&&(i=n.scope?OpenLayers.Function.bind(n.success,n.scope):n.success);var s;n.failure&&(s=n.scope?OpenLayers.Function.bind(n.failure,n.scope):n.failure),"file:"==OpenLayers.Util.createUrlObject(n.url).protocol&&t.responseText&&(t.status=200),r(t);if(!t.status||200<=t.status&&300>t.status)this.events.triggerEvent("success",e),i&&i(t);t.status&&(200>t.status||300<=t.status)&&(this.events.triggerEvent("failure",e),s&&s(t))},GET:function(e){return e=OpenLayers.Util.extend(e,{method:"GET"}),OpenLayers.Request.issue(e)},POST:function(e){return e=OpenLayers.Util.extend(e,{method:"POST"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},PUT:function(e){return e=OpenLayers.Util.extend(e,{method:"PUT"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},DELETE:function(e){return e=OpenLayers.Util.extend(e,{method:"DELETE"}),OpenLayers.Request.issue(e)},HEAD:function(e){return e=OpenLayers.Util.extend(e,{method:"HEAD"}),OpenLayers.Request.issue(e)},OPTIONS:function(e){return e=OpenLayers.Util.extend(e,{method:"OPTIONS"}),OpenLayers.Request.issue(e)}},OpenLayers.Layer.ArcIMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{ClientVersion:"9.2",ServiceName:""},featureCoordSys:"4326",filterCoordSys:"4326",layers:null,async:!0,name:"ArcIMS",isBaseLayer:!0,DEFAULT_OPTIONS:{tileSize:new OpenLayers.Size(512,512),featureCoordSys:"4326",filterCoordSys:"4326",layers:null,isBaseLayer:!0,async:!0,name:"ArcIMS"},initialize:function(e,t,n){this.tileSize=new OpenLayers.Size(512,512),this.params=OpenLayers.Util.applyDefaults({ServiceName:n.serviceName},this.DEFAULT_PARAMS),this.options=OpenLayers.Util.applyDefaults(n,this.DEFAULT_OPTIONS),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,this.params,n]),this.transparent&&(this.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.format)&&(this.format=OpenLayers.Util.alphaHack()?"image/gif":"image/png"),null===this.options.layers&&(this.options.layers=[])},getURL:function(e){var t="",e=this.adjustBounds(e),e=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize})),e=new OpenLayers.Request.POST({url:this.getFullRequestString(),data:e.write(),async:!1});if(null!=e){t=e.responseXML;if(!t||!t.documentElement)t=e.responseText;t=this.getUrlOrImage((new OpenLayers.Format.ArcXML).read(t).image.output)}return t},getURLasync:function(e,t,n){e=this.adjustBounds(e),e=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize})),OpenLayers.Request.POST({url:this.getFullRequestString(),async:!0,data:e.write(),callback:function(e){var r=e.responseXML;if(!r||!r.documentElement)r=e.responseText;e=(new OpenLayers.Format.ArcXML).read(r),t.call(n,this.getUrlOrImage(e.image.output))},scope:this})},getUrlOrImage:function(e){var t="";return e.url?t=e.url:e.data&&(t="data:image/"+e.type+";base64,"+e.data),t},setLayerQuery:function(e,t){for(var n=0;n<this.options.layers.length;n++)if(e==this.options.layers[n].id){this.options.layers[n].query=t;return}this.options.layers.push({id:e,visible:!0,query:t})},getFeatureInfo:function(e,t,n){var r=n.buffer||1,i=n.callback||function(){},s=n.scope||window,o={};OpenLayers.Util.extend(o,this.options),o.requesttype="feature",e instanceof OpenLayers.LonLat?(o.polygon=null,o.envelope=[e.lon-r,e.lat-r,e.lon+r,e.lat+r]):e instanceof OpenLayers.Geometry.Polygon&&(o.envelope=null,o.polygon=e);var u=new OpenLayers.Format.ArcXML(o);OpenLayers.Util.extend(u.request.get_feature,n),u.request.get_feature.layer=t.id,"number"==typeof t.query.accuracy?u.request.get_feature.query.accuracy=t.query.accuracy:(e=this.map.getCenter(),n=this.map.getViewPortPxFromLonLat(e),n.x++,n=this.map.getLonLatFromPixel(n),u.request.get_feature.query.accuracy=n.lon-e.lon),u.request.get_feature.query.where=t.query.where,u.request.get_feature.query.spatialfilter.relation="area_intersection",OpenLayers.Request.POST({url:this.getFullRequestString({CustomService:"Query"}),data:u.write(),callback:function(e){e=u.parseResponse(e.responseText),u.iserror()?i.call(s,null):i.call(s,e.features)}})},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcIMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.ArcIMS"}),OpenLayers.Format.OWSCommon.v1_1_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows/1.1",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("xml:lang"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)},AllowedValues:function(e,t){t.allowedValues={},this.readChildNodes(e,t.allowedValues)},AnyValue:function(e,t){t.anyValue=!0},DataType:function(e,t){t.dataType=this.getChildValue(e)},Range:function(e,t){t.range={},this.readChildNodes(e,t.range)},MinimumValue:function(e,t){t.minValue=this.getChildValue(e)},MaximumValue:function(e,t){t.maxValue=this.getChildValue(e)},Identifier:function(e,t){t.identifier=this.getChildValue(e)},SupportedCRS:function(e,t){t.supportedCRS=this.getChildValue(e)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Util.applyDefaults({Range:function(e){var t=this.createElementNSPlus("ows:Range",{attributes:{"ows:rangeClosure":e.closure}});return this.writeNode("ows:MinimumValue",e.minValue,t),this.writeNode("ows:MaximumValue",e.maxValue,t),t},MinimumValue:function(e){return this.createElementNSPlus("ows:MinimumValue",{value:e})},MaximumValue:function(e){return this.createElementNSPlus("ows:MaximumValue",{value:e})},Value:function(e){return this.createElementNSPlus("ows:Value",{value:e})}},OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_1_0"}),OpenLayers.Format.WCSGetCoverage=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.1.2",schemaLocation:"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",write:function(e){return e=this.writeNode("wcs:GetCoverage",e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{wcs:{GetCoverage:function(e){var t=this.createElementNSPlus("wcs:GetCoverage",{attributes:{version:e.version||this.VERSION,service:"WCS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wcs:DomainSubset",e.domainSubset,t),this.writeNode("wcs:Output",e.output,t),t},DomainSubset:function(e){var t=this.createElementNSPlus("wcs:DomainSubset",{});return this.writeNode("ows:BoundingBox",e.boundingBox,t),e.temporalSubset&&this.writeNode("wcs:TemporalSubset",e.temporalSubset,t),t},TemporalSubset:function(e){for(var t=this.createElementNSPlus("wcs:TemporalSubset",{}),n=0,r=e.timePeriods.length;n<r;++n)this.writeNode("wcs:TimePeriod",e.timePeriods[n],t);return t},TimePeriod:function(e){var t=this.createElementNSPlus("wcs:TimePeriod",{});return this.writeNode("wcs:BeginPosition",e.begin,t),this.writeNode("wcs:EndPosition",e.end,t),e.resolution&&this.writeNode("wcs:TimeResolution",e.resolution,t),t},BeginPosition:function(e){return this.createElementNSPlus("wcs:BeginPosition",{value:e})},EndPosition:function(e){return this.createElementNSPlus("wcs:EndPosition",{value:e})},TimeResolution:function(e){return this.createElementNSPlus("wcs:TimeResolution",{value:e})},Output:function(e){var t=this.createElementNSPlus("wcs:Output",{attributes:{format:e.format,store:e.store}});return e.gridCRS&&this.writeNode("wcs:GridCRS",e.gridCRS,t),t},GridCRS:function(e){var t=this.createElementNSPlus("wcs:GridCRS",{});return this.writeNode("wcs:GridBaseCRS",e.baseCRS,t),e.type&&this.writeNode("wcs:GridType",e.type,t),e.origin&&this.writeNode("wcs:GridOrigin",e.origin,t),this.writeNode("wcs:GridOffsets",e.offsets,t),e.CS&&this.writeNode("wcs:GridCS",e.CS,t),t},GridBaseCRS:function(e){return this.createElementNSPlus("wcs:GridBaseCRS",{value:e})},GridOrigin:function(e){return this.createElementNSPlus("wcs:GridOrigin",{value:e})},GridType:function(e){return this.createElementNSPlus("wcs:GridType",{value:e})},GridOffsets:function(e){return this.createElementNSPlus("wcs:GridOffsets",{value:e})},GridCS:function(e){return this.createElementNSPlus("wcs:GridCS",{value:e})}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WCSGetCoverage"}),OpenLayers.Format.WPSExecute=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",gml:"http://www.opengis.net/gml",wps:"http://www.opengis.net/wps/1.0.0",wfs:"http://www.opengis.net/wfs",ogc:"http://www.opengis.net/ogc",wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",schemaLocationAttr:function(){},write:function(e){var t;return window.ActiveXObject?this.xmldom=t=new ActiveXObject("Microsoft.XMLDOM"):t=document.implementation.createDocument("","",null),e=this.writeNode("wps:Execute",e,t),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{wps:{Execute:function(e){var t=this.createElementNSPlus("wps:Execute",{attributes:{version:this.VERSION,service:"WPS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wps:DataInputs",e.dataInputs,t),this.writeNode("wps:ResponseForm",e.responseForm,t),t},ResponseForm:function(e){var t=this.createElementNSPlus("wps:ResponseForm",{});return e.rawDataOutput&&this.writeNode("wps:RawDataOutput",e.rawDataOutput,t),e.responseDocument&&this.writeNode("wps:ResponseDocument",e.responseDocument,t),t},ResponseDocument:function(e){var t=this.createElementNSPlus("wps:ResponseDocument",{attributes:{storeExecuteResponse:e.storeExecuteResponse,lineage:e.lineage,status:e.status}});return e.output&&this.writeNode("wps:Output",e.output,t),t},Output:function(e){var t=this.createElementNSPlus("wps:Output",{attributes:{asReference:e.asReference}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("ows:Title",e.title,t),this.writeNode("ows:Abstract",e["abstract"],t),t},RawDataOutput:function(e){var t=this.createElementNSPlus("wps:RawDataOutput",{attributes:{mimeType:e.mimeType}});return this.writeNode("ows:Identifier",e.identifier,t),t},DataInputs:function(e){for(var t=this.createElementNSPlus("wps:DataInputs",{}),n=0,r=e.length;n<r;++n)this.writeNode("wps:Input",e[n],t);return t},Input:function(e){var t=this.createElementNSPlus("wps:Input",{});return this.writeNode("ows:Identifier",e.identifier,t),e.title&&this.writeNode("ows:Title",e.title,t),e.data&&this.writeNode("wps:Data",e.data,t),e.reference&&this.writeNode("wps:Reference",e.reference,t),t},Data:function(e){var t=this.createElementNSPlus("wps:Data",{});return e.literalData?this.writeNode("wps:LiteralData",e.literalData,t):e.complexData&&this.writeNode("wps:ComplexData",e.complexData,t),t},LiteralData:function(e){return this.createElementNSPlus("wps:LiteralData",{attributes:{uom:e.uom},value:e.value})},ComplexData:function(e){var t=this.createElementNSPlus("wps:ComplexData",{attributes:{mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}}),n=e.value;return"string"==typeof n?t.appendChild(this.getXMLDoc().createCDATASection(e.value)):t.appendChild(n),t},Reference:function(e){var t=this.createElementNSPlus("wps:Reference",{attributes:{mimeType:e.mimeType,"xlink:href":e.href,method:e.method,encoding:e.encoding,schema:e.schema}});return e.body&&this.writeNode("wps:Body",e.body,t),t},Body:function(e){var t=this.createElementNSPlus("wps:Body",{});return e.wcs?this.writeNode("wcs:GetCoverage",e.wcs,t):e.wfs?(this.featureType=e.wfs.featureType,this.version=e.wfs.version,this.writeNode("wfs:GetFeature",e.wfs,t)):this.writeNode("wps:Execute",e,t),t}},wcs:OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,wfs:OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WPSExecute"}),OpenLayers.Control.PanZoom=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,buttons:null,position:null,initialize:function(e){this.position=new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,OpenLayers.Control.PanZoom.Y),OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),this.removeButtons(),this.position=this.buttons=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position,this.buttons=[];var t={w:18,h:18},n=new OpenLayers.Pixel(e.x+t.w/2,e.y);return this._addButton("panup","north-mini.png",n,t),e.y=n.y+t.h,this._addButton("panleft","west-mini.png",e,t),this._addButton("panright","east-mini.png",e.add(t.w,0),t),this._addButton("pandown","south-mini.png",n.add(0,2*t.h),t),this._addButton("zoomin","zoom-plus-mini.png",n.add(0,3*t.h+5),t),this._addButton("zoomworld","zoom-world-mini.png",n.add(0,4*t.h+5),t),this._addButton("zoomout","zoom-minus-mini.png",n.add(0,5*t.h+5),t),this.div},_addButton:function(e,t,n,r){return t=OpenLayers.Util.getImageLocation(t),n=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+e,n,r,t,"absolute"),n.style.cursor="pointer",this.div.appendChild(n),n.action=e,n.className="olButton",this.buttons.push(n),n},_removeButton:function(e){this.div.removeChild(e),OpenLayers.Util.removeItem(this.buttons,e)},removeButtons:function(){for(var e=this.buttons.length-1;0<=e;--e)this._removeButton(this.buttons[e])},onButtonClick:function(e){switch(e.buttonElement.action){case"panup":this.map.pan(0,-this.getSlideFactor("h"));break;case"pandown":this.map.pan(0,this.getSlideFactor("h"));break;case"panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case"panright":this.map.pan(this.getSlideFactor("w"),0);break;case"zoomin":this.map.zoomIn();break;case"zoomout":this.map.zoomOut();break;case"zoomworld":this.map.zoomToMaxExtent()}},getSlideFactor:function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},CLASS_NAME:"OpenLayers.Control.PanZoom"}),OpenLayers.Control.PanZoom.X=4,OpenLayers.Control.PanZoom.Y=4,OpenLayers.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoom,{zoomStopWidth:18,zoomStopHeight:11,slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,panIcons:!0,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,destroy:function(){this._removeZoomBar(),this.map.events.un({changebaselayer:this.redraw,scope:this}),OpenLayers.Control.PanZoom.prototype.destroy.apply(this,arguments),delete this.mouseDragStart,delete this.zoomStart},setMap:function(e){OpenLayers.Control.PanZoom.prototype.setMap.apply(this,arguments),this.map.events.register("changebaselayer",this,this.redraw)},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar()),this.draw()},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position.clone(),this.buttons=[];var t={w:18,h:18};if(this.panIcons){var n=new OpenLayers.Pixel(e.x+t.w/2,e.y),r=t.w;this.zoomWorldIcon&&(n=new OpenLayers.Pixel(e.x+t.w,e.y)),this._addButton("panup","north-mini.png",n,t),e.y=n.y+t.h,this._addButton("panleft","west-mini.png",e,t),this.zoomWorldIcon&&(this._addButton("zoomworld","zoom-world-mini.png",e.add(t.w,0),t),r*=2),this._addButton("panright","east-mini.png",e.add(r,0),t),this._addButton("pandown","south-mini.png",n.add(0,2*t.h),t),this._addButton("zoomin","zoom-plus-mini.png",n.add(0,3*t.h+5),t),n=this._addZoomBar(n.add(0,4*t.h+5)),this._addButton("zoomout","zoom-minus-mini.png",n,t)}else this._addButton("zoomin","zoom-plus-mini.png",e,t),n=this._addZoomBar(e.add(0,t.h)),this._addButton("zoomout","zoom-minus-mini.png",n,t),this.zoomWorldIcon&&(n=n.add(0,t.h+3),this._addButton("zoomworld","zoom-world-mini.png",n,t));return this.div},_addZoomBar:function(e){var t=OpenLayers.Util.getImageLocation("slider.png"),n=this.id+"_"+this.map.id,r=this.map.getNumZoomLevels()-1-this.map.getZoom(),r=OpenLayers.Util.createAlphaImageDiv(n,e.add(-1,r*this.zoomStopHeight),{w:20,h:9},t,"absolute");r.style.cursor="move",this.slider=r,this.sliderEvents=new OpenLayers.Events(this,r,null,!0,{includeXY:!0}),this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});var i={w:this.zoomStopWidth,h:this.zoomStopHeight*this.map.getNumZoomLevels()},t=OpenLayers.Util.getImageLocation("zoombar.png"),n=null;return OpenLayers.Util.alphaHack()?(n=this.id+"_"+this.map.id,n=OpenLayers.Util.createAlphaImageDiv(n,e,{w:i.w,h:this.zoomStopHeight},t,"absolute",null,"crop"),n.style.height=i.h+"px"):n=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+this.map.id,e,i,t),n.style.cursor="pointer",n.className="olButton",this.zoombarDiv=n,this.div.appendChild(n),this.startTop=parseInt(n.style.top),this.div.appendChild(r),this.map.events.register("zoomend",this,this.moveZoomBar),e=e.add(0,this.zoomStopHeight*this.map.getNumZoomLevels())},_removeZoomBar:function(){this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp}),this.sliderEvents.destroy(),this.div.removeChild(this.zoombarDiv),this.zoombarDiv=null,this.div.removeChild(this.slider),this.slider=null,this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(e){OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this,arguments);if(e.buttonElement===this.zoombarDiv){var t=e.buttonXY.y/this.zoomStopHeight;if(this.forceFixedZoomLevel||!this.map.fractionalZoom)t=Math.floor(t);t=this.map.getNumZoomLevels()-1-t,t=Math.min(Math.max(t,0),this.map.getNumZoomLevels()-1),this.map.zoomTo(t)}},passEventToSlider:function(e){this.sliderEvents.handleBrowserEvent(e)},zoomBarDown:function(e){if(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=e.xy.clone(),this.zoomStart=e.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,OpenLayers.Event.stop(e)},zoomBarDrag:function(e){if(null!=this.mouseDragStart){var t=this.mouseDragStart.y-e.xy.y,n=OpenLayers.Util.pagePosition(this.zoombarDiv);0<e.clientY-n[1]&&e.clientY-n[1]<parseInt(this.zoombarDiv.style.height)-2&&(this.slider.style.top=parseInt(this.slider.style.top)-t+"px",this.mouseDragStart=e.xy.clone()),this.deltaY=this.zoomStart.y-e.xy.y,OpenLayers.Event.stop(e)}},zoomBarUp:function(e){if((OpenLayers.Event.isLeftClick(e)||"touchend"===e.type)&&this.mouseDragStart){this.div.style.cursor="",this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,mousemove:this.passEventToSlider,scope:this});var t=this.map.zoom;!this.forceFixedZoomLevel&&this.map.fractionalZoom?(t+=this.deltaY/this.zoomStopHeight,t=Math.min(Math.max(t,0),this.map.getNumZoomLevels()-1)):(t+=this.deltaY/this.zoomStopHeight,t=Math.max(Math.round(t),0)),this.map.zoomTo(t),this.zoomStart=this.mouseDragStart=null,this.deltaY=0,OpenLayers.Event.stop(e)}},moveZoomBar:function(){this.slider.style.top=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+1+"px"},CLASS_NAME:"OpenLayers.Control.PanZoomBar"}),OpenLayers.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",errorProperty:"service",CLASS_NAME:"OpenLayers.Format.WFSCapabilities"}),OpenLayers.Format.WFSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wfs:"http://www.opengis.net/wfs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wfs:{WFS_Capabilities:function(e,t){this.readChildNodes(e,t)},FeatureTypeList:function(e,t){t.featureTypeList={featureTypes:[]},this.readChildNodes(e,t.featureTypeList)},FeatureType:function(e,t){var n={};this.readChildNodes(e,n),t.featureTypes.push(n)},Name:function(e,t){var n=this.getChildValue(e);n&&(n=n.split(":"),t.name=n.pop(),0<n.length&&(t.featureNS=this.lookupNamespaceURI(e,n[0])))},Title:function(e,t){var n=this.getChildValue(e);n&&(t.title=n)},Abstract:function(e,t){var n=this.getChildValue(e);n&&(t["abstract"]=n)}}},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1"}),OpenLayers.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},readers:{wfs:OpenLayers.Util.applyDefaults({DefaultSRS:function(e,t){var n=this.getChildValue(e);n&&(t.srs=n)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),ows:OpenLayers.Format.OWSCommon.v1.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_1_0"}),OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!0,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(e,t,n,r,i){this.url=t,this.maxExtent=this.extent=n,this.size=r,OpenLayers.Layer.prototype.initialize.apply(this,[e,i]),this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){this.tile&&(this.removeTileMonitoringHooks(this.tile),this.tile.destroy(),this.tile=null),OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setMap:function(e){null==this.options.maxResolution&&(this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w),OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(e,t,n){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var r=null==this.tile;if(t||r){this.setTileSize();var i=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top});r?(this.tile=new OpenLayers.Tile.Image(this,i,this.extent,null,this.tileSize),this.addTileMonitoringHooks(this.tile)):(this.tile.size=this.tileSize.clone(),this.tile.position=i.clone()),this.tile.draw()}},setTileSize:function(){var e=this.extent.getWidth()/this.map.getResolution(),t=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(e,t)},addTileMonitoringHooks:function(e){e.onLoadStart=function(){this.events.triggerEvent("loadstart")},e.events.register("loadstart",this,e.onLoadStart),e.onLoadEnd=function(){this.events.triggerEvent("loadend")},e.events.register("loadend",this,e.onLoadEnd),e.events.register("unload",this,e.onLoadEnd)},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,scope:this})},setUrl:function(e){this.url=e,this.tile.draw()},getURL:function(){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"}),OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e,this.active=!1},destroy:function(){this.deactivate(),this.options=this.layer=null},setLayer:function(e){this.layer=e},activate:function(){return this.active?!1:this.active=!0},deactivate:function(){return this.active?(this.active=!1,!0):!1},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Save=OpenLayers.Class(OpenLayers.Strategy,{events:null,auto:!1,timer:null,initialize:function(e){OpenLayers.Strategy.prototype.initialize.apply(this,[e]),this.events=new OpenLayers.Events(this)},activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.auto&&("number"==typeof this.auto?this.timer=window.setInterval(OpenLayers.Function.bind(this.save,this),1e3*this.auto):this.layer.events.on({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.auto&&("number"==typeof this.auto?window.clearInterval(this.timer):this.layer.events.un({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},triggerSave:function(e){var t=e.feature;(t.state===OpenLayers.State.INSERT||t.state===OpenLayers.State.UPDATE||t.state===OpenLayers.State.DELETE)&&this.save([e.feature])},save:function(e){e||(e=this.layer.features),this.events.triggerEvent("start",{features:e});var t=this.layer.projection,n=this.layer.map.getProjectionObject();if(!n.equals(t)){for(var r=e.length,i=Array(r),s,o,u=0;u<r;++u)s=e[u],o=s.clone(),o.fid=s.fid,o.state=s.state,s.url&&(o.url=s.url),o._original=s,o.geometry.transform(n,t),i[u]=o;e=i}this.layer.protocol.commit(e,{callback:this.onCommit,scope:this})},onCommit:function(e){var t={response:e};if(e.success()){for(var n=e.reqFeatures,r,i=[],s=e.insertIds||[],o=0,u=0,a=n.length;u<a;++u)if(r=n[u],r=r._original||r,e=r.state)e==OpenLayers.State.DELETE?i.push(r):e==OpenLayers.State.INSERT&&(r.fid=s[o],++o),r.state=null;0<i.length&&this.layer.destroyFeatures(i),this.events.triggerEvent("success",t)}else this.events.triggerEvent("fail",t)},CLASS_NAME:"OpenLayers.Strategy.Save"}),OpenLayers.Format.GPX=OpenLayers.Class(OpenLayers.Format.XML,{defaultDesc:"No description available",extractWaypoints:!0,extractTracks:!0,extractRoutes:!0,extractAttributes:!0,namespaces:{gpx:"http://www.topografix.com/GPX/1/1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",creator:"OpenLayers",initialize:function(e){this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=[];if(this.extractTracks)for(var n=e.getElementsByTagName("trk"),r=0,i=n.length;r<i;r++){var s={};this.extractAttributes&&(s=this.parseAttributes(n[r]));for(var o=this.getElementsByTagNameNS(n[r],n[r].namespaceURI,"trkseg"),u=0,a=o.length;u<a;u++){var f=this.extractSegment(o[u],"trkpt");t.push(new OpenLayers.Feature.Vector(f,s))}}if(this.extractRoutes){i=e.getElementsByTagName("rte"),n=0;for(r=i.length;n<r;n++)s={},this.extractAttributes&&(s=this.parseAttributes(i[n])),o=this.extractSegment(i[n],"rtept"),t.push(new OpenLayers.Feature.Vector(o,s))}if(this.extractWaypoints){e=e.getElementsByTagName("wpt"),n=0;for(i=e.length;n<i;n++)s={},this.extractAttributes&&(s=this.parseAttributes(e[n])),r=new OpenLayers.Geometry.Point(e[n].getAttribute("lon"),e[n].getAttribute("lat")),t.push(new OpenLayers.Feature.Vector(r,s))}if(this.internalProjection&&this.externalProjection){s=0;for(e=t.length;s<e;s++)t[s].geometry.transform(this.externalProjection,this.internalProjection)}return t},extractSegment:function(e,t){for(var n=this.getElementsByTagNameNS(e,e.namespaceURI,t),r=[],i=0,s=n.length;i<s;i++)r.push(new OpenLayers.Geometry.Point(n[i].getAttribute("lon"),n[i].getAttribute("lat")));return new OpenLayers.Geometry.LineString(r)},parseAttributes:function(e){for(var t={},e=e.firstChild,n,r;e;)1==e.nodeType&&e.firstChild&&(n=e.firstChild,3==n.nodeType||4==n.nodeType)&&(r=e.prefix?e.nodeName.split(":")[1]:e.nodeName,"trkseg"!=r&&"rtept"!=r&&(t[r]=n.nodeValue)),e=e.nextSibling;return t},write:function(e,t){var e=OpenLayers.Util.isArray(e)?e:[e],n=this.createElementNS(this.namespaces.gpx,"gpx");n.setAttribute("version","1.1"),n.setAttribute("creator",this.creator),this.setAttributes(n,{"xsi:schemaLocation":this.schemaLocation}),t&&"object"==typeof t&&n.appendChild(this.buildMetadataNode(t));for(var r=0,i=e.length;r<i;r++)n.appendChild(this.buildFeatureNode(e[r]));return OpenLayers.Format.XML.prototype.write.apply(this,[n])},buildMetadataNode:function(e){for(var t=["name","desc","author"],n=this.createElementNSPlus("gpx:metadata"),r=0;r<t.length;r++){var i=t[r];if(e[i]){var s=this.createElementNSPlus("gpx:"+i);s.appendChild(this.createTextNode(e[i])),n.appendChild(s)}}return n},buildFeatureNode:function(e){var t=e.geometry,t=t.clone();this.internalProjection&&this.externalProjection&&t.transform(this.internalProjection,this.externalProjection);if("OpenLayers.Geometry.Point"==t.CLASS_NAME)return this.buildWptNode(e);var n=this.createElementNSPlus("gpx:trk");this.appendAttributesNode(n,e);for(var e=this.buildTrkSegNode(t),e=OpenLayers.Util.isArray(e)?e:[e],t=0,r=e.length;t<r;t++)n.appendChild(e[t]);return n},buildTrkSegNode:function(e){var t,n,r,i;if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){t=this.createElementNSPlus("gpx:trkseg"),n=0;for(r=e.components.length;n<r;n++)i=e.components[n],t.appendChild(this.buildTrkPtNode(i));return t}t=[],n=0;for(r=e.components.length;n<r;n++)t.push(this.buildTrkSegNode(e.components[n]));return t},buildTrkPtNode:function(e){var t=this.createElementNSPlus("gpx:trkpt");return t.setAttribute("lon",e.x),t.setAttribute("lat",e.y),t},buildWptNode:function(e){var t=this.createElementNSPlus("gpx:wpt");return t.setAttribute("lon",e.geometry.x),t.setAttribute("lat",e.geometry.y),this.appendAttributesNode(t,e),t},appendAttributesNode:function(e,t){var n=this.createElementNSPlus("gpx:name");n.appendChild(this.createTextNode(t.attributes.name||t.id)),e.appendChild(n),n=this.createElementNSPlus("gpx:desc"),n.appendChild(this.createTextNode(t.attributes.description||this.defaultDesc)),e.appendChild(n)},CLASS_NAME:"OpenLayers.Format.GPX"}),OpenLayers.Format.WMSDescribeLayer=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",getVersion:function(e,t){var n=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);if("1.1.1"==n||"1.1.0"==n)n="1.1";return n},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer"}),OpenLayers.Format.WMSDescribeLayer.v1_1=OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer,{initialize:function(e){OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var e=e.documentElement.childNodes,t=[],n,r,i=0;i<e.length;++i)if(n=e[i],r=n.nodeName,"LayerDescription"==r){r=n.getAttribute("name");var s="",o="",u="";n.getAttribute("owsType")?
(s=n.getAttribute("owsType"),o=n.getAttribute("owsURL")):""!=n.getAttribute("wfs")?(s="WFS",o=n.getAttribute("wfs")):""!=n.getAttribute("wcs")&&(s="WCS",o=n.getAttribute("wcs")),n=n.getElementsByTagName("Query"),0<n.length&&((u=n[0].getAttribute("typeName"))||(u=n[0].getAttribute("typename"))),t.push({layerName:r,owsType:s,owsURL:o,typeName:u})}return t},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer.v1_1"}),OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(e,t,n){if(n&&n.sphericalMercator||this.sphericalMercator)n=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},n);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e||this.name,t||this.url,{},n])},clone:function(e){return null==e&&(e=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var e=this.getXYZ(e),t=this.url;return OpenLayers.Util.isArray(t)&&(t=this.selectUrl(""+e.x+e.y+e.z,t)),OpenLayers.String.format(t,e)},getXYZ:function(e){var t=this.getServerResolution(),n=Math.round((e.left-this.maxExtent.left)/(t*this.tileSize.w)),e=Math.round((this.maxExtent.top-e.top)/(t*this.tileSize.h)),r=this.serverResolutions||this.resolutions,t=0==this.zoomOffset?OpenLayers.Util.indexOf(r,t):this.getServerZoom()+this.zoomOffset;return this.wrapDateLine&&(r=Math.pow(2,t),n=(n%r+r)%r),{x:n,y:e,z:t}},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"}),OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"Data CC-By-SA by <a href='http://openstreetmap.org/'>OpenStreetMap</a>",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(e,t,n){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options&&this.options.tileOptions)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.OSM"}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(e,t){this.container=OpenLayers.Util.getElement(e),OpenLayers.Util.extend(this,t)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(e,t){this.extent=e.clone();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var n=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/n);this.extent=e.wrapDateLine(this.map.getMaxExtent()).scale(n)}return t&&(this.resolution=null),!0},setSize:function(e){this.size=e.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(e,t){null==t&&(t=e.style);if(e.geometry){var n=e.geometry.getBounds();if(n){var r;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(r=this.map.getMaxExtent()),n.intersectsBounds(this.extent,{worldBounds:r})?this.calculateFeatureDx(n,r):t={display:"none"},n=this.drawGeometry(e.geometry,t,e.id);if("none"!=t.display&&t.label&&!1!==n){r=e.geometry.getCentroid();if(t.labelXOffset||t.labelYOffset){var i=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset,o=this.getResolution();r.move(i*o,s*o)}this.drawText(e.id,t,r)}else this.removeText(e.id);return n}}},calculateFeatureDx:function(e,t){this.featureDx=0;if(t){var n=t.getWidth();this.featureDx=Math.round(((e.left+e.right)/2-(this.extent.left+this.extent.right)/2)/n)*n}},drawGeometry:function(){},drawText:function(){},removeText:function(){},clear:function(){},getFeatureIdFromEvent:function(){},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;++t){var r=e[t];this.eraseGeometry(r.geometry,r.id),this.removeText(r.id)}},eraseGeometry:function(){},moveRoot:function(){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(e){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return!1===e.stroke&&(delete t.strokeWidth,delete t.strokeColor),!1===e.fill&&delete t.fillColor,OpenLayers.Util.extend(t,e),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(e,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(e){this.size=e.clone();var t=this.root;t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h,this.resolution=null,this.hitDetection&&(t=this.hitCanvas,t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h)},drawFeature:function(e,t){var n;if(e.geometry){t=this.applyDefaultSymbolizer(t||e.style),n=e.geometry.getBounds();var r;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(r=this.map.getMaxExtent()),r=n&&n.intersectsBounds(this.extent,{worldBounds:r}),(n="none"!==t.display&&!!n&&r)?this.features[e.id]=[e,t]:delete this.features[e.id],this.pendingRedraw=!0}return this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),n},drawGeometry:function(e,t,n){var r=e.CLASS_NAME;if("OpenLayers.Geometry.Collection"==r||"OpenLayers.Geometry.MultiPoint"==r||"OpenLayers.Geometry.MultiLineString"==r||"OpenLayers.Geometry.MultiPolygon"==r)for(r=0;r<e.components.length;r++)this.drawGeometry(e.components[r],t,n);else switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(e,t,n);break;case"OpenLayers.Geometry.LineString":this.drawLineString(e,t,n);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(e,t,n);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(e,t,n)}},drawExternalGraphic:function(e,t,n){var r=new Image;t.graphicTitle&&(r.title=t.graphicTitle);var i=t.graphicWidth||t.graphicHeight,s=t.graphicHeight||t.graphicWidth,i=i?i:2*t.pointRadius,s=s?s:2*t.pointRadius,o=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*i),u=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*s),a=t.graphicOpacity||t.fillOpacity;r.onload=OpenLayers.Function.bind(function(){if(this.features[n]){var t=this.getLocalXY(e),l=t[0],t=t[1];if(!isNaN(l)&&!isNaN(t)){var l=l+o|0,t=t+u|0,p=this.canvas;p.globalAlpha=a;var v=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);p.drawImage(r,l*v,t*v,i*v,s*v),this.hitDetection&&(this.setHitContextStyle("fill",n),this.hitContext.fillRect(l,t,i,s))}}},this),r.src=t.externalGraphic},drawNamedSymbol:function(e,t,n){var r,i,s,o;s=Math.PI/180;var u=OpenLayers.Renderer.symbol[t.graphicName];if(!u)throw Error(t.graphicName+" is not a valid symbol name");if(u.length&&!(2>u.length)&&(e=this.getLocalXY(e),i=e[0],o=e[1],!isNaN(i)&&!isNaN(o))){this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round");if(t.graphicName in this.cachedSymbolBounds)r=this.cachedSymbolBounds[t.graphicName];else{r=new OpenLayers.Bounds;for(e=0;e<u.length;e+=2)r.extend(new OpenLayers.LonLat(u[e],u[e+1]));this.cachedSymbolBounds[t.graphicName]=r}this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(i,o),this.hitDetection&&this.hitContext.translate(i,o),e=s*t.rotation,isNaN(e)||(this.canvas.rotate(e),this.hitDetection&&this.hitContext.rotate(e)),s=2*t.pointRadius/Math.max(r.getWidth(),r.getHeight()),this.canvas.scale(s,s),this.hitDetection&&this.hitContext.scale(s,s),e=r.getCenterLonLat().lon,r=r.getCenterLonLat().lat,this.canvas.translate(-e,-r),this.hitDetection&&this.hitContext.translate(-e,-r),o=t.strokeWidth,t.strokeWidth=o/s;if(!1!==t.fill){this.setCanvasStyle("fill",t),this.canvas.beginPath();for(e=0;e<u.length;e+=2)r=u[e],i=u[e+1],0==e&&this.canvas.moveTo(r,i),this.canvas.lineTo(r,i);this.canvas.closePath(),this.canvas.fill();if(this.hitDetection){this.setHitContextStyle("fill",n,t),this.hitContext.beginPath();for(e=0;e<u.length;e+=2)r=u[e],i=u[e+1],0==e&&this.canvas.moveTo(r,i),this.hitContext.lineTo(r,i);this.hitContext.closePath(),this.hitContext.fill()}}if(!1!==t.stroke){this.setCanvasStyle("stroke",t),this.canvas.beginPath();for(e=0;e<u.length;e+=2)r=u[e],i=u[e+1],0==e&&this.canvas.moveTo(r,i),this.canvas.lineTo(r,i);this.canvas.closePath(),this.canvas.stroke();if(this.hitDetection){this.setHitContextStyle("stroke",n,t,s),this.hitContext.beginPath();for(e=0;e<u.length;e+=2)r=u[e],i=u[e+1],0==e&&this.hitContext.moveTo(r,i),this.hitContext.lineTo(r,i);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=o,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}},setCanvasStyle:function(e,t){"fill"===e?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===e?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(e){e=Number(e.split("_").pop())+1,16777216<=e&&(this.hitOverflow=e-16777215,e=e%16777216+1);var e="000000"+e.toString(16),t=e.length;return e="#"+e.substring(t-6,t)},setHitContextStyle:function(e,t,n,r){t=this.featureIdToHex(t),"fill"==e?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=t):"stroke"==e?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=t,"undefined"==typeof r?this.hitContext.lineWidth=n.strokeWidth+2:isNaN(r)||(this.hitContext.lineWidth=n.strokeWidth+2/r)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(e,t,n){if(!1!==t.graphic)if(t.externalGraphic)this.drawExternalGraphic(e,t,n);else if(t.graphicName&&"circle"!=t.graphicName)this.drawNamedSymbol(e,t,n);else{var r=this.getLocalXY(e),e=r[0],r=r[1];if(!isNaN(e)&&!isNaN(r)){var i=2*Math.PI,s=t.pointRadius;!1!==t.fill&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(e,r,s,0,i,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",n,t),this.hitContext.beginPath(),this.hitContext.arc(e,r,s,0,i,!0),this.hitContext.fill())),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(e,r,s,0,i,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",n,t),this.hitContext.beginPath(),this.hitContext.arc(e,r,s,0,i,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(e,t,n){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(e,t,n)},drawLinearRing:function(e,t,n){!1!==t.fill&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,e,t,n,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",n,t),this.renderPath(this.hitContext,e,t,n,"fill"))),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,e,t,n,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",n,t),this.renderPath(this.hitContext,e,t,n,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(e,t,n,r,i){t=t.components,n=t.length,e.beginPath();var r=this.getLocalXY(t[0]),s=r[1];if(!isNaN(r[0])&&!isNaN(s)){e.moveTo(r[0],r[1]);for(r=1;r<n;++r)s=this.getLocalXY(t[r]),e.lineTo(s[0],s[1]);"fill"===i?e.fill():e.stroke()}},drawPolygon:function(e,t,n){var e=e.components,r=e.length;this.drawLinearRing(e[0],t,n);for(var i=1;i<r;++i)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(e[i],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),n),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(e[i],OpenLayers.Util.applyDefaults({fill:!1},t),n)},drawText:function(e,t){var n=this.getLocalXY(e);this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1;var r=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),i=t.label.split("\n"),s=i.length;if(this.canvas.fillText){this.canvas.font=r,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle";var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];null==o&&(o=-0.5),r=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width,n[1]+=r*o*(s-1);for(o=0;o<s;o++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(i[o],n[0],n[1]+r*o+1),this.canvas.restore()),this.canvas.fillText(i[o],n[0],n[1]+r*o)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=r;var u=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];null==u&&(u=-0.5),o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]],null==o&&(o=-0.5),r=this.canvas.mozMeasureText("xx"),n[1]+=r*(1+o*s);for(o=0;o<s;o++){var a=n[0]+u*this.canvas.mozMeasureText(i[o]),f=n[1]+o*r;this.canvas.translate(a,f),this.canvas.mozDrawText(i[o]),this.canvas.translate(-a,-f)}}this.setCanvasStyle("reset")},getLocalXY:function(e){var t=this.getResolution(),n=this.extent;return[(e.x-this.featureDx)/t+ -n.left/t,n.top/t-e.y/t]},clear:function(){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this.features={},this.hitDetection&&this.hitContext.clearRect(0,0,t,e)},getFeatureIdFromEvent:function(e){var t;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(e=e.xy,e=this.hitContext.getImageData(e.x|0,e.y|0,1,1).data,255===e[3]&&(e=e[2]+256*(e[1]+256*e[0])))){e="OpenLayers.Feature.Vector_"+(e-1+this.hitOverflow);try{t=this.features[e][0]}catch(n){}}return t},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)delete this.features[e[t].id];this.redraw()},redraw:function(){if(!this.locked){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this.hitDetection&&this.hitContext.clearRect(0,0,t,e);var e=[],n,r,i=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent(),s;for(s in this.features)this.features.hasOwnProperty(s)&&(t=this.features[s][0],n=t.geometry,this.calculateFeatureDx(n.getBounds(),i),r=this.features[s][1],this.drawGeometry(n,r,t.id),r.label&&e.push([t,r]));t=0;for(n=e.length;t<n;++t)s=e[t],this.drawText(s[0].geometry.getCentroid(),s[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.Format.OSM=OpenLayers.Class(OpenLayers.Format.XML,{checkTags:!1,interestingTagsExclude:null,areaTags:null,initialize:function(e){for(var t={interestingTagsExclude:"source source_ref source:ref history attribution created_by".split(" "),areaTags:"area building leisure tourism ruins historic landuse military natural sport".split(" ")},t=OpenLayers.Util.extend(t,e),n={},e=0;e<t.interestingTagsExclude.length;e++)n[t.interestingTagsExclude[e]]=!0;t.interestingTagsExclude=n,n={};for(e=0;e<t.areaTags.length;e++)n[t.areaTags[e]]=!0;t.areaTags=n,this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[t])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var t=this.getNodes(e),n=this.getWays(e),e=Array(n.length),r=0;r<n.length;r++){for(var i=Array(n[r].nodes.length),s=this.isWayArea(n[r])?1:0,o=0;o<n[r].nodes.length;o++){var u=t[n[r].nodes[o]],a=new OpenLayers.Geometry.Point(u.lon,u.lat);a.osm_id=parseInt(n[r].nodes[o]),i[o]=a,u.used=!0}u=null,u=s?new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(i)):new OpenLayers.Geometry.LineString(i),this.internalProjection&&this.externalProjection&&u.transform(this.externalProjection,this.internalProjection),i=new OpenLayers.Feature.Vector(u,n[r].tags),i.osm_id=parseInt(n[r].id),i.fid="way."+i.osm_id,e[r]=i}for(var f in t){u=t[f];if(!u.used||this.checkTags){n=null;if(this.checkTags){n=this.getTags(u.node,!0);if(u.used&&!n[1])continue;n=n[0]}else n=this.getTags(u.node);i=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(u.lon,u.lat),n),this.internalProjection&&this.externalProjection&&i.geometry.transform(this.externalProjection,this.internalProjection),i.osm_id=parseInt(f),i.fid="node."+i.osm_id,e.push(i)}u.node=null}return e},getNodes:function(e){for(var e=e.getElementsByTagName("node"),t={},n=0;n<e.length;n++){var r=e[n],i=r.getAttribute("id");t[i]={lat:r.getAttribute("lat"),lon:r.getAttribute("lon"),node:r}}return t},getWays:function(e){for(var e=e.getElementsByTagName("way"),t=[],n=0;n<e.length;n++){var r=e[n],i={id:r.getAttribute("id")};i.tags=this.getTags(r),r=r.getElementsByTagName("nd"),i.nodes=Array(r.length);for(var s=0;s<r.length;s++)i.nodes[s]=r[s].getAttribute("ref");t.push(i)}return t},getTags:function(e,t){for(var n=e.getElementsByTagName("tag"),r={},i=!1,s=0;s<n.length;s++){var o=n[s].getAttribute("k");r[o]=n[s].getAttribute("v"),t&&(this.interestingTagsExclude[o]||(i=!0))}return t?[r,i]:r},isWayArea:function(e){var t=!1,n=!1;e.nodes[0]==e.nodes[e.nodes.length-1]&&(t=!0);if(this.checkTags)for(var r in e.tags)if(this.areaTags[r]){n=!0;break}return t&&(this.checkTags?n:!0)},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.osm_id=1,this.created_nodes={};var t=this.createElementNS(null,"osm");t.setAttribute("version","0.5"),t.setAttribute("generator","OpenLayers "+OpenLayers.VERSION_NUMBER);for(var n=e.length-1;0<=n;n--)for(var r=this.createFeatureNodes(e[n]),i=0;i<r.length;i++)t.appendChild(r[i]);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureNodes:function(e){var t=[],n=e.geometry.CLASS_NAME,n=n.substring(n.lastIndexOf(".")+1),n=n.toLowerCase();return(n=this.createXML[n])&&(t=n.apply(this,[e])),t},createXML:{point:function(e){var t=null,n=e.geometry?e.geometry:e;this.internalProjection&&this.externalProjection&&(n=n.clone(),n.transform(this.internalProjection,this.externalProjection));var r=!1;e.osm_id?(t=e.osm_id,this.created_nodes[t]&&(r=!0)):(t=-this.osm_id,this.osm_id++);var i=r?this.created_nodes[t]:this.createElementNS(null,"node");return this.created_nodes[t]=i,i.setAttribute("id",t),i.setAttribute("lon",n.x),i.setAttribute("lat",n.y),e.attributes&&this.serializeTags(e,i),this.setState(e,i),r?[]:[i]},linestring:function(e){var t,n=[],r=e.geometry;e.osm_id?t=e.osm_id:(t=-this.osm_id,this.osm_id++);var i=this.createElementNS(null,"way");i.setAttribute("id",t);for(t=0;t<r.components.length;t++){var s=this.createXML.point.apply(this,[r.components[t]]);if(s.length){var s=s[0],o=s.getAttribute("id");n.push(s)}else o=r.components[t].osm_id,s=this.created_nodes[o];this.setState(e,s),s=this.createElementNS(null,"nd"),s.setAttribute("ref",o),i.appendChild(s)}return this.serializeTags(e,i),n.push(i),n},polygon:function(e){var t=OpenLayers.Util.extend({area:"yes"},e.attributes),t=new OpenLayers.Feature.Vector(e.geometry.components[0],t);return t.osm_id=e.osm_id,this.createXML.linestring.apply(this,[t])}},serializeTags:function(e,t){for(var n in e.attributes){var r=this.createElementNS(null,"tag");r.setAttribute("k",n),r.setAttribute("v",e.attributes[n]),t.appendChild(r)}},setState:function(e,t){if(e.state){var n=null;switch(e.state){case OpenLayers.State.UPDATE:case OpenLayers.State.DELETE:n="delete"}n&&t.setAttribute("action",n)}},CLASS_NAME:"OpenLayers.Format.OSM"}),OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,initialize:function(e,t,n){OpenLayers.Util.extend(this,n),this.control=e,this.callbacks=t,(e=this.map||e.map)&&this.setMap(e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(e){this.map=e},checkModifiers:function(e){return null==this.keyMask?!0:((e.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(e.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(e.altKey?OpenLayers.Handler.MOD_ALT:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,n=e.length;t<n;t++)this[e[t]]&&this.register(e[t],this[e[t]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,n=e.length;t<n;t++)this[e[t]]&&this.unregister(e[t],this[e[t]]);return this.active=!1,!0},callback:function(e,t){e&&this.callbacks[e]&&this.callbacks[e].apply(this.control,t)},register:function(e,t){this.map.events.registerPriority(e,this,t),this.map.events.registerPriority(e,this,this.setEvent)},unregister:function(e,t){this.map.events.unregister(e,this,t),this.map.events.unregister(e,this,this.setEvent)},setEvent:function(e){return this.evt=e,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,touch:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments);if(!0===this.documentDrag){var r=this;this._docMove=function(e){r.mousemove({xy:{x:e.clientX,y:e.clientY},element:document})},this._docUp=function(e){r.mouseup({xy:{x:e.clientX,y:e.clientY}})}}},dragstart:function(e){var t=!0;return this.dragging=!1,this.checkModifiers(e)&&(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))?(this.started=!0,this.last=this.start=e.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(e),this.callback("down",[e.xy]),OpenLayers.Event.stop(e),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(this.started=!1,this.last=this.start=null),t},dragmove:function(e){return this.lastMoveEvt=e,this.started&&!this.timeoutId&&(e.xy.x!=this.last.x||e.xy.y!=this.last.y)&&(!0===this.documentDrag&&this.documentEvents&&(e.element===document?(this.adjustXY(e),this.setEvent(e)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(e),this.callback("move",[e.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=e.xy),!0},dragend:function(e){if(this.started){!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(e),this.removeDocumentEvents());var t=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(e),this.callback("up",[e.xy]),t&&this.callback("done",[e.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(){},move:function(){},up:function(){},out:function(){},mousedown:function(e){return this.dragstart(e)},touchstart:function(e){return this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,scope:this})),this.dragstart(e)},mousemove:function(e){return this.dragmove(e)},touchmove:function(e){return this.dragmove(e)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(e){return this.dragend(e)},touchend:function(e){return e.xy=this.last,this.dragend(e)},mouseout:function(e){if(this.started&&OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv))if(!0===this.documentDrag)this.addDocumentEvents();else{var t=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(e),this.callback("out",[]),t&&this.callback("done",[e.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(){return this.start==this.last},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=this.touch=!1,this.last=this.start=null,e=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),e},adjustXY:function(e){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);e.xy.x-=t[0],e.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,touch:!1,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(e,t,n,r){OpenLayers.Handler.prototype.initialize.apply(this,[e,n,r]),this.layer=t},touchstart:function(e){return this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,scope:this})),OpenLayers.Event.isMultiTouch(e)?!0:this.mousedown(e)},touchmove:function(e){OpenLayers.Event.stop(e)},mousedown:function(e){if(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))this.down=e.xy;return this.handle(e)?!this.stopDown:!0},mouseup:function(e){return this.up=e.xy,this.handle(e)?!this.stopUp:!0},click:function(e){return this.handle(e)?!this.stopClick:!0},mousemove:function(e){return!this.callbacks.over&&!this.callbacks.out?!0:(this.handle(e),!0)},dblclick:function(e){return!this.handle(e)},geometryTypeMatches:function(e){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)},handle:function(e){this.feature&&!this.feature.layer&&(this.feature=null);var t=e.type,n=!1,r=!!this.feature,i="click"==t||"dblclick"==t||"touchstart"==t;return(this.feature=this.layer.getFeatureFromEvent(e))&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature?("touchstart"===t&&OpenLayers.Event.stop(e),e=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(r&&e?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):(!r||i)&&this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,n=!0):(this.lastFeature&&(r&&e||i)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(r||i)&&this.triggerCallback(t,"out",[this.lastFeature]),n},triggerCallback:function(e,t,n){(t=this.EVENTMAP[e][t])&&("click"==e&&this.up&&this.down?Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(t,n):this.callback(t,n))},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.touch=!1,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},handleMapEvents:function(e){("removelayer"==e.type||"order"==e.property)&&this.moveLayerToTop()},moveLayerToTop:function(){this.layer.setZIndex(Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),OpenLayers.Control.DragFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,onStart:function(){},onDrag:function(){},onComplete:function(){},onEnter:function(){},onLeave:function(){},documentDrag:!1,layer:null,feature:null,dragCallbacks:{},featureCallbacks:{},lastPixel:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.handlers={drag:new OpenLayers.Handler.Drag(this,OpenLayers.Util.extend({down:this.downFeature,move:this.moveFeature,up:this.upFeature,out:this.cancel,done:this.doneDragging},this.dragCallbacks),{documentDrag:this.documentDrag}),feature:new OpenLayers.Handler.Feature(this,this.layer,OpenLayers.Util.extend({click:this.clickFeature,clickout:this.clickoutFeature,over:this.overFeature,out:this.outFeature},this.featureCallbacks),{geometryTypes:this.geometryTypes})}},clickFeature:function(e){this.handlers.feature.touch&&!this.over&&this.overFeature(e)&&(this.handlers.drag.dragstart(this.handlers.feature.evt),this.handlers.drag.stopDown=!1)},clickoutFeature:function(e){this.handlers.feature.touch&&this.over&&(this.outFeature(e),this.handlers.drag.stopDown=!0)},destroy:function(){this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.handlers.feature.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.handlers.drag.deactivate(),this.handlers.feature.deactivate(),this.feature=null,this.dragging=!1,this.lastPixel=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},overFeature:function(e){var t=!1;return this.handlers.drag.dragging?this.over=this.feature.id==e.id?!0:!1:(this.feature=e,this.handlers.drag.activate(),this.over=t=!0,OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onEnter(e)),t},downFeature:function(e){this.lastPixel=e,this.onStart(this.feature,e)},moveFeature:function(e){var t=this.map.getResolution();this.feature.geometry.move(t*(e.x-this.lastPixel.x),t*(this.lastPixel.y-e.y)),this.layer.drawFeature(this.feature),this.lastPixel=e,this.onDrag(this.feature,e)},upFeature:function(){this.over||this.handlers.drag.deactivate()},doneDragging:function(e){this.onComplete(this.feature,e)},outFeature:function(e){this.handlers.drag.dragging?this.feature.id==e.id&&(this.over=!1):(this.over=!1,this.handlers.drag.deactivate(),OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onLeave(e),this.feature=null)},cancel:function(){this.handlers.drag.deactivate(),this.over=!1},setMap:function(e){this.handlers.drag.setMap(e),this.handlers.feature.setMap(e),OpenLayers.Control.prototype.setMap.apply(this
,arguments)},CLASS_NAME:"OpenLayers.Control.DragFeature"}),OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(e,t){this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])};if(e instanceof OpenLayers.Style)this.styles["default"]=e,this.styles.select=e,this.styles.temporary=e,this.styles["delete"]=e;else if("object"==typeof e)for(var n in e)if(e[n]instanceof OpenLayers.Style)this.styles[n]=e[n];else{if("object"!=typeof e[n]){this.styles["default"]=new OpenLayers.Style(e),this.styles.select=new OpenLayers.Style(e),this.styles.temporary=new OpenLayers.Style(e),this.styles["delete"]=new OpenLayers.Style(e);break}this.styles[n]=new OpenLayers.Style(e[n])}OpenLayers.Util.extend(this,t)},destroy:function(){for(var e in this.styles)this.styles[e].destroy();this.styles=null},createSymbolizer:function(e,t){e||(e=new OpenLayers.Feature.Vector),this.styles[t]||(t="default"),e.renderIntent=t;var n={};return this.extendDefault&&"default"!=t&&(n=this.styles["default"].createSymbolizer(e)),OpenLayers.Util.extend(n,this.styles[t].createSymbolizer(e))},addUniqueValueRules:function(e,t,n,r){var i=[],s;for(s in n)i.push(new OpenLayers.Rule({symbolizer:n[s],context:r,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:s})}));this.styles[e].addRules(i)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),(!this.renderer||!this.renderer.supported())&&this.assignRenderer();if(!this.renderer||!this.renderer.supported())this.renderer=null,this.displayError();this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={};if(this.strategies)for(var n=0,r=this.strategies.length;n<r;n++)this.strategies[n].setLayer(this)},destroy:function(){if(this.strategies){var e,t,n;t=0;for(n=this.strategies.length;t<n;t++)e=this.strategies[t],e.autoDestroy&&e.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.unrenderedFeatures=this.selectedFeatures=this.features=null,this.renderer&&this.renderer.destroy(),this.drawn=this.geometryType=this.renderer=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){null==e&&(e=new OpenLayers.Layer.Vector(this.name,this.getOptions()));for(var e=OpenLayers.Layer.prototype.clone.apply(this,[e]),t=this.features,n=t.length,r=Array(n),i=0;i<n;++i)r[i]=t[i].clone();return e.features=r,e},refresh:function(e){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",e)},assignRenderer:function(){for(var e=0,t=this.renderers.length;e<t;e++){var n=this.renderers[e];if((n="function"==typeof n?n:OpenLayers.Renderer[n])&&n.prototype.supported()){this.renderer=new n(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(e){OpenLayers.Layer.prototype.setMap.apply(this,arguments);if(this.renderer){this.renderer.map=this.map;var t=this.map.getSize();t.w*=this.ratio,t.h*=this.ratio,this.renderer.setSize(t)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var e,t,n;t=0;for(n=this.strategies.length;t<n;t++)e=this.strategies[t],e.autoActivate&&e.activate()}},removeMap:function(){this.drawn=!1;if(this.strategies){var e,t,n;t=0;for(n=this.strategies.length;t<n;t++)e=this.strategies[t],e.autoActivate&&e.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var e=this.map.getSize();e.w*=this.ratio,e.h*=this.ratio,this.renderer.setSize(e)},moveTo:function(e,t,n){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var r=!0;if(!n){this.renderer.root.style.visibility="hidden";var r=this.map.getSize(),i=r.w,r=r.h,i=i/2*this.ratio-i/2,r=r/2*this.ratio-r/2,i=i+parseInt(this.map.layerContainerDiv.style.left,10),i=-Math.round(i),r=r+parseInt(this.map.layerContainerDiv.style.top,10),r=-Math.round(r);this.div.style.left=i+"px",this.div.style.top=r+"px",r=this.renderer.setExtent(this.map.getExtent().scale(this.ratio),t),this.renderer.root.style.visibility="visible",!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft);if(!t&&r)for(var s in this.unrenderedFeatures)i=this.unrenderedFeatures[s],this.drawFeature(i)}if(!this.drawn||t||!r){this.drawn=!0,s=0;for(r=this.features.length;s<r;s++)this.renderer.locked=s!==r-1,i=this.features[s],this.drawFeature(i)}},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments);var t=this.div.style.display;t!=this.renderer.root.style.display&&(this.renderer.root.style.display=t)},addFeatures:function(e,t){OpenLayers.Util.isArray(e)||(e=[e]);var n=!t||!t.silent;if(n){var r={features:e};if(!1===this.events.triggerEvent("beforefeaturesadded",r))return;e=r.features}for(var r=[],i=0,s=e.length;i<s;i++){this.renderer.locked=i!=e.length-1?!0:!1;var o=e[i];if(!(!this.geometryType||o.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);o.layer=this,!o.style&&this.style&&(o.style=OpenLayers.Util.extend({},this.style));if(n){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:o}))continue;this.preFeatureInsert(o)}r.push(o),this.features.push(o),this.drawFeature(o),n&&(this.events.triggerEvent("featureadded",{feature:o}),this.onFeatureInsert(o))}n&&this.events.triggerEvent("featuresadded",{features:r})},removeFeatures:function(e,t){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures(t);OpenLayers.Util.isArray(e)||(e=[e]),e===this.selectedFeatures&&(e=e.slice());var n=!t||!t.silent;n&&this.events.triggerEvent("beforefeaturesremoved",{features:e});for(var r=e.length-1;0<=r;r--){this.renderer.locked=0!=r&&e[r-1].geometry?!0:!1;var i=e[r];delete this.unrenderedFeatures[i.id],n&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),this.features=OpenLayers.Util.removeItem(this.features,i),i.layer=null,i.geometry&&this.renderer.eraseFeatures(i),-1!=OpenLayers.Util.indexOf(this.selectedFeatures,i)&&OpenLayers.Util.removeItem(this.selectedFeatures,i),n&&this.events.triggerEvent("featureremoved",{feature:i})}n&&this.events.triggerEvent("featuresremoved",{features:e})}},removeAllFeatures:function(e){var e=!e||!e.silent,t=this.features;e&&this.events.triggerEvent("beforefeaturesremoved",{features:t});for(var n,r=t.length-1;0<=r;r--)n=t[r],e&&this.events.triggerEvent("beforefeatureremoved",{feature:n}),n.layer=null,e&&this.events.triggerEvent("featureremoved",{feature:n});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],e&&this.events.triggerEvent("featuresremoved",{features:t})},destroyFeatures:function(e,t){void 0==e&&(e=this.features);if(e){this.removeFeatures(e,t);for(var n=e.length-1;0<=n;n--)e[n].destroy()}},drawFeature:function(e,t){if(this.drawn){if("object"!=typeof t){!t&&e.state===OpenLayers.State.DELETE&&(t="delete");var n=t||e.renderIntent;(t=e.style||this.style)||(t=this.styleMap.createSymbolizer(e,n))}n=this.renderer.drawFeature(e,t),!1===n||null===n?this.unrenderedFeatures[e.id]=e:delete this.unrenderedFeatures[e.id]}},eraseFeatures:function(e){this.renderer.eraseFeatures(e)},getFeatureFromEvent:function(e){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null;return(e=this.renderer.getFeatureIdFromEvent(e))&&(t="string"==typeof e?this.getFeatureById(e):e),t},getFeatureBy:function(e,t){for(var n=null,r=0,i=this.features.length;r<i;++r)if(this.features[r][e]==t){n=this.features[r];break}return n},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeatureByFid:function(e){return this.getFeatureBy("fid",e)},getFeaturesByAttribute:function(e,t){var n,r,i=this.features.length,s=[];for(n=0;n<i;n++)(r=this.features[n])&&r.attributes&&r.attributes[e]===t&&s.push(r);return s},onFeatureInsert:function(){},preFeatureInsert:function(){},getDataExtent:function(){var e=null,t=this.features;if(t&&0<t.length)for(var n=null,r=0,i=t.length;r<i;r++)if(n=t[r].geometry)null===e&&(e=new OpenLayers.Bounds),e.extend(n.getBounds());return e},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(e){for(var t=this.layers,n,r=0;r<t.length;r++)if(n=t[r].getFeatureFromEvent(e))return n},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),e.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(e){e.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var e,t=0;t<this.map.layers.length;++t)e=this.map.layers[t],-1!=OpenLayers.Util.indexOf(this.layers,e)&&e.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var e,t=0;t<this.layers.length;++t)e=this.layers[t],this.renderer&&e.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(e.renderer)},handleChangeLayer:function(e){var t=e.layer;"order"==e.property&&-1!=OpenLayers.Util.indexOf(this.layers,t)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(e);var n={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(n.over=this.overFeature,n.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(n,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(e){OpenLayers.Util.isArray(e)?(this.layers=e,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:e})):this.layer=e},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(e){for(var t=this.layers||[this.layer],n,r,i=0;i<t.length;++i){n=t[i];for(var s=n.selectedFeatures.length-1;0<=s;--s)r=n.selectedFeatures[s],(!e||e.except!=r)&&this.unselect(r)}},clickFeature:function(e){this.hover||(-1<OpenLayers.Util.indexOf(e.layer.selectedFeatures,e)?this.toggleSelect()?this.unselect(e):this.multipleSelect()||this.unselectAll({except:e}):(this.multipleSelect()||this.unselectAll({except:e}),this.select(e)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(e){var t=e.layer;this.hover&&(this.highlightOnly?this.highlight(e):-1==OpenLayers.Util.indexOf(t.selectedFeatures,e)&&this.select(e))},outFeature:function(e){if(this.hover)if(this.highlightOnly){if(e._lastHighlighter==this.id)if(e._prevHighlighter&&e._prevHighlighter!=this.id){delete e._lastHighlighter;var t=this.map.getControl(e._prevHighlighter);t&&t.highlight(e)}else this.unhighlight(e)}else this.unselect(e)},highlight:function(e){var t=e.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:e})&&(e._prevHighlighter=e._lastHighlighter,e._lastHighlighter=this.id,t.drawFeature(e,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:e}))},unhighlight:function(e){var t=e.layer;void 0==e._prevHighlighter?delete e._lastHighlighter:(e._prevHighlighter!=this.id&&(e._lastHighlighter=e._prevHighlighter),delete e._prevHighlighter),t.drawFeature(e,e.style||e.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:e})},select:function(e){var t=this.onBeforeSelect.call(this.scope,e),n=e.layer;!1!==t&&(t=n.events.triggerEvent("beforefeatureselected",{feature:e}),!1!==t&&(n.selectedFeatures.push(e),this.highlight(e),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=n.selectedFeatures[0]),n.events.triggerEvent("featureselected",{feature:e}),this.onSelect.call(this.scope,e)))},unselect:function(e){var t=e.layer;this.unhighlight(e),OpenLayers.Util.removeItem(t.selectedFeatures,e),t.events.triggerEvent("featureunselected",{feature:e}),this.onUnselect.call(this.scope,e)},selectBox:function(e){if(e instanceof OpenLayers.Bounds){var t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat);this.multipleSelect()||this.unselectAll(),e=this.multiple,this.multiple=!0;var n=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:n});for(var r,i=0;i<n.length;++i){r=n[i];for(var s=0,o=r.features.length;s<o;++s){var u=r.features[s];u.getVisibility()&&(null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,u.geometry.CLASS_NAME))&&t.toGeometry().intersects(u.geometry)&&-1==OpenLayers.Util.indexOf(r.selectedFeatures,u)&&this.select(u)}}this.multiple=e,this.events.triggerEvent("boxselectionend",{layers:n})}},setMap:function(e){this.handlers.feature.setMap(e),this.box&&this.handlers.box.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(e){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(e),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return!0}return!1},deactivate:function(){var e=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[e],this.eventListener);e=!0}return e},handleKeyEvent:function(e){this.checkModifiers(e)&&this.callback(e.type,[e])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertices:null,virtualVertices:null,selectControl:null,dragControl:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(e,t){t=t||{},this.layer=e,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var n=this,r={geometryTypes:this.geometryTypes,clickout:this.clickout,toggle:this.toggle,onBeforeSelect:this.beforeSelectFeature,onSelect:this.selectFeature,onUnselect:this.unselectFeature,scope:this};!1===this.standalone&&(this.selectControl=new OpenLayers.Control.SelectFeature(e,r)),this.dragControl=new OpenLayers.Control.DragFeature(e,{geometryTypes:["OpenLayers.Geometry.Point"],onStart:function(e,t){n.dragStart.apply(n,[e,t])},onDrag:function(e,t){n.dragVertex.apply(n,[e,t])},onComplete:function(e){n.dragComplete.apply(n,[e])},featureCallbacks:{over:function(e){(n.standalone!==!0||e._sketch||n.feature===e)&&n.dragControl.overFeature.apply(n.dragControl,[e])}}}),this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress})}},destroy:function(){this.layer=null,this.standalone||this.selectControl.destroy(),this.dragControl.destroy(),OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return(this.standalone||this.selectControl.activate())&&this.handlers.keyboard.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){var e=!1;if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.dragControl.deactivate();var t=(e=this.feature)&&e.geometry&&e.layer;!1===this.standalone?(t&&this.selectControl.unselect.apply(this.selectControl,[e]),this.selectControl.deactivate()):t&&this.unselectFeature(e),this.handlers.keyboard.deactivate(),e=!0}return e},beforeSelectFeature:function(e){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:e})},selectFeature:function(e){if(!this.standalone||!1!==this.beforeSelectFeature(e))this.feature=e,this.modified=!1,this.resetVertices(),this.dragControl.activate(),this.onModificationStart(this.feature);var t=e.modified;e.geometry&&(!t||!t.geometry)&&(this._originalGeometry=e.geometry.clone())},unselectFeature:function(e){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.feature=null,this.dragControl.deactivate(),this.onModificationEnd(e),this.layer.events.triggerEvent("afterfeaturemodified",{feature:e,modified:this.modified}),this.modified=!1},dragStart:function(e,t){e!=this.feature&&!e.geometry.parent&&e!=this.dragHandle&&e!=this.radiusHandle&&(!1===this.standalone&&this.feature&&this.selectControl.clickFeature.apply(this.selectControl,[this.feature]),null==this.geometryTypes||-1!=OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME))&&(this.standalone||this.selectControl.clickFeature.apply(this.selectControl,[e]),this.dragControl.overFeature.apply(this.dragControl,[e]),this.dragControl.lastPixel=t,this.dragControl.handlers.drag.started=!0,this.dragControl.handlers.drag.start=t,this.dragControl.handlers.drag.last=t)},dragVertex:function(e,t){this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?(this.feature!=e&&(this.feature=e),this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t})):(e._index?(e.geometry.parent.addComponent(e.geometry,e._index),delete e._index,OpenLayers.Util.removeItem(this.virtualVertices,e),this.vertices.push(e)):e==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):e!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:this.selectControl.renderIntent)),this.layer.drawFeature(e)},dragComplete:function(){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var e=this.feature;e.modified=OpenLayers.Util.extend(e.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){this.dragControl.feature&&this.dragControl.outFeature(this.dragControl.feature),0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(e){var t=e.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,t)&&(t=this.dragControl.feature)&&-1!=OpenLayers.Util.indexOf(this.vertices,t)&&!this.dragControl.handlers.drag.dragging&&t.geometry.parent&&(t.geometry.parent.removeComponent(t.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:t.geometry,feature:this.feature,pixel:e.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:this.selectControl.renderIntent),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){function e(n){var r,i,s;if("OpenLayers.Geometry.Point"==n.CLASS_NAME)i=new OpenLayers.Feature.Vector(n),i._sketch=!0,i.renderIntent=t.vertexRenderIntent,t.vertices.push(i);else{s=n.components.length,"OpenLayers.Geometry.LinearRing"==n.CLASS_NAME&&(s-=1);for(r=0;r<s;++r)i=n.components[r],"OpenLayers.Geometry.Point"==i.CLASS_NAME?(i=new OpenLayers.Feature.Vector(i),i._sketch=!0,i.renderIntent=t.vertexRenderIntent,t.vertices.push(i)):e(i);if(t.createVertices&&"OpenLayers.Geometry.MultiPoint"!=n.CLASS_NAME){r=0;for(s=n.components.length;r<s-1;++r){i=n.components[r];var o=n.components[r+1];"OpenLayers.Geometry.Point"==i.CLASS_NAME&&"OpenLayers.Geometry.Point"==o.CLASS_NAME&&(i=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((i.x+o.x)/2,(i.y+o.y)/2),null,t.virtualStyle),i.geometry.parent=n,i._index=r+1,i._sketch=!0,t.virtualVertices.push(i))}}}}this.vertices=[],this.virtualVertices=[];var t=this;e.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var e=this.feature.geometry,t=e.getBounds().getCenterLonLat(),t=new OpenLayers.Geometry.Point(t.lon,t.lat),n=new OpenLayers.Feature.Vector(t);t.move=function(t,n){OpenLayers.Geometry.Point.prototype.move.call(this,t,n),e.move(t,n)},n._sketch=!0,this.dragHandle=n,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var e=this.feature.geometry,t=e.getBounds(),n=t.getCenterLonLat(),r=new OpenLayers.Geometry.Point(n.lon,n.lat),t=new OpenLayers.Geometry.Point(t.right,t.bottom),n=new OpenLayers.Feature.Vector(t),i=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,s=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,o=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;t.move=function(t,n){OpenLayers.Geometry.Point.prototype.move.call(this,t,n);var u=this.x-r.x,l=this.y-r.y,c=u-t,h=l-n;if(o){var p=Math.atan2(h,c),p=Math.atan2(l,u)-p,p=p*(180/Math.PI);e.rotate(p,r)}if(i){var v;s?(l/=h,v=u/c/l):(c=Math.sqrt(c*c+h*h),l=Math.sqrt(u*u+l*l)/c),e.resize(l,r,v)}},n._sketch=!0,this.radiusHandle=n,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(e){this.standalone||this.selectControl.setMap(e),this.dragControl.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338,.07464553542435169],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',metadata:null,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,initialize:function(e){e=OpenLayers.Util.applyDefaults({sphericalMercator:!0},e),OpenLayers.Layer.XYZ.prototype.initialize.apply(this,[e.name||"Bing "+(e.type||this.type),null,e]),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions),this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_"),window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,this);var e=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),e="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(e),t=document.createElement("script");t.type="text/javascript",t.src=e,t.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(t)},initLayer:function(){var e=this.metadata.resourceSets[0].resources[0],t=e.imageUrl.replace("{quadkey}","${quadkey}"),t=t.replace("{culture}",this.culture);this.url=[];for(var n=0;n<e.imageUrlSubdomains.length;++n)this.url.push(t.replace("{subdomain}",e.imageUrlSubdomains[n]));this.addOptions({maxResolution:Math.min(this.serverResolutions[e.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(e.zoomMax+1-e.zoomMin,this.numZoomLevels)},!0)},getURL:function(e){if(this.url){for(var t=this.getXYZ(e),e=t.x,n=t.y,t=t.z,r=[],i=t;0<i;--i){var s="0",o=1<<i-1;0!=(e&o)&&s++,0!=(n&o)&&(s++,s++),r.push(s)}return r=r.join(""),e=this.selectUrl(""+e+n+t,this.url),OpenLayers.String.format(e,{quadkey:r})}},updateAttribution:function(){var e=this.metadata;if(e.resourceSets&&this.map&&this.map.center){var t=e.resourceSets[0].resources[0],n=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),t=t.imageryProviders,r=this.serverResolutions.indexOf(this.getServerResolution()),i="",s,o,u,a,f,l,c;o=0;for(u=t.length;o<u;++o){s=t[o],a=0;for(f=s.coverageAreas.length;a<f;++a)c=s.coverageAreas[a],l=OpenLayers.Bounds.fromArray(c.bbox,!0),n.intersectsBounds(l)&&r<=c.zoomMax&&r>=c.zoomMin&&(i+=s.attribution+" ")}this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:e.brandLogoUri,copyrights:i}),this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,arguments),this.updateAttribution(),this.map.events.register("moveend",this,this.updateAttribution)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Bing(this.options)),e=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution),OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"}),OpenLayers.Layer.Bing.processMetadata=function(e){this.metadata=e,this.initLayer(),e=document.getElementById(this._callbackId),e.parentNode.removeChild(e),window[this._callbackId]=void 0,delete this._callbackId},OpenLayers.Layer.PointGrid=OpenLayers.Class(OpenLayers.Layer.Vector,{dx:null,dy:null,ratio:1.5,maxFeatures:250,rotation:0,origin:null,gridBounds:null,initialize:function(e){e=e||{},OpenLayers.Layer.Vector.prototype.initialize.apply(this,[e.name,e])},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),e.events.register("moveend",this,this.onMoveEnd)},removeMap:function(e){e.events.unregister("moveend",this,this.onMoveEnd),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},setRatio:function(e){this.ratio=e,this.updateGrid(!0)},setMaxFeatures:function(e){this.maxFeatures=e,this.updateGrid(!0)},setSpacing:function(e,t){this.dx=e,this.dy=t||e,this.updateGrid(!0)},setOrigin:function(e){this.origin=e,this.updateGrid(!0)},getOrigin:function(){return this.origin||(this.origin=this.map.getExtent().getCenterLonLat()),this.origin},setRotation:function(e){this.rotation=e,this.updateGrid(!0)},onMoveEnd:function(){this.updateGrid()},getViewBounds:function(){var e=this.map.getExtent();if(this.rotation){var t=this.getOrigin(),t=new OpenLayers.Geometry.Point(t.lon,t.lat),e=e.toGeometry();e.rotate(-this.rotation,t),e=e.getBounds()}return e},updateGrid:function(e){if(e||this.invalidBounds()){var t=this.getViewBounds(),n=this.getOrigin(),e=new OpenLayers.Geometry.Point(n.lon,n.lat),r=t.getWidth(),i=t.getHeight(),s=r/i,o=Math.sqrt(this.dx*this.dy*this.maxFeatures/s),r=Math.min(r*this.ratio,o*s),i=Math.min(i*this.ratio,o),t=t.getCenterLonLat();this.gridBounds=new OpenLayers.Bounds(t.lon-r/2,t.lat-i/2,t.lon+r/2,t.lat+i/2);for(var t=Math.floor(i/this.dy),r=Math.floor(r/this.dx),i=n.lon+this.dx*Math.ceil((this.gridBounds.left-n.lon)/this.dx),n=n.lat+this.dy*Math.ceil((this.gridBounds.bottom-n.lat)/this.dy),o=Array(t*r),u,a=0;a<r;++a)for(var s=i+a*this.dx,f=0;f<t;++f)u=n+f*this.dy,u=new OpenLayers.Geometry.Point(s,u),this.rotation&&u.rotate(this.rotation,e),o[a*t+f]=new OpenLayers.Feature.Vector(u);this.destroyFeatures(this.features,{silent:!0}),this.addFeatures(o,{silent:!0})}},invalidBounds:function(){return!this.gridBounds||!this.gridBounds.containsBounds(this.getViewBounds())},CLASS_NAME:"OpenLayers.Layer.PointGrid"}),OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,mousePosition:null,interval:0,delta:0,cumulative:!0,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments
),this.wheelListener=null},onWheelEvent:function(e){if(this.map&&this.checkModifiers(e)){for(var t=!1,n=!1,r=!1,i=OpenLayers.Event.element(e);null!=i&&!r&&!t;){if(!t)try{var s=i.currentStyle?i.currentStyle.overflow:document.defaultView.getComputedStyle(i,null).getPropertyValue("overflow"),t=s&&"auto"==s||"scroll"==s}catch(o){}if(!n)for(var r=0,u=this.map.layers.length;r<u;r++)if(i==this.map.layers[r].div||i==this.map.layers[r].pane){n=!0;break}r=i==this.map.div,i=i.parentNode}!t&&r&&(n&&((t=0,e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&9.2>window.opera.version()&&(t=-t)):e.detail&&(t=-e.detail/3),this.delta+=t,this.interval)?(window.clearTimeout(this._timeoutId),this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(e)},this),this.interval)):this.wheelZoom(e)),OpenLayers.Event.stop(e))}},wheelZoom:function(e){var t=this.delta;this.delta=0,t&&(this.mousePosition&&(e.xy=this.mousePosition),e.xy||(e.xy=this.map.getPixelFromLonLat(this.map.getCenter())),0>t?this.callback("down",[e,this.cumulative?t:-1]):this.callback("up",[e,this.cumulative?t:1]))},mousemove:function(e){this.mousePosition=e.xy},activate:function(e){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",t),OpenLayers.Event.observe(window,"mousewheel",t),OpenLayers.Event.observe(document,"mousewheel",t),!0}return!1},deactivate:function(e){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",t),OpenLayers.Event.stopObserving(window,"mousewheel",t),OpenLayers.Event.stopObserving(document,"mousewheel",t),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Symbolizer=OpenLayers.Class({zIndex:0,initialize:function(e){OpenLayers.Util.extend(this,e)},clone:function(){return new(eval(this.CLASS_NAME))(OpenLayers.Util.extend({},this))},CLASS_NAME:"OpenLayers.Symbolizer"}),OpenLayers.Symbolizer.Raster=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Raster"}),OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(e){this.symbolizer={},OpenLayers.Util.extend(this,e),this.symbolizers&&delete this.symbolizer,this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e in this.symbolizer)this.symbolizer[e]=null;this.symbolizer=null,delete this.symbolizers},evaluate:function(e){var t=this.getContext(e),n=!0;if(this.minScaleDenominator||this.maxScaleDenominator)var r=e.layer.map.getScale();return this.minScaleDenominator&&(n=r>=OpenLayers.Style.createLiteral(this.minScaleDenominator,t)),n&&this.maxScaleDenominator&&(n=r<OpenLayers.Style.createLiteral(this.maxScaleDenominator,t)),n&&this.filter&&(n="OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?this.filter.evaluate(e):this.filter.evaluate(t)),n},getContext:function(e){var t=this.context;return t||(t=e.attributes||e.data),"function"==typeof this.context&&(t=this.context(e)),t},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.symbolizers){var t=this.symbolizers.length;e.symbolizers=Array(t);for(var n=0;n<t;++n)e.symbolizers[n]=this.symbolizers[n].clone()}else{e.symbolizer={};for(var r in this.symbolizer)t=this.symbolizer[r],n=typeof t,"object"===n?e.symbolizer[r]=OpenLayers.Util.extend({},t):"string"===n&&(e.symbolizer[r]=t)}return e.filter=this.filter&&this.filter.clone(),e.context=this.context&&OpenLayers.Util.extend({},this.context),new OpenLayers.Rule(e)},CLASS_NAME:"OpenLayers.Rule"}),OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(e){var t=!1;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:if(e.geometry){var n=this.value;"OpenLayers.Bounds"==this.value.CLASS_NAME&&(n=this.value.toGeometry()),e.geometry.intersects(n)&&(t=!0)}break;default:throw Error("evaluate is not implemented for this filter type.")}return t},clone:function(){var e=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(e)},CLASS_NAME:"OpenLayers.Filter.Spatial"}),OpenLayers.Filter.Spatial.BBOX="BBOX",OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS",OpenLayers.Filter.Spatial.DWITHIN="DWITHIN",OpenLayers.Filter.Spatial.WITHIN="WITHIN",OpenLayers.Filter.Spatial.CONTAINS="CONTAINS",OpenLayers.Format.SLD=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{profile:null,defaultVersion:"1.0.0",stringifyOutput:!0,namedLayersAsArray:!1,CLASS_NAME:"OpenLayers.Format.SLD"}),OpenLayers.Symbolizer.Polygon=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Polygon"}),OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(e,t){var n={};this.readChildNodes(e,n),t.outer=n.components[0]},innerBoundaryIs:function(e,t){var n={};this.readChildNodes(e,n),t.inner.push(n.components[0])},Box:function(e,t){var n={};this.readChildNodes(e,n),t.components||(t.components=[]);var r=n.points[0],n=n.points[1];t.components.push(new OpenLayers.Bounds(r.x,r.y,n.x,n.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){return e=this.writeNode(OpenLayers.Util.isArray(e)?"wfs:FeatureCollection":"gml:featureMember",e),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("coordinates",[e],t),t},coordinates:function(e){for(var t=e.length,n=Array(t),r,i=0;i<t;++i)r=e[i],n[i]=this.xy?r.x+","+r.y:r.y+","+r.x,void 0!=r.z&&(n[i]+=","+r.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==t?n[0]:n.join(" ")})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("coordinates",e.components,t),t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("outerBoundaryIs",e.components[0],t);for(var n=1;n<e.components.length;++n)this.writeNode("innerBoundaryIs",e.components[n],t);return t},outerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:outerBoundaryIs");return this.writeNode("LinearRing",e,t),t},innerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:innerBoundaryIs");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("coordinates",e.components,t),t},Box:function(e){var t=this.createElementNSPlus("gml:Box");return this.writeNode("coordinates",[{x:e.left,y:e.bottom},{x:e.right,y:e.top}],t),this.srsName&&t.setAttribute("srsName",this.srsName),t}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},CLASS_NAME:"OpenLayers.Format.GML.v2"}),OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsNotEqualTo:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(e,n),t.filters.push(n)},PropertyIsLike:function(e,t){var n=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(e,n);var r=e.getAttribute("wildCard"),i=e.getAttribute("singleChar"),s=e.getAttribute("escape");n.value2regex(r,i,s),t.filters.push(n)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{wildCard:"*",singleChar:".",escape:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX");e.property&&this.writeNode("PropertyName",e,t);var n=this.writeNode("gml:Box",e.value,t);return e.projection&&n.setAttribute("srsName",e.projection),t}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},writeSpatial:function(e,t){var n=this.createElementNSPlus("ogc:"+t);this.writeNode("PropertyName",e,n);if(e.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",e.value,n);else{var r;r=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Box",e.value),e.projection&&r.setAttribute("srsName",e.projection),n.appendChild(r)}return n},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"}),OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,[e,t])},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},InsertResult:function(e,t){var n={fids:[]};this.readChildNodes(e,n),t.insertIds.push(n.fids[0])},TransactionResult:function(e,t){this.readChildNodes(e,t)},Status:function(e,t){this.readChildNodes(e,t)},SUCCESS:function(e,t){t.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(e){var e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},e),t=e.featurePrefix,n=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType}});e.srsNameInQuery&&e.srsName&&n.setAttribute("srsName",e.srsName),e.featureNS&&n.setAttribute("xmlns:"+t,e.featureNS);if(e.propertyNames)for(var t=0,r=e.propertyNames.length;t<r;t++)this.writeNode("ogc:PropertyName",{property:e.propertyNames[t]},n);return e.filter&&(this.setFilterProperty(e.filter),this.writeNode("ogc:Filter",e.filter,n)),n}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"}),OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(e){this.compare=e?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(e){this.exists(e)&&this.remove(e);var t=e.id;this.determineZIndex(e);for(var n=-1,r=this.order.length,i;1<r-n;)i=parseInt((n+r)/2),0<this.compare(this,e,OpenLayers.Util.getElement(this.order[i]))?n=i:r=i;return this.order.splice(r,0,t),this.indices[t]=this.getZIndex(e),this.getNextElement(r)},remove:function(e){var e=e.id,t=OpenLayers.Util.indexOf(this.order,e);0<=t&&(this.order.splice(t,1),delete this.indices[e],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(e){return null!=this.indices[e.id]},getZIndex:function(e){return e._style.graphicZIndex},determineZIndex:function(e){var t=e._style.graphicZIndex;null==t?(t=this.maxZIndex,e._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(e){e+=1;if(e<this.order.length){var t=OpenLayers.Util.getElement(this.order[e]);return void 0==t&&(t=this.getNextElement(e)),t}return null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(e,t,n){var t=e.getZIndex(t),r=0;return n&&(e=e.getZIndex(n),r=t-e),r},Z_ORDER_DRAWING_ORDER:function(e,t,n){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,n),n&&0==e&&(e=1),e},Z_ORDER_Y_ORDER:function(e,t,n){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,n),n&&0===e&&(t=n._boundsBottom-t._boundsBottom,e=0===t?1:t),e}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.xmlns=this.root=this.rendererRoot=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var e,t=this.vectorRoot;if(t)for(;e=t.firstChild;)t.removeChild(e);if(t=this.textRoot)for(;e=t.firstChild;)t.removeChild(e);this.indexer&&this.indexer.clear()},setExtent:function(e,t){var n=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),r=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var i,s=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/s),s=this.map.getMaxExtent();s.right>e.left&&s.right<e.right?i=!0:s.left>e.left&&s.left<e.right&&(i=!1);if(i!==this.rightOfDateLine||t)n=!1,this.xOffset=!0===i?s.getWidth()/r:0;this.rightOfDateLine=i}return n},getNodeType:function(){},drawGeometry:function(e,t,n){var r=e.CLASS_NAME,i=!0;if("OpenLayers.Geometry.Collection"==r||"OpenLayers.Geometry.MultiPoint"==r||"OpenLayers.Geometry.MultiLineString"==r||"OpenLayers.Geometry.MultiPolygon"==r){for(var r=0,s=e.components.length;r<s;r++)i=this.drawGeometry(e.components[r],t,n)&&i;return i}return r=i=!1,"none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(e.id,e,t,n):r=!0,i=this.redrawNode(e.id,e,t,n)),0==i&&(t=document.getElementById(e.id))&&(t._style.backgroundGraphic&&(r=!0),t.parentNode.removeChild(t)),r&&(t=document.getElementById(e.id+this.BACKGROUND_ID_SUFFIX))&&t.parentNode.removeChild(t),i},redrawNode:function(e,t,n,r){return n=this.applyDefaultSymbolizer(n),e=this.nodeFactory(e,this.getNodeType(t,n)),e._featureId=r,e._boundsBottom=t.getBounds().bottom,e._geometryClass=t.CLASS_NAME,e._style=n,t=this.drawGeometryNode(e,t,n),!1===t?!1:(e=t.node,this.indexer?(n=this.indexer.insert(e))?this.vectorRoot.insertBefore(e,n):this.vectorRoot.appendChild(e):e.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(e),this.postDraw(e),t.complete)},redrawBackgroundNode:function(e,t,n){return n=OpenLayers.Util.extend({},n),n.externalGraphic=n.backgroundGraphic,n.graphicXOffset=n.backgroundXOffset,n.graphicYOffset=n.backgroundYOffset,n.graphicZIndex=n.backgroundGraphicZIndex,n.graphicWidth=n.backgroundWidth||n.graphicWidth,n.graphicHeight=n.backgroundHeight||n.graphicHeight,n.backgroundGraphic=null,n.backgroundXOffset=null,n.backgroundYOffset=null,n.backgroundGraphicZIndex=null,this.redrawNode(e+this.BACKGROUND_ID_SUFFIX,t,n,null)},drawGeometryNode:function(e,t,n){var n=n||e._style,r={isFilled:void 0===n.fill?!0:n.fill,isStroked:void 0===n.stroke?!!n.strokeWidth:n.stroke},i;switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":!1===n.graphic&&(r.isFilled=!1,r.isStroked=!1),i=this.drawPoint(e,t);break;case"OpenLayers.Geometry.LineString":r.isFilled=!1,i=this.drawLineString(e,t);break;case"OpenLayers.Geometry.LinearRing":i=this.drawLinearRing(e,t);break;case"OpenLayers.Geometry.Polygon":i=this.drawPolygon(e,t);break;case"OpenLayers.Geometry.Rectangle":i=this.drawRectangle(e,t)}return e._options=r,0!=i?{node:this.setStyle(e,n,r,t),complete:i}:!1},postDraw:function(){},drawPoint:function(){},drawLineString:function(){},drawLinearRing:function(){},drawPolygon:function(){},drawRectangle:function(){},drawCircle:function(){},removeText:function(e){var t=document.getElementById(e+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t),(e=document.getElementById(e+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(e)},getFeatureIdFromEvent:function(e){var t=e.target,n=t&&t.correspondingUseElement;return(n?n:t||e.srcElement)._featureId},eraseGeometry:function(e,t){if("OpenLayers.Geometry.MultiPoint"==e.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==e.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==e.CLASS_NAME||"OpenLayers.Geometry.Collection"==e.CLASS_NAME)for(var n=0,r=e.components.length;n<r;n++)this.eraseGeometry(e.components[n],t);else(n=OpenLayers.Util.getElement(e.id))&&n.parentNode&&(n.geometry&&(n.geometry.destroy(),n.geometry=null),n.parentNode.removeChild(n),this.indexer&&this.indexer.remove(n),n._style.backgroundGraphic)&&(n=OpenLayers.Util.getElement(e.id+this.BACKGROUND_ID_SUFFIX))&&n.parentNode&&n.parentNode.removeChild(n)},nodeFactory:function(e,t){var n=OpenLayers.Util.getElement(e);return n?this.nodeTypeCompare(n,t)||(n.parentNode.removeChild(n),n=this.nodeFactory(e,t)):n=this.createNode(t,e),n},nodeTypeCompare:function(){},createNode:function(){},moveRoot:function(e){var t=this.root;e.root.parentNode==this.rendererRoot&&(t=e.root),t.parentNode.removeChild(t),e.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(e){return"circle"!=e&&!!e},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(e){var e=e||window.location.href,t=OpenLayers.Util.getParameters(e),n=e.indexOf("#");return 0<n&&(e="?"+e.substring(n+1,e.length),OpenLayers.Util.extend(t,OpenLayers.Util.getParameters(e))),t},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,n=this.map.controls.length;t<n;t++){var r=this.map.controls[t];if(r!=this&&"OpenLayers.Control.ArgParser"==r.CLASS_NAME){r.displayProjection!=this.displayProjection&&(this.displayProjection=r.displayProjection);break}}t==this.map.controls.length&&(t=this.getParameters(),t.layers&&(this.layers=t.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),t.lat&&t.lon)&&(this.center=new OpenLayers.LonLat(parseFloat(t.lon),parseFloat(t.lat)),t.zoom&&(this.zoom=parseFloat(t.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),this.setCenter())},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var e=0,t=this.layers.length;e<t;e++){var n=this.map.layers[e],r=this.layers.charAt(e);"B"==r?this.map.setBaseLayer(n):("T"==r||"F"==r)&&n.setVisibility("T"==r)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"}),OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:!1,base:"",displayProjection:null,initialize:function(e,t,n){null!==e&&"object"==typeof e&&!OpenLayers.Util.isElement(e)?(this.base=document.location.href,OpenLayers.Control.prototype.initialize.apply(this,[e]),null!=this.element&&(this.element=OpenLayers.Util.getElement(this.element))):(OpenLayers.Control.prototype.initialize.apply(this,[n]),this.element=OpenLayers.Util.getElement(e),this.base=t||document.location.href)},destroy:function(){this.element&&this.element.parentNode==this.div&&(this.div.removeChild(this.element),this.element=null),this.map&&this.map.events.unregister("moveend",this,this.updateLink),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,n=this.map.controls.length;t<n;t++){var r=this.map.controls[t];if(r.CLASS_NAME==this.argParserClass.CLASS_NAME){r.displayProjection!=this.displayProjection&&(this.displayProjection=r.displayProjection);break}}t==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),!this.element&&!this.anchor&&(this.element=document.createElement("a"),this.element.innerHTML=OpenLayers.i18n("Permalink"),this.element.href="",this.div.appendChild(this.element)),this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,changebaselayer:this.updateLink,scope:this}),this.updateLink(),this.div},updateLink:function(){var e=this.anchor?"#":"?",t=this.base;-1!=t.indexOf(e)&&(t=t.substring(0,t.indexOf(e))),t+=e+OpenLayers.Util.getParameterString(this.createParams()),this.anchor&&!this.element?window.location.href=t:this.element.href=t},createParams:function(e,t,n){var e=e||this.map.getCenter(),r=OpenLayers.Util.getParameters(this.base);if(e){r.zoom=t||this.map.getZoom(),t=e.lat,e=e.lon,this.displayProjection&&(t=OpenLayers.Projection.transform({x:e,y:t},this.map.getProjectionObject(),this.displayProjection),e=t.x,t=t.y),r.lat=Math.round(1e5*t)/1e5,r.lon=Math.round(1e5*e)/1e5,n=n||this.map.layers,r.layers="",e=0;for(t=n.length;e<t;e++){var i=n[e];r.layers=i.isBaseLayer?r.layers+(i==this.map.baseLayer?"B":"0"):r.layers+(i.getVisibility()?"T":"F")}}return r},CLASS_NAME:"OpenLayers.Control.Permalink"}),OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,n){var r=[];r.push(e,t,{},n),OpenLayers.Layer.Grid.prototype.initialize.apply(this,r)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var e=this.adjustBounds(e),t=this.getServerResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),e=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),t=this.serviceVersion+"/"+this.layername+"/"+(null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,t):this.getServerZoom()+this.zoomOffset)+"/"+n+"/"+e+"."+this.type,n=this.url;return OpenLayers.Util.isArray(n)&&(n=this.selectUrl(t,n)),n+t},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){return OpenLayers.Strategy.prototype.activate.apply(this,arguments)?(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this}),!0):!1},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),e},load:function(e){var t=this.layer;t.events.triggerEvent("loadstart"),t.protocol.read(OpenLayers.Util.applyDefaults({callback:OpenLayers.Function.bind(this.merge,this,t.map.getProjectionObject()),filter:t.filter},e)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(e,t){var n=this.layer;n.destroyFeatures();var r=t.features;if(r&&0<r.length){if(!e.equals(n.projection))for(var i,s=0,o=r.length;s<o;++s)(i=r[s].geometry)&&i.transform(n.projection,e);n.addFeatures(r)}n.events.triggerEvent("loadend")},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"-",zoomOutId:"olZoomOutLink",draw:function(){var e=OpenLayers.Control.prototype.draw.apply(this),t=this.getOrCreateLinks(e),n=t.zoomIn,t=t.zoomOut,r=this.map.events;return t.parentNode!==e&&(r=this.events,r.attachToElement(t.parentNode)),r.register("buttonclick",this,this.onZoomClick),this.zoomInLink=n,this.zoomOutLink=t,e},getOrCreateLinks:function(e){var t=document.getElementById(this.zoomInId),n=document.getElementById(this.zoomOutId);return t||(t=document.createElement("a"),t.href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",e.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),n||(n=document.createElement("a"),n.href="#zoomOut",n.appendChild(document.createTextNode(this.zoomOutText)),n.className="olControlZoomOut",e.appendChild(n)),OpenLayers.Element.addClass(n,"olButton"),{zoomIn:t,zoomOut:n}},onZoomClick:function(e){e=e.buttonElement,e===this.zoomInLink?this.map.zoomIn():e===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),OpenLayers.Layer.PointTrack=OpenLayers.Class(OpenLayers.Layer.Vector,{dataFrom:null,styleFrom:null,addNodes:function(e,t){if(2>e.length)throw Error("At least two point features have to be added to create a line from");for(var n=Array(e.length-1),r,i,s,o=0,u=e.length;o<u;o++){r=e[o];if(s=r.geometry){if("OpenLayers.Geometry.Point"!=s.CLASS_NAME)throw new TypeError("Only features with point geometries are supported.")}else s=r.lonlat,s=new OpenLayers.Geometry.Point(s.lon,s.lat);if(0<o){r=null!=this.dataFrom?e[o+this.dataFrom].data||e[o+this.dataFrom].attributes:null;var a=null!=this.styleFrom?e[o+this.styleFrom].style:null;i=new OpenLayers.Geometry.LineString([i,s]),n[o-1]=new OpenLayers.Feature.Vector(i,r,a)}i=s}this.addFeatures(n,t)},CLASS_NAME:"OpenLayers.Layer.PointTrack"}),OpenLayers.Layer.PointTrack.SOURCE_NODE=-1,OpenLayers.Layer.PointTrack.TARGET_NODE=0,OpenLayers.Layer.PointTrack.dataFrom={SOURCE_NODE:-1,TARGET_NODE:0},OpenLayers.Protocol.WFS=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.WFS.DEFAULTS),t=OpenLayers.Protocol.WFS["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFS version: "+e.version;return new t(e)},OpenLayers.Protocol.WFS.fromWMSLayer=function(e,t){var n,r;return n=e.params.LAYERS,n=(OpenLayers.Util.isArray(n)?n[0]:n).split(":"),1<n.length&&(r=n[0]),n=n.pop(),r={url:e.url,featureType:n,featurePrefix:r,srsName:e.projection&&e.projection.getCode()||e.map&&e.map.getProjectionObject().getCode(),version:"1.1.0"},new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t,r))},OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"},OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var e=0,t=this.markers.length;e<t;e++)this.markers[e].setOpacity(this.opacity)}},moveTo:function(e,t,n){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);if(t||!this.drawn){for(var r=0,i=this.markers.length;r<i;r++)this.drawMarker(this.markers[r]);this.drawn=!0}},addMarker:function(e){this.markers.push(e),1>this.opacity&&e.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(e.map=this.map,this.drawMarker(e))},removeMarker:function(e){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,e),e.erase())},clearMarkers:function(){if(null!=this.markers)for(;0<this.markers.length;)this.removeMarker(this.markers[0])},drawMarker:function(e){var t=this.map.getLayerPxFromLonLat(e.lonlat);null==t?e.display(!1):e.isDrawn()?e.icon&&e.icon.moveTo(t):this.div.appendChild(e.draw(t))},getDataExtent:function(){var e=null;if(this.markers&&0<this.markers.length)for(var e=new OpenLayers.Bounds,t=0,n=this.markers.length;t<n;t++)e.extend(this.markers[t].lonlat);return e},CLASS_NAME:"OpenLayers.Layer.Markers"}),OpenLayers.Control.Pan=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,direction:null,type:OpenLayers.Control.TYPE_BUTTON,initialize:function(e,t){this.direction=e,this.CLASS_NAME+=this.direction,OpenLayers.Control.prototype.initialize.apply(this,[t])},trigger:function(){var e=OpenLayers.Function.bind(function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},this);switch(this.direction){case OpenLayers.Control.Pan.NORTH:this.map.pan(0,-e("h"));break;case OpenLayers.Control.Pan.SOUTH:this.map.pan(0,e("h"));break;case OpenLayers.Control.Pan.WEST:this.map.pan(-e("w"),0);break;case OpenLayers.Control.Pan.EAST:this.map.pan(e("w"),0)}},CLASS_NAME:"OpenLayers.Control.Pan"}),OpenLayers.Control.Pan.NORTH="North",OpenLayers.Control.Pan.SOUTH="South",OpenLayers.Control.Pan.EAST="East",OpenLayers.Control.Pan.WEST="West",OpenLayers.Format.CSWGetDomain=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetDomain.DEFAULTS),t=OpenLayers.Format.CSWGetDomain["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSWGetDomain version: "+e.version;return new t(e)},OpenLayers.Format.CSWGetDomain.DEFAULTS={version:"2.0.2"},OpenLayers.Format.CSWGetDomain.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",PropertyName:null,ParameterName:null,read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetDomainResponse:function(e,t){this.readChildNodes(e,t)},DomainValues:function(e,t){OpenLayers.Util.isArray(t.DomainValues)||(t.DomainValues=[]);for(var n=e.attributes,r={},i=0,s=n.length;i<s;++i)r[n[i].name]=n[i].nodeValue;this.readChildNodes(e,r),t.DomainValues.push(r)},PropertyName:function(e,t){t.PropertyName=this.getChildValue(e)},ParameterName:function(e,t){t.ParameterName=this.getChildValue(e)},ListOfValues:function(e,t){OpenLayers.Util.isArray(t.ListOfValues)||(t.ListOfValues=[]),this.readChildNodes(e,t.ListOfValues)},Value:function(e,t){for(var n=e.attributes,r={},i=0,s=n.length;i<s;++i)r[n[i].name]=n[i].nodeValue;r.value=this.getChildValue(e),t.push({Value:r})},ConceptualScheme:function(e,t){t.ConceptualScheme={},this.readChildNodes(e,t.ConceptualScheme)},Name:function(e,t){t.Name=this.getChildValue(e)},Document:function(e,t){t.Document=this.getChildValue(e)},Authority:function(e,t){t.Authority=this.getChildValue(e)},RangeOfValues:function(
e,t){t.RangeOfValues={},this.readChildNodes(e,t.RangeOfValues)},MinValue:function(e,t){for(var n=e.attributes,r={},i=0,s=n.length;i<s;++i)r[n[i].name]=n[i].nodeValue;r.value=this.getChildValue(e),t.MinValue=r},MaxValue:function(e,t){for(var n=e.attributes,r={},i=0,s=n.length;i<s;++i)r[n[i].name]=n[i].nodeValue;r.value=this.getChildValue(e),t.MaxValue=r}}},write:function(e){return e=this.writeNode("csw:GetDomain",e),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{csw:{GetDomain:function(e){var t=this.createElementNSPlus("csw:GetDomain",{attributes:{service:"CSW",version:this.version}});return e.PropertyName||this.PropertyName?this.writeNode("csw:PropertyName",e.PropertyName||this.PropertyName,t):(e.ParameterName||this.ParameterName)&&this.writeNode("csw:ParameterName",e.ParameterName||this.ParameterName,t),this.readChildNodes(t,e),t},PropertyName:function(e){return this.createElementNSPlus("csw:PropertyName",{value:e})},ParameterName:function(e){return this.createElementNSPlus("csw:ParameterName",{value:e})}}},CLASS_NAME:"OpenLayers.Format.CSWGetDomain.v2_0_2"}),OpenLayers.Format.ArcXML.Features=OpenLayers.Class(OpenLayers.Format.XML,{read:function(e){return(new OpenLayers.Format.ArcXML).read(e).features.feature}}),OpenLayers.Control.Snapping=OpenLayers.Class(OpenLayers.Control,{DEFAULTS:{tolerance:10,node:!0,edge:!0,vertex:!0},greedy:!0,precedence:["node","vertex","edge"],resolution:null,geoToleranceCache:null,layer:null,feature:null,point:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.layer&&this.setLayer(this.options.layer),e=OpenLayers.Util.extend({},this.options.defaults),this.defaults=OpenLayers.Util.applyDefaults(e,this.DEFAULTS),this.setTargets(this.options.targets),0===this.targets.length&&this.layer&&this.addTargetLayer(this.layer),this.geoToleranceCache={}},setLayer:function(e){this.active?(this.deactivate(),this.layer=e,this.activate()):this.layer=e},setTargets:function(e){this.targets=[];if(e&&e.length)for(var t,n=0,r=e.length;n<r;++n)t=e[n],t instanceof OpenLayers.Layer.Vector?this.addTargetLayer(t):this.addTarget(t)},addTargetLayer:function(e){this.addTarget({layer:e})},addTarget:function(e){e=OpenLayers.Util.applyDefaults(e,this.defaults),e.nodeTolerance=e.nodeTolerance||e.tolerance,e.vertexTolerance=e.vertexTolerance||e.tolerance,e.edgeTolerance=e.edgeTolerance||e.tolerance,this.targets.push(e)},removeTargetLayer:function(e){for(var t,n=this.targets.length-1;0<=n;--n)t=this.targets[n],t.layer===e&&this.removeTarget(t)},removeTarget:function(e){return OpenLayers.Util.removeItem(this.targets,e)},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.on({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.un({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),this.point=this.feature=null,e},onSketchModified:function(e){this.feature=e.feature,this.considerSnapping(e.vertex,e.vertex)},onVertexModified:function(e){this.feature=e.feature;var t=this.layer.map.getLonLatFromViewPortPx(e.pixel);this.considerSnapping(e.vertex,new OpenLayers.Geometry.Point(t.lon,t.lat))},considerSnapping:function(e,t){for(var n={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY,x:null,y:null},r=!1,i,s,o=0,u=this.targets.length;o<u;++o)if(s=this.targets[o],i=this.testTarget(s,t)){if(this.greedy){n=i,n.target=s,r=!0;break}if(i.rank<n.rank||i.rank===n.rank&&i.dist<n.dist)n=i,n.target=s,r=!0}r&&(!1!==this.events.triggerEvent("beforesnap",{point:e,x:n.x,y:n.y,distance:n.dist,layer:n.target.layer,snapType:this.precedence[n.rank]})?(e.x=n.x,e.y=n.y,this.point=e,this.events.triggerEvent("snap",{point:e,snapType:this.precedence[n.rank],layer:n.target.layer,distance:n.dist})):r=!1),this.point&&!r&&(e.x=t.x,e.y=t.y,this.point=null,this.events.triggerEvent("unsnap",{point:e}))},testTarget:function(e,t){var n=this.layer.map.getResolution();if("minResolution"in e&&n<e.minResolution||"maxResolution"in e&&n>=e.maxResolution)return null;for(var n={node:this.getGeoTolerance(e.nodeTolerance,n),vertex:this.getGeoTolerance(e.vertexTolerance,n),edge:this.getGeoTolerance(e.edgeTolerance,n)},r=Math.max(n.node,n.vertex,n.edge),i={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY},s=!1,o=e.layer.features,u,a,f,l,c,h,p=this.precedence.length,d=new OpenLayers.LonLat(t.x,t.y),v=0,m=o.length;v<m;++v)if(u=o[v],u!==this.feature&&!u._sketch&&u.state!==OpenLayers.State.DELETE&&(!e.filter||e.filter.evaluate(u))&&u.atPoint(d,r,r))for(var g=0,y=Math.min(i.rank+1,p);g<y;++g)if(a=this.precedence[g],e[a])if("edge"===a){if(f=u.geometry.distanceTo(t,{details:!0}),c=f.distance,c<=n[a]&&c<i.dist){i={rank:g,dist:c,x:f.x0,y:f.y0},s=!0;break}}else{f=u.geometry.getVertices("node"===a),h=!1;for(var b=0,w=f.length;b<w;++b)if(l=f[b],c=l.distanceTo(t),c<=n[a]&&(g<i.rank||g===i.rank&&c<i.dist))i={rank:g,dist:c,x:l.x,y:l.y},h=s=!0;if(h)break}return s?i:null},getGeoTolerance:function(e,t){t!==this.resolution&&(this.resolution=t,this.geoToleranceCache={});var n=this.geoToleranceCache[e];return void 0===n&&(n=e*t,this.geoToleranceCache[e]=n),n},destroy:function(){this.active&&this.deactivate(),delete this.layer,delete this.targets,OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Snapping"}),OpenLayers.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t;if((e=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/))&&(e[1]||e[7])){t=parseInt(e[1],10)||0;var n=parseInt(e[2],10)-1||0,r=parseInt(e[3],10)||1;t=new Date(Date.UTC(t,n,r));if(n=e[7]){var r=parseInt(e[4],10),i=parseInt(e[5],10),s=parseFloat(e[6]),o=s|0,s=Math.round(1e3*(s-o));t.setUTCHours(r,i,o,s),"Z"!==n&&(n=parseInt(n,10),e=parseInt(e[8],10)||0,t=new Date(t.getTime()+ -1e3*(3600*n+60*e)))}}else t=new Date("invalid");return t}},function(){function e(){this._object=s&&!a?new s:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function t(){return new e}function n(e){t.onreadystatechange&&t.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function r(e){try{e.responseText=e._object.responseText}catch(t){}try{var n,r=e._object,i=r.responseXML,s=r.responseText;u&&s&&i&&!i.documentElement&&r.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.validateOnParse=!1,i.loadXML(s)),n=i&&(u&&0!=i.parseError||!i.documentElement||i.documentElement&&"parsererror"==i.documentElement.tagName)?null:i,e.responseXML=n}catch(o){}try{e.status=e._object.status}catch(a){}try{e.statusText=e._object.statusText}catch(f){}}function i(e){e._object.onreadystatechange=new window.Function}var s=window.XMLHttpRequest,o=!!window.controllers,u=window.document.all&&!window.opera,a=u&&window.navigator.userAgent.match(/MSIE 7.0/);t.prototype=e.prototype,o&&s.wrapped&&(t.wrapped=s.wrapped),t.UNSENT=0,t.OPENED=1,t.HEADERS_RECEIVED=2,t.LOADING=3,t.DONE=4,t.prototype.readyState=t.UNSENT,t.prototype.responseText="",t.prototype.responseXML=null,t.prototype.status=0,t.prototype.statusText="",t.prototype.priority="NORMAL",t.prototype.onreadystatechange=null,t.onreadystatechange=null,t.onopen=null,t.onsend=null,t.onabort=null,t.prototype.open=function(e,s,a,f,l){delete this._headers,arguments.length<3&&(a=!0),this._async=a;var p=this,v=this.readyState,m;u&&a&&(m=function(){v!=t.DONE&&(i(p),p.abort())},window.attachEvent("onunload",m)),t.onopen&&t.onopen.apply(this,arguments),arguments.length>4?this._object.open(e,s,a,f,l):arguments.length>3?this._object.open(e,s,a,f):this._object.open(e,s,a),this.readyState=t.OPENED,n(this),this._object.onreadystatechange=function(){if(!o||a)p.readyState=p._object.readyState,r(p),p._aborted?p.readyState=t.UNSENT:(p.readyState==t.DONE&&(delete p._data,i(p),u&&a&&window.detachEvent("onunload",m)),v!=p.readyState&&n(p),v=p.readyState)}},t.prototype.send=function(e){t.onsend&&t.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e;e:{this._object.send(this._data);if(o&&!this._async){this.readyState=t.OPENED;for(r(this);this.readyState<t.DONE;){this.readyState++,n(this);if(this._aborted)break e}}}},t.prototype.abort=function(){t.onabort&&t.onabort.apply(this,arguments),this.readyState>t.UNSENT&&(this._aborted=!0),this._object.abort(),i(this),this.readyState=t.UNSENT,delete this._data},t.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},t.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},t.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},t.prototype.addEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)return;this._listeners.push([e,t,n])},t.prototype.removeEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)break;i&&this._listeners.splice(r,1)},t.prototype.dispatchEvent=function(e){e={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}},e.type=="readystatechange"&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[e]);for(var t=0,n;n=this._listeners[t];t++)n[0]==e.type&&!n[2]&&(n[1].handleEvent||n[1]).apply(this,[e])},t.prototype.toString=function(){return"[object XMLHttpRequest]"},t.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(e,t){t||(t=[]),e.__func=this,e.__func(t[0],t[1],t[2],t[3],t[4]),delete e.__func}),OpenLayers.Request.XMLHttpRequest=t}(),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){return this.features=[],this.styles={},this.fetched={},this.parseData(e,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var n=["Link","NetworkLink","Style","StyleMap","Placemark"],r=0,i=n.length;r<i;++r){var s=n[r],o=this.getElementsByTagNameNS(e,"*",s);if(0!=o.length)switch(s.toLowerCase()){case"link":case"networklink":this.parseLinks(o,t);break;case"style":this.extractStyles&&this.parseStyles(o,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(o,t);break;case"placemark":this.parseFeatures(o,t)}}return this.features},parseLinks:function(e,t){if(t.depth>=this.maxDepth)return!1;var n=OpenLayers.Util.extend({},t);n.depth++;for(var r=0,i=e.length;r<i;r++){var s=this.parseProperty(e[r],"*","href");s&&!this.fetched[s]&&(this.fetched[s]=!0,(s=this.fetchLink(s))&&this.parseData(s,n))}},fetchLink:function(e){if(e=OpenLayers.Request.GET({url:e,async:!1}))return e.responseText},parseStyles:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=this.parseStyle(e[n]);i&&(this.styles[(t.styleBaseUrl||"")+"#"+i.id]=i)}},parseKmlColor:function(e){var t=null;return e&&(e=e.match(this.regExes.kmlColor))&&(t={color:"#"+e[4]+e[3]+e[2],opacity:parseInt(e[1],16)/255}),t},parseStyle:function(e){for(var t={},n=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],r,i,s=0,o=n.length;s<o;++s)if(r=n[s],i=this.getElementsByTagNameNS(e,"*",r)[0])switch(r.toLowerCase()){case"linestyle":r=this.parseProperty(i,"*","color");if(r=this.parseKmlColor(r))t.strokeColor=r.color,t.strokeOpacity=r.opacity;(r=this.parseProperty(i,"*","width"))&&(t.strokeWidth=r);break;case"polystyle":r=this.parseProperty(i,"*","color");if(r=this.parseKmlColor(r))t.fillOpacity=r.opacity,t.fillColor=r.color;"0"==this.parseProperty(i,"*","fill")&&(t.fillColor="none"),"0"==this.parseProperty(i,"*","outline")&&(t.strokeWidth="0");break;case"iconstyle":var u=parseFloat(this.parseProperty(i,"*","scale")||1);r=32*u;var a=32*u,f=this.getElementsByTagNameNS(i,"*","Icon")[0];if(f){var l=this.parseProperty(f,"*","href");if(l){var c=this.parseProperty(f,"*","w"),h=this.parseProperty(f,"*","h");OpenLayers.String.startsWith(l,"http://maps.google.com/mapfiles/kml")&&!c&&!h&&(h=c=64,u/=2),c=c||h,h=h||c,c&&(r=parseInt(c)*u),h&&(a=parseInt(h)*u);if(h=l.match(this.regExes.kmlIconPalette))c=h[1],h=h[2],l=this.parseProperty(f,"*","x"),f=this.parseProperty(f,"*","y"),l="http://maps.google.com/mapfiles/kml/pal"+c+"/icon"+(8*(f?7-f/32:7)+(l?l/32:0))+h;t.graphicOpacity=1,t.externalGraphic=l}}if(i=this.getElementsByTagNameNS(i,"*","hotSpot")[0])l=parseFloat(i.getAttribute("x")),f=parseFloat(i.getAttribute("y")),c=i.getAttribute("xunits"),"pixels"==c?t.graphicXOffset=-l*u:"insetPixels"==c?t.graphicXOffset=-r+l*u:"fraction"==c&&(t.graphicXOffset=-r*l),i=i.getAttribute("yunits"),"pixels"==i?t.graphicYOffset=-a+f*u+1:"insetPixels"==i?t.graphicYOffset=-(f*u)+1:"fraction"==i&&(t.graphicYOffset=-a*(1-f)+1);t.graphicWidth=r,t.graphicHeight=a;break;case"balloonstyle":(i=OpenLayers.Util.getXmlNodeValue(i))&&(t.balloonStyle=i.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":if(r=this.parseProperty(i,"*","color"),r=this.parseKmlColor(r))t.fontColor=r.color,t.fontOpacity=r.opacity}return!t.strokeColor&&t.fillColor&&(t.strokeColor=t.fillColor),(e=e.getAttribute("id"))&&t&&(t.id=e),t},parseStyleMaps:function(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=this.getElementsByTagNameNS(i,"*","Pair"),i=i.getAttribute("id"),o=0,u=s.length;o<u;o++){var a=s[o],f=this.parseProperty(a,"*","key");(a=this.parseProperty(a,"*","styleUrl"))&&"normal"==f&&(this.styles[(t.styleBaseUrl||"")+"#"+i]=this.styles[(t.styleBaseUrl||"")+a])}},parseFeatures:function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var s=e[r],o=this.parseFeature.apply(this,[s]);if(!o)throw"Bad Placemark: "+r;this.extractStyles&&o.attributes&&o.attributes.styleUrl&&(o.style=this.getStyle(o.attributes.styleUrl,t));if(this.extractStyles){var u=this.getElementsByTagNameNS(s,"*","Style")[0];u&&(u=this.parseStyle(u))&&(o.style=OpenLayers.Util.extend(o.style,u))}this.extractTracks?(s=this.getElementsByTagNameNS(s,this.namespaces.gx,"Track"))&&0<s.length&&(o={features:[],feature:o},this.readNode(s[0],o),0<o.features.length&&n.push.apply(n,o.features)):n.push(o)}this.features=this.features.concat(n)},readers:{kml:{when:function(e,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))},_trackPointAttribute:function(e,t){var n=e.nodeName.split(":").pop();t.attributes[n].push(this.getChildValue(e))}},gx:{Track:function(e,t){var n={whens:[],points:[],angles:[]};if(this.trackAttributes){var r;n.attributes={};for(var i=0,s=this.trackAttributes.length;i<s;++i)r=this.trackAttributes[i],n.attributes[r]=[],r in this.readers.kml||(this.readers.kml[r]=this.readers.kml._trackPointAttribute)}this.readChildNodes(e,n);if(n.whens.length!==n.points.length)throw Error("gx:Track with unequal number of when ("+n.whens.length+") and gx:coord ("+n.points.length+") elements.");var o=0<n.angles.length;if(o&&n.whens.length!==n.angles.length)throw Error("gx:Track with unequal number of when ("+n.whens.length+") and gx:angles ("+n.angles.length+") elements.");for(var u,a,i=0,s=n.whens.length;i<s;++i){u=t.feature.clone(),u.fid=t.feature.fid||t.feature.id,a=n.points[i],u.geometry=a,"z"in a&&(u.attributes.altitude=a.z),this.internalProjection&&this.externalProjection&&u.geometry.transform(this.externalProjection,this.internalProjection);if(this.trackAttributes){a=0;for(var f=this.trackAttributes.length;a<f;++a)u.attributes[r]=n.attributes[this.trackAttributes[a]][i]}u.attributes.when=n.whens[i],u.attributes.trackId=t.feature.id,o&&(a=n.angles[i],u.attributes.heading=parseFloat(a[0]),u.attributes.tilt=parseFloat(a[1]),u.attributes.roll=parseFloat(a[2])),t.features.push(u)}},coord:function(e,t){var n=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/),r=new OpenLayers.Geometry.Point(n[0],n[1]);2<n.length&&(r.z=parseFloat(n[2])),t.points.push(r)},angles:function(e,t){var n=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(n)}}},parseFeature:function(e){for(var t=["MultiGeometry","Polygon","LineString","Point"],n,r,i,s=0,o=t.length;s<o;++s)if(n=t[s],this.internalns=e.namespaceURI?e.namespaceURI:this.kmlns,r=this.getElementsByTagNameNS(e,this.internalns,n),0<r.length){if(!(t=this.parseGeometry[n.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+n);i=t.apply(this,[r[0]]),this.internalProjection&&this.externalProjection&&i.transform(this.externalProjection,this.internalProjection);break}var u;return this.extractAttributes&&(u=this.parseAttributes(e)),n=new OpenLayers.Feature.Vector(i,u),e=e.getAttribute("id")||e.getAttribute("name"),null!=e&&(n.fid=e),n},getStyle:function(e,t){var n=OpenLayers.Util.removeTail(e),r=OpenLayers.Util.extend({},t);return r.depth++,r.styleBaseUrl=n,!this.styles[e]&&!OpenLayers.String.startsWith(e,"#")&&r.depth<=this.maxDepth&&!this.fetched[n]&&(n=this.fetchLink(n))&&this.parseData(n,r),OpenLayers.Util.extend({},this.styles[e])},parseGeometry:{point:function(e){var t=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),e=[];if(0<t.length)var n=t[0].firstChild.nodeValue,n=n.replace(this.regExes.removeSpace,""),e=n.split(",");t=null;if(1<e.length)return 2==e.length&&(e[2]=null),t=new OpenLayers.Geometry.Point(e[0],e[1],e[2]),t;throw"Bad coordinate string: "+n},linestring:function(e,t){var n=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),r=null;if(0<n.length){for(var n=this.getChildValue(n[0]),n=n.replace(this.regExes.trimSpace,""),n=n.replace(this.regExes.trimComma,","),r=n.split(this.regExes.splitSpace),i=r.length,s=Array(i),o,u,a=0;a<i;++a){if(o=r[a].split(","),u=o.length,!(1<u))throw"Bad LineString point coordinates: "+r[a];2==o.length&&(o[2]=null),s[a]=new OpenLayers.Geometry.Point(o[0],o[1],o[2])}if(!i)throw"Bad LineString coordinates: "+n;r=t?new OpenLayers.Geometry.LinearRing(s):new OpenLayers.Geometry.LineString(s)}return r},polygon:function(e){var e=this.getElementsByTagNameNS(e,this.internalns,"LinearRing"),t=e.length,n=Array(t);if(0<t)for(var r=0,i=e.length;r<i;++r){if(!(t=this.parseGeometry.linestring.apply(this,[e[r],!0])))throw"Bad LinearRing geometry: "+r;n[r]=t}return new OpenLayers.Geometry.Polygon(n)},multigeometry:function(e){for(var t,n=[],r=e.childNodes,i=0,s=r.length;i<s;++i)e=r[i],1==e.nodeType&&(t=this.parseGeometry[(e.prefix?e.nodeName.split(":")[1]:e.nodeName).toLowerCase()])&&n.push(t.apply(this,[e]));return new OpenLayers.Geometry.Collection(n)}},parseAttributes:function(e){var t={},n=e.getElementsByTagName("ExtendedData");n.length&&(t=this.parseExtendedData(n[0]));for(var r,i,s,e=e.childNodes,n=0,o=e.length;n<o;++n)if(r=e[n],1==r.nodeType&&(i=r.childNodes,1<=i.length&&3>=i.length)){switch(i.length){case 1:s=i[0];break;case 2:s=i[0],i=i[1],s=3==s.nodeType||4==s.nodeType?s:i;break;default:s=i[1]}if(3==s.nodeType||4==s.nodeType)if(r=r.prefix?r.nodeName.split(":")[1]:r.nodeName,s=OpenLayers.Util.getXmlNodeValue(s))s=s.replace(this.regExes.trimSpace,""),t[r]=s}return t},parseExtendedData:function(e){var t={},n,r,i,s,o=e.getElementsByTagName("Data");n=0;for(r=o.length;n<r;n++){i=o[n],s=i.getAttribute("name");var u={},a=i.getElementsByTagName("value");a.length&&(u.value=this.getChildValue(a[0])),this.kvpAttributes?t[s]=u.value:(i=i.getElementsByTagName("displayName"),i.length&&(u.displayName=this.getChildValue(i[0])),t[s]=u)}e=e.getElementsByTagName("SimpleData"),n=0;for(r=e.length;n<r;n++)u={},i=e[n],s=i.getAttribute("name"),u.value=this.getChildValue(i),this.kvpAttributes?t[s]=u.value:(u.displayName=s,t[s]=u);return t},parseProperty:function(e,t,n){var r,e=this.getElementsByTagNameNS(e,t,n);try{r=OpenLayers.Util.getXmlNodeValue(e[0])}catch(i){r=null}return r},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS(this.kmlns,"kml"),n=this.createFolderXML(),r=0,i=e.length;r<i;++r)n.appendChild(this.createPlacemarkXML(e[r]));return t.appendChild(n),OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFolderXML:function(){var e=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var t=this.createElementNS(this.kmlns,"name"),n=this.createTextNode(this.foldersName);t.appendChild(n),e.appendChild(t)}return this.foldersDesc&&(t=this.createElementNS(this.kmlns,"description"),n=this.createTextNode(this.foldersDesc),t.appendChild(n),e.appendChild(t)),e},createPlacemarkXML:function(e){var t=this.createElementNS(this.kmlns,"name");t.appendChild(this.createTextNode(e.style&&e.style.label?e.style.label:e.attributes.name||e.id));var n=this.createElementNS(this.kmlns,"description");n.appendChild(this.createTextNode(e.attributes.description||this.placemarksDesc));var r=this.createElementNS(this.kmlns,"Placemark");return null!=e.fid&&r.setAttribute("id",e.fid),r.appendChild(t),r.appendChild(n),t=this.buildGeometryNode(e.geometry),r.appendChild(t),e.attributes&&(e=this.buildExtendedData(e.attributes))&&r.appendChild(e),r},buildGeometryNode:function(e){var t=e.CLASS_NAME,t=this.buildGeometry[t.substring(t.lastIndexOf(".")+1).toLowerCase()],n=null;return t&&(n=t.apply(this,[e])),n},buildGeometry:{point:function(e){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){return this.buildGeometry.collection.apply(this,[e])},linestring:function(e){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){return this.buildGeometry.collection.apply(this,[e])},linearring:function(e){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t=this.createElementNS(this.kmlns,"Polygon"),e=e.components,n,r,i=0,s=e.length;i<s;++i)n=0==i?"outerBoundaryIs":"innerBoundaryIs",n=this.createElementNS(this.kmlns,n),r=this.buildGeometry.linearring.apply(this,[e[i]]),n.appendChild(r),t.appendChild(n);return t},multipolygon:function(e){return this.buildGeometry.collection.apply(this,[e])},collection:function(e){for(var t=this.createElementNS(this.kmlns,"MultiGeometry"),n,r=0,i=e.components.length;r<i;++r)(n=this.buildGeometryNode.apply(this,[e.components[r]]))&&t.appendChild(n);return t}},buildCoordinatesNode:function(e){var t=this.createElementNS(this.kmlns,"coordinates"),n;if(n=e.components){for(var r=n.length,i=Array(r),s=0;s<r;++s)e=n[s],i[s]=this.buildCoordinates(e);n=i.join(" ")}else n=this.buildCoordinates(e);return n=this.createTextNode(n),t.appendChild(n),t},buildCoordinates:function(e){return this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection)),e.x+","+e.y},buildExtendedData:function(e){var t=this.createElementNS(this.kmlns,"ExtendedData"),n;for(n in e)if(e[n]&&"name"!=n&&"description"!=n&&"styleUrl"!=n){var r=this.createElementNS(this.kmlns,"Data");r.setAttribute("name",n);var i=this.createElementNS(this.kmlns,"value");if("object"==typeof e[n]){if(e[n].value&&i.appendChild(this.createTextNode(e[n].value)),e[n].displayName){var s=this.createElementNS(this.kmlns,"displayName");s.appendChild(this.getXMLDoc().createCDATASection(e[n].displayName)),r.appendChild(s)}}else i.appendChild(this.createTextNode(e[n]));r.appendChild(i),t.appendChild(r)}return this.isSimpleContent(t)?null:t},CLASS_NAME:"OpenLayers.Format.KML"}),OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(e,t,n,r,i,s){null==e&&(e=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=e,this.lonlat=t,this.contentSize=null!=n?n:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=r&&(this.contentHTML=r),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass,this.groupDiv=OpenLayers.Util.createDiv(this.id+"_GroupDiv",null,null,null,"relative",null,"hidden"),e=this.div.id+"_contentDiv",this.contentDiv=OpenLayers.Util.createDiv(e,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),i&&this.addCloseBox(s),this.registerEvents()},destroy:function(){this.border=this.opacity=this.backgroundColor=this.contentHTML=this.size=this.lonlat=this.id=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),this.groupDiv=null,null!=this.map&&this.map.removePopup(this),this.panMapIfOutOfView=this.padding=this.maxSize=this.minSize=this.autoSize=this.div=this.map=null},draw:function(e){return null==e&&null!=this.lonlat&&null!=this.map&&(e=this.map.getLayerPxFromLonLat(this.lonlat)),this.closeOnMove&&this.map.events.register("movestart",this,this.hide),!this.disableFirefoxOverflowHack&&"firefox"==OpenLayers.BROWSER_NAME&&(this.map.events.register("movestart",this,function(){var e=document.defaultView.getComputedStyle(this.contentDiv,null).getPropertyValue("overflow");"hidden"!=e&&(this.contentDiv._oldOverflow=e,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var e=this.contentDiv._oldOverflow;e&&(this.contentDiv.style.overflow=e,this.contentDiv._oldOverflow=null)})),this.moveTo(e),!this.autoSize&&!this.size&&this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){if(this.lonlat&&this.map){var e=this.map.getLayerPxFromLonLat(this.lonlat);e&&this.moveTo(e)}},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(e){this.size=e.clone();var t=this.getContentDivPadding(),n=t.left+t.right,r=t.top+t.bottom;this.fixPadding(),n+=this.padding.left+this.padding.right,r+=this.padding.top+this.padding.bottom;if(this.closeDiv)var i=parseInt(this.closeDiv.style.width),n=n+(i+t.right);this.size.w+=n,this.size.h+=r,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=t.left+t.right,this.contentSize.h+=t.bottom+t.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=e.w+"px",this.contentDiv.style.height=e.h+"px")},updateSize:function(){var e="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",t=this.map?this.map.div:document.body,n=OpenLayers.Util.getRenderedDimensions(e,null,{displayClass:this.displayClass,containerElement:t}),r=this.getSafeContentSize(n),i=null;r.equals(n)?i=n:(n={w:r.w<n.w?r.w:null,h:r.h<n.h?r.h:null},n.w&&n.h?i=r:(e=OpenLayers.Util.getRenderedDimensions(e,n,{displayClass:this.contentDisplayClass,containerElement:t}),"hidden"!=OpenLayers.Element.getStyle(this.contentDiv,"overflow")&&e.equals(r)&&(r=OpenLayers.Util.getScrollbarWidth(),n.w?e.h+=r:e.w+=r),i=this.getSafeContentSize(e))),this.setSize(i)},setBackgroundColor:function(e){void 0!=e&&(this.backgroundColor=e),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(e){void 0!=e&&(this.opacity=e),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(e){void 0!=e&&(this.border=e),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(e){null!=e&&(this.contentHTML=e),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var e=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImageLoad))},t=this.contentDiv.getElementsByTagName("img"),n=0,r=t.length;n<r;n++){var i=t[n];if(0==i.width||0==i.height)i._onImgLoad=OpenLayers.Function.bind(e,{popup:this,img:i}),OpenLayers.Event.observe(i,"load",i._onImgLoad)}},getSafeContentSize:function(e){var e=e.clone(),t=this.getContentDivPadding(),n=t.left+t.right,r=t.top+t.bottom;this.fixPadding(),n+=this.padding.left+this.padding.right,r+=this.padding.top+this.padding.bottom;if(this.closeDiv)var i=parseInt(this.closeDiv.style.width),n=n+(i+t.right);this.minSize&&(e.w=Math.max(e.w,this.minSize.w-n),e.h=Math.max(e.h,this.minSize.h-r)),this.maxSize&&(e.w=Math.min(e.w,this.maxSize.w-n),e.h=Math.min(e.h,this.maxSize.h-r));if(this.map&&this.map.size){i=t=0;if(this.keepInMap&&!this.panMapIfOutOfView)switch(i=this.map.getPixelFromLonLat(this.lonlat),this.relativePosition){case"tr":t=i.x,i=this.map.size.h-i.y;break;case"tl":t=this.map.size.w-i.x,i=this.map.size.h-i.y;break;case"bl":t=this.map.size.w-i.x,i=i.y;break;case"br":t=i.x,i=i.y;break;default:t=i.x,i=this.map.size.h-i.y}r=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-r-i,e.w=Math.min(e.w,this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-n-t),e.h=Math.min(e.h,r)}return e},getContentDivPadding:function(){var e=this._contentDivPadding;return!e&&(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),this._contentDivPadding=e=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this.div.parentNode==document.body)&&(document.body.removeChild(this.div),this.div.style.display=""),e},addCloseBox:function(e){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var t=this.getContentDivPadding();this.closeDiv.style.right=t.right+"px",this.closeDiv.style.top=t.top+"px",this.groupDiv.appendChild(this.closeDiv),e=e||function(e){this.hide(),OpenLayers.Event.stop(e)},OpenLayers.Event.observe(this.closeDiv,"touchend"
,OpenLayers.Function.bindAsEventListener(e,this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(e,this))},panIntoView:function(){var e=this.map.getSize(),t=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),n=t.clone();t.x<this.map.paddingForPopups.left?n.x=this.map.paddingForPopups.left:t.x+this.size.w>e.w-this.map.paddingForPopups.right&&(n.x=e.w-this.map.paddingForPopups.right-this.size.w),t.y<this.map.paddingForPopups.top?n.y=this.map.paddingForPopups.top:t.y+this.size.h>e.h-this.map.paddingForPopups.bottom&&(n.y=e.h-this.map.paddingForPopups.bottom-this.size.h),this.map.pan(t.x-n.x,t.y-n.y)},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:function(e){OpenLayers.Event.stop(e,!0)},scope:this})},onmousedown:function(e){this.mousedown=!0,OpenLayers.Event.stop(e,!0)},onmousemove:function(e){this.mousedown&&OpenLayers.Event.stop(e,!0)},onmouseup:function(e){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(e,!0))},onclick:function(e){OpenLayers.Event.stop(e,!0)},onmouseout:function(){this.mousedown=!1},ondblclick:function(e){OpenLayers.Event.stop(e,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(e,t,n,r,i,s,o){OpenLayers.Popup.prototype.initialize.apply(this,[e,t,n,r,s,o]),this.anchor=null!=i?i:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.relativePosition=this.anchor=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(e){var t=this.relativePosition;this.relativePosition=this.calculateRelativePosition(e),e=this.calculateNewPx(e),OpenLayers.Popup.prototype.moveTo.apply(this,Array(e)),this.relativePosition!=t&&this.updateRelativePosition()},setSize:function(e){OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map&&this.moveTo(this.map.getLayerPxFromLonLat(this.lonlat))},calculateRelativePosition:function(e){return e=this.map.getLonLatFromLayerPx(e),e=this.map.getExtent().determineQuadrant(e),OpenLayers.Bounds.oppositeQuadrant(e)},updateRelativePosition:function(){},calculateNewPx:function(e){var e=e.offset(this.anchor.offset),t=this.size||this.contentSize,n="t"==this.relativePosition.charAt(0);return e.y+=n?-t.h:this.anchor.size.h,n="l"==this.relativePosition.charAt(1),e.x+=n?-t.w:this.anchor.size.w,e},CLASS_NAME:"OpenLayers.Popup.Anchored"}),OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(e,t,n){this.rgb={r:e,g:t,b:n}},setRed:function(e){this.rgb.r=e},setGreen:function(e){this.rgb.g=e},setBlue:function(e){this.rgb.b=e},setHue:function(e){var t=this.asHSB();t.h=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setSaturation:function(e){var t=this.asHSB();t.s=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setBrightness:function(e){var t=this.asHSB();t.b=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},darken:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.max(t.b-e,0))},brighten:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.min(t.b+e,1))},blend:function(e){this.rgb.r=Math.floor((this.rgb.r+e.rgb.r)/2),this.rgb.g=Math.floor((this.rgb.g+e.rgb.g)/2),this.rgb.b=Math.floor((this.rgb.b+e.rgb.b)/2)},isBright:function(){return this.asHSB(),.5<this.asHSB().b},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}}),OpenLayers.Rico.Color.createFromHex=function(e){if(4==e.length)for(var t=e,e="#",n=1;4>n;n++)e+=t.charAt(n)+t.charAt(n);return 0==e.indexOf("#")&&(e=e.substring(1)),t=e.substring(0,2),n=e.substring(2,4),e=e.substring(4,6),new OpenLayers.Rico.Color(parseInt(t,16),parseInt(n,16),parseInt(e,16))},OpenLayers.Rico.Color.createColorFromBackground=function(e){var t=OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e),"backgroundColor");return"transparent"==t&&e.parentNode?OpenLayers.Rico.Color.createColorFromBackground(e.parentNode):null==t?new OpenLayers.Rico.Color(255,255,255):0==t.indexOf("rgb(")?(e=t.substring(4,t.length-1).split(","),new OpenLayers.Rico.Color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]))):0==t.indexOf("#")?OpenLayers.Rico.Color.createFromHex(t):new OpenLayers.Rico.Color(255,255,255)},OpenLayers.Rico.Color.HSBtoRGB=function(e,t,n){var r=0,i=0,s=0;if(0==t)s=i=r=parseInt(255*n+.5);else{var e=6*(e-Math.floor(e)),o=e-Math.floor(e),u=n*(1-t),a=n*(1-t*o),t=n*(1-t*(1-o));switch(parseInt(e)){case 0:r=255*n+.5,i=255*t+.5,s=255*u+.5;break;case 1:r=255*a+.5,i=255*n+.5,s=255*u+.5;break;case 2:r=255*u+.5,i=255*n+.5,s=255*t+.5;break;case 3:r=255*u+.5,i=255*a+.5,s=255*n+.5;break;case 4:r=255*t+.5,i=255*u+.5,s=255*n+.5;break;case 5:r=255*n+.5,i=255*u+.5,s=255*a+.5}}return{r:parseInt(r),g:parseInt(i),b:parseInt(s)}},OpenLayers.Rico.Color.RGBtoHSB=function(e,t,n){var r,i=e>t?e:t;n>i&&(i=n);var s=e<t?e:t;n<s&&(s=n),r=0!=i?(i-s)/i:0;if(0==r)e=0;else{var o=(i-e)/(i-s),u=(i-t)/(i-s),n=(i-n)/(i-s),e=(e==i?n-u:t==i?2+o-n:4+u-o)/6;0>e&&(e+=1)}return{h:e,s:r,b:i/255}},OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Corner={round:function(e,t){e=OpenLayers.Util.getElement(e),this._setOptions(t);var n=this.options.color;"fromElement"==this.options.color&&(n=this._background(e));var r=this.options.bgColor;"fromParent"==this.options.bgColor&&(r=this._background(e.offsetParent)),this._roundCornersImpl(e,n,r)},changeColor:function(e,t){e.style.backgroundColor=t;for(var n=e.parentNode.getElementsByTagName("span"),r=0;r<n.length;r++)n[r].style.backgroundColor=t},changeOpacity:function(e,t){var n="alpha(opacity="+100*t+")";e.style.opacity=t,e.style.filter=n;for(var r=e.parentNode.getElementsByTagName("span"),i=0;i<r.length;i++)r[i].style.opacity=t,r[i].style.filter=n},reRound:function(e,t){var n=e.parentNode.childNodes[2];e.parentNode.removeChild(e.parentNode.childNodes[0]),e.parentNode.removeChild(n),this.round(e.parentNode,t)},_roundCornersImpl:function(e,t,n){this.options.border&&this._renderBorder(e,n),this._isTopRounded()&&this._roundTopCorners(e,t,n),this._isBottomRounded()&&this._roundBottomCorners(e,t,n)},_renderBorder:function(e,t){var n="1px solid "+this._borderColor(t);e.innerHTML="<div "+("style='border-left: "+n+";"+("border-right: "+n)+"'")+">"+e.innerHTML+"</div>"},_roundTopCorners:function(e,t,n){for(var r=this._createCorner(n),i=0;i<this.options.numSlices;i++)r.appendChild(this._createCornerSlice(t,n,i,"top"));e.style.paddingTop=0,e.insertBefore(r,e.firstChild)},_roundBottomCorners:function(e,t,n){for(var r=this._createCorner(n),i=this.options.numSlices-1;0<=i;i--)r.appendChild(this._createCornerSlice(t,n,i,"bottom"));e.style.paddingBottom=0,e.appendChild(r)},_createCorner:function(e){var t=document.createElement("div");return t.style.backgroundColor=this._isTransparent()?"transparent":e,t},_createCornerSlice:function(e,t,n,r){var i=document.createElement("span"),s=i.style;return s.backgroundColor=e,s.display="block",s.height="1px",s.overflow="hidden",s.fontSize="1px",e=this._borderColor(e,t),this.options.border&&0==n?(s.borderTopStyle="solid",s.borderTopWidth="1px",s.borderLeftWidth="0px",s.borderRightWidth="0px",s.borderBottomWidth="0px",s.height="0px",s.borderColor=e):e&&(s.borderColor=e,s.borderStyle="solid",s.borderWidth="0px 1px"),!this.options.compact&&n==this.options.numSlices-1&&(s.height="2px"),this._setMargin(i,n,r),this._setBorder(i,n,r),i},_setOptions:function(e){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1},OpenLayers.Util.extend(this.options,e||{}),this.options.numSlices=this.options.compact?2:4,this._isTransparent()&&(this.options.blend=!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")||0<=this.options.corners.indexOf("tl")&&0<=this.options.corners.indexOf("tr")?"":0<=this.options.corners.indexOf("tl")?"left":0<=this.options.corners.indexOf("tr")?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")||0<=this.options.corners.indexOf("bl")&&0<=this.options.corners.indexOf("br")?"":0<=this.options.corners.indexOf("bl")?"left":0<=this.options.corners.indexOf("br")?"right":""},_borderColor:function(e,t){return"transparent"==e?t:this.options.border?this.options.border:this.options.blend?this._blend(t,e):""},_setMargin:function(e,t,n){t=this._marginSize(t),n="top"==n?this._whichSideTop():this._whichSideBottom(),"left"==n?(e.style.marginLeft=t+"px",e.style.marginRight="0px"):"right"==n?(e.style.marginRight=t+"px",e.style.marginLeft="0px"):(e.style.marginLeft=t+"px",e.style.marginRight=t+"px")},_setBorder:function(e,t,n){t=this._borderSize(t),n="top"==n?this._whichSideTop():this._whichSideBottom(),"left"==n?(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth="0px"):"right"==n?(e.style.borderRightWidth=t+"px",e.style.borderLeftWidth="0px"):(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth=t+"px"),0!=this.options.border&&(e.style.borderLeftWidth=t+"px",e.style.borderRightWidth=t+"px")},_marginSize:function(e){if(this._isTransparent())return 0;var t=[5,3,2,1],n=[3,2,1,0],r=[2,1],i=[1,0];return this.options.compact&&this.options.blend?i[e]:this.options.compact?r[e]:this.options.blend?n[e]:t[e]},_borderSize:function(e){var t=[5,3,2,1],n=[2,1,1,1],r=[1,0],i=[0,2,0,0];return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?r[e]:this.options.blend?n[e]:this.options.border?i[e]:this._isTransparent()?t[e]:0},_hasString:function(e){for(var t=1;t<arguments.length;t++)if(0<=e.indexOf(arguments[t]))return!0;return!1},_blend:function(e,t){var n=OpenLayers.Rico.Color.createFromHex(e);return n.blend(OpenLayers.Rico.Color.createFromHex(t)),n},_background:function(e){try{return OpenLayers.Rico.Color.createColorFromBackground(e).asHex()}catch(t){return"#ffffff"}},_isTransparent:function(){return"transparent"==this.options.color},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(e){return 1==e.childNodes.length&&3==e.childNodes[0].nodeType}},OpenLayers.Popup.AnchoredBubble=OpenLayers.Class(OpenLayers.Popup.Anchored,{rounded:!1,initialize:function(e,t,n,r,i,s,o){OpenLayers.Console.warn("AnchoredBubble is deprecated"),this.padding=new OpenLayers.Bounds(0,OpenLayers.Popup.AnchoredBubble.CORNER_SIZE,0,OpenLayers.Popup.AnchoredBubble.CORNER_SIZE),OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments)},draw:function(e){return OpenLayers.Popup.Anchored.prototype.draw.apply(this,arguments),this.setContentHTML(),this.setBackgroundColor(),this.setOpacity(),this.div},updateRelativePosition:function(){this.setRicoCorners()},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.setRicoCorners()},setBackgroundColor:function(e){void 0!=e&&(this.backgroundColor=e),null!=this.div&&null!=this.contentDiv&&(this.div.style.background="transparent",OpenLayers.Rico.Corner.changeColor(this.groupDiv,this.backgroundColor))},setOpacity:function(e){OpenLayers.Popup.Anchored.prototype.setOpacity.call(this,e),null!=this.div&&null!=this.groupDiv&&OpenLayers.Rico.Corner.changeOpacity(this.groupDiv,this.opacity)},setBorder:function(){this.border=0},setRicoCorners:function(){var e={corners:this.getCornersToRound(this.relativePosition),color:this.backgroundColor,bgColor:"transparent",blend:!1};this.rounded?(OpenLayers.Rico.Corner.reRound(this.groupDiv,e),this.setBackgroundColor(),this.setOpacity()):(OpenLayers.Rico.Corner.round(this.div,e),this.rounded=!0)},getCornersToRound:function(){var e=["tl","tr","bl","br"],t=OpenLayers.Bounds.oppositeQuadrant(this.relativePosition);return OpenLayers.Util.removeItem(e,t),e.join(" ")},CLASS_NAME:"OpenLayers.Popup.AnchoredBubble"}),OpenLayers.Popup.AnchoredBubble.CORNER_SIZE=5,OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,srsName:this.srsName,schema:this.schema},this.formatOptions))),!e.geometryName&&1<parseFloat(this.format.version)&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),n=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",e)]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:n}),t},setFeatureType:function(e){this.featureType=e,this.format.featureType=e},setGeometryName:function(e){this.geometryName=e,this.format.geometryName=e},handleRead:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);if(t.callback){var n=e.priv;200<=n.status&&300>n.status?(n=this.parseResponse(n,t.readOptions))&&!1!==n.success?(t.readOptions&&"object"==t.readOptions.output?OpenLayers.Util.extend(e,n):e.features=n,e.code=OpenLayers.Protocol.Response.SUCCESS):(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=n):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e)}},parseResponse:function(e,t){var n=e.responseXML;if(!n||!n.documentElement)n=e.responseText;if(!n||0>=n.length)return null;n=null!==this.readFormat?this.readFormat.read(n):this.format.read(n,t);if(!this.featureNS){var r=this.readFormat||this.format;this.featureNS=r.featureNS,r.autoConfig=!1,this.geometryName||this.setGeometryName(r.geometryName)}return n},commit:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);var n=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:e});return n.priv=OpenLayers.Request.POST({url:t.url,headers:t.headers,data:this.format.write(e,t),callback:this.createCallback(this.handleCommit,n,t)}),n},handleCommit:function(e,t){if(t.callback){var n=e.priv,r=n.responseXML;if(!r||!r.documentElement)r=n.responseText;n=this.format.read(r)||{},e.insertIds=n.insertIds||[],n.success?e.code=OpenLayers.Protocol.Response.SUCCESS:(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=n),t.callback.call(t.scope,e)}},filterDelete:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),new OpenLayers.Protocol.Response({requestType:"commit"});var n=this.format.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version}}),r=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(t.featureNS?this.featurePrefix+":":"")+t.featureType}});t.featureNS&&r.setAttribute("xmlns:"+this.featurePrefix,t.featureNS);var i=this.format.writeNode("ogc:Filter",e);return r.appendChild(i),n.appendChild(r),n=OpenLayers.Format.XML.prototype.write.apply(this.format,[n]),OpenLayers.Request.POST({url:this.url,callback:t.callback||function(){},data:n})},abort:function(e){e&&e.priv.abort()},CLASS_NAME:"OpenLayers.Protocol.WFS.v1"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,touch:!1,lastTouchPx:null,initialize:function(e,t,n){if(!n||!n.layerOptions||!n.layerOptions.styleMap)this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{});OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),!0},createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,this.touch=!1,!0):!1},destroyFeature:function(e){this.layer&&(e||!this.persist)&&this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var e=this.layer;e&&1<e.features.length&&this.layer.features[0].destroy()},finalize:function(e){this.mouseDown=!1,this.lastTouchPx=this.lastUp=this.lastDown=null,this.callback(e?"cancel":"done",[this.geometryClone()]),this.destroyFeature(e)},cancel:function(){this.finalize(!0)},click:function(e){return OpenLayers.Event.stop(e),!1},dblclick:function(e){return OpenLayers.Event.stop(e),!1},modifyFeature:function(e){this.point||this.createFeature(e),e=this.layer.getLonLatFromViewPortPx(e),this.point.geometry.x=e.lon,this.point.geometry.y=e.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var e=this.point&&this.point.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPoint([e])),e},geometryClone:function(){var e=this.getGeometry();return e&&e.clone()},mousedown:function(e){return this.down(e)},touchstart:function(e){return this.touch||(this.touch=!0,this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,scope:this})),this.lastTouchPx=e.xy,this.down(e)},mousemove:function(e){return this.move(e)},touchmove:function(e){return this.lastTouchPx=e.xy,this.move(e)},mouseup:function(e){return this.up(e)},touchend:function(e){return e.xy=this.lastTouchPx,this.up(e)},down:function(e){return this.mouseDown=!0,this.lastDown=e.xy,this.touch||this.modifyFeature(e.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(e){return!this.touch&&(!this.mouseDown||this.stoppedDown)&&this.modifyFeature(e.xy),!0},up:function(e){return this.mouseDown=!1,this.stoppedDown=this.stopDown,this.checkModifiers(e)&&(!this.lastUp||!this.lastUp.equals(e.xy))&&this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)?(this.touch&&this.modifyFeature(e.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=e.xy,this.finalize(),!this.stopUp):!0},mouseout:function(e){OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(e,t,n){var r=!0;return null!=n&&e&&t&&e.distanceTo(t)>n&&(r=!1),r},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(e){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,e),this.line=null},destroyPersistedFeature:function(){var e=this.layer;e&&2<e.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(e){this.layer.removeFeatures([this.point]),e=this.layer.getLonLatFromViewPortPx(e),this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e.lon,e.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(e,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(e,t){var n=this.line.geometry.components[this.getCurrentPointIndex()-1];n&&!isNaN(n.x)&&!isNaN(n.y)&&this.insertXY(n.x+e,n.y+t)},insertDirectionLength:function(e,t){var e=e*(Math.PI/180),n=t*Math.cos(e),r=t*Math.sin(e);this.insertDeltaXY(n,r)},insertDeflectionLength:function(e,t){var n=this.getCurrentPointIndex()-1;if(0<n){var r=this.line.geometry.components[n],n=this.line.geometry.components[n-1];this.insertDirectionLength(180*Math.atan2(r.y-n.y,r.x-n.x)/Math.PI+e,t)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var e=this.line.geometry,t=e.components,n=this.getCurrentPointIndex()-1,t=t[n];if(e=e.removeComponent(t))this.redoStack||(this.redoStack=[]),this.redoStack.push(t),this.drawFeature();return e},redo:function(){var e=this.redoStack&&this.redoStack.pop();return e&&(this.line.geometry.addComponent(e,this.getCurrentPointIndex()),this.drawFeature()),!!e},freehandMode:function(e){return this.freehandToggle&&e[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(e,t){this.line||this.createFeature(e);var n=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=n.lon,this.point.geometry.y=n.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var e=this.line&&this.line.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiLineString([e])),e},touchstart:function(e){return this.timerId&&this.passesTolerance(this.lastTouchPx,e.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,e))},down:function(e){var t=this.stopDown;return this.freehandMode(e)&&(t=!0,this.touch&&(this.modifyFeature(e.xy,!!this.lastUp),OpenLayers.Event.stop(e))),!this.touch&&(!this.lastDown||!this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance))&&this.modifyFeature(e.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=e.xy,this.stoppedDown=t,!t},move:function(e){return this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(e.xy),!1):(!this.touch&&(!this.mouseDown||this.stoppedDown)&&this.modifyFeature(e.xy,!!this.lastUp),!0)},up:function(e){return this.mouseDown&&(!this.lastUp||!this.lastUp.equals(e.xy))&&(this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(e.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(e.xy),this.lastUp=e.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]),this.removePoint(),this.finalize()},dblclick:function(e){return this.freehandMode(e)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Spherical=OpenLayers.Spherical||{},OpenLayers.Spherical.DEFAULT_RADIUS=6378137,OpenLayers.Spherical.computeDistanceBetween=function(e,t,n){var n=n||OpenLayers.Spherical.DEFAULT_RADIUS,r=Math.sin(Math.PI*(t.lon-e.lon)/360),i=Math.sin(Math.PI*(t.lat-e.lat)/360),e=i*i+r*r*Math.cos(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180);return 2*n*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))},OpenLayers.Spherical.computeHeading=function(e,t){var n=Math.sin(Math.PI*(e.lon-t.lon)/180)*Math.cos(Math.PI*t.lat/180),r=Math.cos(Math.PI*e.lat/180)*Math.sin(Math.PI*t.lat/180)-Math.sin(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180)*Math.cos(Math.PI*(e.lon-t.lon)/180);return 180*Math.atan2(n,r)/Math.PI},OpenLayers.Control.CacheWrite=OpenLayers.Class(OpenLayers.Control,{layers:null,imageFormat:"image/png",quotaRegEx:/quota/i,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);var t,n=this.layers||e.layers;for(t=n.length-1;0<=t;--t)this.addLayer({layer:n[t]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.on({tileloadstart:this.makeSameOrigin,tileloaded:this.cache,scope:this})},removeLayer:function(e){e.layer.events.un({tileloadstart:this.makeSameOrigin,tileloaded:this.cache,scope:this})},makeSameOrigin:function(e){if(this.active&&(e=e.tile,e instanceof OpenLayers.Tile.Image&&!e.crossOriginKeyword&&"data:"!==e.url.substr(0,5))){var t=OpenLayers.Request.makeSameOrigin(e.url,OpenLayers.ProxyHost);OpenLayers.Control.CacheWrite.urlMap[t]=e.url,e.url=t}},cache:function(e){if(this.active&&window.localStorage&&(e=e.tile,e instanceof OpenLayers.Tile.Image&&"data:"!==e.url.substr(0,5)))try{var t=e.getCanvasContext();if(t){var n=OpenLayers.Control.CacheWrite.urlMap;window.localStorage.setItem("olCache_"+(n[e.url]||e.url),t.canvas.toDataURL(this.imageFormat)),delete n[e.url]}}catch(r){(t=r.name||r.message)&&this.quotaRegEx.test(t)?this.events.triggerEvent("cachefull",{tile:e}):OpenLayers.Console.error(r.toString())}},destroy:function(){if(this.layers||this.map){var e,t=this.layers||this.map.layers;for(e=t.length-1;0<=e;--e)this.removeLayer({layer:t[e]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheWrite"}),OpenLayers.Control.CacheWrite.clearCache=function(){if(window.localStorage){var e,t;for(e=window.localStorage.length-1;0<=e;--e)t=window.localStorage.key(e),"olCache_"===t.substr(0,8)&&window.localStorage.removeItem(t)}},OpenLayers.Control.CacheWrite.urlMap={},OpenLayers.Format.Context=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{layerOptions:null,layerParams:null,read:function(e,t){var n=OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this,arguments);if(t&&t.map)if(this.context=n,t.map instanceof OpenLayers.Map)n=this.mergeContextToMap(n,t.map);else{var r=t.map;if(OpenLayers.Util.isElement(r)||"string"==typeof r)r={div:r};n=this.contextToMap(n,r)}return n},getLayerFromContext:function(e){var t,n,r={queryable:e.queryable,visibility:e.visibility,maxExtent:e.maxExtent,metadata:OpenLayers.Util.applyDefaults(e.metadata,{styles:e.styles,formats:e.formats,"abstract":e["abstract"],dataURL:e.dataURL}),numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.tileSize?new OpenLayers.Size(e.tileSize.width,e.tileSize.height):void 0,minScale:e.minScale||e.maxScaleDenominator,maxScale:e.maxScale||e.minScaleDenominator,srs:e.srs,dimensions:e.dimensions,metadataURL:e.metadataURL};this.layerOptions&&OpenLayers.Util.applyDefaults(r,this.layerOptions);var i={layers:e.name,transparent:e.transparent,version:e.version};if(e.formats&&0<e.formats.length){i.format=e.formats[0].value,t=0;for(n=e.formats.length;t<n;t++){var s=e.formats[t];if(1==s.current){i.format=s.value;break}}}if(e.styles&&0<e.styles.length){t=0;for(n=e.styles.length;t<n;t++)if(s=e.styles[t],1==s.current){s.href?i.sld=s.href:s.body?i.sld_body=s.body:i.styles=s.name;break}}return this.layerParams&&OpenLayers.Util.applyDefaults(i,this.layerParams),t=null,n=e.service,n==OpenLayers.Format.Context.serviceTypes.WFS?(r.strategies=[new OpenLayers.Strategy.BBOX],r.protocol=new OpenLayers.Protocol.WFS({url:e.url,featurePrefix:e.name.split(":")[0],featureType:e.name.split(":").pop()}),t=new OpenLayers.Layer.Vector(e.title||e.name,r)):n==OpenLayers.Format.Context.serviceTypes.KML?(r.strategies=[new OpenLayers.Strategy.Fixed],r.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.KML}),t=new OpenLayers.Layer.Vector(e.title||e.name,r)):n==OpenLayers.Format.Context.serviceTypes.GML?(r.strategies=[new OpenLayers.Strategy.Fixed],r.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.GML}),t=new OpenLayers.Layer.Vector(e.title||e.name,r)):e.features?(t=new OpenLayers.Layer.Vector(e.title||e.name,r),t.addFeatures(e.features)):!0!==e.categoryLayer&&(t=new OpenLayers.Layer.WMS(e.title||e.name,e.url,i,r)),t},getLayersFromContext:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=this.getLayerFromContext(e[n]);null!==i&&t.push(i)}return t},contextToMap:function(e,t){t=OpenLayers.Util.applyDefaults({maxExtent:e.maxExtent,projection:e.projection,units:e.units},t),t.maxExtent&&(t.maxResolution=t.maxExtent.getWidth()/OpenLayers.Map.TILE_WIDTH),t.metadata={contactInformation:e.contactInformation,"abstract":e["abstract"],keywords:e.keywords,logo:e.logo,descriptionURL:e.descriptionURL};var n=new OpenLayers.Map(t);return n.addLayers(this.getLayersFromContext(e.layersContext)),n.setCenter(e.bounds.getCenterLonLat(),n.getZoomForExtent(e.bounds,!0)),n},mergeContextToMap:function(e,t){return t.addLayers(this.getLayersFromContext(e.layersContext)),t},write:function(e,t){return e=this.toContext(e),OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,arguments)},CLASS_NAME:"OpenLayers.Format.Context"}),OpenLayers.Format.Context.serviceTypes={WMS:"urn:ogc:serviceType:WMS",WFS:"urn:ogc:serviceType:WFS",WCS:"urn:ogc:serviceType:WCS",GML:"urn:ogc:serviceType:GML",SLD:"urn:ogc:serviceType:SLD",FES:"urn:ogc:serviceType:FES",KML:"urn:ogc:serviceType:KML"},OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",layerToContext:function(e){var t=this.getParser(),n={queryable:e.queryable,visibility:e.visibility,name:e.params.LAYERS,title:e.name,"abstract":e.metadata["abstract"],dataURL:e.metadata.dataURL,metadataURL:e.metadataURL,server:{version:e.params.VERSION,url:e.url},maxExtent:e.maxExtent,transparent:e.params.TRANSPARENT,numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:1==e.opacity?void 0:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.singleTile||!e.tileSize?void 0:{width:e.tileSize.w,height:e.tileSize.h},minScale:e.options.resolutions||e.options.scales||e.options.maxResolution||e.options.minScale?e.minScale:void 0,maxScale:e.options.resolutions||e.options.scales||e.options.minResolution||e.options.maxScale?e.maxScale:void 0,formats:[],styles:[],srs:e.srs,dimensions:e.dimensions};e.metadata.servertitle&&(n.server.title=e.metadata.servertitle);if(e.metadata.formats&&0<e.metadata.formats.length)for(var r=0,i=e.metadata.formats.length;r<i;r++){var s=e.metadata.formats[r];n.formats.push({value
:s.value,current:s.value==e.params.FORMAT})}else n.formats.push({value:e.params.FORMAT,current:!0});if(e.metadata.styles&&0<e.metadata.styles.length){r=0;for(i=e.metadata.styles.length;r<i;r++)t=e.metadata.styles[r],t.current=t.href==e.params.SLD||t.body==e.params.SLD_BODY||t.name==e.params.STYLES?!0:!1,n.styles.push(t)}else n.styles.push({href:e.params.SLD,body:e.params.SLD_BODY,name:e.params.STYLES||t.defaultStyleName,title:t.defaultStyleTitle,current:!0});return n},toContext:function(e){var t={},n=e.layers;if("OpenLayers.Map"==e.CLASS_NAME){var r=e.metadata||{};t.size=e.getSize(),t.bounds=e.getExtent(),t.projection=e.projection,t.title=e.title,t.keywords=r.keywords,t["abstract"]=r["abstract"],t.logo=r.logo,t.descriptionURL=r.descriptionURL,t.contactInformation=r.contactInformation,t.maxExtent=e.maxExtent}else OpenLayers.Util.applyDefaults(t,e),void 0!=t.layers&&delete t.layers;void 0==t.layersContext&&(t.layersContext=[]);if(void 0!=n&&OpenLayers.Util.isArray(n)){e=0;for(r=n.length;e<r;e++){var i=n[e];i instanceof OpenLayers.Layer.WMS&&t.layersContext.push(this.layerToContext(i))}}return t},CLASS_NAME:"OpenLayers.Format.WMC"}),OpenLayers.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(e){var t=null;if(null==e)t=this.namespaces[this.defaultPrefix];else for(t in this.namespaces)if(this.namespaces[t]==e)break;return t},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",defaultStyleTitle:"Default",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e=e.documentElement,this.rootPrefix=e.prefix;var t={version:e.getAttribute("version")};return this.runChildNodes(t,e),t},runChildNodes:function(e,t){for(var n=t.childNodes,r,i,s,o=0,u=n.length;o<u;++o)r=n[o],1==r.nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),s=r.nodeName.split(":").pop(),(i=this["read_"+i+"_"+s])&&i.apply(this,[e,r]))},read_wmc_General:function(e,t){this.runChildNodes(e,t)},read_wmc_BoundingBox:function(e,t){e.projection=t.getAttribute("SRS"),e.bounds=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"))},read_wmc_LayerList:function(e,t){e.layersContext=[],this.runChildNodes(e,t)},read_wmc_Layer:function(e,t){var n={visibility:"1"!=t.getAttribute("hidden"),queryable:"1"==t.getAttribute("queryable"),formats:[],styles:[],metadata:{}};this.runChildNodes(n,t),e.layersContext.push(n)},read_wmc_Extension:function(e,t){this.runChildNodes(e,t)},read_ol_units:function(e,t){e.units=this.getChildValue(t)},read_ol_maxExtent:function(e,t){var n=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"));e.maxExtent=n},read_ol_transparent:function(e,t){e.transparent=this.getChildValue(t)},read_ol_numZoomLevels:function(e,t){e.numZoomLevels=parseInt(this.getChildValue(t))},read_ol_opacity:function(e,t){e.opacity=parseFloat(this.getChildValue(t))},read_ol_singleTile:function(e,t){e.singleTile="true"==this.getChildValue(t)},read_ol_tileSize:function(e,t){var n={width:t.getAttribute("width"),height:t.getAttribute("height")};e.tileSize=n},read_ol_isBaseLayer:function(e,t){e.isBaseLayer="true"==this.getChildValue(t)},read_ol_displayInLayerSwitcher:function(e,t){e.displayInLayerSwitcher="true"==this.getChildValue(t)},read_wmc_Server:function(e,t){e.version=t.getAttribute("version"),e.url=this.getOnlineResource_href(t),e.metadata.servertitle=t.getAttribute("title")},read_wmc_FormatList:function(e,t){this.runChildNodes(e,t)},read_wmc_Format:function(e,t){var n={value:this.getChildValue(t)};"1"==t.getAttribute("current")&&(n.current=!0),e.formats.push(n)},read_wmc_StyleList:function(e,t){this.runChildNodes(e,t)},read_wmc_Style:function(e,t){var n={};this.runChildNodes(n,t),"1"==t.getAttribute("current")&&(n.current=!0),e.styles.push(n)},read_wmc_SLD:function(e,t){this.runChildNodes(e,t)},read_sld_StyledLayerDescriptor:function(e,t){var n=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=n},read_sld_FeatureTypeStyle:function(e,t){var n=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=n},read_wmc_OnlineResource:function(e,t){e.href=this.getAttributeNS(t,this.namespaces.xlink,"href")},read_wmc_Name:function(e,t){var n=this.getChildValue(t);n&&(e.name=n)},read_wmc_Title:function(e,t){var n=this.getChildValue(t);n&&(e.title=n)},read_wmc_MetadataURL:function(e,t){e.metadataURL=this.getOnlineResource_href(t)},read_wmc_KeywordList:function(e,t){e.keywords=[],this.runChildNodes(e.keywords,t)},read_wmc_Keyword:function(e,t){e.push(this.getChildValue(t))},read_wmc_Abstract:function(e,t){var n=this.getChildValue(t);n&&(e["abstract"]=n)},read_wmc_LogoURL:function(e,t){e.logo={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)}},read_wmc_DescriptionURL:function(e,t){e.descriptionURL=this.getOnlineResource_href(t)},read_wmc_ContactInformation:function(e,t){var n={};this.runChildNodes(n,t),e.contactInformation=n},read_wmc_ContactPersonPrimary:function(e,t){var n={};this.runChildNodes(n,t),e.personPrimary=n},read_wmc_ContactPerson:function(e,t){var n=this.getChildValue(t);n&&(e.person=n)},read_wmc_ContactOrganization:function(e,t){var n=this.getChildValue(t);n&&(e.organization=n)},read_wmc_ContactPosition:function(e,t){var n=this.getChildValue(t);n&&(e.position=n)},read_wmc_ContactAddress:function(e,t){var n={};this.runChildNodes(n,t),e.contactAddress=n},read_wmc_AddressType:function(e,t){var n=this.getChildValue(t);n&&(e.type=n)},read_wmc_Address:function(e,t){var n=this.getChildValue(t);n&&(e.address=n)},read_wmc_City:function(e,t){var n=this.getChildValue(t);n&&(e.city=n)},read_wmc_StateOrProvince:function(e,t){var n=this.getChildValue(t);n&&(e.stateOrProvince=n)},read_wmc_PostCode:function(e,t){var n=this.getChildValue(t);n&&(e.postcode=n)},read_wmc_Country:function(e,t){var n=this.getChildValue(t);n&&(e.country=n)},read_wmc_ContactVoiceTelephone:function(e,t){var n=this.getChildValue(t);n&&(e.phone=n)},read_wmc_ContactFacsimileTelephone:function(e,t){var n=this.getChildValue(t);n&&(e.fax=n)},read_wmc_ContactElectronicMailAddress:function(e,t){var n=this.getChildValue(t);n&&(e.email=n)},read_wmc_DataURL:function(e,t){e.dataURL=this.getOnlineResource_href(t)},read_wmc_LegendURL:function(e,t){var n={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)};e.legend=n},read_wmc_DimensionList:function(e,t){e.dimensions={},this.runChildNodes(e.dimensions,t)},read_wmc_Dimension:function(e,t){var n={name:t.getAttribute("name").toLowerCase(),units:t.getAttribute("units")||"",unitSymbol:t.getAttribute("unitSymbol")||"",userValue:t.getAttribute("userValue")||"",nearestValue:"1"===t.getAttribute("nearestValue"),multipleValues:"1"===t.getAttribute("multipleValues"),current:"1"===t.getAttribute("current"),"default":t.getAttribute("default")||""},r=this.getChildValue(t);n.values=r.split(","),e[n.name]=n},write:function(e,t){var n=this.createElementDefaultNS("ViewContext");return this.setAttributes(n,{version:this.VERSION,id:t&&"string"==typeof t.id?t.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")}),this.setAttributeNS(n,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),n.appendChild(this.write_wmc_General(e)),n.appendChild(this.write_wmc_LayerList(e)),OpenLayers.Format.XML.prototype.write.apply(this,[n])},createElementDefaultNS:function(e,t,n){return e=this.createElementNS(this.namespaces[this.defaultPrefix],e),t&&e.appendChild(this.createTextNode(t)),n&&this.setAttributes(e,n),e},setAttributes:function(e,t){var n,r;for(r in t)n=t[r].toString(),n.match(/[A-Z]/)?this.setAttributeNS(e,null,r,n):e.setAttribute(r,n)},write_wmc_General:function(e){var t=this.createElementDefaultNS("General");e.size&&t.appendChild(this.createElementDefaultNS("Window",null,{width:e.size.w,height:e.size.h}));var n=e.bounds;return t.appendChild(this.createElementDefaultNS("BoundingBox",null,{minx:n.left.toPrecision(18),miny:n.bottom.toPrecision(18),maxx:n.right.toPrecision(18),maxy:n.top.toPrecision(18),SRS:e.projection})),t.appendChild(this.createElementDefaultNS("Title",e.title)),e.keywords&&t.appendChild(this.write_wmc_KeywordList(e.keywords)),e["abstract"]&&t.appendChild(this.createElementDefaultNS("Abstract",e["abstract"])),e.logo&&t.appendChild(this.write_wmc_URLType("LogoURL",e.logo.href,e.logo)),e.descriptionURL&&t.appendChild(this.write_wmc_URLType("DescriptionURL",e.descriptionURL)),e.contactInformation&&t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)),t.appendChild(this.write_ol_MapExtension(e)),t},write_wmc_KeywordList:function(e){for(var t=this.createElementDefaultNS("KeywordList"),n=0,r=e.length;n<r;n++)t.appendChild(this.createElementDefaultNS("Keyword",e[n]));return t},write_wmc_ContactInformation:function(e){var t=this.createElementDefaultNS("ContactInformation");return e.personPrimary&&t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)),e.position&&t.appendChild(this.createElementDefaultNS("ContactPosition",e.position)),e.contactAddress&&t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)),e.phone&&t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone",e.phone)),e.fax&&t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone",e.fax)),e.email&&t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress",e.email)),t},write_wmc_ContactPersonPrimary:function(e){var t=this.createElementDefaultNS("ContactPersonPrimary");return e.person&&t.appendChild(this.createElementDefaultNS("ContactPerson",e.person)),e.organization&&t.appendChild(this.createElementDefaultNS("ContactOrganization",e.organization)),t},write_wmc_ContactAddress:function(e){var t=this.createElementDefaultNS("ContactAddress");return e.type&&t.appendChild(this.createElementDefaultNS("AddressType",e.type)),e.address&&t.appendChild(this.createElementDefaultNS("Address",e.address)),e.city&&t.appendChild(this.createElementDefaultNS("City",e.city)),e.stateOrProvince&&t.appendChild(this.createElementDefaultNS("StateOrProvince",e.stateOrProvince)),e.postcode&&t.appendChild(this.createElementDefaultNS("PostCode",e.postcode)),e.country&&t.appendChild(this.createElementDefaultNS("Country",e.country)),t},write_ol_MapExtension:function(e){var t=this.createElementDefaultNS("Extension");if(e=e.maxExtent){var n=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(n,{minx:e.left.toPrecision(18),miny:e.bottom.toPrecision(18),maxx:e.right.toPrecision(18),maxy:e.top.toPrecision(18)}),t.appendChild(n)}return t},write_wmc_LayerList:function(e){for(var t=this.createElementDefaultNS("LayerList"),n=0,r=e.layersContext.length;n<r;++n)t.appendChild(this.write_wmc_Layer(e.layersContext[n]));return t},write_wmc_Layer:function(e){var t=this.createElementDefaultNS("Layer",null,{queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1"});return t.appendChild(this.write_wmc_Server(e)),t.appendChild(this.createElementDefaultNS("Name",e.name)),t.appendChild(this.createElementDefaultNS("Title",e.title)),e["abstract"]&&t.appendChild(this.createElementDefaultNS("Abstract",e["abstract"])),e.dataURL&&t.appendChild(this.write_wmc_URLType("DataURL",e.dataURL)),e.metadataURL&&t.appendChild(this.write_wmc_URLType("MetadataURL",e.metadataURL)),t},write_wmc_LayerExtension:function(e){var t=this.createElementDefaultNS("Extension"),n=e.maxExtent,r=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(r,{minx:n.left.toPrecision(18),miny:n.bottom.toPrecision(18),maxx:n.right.toPrecision(18),maxy:n.top.toPrecision(18)}),t.appendChild(r),e.tileSize&&!e.singleTile&&(n=this.createElementNS(this.namespaces.ol,"ol:tileSize"),this.setAttributes(n,e.tileSize),t.appendChild(n));for(var n="transparent numZoomLevels units isBaseLayer opacity displayInLayerSwitcher singleTile".split(" "),i=0,s=n.length;i<s;++i)(r=this.createOLPropertyNode(e,n[i]))&&t.appendChild(r);return t},createOLPropertyNode:function(e,t){var n=null;return null!=e[t]&&(n=this.createElementNS(this.namespaces.ol,"ol:"+t),n.appendChild(this.createTextNode(e[t].toString()))),n},write_wmc_Server:function(e){var e=e.server,t=this.createElementDefaultNS("Server"),n={service:"OGC:WMS",version:e.version};return e.title&&(n.title=e.title),this.setAttributes(t,n),t.appendChild(this.write_wmc_OnlineResource(e.url)),t},write_wmc_URLType:function(e,t,n){e=this.createElementDefaultNS(e),e.appendChild(this.write_wmc_OnlineResource(t));if(n)for(var t=["width","height","format"],r=0;r<t.length;r++)t[r]in n&&e.setAttribute(t[r],n[t[r]]);return e},write_wmc_DimensionList:function(e){var t=this.createElementDefaultNS("DimensionList"),n;for(n in e.dimensions){var r={},i=e.dimensions[n],s;for(s in i)r[s]="boolean"==typeof i[s]?Number(i[s]):i[s];i="",r.values&&(i=r.values.join(","),delete r.values),t.appendChild(this.createElementDefaultNS("Dimension",i,r))}return t},write_wmc_FormatList:function(e){for(var t=this.createElementDefaultNS("FormatList"),n=0,r=e.formats.length;n<r;n++){var i=e.formats[n];t.appendChild(this.createElementDefaultNS("Format",i.value,i.current&&1==i.current?{current:"1"}:null))}return t},write_wmc_StyleList:function(e){var t=this.createElementDefaultNS("StyleList");if((e=e.styles)&&OpenLayers.Util.isArray(e))for(var n,r=0,i=e.length;r<i;r++){var s=e[r],o=this.createElementDefaultNS("Style",null,s.current&&1==s.current?{current:"1"}:null);s.href?(n=this.createElementDefaultNS("SLD"),s.name&&n.appendChild(this.createElementDefaultNS("Name",s.name)),s.title&&n.appendChild(this.createElementDefaultNS("Title",s.title)),s.legend&&n.appendChild(this.write_wmc_URLType("LegendURL",s.legend.href,s.legend)),s=this.write_wmc_OnlineResource(s.href),n.appendChild(s),o.appendChild(n)):s.body?(n=this.createElementDefaultNS("SLD"),s.name&&n.appendChild(this.createElementDefaultNS("Name",s.name)),s.title&&n.appendChild(this.createElementDefaultNS("Title",s.title)),s.legend&&n.appendChild(this.write_wmc_URLType("LegendURL",s.legend.href,s.legend)),s=OpenLayers.Format.XML.prototype.read.apply(this,[s.body]).documentElement,n.ownerDocument&&n.ownerDocument.importNode&&(s=n.ownerDocument.importNode(s,!0)),n.appendChild(s),o.appendChild(n)):(o.appendChild(this.createElementDefaultNS("Name",s.name)),o.appendChild(this.createElementDefaultNS("Title",s.title)),s["abstract"]&&o.appendChild(this.createElementDefaultNS("Abstract",s["abstract"])),s.legend&&o.appendChild(this.write_wmc_URLType("LegendURL",s.legend.href,s.legend))),t.appendChild(o)}return t},write_wmc_OnlineResource:function(e){var t=this.createElementDefaultNS("OnlineResource");return this.setAttributeNS(t,this.namespaces.xlink,"xlink:type","simple"),this.setAttributeNS(t,this.namespaces.xlink,"xlink:href",e),t},getOnlineResource_href:function(e){var t={},e=e.getElementsByTagName("OnlineResource");return 0<e.length&&this.read_wmc_OnlineResource(t,e[0]),t.href},CLASS_NAME:"OpenLayers.Format.WMC.v1"}),OpenLayers.Control.PanPanel=OpenLayers.Class(OpenLayers.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),e={slideFactor:this.slideFactor,slideRatio:this.slideRatio},this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST,e)])},CLASS_NAME:"OpenLayers.Control.PanPanel"}),OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this}),this.updateAttribution(),this.div},updateAttribution:function(){var e=[];if(this.map&&this.map.layers){for(var t=0,n=this.map.layers.length;t<n;t++){var r=this.map.layers[t];r.attribution&&r.getVisibility()&&-1===OpenLayers.Util.indexOf(e,r.attribution)&&e.push(r.attribution)}this.div.innerHTML=OpenLayers.String.format(this.template,{layers:e.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"}),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,n=(new Date).getTime(),r=0,i=this.points.length,s;r<i;r++){s=this.points[r];if(n-s.tick>this.delay)break;t=s}if(t&&(r=(new Date).getTime()-t.tick,n=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)),r=n/r,!(0==r||r<this.threshold)))return n=Math.asin((e.y-t.xy.y)/n),t.xy.x<=e.x&&(n=Math.PI-n),{speed:r,theta:n}},move:function(e,t){var n=e.speed,r=Math.cos(e.theta),i=-Math.sin(e.theta),s=(new Date).getTime(),o=0,u=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(null!=this.timerId){var e=(new Date).getTime()-s,a=-this.deceleration*Math.pow(e,2)/2+n*e,l=a*r,a=a*i,p,v;p=!1,0>=-this.deceleration*e+n&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,p=!0),e=l-o,v=a-u,o=l,u=a,t(e,v,p)}},this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Layer.GeoRSS=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,icon:null,popupSize:null,useFeedTitle:!0,initialize:function(e,t,n){OpenLayers.Layer.Markers.prototype.initialize.apply(this,[e,n]),this.location=t,this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadRSS:function(){this.loaded||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,scope:this}),this.loaded=!0)},moveTo:function(e,t,n){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadRSS()},parseData:function(e){var t=e.responseXML;if(!t||!t.documentElement)t=OpenLayers.Format.XML.prototype.read(e.responseText);if(this.useFeedTitle){e=null;try{e=t.getElementsByTagNameNS("*","title")[0].firstChild.nodeValue}catch(n){e=t.getElementsByTagName("title")[0].firstChild.nodeValue}e&&this.setName(e)}e={},OpenLayers.Util.extend(e,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(e.externalProjection=this.projection,e.internalProjection=this.map.getProjectionObject());for(var t=(new OpenLayers.Format.GeoRSS(e)).read(t),e=0,r=t.length;e<r;e++){var i={},s=t[e];if(s.geometry){var o=s.attributes.title?s.attributes.title:"Untitled",u=s.attributes.description?s.attributes.description:"No description.",a=s.attributes.link?s.attributes.link:"",s=s.geometry.getBounds().getCenterLonLat();i.icon=null==this.icon?OpenLayers.Marker.defaultIcon():this.icon.clone(),i.popupSize=this.popupSize?this.popupSize.clone():new OpenLayers.Size(250,120);if(o||u){i.title=o,i.description=u;var f='<div class="olLayerGeoRSSClose">[x]</div>',f=f+'<div class="olLayerGeoRSSTitle">';a&&(f+='<a class="link" href="'+a+'" target="_blank">'),f+=o,a&&(f+="</a>"),f+="</div>",f+='<div style="" class="olLayerGeoRSSDescription">',f+=u,f+="</div>",i.popupContentHTML=f}s=new OpenLayers.Feature(this,s,i),this.features.push(s),i=s.createMarker(),i.events.register("click",s,this.markerClick),this.addMarker(i)}}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var n=0,r=this.layer.map.popups.length;n<r;n++)this.layer.map.removePopup(this.layer.map.popups[n]);t||(t=this.createPopup(),OpenLayers.Event.observe(t.div,"click",OpenLayers.Function.bind(function(){for(var e=0,t=this.layer.map.popups.length;e<t;e++)this.layer.map.removePopup(this.layer.map.popups[e])},this)),this.layer.map.addPopup(t)),OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.GeoRSS"}),OpenLayers.Symbolizer.Point=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Point"}),OpenLayers.Symbolizer.Line=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Line"}),OpenLayers.Symbolizer.Text=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Text"}),OpenLayers.Format.SLD.v1=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,{namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"sld",schemaLocation:null,multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,strokeDashstyle:"solid",pointRadius:3,graphicName:"square"},read:function(e,t){var t=OpenLayers.Util.applyDefaults(t,this.options),n={namedLayers:!0===t.namedLayersAsArray?[]:{}};return this.readChildNodes(e,n),n},readers:OpenLayers.Util.applyDefaults({sld:{StyledLayerDescriptor:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.description=this.getChildValue(e)},NamedLayer:function(e,t){var n={userStyles:[],namedStyles:[]};this.readChildNodes(e,n);for(var r=0,i=n.userStyles.length;r<i;++r)n.userStyles[r].layerName=n.name;OpenLayers.Util.isArray(t.namedLayers)?t.namedLayers.push(n):t.namedLayers[n.name]=n},NamedStyle:function(e,t){t.namedStyles.push(this.getChildName(e.firstChild))},UserStyle:function(e,t){var n={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1,this.readChildNodes(e,n),this.multipleSymbolizers?(delete n.defaultsPerSymbolizer,n=new OpenLayers.Style2(n)):n=new OpenLayers.Style(this.defaultSymbolizer,n),t.userStyles.push(n)},IsDefault:function(e,t){"1"==this.getChildValue(e)&&(t.isDefault=!0)},FeatureTypeStyle:function(e,t){++this.featureTypeCounter;var n={rules:this.multipleSymbolizers?t.rules:[]};this.readChildNodes(e,n),this.multipleSymbolizers||(t.rules=n.rules)},Rule:function(e,t){var n;this.multipleSymbolizers&&(n={symbolizers:[]}),n=new OpenLayers.Rule(n),this.readChildNodes(e,n),t.rules.push(n)},ElseFilter:function(e,t){t.elseFilter=!0},MinScaleDenominator:function(e,t){t.minScaleDenominator=parseFloat(this.getChildValue(e))},MaxScaleDenominator:function(e,t){t.maxScaleDenominator=parseFloat(this.getChildValue(e))},TextSymbolizer:function(e,t){var n={};this.readChildNodes(e,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Text(n))):t.symbolizer.Text=OpenLayers.Util.applyDefaults(n,t.symbolizer.Text)},LabelPlacement:function(e,t){this.readChildNodes(e,t)},PointPlacement:function(e,t){var n={};this.readChildNodes(e,n),n.labelRotation=n.rotation,delete n.rotation;var r,i=t.labelAnchorPointX,s=t.labelAnchorPointY;i<=1/3?r="l":i>1/3&&i<2/3?r="c":i>=2/3&&(r="r"),s<=1/3?r+="b":s>1/3&&s<2/3?r+="m":s>=2/3&&(r+="t"),n.labelAlign=r,OpenLayers.Util.applyDefaults(t,n)},AnchorPoint:function(e,t){this.readChildNodes(e,t)},AnchorPointX:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.labelAnchorPointX=n)},AnchorPointY:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.labelAnchorPointY=n)},Displacement:function(e,t){this.readChildNodes(e,t)},DisplacementX:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.labelXOffset=n)},DisplacementY:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.labelYOffset=n)},LinePlacement:function(e,t){this.readChildNodes(e,t)},PerpendicularOffset:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.labelPerpendicularOffset=n)},Label:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.label=n)},Font:function(e,t){this.readChildNodes(e,t)},Halo:function(e,t){var n={};this.readChildNodes(e,n),t.haloRadius=n.haloRadius,t.haloColor=n.fillColor,t.haloOpacity=n.fillOpacity},Radius:function(e,t){var n=this.readers.ogc._expression.call(this,e);null!=n&&(t.haloRadius=n)},RasterSymbolizer:function(e,t){var n={};this.readChildNodes(e,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Raster(n))):t.symbolizer.Raster=OpenLayers.Util.applyDefaults(n,t.symbolizer.Raster)},Geometry:function(e,t){t.geometry={},this.readChildNodes(e,t.geometry)},ColorMap:function(e,t){t.colorMap=[],this.readChildNodes(e,t.colorMap)},ColorMapEntry:function(e,t){var n=e.getAttribute("quantity"),r=e.getAttribute("opacity");t.push({color:e.getAttribute("color"),quantity:null!==n?parseFloat(n):void 0,label:e.getAttribute("label")||void 0,opacity:null!==r?parseFloat(r):void 0})},LineSymbolizer:function(e,t){var n={};this.readChildNodes(e,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Line(n))):t.symbolizer.Line=OpenLayers.Util.applyDefaults(n,t.symbolizer.Line)},PolygonSymbolizer:function(e,t){var n={fill:!1,stroke:!1};this.multipleSymbolizers||(n=t.symbolizer.Polygon||n),this.readChildNodes(e,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(n))):t.symbolizer.Polygon=n},PointSymbolizer:function(e,t){var n={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(n=t.symbolizer.Point||n),this.readChildNodes(e,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Point(n))):t.symbolizer.Point=n},Stroke:function(e,t){t.stroke=!0,this.readChildNodes(e,t)},Fill:function(e,t){t.fill=!0,this.readChildNodes(e,t)},CssParameter:function(e,t){var n=e.getAttribute("name"),r=this.cssMap[n];t.label&&("fill"===n?r="fontColor":"fill-opacity"===n&&(r="fontOpacity")),r&&(n=this.readers.ogc._expression.call(this,e))&&(t[r]=n)},Graphic:function(e,t){t.graphic=!0;var n={};this.readChildNodes(e,n);for(var r="stroke strokeColor strokeWidth strokeOpacity strokeLinecap fill fillColor fillOpacity graphicName rotation graphicFormat".split(" "),i,s,o=0,u=r.length;o<u;++o)i=r[o],s=n[i],void 0!=s&&(t[i]=s);void 0!=n.opacity&&(t.graphicOpacity=n.opacity),void 0!=n.size&&(isNaN(n.size/2)?t.graphicWidth=n.size:t.pointRadius=n.size/2),void 0!=n.href&&(t.externalGraphic=n.href),void 0!=n.rotation&&(t.rotation=n.rotation)},ExternalGraphic:function(e,t){this.readChildNodes(e,t)},Mark:function(e,t){this.readChildNodes(e,t)},WellKnownName:function(e,t){t.graphicName=this.getChildValue(e)},Opacity:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.opacity=n)},Size:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.size=n)},Rotation:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.rotation=n)},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},Format:function(e,t){t.graphicFormat=this.getChildValue(e)}}},OpenLayers.Format.Filter.v1_0_0.prototype.readers),cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(e){var t=null,n;for(n in this.cssMap)if(this.cssMap[n]==e){t=n;break}return t},getGraphicFormat:function(e){var t,n;for(n in this.graphicFormats)if(this.graphicFormats[n].test(e)){t=n;break}return t||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},write:function(e){return this.writers.sld.StyledLayerDescriptor.apply(this,[e])},writers:OpenLayers.Util.applyDefaults({sld:{_OGCExpression:function(e,t){var n=this.createElementNSPlus(e),r="string"==typeof t?t.split("${"):[t];n.appendChild(this.createTextNode(r[0]));for(var i,s,o=1,u=r.length;o<u;o++)i=r[o],s=i.indexOf("}"),0<s?(this.writeNode("ogc:PropertyName",{property:i.substring(0,s)},n),n.appendChild(this.createTextNode(i.substring(++s)))):n.appendChild(this.createTextNode("${"+i));return n},StyledLayerDescriptor:function(e){var t=this.createElementNSPlus("sld:StyledLayerDescriptor",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});t.setAttribute("xmlns:ogc",this.namespaces.ogc),t.setAttribute("xmlns:gml",this.namespaces.gml),e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t);if(OpenLayers.Util.isArray(e.namedLayers))for(var n=0,r=e.namedLayers.length;n<r;++n)this.writeNode("NamedLayer",e.namedLayers[n],t);else for(n in e.namedLayers)this.writeNode("NamedLayer",e.namedLayers[n],t);return t},Name:function(e){return this.createElementNSPlus("sld:Name",{value:e})},Title:function(e){return this.createElementNSPlus("sld:Title",{value:e})},Abstract:function(e){return this.createElementNSPlus("sld:Abstract",{value:e})},NamedLayer:function(e){var t=this.createElementNSPlus("sld:NamedLayer");this.writeNode("Name",e.name,t);if(e.namedStyles)for(var n=0,r=e.namedStyles.length;n<r;++n)this.writeNode("NamedStyle",e.namedStyles[n],t);if(e.userStyles){n=0;for(r=e.userStyles.length;n<r;++n)this.writeNode("UserStyle",e.userStyles[n],t)}return t},NamedStyle:function(e){var t=this.createElementNSPlus("sld:NamedStyle");return this.writeNode("Name",e,t),t},UserStyle:function(e){var t=this.createElementNSPlus("sld:UserStyle");e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),e.isDefault&&this.writeNode("IsDefault",e.isDefault,t);if(this.multipleSymbolizers&&e.rules){for(var n={0:[]},r=[0],i,s,o,u,a,f=0,l=e.rules.length;f<l;++f)if(i=e.rules[f],i.symbolizers){s={};for(var c=0,h=i.symbolizers.length;c<h;++c)o=i.symbolizers[c],u=o.zIndex,u in s||(a=i.clone(),a.symbolizers=[],s[u]=a),s[u].symbolizers.push(o.clone());for(u in s)u in n||(r.push(u),n[u]=[]),n[u].push(s[u])}else n[0].push(i.clone());r.sort(),f=0;for(l=r.length;f<l;++f)i=n[r[f]],0<i.length&&(a=e.clone(),a.rules=n[r[f]],this.writeNode("FeatureTypeStyle",a,t))}else this.writeNode("FeatureTypeStyle",e,t);return t},IsDefault:function(e){return this.createElementNSPlus("sld:IsDefault",{value:e?"1":"0"})},FeatureTypeStyle:function(e){for(var t=this.createElementNSPlus("sld:FeatureTypeStyle"),n=0,r=e.rules.length;n<r;++n)this.writeNode("Rule",e.rules[n],t);return t},Rule:function(e){var t=this.createElementNSPlus("sld:Rule");e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),e.elseFilter?this.writeNode("ElseFilter",null,t):e.filter&&this.writeNode("ogc:Filter",e.filter,t),void 0!=e.minScaleDenominator&&this.writeNode("MinScaleDenominator",e.minScaleDenominator,t),void 0!=e.maxScaleDenominator&&this.writeNode("MaxScaleDenominator",e.maxScaleDenominator,t);var n,r;if(this.multipleSymbolizers&&e.symbolizers)for(var i=0,s=e.symbolizers.length;i<s;++i)r=e.symbolizers[i],n=r.CLASS_NAME.split(".").pop(),this.writeNode(n+"Symbolizer",r,t);else for(var s=OpenLayers.Style.SYMBOLIZER_PREFIXES,i=0,o=s.length;i<o;++i)n=s[i],(r=e.symbolizer[n])&&this.writeNode(n+"Symbolizer",r,t);return t},ElseFilter:function(){return this.createElementNSPlus("sld:ElseFilter")},MinScaleDenominator:function(e){return this.createElementNSPlus("sld:MinScaleDenominator"
,{value:e})},MaxScaleDenominator:function(e){return this.createElementNSPlus("sld:MaxScaleDenominator",{value:e})},LineSymbolizer:function(e){var t=this.createElementNSPlus("sld:LineSymbolizer");return this.writeNode("Stroke",e,t),t},Stroke:function(e){var t=this.createElementNSPlus("sld:Stroke");return void 0!=e.strokeColor&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeColor"},t),void 0!=e.strokeOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeOpacity"},t),void 0!=e.strokeWidth&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeWidth"},t),void 0!=e.strokeDashstyle&&"solid"!==e.strokeDashstyle&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeDashstyle"},t),void 0!=e.strokeLinecap&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeLinecap"},t),t},CssParameter:function(e){return this.createElementNSPlus("sld:CssParameter",{attributes:{name:this.getCssProperty(e.key)},value:e.symbolizer[e.key]})},TextSymbolizer:function(e){var t=this.createElementNSPlus("sld:TextSymbolizer");return null!=e.label&&this.writeNode("Label",e.label,t),(null!=e.fontFamily||null!=e.fontSize||null!=e.fontWeight||null!=e.fontStyle)&&this.writeNode("Font",e,t),(null!=e.labelAnchorPointX||null!=e.labelAnchorPointY||null!=e.labelAlign||null!=e.labelXOffset||null!=e.labelYOffset||null!=e.labelRotation||null!=e.labelPerpendicularOffset)&&this.writeNode("LabelPlacement",e,t),(null!=e.haloRadius||null!=e.haloColor||null!=e.haloOpacity)&&this.writeNode("Halo",e,t),(null!=e.fontColor||null!=e.fontOpacity)&&this.writeNode("Fill",{fillColor:e.fontColor,fillOpacity:e.fontOpacity},t),t},LabelPlacement:function(e){var t=this.createElementNSPlus("sld:LabelPlacement");return(null!=e.labelAnchorPointX||null!=e.labelAnchorPointY||null!=e.labelAlign||null!=e.labelXOffset||null!=e.labelYOffset||null!=e.labelRotation)&&null==e.labelPerpendicularOffset&&this.writeNode("PointPlacement",e,t),null!=e.labelPerpendicularOffset&&this.writeNode("LinePlacement",e,t),t},LinePlacement:function(e){var t=this.createElementNSPlus("sld:LinePlacement");return this.writeNode("PerpendicularOffset",e.labelPerpendicularOffset,t),t},PerpendicularOffset:function(e){return this.createElementNSPlus("sld:PerpendicularOffset",{value:e})},PointPlacement:function(e){var t=this.createElementNSPlus("sld:PointPlacement");return(null!=e.labelAnchorPointX||null!=e.labelAnchorPointY||null!=e.labelAlign)&&this.writeNode("AnchorPoint",e,t),(null!=e.labelXOffset||null!=e.labelYOffset)&&this.writeNode("Displacement",e,t),null!=e.labelRotation&&this.writeNode("Rotation",e.labelRotation,t),t},AnchorPoint:function(e){var t=this.createElementNSPlus("sld:AnchorPoint"),n=e.labelAnchorPointX,r=e.labelAnchorPointY;null!=n&&this.writeNode("AnchorPointX",n,t),null!=r&&this.writeNode("AnchorPointY",r,t);if(null==n&&null==r){var i=e.labelAlign.substr(0,1),e=e.labelAlign.substr(1,1);"l"===i?n=0:"c"===i?n=.5:"r"===i&&(n=1),"b"===e?r=0:"m"===e?r=.5:"t"===e&&(r=1),this.writeNode("AnchorPointX",n,t),this.writeNode("AnchorPointY",r,t)}return t},AnchorPointX:function(e){return this.createElementNSPlus("sld:AnchorPointX",{value:e})},AnchorPointY:function(e){return this.createElementNSPlus("sld:AnchorPointY",{value:e})},Displacement:function(e){var t=this.createElementNSPlus("sld:Displacement");return null!=e.labelXOffset&&this.writeNode("DisplacementX",e.labelXOffset,t),null!=e.labelYOffset&&this.writeNode("DisplacementY",e.labelYOffset,t),t},DisplacementX:function(e){return this.createElementNSPlus("sld:DisplacementX",{value:e})},DisplacementY:function(e){return this.createElementNSPlus("sld:DisplacementY",{value:e})},Font:function(e){var t=this.createElementNSPlus("sld:Font");return e.fontFamily&&this.writeNode("CssParameter",{symbolizer:e,key:"fontFamily"},t),e.fontSize&&this.writeNode("CssParameter",{symbolizer:e,key:"fontSize"},t),e.fontWeight&&this.writeNode("CssParameter",{symbolizer:e,key:"fontWeight"},t),e.fontStyle&&this.writeNode("CssParameter",{symbolizer:e,key:"fontStyle"},t),t},Label:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Label",e)},Halo:function(e){var t=this.createElementNSPlus("sld:Halo");return e.haloRadius&&this.writeNode("Radius",e.haloRadius,t),(e.haloColor||e.haloOpacity)&&this.writeNode("Fill",{fillColor:e.haloColor,fillOpacity:e.haloOpacity},t),t},Radius:function(e){return this.createElementNSPlus("sld:Radius",{value:e})},RasterSymbolizer:function(e){var t=this.createElementNSPlus("sld:RasterSymbolizer");return e.geometry&&this.writeNode("Geometry",e.geometry,t),e.opacity&&this.writeNode("Opacity",e.opacity,t),e.colorMap&&this.writeNode("ColorMap",e.colorMap,t),t},Geometry:function(e){var t=this.createElementNSPlus("sld:Geometry");return e.property&&this.writeNode("ogc:PropertyName",e,t),t},ColorMap:function(e){for(var t=this.createElementNSPlus("sld:ColorMap"),n=0,r=e.length;n<r;++n)this.writeNode("ColorMapEntry",e[n],t);return t},ColorMapEntry:function(e){var t=this.createElementNSPlus("sld:ColorMapEntry");return t.setAttribute("color",e.color),void 0!==e.opacity&&t.setAttribute("opacity",parseFloat(e.opacity)),void 0!==e.quantity&&t.setAttribute("quantity",parseFloat(e.quantity)),void 0!==e.label&&t.setAttribute("label",e.label),t},PolygonSymbolizer:function(e){var t=this.createElementNSPlus("sld:PolygonSymbolizer");return!1!==e.fill&&this.writeNode("Fill",e,t),!1!==e.stroke&&this.writeNode("Stroke",e,t),t},Fill:function(e){var t=this.createElementNSPlus("sld:Fill");return e.fillColor&&this.writeNode("CssParameter",{symbolizer:e,key:"fillColor"},t),null!=e.fillOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"fillOpacity"},t),t},PointSymbolizer:function(e){var t=this.createElementNSPlus("sld:PointSymbolizer");return this.writeNode("Graphic",e,t),t},Graphic:function(e){var t=this.createElementNSPlus("sld:Graphic");return void 0!=e.externalGraphic?this.writeNode("ExternalGraphic",e,t):this.writeNode("Mark",e,t),void 0!=e.graphicOpacity&&this.writeNode("Opacity",e.graphicOpacity,t),void 0!=e.pointRadius?this.writeNode("Size",2*e.pointRadius,t):void 0!=e.graphicWidth&&this.writeNode("Size",e.graphicWidth,t),void 0!=e.rotation&&this.writeNode("Rotation",e.rotation,t),t},ExternalGraphic:function(e){var t=this.createElementNSPlus("sld:ExternalGraphic");return this.writeNode("OnlineResource",e.externalGraphic,t),this.writeNode("Format",e.graphicFormat||this.getGraphicFormat(e.externalGraphic),t),t},Mark:function(e){var t=this.createElementNSPlus("sld:Mark");return e.graphicName&&this.writeNode("WellKnownName",e.graphicName,t),!1!==e.fill&&this.writeNode("Fill",e,t),!1!==e.stroke&&this.writeNode("Stroke",e,t),t},WellKnownName:function(e){return this.createElementNSPlus("sld:WellKnownName",{value:e})},Opacity:function(e){return this.createElementNSPlus("sld:Opacity",{value:e})},Size:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Size",e)},Rotation:function(e){return this.createElementNSPlus("sld:Rotation",{value:e})},OnlineResource:function(e){return this.createElementNSPlus("sld:OnlineResource",{attributes:{"xlink:type":"simple","xlink:href":e}})},Format:function(e){return this.createElementNSPlus("sld:Format",{value:e})}}},OpenLayers.Format.Filter.v1_0_0.prototype.writers),CLASS_NAME:"OpenLayers.Format.SLD.v1"}),OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(e,t,n,r){var i=[],n=OpenLayers.Util.upperCaseObject(n);1.3<=parseFloat(n.VERSION)&&!n.EXCEPTIONS&&(n.EXCEPTIONS="INIMAGE"),i.push(e,t,n,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,i),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));if(!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()){if(null==r||!r.isBaseLayer)this.isBaseLayer=!1;"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png")}},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},reverseAxisOrder:function(){var e=this.projection.getCode();return 1.3<=parseFloat(this.params.VERSION)&&(!!this.yx[e]||!!OpenLayers.Projection.defaults[e].yx)},getURL:function(e){var e=this.adjustBounds(e),t=this.getImageSize(),n={},r=this.reverseAxisOrder();return n.BBOX=this.encodeBBOX?e.toBBOX(null,r):e.toArray(r),n.WIDTH=t.w,n.HEIGHT=t.h,this.getFullRequestString(n)},mergeNewParams:function(e){return e=[OpenLayers.Util.upperCaseObject(e)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,e)},getFullRequestString:function(e,t){var n=this.map.getProjectionObject(),n=this.projection&&this.projection.equals(n)?this.projection.getCode():n.getCode(),n="none"==n?null:n;return 1.3<=parseFloat(this.params.VERSION)?this.params.CRS=n:this.params.SRS=n,"boolean"==typeof this.params.TRANSPARENT&&(e.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"),OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"}),OpenLayers.Format.WMC.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_sld_MinScaleDenominator:function(e,t){var n=parseFloat(this.getChildValue(t));0<n&&(e.maxScale=n)},read_sld_MaxScaleDenominator:function(e,t){e.minScale=parseFloat(this.getChildValue(t))},read_wmc_SRS:function(e,t){"srs"in e||(e.srs={}),e.srs[this.getChildValue(t)]=!0},write_wmc_Layer:function(e){var t=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.maxScale){var n=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator");n.appendChild(this.createTextNode(e.maxScale.toPrecision(16))),t.appendChild(n)}e.minScale&&(n=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator"),n.appendChild(this.createTextNode(e.minScale.toPrecision(16))),t.appendChild(n));if(e.srs)for(var r in e.srs)t.appendChild(this.createElementDefaultNS("SRS",r));return t.appendChild(this.write_wmc_FormatList(e)),t.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&t.appendChild(this.write_wmc_DimensionList(e)),t.appendChild(this.write_wmc_LayerExtension(e)),t},CLASS_NAME:"OpenLayers.Format.WMC.v1_1_0"}),OpenLayers.Format.XLS=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",stringifyOutput:!0,CLASS_NAME:"OpenLayers.Format.XLS"}),OpenLayers.Format.XLS.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xls:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},xy:!0,defaultPrefix:"xls",schemaLocation:null,read:function(e,t){OpenLayers.Util.applyDefaults(t,this.options);var n={};return this.readChildNodes(e,n),n},readers:{xls:{XLS:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Response:function(e,t){this.readChildNodes(e,t)},GeocodeResponse:function(e,t){t.responseLists=[],this.readChildNodes(e,t)},GeocodeResponseList:function(e,t){var n={features:[],numberOfGeocodedAddresses:parseInt(e.getAttribute("numberOfGeocodedAddresses"))};t.responseLists.push(n),this.readChildNodes(e,n)},GeocodedAddress:function(e,t){var n=new OpenLayers.Feature.Vector;t.features.push(n),this.readChildNodes(e,n),n.geometry=n.components[0]},GeocodeMatchCode:function(e,t){t.attributes.matchCode={accuracy:parseFloat(e.getAttribute("accuracy")),matchType:e.getAttribute("matchType")}},Address:function(e,t){var n={countryCode:e.getAttribute("countryCode"),addressee:e.getAttribute("addressee"),street:[],place:[]};t.attributes.address=n,this.readChildNodes(e,n)},freeFormAddress:function(e,t){t.freeFormAddress=this.getChildValue(e)},StreetAddress:function(e,t){this.readChildNodes(e,t)},Building:function(e,t){t.building={number:e.getAttribute("number"),subdivision:e.getAttribute("subdivision"),buildingName:e.getAttribute("buildingName")}},Street:function(e,t){t.street.push(this.getChildValue(e))},Place:function(e,t){t.place[e.getAttribute("type")]=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)}},gml:OpenLayers.Format.GML.v3.prototype.readers.gml},write:function(e){return this.writers.xls.XLS.apply(this,[e])},writers:{xls:{XLS:function(e){var t=this.createElementNSPlus("xls:XLS",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});return this.writeNode("RequestHeader",e.header,t),this.writeNode("Request",e,t),t},RequestHeader:function(){return this.createElementNSPlus("xls:RequestHeader")},Request:function(e){var t=this.createElementNSPlus("xls:Request",{attributes:{methodName:"GeocodeRequest",requestID:e.requestID||"",version:this.VERSION}});return this.writeNode("GeocodeRequest",e.addresses,t),t},GeocodeRequest:function(e){for(var t=this.createElementNSPlus("xls:GeocodeRequest"),n=0,r=e.length;n<r;n++)this.writeNode("Address",e[n],t);return t},Address:function(e){var t=this.createElementNSPlus("xls:Address",{attributes:{countryCode:e.countryCode}});return e.freeFormAddress?this.writeNode("freeFormAddress",e.freeFormAddress,t):(e.street&&this.writeNode("StreetAddress",e,t),e.municipality&&this.writeNode("Municipality",e.municipality,t),e.countrySubdivision&&this.writeNode("CountrySubdivision",e.countrySubdivision,t),e.postalCode&&this.writeNode("PostalCode",e.postalCode,t)),t},freeFormAddress:function(e){return this.createElementNSPlus("freeFormAddress",{value:e})},StreetAddress:function(e){var t=this.createElementNSPlus("xls:StreetAddress");e.building&&this.writeNode(t,"Building",e.building),e=e.street,OpenLayers.Util.isArray(e)||(e=[e]);for(var n=0,r=e.length;n<r;n++)this.writeNode("Street",e[n],t);return t},Building:function(e){return this.createElementNSPlus("xls:Building",{attributes:{number:e.number,subdivision:e.subdivision,buildingName:e.buildingName}})},Street:function(e){return this.createElementNSPlus("xls:Street",{value:e})},Municipality:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"Municipality"},value:e})},CountrySubdivision:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"CountrySubdivision"},value:e})},PostalCode:function(e){return this.createElementNSPlus("xls:PostalCode",{value:e})}}},CLASS_NAME:"OpenLayers.Format.XLS.v1"}),OpenLayers.Format.XLS.v1_1_0=OpenLayers.Class(OpenLayers.Format.XLS.v1,{VERSION:"1.1",schemaLocation:"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",CLASS_NAME:"OpenLayers.Format.XLS.v1_1_0"}),OpenLayers.Format.XLS.v1_1=OpenLayers.Format.XLS.v1_1_0,OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(e){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(e,t,n){return e+=n?0:this.translationParameters.x,t+=n?0:this.translationParameters.y,e>=-this.MAX_PIXEL&&e<=this.MAX_PIXEL&&t>=-this.MAX_PIXEL&&t<=this.MAX_PIXEL},setExtent:function(e,t){var n=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),r=this.getResolution(),i=-e.left/r,r=e.top/r;return t?(this.left=i,this.top=r,this.rendererRoot.setAttributeNS(null,"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0):((i=this.translate(i-this.left+this.xOffset,r-this.top))||this.setExtent(e,!0),n&&i)},translate:function(e,t){if(this.inValidRange(e,t,!0)){var n="";if(e||t)n="translate("+e+","+t+")";return this.root.setAttributeNS(null,"transform",n),this.translationParameters={x:e,y:t},!0}return!1},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(e,t){var n=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":n=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":n="rect";break;case"OpenLayers.Geometry.LineString":n="polyline";break;case"OpenLayers.Geometry.LinearRing":n="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":n="path"}return n},setStyle:function(e,t,n){var t=t||e._style,n=n||e._options,r=parseFloat(e.getAttributeNS(null,"r")),i=1,s;if("OpenLayers.Geometry.Point"==e._geometryClass&&r){e.style.visibility="";if(!1===t.graphic)e.style.visibility="hidden";else if(t.externalGraphic){s=this.getPosition(e),t.graphicTitle&&(e.setAttributeNS(null,"title",t.graphicTitle),r=e.getElementsByTagName("title"),0<r.length?r[0].firstChild.textContent=t.graphicTitle:(r=this.nodeFactory(null,"title"),r.textContent=t.graphicTitle,e.appendChild(r))),t.graphicWidth&&t.graphicHeight&&e.setAttributeNS(null,"preserveAspectRatio","none");var r=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth,r=r?r:2*t.pointRadius,o=o?o:2*t.pointRadius,u=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*o),a=t.graphicOpacity||t.fillOpacity;e.setAttributeNS(null,"x",(s.x+(void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*r))).toFixed()),e.setAttributeNS(null,"y",(s.y+u).toFixed()),e.setAttributeNS(null,"width",r),e.setAttributeNS(null,"height",o),e.setAttributeNS(this.xlinkns,"href",t.externalGraphic),e.setAttributeNS(null,"style","opacity: "+a),e.onclick=OpenLayers.Renderer.SVG.preventDefault}else if(this.isComplexSymbol(t.graphicName)){var r=3*t.pointRadius,o=2*r,f=this.importSymbol(t.graphicName);s=this.getPosition(e),i=3*this.symbolMetrics[f.id][0]/o,u=e.parentNode,a=e.nextSibling,u&&u.removeChild(e),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(f.firstChild.cloneNode(!0)),e.setAttributeNS(null,"viewBox",f.getAttributeNS(null,"viewBox")),e.setAttributeNS(null,"width",o),e.setAttributeNS(null,"height",o),e.setAttributeNS(null,"x",s.x-r),e.setAttributeNS(null,"y",s.y-r),a?u.insertBefore(e,a):u&&u.appendChild(e)}else e.setAttributeNS(null,"r",t.pointRadius);r=t.rotation,(void 0!==r||void 0!==e._rotation)&&s&&(e._rotation=r,r|=0,"svg"!==e.nodeName?e.setAttributeNS(null,"transform","rotate("+r+" "+s.x+" "+s.y+")"):(s=this.symbolMetrics[f.id],e.firstChild.setAttributeNS(null,"transform","rotate("+r+" "+s[1]+" "+s[2]+")")))}return n.isFilled?(e.setAttributeNS(null,"fill",t.fillColor),e.setAttributeNS(null,"fill-opacity",t.fillOpacity)):e.setAttributeNS(null,"fill","none"),n.isStroked?(e.setAttributeNS(null,"stroke",t.strokeColor),e.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),e.setAttributeNS(null,"stroke-width",t.strokeWidth*i),e.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),e.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&e.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,i))):e.setAttributeNS(null,"stroke","none"),t.pointerEvents&&e.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&e.setAttributeNS(null,"cursor",t.cursor),e},dashStyle:function(e,t){var n=e.strokeWidth*t,r=e.strokeDashstyle;switch(r){case"solid":return"none";case"dot":return[1,4*n].join();case"dash":return[4*n,4*n].join();case"dashdot":return[4*n,4*n,1,4*n].join();case"longdash":return[8*n,4*n].join();case"longdashdot":return[8*n,4*n,1,4*n].join();default:return OpenLayers.String.trim(r).replace(/\s+/g,",")}},createNode:function(e,t){var n=document.createElementNS(this.xmlns,e);return t&&n.setAttributeNS(null,"id",t),n},nodeTypeCompare:function(e,t){return t==e.nodeName},createRenderRoot:function(){return this.nodeFactory(this.container.id+"_svgRoot","svg")},createRoot:function(e){return this.nodeFactory(this.container.id+e,"g")},createDefs:function(){var e=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(e),e},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,n){var r=this.getResolution(),i=(t.x-this.featureDx)/r+this.left,t=this.top-t.y/r;return this.inValidRange(i,t)?(e.setAttributeNS(null,"cx",i),e.setAttributeNS(null,"cy",t),e.setAttributeNS(null,"r",n),e):!1},drawLineString:function(e,t){var n=this.getComponentsString(t.components);return n.path?(e.setAttributeNS(null,"points",n.path),n.complete?e:null):!1},drawLinearRing:function(e,t){var n=this.getComponentsString(t.components);return n.path?(e.setAttributeNS(null,"points",n.path),n.complete?e:null):!1},drawPolygon:function(e,t){for(var n="",r=!0,i=!0,s,o,u=0,a=t.components.length;u<a;u++)n+=" M",s=this.getComponentsString(t.components[u].components," "),(o=s.path)?(n+=" "+o,i=s.complete&&i):r=!1;return r?(e.setAttributeNS(null,"d",n+" z"),e.setAttributeNS(null,"fill-rule","evenodd"),i?e:null):!1},drawRectangle:function(e,t){var n=this.getResolution(),r=(t.x-this.featureDx)/n+this.left,i=this.top-t.y/n;return this.inValidRange(r,i)?(e.setAttributeNS(null,"x",r),e.setAttributeNS(null,"y",i),e.setAttributeNS(null,"width",t.width/n),e.setAttributeNS(null,"height",t.height/n),e):!1},drawText:function(e,t,n){var r=!!t.labelOutlineWidth;if(r){var i=OpenLayers.Util.extend({},t);i.fontColor=i.labelOutlineColor,i.fontStrokeColor=i.labelOutlineColor,i.fontStrokeWidth=t.labelOutlineWidth,delete i.labelOutlineWidth,this.drawText(e,i,n)}var s=this.getResolution(),i=(n.x-this.featureDx)/s+this.left,o=n.y/s-this.top,r=r?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,s=this.nodeFactory(e+r,"text");s.setAttributeNS(null,"x",i),s.setAttributeNS(null,"y",-o),t.fontColor&&s.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&s.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&s.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&s.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&s.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&s.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&s.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&s.setAttributeNS(null,"font-style",t.fontStyle),!0===t.labelSelect?(s.setAttributeNS(null,"pointer-events","visible"),s._featureId=e):s.setAttributeNS(null,"pointer-events","none"),o=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign,s.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[0]]||"middle"),!0===OpenLayers.IS_GECKO&&s.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[1]]||"central");for(var u=t.label.split("\n"),a=u.length;s.childNodes.length>a;)s.removeChild(s.lastChild);for(var f=0;f<a;f++){var l=this.nodeFactory(e+r+"_tspan_"+f,"tspan");!0===t.labelSelect&&(l._featureId=e,l._geometry=n,l._geometryClass=n.CLASS_NAME),!1===OpenLayers.IS_GECKO&&l.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[o[1]]||"-35%"),l.setAttribute("x",i);if(0==f){var c=OpenLayers.Renderer.SVG.LABEL_VFACTOR[o[1]];null==c&&(c=-0.5),l.setAttribute("dy",c*(a-1)+"em")}else l.setAttribute("dy","1em");l.textContent=""===u[f]?" ":u[f],l.parentNode||s.appendChild(l)}s.parentNode||this.textRoot.appendChild(s)},getComponentsString:function(e,t){for(var n=[],r=!0,i=e.length,s=[],o,u=0;u<i;u++)o=e[u],n.push(o),(o=this.getShortString(o))?s.push(o):(0<u&&this.getShortString(e[u-1])&&s.push(this.clipLine(e[u],e[u-1])),u<i-1&&this.getShortString(e[u+1])&&s.push(this.clipLine(e[u],e[u+1])),r=!1);return{path:s.join(t||","),complete:r}},clipLine:function(e,t){if(t.equals(e))return"";var n=this.getResolution(),r=this.MAX_PIXEL-this.translationParameters.x,i=this.MAX_PIXEL-this.translationParameters.y,s=(t.x-this.featureDx)/n+this.left,o=this.top-t.y/n,u=(e.x-this.featureDx)/n+this.left,n=this.top-e.y/n,a;if(u<-r||u>r)a=(n-o)/(u-s),u=0>u?-r:r,n=o+(u-s)*a;if(n<-i||n>i)a=(u-s)/(n-o),n=0>n?-i:i,u=s+(n-o)*a;return u+","+n},getShortString:function(e){var t=this.getResolution(),n=(e.x-this.featureDx)/t+this.left,e=this.top-e.y/t;return this.inValidRange(n,e)?n+","+e:!1},getPosition:function(e){return{x:parseFloat(e.getAttributeNS(null,"cx")),y:parseFloat(e.getAttributeNS(null,"cy"))}},importSymbol:function(e){this.defs||(this.defs=this.createDefs());var t=this.container.id+"-"+e,n=document.getElementById(t);if(null!=n)return n;var r=OpenLayers.Renderer.symbol[e];if(!r)throw Error(e+" is not a valid symbol name");var e=this.nodeFactory(t,"symbol"),i=this.nodeFactory(null,"polygon");e.appendChild(i);for(var n=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),s=[],o,u,a=0;a<r.length;a+=2)o=r[a],u=r[a+1],n.left=Math.min(n.left,o),n.bottom=Math.min(n.bottom,u),n.right=Math.max(n.right,o),n.top=Math.max(n.top,u),s.push(o,",",u);return i.setAttributeNS(null,"points",s.join(" ")),r=n.getWidth(),i=n.getHeight(),e.setAttributeNS(null,"viewBox",[n.left-r,n.bottom-i,3*r,3*i].join(" ")),this.symbolMetrics[t]=[Math.max(r,i),n.getCenterLonLat().lon,n.getCenterLonLat().lat],this.defs.appendChild(e),e},getFeatureIdFromEvent:function(e){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);return t||(t=e.target,t=t.parentNode&&t!=this.rendererRoot?t.parentNode._featureId:void 0),t},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(e){e.preventDefault&&e.preventDefault()},OpenLayers.Format.SLD.v1_0_0=OpenLayers.Class(OpenLayers.Format.SLD.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0"}),OpenLayers.Format.OWSContext=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"0.3.1",getVersion:function(e,t){var n=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);return"0.3.0"===n&&(n=this.defaultVersion),n},toContext:function(e){var t={};return"OpenLayers.Map"==e.CLASS_NAME&&(t.bounds=e.getExtent(),t.maxExtent=e.maxExtent,t.projection=e.projection,t.size=e.getSize(),t.layers=e.layers),t},CLASS_NAME:"OpenLayers.Format.OWSContext"}),OpenLayers.Format.OWSContext.v0_3_1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{owc:"http://www.opengis.net/ows-context",gml:"http://www.opengis.net/gml",kml:"http://www.opengis.net/kml/2.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},VERSION:"0.3.1",schemaLocation:"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",defaultPrefix:"owc",extractAttributes:!0,xy:!0,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},featureNS:"http://mapserver.gis.umn.edu/mapserver",featureType:"vector",geometryName:"geometry",nestingLayerLookup:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)},setNestingPath:function(e){if(e.layersContext)for(var t=0,n=e.layersContext.length;t<n;t++){var r=e.layersContext[t],i=[],s=e.title||"";e.metadata&&e.metadata.nestingPath&&(i=e.metadata.nestingPath.slice()),""!=s&&i.push(s),r.metadata.nestingPath=i,r.layersContext&&this.setNestingPath(r)}},decomposeNestingPath:function(e){var t=[];if(OpenLayers.Util.isArray(e)){for(e=e.slice();0<e.length;)t.push(e.slice()),e.pop();t.reverse()}return t},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),this.setNestingPath({layersContext:t.layersContext}),e=[],this.processLayer(e,t),delete t.layersContext,t.layersContext=e,t},processLayer:function(e,t){if(t.layersContext)for(var n=0,r=t.layersContext.length;n<r;n++){var i=t.layersContext[n];e.push(i),i.layersContext&&this.processLayer(e,i)}},write:function(e,t){this.nestingLayerLookup={},t=t||{},OpenLayers.Util.applyDefaults(t,e);var n=this.writeNode("OWSContext",t);return this.nestingLayerLookup=null,this.setAttributeNS(n,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[n])},readers:{kml:{Document:function(e,t){t.features=(new OpenLayers.Format.KML({kmlns:this.namespaces.kml,extractStyles:!0})).read(e)}},owc:{OWSContext:function(e,t){this.readChildNodes(e,t)},General:function(e,t){this.readChildNodes(e,t)},ResourceList:function(e,t){this.readChildNodes(e,t)},Layer:function(e,t){var n={metadata:{},visibility:"1"!=e.getAttribute("hidden"),queryable:"1"==e.getAttribute("queryable"),opacity:null!=e.getAttribute("opacity")?parseFloat(e.getAttribute("opacity")):null,name:e.getAttribute("name"),categoryLayer:null==e.getAttribute("name"),formats:[],styles:[]};t.layersContext||(t.layersContext=[]),t.layersContext.push(n),this.readChildNodes(e,n)},InlineGeometry:function(e,t){t.features=[];var n=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember"),r;1<=n.length&&(r=n[0]),r&&r.firstChild&&(n=r.firstChild.nextSibling?r.firstChild.nextSibling:r.firstChild,this.setNamespace("feature",n.namespaceURI),this.featureType=n.localName||n.nodeName.split(":").pop(),this.readChildNodes(e,t))},Server:function(e,t){if(!t.service&&!t.version||t.service!=OpenLayers.Format.Context.serviceTypes.WMS)t.service=e.getAttribute("service"),t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Name:function(e,t){t.name=this.getChildValue(e),this.readChildNodes(e,t)},Title:function(e,t){t.title=this.getChildValue(e),this.readChildNodes(e,t)},StyleList:function(e,t){this.readChildNodes(e,t.styles)},Style:function(e,t){var n={};t.push(n),this.readChildNodes(e,n)},LegendURL:function(e,t){var n={};t.legend=n,this.readChildNodes(e,n)},OnlineResource:function(e,t){t.url=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)}},ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,gml:OpenLayers.Format.GML.v2.prototype.readers.gml,sld:OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{owc:{OWSContext:function(e){var t=this.createElementNSPlus("OWSContext",{attributes:{version:this.VERSION,id:e.id||OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")}});return this.writeNode("General",e,t),this.writeNode("ResourceList",e,t),t},General:function(e){var t=this.createElementNSPlus("General");return this.writeNode("ows:BoundingBox",e,t),this.writeNode("ows:Title",e.title||"OpenLayers OWSContext",t),t},ResourceList:function(e){for(var t=this.createElementNSPlus("ResourceList"),n=0,r=e.layers.length;n<r;n++){var i=e.layers[n],s=this.decomposeNestingPath(i.metadata.nestingPath);this.writeNode("_Layer",{layer:i,subPaths:s},t)}return t},Server:function(e){var t=this.createElementNSPlus("Server",{attributes:{version:e.version,service:e.service}});return this.writeNode("OnlineResource",e,t),t},OnlineResource:function(e){return this.createElementNSPlus("OnlineResource",{attributes:{"xlink:href":e.url}})},InlineGeometry:function(e){var t=this.createElementNSPlus("InlineGeometry");this.writeNode("gml:boundedBy",e.getDataExtent(),t);for(var n=0,r=e.features.length;n<r;n++)this.writeNode("gml:featureMember",e.features[n],t);return t},StyleList:function(e){for(var t=this.createElementNSPlus("StyleList"),n=0,r=e.length;n<r;n++)this.writeNode("Style",e[n],t);return t},Style:function(e){var t=this.createElementNSPlus("Style");return this.writeNode("Name",e,t),this.writeNode("Title",e,t),e.legend&&this.writeNode("LegendURL",e,t),t},Name:function(e){return this.createElementNSPlus("Name",{value:e.name})},Title:function(e){return this.createElementNSPlus("Title",{value:e.title})},LegendURL:function(e){var t=this.createElementNSPlus("LegendURL");return this.writeNode("OnlineResource",e.legend,t),t},_WMS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.params.LAYERS,queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1",opacity:e.hasOwnProperty("opacity")?e.opacity:null}});return this.writeNode("ows:Title",e.name,t),this.writeNode("ows:OutputFormat",e.params.FORMAT,t),this.writeNode("Server"
,{service:OpenLayers.Format.Context.serviceTypes.WMS,version:e.params.VERSION,url:e.url},t),e.metadata.styles&&0<e.metadata.styles.length&&this.writeNode("StyleList",e.metadata.styles,t),t},_Layer:function(e){var t,n,r;return t=e.layer,n=e.subPaths,r=null,0<n.length?(t=n[0].join("/"),n=t.lastIndexOf("/"),r=this.nestingLayerLookup[t],n=0<n?t.substring(n+1,t.length):t,r||(r=this.createElementNSPlus("Layer"),this.writeNode("ows:Title",n,r),this.nestingLayerLookup[t]=r),e.subPaths.shift(),this.writeNode("_Layer",e,r)):(t instanceof OpenLayers.Layer.WMS?r=this.writeNode("_WMS",t):t instanceof OpenLayers.Layer.Vector&&(t.protocol instanceof OpenLayers.Protocol.WFS.v1?r=this.writeNode("_WFS",t):t.protocol instanceof OpenLayers.Protocol.HTTP?t.protocol.format instanceof OpenLayers.Format.GML?(t.protocol.format.version="2.1.2",r=this.writeNode("_GML",t)):t.protocol.format instanceof OpenLayers.Format.KML&&(t.protocol.format.version="2.2",r=this.writeNode("_KML",t)):(this.setNamespace("feature",this.featureNS),r=this.writeNode("_InlineGeometry",t))),t.options.maxScale&&this.writeNode("sld:MinScaleDenominator",t.options.maxScale,r),t.options.minScale&&this.writeNode("sld:MaxScaleDenominator",t.options.minScale,r),this.nestingLayerLookup[t.name]=r),r},_WFS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.protocol.featurePrefix+":"+e.protocol.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WFS,version:e.protocol.version,url:e.protocol.url},t),t},_InlineGeometry:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:this.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("InlineGeometry",e,t),t},_GML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.GML,url:e.protocol.url,version:e.protocol.format.version},t),t},_KML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.KML,version:e.protocol.format.version,url:e.protocol.url},t),t}},gml:OpenLayers.Util.applyDefaults({boundedBy:function(e){var t=this.createElementNSPlus("gml:boundedBy");return this.writeNode("gml:Box",e,t),t}},OpenLayers.Format.GML.v2.prototype.writers.gml),ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,sld:OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},CLASS_NAME:"OpenLayers.Format.OWSContext.v0_3_1"}),OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.eTop||(this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top",this.div.appendChild(this.eTop),this.eTop.style.visibility=""==this.topOutUnits||""==this.topInUnits?"hidden":"visible",this.eBottom=document.createElement("div"),this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),this.eBottom.style.visibility=""==this.bottomOutUnits||""==this.bottomInUnits?"hidden":"visible"),this.map.events.register("moveend",this,this.update),this.update(),this.div},getBarLen:function(e){var t=parseInt(Math.log(e)/Math.log(10)),t=Math.pow(10,t),e=parseInt(e/t);return(5<e?5:2<e?2:1)*t},update:function(){var e=this.map.getResolution();if(e){var t=this.map.getUnits(),n=OpenLayers.INCHES_PER_UNIT,r=this.maxWidth*e*n[t],i=1;!0===this.geodesic&&(i=(this.map.getGeodesicPixelSize().w||1e-6)*this.maxWidth/(r/n.km),r*=i);var s,o;1e5<r?(s=this.topOutUnits,o=this.bottomOutUnits):(s=this.topInUnits,o=this.bottomInUnits);var u=r/n[s],a=r/n[o],r=this.getBarLen(u),f=this.getBarLen(a),u=r/n[t]*n[s],a=f/n[t]*n[o],t=u/e/i,e=a/e/i;"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(e)+"px",this.eBottom.innerHTML=f+" "+o),"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(t)+"px",this.eTop.innerHTML=r+" "+s)}},CLASS_NAME:"OpenLayers.Control.ScaleLine"}),OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(e,t,n,r){this.url=e,this.size=t||{w:20,h:20},this.offset=n||{x:-(this.size.w/2),y:-(this.size.h/2)},this.calculateOffset=r,e=OpenLayers.Util.createUniqueID("OL_Icon_"),this.imageDiv=OpenLayers.Util.createAlphaImageDiv(e)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(e){null!=e&&(this.size=e),this.draw()},setUrl:function(e){null!=e&&(this.url=e),this.draw()},draw:function(e){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(e),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(e){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,e)},moveTo:function(e){null!=e&&(this.px=e),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(e){this.imageDiv.style.display=e?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType},CLASS_NAME:"OpenLayers.Icon"}),OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(e,t){this.lonlat=e;var n=t?t:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=n:(this.icon.url=n.url,this.icon.size=n.size,this.icon.offset=n.offset,this.icon.calculateOffset=n.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),this.events=null,null!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(e){return this.icon.draw(e)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(e){null!=e&&null!=this.icon&&this.icon.moveTo(e),this.lonlat=this.map.getLonLatFromLayerPx(e)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var e=!1;return this.map&&(e=this.map.getExtent().containsLonLat(this.lonlat)),e},inflate:function(e){this.icon&&this.icon.setSize({w:this.icon.size.w*e,h:this.icon.size.h*e})},setOpacity:function(e){this.icon.setOpacity(e)},setUrl:function(e){this.icon.setUrl(e)},display:function(e){this.icon.display(e)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,format:"image/png",serverResolutions:null,initialize:function(e,t,n,r){this.layername=n,OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,{},r]),this.extension=this.format.split("/")[1].toLowerCase(),this.extension="jpg"==this.extension?"jpeg":this.extension},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){function t(e,t){for(var e=""+e,n=[],r=0;r<t;++r)n.push("0");return n.join("").substring(0,t-e.length)+e}var n=this.getServerResolution(),r=this.maxExtent,i=this.tileSize,s=Math.round((e.left-r.left)/(n*i.w)),e=Math.round((e.bottom-r.bottom)/(n*i.h)),n=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,n):this.map.getZoom(),s=[this.layername,t(n,2),t(parseInt(s/1e6),3),t(parseInt(s/1e3)%1e3,3),t(parseInt(s)%1e3,3),t(parseInt(e/1e6),3),t(parseInt(e/1e3)%1e3,3),t(parseInt(e)%1e3,3)+"."+this.extension].join("/"),n=this.url;return OpenLayers.Util.isArray(n)&&(n=this.selectUrl(s,n)),n="/"==n.charAt(n.length-1)?n:n+"/",n+s},CLASS_NAME:"OpenLayers.Layer.TileCache"}),OpenLayers.Layer.KaMap=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,DEFAULT_PARAMS:{i:"jpeg",map:""},initialize:function(e,t,n,r){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getURL:function(e){var e=this.adjustBounds(e),t=this.map.getResolution(),n=Math.round(1e4*this.map.getScale())/1e4,r=Math.round(e.left/t);return this.getFullRequestString({t:-Math.round(e.top/t),l:r,s:n})},calculateGridLayout:function(e,t,n){var t=n*this.tileSize.w,n=n*this.tileSize.h,r=e.left,i=Math.floor(r/t)-this.buffer,r=-(r/t-i)*this.tileSize.w,i=i*t,e=e.top,s=Math.ceil(e/n)+this.buffer;return{tilelon:t,tilelat:n,tileoffsetlon:i,tileoffsetlat:s*n,tileoffsetx:r,tileoffsety:-(s-e/n+1)*this.tileSize.h}},clone:function(e){return null==e&&(e=new OpenLayers.Layer.KaMap(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e},getTileBounds:function(e){var t=this.getResolution(),n=t*this.tileSize.w,t=t*this.tileSize.h,r=this.getLonLatFromViewPortPx(e),e=n*Math.floor(r.lon/n),r=t*Math.floor(r.lat/t);return new OpenLayers.Bounds(e,r,e+n,r+t)},CLASS_NAME:"OpenLayers.Layer.KaMap"}),OpenLayers.Control.TransformFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,layer:null,preserveAspectRatio:!1,rotate:!0,feature:null,renderIntent:"temporary",rotationHandleSymbolizer:null,box:null,center:null,scale:1,ratio:1,rotation:0,handles:null,rotationHandles:null,dragControl:null,irregular:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.rotationHandleSymbolizer||(this.rotationHandleSymbolizer={stroke:!1,pointRadius:10,fillOpacity:0,cursor:"pointer"}),this.createBox(),this.createControl()},activate:function(){var e=!1;return OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragControl.activate(),this.layer.addFeatures([this.box]),this.rotate&&this.layer.addFeatures(this.rotationHandles),this.layer.addFeatures(this.handles),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.layer.removeFeatures(this.handles),this.rotate&&this.layer.removeFeatures(this.rotationHandles),this.layer.removeFeatures([this.box]),this.dragControl.deactivate(),e=!0),e},setMap:function(e){this.dragControl.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setFeature:function(e,t){var t=OpenLayers.Util.applyDefaults(t,{rotation:0,scale:1,ratio:1}),n=this.rotation,r=this.center;OpenLayers.Util.extend(this,t);if(!1!==this.events.triggerEvent("beforesetfeature",{feature:e})){this.feature=e,this.activate(),this._setfeature=!0;var i=this.feature.geometry.getBounds();this.box.move(i.getCenterLonLat()),this.box.geometry.rotate(-n,r),this._angle=0,this.rotation?(n=e.geometry.clone(),n.rotate(-this.rotation,this.center),n=new OpenLayers.Feature.Vector(n.getBounds().toGeometry()),n.geometry.rotate(this.rotation,this.center),this.box.geometry.rotate(this.rotation,this.center),this.box.move(n.geometry.getBounds().getCenterLonLat()),n=n.geometry.components[0].components[0].getBounds().getCenterLonLat()):n=new OpenLayers.LonLat(i.left,i.bottom),this.handles[0].move(n),delete this._setfeature,this.events.triggerEvent("setfeature",{feature:e})}},unsetFeature:function(){this.active?this.deactivate():(this.feature=null,this.rotation=0,this.ratio=this.scale=1)},createBox:function(){var e=this;this.center=new OpenLayers.Geometry.Point(0,0),this.box=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1,-1),new OpenLayers.Geometry.Point(0,-1),new OpenLayers.Geometry.Point(1,-1),new OpenLayers.Geometry.Point(1,0),new OpenLayers.Geometry.Point(1,1),new OpenLayers.Geometry.Point(0,1),new OpenLayers.Geometry.Point(-1,1),new OpenLayers.Geometry.Point(-1,0),new OpenLayers.Geometry.Point(-1,-1)]),null,"string"==typeof this.renderIntent?null:this.renderIntent),this.box.geometry.move=function(t,n){e._moving=!0,OpenLayers.Geometry.LineString.prototype.move.apply(this,arguments),e.center.move(t,n),delete e._moving};for(var t=function(e,t){OpenLayers.Geometry.Point.prototype.move.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.move(e,t),this._handle.geometry.move(e,t)},n=function(e,t,n){OpenLayers.Geometry.Point.prototype.resize.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.resize(e,t,n),this._handle.geometry.resize(e,t,n)},r=function(e,t){OpenLayers.Geometry.Point.prototype.rotate.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.rotate(e,t),this._handle.geometry.rotate(e,t)},i=function(t,n){var r=this.x,i=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,t,n);if(!e._moving){var s=e.dragControl.handlers.drag.evt,o=(!!e._setfeature||!e.preserveAspectRatio)&&(!s||!s.shiftKey),u=new OpenLayers.Geometry.Point(r,i),s=e.center;this.rotate(-e.rotation,s),u.rotate(-e.rotation,s);var a=this.x-s.x,f=this.y-s.y,l=a-(this.x-u.x),c=f-(this.y-u.y);e.irregular&&!e._setfeature&&(a-=(this.x-u.x)/2,f-=(this.y-u.y)/2),this.x=r,this.y=i,u=1,o?(f=1e-5>Math.abs(c)?1:f/c,u=(1e-5>Math.abs(l)?1:a/l)/f):(l=Math.sqrt(l*l+c*c),f=Math.sqrt(a*a+f*f)/l),e._moving=!0,e.box.geometry.rotate(-e.rotation,s),delete e._moving,e.box.geometry.resize(f,s,u),e.box.geometry.rotate(e.rotation,s),e.transformFeature({scale:f,ratio:u}),e.irregular&&!e._setfeature&&(a=s.clone(),a.x+=1e-5>Math.abs(r-s.x)?0:this.x-r,a.y+=1e-5>Math.abs(i-s.y)?0:this.y-i,e.box.geometry.move(this.x-r,this.y-i),e.transformFeature({center:a}))}},s=function(t,n){var r=this.x,i=this.y;OpenLayers.Geometry.Point.prototype.move.call(this,t,n);if(!e._moving){var s=e.dragControl.handlers.drag.evt,s=s&&s.shiftKey?45:1,o=e.center,u=this.x-o.x,a=this.y-o.y;this.x=r,this.y=i,r=Math.atan2(a-n,u-t),r=Math.atan2(a,u)-r,r*=180/Math.PI,e._angle=(e._angle+r)%360,r=e.rotation%s;if(Math.abs(e._angle)>=s||0!==r)r=Math.round(e._angle/s)*s-r,e._angle=0,e.box.geometry.rotate(r,o),e.transformFeature({rotation:r})}},o=Array(8),u=Array(4),a,f,l,c="sw s se e ne n nw w".split(" "),h=0;8>h;++h)a=this.box.geometry.components[h],f=new OpenLayers.Feature.Vector(a.clone(),{role:c[h]+"-resize"},"string"==typeof this.renderIntent?null:this.renderIntent),0==h%2&&(l=new OpenLayers.Feature.Vector(a.clone(),{role:c[h]+"-rotate"},"string"==typeof this.rotationHandleSymbolizer?null:this.rotationHandleSymbolizer),l.geometry.move=s,a._rotationHandle=l,u[h/2]=l),a.move=t,a.resize=n,a.rotate=r,f.geometry.move=i,a._handle=f,o[h]=f;this.rotationHandles=u,this.handles=o},createControl:function(){var e=this;this.dragControl=new OpenLayers.Control.DragFeature(this.layer,{documentDrag:!0,moveFeature:function(t){this.feature===e.feature&&(this.feature=e.box),OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,arguments)},onDrag:function(t){t===e.box&&e.transformFeature({center:e.center})},onStart:function(t){var n=!e.geometryTypes||-1!==OpenLayers.Util.indexOf(e.geometryTypes,t.geometry.CLASS_NAME),r=OpenLayers.Util.indexOf(e.handles,t),r=r+OpenLayers.Util.indexOf(e.rotationHandles,t);t!==e.feature&&t!==e.box&&-2==r&&n&&e.setFeature(t)},onComplete:function(){e.events.triggerEvent("transformcomplete",{feature:e.feature})}})},drawHandles:function(){for(var e=this.layer,t=0;8>t;++t)this.rotate&&0===t%2&&e.drawFeature(this.rotationHandles[t/2],this.rotationHandleSymbolizer),e.drawFeature(this.handles[t],this.renderIntent)},transformFeature:function(e){if(!this._setfeature){this.scale*=e.scale||1,this.ratio*=e.ratio||1;var t=this.rotation;this.rotation=(this.rotation+(e.rotation||0))%360;if(!1!==this.events.triggerEvent("beforetransform",e)){var n=this.feature,r=n.geometry,i=this.center;r.rotate(-t,i),e.scale||e.ratio?r.resize(e.scale,i,e.ratio):e.center&&n.move(e.center.getBounds().getCenterLonLat()),r.rotate(this.rotation,i),this.layer.drawFeature(n),n.toState(OpenLayers.State.UPDATE),this.events.triggerEvent("transform",e)}}this.layer.drawFeature(this.box,this.renderIntent),this.drawHandles()},destroy:function(){for(var e,t=0;8>t;++t)e=this.box.geometry.components[t],e._handle.destroy(),e._handle=null,e._rotationHandle&&e._rotationHandle.destroy(),e._rotationHandle=null;this.rotationHandles=this.rotationHandleSymbolizer=this.handles=this.feature=this.center=null,this.box.destroy(),this.layer=this.box=null,this.dragControl.destroy(),this.dragControl=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.TransformFeature"}),OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(e){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(e)},startBox:function(){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(e){var t=this.dragHandler.start.x,n=this.dragHandler.start.y,r=Math.abs(t-e.x),i=Math.abs(n-e.y),s=this.getBoxOffsets();this.zoomBox.style.width=r+s.width+1+"px",this.zoomBox.style.height=i+s.height+1+"px",this.zoomBox.style.left=(e.x<t?t-r-s.left:t-s.left)+"px",this.zoomBox.style.top=(e.y<n?n-i-s.top:n-s.top)+"px"},endBox:function(e){var t;if(5<Math.abs(this.dragHandler.start.x-e.x)||5<Math.abs(this.dragHandler.start.y-e.y)){var n=this.dragHandler.start;t=Math.min(n.y,e.y);var r=Math.max(n.y,e.y),i=Math.min(n.x,e.x),e=Math.max(n.x,e.x);t=new OpenLayers.Bounds(i,r,e,t)}else t=this.dragHandler.start.clone();this.removeBox(),this.callback("done",[t])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.boxOffsets=this.zoomBox=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return OpenLayers.Handler.prototype.activate.apply(this,arguments)?(this.dragHandler.activate(),!0):!1},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0):!1},getBoxOffsets:function(){if(!this.boxOffsets){var e=document.createElement("div");e.style.position="absolute",e.style.border="1px solid black",e.style.width="3px",document.body.appendChild(e);var t=3==e.clientWidth;document.body.removeChild(e);var e=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),n=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),r=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:e,right:n,top:r,bottom:i,width:!1===t?e+n:0,height:!1===t?r+i:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(e){if(e instanceof OpenLayers.Bounds){var t;if(this.out){t=Math.abs(e.right-e.left);var n=Math.abs(e.top-e.bottom);t=Math.min(this.map.size.h/n,this.map.size.w/t);var n=this.map.getExtent(),r=this.map.getLonLatFromPixel(e.getCenterPixel()),e=r.lon-n.getWidth()/2*t,i=r.lon+n.getWidth()/2*t,s=r.lat-n.getHeight()/2*t;t=r.lat+n.getHeight()/2*t,t=new OpenLayers.Bounds(e,s,i,t)}else t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),n=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,n.lon,n.lat);n=this.map.getZoom(),this.map.zoomToExtent(t),n==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(n+(this.out?-1:1))}else this.out?this.map.setCenter(this.map.getLonLatFromPixel(e),this.map.getZoom()-1):this.map.setCenter(this.map.getLonLatFromPixel(e),this.map.getZoom()+1)},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:1,documentDrag:!1,kinetic:null,enableKinetic:!1,kineticInterval:10,draw:function(){if(this.enableKinetic){var e={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(e=OpenLayers.Util.extend(e,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(e)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(e){this.kinetic&&this.kinetic.update(e),this.panned=!0,this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!0,animate:!1})},panMapDone:function(e){if(this.panned){var t=null;this.kinetic&&(t=this.kinetic.end(e)),this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!!t,animate:!1});if(t){var n=this;this.kinetic.move(t,function(e,t,r){n.map.pan(e,t,{dragging:!r,animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,"double":!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,touch:!1,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(e){return this.touch||(this.unregisterMouseListeners(),this.touch=!0),this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},touchmove:function(e){return this.last=this.getEventInfo(e),!0},touchend:function(e){return this.down&&(e.xy=this.last.xy,e.lastTouches=this.last.touches,this.handleSingle(e),this.down=null),!0},unregisterMouseListeners:function(){this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,click:this.click,dblclick:this.dblclick,scope:this})},mousedown:function(e){return this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},mouseup:function(e){var t=!0;return this.checkModifiers(e)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(e)&&(t=this.rightclick(e)),t},rightclick:function(e){if(this.passesTolerance(e)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[e]),!this.stopDouble;e=this["double"]?OpenLayers.Util.extend({},e):this.callback("rightclick",[e]),e=OpenLayers.Function.bind(this.delayedRightCall,this,e),this.rightclickTimerId=window.setTimeout(e,this.delay)}return!this.stopSingle},delayedRightCall:function(e){this.rightclickTimerId=null,e&&this.callback("rightclick",[e])},click:function(e){return this.last||(this.last=this.getEventInfo(e)),this.handleSingle(e),!this.stopSingle},dblclick:function(e){return this.handleDouble(e),!this.stopDouble},handleDouble:function(e){this.passesDblclickTolerance(e)&&(this["double"]&&this.callback("dblclick",[e]),this.clearTimer())},handleSingle:function(e){this.passesTolerance(e)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this["double"]&&OpenLayers.Event.stop(e),this.handleDouble(e)),(!this.last.touches||2!==this.last.touches.length)&&this.clearTimer()):(this.first=this.getEventInfo(e),this.queuePotentialClick(this.single?OpenLayers.Util.extend({},e):null)))},queuePotentialClick:function(e){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)},passesTolerance:function(e){var t=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(e.xy))&&this.touch&&this.down.touches.length===this.last.touches.length)for(var e=0,n=this.down.touches.length;e<n;++e)if(this.getTouchDistance(this.down.touches[e],this.last.touches[e])>this.pixelTolerance){t=!1;break}return t},getTouchDistance:function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},passesDblclickTolerance:function(){var e=!0;return this.down&&this.first&&(e=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),e},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(e){this.timerId=null,e&&this.callback("click",[e])},getEventInfo:function(e){var t;if(e.touches){var n=e.touches.length;t=Array(n);for(var r,i=0;i<n;i++)r=e.touches[i],t[i]={clientX:r.clientX,clientY:r.clientY}}return{xy:e.xy,touches:t}},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.last=this.first=this.down=null,this.touch=!1,e=!0),e},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{"double":!0,stopDouble:!0}),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw(),this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},this.mouseWheelOptions),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.setCenter(this.map.getLonLatFromViewPortPx(e.xy),this.map.zoom+1)},defaultDblRightClick:function(e){this.map.setCenter(this.map.getLonLatFromViewPortPx(e.xy),this.map.zoom-1)},wheelChange:function(e,t){var n=this.map.getZoom(),r=this.map.getZoom()+Math.round(t),r=Math.max(r,0),r=Math.min(r,this.map.getNumZoomLevels());if(r!==n){var i=this.map.getSize(),n=i.w/2-e.xy.x,i=e.xy.y-i.h/2,s=this.map.baseLayer.getResolutionForZoom(r),o=this.map.getLonLatFromPixel(e.xy);this.map.setCenter(new OpenLayers.LonLat(o.lon+n*s,o.lat+i*s),r)}},wheelUp:function(e,t){this.wheelChange(e,t||1)},wheelDown:function(e,t){this.wheelChange(e,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},handlerOptions:null,initialize:function(e,t,n){OpenLayers.Control.prototype.initialize.apply(this,[n]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,t){this.layer.events.triggerEvent("sketchmodified",{vertex:e,feature:t})},create:function(e,t){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:t})}},this.callbacks),this.layer=e,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:e.renderers,rendererOptions:e.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi);if(e=this.layer.styleMap&&this.layer.styleMap.styles.temporary)this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":e})});this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(e){e=new OpenLayers.Feature.Vector(e),!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:e})&&(e.state=OpenLayers.State.INSERT,this.layer.addFeatures([e]),this.featureAdded(e),this.events.triggerEvent("featureadded",{feature:e}))},insertXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertXY(e,t)},insertDeltaXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(e,t)},insertDirectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(e,t)},insertDeflectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(e,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(e){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var t=this.point.geometry,n=this.control.layer.features,r,i=n.length-1;0<=i;--i)if(r=n[i].geometry,(r instanceof OpenLayers.Geometry.Polygon||r instanceof OpenLayers.Geometry.MultiPolygon)&&r.intersects(t)){t=n[i],this.control.layer.removeFeatures([t],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),t.geometry.addComponent(this.line.geometry),this.polygon=t,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(e){var e=e.vertex,t=this.line.geometry.components;this.polygon.geometry.intersects(e)||(t=t[t.length-3],e.x=t.x,e.y=t.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var e=this.line.geometry,t=0!==e.getArea();if(t){for(var n=this.polygon.geometry.components,r=n.length-2;0<=r;--r)if(e.intersects(n[r])){t=!1;break}if(t){r=n.length-2;e:for(;0<r;--r)for(var i=n[r].components,s=0,o=i.length;s<o;++s)if(e.containsPoint(i[s])){t=!1;break e}}}return t?this.polygon.state!==OpenLayers.State.INSERT&&
(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(e),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(e){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,e||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(e){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,e),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPolygon([e])),e},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Control.EditingToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{citeCompliant:!1,initialize:function(e,t){OpenLayers.Control.Panel.prototype.initialize.apply(this,[t]),this.addControls([new OpenLayers.Control.Navigation]),this.addControls([new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Point,{displayClass:"olControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Path,{displayClass:"olControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Polygon,{displayClass:"olControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})])},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.EditingToolbar"}),OpenLayers.Strategy.BBOX=OpenLayers.Class(OpenLayers.Strategy,{bounds:null,resolution:null,ratio:2,resFactor:null,response:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&((this.layer.events.on({moveend:this.update,scope:this}),this.layer.events.on({refresh:this.update,scope:this}),!0===this.layer.visibility&&!0===this.layer.inRange)?this.update():this.layer.events.on({visibilitychanged:this.update,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),e},update:function(e){var t=this.getMapBounds();null!==t&&(e&&e.force||this.invalidBounds(t))&&(this.calculateBounds(t),this.resolution=this.layer.map.getResolution(),this.triggerRead(e))},getMapBounds:function(){if(null===this.layer.map)return null;var e=this.layer.map.getExtent();return e&&!this.layer.projection.equals(this.layer.map.getProjectionObject())&&(e=e.clone().transform(this.layer.map.getProjectionObject(),this.layer.projection)),e},invalidBounds:function(e){return e||(e=this.getMapBounds()),e=!this.bounds||!this.bounds.containsBounds(e),!e&&this.resFactor&&(e=this.resolution/this.layer.map.getResolution(),e=e>=this.resFactor||e<=1/this.resFactor),e},calculateBounds:function(e){e||(e=this.getMapBounds());var t=e.getCenterLonLat(),n=e.getWidth()*this.ratio,e=e.getHeight()*this.ratio;this.bounds=new OpenLayers.Bounds(t.lon-n/2,t.lat-e/2,t.lon+n/2,t.lat+e/2)},triggerRead:function(e){this.response&&(!e||!0!==e.noAbort)&&(this.layer.protocol.abort(this.response),this.layer.events.triggerEvent("loadend")),this.layer.events.triggerEvent("loadstart"),this.response=this.layer.protocol.read(OpenLayers.Util.applyDefaults({filter:this.createFilter(),callback:this.merge,scope:this},e))},createFilter:function(){var e=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,value:this.bounds,projection:this.layer.projection});return this.layer.filter&&(e=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.layer.filter,e]})),e},merge:function(e){this.layer.destroyFeatures();if((e=e.features)&&0<e.length){var t=this.layer.projection,n=this.layer.map.getProjectionObject();if(!n.equals(t))for(var r,i=0,s=e.length;i<s;++i)(r=e[i].geometry)&&r.transform(t,n);this.layer.addFeatures(e)}this.response=null,this.layer.events.triggerEvent("loadend")},CLASS_NAME:"OpenLayers.Strategy.BBOX"}),OpenLayers.Layer.WorldWind=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{},isBaseLayer:!0,lzd:null,zoomLevels:null,initialize:function(e,t,n,r,i,s){this.lzd=n,this.zoomLevels=r,n=[],n.push(e,t,i,s),OpenLayers.Layer.Grid.prototype.initialize.apply(this,n),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getZoom:function(){var e=this.map.getZoom();return this.map.getMaxExtent(),e-=Math.log(this.maxResolution/(this.lzd/512))/Math.log(2)},getURL:function(e){var e=this.adjustBounds(e),t=this.getZoom(),n=this.map.getMaxExtent(),r=this.lzd/Math.pow(2,this.getZoom()),i=Math.floor((e.left-n.left)/r),e=Math.floor((e.bottom-n.bottom)/r);return this.map.getResolution()<=this.lzd/512&&this.getZoom()<=this.zoomLevels?this.getFullRequestString({L:t,X:i,Y:e}):OpenLayers.Util.getImageLocation("blank.gif")},CLASS_NAME:"OpenLayers.Layer.WorldWind"}),OpenLayers.Protocol.CSW=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.CSW.DEFAULTS),t=OpenLayers.Protocol.CSW["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSW version: "+e.version;return new t(e)},OpenLayers.Protocol.CSW.DEFAULTS={version:"2.0.2"},OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",yx:{"urn:ogc:def:crs:EPSG::4326":!0},createLayer:function(e,t){var n,r={layer:!0,matrixSet:!0},i;for(i in r)if(!(i in t))throw Error("Missing property '"+i+"' in layer configuration.");r=e.contents,i=r.tileMatrixSets[t.matrixSet];for(var s,o=0,u=r.layers.length;o<u;++o)if(r.layers[o].identifier===t.layer){s=r.layers[o];break}if(s&&i){for(var a,o=0,u=s.styles.length;o<u&&(a=s.styles[o],!a.isDefault);++o);n=new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(t,{url:"REST"===t.requestEncoding&&s.resourceUrl?s.resourceUrl.tile.template:e.operationsMetadata.GetTile.dcp.http.get[0].url,name:s.title,style:a.identifier,matrixIds:i.matrixIds,tileFullExtent:i.bounds}))}return n},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"}),OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var e,t=OpenLayers.Layer.Google.cache[this.map.id];t?(e=t.mapObject,++t.count):(t=this.map.viewPortDiv,e=document.createElement("div"),e.id=this.map.id+"_GMapContainer",e.style.position="absolute",e.style.width="100%",e.style.height="100%",t.appendChild(e),t=this.map.getCenter(),e=new google.maps.Map(e,{center:t?new google.maps.LatLng(t.lat,t.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),t={mapObject:e,count:1},OpenLayers.Layer.Google.cache[this.map.id]=t,this.repositionListener=google.maps.event.addListenerOnce(e,"center_changed",OpenLayers.Function.bind(this.repositionMapElements,this))),this.mapObject=e,this.setGMapVisibility(this.visibility)},repositionMapElements:function(){google.maps.event.trigger(this.mapObject,"resize");var e=this.mapObject.getDiv().firstChild;if(!e||3>e.childNodes.length)return this.repositionTimer=window.setTimeout(OpenLayers.Function.bind(this.repositionMapElements,this),250),!1;for(var t=OpenLayers.Layer.Google.cache[this.map.id],n=this.map.viewPortDiv;"none"==e.lastChild.style.display;)n.appendChild(e.lastChild);var r=e.lastChild;n.appendChild(r),r.style.zIndex="1100",r.style.bottom="",r.className="olLayerGoogleCopyright olLayerGoogleV3",r.style.display="",t.termsOfUse=r,e=e.lastChild,n.appendChild(e),e.style.zIndex="1100",e.style.bottom="",e.className="olLayerGooglePoweredBy olLayerGoogleV3 gmnoprint",e.style.display="",t.poweredBy=e,this.setGMapVisibility(this.visibility)},onMapResize:function(){if(this.visibility)google.maps.event.trigger(this.mapObject,"resize");else{var e=OpenLayers.Layer.Google.cache[this.map.id];if(!e.resized){var t=this;google.maps.event.addListenerOnce(this.mapObject,"tilesloaded",function(){google.maps.event.trigger(t.mapObject,"resize"),t.moveTo(t.map.getCenter(),t.map.getZoom()),delete e.resized})}e.resized=!0}},setGMapVisibility:function(e){var t=OpenLayers.Layer.Google.cache[this.map.id];if(t){for(var n=this.type,r=this.map.layers,i,s=r.length-1;0<=s;--s)if(i=r[s],i instanceof OpenLayers.Layer.Google&&!0===i.visibility&&!0===i.inRange){n=i.type,e=!0;break}r=this.mapObject.getDiv(),!0===e?(this.mapObject.setMapTypeId(n),r.style.left="",t.termsOfUse&&t.termsOfUse.style&&(t.termsOfUse.style.left="",t.termsOfUse.style.display="",t.poweredBy.style.display=""),t.displayed=this.id):(delete t.displayed,r.style.left="-9999px",t.termsOfUse&&t.termsOfUse.style&&(t.termsOfUse.style.display="none",t.termsOfUse.style.left="-9999px",t.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(e){var t=null;return null!=e&&(t=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),e=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right),t=new google.maps.LatLngBounds(new google.maps.LatLng(t.lat,t.lon),new google.maps.LatLng(e.lat,e.lon))),t},getMapObjectLonLatFromMapObjectPixel:function(e){var t=this.map.getSize(),n=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),r=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),i=this.map.getResolution(),e=new OpenLayers.LonLat(n+(e.x-t.w/2)*i,r-(e.y-t.h/2)*i);return this.wrapDateLine&&(e=e.wrapDateLine(this.maxExtent)),this.getMapObjectLonLatFromLonLat(e.lon,e.lat)},getMapObjectPixelFromMapObjectLonLat:function(e){var t=this.getLongitudeFromMapObjectLonLat(e),e=this.getLatitudeFromMapObjectLonLat(e),n=this.map.getResolution(),r=this.map.getExtent();return this.getMapObjectPixelFromXY(1/n*(t-r.left),1/n*(r.top-e))},setMapObjectCenter:function(e,t){if(!1===this.animationEnabled&&t!=this.mapObject.zoom){var n=this.getMapContainer();google.maps.event.addListenerOnce(this.mapObject,"idle",function(){n.style.visibility=""}),n.style.visibility="hidden"}this.mapObject.setOptions({center:e,zoom:t})},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var n;return this.sphericalMercator?(n=this.inverseMercator(e,t),n=new google.maps.LatLng(n.lat,n.lon)):n=new google.maps.LatLng(t,e),n},getMapObjectPixelFromXY:function(e,t){return new google.maps.Point(e,t)},destroy:function(){this.repositionListener&&google.maps.event.removeListener(this.repositionListener),this.repositionTimer&&window.clearTimeout(this.repositionTimer),OpenLayers.Layer.Google.prototype.destroy.apply(this,arguments)}},OpenLayers.Format.WPSDescribeProcess=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{wps:"http://www.opengis.net/wps/1.0.0",ows:"http://www.opengis.net/ows/1.1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",defaultPrefix:"wps",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{ProcessDescriptions:function(e,t){t.processDescriptions={},this.readChildNodes(e,t.processDescriptions)},ProcessDescription:function(e,t){var n={processVersion:this.getAttributeNS(e,this.namespaces.wps,"processVersion"),statusSupported:"true"===e.getAttribute("statusSupported"),storeSupported:"true"===e.getAttribute("storeSupported")};this.readChildNodes(e,n),t[n.identifier]=n},DataInputs:function(e,t){t.dataInputs=[],this.readChildNodes(e,t.dataInputs)},ProcessOutputs:function(e,t){t.processOutputs=[],this.readChildNodes(e,t.processOutputs)},Output:function(e,t){var n={};this.readChildNodes(e,n),t.push(n)},ComplexOutput:function(e,t){t.complexOutput={},this.readChildNodes(e,t.complexOutput)},Input:function(e,t){var n={maxOccurs:parseInt(e.getAttribute("maxOccurs")),minOccurs:parseInt(e.getAttribute("minOccurs"))};this.readChildNodes(e,n),t.push(n)},BoundingBoxData:function(e,t){t.boundingBoxData={},this.readChildNodes(e,t.boundingBoxData)},CRS:function(e,t){t.CRSs||(t.CRSs={}),t.CRSs[this.getChildValue(e)]=!0},LiteralData:function(e,t){t.literalData={},this.readChildNodes(e,t.literalData)},ComplexData:function(e,t){t.complexData={},this.readChildNodes(e,t.complexData)},Default:function(e,t){t["default"]={},this.readChildNodes(e,t["default"])},Supported:function(e,t){t.supported={},this.readChildNodes(e,t.supported)},Format:function(e,t){var n={};this.readChildNodes(e,n),t.formats||(t.formats={}),t.formats[n.mimeType]=!0},MimeType:function(e,t){t.mimeType=this.getChildValue(e)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSDescribeProcess"}),OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",gmd:"http://www.isotc211.org/2005/gmd",geonet:"http://www.fao.org/geonetwork",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetRecordsResponse:function(e,t){t.records=[],this.readChildNodes(e,t);var n=this.getAttributeNS(e,"","version");""!=n&&(t.version=n)},RequestId:function(e,t){t.RequestId=this.getChildValue(e)},SearchStatus:function(e,t){t.SearchStatus={};var n=this.getAttributeNS(e,"","timestamp");""!=n&&(t.SearchStatus.timestamp=n)},SearchResults:function(e,t){this.readChildNodes(e,t);for(var n=e.attributes,r={},i=0,s=n.length;i<s;++i)r[n[i].name]="numberOfRecordsMatched"==n[i].name||"numberOfRecordsReturned"==n[i].name||"nextRecord"==n[i].name?parseInt(n[i].nodeValue):n[i].nodeValue;t.SearchResults=r},SummaryRecord:function(e,t){var n={type:"SummaryRecord"};this.readChildNodes(e,n),t.records.push(n)},BriefRecord:function(e,t){var n={type:"BriefRecord"};this.readChildNodes(e,n),t.records.push(n)},DCMIRecord:function(e,t){var n={type:"DCMIRecord"};this.readChildNodes(e,n),t.records.push(n)},Record:function(e,t){var n={type:"Record"};this.readChildNodes(e,n),t.records.push(n)},"*":function(e,t){var n=e.localName||e.nodeName.split(":").pop();t[n]=this.getChildValue(e)}},geonet:{info:function(e,t){var n={};this.readChildNodes(e,n),t.gninfo=n}},dc:{"*":function(e,t){var n=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[n])||(t[n]=[]);for(var r={},i=e.attributes,s=0,o=i.length;s<o;++s)r[i[s].name]=i[s].nodeValue;r.value=this.getChildValue(e),""!=r.value&&t[n].push(r)}},dct:{"*":function(e,t){var n=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[n])||(t[n]=[]),t[n].push(this.getChildValue(e))}},ows:OpenLayers.Util.applyDefaults({BoundingBox:function(e,t){t.bounds&&(t.BoundingBox=[{crs:t.projection,value:[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top]}],delete t.projection,delete t.bounds),OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(e){return e=this.writeNode("csw:GetRecords",e),e.setAttribute("xmlns:gmd",this.namespaces.gmd),OpenLayers.Format.XML.prototype.write.apply(this,[e])},writers:{csw:{GetRecords:function(e){e||(e={});var t=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:e.requestId||this.requestId,resultType:e.resultType||this.resultType,outputFormat:e.outputFormat||this.outputFormat,outputSchema:e.outputSchema||this.outputSchema,startPosition:e.startPosition||this.startPosition,maxRecords:e.maxRecords||this.maxRecords}});(e.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",e.DistributedSearch||this.DistributedSearch,t);var n=e.ResponseHandler||this.ResponseHandler;if(OpenLayers.Util.isArray(n)&&0<n.length)for(var r=0,i=n.length;r<i;r++)this.writeNode("csw:ResponseHandler",n[r],t);return this.writeNode("Query",e.Query||this.Query,t),t},DistributedSearch:function(e){return this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:e.hopCount}})},ResponseHandler:function(e){return this.createElementNSPlus("csw:ResponseHandler",{value:e.value})},Query:function(e){e||(e={});var t=this.createElementNSPlus("csw:Query",{attributes:{typeNames:e.typeNames||"csw:Record"}}),n=e.ElementName;if(OpenLayers.Util.isArray(n)&&0<n.length)for(var r=0,i=n.length;r<i;r++)this.writeNode("csw:ElementName",n[r],t);else this.writeNode("csw:ElementSetName",e.ElementSetName||{value:"summary"},t);return e.Constraint&&this.writeNode("csw:Constraint",e.Constraint,t),e.SortBy&&this.writeNode("ogc:SortBy",e.SortBy,t),t},ElementName:function(e){return this.createElementNSPlus("csw:ElementName",{value:e.value})},ElementSetName:function(e){return this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:e.typeNames},value:e.value})},Constraint:function(e){var t=this.createElementNSPlus("csw:Constraint",{attributes:{version:e.version}});if(e.Filter){var n=new OpenLayers.Format.Filter({version:e.version});t.appendChild(n.write(e.Filter))}else e.CqlText&&(e=this.createElementNSPlus("CqlText",{value:e.CqlText.value}),t.appendChild(e));return t}},ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"}),OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(e,t,n){this.bounds=e,this.div=OpenLayers.Util.createDiv(),this.div.style.overflow="hidden",this.events=new OpenLayers.Events(this,this.div),this.setBorder(t,n)},destroy:function(){this.div=this.bounds=null,OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(e,t){e||(e="red"),t||(t=2),this.div.style.border=t+"px solid "+e},draw:function(e,t){return OpenLayers.Util.modifyDOMElement(this.div,null,e,t),this.div},onScreen:function(){var e=!1;return this.map&&(e=this.map.getExtent().containsBounds(this.bounds,!0,!0)),e},display:function(e){this.div.style.display=e?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"}),OpenLayers.Format.Text=OpenLayers.Class(OpenLayers.Format,{defaultStyle:null,extractStyles:!0,initialize:function(e){e=e||{},!1!==e.extractStyles&&(e.defaultStyle={externalGraphic:OpenLayers.Util.getImageLocation("marker.png"),graphicWidth:21,graphicHeight:25,graphicXOffset:-10.5,graphicYOffset:-12.5}),OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){for(var e=e.split("\n"),t,n=[],r=0;r<e.length-1;r++){var i=e[r].replace(/^\s*/,"").replace(/\s*$/,"");if("#"!=i.charAt(0))if(t){for(var i=i.split("	"),s=new OpenLayers.Geometry.Point(0,0),o={},u=this.defaultStyle?OpenLayers.Util.applyDefaults({},this.defaultStyle):null,a=!1,f=0;f<i.length;f++)if(i[f])if("point"==t[f])a=i[f].split(","),s.y=parseFloat(a[0]),s.x=parseFloat(a[1]),a=!0;else if("lat"==t[f])s.y=parseFloat(i[f]),a=!0;else if("lon"==t[f])s.x=parseFloat(i[f]),a=!0;else if("title"==t[f])o.title=i[f];else if("image"==t[f]||"icon"==t[f]&&u)u.externalGraphic=i[f];else if("iconSize"==t[f]&&u){var l=i[f].split(",");u.graphicWidth=parseFloat(l[0]),u.graphicHeight=parseFloat(l[1])}else"iconOffset"==t[f]&&u?(l=i[f].split(","),u.graphicXOffset=parseFloat(l[0]),u.graphicYOffset=parseFloat(l[1])):"description"==t[f]?o.description=i[f]:"overflow"==t[f]?o.overflow=i[f]:o[t[f]]=i[f];a&&(this.internalProjection&&this.externalProjection&&s.transform(this.externalProjection,this.internalProjection),i=new OpenLayers.Feature.Vector(s,o,u),n.push(i))}else t=i.split("	")}return n},CLASS_NAME:"OpenLayers.Format.Text"}),OpenLayers.Layer.Text=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,initialize:function(e,t){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments),this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadText:function(){!this.loaded&&null!=this.location&&(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,failure:function(){this.events.triggerEvent("loadend")},scope:this}),this.loaded=!0)},moveTo:function(e,t,n){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadText()},parseData:function(e){var e=e.responseText,t={};OpenLayers.Util.extend(t,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(t.externalProjection=this.projection,t.internalProjection=this.map.getProjectionObject());for(var e=(new OpenLayers.Format.Text(t)).read(e),t=0,n=e.length;t<n;t++){var r={},i=e[t],s,o,u;s=new OpenLayers.LonLat(i.geometry.x,i.geometry.y),i.style.graphicWidth&&i.style.graphicHeight&&(o=new OpenLayers.Size(i.style.graphicWidth,i.style.graphicHeight)),void 0!==i.style.graphicXOffset&&void 0!==i.style.graphicYOffset&&(u=new OpenLayers.Pixel(i.style.graphicXOffset,i.style.graphicYOffset)),null!=i.style.externalGraphic?r.icon=new OpenLayers.Icon(i.style.externalGraphic,o,u):(r.icon=OpenLayers.Marker.defaultIcon(),null!=o&&r.icon.setSize(o)),null!=i.attributes.title&&null!=i.attributes.description&&(r.popupContentHTML="<h2>"+i.attributes.title+"</h2><p>"+i.attributes.description+"</p>"),r.overflow=i.attributes.overflow||"auto",r=new OpenLayers.Feature(this,s,r),this.features.push(r),s=r.createMarker(),null!=i.attributes.title&&null!=i.attributes.description&&s.events.register("click",r,this.markerClick),this.addMarker(s)}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var n=0,r=this.layer.map.popups.length;n<r;n++)this.layer.map.removePopup(this.layer.map.popups[n]);t||this.layer.map.addPopup(this.createPopup()),OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;0<this.features.length;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.Text"}),OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(e,t,n){if(!n||!n.layerOptions||!n.layerOptions.styleMap)this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{});OpenLayers.Handler.Drag.prototype.initialize.apply(this,[e,t,n]),this.options=n?n:{}},setOptions:function(e){OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e)},activate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)&&(e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions),this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.feature=this.layer=null,e=!0),e},down:function(e){this.fixedRadius=!!this.radius,e=this.layer.getLonLatFromViewPortPx(e.xy),this.origin=new OpenLayers.Geometry.Point(e.lon,e.lat);if(!this.fixedRadius||this.irregular)this.radius=this.map.getResolution();this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(e){var t=this.layer.getLonLatFromViewPortPx(e.xy),t=new OpenLayers.Geometry.Point(t.lon,t.lat);this.irregular?(e=Math.sqrt(2)*Math.abs(t.y-this.origin.y)/2,this.radius=Math.max(this.map.getResolution()/2,e)):this.fixedRadius?this.origin=t:(this.calculateAngle(t,e),this.radius=Math.max(this.map.getResolution()/2,t.distanceTo(this.origin))),this.modifyGeometry(),this.irregular&&(e=t.x-this.origin.x,t=t.y-this.origin.y,this.feature.geometry.resize(1,this.origin,0==t?e/(this.radius*Math.sqrt(2)):e/t),this.feature.geometry.move(e/2,t/2)),this.layer.drawFeature(this.feature,this.style)},up:function(e){this.finalize(),this.start==this.last&&this.callback("done",[e.xy])},out:function(){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=this.snapAngle*(Math.PI/180)),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var e,t,n=this.feature.geometry.components[0];n.components.length!=this.sides+1&&(this.createGeometry(),n=this.feature.geometry.components[0]);for(var r=0;r<this.sides;++r)t=n.components[r],e=this.angle+2*r*Math.PI/this.sides,t.x=this.origin.x+this.radius*Math.cos(e),t.y=this.origin.y+this.radius*Math.sin(e),t.clearBounds()},calculateAngle:function(e,t){var n=Math.atan2(e.y-this.origin.y,e.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!t[this.snapToggle]){var r=Math.PI/180*this.snapAngle;this.angle=Math.round(n/r)*r}else this.angle=n},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(e){this.callbacks[e]&&this.callbacks[e].apply(this.control,[this.feature.geometry.clone()]),!this.persist&&("done"==e||"cancel"==e)&&this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),OpenLayers.Control.SLDSelect=OpenLayers.Class(OpenLayers.Control,{clearOnDeactivate:!1,layers:null,callbacks:null,selectionSymbolizer:{Polygon:{fillColor:"#FF0000",stroke:!1},Line:{strokeColor:"#FF0000",strokeWidth:2},Point:{graphicName:"square",fillColor:"#FF0000",pointRadius:5}},layerOptions:null,handlerOptions:null,sketchStyle:null,wfsCache:{},layerCache:{},initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.callbacks=OpenLayers.Util.extend({done:this.select,click:this.select},this.callbacks),this.handlerOptions=this.handlerOptions||{},this.layerOptions=OpenLayers.Util.applyDefaults(this.layerOptions,{displayInLayerSwitcher:!1,tileOptions:{maxGetUrlLength:2048}}),this.sketchStyle&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":this.sketchStyle})})),this.handler=new e(this,this.callbacks,this.handlerOptions)},destroy:function(){for(var e in this.layerCache)delete this.layerCache[e];for(e in this.wfsCache)delete this.wfsCache[e];OpenLayers.Control.prototype.destroy.apply(this,arguments)},coupleLayerVisiblity:function(e){this.setVisibility(e.object.getVisibility())},createSelectionLayer:function(e){var t;return this.layerCache[e.id]?t=this.layerCache[e.id]:(t=new OpenLayers.Layer.WMS(e.name,e.url,e.params,OpenLayers.Util.applyDefaults(this.layerOptions,e.getOptions())),this.layerCache[e.id]=t,!1===this.layerOptions.displayInLayerSwitcher&&e.events.on({visibilitychanged:this.coupleLayerVisiblity,scope:t}),this.map.addLayer(t)),t},createSLD:function(e,t,n){for(var r={version:"1.0.0",namedLayers:{}},i=(""+e.params.LAYERS).split(","),s=0,o=i.length;s<o;s++){var u=i[s];r.namedLayers[u]={name:u,userStyles:[]};var a=this.selectionSymbolizer,f=n[s];0<=f.type.indexOf("Polygon")?a={Polygon:this.selectionSymbolizer.Polygon}:0<=f.type.indexOf("LineString")?a={Line:this.selectionSymbolizer.Line}:0<=f.type.indexOf("Point")&&(a={Point:this.selectionSymbolizer.Point}),r.namedLayers[u].userStyles.push({name:"default",rules:[new OpenLayers.Rule({symbolizer:a,filter:t[s],maxScaleDenominator:e.options.minScale})]})}return(new OpenLayers.Format.SLD({srsName:this.map.getProjection()})).write(r)},parseDescribeLayer:function(e){var t=new OpenLayers.Format.WMSDescribeLayer,n=e.responseXML;if(!n||!n.documentElement)n=e.responseText;for(var e=t.read(n),t=[],n=null,r=0,i=e.length;r<i;r++)"WFS"==e[r].owsType&&(t.push(e[r].typeName),n=e[r].owsURL);OpenLayers.Request.GET({url:n,params:{SERVICE:"WFS",TYPENAME:t.toString(),REQUEST:"DescribeFeatureType",VERSION:"1.0.0"},callback:function(e){var t=new OpenLayers.Format.WFSDescribeFeatureType,n=e.responseXML;if(!n||!n.documentElement)n=e.responseText;this.control.wfsCache[this.layer.id]=t.read(n),this.control._queue&&this.control.applySelection()},scope:this})},getGeometryAttributes:function(e){for(var t=[],e=this.wfsCache[e.id],n=0,r=e.featureTypes.length;n<r;n++)for(var i=e.featureTypes[n].properties,s=0,o=i.length;s<o;s++){var u=i[s],a=u.type;(0<=a.indexOf("LineString")||0<=a.indexOf("GeometryAssociationType")||0<=a.indexOf("GeometryPropertyType")||0<=a.indexOf("Point")||0<=a.indexOf("Polygon"))&&t.push(u)}return t},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);if(e)for(var t=0,n=this.layers.length;t<n;t++){var r=this.layers[t];r&&!this.wfsCache[r.id]&&OpenLayers.Request.GET({url:r.url,params:{SERVICE:"WMS",VERSION:r.params.VERSION,LAYERS:r.params.LAYERS,REQUEST:"DescribeLayer"},callback:this.parseDescribeLayer,scope:{layer:r,control:this}})}return e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);if(e)for(var t=0,n=this.layers.length;t<n;t++){var r=this.layers[t];if(r&&!0===this.clearOnDeactivate){var i=this.layerCache,s=i[r.id];s&&(r.events.un({visibilitychanged:this.coupleLayerVisiblity,scope:s}),s.destroy(),delete i[r.id])}}return e},setLayers:function(e){this.active?(this.deactivate(),this.layers=e,this.activate()):this.layers=e},createFilter:function(e,t){var n=null;return this.handler instanceof OpenLayers.Handler.RegularPolygon?n=!0===this.handler.irregular?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:e.name,value:t.getBounds()}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Polygon?n=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Path?n=0<=e.type.indexOf("Point")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Click&&(n=0<=e.type.indexOf("Polygon")?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t})),n},select:function(e){this._queue=function(){for(var t=0,n=this.layers.length;t<n;t++){for(var r=this.layers[t],i=this.getGeometryAttributes(r),s=[],o=0,u=i.length;o<u;o++){var f=i[o];if(null!==f){if(!(e instanceof OpenLayers.Geometry)){var l=this.map.getLonLatFromPixel(e.xy);e=new OpenLayers.Geometry.Point(l.lon,l.lat)}f=this.createFilter(f,e),null!==f&&s.push(f)}}o=this.createSelectionLayer(r),i=this.
createSLD(r,s,i),this.events.triggerEvent("selected",{layer:r,filters:s}),o.mergeNewParams({SLD_BODY:i}),delete this._queue}},this.applySelection()},applySelection:function(){for(var e=!0,t=0,n=this.layers.length;t<n;t++)if(!this.wfsCache[this.layers[t].id]){e=!1;break}e&&this._queue.call(this)},CLASS_NAME:"OpenLayers.Control.SLDSelect"}),OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.element=OpenLayers.Util.getElement(e)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element)),this.map.events.register("moveend",this,this.updateScale),this.updateScale(),this.div},updateScale:function(){var e;if(!0===this.geodesic){if(!this.map.getUnits())return;e=OpenLayers.INCHES_PER_UNIT,e=(this.map.getGeodesicPixelSize().w||1e-6)*e.km*OpenLayers.DOTS_PER_INCH}else e=this.map.getScale();e&&(e=9500<=e&&95e4>=e?Math.round(e/1e3)+"K":95e4<=e?Math.round(e/1e6)+"M":Math.round(e),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:e}))},CLASS_NAME:"OpenLayers.Control.Scale"}),OpenLayers.Control.Button=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){},CLASS_NAME:"OpenLayers.Control.Button"}),OpenLayers.Layer.MapGuide=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,useHttpTile:!1,singleTile:!1,useOverlay:!1,useAsyncOverlay:!0,TILE_PARAMS:{operation:"GETTILEIMAGE",version:"1.2.0"},SINGLE_TILE_PARAMS:{operation:"GETMAPIMAGE",format:"PNG",locale:"en",clip:"1",version:"1.0.0"},OVERLAY_PARAMS:{operation:"GETDYNAMICMAPOVERLAYIMAGE",format:"PNG",locale:"en",clip:"1",version:"2.0.0"},FOLDER_PARAMS:{tileColumnsPerFolder:30,tileRowsPerFolder:30,format:"png",querystring:null},defaultSize:new OpenLayers.Size(300,300),tileOriginCorner:"tl",initialize:function(e,t,n,r){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments);if(null==r||null==r.isBaseLayer)this.isBaseLayer="true"!=this.transparent&&1!=this.transparent;r&&null!=r.useOverlay&&(this.useOverlay=r.useOverlay),this.singleTile?this.useOverlay?(OpenLayers.Util.applyDefaults(this.params,this.OVERLAY_PARAMS),this.useAsyncOverlay||(this.params.version="1.0.0")):OpenLayers.Util.applyDefaults(this.params,this.SINGLE_TILE_PARAMS):(this.useHttpTile?OpenLayers.Util.applyDefaults(this.params,this.FOLDER_PARAMS):OpenLayers.Util.applyDefaults(this.params,this.TILE_PARAMS),this.setTileSize(this.defaultSize))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapGuide(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t;t=e.getCenterLonLat();var n=this.map.getSize();return this.singleTile?(e={setdisplaydpi:OpenLayers.DOTS_PER_INCH,setdisplayheight:n.h*this.ratio,setdisplaywidth:n.w*this.ratio,setviewcenterx:t.lon,setviewcentery:t.lat,setviewscale:this.map.getScale()},this.useOverlay&&!this.useAsyncOverlay&&(t={},t=OpenLayers.Util.extend(t,e),t.operation="GETVISIBLEMAPEXTENT",t.version="1.0.0",t.session=this.params.session,t.mapName=this.params.mapName,t.format="text/xml",t=this.getFullRequestString(t),OpenLayers.Request.GET({url:t,async:!1})),t=this.getFullRequestString(e)):(n=this.map.getResolution(),t=Math.floor((e.left-this.maxExtent.left)/n),t=Math.round(t/this.tileSize.w),e=Math.floor((this.maxExtent.top-e.top)/n),e=Math.round(e/this.tileSize.h),t=this.useHttpTile?this.getImageFilePath({tilecol:t,tilerow:e,scaleindex:this.resolutions.length-this.map.zoom-1}):this.getFullRequestString({tilecol:t,tilerow:e,scaleindex:this.resolutions.length-this.map.zoom-1})),t},getFullRequestString:function(e,t){var n=null==t?this.url:t;"object"==typeof n&&(n=n[Math.floor(Math.random()*n.length)]);var r=n,i=OpenLayers.Util.extend({},this.params),i=OpenLayers.Util.extend(i,e),s=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(n)),o;for(o in i)o.toUpperCase()in s&&delete i[o];return i=OpenLayers.Util.getParameterString(i),i=i.replace(/,/g,"+"),""!=i&&(s=n.charAt(n.length-1),r="&"==s||"?"==s?r+i:-1==n.indexOf("?")?r+("?"+i):r+("&"+i)),r},getImageFilePath:function(e,t){var n=null==t?this.url:t;"object"==typeof n&&(n=n[Math.floor(Math.random()*n.length)]);var r="",i="";return 0>e.tilerow&&(r="-"),r=0==e.tilerow?r+"0":r+Math.floor(Math.abs(e.tilerow/this.params.tileRowsPerFolder))*this.params.tileRowsPerFolder,0>e.tilecol&&(i="-"),i=0==e.tilecol?i+"0":i+Math.floor(Math.abs(e.tilecol/this.params.tileColumnsPerFolder))*this.params.tileColumnsPerFolder,r="/S"+Math.floor(e.scaleindex)+"/"+this.params.basemaplayergroupname+"/R"+r+"/C"+i+"/"+e.tilerow%this.params.tileRowsPerFolder+"_"+e.tilecol%this.params.tileColumnsPerFolder+"."+this.params.format,this.params.querystring&&(r+="?"+this.params.querystring),n+r},calculateGridLayout:function(e,t,n){var r=n*this.tileSize.w,n=n*this.tileSize.h,i=e.left-t.lon,s=Math.floor(i/r)-this.buffer,e=t.lat-e.top+n,o=Math.floor(e/n)-this.buffer;return{tilelon:r,tilelat:n,tileoffsetlon:t.lon+s*r,tileoffsetlat:t.lat-n*o,tileoffsetx:-(i/r-s)*this.tileSize.w,tileoffsety:(o-e/n)*this.tileSize.h}},CLASS_NAME:"OpenLayers.Layer.MapGuide"}),OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{handlerOptions:null,callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]);var n={done:this.measureComplete,point:this.measurePartial};this.immediate&&(n.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(n,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new e(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(e){(this.immediate=e)?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(e,t){var n=this.active;n&&this.deactivate(),this.handler=new e(this,this.callbacks,t),n&&this.activate()},measureComplete:function(e){this.cancelDelay(),this.measure(e,"measure")},measurePartial:function(e,t){this.cancelDelay(),t=t.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(t,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(t,"measurepartial")},this),this.partialDelay)},measureImmediate:function(e,t,n){n&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(t.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(e,t){var n,r;-1<e.CLASS_NAME.indexOf("LineString")?(n=this.getBestLength(e),r=1):(n=this.getBestArea(e),r=2),this.events.triggerEvent(t,{measure:n[0],units:n[1],order:r,geometry:e})},getBestArea:function(e){for(var t=this.displaySystemUnits[this.displaySystem],n,r,i=0,s=t.length;i<s&&!(n=t[i],r=this.getArea(e,n),1<r);++i);return[r,n]},getArea:function(e,t){var n,r;this.geodesic?(n=e.getGeodesicArea(this.map.getProjectionObject()),r="m"):(n=e.getArea(),r=this.map.getUnits());var i=OpenLayers.INCHES_PER_UNIT[t];return i&&(n*=Math.pow(OpenLayers.INCHES_PER_UNIT[r]/i,2)),n},getBestLength:function(e){for(var t=this.displaySystemUnits[this.displaySystem],n,r,i=0,s=t.length;i<s&&!(n=t[i],r=this.getLength(e,n),1<r);++i);return[r,n]},getLength:function(e,t){var n,r;this.geodesic?(n=e.getGeodesicLength(this.map.getProjectionObject()),r="m"):(n=e.getLength(),r=this.map.getUnits());var i=OpenLayers.INCHES_PER_UNIT[t];return i&&(n*=OpenLayers.INCHES_PER_UNIT[r]/i),n},CLASS_NAME:"OpenLayers.Control.Measure"}),OpenLayers.Format.WMC.v1_0_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_wmc_SRS:function(e,t){var n=this.getChildValue(t);"object"!=typeof e.projections&&(e.projections={});for(var n=n.split(/ +/),r=0,i=n.length;r<i;r++)e.projections[n[r]]=!0},write_wmc_Layer:function(e){var t=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.srs){var n=[],r;for(r in e.srs)n.push(r);t.appendChild(this.createElementDefaultNS("SRS",n.join(" ")))}t.appendChild(this.write_wmc_FormatList(e)),t.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&t.appendChild(this.write_wmc_DimensionList(e)),t.appendChild(this.write_wmc_LayerExtension(e))},CLASS_NAME:"OpenLayers.Format.WMC.v1_0_0"}),OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(e,t,n,r,i,s,o){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,s&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.isAlphaImage=this.imageSize=this.imageSrc=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(){},setBorder:function(){},setOpacity:function(){},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){this.padding=this.positionBlocks[this.relativePosition].padding;if(this.closeDiv){var e=this.getContentDivPadding();this.closeDiv.style.right=e.right+this.padding.right+"px",this.closeDiv.style.top=e.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(e){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t=t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var e=null,t;for(t in this.positionBlocks){e=t;break}e=this.positionBlocks[e];for(t=0;t<e.blocks.length;t++){var n={};this.blocks.push(n),n.div=OpenLayers.Util.createDiv(this.id+"_FrameDecorationDiv_"+t,null,null,null,"absolute",null,"hidden",null),n.image=(this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage)(this.id+"_FrameDecorationImg_"+t,null,this.imageSize,this.imageSrc,"absolute",null,null,null),n.div.appendChild(n.image),this.groupDiv.appendChild(n.div)}},updateBlocks:function(){this.blocks||this.createBlocks();if(this.size&&this.relativePosition){for(var e=this.positionBlocks[this.relativePosition],t=0;t<e.blocks.length;t++){var n=e.blocks[t],r=this.blocks[t],i=n.anchor.left,s=n.anchor.bottom,o=n.anchor.right,u=n.anchor.top,a=isNaN(n.size.w)?this.size.w-(o+i):n.size.w,f=isNaN(n.size.h)?this.size.h-(s+u):n.size.h;r.div.style.width=(0>a?0:a)+"px",r.div.style.height=(0>f?0:f)+"px",r.div.style.left=null!=i?i+"px":"",r.div.style.bottom=null!=s?s+"px":"",r.div.style.right=null!=o?o+"px":"",r.div.style.top=null!=u?u+"px":"",r.image.style.left=n.position.x+"px",r.image.style.top=n.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(e,t,n,r,i,s,o){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),OpenLayers.Tile.Image.IFrame={useIFrame:null,draw:function(){if(OpenLayers.Tile.Image.prototype.shouldDraw.call(this)){var e=this.layer.getURL(this.bounds),t=this.useIFrame;this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&e.length>this.maxGetUrlLength,e=t&&!this.useIFrame,t=!t&&this.useIFrame;if(e||t)this.imgDiv&&this.imgDiv.parentNode===this.frame&&this.frame.removeChild(this.imgDiv),this.imgDiv=null,e?(this.blankImageUrl=this._blankImageUrl,this.frame.removeChild(this.frame.firstChild)):(this._blankImageUrl=this.blankImageUrl,this.blankImageUrl="about:blank")}return OpenLayers.Tile.Image.prototype.draw.apply(this,arguments)},getImage:function(){if(!0===this.useIFrame){if(!this.frame.childNodes.length){var e=document.createElement("div"),t=e.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex=1,t.backgroundImage="url("+this._blankImageUrl+")",this.frame.appendChild(e)}return e=this.id+"_iFrame",9>parseFloat(navigator.appVersion.split("MSIE")[1])?(t=document.createElement('<iframe name="'+e+'">'),t.style.backgroundColor="#FFFFFF",t.style.filter="chroma(color=#FFFFFF)"):(t=document.createElement("iframe"),t.style.backgroundColor="transparent",t.name=e),t.scrolling="no",t.marginWidth="0px",t.marginHeight="0px",t.frameBorder="0",t.style.position="absolute",t.style.width="100%",t.style.height="100%",1>this.layer.opacity&&OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,this.layer.opacity),this.frame.appendChild(t),this.imgDiv=t}return OpenLayers.Tile.Image.prototype.getImage.apply(this,arguments)},createRequestForm:function(){var e=document.createElement("form");e.method="POST";var t=this.layer.params._OLSALT,t=(t?t+"_":"")+this.bounds.toBBOX();e.action=OpenLayers.Util.urlAppend(this.layer.url,t),e.target=this.id+"_iFrame",this.layer.getImageSize();var t=OpenLayers.Util.getParameters(this.url),n,r;for(r in t)n=document.createElement("input"),n.type="hidden",n.name=r,n.value=t[r],e.appendChild(n);return e},setImgSrc:function(e){if(!0===this.useIFrame)if(e){var t=this.createRequestForm();this.frame.appendChild(t),t.submit(),this.frame.removeChild(t)}else this.imgDiv.parentNode===this.frame&&(this.frame.removeChild(this.imgDiv),this.imgDiv=null);else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this,arguments)},onImageLoad:function(){OpenLayers.Tile.Image.prototype.onImageLoad.apply(this,arguments),!0===this.useIFrame&&(this.imgDiv.style.opacity=1,this.frame.style.opacity=this.layer.opacity)},createBackBuffer:function(){var e;return!1===this.useIFrame&&(e=OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)),e}},OpenLayers.Format.SOSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.SOSCapabilities"}),OpenLayers.Format.SOSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.SOSCapabilities,{namespaces:{ows:"http://www.opengis.net/ows/1.1",sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{gml:OpenLayers.Util.applyDefaults({name:function(e,t){t.name=this.getChildValue(e)},TimePeriod:function(e,t){t.timePeriod={},this.readChildNodes(e,t.timePeriod)},beginPosition:function(e,t){t.beginPosition=this.getChildValue(e)},endPosition:function(e,t){t.endPosition=this.getChildValue(e)}},OpenLayers.Format.GML.v3.prototype.readers.gml),sos:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},this.readChildNodes(e,t.contents)},ObservationOfferingList:function(e,t){t.offeringList={},this.readChildNodes(e,t.offeringList)},ObservationOffering:function(e,t){var n=this.getAttributeNS(e,this.namespaces.gml,"id");t[n]={procedures:[],observedProperties:[],featureOfInterestIds:[],responseFormats:[],resultModels:[],responseModes:[]},this.readChildNodes(e,t[n])},time:function(e,t){t.time={},this.readChildNodes(e,t.time)},procedure:function(e,t){t.procedures.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},observedProperty:function(e,t){t.observedProperties.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},featureOfInterest:function(e,t){t.featureOfInterestIds.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},responseFormat:function(e,t){t.responseFormats.push(this.getChildValue(e))},resultModel:function(e,t){t.resultModels.push(this.getChildValue(e))},responseMode:function(e,t){t.responseModes.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.SOSCapabilities.v1_0_0"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(e){var t=!0;return this.pinching=!1,OpenLayers.Event.isMultiTouch(e)?(this.started=!0,this.last=this.start={distance:this.getDistance(e.touches),delta:0,scale:1},this.callback("start",[e,this.start]),t=!this.stopDown):(this.started=!1,this.last=this.start=null),OpenLayers.Event.stop(e),t},touchmove:function(e){if(this.started&&OpenLayers.Event.isMultiTouch(e)){this.pinching=!0;var t=this.getPinchData(e);this.callback("move",[e,t]),this.last=t,OpenLayers.Event.stop(e)}return!0},touchend:function(e){return this.started&&(this.pinching=this.started=!1,this.callback("done",[e,this.start,this.last]),this.last=this.start=null),!0},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=!1,this.last=this.start=null,e=!0),e},getDistance:function(e){var t=e[0],e=e[1];return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))},getPinchData:function(e){return e=this.getDistance(e.touches),{distance:e,delta:this.last.distance-e,scale:e/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.Navigation,new OpenLayers.Control.ZoomBox])},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.NavToolbar"}),OpenLayers.Strategy.Refresh=OpenLayers.Class(OpenLayers.Strategy,{force:!1,interval:0,timer:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&(!0===this.layer.visibility&&this.start(),this.layer.events.on({visibilitychanged:this.reset,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.stop(),e},reset:function(){!0===this.layer.visibility?this.start():this.stop()},start:function(){this.interval&&"number"==typeof this.interval&&0<this.interval&&(this.timer=window.setInterval(OpenLayers.Function.bind(this.refresh,this),this.interval))},refresh:function(){this.layer&&this.layer.refresh&&"function"==typeof this.layer.refresh&&this.layer.refresh({force:this.force})},stop:function(){null!==this.timer&&(window.clearInterval(this.timer),this.timer=null)},CLASS_NAME:"OpenLayers.Strategy.Refresh"}),OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(e,t,n,r){var i=[],n=OpenLayers.Util.upperCaseObject(n);i.push(e,t,n,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,i),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));if(this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()){if(null==r||!r.isBaseLayer)this.isBaseLayer=!1;"jpg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png")}},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var e=this.adjustBounds(e),t=this.projection.getCode().split(":"),t=t[t.length-1],n=this.getImageSize(),e={BBOX:e.toBBOX(),SIZE:n.w+","+n.h,F:"image",BBOXSR:t,IMAGESR:t};if(this.layerDefs){var t=[],r;for(r in this.layerDefs)this.layerDefs.hasOwnProperty(r)&&this.layerDefs[r]&&(t.push(r),t.push(":"),t.push(this.layerDefs[r]),t.push(";"));0<t.length&&(e.LAYERDEFS=t.join(""))}return this.getFullRequestString(e)},setLayerFilter:function(e,t){this.layerDefs||(this.layerDefs={}),t?this.layerDefs[e]=t:delete this.layerDefs[e]},clearLayerFilter:function(e){e?delete this.layerDefs[e]:delete this.layerDefs},mergeNewParams:function(e){return e=[OpenLayers.Util.upperCaseObject(e)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,e)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"}),OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(e){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){var t,n,e=e.replace(/[\n\r]/g," ");if(n=this.regExes.typeStr.exec(e))if(e=n[1].toLowerCase(),n=n[2],this.parse[e]&&(t=this.parse[e].apply(this,[n])),this.internalProjection&&this.externalProjection)if(t&&"OpenLayers.Feature.Vector"==t.CLASS_NAME)t.geometry.transform(this.externalProjection,this.internalProjection);else if(t&&"geometrycollection"!=e&&"object"==typeof t){e=0;for(n=t.length;e<n;e++)t[e].geometry.transform(this.externalProjection,this.internalProjection)}return t},write:function(e){var t,n;e.constructor==Array?n=!0:(e=[e],n=!1);var r=[];n&&r.push("GEOMETRYCOLLECTION(");for(var i=0,s=e.length;i<s;++i)n&&0<i&&r.push(","),t=e[i].geometry,r.push(this.extractGeometry(t));return n&&r.push(")"),r.join("")},extractGeometry:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?(this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection)),("collection"==t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")"):null},extract:{point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.components[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.components[n]])+")");return t.join(",")},collection:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.components[n]]));return t.join(",")}},parse:{point:function(e){return e=OpenLayers.String.trim(e).split(this.regExes.spaces),new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e[0],e[1]))},multipoint:function(e){for(var t=OpenLayers.String.trim(e).split(","),n=[],r=0,i=t.length;r<i;++r)e=t[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(n))},linestring:function(e){for(var e=OpenLayers.String.trim(e).split(","),t=[],n=0,r=e.length;n<r;++n)t.push(this.parse.point.apply(this,[e[n]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(t))},multilinestring:function(e){for(var t=OpenLayers.String.trim(e).split(this.regExes.parenComma),n=[],r=0,i=t.length;r<i;++r)e=t[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(n))},polygon:function(e){for(var t,e=OpenLayers.String.trim(e).split(this.regExes.parenComma),n=[],r=0,i=e.length;r<i;++r)t=e[r].replace(this.regExes.trimParens,"$1"),t=this.parse.linestring.apply(this,[t]).geometry,t=new OpenLayers.Geometry.LinearRing(t.components),n.push(t);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(n))},multipolygon:function(e){for(var t=OpenLayers.String.trim(e).split(this.regExes.doubleParenComma),n=[],r=0,i=t.length;r<i;++r)e=t[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(n))},geometrycollection:function(e){for(var e=e.replace(/,\s*([A-Za-z])/g,"|$1"),e=OpenLayers.String.trim(e).split("|"),t=[],n=0,r=e.length;n<r;++n)t.push(OpenLayers.Format.WKT.prototype.read.apply(this,[e[n]]));return t}},CLASS_NAME:"OpenLayers.Format.WKT"}),OpenLayers.Handler.Hover=OpenLayers.Class(OpenLayers.Handler,{delay:500,pixelTolerance:null,stopMove:!1,px:null,timerId:null,mousemove:function(e){return this.passesTolerance(e.xy)&&(this.clearTimer(),this.callback("move",[e]),this.px=e.xy,e=OpenLayers.Util.extend({},e),this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)),!this.stopMove},mouseout:function(e){return OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.clearTimer(),this.callback("move",[e])),!0},passesTolerance:function(e){var t=!0;return this.pixelTolerance&&this.px&&Math.sqrt(Math.pow(this.px.x-e.x,2)+Math.pow(this.px.y-e.y,2))<this.pixelTolerance&&(t=!1),t},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null)},delayedCall:function(e){this.callback("pause",[e])},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),e=!0),e},CLASS_NAME:"OpenLayers.Handler.Hover"}),OpenLayers.Control.GetFeature=OpenLayers.Class(OpenLayers.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,maxFeatures:10,features:null,hoverFeature:null,handlerOptions:null,handlers:null,hoverResponse:null,filterType:OpenLayers.Filter.Spatial.BBOX,initialize:function(e){e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.features={},this.handlers={},this.click&&(this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{})),this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},OpenLayers.Util.extend(this.handlerOptions.box,{boxDivClassName:"olHandlerBoxSelectFeature"}))),this.hover&&(this.handlers.hover=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},OpenLayers.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var e in this.handlers)this.handlers[e].activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var e in this.handlers)this.handlers[e].deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(e){var t=this.pixelToBounds(e.xy);this.setModifiers(e),this.request(t,{single:this.single})},selectBox:function(e){var t;if(e instanceof OpenLayers.Bounds)t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat);else{if(this.click)return;t=this.pixelToBounds(e)}this.setModifiers(this.handlers.box.dragHandler.evt),this.request(t)},selectHover:function(e){this.request(this.pixelToBounds(e.xy),{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"))},request:function(e,t){var t=t||{},n=new OpenLayers.Filter.Spatial({type:this.filterType,value:e});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),n=this.protocol.read({maxFeatures:1==t.single?this.maxFeatures:void 0,filter:n,callback:function(n){n.success()&&(n.features.length?1==t.single?this.selectBestFeature(n.features,e.getCenterLonLat(),t):this.select(n.features):t.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll())),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},scope:this}),1==t.hover&&(this.hoverResponse=n)},selectBestFeature:function(e,t,n){n=n||{};if(e.length){for(var t=new OpenLayers.Geometry.Point(t.lon,t.lat),r,i,s,o=Number.MAX_VALUE,u=0;u<e.length&&!(r=e[u],r.geometry&&(s=t.distanceTo(r.geometry,{edge:!1}),s<o&&(o=s,i=r,0==o)));++u);1==n.hover?this.hoverSelect(i):this.select(i||e)}},setModifiers:function(e){this.modifiers={multiple:this.multiple||this.multipleKey&&e[this.multipleKey],toggle:this.toggle||this.toggleKey&&e[this.toggleKey]}},select:function(
e){!this.modifiers.multiple&&!this.modifiers.toggle&&this.unselectAll(),OpenLayers.Util.isArray(e)||(e=[e]);var t=this.events.triggerEvent("beforefeaturesselected",{features:e});if(!1!==t){for(var n=[],r,i=0,s=e.length;i<s;++i)r=e[i],this.features[r.fid||r.id]?this.modifiers.toggle&&this.unselect(this.features[r.fid||r.id]):(t=this.events.triggerEvent("beforefeatureselected",{feature:r}),!1!==t&&(this.features[r.fid||r.id]=r,n.push(r),this.events.triggerEvent("featureselected",{feature:r})));this.events.triggerEvent("featuresselected",{features:n})}},hoverSelect:function(e){var t=e?e.fid||e.id:null,n=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:null;n&&n!=t&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null),t&&t!=n&&(this.events.triggerEvent("hoverfeature",{feature:e}),this.hoverFeature=e)},unselect:function(e){delete this.features[e.fid||e.id],this.events.triggerEvent("featureunselected",{feature:e})},unselectAll:function(){for(var e in this.features)this.unselect(this.features[e])},setMap:function(e){for(var t in this.handlers)this.handlers[t].setMap(e);OpenLayers.Control.prototype.setMap.apply(this,arguments)},pixelToBounds:function(e){var t=e.add(-this.clickTolerance/2,this.clickTolerance/2),e=e.add(this.clickTolerance/2,-this.clickTolerance/2),t=this.map.getLonLatFromPixel(t),e=this.map.getLonLatFromPixel(e);return new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat)},CLASS_NAME:"OpenLayers.Control.GetFeature"}),OpenLayers.Format.QueryStringFilter=function(){function e(e){return e=e.replace(/%/g,"\\%"),e=e.replace(/\\\\\.(\*)?/g,function(e,t){return t?e:"\\\\_"}),e=e.replace(/\\\\\.\*/g,"\\\\%"),e=e.replace(/(\\)?\.(\*)?/g,function(e,t,n){return t||n?e:"_"}),e=e.replace(/(\\)?\.\*/g,function(e,t){return t?e:"%"}),e=e.replace(/\\\./g,"."),e=e.replace(/(\\)?\\\*/g,function(e,t){return t?e:"*"})}var t={};return t[OpenLayers.Filter.Comparison.EQUAL_TO]="eq",t[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne",t[OpenLayers.Filter.Comparison.LESS_THAN]="lt",t[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte",t[OpenLayers.Filter.Comparison.GREATER_THAN]="gt",t[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte",t[OpenLayers.Filter.Comparison.LIKE]="ilike",OpenLayers.Class(OpenLayers.Format,{wildcarded:!1,srsInBBOX:!1,write:function(n,r){var r=r||{},i=n.CLASS_NAME,i=i.substring(i.lastIndexOf(".")+1);switch(i){case"Spatial":switch(n.type){case OpenLayers.Filter.Spatial.BBOX:r.bbox=n.value.toArray(),this.srsInBBOX&&n.projection&&r.bbox.push(n.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:r.tolerance=n.distance;case OpenLayers.Filter.Spatial.WITHIN:r.lon=n.value.x,r.lat=n.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+n.type)}break;case"Comparison":i=t[n.type];if(void 0!==i){var s=n.value;n.type==OpenLayers.Filter.Comparison.LIKE&&(s=e(s),this.wildcarded&&(s="%"+s+"%")),r[n.property+"__"+i]=s,r.queryable=r.queryable||[],r.queryable.push(n.property)}else OpenLayers.Console.warn("Unknown comparison filter type "+n.type);break;case"Logical":if(n.type===OpenLayers.Filter.Logical.AND){i=0;for(s=n.filters.length;i<s;i++)r=this.write(n.filters[i],r)}else OpenLayers.Console.warn("Unsupported logical filter type "+n.type);break;default:OpenLayers.Console.warn("Unknown filter type "+i)}return r},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}(),OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0):!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(e){var t;if(null==e)this.reset();else if(null==this.lastXy||Math.abs(e.xy.x-this.lastXy.x)>this.granularity||Math.abs(e.xy.y-this.lastXy.y)>this.granularity)this.lastXy=e.xy;else if(t=this.map.getLonLatFromPixel(e.xy))this.displayProjection&&t.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=e.xy,e=this.formatOutput(t),e!=this.element.innerHTML&&(this.element.innerHTML=e)},reset:function(){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(e){var t=parseInt(this.numDigits);return this.prefix+e.lon.toFixed(t)+this.separator+e.lat.toFixed(t)+this.suffix},CLASS_NAME:"OpenLayers.Control.MousePosition"}),OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:navigator.geolocation,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.geolocation?OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):!1:(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(e){var t=(new OpenLayers.LonLat(e.coords.longitude,e.coords.latitude)).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(t),this.events.triggerEvent("locationupdated",{position:e,point:new OpenLayers.Geometry.Point(t.lon,t.lat)})},getCurrentLocation:function(){return!this.active||this.watch?!1:(this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(e){this.events.triggerEvent("locationfailed",{error:e})},CLASS_NAME:"OpenLayers.Control.Geolocate"}),OpenLayers.Tile.UTFGrid=OpenLayers.Class(OpenLayers.Tile,{url:null,utfgridResolution:2,json:null,format:null,destroy:function(){this.clear(),OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(e)if(this.isLoading?(this.abortLoading(),this.events.triggerEvent("reload")):(this.isLoading=!0,this.events.triggerEvent("loadstart")),this.url=this.layer.getURL(this.bounds),this.layer.useJSONP){var t=new OpenLayers.Protocol.Script({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),this.json=e.data},scope:this});t.read(),this.request=t}else this.request=OpenLayers.Request.GET({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),e.status===200&&this.parseData(e.responseText)},scope:this});else this.unload();return e},abortLoading:function(){this.request&&(this.request.abort(),delete this.request),this.isLoading=!1},getFeatureInfo:function(e,t){var n=null;if(this.json){var r=this.getFeatureId(e,t);null!==r&&(n={id:r,data:this.json.data[r]})}return n},getFeatureId:function(e,t){var n=null;if(this.json){var r=this.utfgridResolution,r=this.indexFromCharCode(this.json.grid[Math.floor(t/r)].charCodeAt(Math.floor(e/r))),i=this.json.keys;!isNaN(r)&&r in i&&(n=i[r])}return n},indexFromCharCode:function(e){return 93<=e&&e--,35<=e&&e--,e-32},parseData:function(e){this.format||(this.format=new OpenLayers.Format.JSON),this.json=this.format.read(e)},clear:function(){this.json=null},CLASS_NAME:"OpenLayers.Tile.UTFGrid"}),OpenLayers.Control.NavigationHistory=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOGGLE,previous:null,previousOptions:null,next:null,nextOptions:null,limit:50,autoActivate:!0,clearOnDeactivate:!1,registry:null,nextStack:null,previousStack:null,listeners:null,restoring:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.registry=OpenLayers.Util.extend({moveend:this.getState},this.registry),e={trigger:OpenLayers.Function.bind(this.previousTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Previous"},OpenLayers.Util.extend(e,this.previousOptions),this.previous=new OpenLayers.Control.Button(e),e={trigger:OpenLayers.Function.bind(this.nextTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Next"},OpenLayers.Util.extend(e,this.nextOptions),this.next=new OpenLayers.Control.Button(e),this.clear()},onPreviousChange:function(e){e&&!this.previous.active?this.previous.activate():!e&&this.previous.active&&this.previous.deactivate()},onNextChange:function(e){e&&!this.next.active?this.next.activate():!e&&this.next.active&&this.next.deactivate()},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this),this.previous.destroy(),this.next.destroy(),this.deactivate();for(var e in this)this[e]=null},setMap:function(e){this.map=e,this.next.setMap(e),this.previous.setMap(e)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments),this.next.draw(),this.previous.draw()},previousTrigger:function(){var e=this.previousStack.shift(),t=this.previousStack.shift();return void 0!=t?(this.nextStack.unshift(e),this.previousStack.unshift(t),this.restoring=!0,this.restore(t),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)):this.previousStack.unshift(e),t},nextTrigger:function(){var e=this.nextStack.shift();return void 0!=e&&(this.previousStack.unshift(e),this.restoring=!0,this.restore(e),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)),e},clear:function(){this.previousStack=[],this.previous.deactivate(),this.nextStack=[],this.next.deactivate()},getState:function(){return{center:this.map.getCenter(),resolution:this.map.getResolution(),projection:this.map.getProjectionObject(),units:this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units}},restore:function(e){var t,n;if(this.map.getProjectionObject()==e.projection)n=this.map.getZoomForResolution(e.resolution),t=e.center;else{t=e.center.clone(),t.transform(e.projection,this.map.getProjectionObject()),n=e.units;var r=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;n=this.map.getZoomForResolution((n&&r?OpenLayers.INCHES_PER_UNIT[n]/OpenLayers.INCHES_PER_UNIT[r]:1)*e.resolution)}this.map.setCenter(t,n)},setListeners:function(){this.listeners={};for(var e in this.registry)this.listeners[e]=OpenLayers.Function.bind(function(){return this.restoring||(this.previousStack.unshift(this.registry[e].apply(this,arguments)),1<this.previousStack.length&&this.onPreviousChange(this.previousStack[1],this.previousStack.length-1),this.previousStack.length>this.limit+1&&this.previousStack.pop(),0<this.nextStack.length&&(this.nextStack=[],this.onNextChange(null,0))),!0},this)},activate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.activate.apply(this)){null==this.listeners&&this.setListeners();for(var t in this.listeners)this.map.events.register(t,this,this.listeners[t]);e=!0,0==this.previousStack.length&&this.initStack()}return e},initStack:function(){this.map.getCenter()&&this.listeners.moveend()},deactivate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.deactivate.apply(this)){for(var t in this.listeners)this.map.events.unregister(t,this,this.listeners[t]);this.clearOnDeactivate&&this.clear(),e=!0}return e},CLASS_NAME:"OpenLayers.Control.NavigationHistory"}),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(e){e=e||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments);if(!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,n){return t.write(e,n)}}},destroy:function(){this.headers=this.params=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=e||{},e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e=OpenLayers.Util.applyDefaults(e,this.options),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=void 0!==e.readWithPOST?e.readWithPOST:this.readWithPOST,n=new OpenLayers.Protocol.Response({requestType:"read"});return t?(t=e.headers||{},t["Content-Type"]="application/x-www-form-urlencoded",n.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,n,e),data:OpenLayers.Util.getParameterString(e.params),headers:t})):n.priv=OpenLayers.Request.GET({url:e.url,callback:this.createCallback(this.handleRead,n,e),params:e.params,headers:e.headers}),n},handleRead:function(e,t){this.handleResponse(e,t)},create:function(e,t){var t=OpenLayers.Util.applyDefaults(t,this.options),n=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"create"});return n.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,n,t),headers:t.headers,data:this.format.write(e)}),n},handleCreate:function(e,t){this.handleResponse(e,t)},update:function(e,t){var t=t||{},n=t.url||e.url||this.options.url+"/"+e.fid,t=OpenLayers.Util.applyDefaults(t,this.options),r=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"update"});return r.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:n,callback:this.createCallback(this.handleUpdate,r,t),headers:t.headers,data:this.format.write(e)}),r},handleUpdate:function(e,t){this.handleResponse(e,t)},"delete":function(e,t){var t=t||{},n=t.url||e.url||this.options.url+"/"+e.fid,t=OpenLayers.Util.applyDefaults(t,this.options),r=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"delete"}),i=this.deleteWithPOST?"POST":"DELETE",n={url:n,callback:this.createCallback(this.handleDelete,r,t),headers:t.headers};return this.deleteWithPOST&&(n.data=this.format.write(e)),r.priv=OpenLayers.Request[i](n),r},handleDelete:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){var n=e.priv;t.callback&&(200<=n.status&&300>n.status?("delete"!=e.requestType&&(e.features=this.parseFeatures(n)),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;if(!t||!t.documentElement)t=e.responseText;return!t||0>=t.length?null:this.format.read(t)},commit:function(e,t){function n(e){for(var t=e.features?e.features.length:0,n=Array(t),i=0;i<t;++i)n[i]=e.features[i].fid;d.insertIds=n,r.apply(this,[e])}function r(e){this.callUserCallback(e,t),p=p&&e.success(),s++,s>=h&&t.callback&&(d.code=p?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[d]))}var t=OpenLayers.Util.applyDefaults(t,this.options),i=[],s=0,o={};o[OpenLayers.State.INSERT]=[],o[OpenLayers.State.UPDATE]=[],o[OpenLayers.State.DELETE]=[];for(var u,a,f=[],l=0,c=e.length;l<c;++l)if(u=e[l],a=o[u.state])a.push(u),f.push(u);var h=(0<o[OpenLayers.State.INSERT].length?1:0)+o[OpenLayers.State.UPDATE].length+o[OpenLayers.State.DELETE].length,p=!0,d=new OpenLayers.Protocol.Response({reqFeatures:f});u=o[OpenLayers.State.INSERT],0<u.length&&i.push(this.create(u,OpenLayers.Util.applyDefaults({callback:n,scope:this},t.create))),u=o[OpenLayers.State.UPDATE];for(l=u.length-1;0<=l;--l)i.push(this.update(u[l],OpenLayers.Util.applyDefaults({callback:r,scope:this},t.update)));u=o[OpenLayers.State.DELETE];for(l=u.length-1;0<=l;--l)i.push(this["delete"](u[l],OpenLayers.Util.applyDefaults({callback:r,scope:this},t["delete"])));return i},abort:function(e){e&&e.priv.abort()},callUserCallback:function(e,t){var n=t[e.requestType];n&&n.callback&&n.callback.call(n.scope,e)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.Strategy.Cluster=OpenLayers.Class(OpenLayers.Strategy,{distance:20,threshold:null,features:null,clusters:null,clustering:!1,resolution:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,moveend:this.cluster,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,moveend:this.cluster,scope:this})),e},cacheFeatures:function(e){var t=!0;return this.clustering||(this.clearCache(),this.features=e.features,this.cluster(),t=!1),t},clearCache:function(){this.features=null},cluster:function(e){if((!e||e.zoomChanged)&&this.features)if(e=this.layer.map.getResolution(),e!=this.resolution||!this.clustersExist()){this.resolution=e;for(var e=[],t,n,r,i=0;i<this.features.length;++i)if(t=this.features[i],t.geometry){n=!1;for(var s=e.length-1;0<=s;--s)if(r=e[s],this.shouldCluster(r,t)){this.addToCluster(r,t),n=!0;break}n||e.push(this.createCluster(this.features[i]))}this.layer.removeAllFeatures();if(0<e.length){if(1<this.threshold){t=e.slice(),e=[],i=0;for(r=t.length;i<r;++i)n=t[i],n.attributes.count<this.threshold?Array.prototype.push.apply(e,n.cluster):e.push(n)}this.clustering=!0,this.layer.addFeatures(e),this.clustering=!1}this.clusters=e}},clustersExist:function(){var e=!1;if(this.clusters&&0<this.clusters.length&&this.clusters.length==this.layer.features.length)for(var e=!0,t=0;t<this.clusters.length;++t)if(this.clusters[t]!=this.layer.features[t]){e=!1;break}return e},shouldCluster:function(e,t){var n=e.geometry.getBounds().getCenterLonLat(),r=t.geometry.getBounds().getCenterLonLat();return Math.sqrt(Math.pow(n.lon-r.lon,2)+Math.pow(n.lat-r.lat,2))/this.resolution<=this.distance},addToCluster:function(e,t){e.cluster.push(t),e.attributes.count+=1},createCluster:function(e){var t=e.geometry.getBounds().getCenterLonLat(),t=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat),{count:1});return t.cluster=[e],t},CLASS_NAME:"OpenLayers.Strategy.Cluster"}),OpenLayers.Strategy.Filter=OpenLayers.Class(OpenLayers.Strategy,{filter:null,cache:null,caching:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.cache=[],this.layer.events.on({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this})),e},deactivate:function(){return this.cache=null,this.layer&&this.layer.events&&this.layer.events.un({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this}),OpenLayers.Strategy.prototype.deactivate.apply(this,arguments)},handleAdd:function(e){if(!this.caching&&this.filter){var t=e.features;e.features=[];for(var n,r=0,i=t.length;r<i;++r)n=t[r],this.filter.evaluate(n)?e.features.push(n):this.cache.push(n)}},handleRemove:function(){this.caching||(this.cache=[])},setFilter:function(e){this.filter=e,e=this.cache,this.cache=[],this.handleAdd({features:this.layer.features}),0<this.cache.length&&(this.caching=!0,this.layer.removeFeatures(this.cache.slice()),this.caching=!1),0<e.length&&(e={features:e},this.handleAdd(e),0<e.features.length&&(this.caching=!0,this.layer.addFeatures(e.features),this.caching=!1))},CLASS_NAME:"OpenLayers.Strategy.Filter"}),OpenLayers.Protocol.SOS=function(e){var e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.SOS.DEFAULTS),t=OpenLayers.Protocol.SOS["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported SOS version: "+e.version;return new t(e)},OpenLayers.Protocol.SOS.DEFAULTS={version:"1.0.0"},OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(e,t){var n=[],r={};this.readChildNodes(e,{complexTypes:n,customTypes:r});for(var i=e.attributes,s,o,u=0,a=i.length;u<a;++u)s=i[u],o=s.name,0==o.indexOf("xmlns")?this.setNamespace(o.split(":")[1]||"",s.value):t[o]=s.value;t.featureTypes=n,t.targetPrefix=this.namespaceAlias[t.targetNamespace],u=0;for(a=n.length;u<a;++u)i=n[u],s=r[i.typeName],r[i.typeName]&&(i.typeName=s.name)},complexType:function(e,t){var n={typeName:e.getAttribute("name")};this.readChildNodes(e,n),t.complexTypes.push(n)},complexContent:function(e,t){this.readChildNodes(e,t)},extension:function(e,t){this.readChildNodes(e,t)},sequence:function(e,t){var n={elements:[]};this.readChildNodes(e,n),t.properties=n.elements},element:function(e,t){if(t.elements){for(var n={},r=e.attributes,i,s=0,o=r.length;s<o;++s)i=r[s],n[i.name]=i.value;r=n.type,r||(r={},this.readChildNodes(e,r),n.restriction=r,n.type=r.base),n.localType=(r.base||r).split(":").pop(),t.elements.push(n)}t.complexTypes&&(r=e.getAttribute("type"),n=r.split(":").pop(),t.customTypes[n]={name:e.getAttribute("name"),type:r})},simpleType:function(e,t){this.readChildNodes(e,t)},restriction:function(e,t){t.base=e.getAttribute("base"),this.readRestriction(e,t)}}},readRestriction:function(e,t){for(var n=e.childNodes,r,i,s=0,o=n.length;s<o;++s)r=n[s],1==r.nodeType&&(i=r.nodeName.split(":").pop(),r=r.getAttribute("value"),t[i]?("string"==typeof t[i]&&(t[i]=[t[i]]),t[i].push(r)):t[i]=r)},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"}),OpenLayers.Format.GeoRSS=OpenLayers.Class(OpenLayers.Format.XML,{rssns:"http://backend.userland.com/rss2",featureNS:"http://mapserver.gis.umn.edu/mapserver",georssns:"http://www.georss.org/georss",geons:"http://www.w3.org/2003/01/geo/wgs84_pos#",featureTitle:"Untitled",featureDescription:"No Description",gmlParser:null,xy:!1,createGeometryFromItem:function(e){var t=this.getElementsByTagNameNS(e,this.georssns,"point"),n=this.getElementsByTagNameNS(e,this.geons,"lat"),r=this.getElementsByTagNameNS(e,this.geons,"long"),i=this.getElementsByTagNameNS(e,this.georssns,"line"),s=this.getElementsByTagNameNS(e,this.georssns,"polygon"),o=this.getElementsByTagNameNS(e,this.georssns,"where"),e=this.getElementsByTagNameNS(e,this.georssns,"box");if(0<t.length||0<n.length&&0<r.length){0<t.length?(n=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/),2!=n.length&&(n=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/))):n=[parseFloat(n[0].firstChild.nodeValue),parseFloat(r[0].firstChild.nodeValue)];var u=new OpenLayers.Geometry.Point(n[1],n[0])}else if(0<i.length){n=OpenLayers.String.trim(this.getChildValue(i[0])).split(/\s+/),r=[],i=0;for(s=n.length;i<s;i+=2)t=new OpenLayers.Geometry.Point(n[i+1],n[i]),r.push(t);u=new OpenLayers.Geometry.LineString(r)}else if(0<s.length){n=OpenLayers.String.trim(this.getChildValue(s[0])).split(/\s+/),r=[],i=0;for(s=n.length;i<s;i+=2)t=new OpenLayers.Geometry.Point(n[i+1],n[i]),r.push(t);u=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(r)])}else 0<o.length?(this.gmlParser||(this.gmlParser=new OpenLayers.Format.GML({xy:this.xy})),u=this.gmlParser.parseFeature(o[0]).geometry):0<e.length&&(n=OpenLayers.String.trim(e[0].firstChild.nodeValue).split(/\s+/),r=[],3<n.length&&(t=new OpenLayers.Geometry.Point(n[1],n[0]),r.push(t),t=new OpenLayers.Geometry.Point(n[1],n[2]),r.push(t),t=new OpenLayers.Geometry.Point(n[3],n[2]),r.push(t),t=new OpenLayers.Geometry.Point(n[3],n[0]),r.push(t),t=new OpenLayers.Geometry.Point(n[1],n[0]),r.push(t)),u=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(r)]));return u&&this.internalProjection&&this.externalProjection&&u.transform(this.externalProjection,this.internalProjection),u},createFeatureFromItem:function(e){var t=this.createGeometryFromItem(e),n=this._getChildValue(e,"*","title",this.featureTitle),r=this._getChildValue(e,"*","description",this._getChildValue(e,"*","content",this._getChildValue(e,"*","summary",this.featureDescription))),i=this._getChildValue(e,"*","link");if(!i)try{i=this.getElementsByTagNameNS(e,"*","link")[0].getAttribute("href")}catch(s){i=null}return e=this._getChildValue(e,"*","id",null),t=new OpenLayers.Feature.Vector(t,{title:n,description:r,link:i}),t.fid=e,t},_getChildValue:function(e,t,n,r){return(e=this.getElementsByTagNameNS(e,t,n))&&e[0]&&e[0].firstChild&&e[0].firstChild.nodeValue?this.getChildValue(e[0]):void 0==r?"":r},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=null,t=this.getElementsByTagNameNS(e,"*","item");0==t.length&&(t=this.getElementsByTagNameNS(e,"*","entry"));for(var e=t.length,n=Array(e),r=0;r<e;r++)n[r]=this.createFeatureFromItem(t[r]);return n},write:function(e){var t;if(OpenLayers.Util.isArray(e)){t=this.createElementNS(this.rssns,"rss");for(var n=0,r=e.length;n<r;n++)t.appendChild(this.createFeatureXML(e[n]))}else t=this.createFeatureXML(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=this.buildGeometryNode(e.geometry),n=this.createElementNS(this.rssns,"item"),r=this.createElementNS(this.rssns,"title");r.appendChild(this.createTextNode(e.attributes.title?e.attributes.title:""));var i=this.createElementNS(this.rssns,"description");i.appendChild(this.createTextNode(e.attributes.description?e.attributes.description:"")),n.appendChild(r),n.appendChild(i),e.attributes.link&&(r=this.createElementNS(this.rssns,"link"),r.appendChild(this.createTextNode(e.attributes.link)),n.appendChild(r));for(var s in e.attributes)"link"==s||"title"==s||"description"==s||(r=this.createTextNode(e.attributes[s]),i=s,-1!=s.search(":")&&(i=s.split(":")[1]),i=this.createElementNS(this.featureNS,"feature:"+i),i.appendChild(r),n.appendChild(i));return n.appendChild(t),n},buildGeometryNode:function(e){this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t;if("OpenLayers.Geometry.Polygon"==e.CLASS_NAME)t=this.createElementNS(this.georssns,"georss:polygon"),t.appendChild(this.buildCoordinatesNode(e.components[0]));else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=this.createElementNS(this.georssns,"georss:line"),t.appendChild(this.buildCoordinatesNode(e));else{if("OpenLayers.Geometry.Point"!=e.CLASS_NAME)throw"Couldn't parse "+e.CLASS_NAME;t=this.createElementNS(this.georssns,"georss:point"),t.appendChild(this.buildCoordinatesNode(e))}return t},buildCoordinatesNode:function(e){var t=null;e.components&&(t=e.components);if(t){for(var e=t.length,n=Array(e),r=0;r<e;r++)n[r]=t[r].y+" "+t[r].x;t=n.join(" ")}else t=e.y+" "+e.x;return this.createTextNode(t)},CLASS_NAME:"OpenLayers.Format.GeoRSS"}),OpenLayers.Format.WPSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.WPSCapabilities"}),OpenLayers.Format.WPSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wps:"http://www.opengis.net/wps/1.0.0",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{Capabilities:function(e,t){this.readChildNodes(e,t)},ProcessOfferings:function(e,t){t.processOfferings={},this.readChildNodes(e,t.processOfferings)},Process:function(e,t){var n={processVersion:this.getAttributeNS(e,this.namespaces.wps,"processVersion")};this.readChildNodes(e,n),t[n.identifier]=n},Languages:function(e,t){t.languages=[],this.readChildNodes(e,t.languages)},Default:function(e,t){var n={isDefault:!0};this.readChildNodes(e,n),t.push(n)},Supported:function(e,t){var n={};this.readChildNodes(e,n),t.push(n)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSCapabilities.v1_0_0"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,containerCenter:null,pinchOrigin:null,currentCenter:null,autoActivate:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},activate:function(){var e=OpenLayers.Control.prototype.activate.apply(this,arguments);return e&&(this.map.events.on({moveend:this.updateContainerCenter,scope:this}),this.updateContainerCenter()),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.apply(this,arguments);return this.map&&this.map.events&&this.map.events.un({moveend:this.updateContainerCenter,scope:this}),e},updateContainerCenter:function(){var e=this.map.layerContainerDiv;this.containerCenter={x:parseInt(e.style.left,10)+50,y:parseInt(e.style.top,10)+50}},pinchStart:function(e){this.currentCenter=this.pinchOrigin=e.xy},pinchMove:function(e,t){var n=t.scale,r=this.containerCenter,i=this.pinchOrigin,s=e.xy,o=Math.round(s.x-i.x+(n-1)*(r.x-i.x)),r=Math.round(s.y-i.y+(n-1)*(r.y-i.y));this.applyTransform("translate("+o+"px, "+r+"px) scale("+n+")"),this.currentCenter=s},applyTransform:function(e){var t=this.map.layerContainerDiv.style;t["-webkit-transform"]=e,t["-moz-transform"]=e},pinchDone:function(e,t,n){this.applyTransform(""),e=this.map.getZoomForResolution(this.map.getResolution()/n.scale,!0);if(e!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){var t=this.map.getResolutionForZoom(e),n=this.map.getLonLatFromPixel(this.pinchOrigin),r=this.currentCenter,i=this.map.getSize();n.lon+=t*(i.w/2-r.x),n.lat-=t*(i.h/2-r.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(n,e)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0):!1},draw:function(){var e={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({"double":!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.setCenter(this.map.getLonLatFromViewPortPx(e.xy),this.map.zoom+1)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Style2=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy();delete this.rules},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,n=this.rules.length;t<n;++t)e.rules.push(this.rules[t].clone())}return new OpenLayers.Style2(e)},CLASS_NAME:"OpenLayers.Style2"}),OpenLayers.Format.WFS=OpenLayers.Class(OpenLayers.Format.GML,{layer:null,wfsns:"http://www.opengis.net/wfs",ogcns:"http://www.opengis.net/ogc",initialize:function(e,t){OpenLayers.Format.GML.prototype.initialize.apply(this,
[e]),this.layer=t,this.layer.featureNS&&(this.featureNS=this.layer.featureNS),this.layer.options.geometry_column&&(this.geometryName=this.layer.options.geometry_column),this.layer.options.typename&&(this.featureName=this.layer.options.typename)},write:function(e){var t=this.createElementNS(this.wfsns,"wfs:Transaction");t.setAttribute("version","1.0.0"),t.setAttribute("service","WFS");for(var n=0;n<e.length;n++)switch(e[n].state){case OpenLayers.State.INSERT:t.appendChild(this.insert(e[n]));break;case OpenLayers.State.UPDATE:t.appendChild(this.update(e[n]));break;case OpenLayers.State.DELETE:t.appendChild(this.remove(e[n]))}return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=this.buildGeometryNode(e.geometry),n=this.createElementNS(this.featureNS,"feature:"+this.geometryName);n.appendChild(t),t=this.createElementNS(this.featureNS,"feature:"+this.featureName),t.appendChild(n);for(var r in e.attributes){var n=this.createTextNode(e.attributes[r]),i=r;-1!=r.search(":")&&(i=r.split(":")[1]),i=this.createElementNS(this.featureNS,"feature:"+i),i.appendChild(n),t.appendChild(i)}return t},insert:function(e){var t=this.createElementNS(this.wfsns,"wfs:Insert");return t.appendChild(this.createFeatureXML(e)),t},update:function(e){e.fid||OpenLayers.Console.userError(OpenLayers.i18n("noFID"));var t=this.createElementNS(this.wfsns,"wfs:Update");t.setAttribute("typeName",this.featurePrefix+":"+this.featureName),t.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var n=this.createElementNS(this.wfsns,"wfs:Property"),r=this.createElementNS(this.wfsns,"wfs:Name"),i=this.createTextNode(this.geometryName);r.appendChild(i),n.appendChild(r),r=this.createElementNS(this.wfsns,"wfs:Value"),i=this.buildGeometryNode(e.geometry),e.layer&&i.setAttribute("srsName",e.layer.projection.getCode()),r.appendChild(i),n.appendChild(r),t.appendChild(n);for(var s in e.attributes)n=this.createElementNS(this.wfsns,"wfs:Property"),r=this.createElementNS(this.wfsns,"wfs:Name"),r.appendChild(this.createTextNode(s)),n.appendChild(r),r=this.createElementNS(this.wfsns,"wfs:Value"),r.appendChild(this.createTextNode(e.attributes[s])),n.appendChild(r),t.appendChild(n);return n=this.createElementNS(this.ogcns,"ogc:Filter"),s=this.createElementNS(this.ogcns,"ogc:FeatureId"),s.setAttribute("fid",e.fid),n.appendChild(s),t.appendChild(n),t},remove:function(e){if(!e.fid)return OpenLayers.Console.userError(OpenLayers.i18n("noFID")),!1;var t=this.createElementNS(this.wfsns,"wfs:Delete");t.setAttribute("typeName",this.featurePrefix+":"+this.featureName),t.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var n=this.createElementNS(this.ogcns,"ogc:Filter"),r=this.createElementNS(this.ogcns,"ogc:FeatureId");return r.setAttribute("fid",e.fid),n.appendChild(r),t.appendChild(n),t},destroy:function(){this.layer=null},CLASS_NAME:"OpenLayers.Format.WFS"}),OpenLayers.Format.SLD.v1_0_0_GeoServer=OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0,{version:"1.0.0",profile:"GeoServer",readers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e,t){var n=this.readers.ogc._expression.call(this,e);n&&(t.priority=n)},VendorOption:function(e,t){t.vendorOptions||(t.vendorOptions={}),t.vendorOptions[e.getAttribute("name")]=this.getChildValue(e)}},OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.readers),writers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Priority",e)},VendorOption:function(e){return this.createElementNSPlus("sld:VendorOption",{attributes:{name:e.name},value:e.value})},TextSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this,arguments);return!1!==e.graphic&&(e.externalGraphic||e.graphicName)&&this.writeNode("Graphic",e,t),"priority"in e&&this.writeNode("Priority",e.priority,t),this.addVendorOptions(t,e)},PointSymbolizer:function(e){return this.addVendorOptions(OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this,arguments),e)},LineSymbolizer:function(e){return this.addVendorOptions(OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this,arguments),e)},PolygonSymbolizer:function(e){return this.addVendorOptions(OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this,arguments),e)}},OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.writers),addVendorOptions:function(e,t){if(t.vendorOptions)for(var n in t.vendorOptions)this.writeNode("VendorOption",{name:n,value:t.vendorOptions[n]},e);return e},CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0_GeoServer"}),OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{drawMarker:function(e){var t=this.map.getLayerPxFromLonLat({lon:e.bounds.left,lat:e.bounds.top}),n=this.map.getLayerPxFromLonLat({lon:e.bounds.right,lat:e.bounds.bottom});null==n||null==t?e.display(!1):(t=e.draw(t,{w:Math.max(1,n.x-t.x),h:Math.max(1,n.y-t.y)}),e.drawn||(this.div.appendChild(t),e.drawn=!0))},removeMarker:function(e){OpenLayers.Util.removeItem(this.markers,e),null!=e.div&&e.div.parentNode==this.div&&this.div.removeChild(e.div)},CLASS_NAME:"OpenLayers.Layer.Boxes"}),OpenLayers.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{readers:{wfs:OpenLayers.Util.applyDefaults({Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Fees:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.fees=n)},AccessConstraints:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.accessConstraints=n)},OnlineResource:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.onlineResource=n)},Keywords:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.keywords=n.split(", "))},Capability:function(e,t){t.capability={},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetFeature:function(e,t){t.getfeature={href:{},formats:[]},this.readChildNodes(e,t.getfeature)},ResultFormat:function(e,t){for(var n=e.childNodes,r,i=0;i<n.length;i++)r=n[i],1==r.nodeType&&t.formats.push(r.nodeName)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t.href)},Get:function(e,t){t.get=e.getAttribute("onlineResource")},Post:function(e,t){t.post=e.getAttribute("onlineResource")},SRS:function(e,t){var n=this.getChildValue(e);n&&(t.srs=n)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_0_0"}),OpenLayers.Format.WMSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",profile:null,CLASS_NAME:"OpenLayers.Format.WMSCapabilities"}),OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=e;e&&9==e.nodeType&&(e=e.documentElement);var n={};return this.readNode(e,n),void 0===n.service&&(e=new OpenLayers.Format.OGCExceptionReport,n.error=e.read(t)),n},readers:{wms:{Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t["abstract"]=this.getChildValue(e)},BoundingBox:function(e){var t={};t.bbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))],e={x:parseFloat(e.getAttribute("resx")),y:parseFloat(e.getAttribute("resy"))};if(!isNaN(e.x)||!isNaN(e.y))t.res=e;return t},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},ContactInformation:function(e,t){t.contactInformation={},this.readChildNodes(e,t.contactInformation)},ContactPersonPrimary:function(e,t){t.personPrimary={},this.readChildNodes(e,t.personPrimary)},ContactPerson:function(e,t){t.person=this.getChildValue(e)},ContactOrganization:function(e,t){t.organization=this.getChildValue(e)},ContactPosition:function(e,t){t.position=this.getChildValue(e)},ContactAddress:function(e,t){t.contactAddress={},this.readChildNodes(e,t.contactAddress)},AddressType:function(e,t){t.type=this.getChildValue(e)},Address:function(e,t){t.address=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},StateOrProvince:function(e,t){t.stateOrProvince=this.getChildValue(e)},PostCode:function(e,t){t.postcode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ContactVoiceTelephone:function(e,t){t.phone=this.getChildValue(e)},ContactFacsimileTelephone:function(e,t){t.fax=this.getChildValue(e)},ContactElectronicMailAddress:function(e,t){t.email=this.getChildValue(e)},Fees:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.fees=n)},AccessConstraints:function(e,t){var n=this.getChildValue(e);n&&"none"!=n.toLowerCase()&&(t.accessConstraints=n)},Capability:function(e,t){t.capability={nestedLayers:[],layers:[]},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetCapabilities:function(e,t){t.getcapabilities={formats:[]},this.readChildNodes(e,t.getcapabilities)},Format:function(e,t){OpenLayers.Util.isArray(t.formats)?t.formats.push(this.getChildValue(e)):t.format=this.getChildValue(e)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t)},Get:function(e,t){t.get={},this.readChildNodes(e,t.get),t.href||(t.href=t.get.href)},Post:function(e,t){t.post={},this.readChildNodes(e,t.post),t.href||(t.href=t.get.href)},GetMap:function(e,t){t.getmap={formats:[]},this.readChildNodes(e,t.getmap)},GetFeatureInfo:function(e,t){t.getfeatureinfo={formats:[]},this.readChildNodes(e,t.getfeatureinfo)},Exception:function(e,t){t.exception={formats:[]},this.readChildNodes(e,t.exception)},Layer:function(e,t){var n,r;t.capability?(r=t.capability,n=t):r=t;var i=e.getAttributeNode("queryable"),s=i&&i.specified?e.getAttribute("queryable"):null,o=(i=e.getAttributeNode("cascaded"))&&i.specified?e.getAttribute("cascaded"):null,i=(i=e.getAttributeNode("opaque"))&&i.specified?e.getAttribute("opaque"):null,u=e.getAttribute("noSubsets"),a=e.getAttribute("fixedWidth"),f=e.getAttribute("fixedHeight"),l=n||{},c=OpenLayers.Util.extend;n={nestedLayers:[],styles:n?[].concat(n.styles):[],srs:n?c({},l.srs):{},metadataURLs:[],bbox:n?c({},l.bbox):{},llbbox:l.llbbox,dimensions:n?c({},l.dimensions):{},authorityURLs:n?c({},l.authorityURLs):{},identifiers:{},keywords:[],queryable:s&&""!==s?"1"===s||"true"===s:l.queryable||!1,cascaded:null!==o?parseInt(o):l.cascaded||0,opaque:i?"1"===i||"true"===i:l.opaque||!1,noSubsets:null!==u?"1"===u||"true"===u:l.noSubsets||!1,fixedWidth:null!=a?parseInt(a):l.fixedWidth||0,fixedHeight:null!=f?parseInt(f):l.fixedHeight||0,minScale:l.minScale,maxScale:l.maxScale,attribution:l.attribution},t.nestedLayers.push(n),n.capability=r,this.readChildNodes(e,n),delete n.capability,n.name&&(s=n.name.split(":"),o=r.request,i=o.getfeatureinfo,0<s.length&&(n.prefix=s[0]),r.layers.push(n),void 0===n.formats&&(n.formats=o.getmap.formats),void 0===n.infoFormats&&i)&&(n.infoFormats=i.formats)},Attribution:function(e,t){t.attribution={},this.readChildNodes(e,t.attribution)},LogoURL:function(e,t){t.logo={width:e.getAttribute("width"),height:e.getAttribute("height")},this.readChildNodes(e,t.logo)},Style:function(e,t){var n={};t.styles.push(n),this.readChildNodes(e,n)},LegendURL:function(e,t){var n={width:e.getAttribute("width"),height:e.getAttribute("height")};t.legend=n,this.readChildNodes(e,n)},MetadataURL:function(e,t){var n={type:e.getAttribute("type")};t.metadataURLs.push(n),this.readChildNodes(e,n)},DataURL:function(e,t){t.dataURL={},this.readChildNodes(e,t.dataURL)},FeatureListURL:function(e,t){t.featureListURL={},this.readChildNodes(e,t.featureListURL)},AuthorityURL:function(e,t){var n=e.getAttribute("name"),r={};this.readChildNodes(e,r),t.authorityURLs[n]=r.href},Identifier:function(e,t){var n=e.getAttribute("authority");t.identifiers[n]=this.getChildValue(e)},KeywordList:function(e,t){this.readChildNodes(e,t)},SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"}),OpenLayers.Format.WMSCapabilities.v1_3=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMS_Capabilities:function(e,t){this.readChildNodes(e,t)},LayerLimit:function(e,t){t.layerLimit=parseInt(this.getChildValue(e))},MaxWidth:function(e,t){t.maxWidth=parseInt(this.getChildValue(e))},MaxHeight:function(e,t){t.maxHeight=parseInt(this.getChildValue(e))},BoundingBox:function(e,t){var n=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);n.srs=e.getAttribute("CRS"),t.bbox[n.srs]=n},CRS:function(e,t){this.readers.wms.SRS.apply(this,[e,t])},EX_GeographicBoundingBox:function(e,t){t.llbbox=[],this.readChildNodes(e,t.llbbox)},westBoundLongitude:function(e,t){t[0]=this.getChildValue(e)},eastBoundLongitude:function(e,t){t[2]=this.getChildValue(e)},southBoundLatitude:function(e,t){t[1]=this.getChildValue(e)},northBoundLatitude:function(e,t){t[3]=this.getChildValue(e)},MinScaleDenominator:function(e,t){t.maxScale=parseFloat(this.getChildValue(e)).toPrecision(16)},MaxScaleDenominator:function(e,t){t.minScale=parseFloat(this.getChildValue(e)).toPrecision(16)},Dimension:function(e,t){var n={name:e.getAttribute("name").toLowerCase(),units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol"),nearestVal:"1"===e.getAttribute("nearestValue"),multipleVal:"1"===e.getAttribute("multipleValues"),"default":e.getAttribute("default")||"",current:"1"===e.getAttribute("current"),values:this.getChildValue(e).split(",")};t.dimensions[n.name]=n},Keyword:function(e,t){var n={value:this.getChildValue(e),vocabulary:e.getAttribute("vocabulary")};t.keywords&&t.keywords.push(n)}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),sld:{UserDefinedSymbolization:function(e,t){this.readers.wms.UserDefinedSymbolization.apply(this,[e,t]),t.userSymbols.inlineFeature=1==parseInt(e.getAttribute("InlineFeature")),t.userSymbols.remoteWCS=1==parseInt(e.getAttribute("RemoteWCS"))},DescribeLayer:function(e,t){this.readers.wms.DescribeLayer.apply(this,[e,t])},GetLegendGraphic:function(e,t){this.readers.wms.GetLegendGraphic.apply(this,[e,t])}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3"}),OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(e,t,n,r){this.initializeZoomify(n),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,n,{},r])},initializeZoomify:function(e){var e=e.clone(),t=new OpenLayers.Size(Math.ceil(e.w/this.standardTileSize),Math.ceil(e.h/this.standardTileSize));this.tierSizeInTiles=[t];for(this.tierImageSize=[e];e.w>this.standardTileSize||e.h>this.standardTileSize;)e=new OpenLayers.Size(Math.floor(e.w/2),Math.floor(e.h/2)),t=new OpenLayers.Size(Math.ceil(e.w/this.standardTileSize),Math.ceil(e.h/this.standardTileSize)),this.tierSizeInTiles.push(t),this.tierImageSize.push(e);this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length,this.tileCountUpToTier=[0];for(e=1;e<this.numberOfTiers;e++)this.tileCountUpToTier.push(this.tierSizeInTiles[e-1].w*this.tierSizeInTiles[e-1].h+this.tileCountUpToTier[e-1])},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var e=this.adjustBounds(e),t=this.map.getResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),e=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),t=this.map.getZoom(),n="TileGroup"+Math.floor((n+e*this.tierSizeInTiles[t].w+this.tileCountUpToTier[t])/256)+"/"+t+"-"+n+"-"+e+".jpg",e=this.url;return OpenLayers.Util.isArray(e)&&(e=this.selectUrl(n,e)),e+n},getImageSize:function(){if(0<arguments.length){var e=this.adjustBounds(arguments[0]),t=this.map.getResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),e=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),t=this.map.getZoom(),r=this.standardTileSize,i=this.standardTileSize;return n==this.tierSizeInTiles[t].w-1&&(r=this.tierImageSize[t].w%this.standardTileSize),e==this.tierSizeInTiles[t].h-1&&(i=this.tierImageSize[t].h%this.standardTileSize),new OpenLayers.Size(r,i)}return this.tileSize},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},calculateGridLayout:function(e,t,n){var r=n*this.tileSize.w,n=n*this.tileSize.h,i=e.left-t.lon,s=Math.floor(i/r)-this.buffer,e=t.lat-e.top+n,o=Math.floor(e/n)-this.buffer;return{tilelon:r,tilelat:n,tileoffsetlon:t.lon+s*r,tileoffsetlat:t.lat-n*o,tileoffsetx:-(i/r-s)*this.tileSize.w,tileoffsety:(o-e/n)*this.tileSize.h}},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),OpenLayers.Layer.MapServer=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{mode:"map",map_imagetype:"png"},initialize:function(e,t,n,r){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS);if(null==r||null==r.isBaseLayer)this.isBaseLayer="true"!=this.params.transparent&&1!=this.params.transparent},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapServer(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var e=this.adjustBounds(e),e=[e.left,e.bottom,e.right,e.top],t=this.getImageSize();return this.getFullRequestString({mapext:e,imgext:e,map_size:[t.w,t.h],imgx:t.w/2,imgy:t.h/2,imgxy:[t.w,t.h]})},getFullRequestString:function(e,t){var n=null==t?this.url:t,r=OpenLayers.Util.extend({},this.params),r=OpenLayers.Util.extend(r,e),i=OpenLayers.Util.getParameterString(r);OpenLayers.Util.isArray(n)&&(n=this.selectUrl(i,n));var i=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(n)),s;for(s in r)s.toUpperCase()in i&&delete r[s];return i=OpenLayers.Util.getParameterString(r),r=n,i=i.replace(/,/g,"+"),""!=i&&(s=n.charAt(n.length-1),r="&"==s||"?"==s?r+i:-1==n.indexOf("?")?r+("?"+i):r+("&"+i)),r},CLASS_NAME:"OpenLayers.Layer.MapServer"}),OpenLayers.Renderer.VML=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"urn:schemas-microsoft-com:vml",symbolCache:{},offset:null,initialize:function(e){if(this.supported()){if(!document.namespaces.olv){document.namespaces.add("olv",this.xmlns);for(var t=document.createStyleSheet(),n="shape rect oval fill stroke imagedata group textbox".split(" "),r=0,i=n.length;r<i;r++)t.addRule("olv\\:"+n[r],"behavior: url(#default#VML); position: absolute; display: inline-block;")}OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments)}},supported:function(){return!!document.namespaces},setExtent:function(e,t){var n=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),r=this.getResolution(),i=e.left/r|0,r=e.top/r-this.size.h|0;t||!this.offset?(this.offset={x:i,y:r},r=i=0):(i-=this.offset.x,r-=this.offset.y),this.root.coordorigin=i-this.xOffset+" "+r;for(var i=[this.root,this.vectorRoot,this.textRoot],s=0,o=i.length;s<o;++s)r=i[s],r.coordsize=this.size.w+" "+this.size.h;return this.root.style.flip="y",n},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);for(var t=[this.rendererRoot,this.root,this.vectorRoot,this.textRoot],n=this.size.w+"px",r=this.size.h+"px",i,s=0,o=t.length;s<o;++s)i=t[s],i.style.width=n,i.style.height=r},getNodeType:function(e,t){var n=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":n=t.externalGraphic?"olv:rect":this.isComplexSymbol(t.graphicName)?"olv:shape":"olv:oval";break;case"OpenLayers.Geometry.Rectangle":n="olv:rect";break;case"OpenLayers.Geometry.LineString":case"OpenLayers.Geometry.LinearRing":case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":n="olv:shape"}return n},setStyle:function(e,t,n,r){var t=t||e._style,n=n||e._options,i=t.fillColor;if("OpenLayers.Geometry.Point"===e._geometryClass)if(t.externalGraphic){n.isFilled=!0,t.graphicTitle&&(e.title=t.graphicTitle);var i=t.graphicWidth||t.graphicHeight,s=t.graphicHeight||t.graphicWidth,i=i?i:2*t.pointRadius,s=s?s:2*t.pointRadius,o=this.getResolution(),u=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*i),a=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*s);e.style.left=((r.x-this.featureDx)/o-this.offset.x+u|0)+"px",e.style.top=(r.y/o-this.offset.y-(a+s)|0)+"px",e.style.width=i+"px",e.style.height=s+"px",e.style.flip="y",i="none",n.isStroked=!1}else this.isComplexSymbol(t.graphicName)?(s=this.importSymbol(t.graphicName),e.path=s.path,e.coordorigin=s.left+","+s.bottom,s=s.size,e.coordsize=s+","+s,this.drawCircle(e,r,t.pointRadius),e.style.flip="y"):this.drawCircle(e,r,t.pointRadius);n.isFilled?e.fillcolor=i:e.filled="false",r=e.getElementsByTagName("fill"),r=0==r.length?null:r[0],n.isFilled?(r||(r=this.createNode("olv:fill",e.id+"_fill")),r.opacity=t.fillOpacity,"OpenLayers.Geometry.Point"===e._geometryClass&&t.externalGraphic&&(t.graphicOpacity&&(r.opacity=t.graphicOpacity),r.src=t.externalGraphic,r.type="frame",!t.graphicWidth||!t.graphicHeight)&&(r.aspect="atmost"),r.parentNode!=e&&e.appendChild(r)):r&&e.removeChild(r),i=t.rotation;if(void 0!==i||void 0!==e._rotation)e._rotation=i,t.externalGraphic?(this.graphicRotate(e,u,a,t),r.opacity=0):"OpenLayers.Geometry.Point"===e._geometryClass&&(e.style.rotation=i||0);u=e.getElementsByTagName("stroke"),u=0==u.length?null:u[0];if(n.isStroked){if(u||(u=this.createNode("olv:stroke",e.id+"_stroke"),e.appendChild(u)),u.on=!0,u.color=t.strokeColor,u.weight=t.strokeWidth+"px",u.opacity=t.strokeOpacity,u.endcap="butt"==t.strokeLinecap?"flat":t.strokeLinecap||"round",t.strokeDashstyle)u.dashstyle=this.dashStyle(t)}else e.stroked=!1,u&&(u.on=!1);return"inherit"!=t.cursor&&null!=t.cursor&&(e.style.cursor=t.cursor),e},graphicRotate:function(e,t,n,r){var r=r||e._style,i=r.rotation||0,s,o;if(!r.graphicWidth||!r.graphicHeight){var u=new Image;u.onreadystatechange=OpenLayers.Function.bind(function(){if("complete"==u.readyState||"interactive"==u.readyState)s=u.width/u.height,o=Math.max(2*r.pointRadius,r.graphicWidth||0,r.graphicHeight||0),t*=s,r.graphicWidth=o*s,r.graphicHeight=o,this.graphicRotate(e,t,n,r)},this),u.src=r.externalGraphic}else{o=Math.max(r.graphicWidth,r.graphicHeight),s=r.graphicWidth/r.graphicHeight;var a=Math.round(r.graphicWidth||o*s),f=Math.round(r.graphicHeight||o);e.style.width=a+"px",e.style.height=f+"px";var l=document.getElementById(e.id+"_image");l||(l=this.createNode("olv:imagedata",e.id+"_image"),e.appendChild(l)),l.style.width=a+"px",l.style.height=f+"px",l.src=r.externalGraphic,l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')",l=i*Math.PI/180,i=Math.sin(l),l=Math.cos(l),i="progid:DXImageTransform.Microsoft.Matrix(M11="+l+",M12="+ -i+",M21="+i+",M22="+l+",SizingMethod='auto expand')\n",(l=r.graphicOpacity||r.fillOpacity)&&1!=l&&(i+="progid:DXImageTransform.Microsoft.BasicImage(opacity="+l+")\n"),e.style.filter=i,i=new OpenLayers.Geometry.Point(-t,-n),a=(new OpenLayers.Bounds(0,0,a,f)).toGeometry(),a.rotate(r.rotation,i),a=a.getBounds(),e.style.left=Math.round(parseInt(e.style.left)+a.left)+"px",e.style.top=Math.round(parseInt(e.style.top)-a.bottom)+"px"}},postDraw:function(e){e.style.visibility="visible";var t=e._style.fillColor,n=e._style.strokeColor;"none"==t&&e.fillcolor!=t&&(e.fillcolor=t),"none"==n&&e.strokecolor!=n&&(e.strokecolor=n)},setNodeDimension:function(e,t){var n=t.getBounds();if(n){var r=this.getResolution(),n=new OpenLayers.Bounds((n.left-this.featureDx)/r-this.offset.x|0,n.bottom/r-this.offset.y|0,(n.right-this.featureDx)/r-this.offset.x|0,n.top/r-this.offset.y|0);e.style.left=n.left+"px",e.style.top=n.top+"px",e.style.width=n.getWidth()+"px",e.style.height=n.getHeight()+"px",e.coordorigin=n.left+" "+n.top,e.coordsize=n.getWidth()+" "+n.getHeight()}},dashStyle:function(e){e=e.strokeDashstyle;switch(e){case"solid":case"dot":case"dash":case"dashdot":case"longdash":case"longdashdot":return e;default:return e=e.split(/[ ,]/),2==e.length?1*e[0]>=2*e[1]?"longdash":1==e[0]||1==e[1]?"dot":"dash":4==e.length?1*e[0]>=2*e[1]?"longdashdot":"dashdot":"solid"}},createNode:function(e,t){var n=document.createElement(e);return t&&(n.id=t),n.unselectable="on",n.onselectstart=OpenLayers.Function.False,n},nodeTypeCompare:function(e,t){var n=t,r=n.indexOf(":");-1!=r&&(n=n.substr(r+1));var i=e.nodeName,r=i.indexOf(":");return-1!=r&&(i=i.substr(r+1)),n==i},createRenderRoot:function(){return this.nodeFactory(this.container.id+"_vmlRoot","div")},createRoot:function(e){return this.nodeFactory(this.container.id+e,"olv:group")},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,n){if(!isNaN(t.x)&&!isNaN(t.y)){var r=this.getResolution();return e.style.left=((t.x-this.featureDx)/r-this.offset.x|0)-n+"px",e.style.top=(t.y/r-this.offset.y|0)-n+"px",t=2*n,e.style.width=t+"px",e.style.height=t+"px",e}return!1},drawLineString:function(e,t){return this.drawLine(e,t,!1)},drawLinearRing:function(e,t){return this.drawLine(e,t,!0)},drawLine:function(e,t,n){this.setNodeDimension(e,t);for(var r=this.getResolution(),i=t.components.length,s=Array(i),o,u,a=0;a<i;a++)o=t.components[a],u=(o.x-this.featureDx)/r-this.offset.x|0,o=o.y/r-this.offset.y|0,s[a]=" "+u+","+o+" l ";return e.path="m"+s.join("")+(n?" x e":" e"),e},drawPolygon:function(e,t){this.setNodeDimension(e,t);var n=this.getResolution(),r=[],i,s,o,u,a,f,l,c,h,p;i=0;for(s=t.components.length;i<s;i++){r.push("m"),o=t.components[i].components,u=0===i,f=a=null,l=0;for(c=o.length;l<c;l++)h=o[l],p=(h.x-this.featureDx)/n-this.offset.x|0,h=h.y/n-this.offset.y|0,p=" "+p+","+h,r.push(p),0==l&&r.push(" l"),u||(a?a!=p&&(f?f!=p&&(u=!0):f=p):a=p);r.push(u?" x ":" ")}return r.push("e"),e.path=r.join(""),e},drawRectangle:function(e,t){var n=this.getResolution();return e.style.left=((t.x-this.featureDx)/n-this.offset.x|0)+"px",e.style.top=(t.y/n-this.offset.y|0)+"px",e.style.width=(t.width/n|0)+"px",e.style.height=(t.height/n|0)+"px",e},drawText:function(e,t,n){var r=this.nodeFactory(e+this.LABEL_ID_SUFFIX,"olv:rect"),i=this.nodeFactory(e+this.LABEL_ID_SUFFIX+"_textbox","olv:textbox"),s=this.getResolution();r.style.left=((n.x-this.featureDx)/s-this.offset.x|0)+"px",r.style.top=(n.y/s-this.offset.y|0)+"px",r.style.flip="y",i.innerText=t.label,"inherit"!=t.cursor&&null!=t.cursor&&(i.style.cursor=t.cursor),t.fontColor&&(i.style.color=t.fontColor),t.fontOpacity&&(i.style.filter="alpha(opacity="+100*t.fontOpacity+")"),t.fontFamily&&(i.style.fontFamily=t.fontFamily),t.fontSize&&(i.style.fontSize=t.fontSize),t.fontWeight&&(i.style.fontWeight=t.fontWeight),t.fontStyle&&(i.style.fontStyle=t.fontStyle),!0===t.labelSelect&&(r._featureId=e,i._featureId=e,i._geometry=n,i._geometryClass=n.CLASS_NAME),i.style.whiteSpace="nowrap",i.inset="1px,0px,0px,0px",r.parentNode||(r.appendChild(i),this.textRoot.appendChild(r)),t=t.labelAlign||"cm",1==t.length&&(t+="m"),e=i.clientWidth*OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(0,1)],i=i.clientHeight*OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(1,1)],r.style.left=parseInt(r.style.left)-e-1+"px",r.style.top=parseInt(r.style.top)+i+"px"},moveRoot:function(e){var t=this.map.getLayer(e.container.id);t instanceof OpenLayers.Layer.Vector.RootContainer&&(t=this.map.getLayer(this.container.id)),t&&t.renderer.clear(),OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this,arguments),t&&t.redraw()},importSymbol:function(e){var t=this.container.id+"-"+e,n=this.symbolCache[t];if(n)return n;n=OpenLayers.Renderer.symbol[e];if(!n)throw Error(e+" is not a valid symbol name");for(var e=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),r=["m"],i=0;i<n.length;i+=2){var s=n[i],o=n[i+1];e.left=Math.min(e.left,s),e.bottom=Math.min(e.bottom,o),e.right=Math.max(e.right,s),e.top=Math.max(e.top,o),r.push(s),r.push(o),0==i&&r.push("l")}return r.push("x e"),n=r.join(" "),r=(e.getWidth()-e.getHeight())/2,0<r?(e.bottom-=r,e.top+=r):(e.left+=r,e.right-=r),n={path:n,size:e.getWidth(),left:e.left,bottom:e.bottom},this.symbolCache[t]=n},CLASS_NAME:"OpenLayers.Renderer.VML"}),OpenLayers.Renderer.VML.LABEL_SHIFT={l:0,c:.5,r:1,t:0,m:.5,b:1},OpenLayers.Control.CacheRead=OpenLayers.Class(OpenLayers.Control,{fetchEvent:"tileloadstart",layers:null,autoActivate:!0,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);var t,n=this.layers||e.layers;for(t=n.length-1;0<=t;--t)this.addLayer({layer:n[t]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.register(this.fetchEvent,this,this.fetch)},removeLayer:function(e){e.layer.events.unregister(this.fetchEvent,this,this.fetch)},fetch:function(e){if(this.active&&window.localStorage&&e.tile instanceof OpenLayers.Tile.Image){var t=e.tile,n=t.url;!t.layer.crossOriginKeyword&&OpenLayers.ProxyHost&&0===n.indexOf(OpenLayers.ProxyHost)&&(n=OpenLayers.Control.CacheWrite.urlMap[n]);if(n=window.localStorage.getItem("olCache_"+n))t.url=n,"tileerror"===e.type&&t.setImgSrc(n)}},destroy:function(){if(this.layers||this.map){var e,t=this.layers||this.map.layers;for(e=t.length-1;0<=e;--e)this.removeLayer({layer:t[e]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheRead"}),OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"}),OpenLayers.Format.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Format.XML,{layerIdentifier:"_layer",featureIdentifier:"_feature",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},gmlFormat:null,read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=e.documentElement;if(t)var n=this["read_"+t.nodeName],e=n?n.call(this,t):(new OpenLayers.Format.GML(this.options?this.options:{})).read(e);return e},read_msGMLOutput:function(e){var t=[];if(e=this.getSiblingNodesByTagCriteria(e,this.layerIdentifier))for(var n=0,r=e.length;n<r;++n){var i=e[n],s=i.nodeName;i.prefix&&(s=s.split(":")[1]),s=s.replace(this.layerIdentifier,"");if(i=this.getSiblingNodesByTagCriteria(i,this.featureIdentifier))for(var o=0;o<i.length;o++){var u=i[o],a=this.parseGeometry(u),u=this.parseAttributes(u),u=new OpenLayers.Feature.Vector(a.geometry,u,null);u.bounds=a.bounds,u.type=s,t.push(u)}}return t},read_FeatureInfoResponse:function(e){for(var t=[],e=this.getElementsByTagNameNS(e,"*","FIELDS"),n=0,r=e.length;n<r;n++){var i=e[n],s={},o,u=i.attributes.length;if(0<u)for(o=0;o<u;o++){var a=i.attributes[o];s[a.nodeName]=a.nodeValue}else{i=i.childNodes,o=0;for(u=i.length;o<u;++o)a=i[o],3!=a.nodeType&&(s[a.getAttribute("name")]=a.getAttribute("value"))}t.push(new OpenLayers.Feature.Vector(null,s,null))}return t},getSiblingNodesByTagCriteria:function(e,t){var n=[],r,i,s,o;if(e&&e.hasChildNodes()){r=e.childNodes,s=r.length;for(var u=0;u<s;u++){for(o=r[u];o&&1!=o.nodeType;)o=o.nextSibling,u++;i=o?o.nodeName:"",0<i.length&&-1<i.indexOf(t)?n.push(o):(i=this.getSiblingNodesByTagCriteria(o,t),0<i.length&&(0==n.length?n=i:n.push(i)))}}return n},parseAttributes:function(e){var t={};if(1==e.nodeType)for(var e=e.childNodes,n=e.length,r=0;r<n;++r){var i=e[r];if(1==i.nodeType){var s=i.childNodes,i=i.prefix?i.nodeName.split(":")[1]:i.nodeName;0==s.length?t[i]=null:1==s.length&&(s=s[0],3==s.nodeType||4==s.nodeType)&&(s=s.nodeValue.replace(this.regExes.trimSpace,""),t[i]=s)}}return t},parseGeometry:function(e){this.gmlFormat||(this.gmlFormat=new OpenLayers.Format.GML);var e=this.gmlFormat.parseFeature(e),t,n=null;return e&&(t=e.geometry&&e.geometry.clone(),n=e.bounds&&e.bounds.clone(),e.destroy()),{geometry:t,bounds:n}},CLASS_NAME:"OpenLayers.Format.WMSGetFeatureInfo"}),OpenLayers.Control.WMTSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,requestEncoding:"KVP",drillDown:!1,maxFeatures
:10,clickCallback:"click",layers:null,queryVisible:!0,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handlerOptions:null,handler:null,hoverRequest:null,pending:0,initialize:function(e){e=e||{},e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(e={},e[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,e,this.handlerOptions.click||{}))},getInfoForClick:function(e){this.request(e.xy,{})},getInfoForHover:function(e){this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(--this.pending,0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e=this.layers||this.map.layers,t=[],n,r=e.length-1;0<=r;--r)if(n=e[r],n instanceof OpenLayers.Layer.WMTS&&n.requestEncoding===this.requestEncoding&&(!this.queryVisible||n.getVisibility()))if(t.push(n),!this.drillDown||this.hover)break;return t},buildRequestOptions:function(e,t){var n=this.map.getLonLatFromPixel(t),r=e.getURL(new OpenLayers.Bounds(n.lon,n.lat,n.lon,n.lat)),r=OpenLayers.Util.getParameters(r),n=e.getTileInfo(n);return OpenLayers.Util.extend(r,{service:"WMTS",version:e.version,request:"GetFeatureInfo",infoFormat:this.infoFormat,i:n.i,j:n.j}),OpenLayers.Util.applyDefaults(r,this.vendorParams),{url:OpenLayers.Util.isArray(e.url)?e.url[0]:e.url,params:OpenLayers.Util.upperCaseObject(r),callback:function(n){this.handleResponse(t,n,e)},scope:this}},request:function(e,t){var t=t||{},n=this.findLayers();if(0<n.length){for(var r,i,s=0,o=n.length;s<o;s++)i=n[s],r=this.events.triggerEvent("beforegetfeatureinfo",{xy:e,layer:i}),!1!==r&&(++this.pending,r=this.buildRequestOptions(i,e),r=OpenLayers.Request.GET(r),!0===t.hover&&(this.hoverRequest=r));0<this.pending&&OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait")}},handleResponse:function(e,t,n){--this.pending,0>=this.pending&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0);if(t.status&&(200>t.status||300<=t.status))this.events.triggerEvent("exception",{xy:e,request:t,layer:n});else{var r=t.responseXML;if(!r||!r.documentElement)r=t.responseText;var i,s;try{i=this.format.read(r)}catch(o){s=!0,this.events.triggerEvent("exception",{xy:e,request:t,error:o,layer:n})}s||this.events.triggerEvent("getfeatureinfo",{text:t.responseText,features:i,request:t,xy:e,layer:n})}},CLASS_NAME:"OpenLayers.Control.WMTSGetFeatureInfo"}),OpenLayers.Strategy.Paging=OpenLayers.Class(OpenLayers.Strategy,{features:null,length:10,num:null,paging:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,scope:this})),e},cacheFeatures:function(e){this.paging||(this.clearCache(),this.features=e.features,this.pageNext(e))},clearCache:function(){if(this.features)for(var e=0;e<this.features.length;++e)this.features[e].destroy();this.num=this.features=null},pageCount:function(){return Math.ceil((this.features?this.features.length:0)/this.length)},pageNum:function(){return this.num},pageLength:function(e){return e&&0<e&&(this.length=e),this.length},pageNext:function(e){var t=!1;return this.features&&(null===this.num&&(this.num=-1),t=this.page((this.num+1)*this.length,e)),t},pagePrevious:function(){var e=!1;return this.features&&(null===this.num&&(this.num=this.pageCount()),e=this.page((this.num-1)*this.length)),e},page:function(e,t){var n=!1;if(this.features&&0<=e&&e<this.features.length){var r=Math.floor(e/this.length);r!=this.num&&(this.paging=!0,n=this.features.slice(e,e+this.length),this.layer.removeFeatures(this.layer.features),this.num=r,t&&t.features?t.features=n:this.layer.addFeatures(n),this.paging=!1,n=!0)}return n},CLASS_NAME:"OpenLayers.Strategy.Paging"}),OpenLayers.Protocol.CSW.v2_0_2=OpenLayers.Class(OpenLayers.Protocol,{formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({},this.formatOptions)))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),n=this.format.write(e.params);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:n}),t},handleRead:function(e,t){if(t.callback){var n=e.priv;200<=n.status&&300>n.status?(e.data=this.parseData(n),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e)}},parseData:function(e){var t=e.responseXML;if(!t||!t.documentElement)t=e.responseText;return!t||0>=t.length?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.CSW.v2_0_2"}),OpenLayers.Format.WMSCapabilities.v1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMT_MS_Capabilities:function(e,t){this.readChildNodes(e,t)},Keyword:function(e,t){t.keywords&&t.keywords.push(this.getChildValue(e))},DescribeLayer:function(e,t){t.describelayer={formats:[]},this.readChildNodes(e,t.describelayer)},GetLegendGraphic:function(e,t){t.getlegendgraphic={formats:[]},this.readChildNodes(e,t.getlegendgraphic)},GetStyles:function(e,t){t.getstyles={formats:[]},this.readChildNodes(e,t.getstyles)},PutStyles:function(e,t){t.putstyles={formats:[]},this.readChildNodes(e,t.putstyles)},UserDefinedSymbolization:function(e,t){var n={supportSLD:1==parseInt(e.getAttribute("SupportSLD")),userLayer:1==parseInt(e.getAttribute("UserLayer")),userStyle:1==parseInt(e.getAttribute("UserStyle")),remoteWFS:1==parseInt(e.getAttribute("RemoteWFS"))};t.userSymbols=n},LatLonBoundingBox:function(e,t){t.llbbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]},BoundingBox:function(e,t){var n=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);n.srs=e.getAttribute("SRS"),t.bbox[n.srs]=n},ScaleHint:function(e,t){var n=e.getAttribute("min"),r=e.getAttribute("max"),i=Math.pow(2,.5),s=OpenLayers.INCHES_PER_UNIT.m;t.maxScale=parseFloat((n/i*s*OpenLayers.DOTS_PER_INCH).toPrecision(13)),t.minScale=parseFloat((r/i*s*OpenLayers.DOTS_PER_INCH).toPrecision(13))},Dimension:function(e,t){var n={name:e.getAttribute("name").toLowerCase(),units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol")};t.dimensions[n.name]=n},Extent:function(e,t){var n=e.getAttribute("name").toLowerCase();if(n in t.dimensions){n=t.dimensions[n],n.nearestVal="1"===e.getAttribute("nearestValue"),n.multipleVal="1"===e.getAttribute("multipleValues"),n.current="1"===e.getAttribute("current"),n["default"]=e.getAttribute("default")||"";var r=this.getChildValue(e);n.values=r.split(",")}}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1"}),OpenLayers.Control.Graticule=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,intervals:[45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],displayInLayerSwitcher:!0,visible:!0,numPoints:50,targetSize:200,layerName:null,labelled:!0,labelFormat:"dm",lineSymbolizer:{strokeColor:"#333",strokeWidth:1,strokeOpacity:.5},labelSymbolizer:{},gratLayer:null,initialize:function(e){e=e||{},e.layerName=e.layerName||OpenLayers.i18n("Graticule"),OpenLayers.Control.prototype.initialize.apply(this,[e]),this.labelSymbolizer.stroke=!1,this.labelSymbolizer.fill=!1,this.labelSymbolizer.label="${label}",this.labelSymbolizer.labelAlign="${labelAlign}",this.labelSymbolizer.labelXOffset="${xOffset}",this.labelSymbolizer.labelYOffset="${yOffset}"},destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.gratLayer&&(this.gratLayer.destroy(),this.gratLayer=null)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.gratLayer){var e=new OpenLayers.Style({},{rules:[new OpenLayers.Rule({symbolizer:{Point:this.labelSymbolizer,Line:this.lineSymbolizer}})]});this.gratLayer=new OpenLayers.Layer.Vector(this.layerName,{styleMap:new OpenLayers.StyleMap({"default":e}),visibility:this.visible,displayInLayerSwitcher:this.displayInLayerSwitcher})}return this.div},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.map.addLayer(this.gratLayer),this.map.events.register("moveend",this,this.update),this.update(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.map.events.unregister("moveend",this,this.update),this.map.removeLayer(this.gratLayer),!0):!1},update:function(){var e=this.map.getExtent();if(e){this.gratLayer.destroyFeatures();var t=new OpenLayers.Projection("EPSG:4326"),n=this.map.getProjectionObject(),r=this.map.getResolution();n.proj&&"longlat"==n.proj.projName&&(this.numPoints=1);var i=this.map.getCenter(),s=new OpenLayers.Pixel(i.lon,i.lat);OpenLayers.Projection.transform(s,n,t);for(var i=this.targetSize*r,i=i*i,o,r=0;r<this.intervals.length;++r){o=this.intervals[r];var u=o/2,a=s.offset({x:-u,y:-u}),u=s.offset({x:u,y:u});OpenLayers.Projection.transform(a,t,n),OpenLayers.Projection.transform(u,t,n);if((a.x-u.x)*(a.x-u.x)+(a.y-u.y)*(a.y-u.y)<=i)break}s.x=Math.floor(s.x/o)*o,s.y=Math.floor(s.y/o)*o;var r=0,i=[s.clone()],u=s.clone(),f;do u=u.offset({x:0,y:o}),f=OpenLayers.Projection.transform(u.clone(),t,n),i.unshift(u);while(e.containsPixel(f)&&1e3>++r);u=s.clone();do u=u.offset({x:0,y:-o}),f=OpenLayers.Projection.transform(u.clone(),t,n),i.push(u);while(e.containsPixel(f)&&1e3>++r);r=0,a=[s.clone()],u=s.clone();do u=u.offset({x:-o,y:0}),f=OpenLayers.Projection.transform(u.clone(),t,n),a.unshift(u);while(e.containsPixel(f)&&1e3>++r);u=s.clone();do u=u.offset({x:o,y:0}),f=OpenLayers.Projection.transform(u.clone(),t,n),a.push(u);while(e.containsPixel(f)&&1e3>++r);o=[];for(r=0;r<a.length;++r){f=a[r].x;for(var s=[],l=null,c=Math.min(i[0].y,90),u=Math.max(i[i.length-1].y,-90),h=(c-u)/this.numPoints,c=u,u=0;u<=this.numPoints;++u){var p=new OpenLayers.Geometry.Point(f,c);p.transform(t,n),s.push(p),c+=h,p.y>=e.bottom&&!l&&(l=p)}this.labelled&&(l=new OpenLayers.Geometry.Point(l.x,e.bottom),f={value:f,label:this.labelled?OpenLayers.Util.getFormattedLonLat(f,"lon",this.labelFormat):"",labelAlign:"cb",xOffset:0,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(l,f))),s=new OpenLayers.Geometry.LineString(s),o.push(new OpenLayers.Feature.Vector(s))}for(u=0;u<i.length;++u)if(c=i[u].y,!(-90>c||90<c)){s=[],r=a[0].x,h=(a[a.length-1].x-r)/this.numPoints,f=r,l=null;for(r=0;r<=this.numPoints;++r)p=new OpenLayers.Geometry.Point(f,c),p.transform(t,n),s.push(p),f+=h,p.x<e.right&&(l=p);this.labelled&&(l=new OpenLayers.Geometry.Point(e.right,l.y),f={value:c,label:this.labelled?OpenLayers.Util.getFormattedLonLat(c,"lat",this.labelFormat):"",labelAlign:"rb",xOffset:-2,yOffset:2},this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(l,f))),s=new OpenLayers.Geometry.LineString(s),o.push(new OpenLayers.Feature.Vector(s))}this.gratLayer.addFeatures(o)}},CLASS_NAME:"OpenLayers.Control.Graticule"}),OpenLayers.Layer.UTFGrid=OpenLayers.Class(OpenLayers.Layer.XYZ,{isBaseLayer:!1,projection:new OpenLayers.Projection("EPSG:900913"),useJSONP:!1,tileClass:OpenLayers.Tile.UTFGrid,initialize:function(e){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e.name,e.url,{},e]),this.tileOptions=OpenLayers.Util.extend({utfgridResolution:this.utfgridResolution},this.tileOptions)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.UTFGrid(this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getFeatureInfo:function(e){var t=null,e=this.getTileData(e);return e.tile&&(t=e.tile.getFeatureInfo(e.i,e.j)),t},getFeatureId:function(e){var t=null,e=this.getTileData(e);return e.tile&&(t=e.tile.getFeatureId(e.i,e.j)),t},CLASS_NAME:"OpenLayers.Layer.UTFGrid"}),OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:!0,type:"png",useScales:!1,overrideDPI:!1,initialize:function(e,t,n){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.resolutions&&(this.serverResolutions=this.resolutions,this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0]));if(this.layerInfo){var r=this.layerInfo,i=new OpenLayers.Bounds(r.fullExtent.xmin,r.fullExtent.ymin,r.fullExtent.xmax,r.fullExtent.ymax);this.projection="EPSG:"+r.spatialReference.wkid,this.sphericalMercator=102100==r.spatialReference.wkid,this.units="esriFeet"==r.units?"ft":"m";if(r.tileInfo){this.tileSize=new OpenLayers.Size(r.tileInfo.width||r.tileInfo.cols,r.tileInfo.height||r.tileInfo.rows),this.tileOrigin=new OpenLayers.LonLat(r.tileInfo.origin.x,r.tileInfo.origin.y);var s=new OpenLayers.Geometry.Point(i.left,i.top),i=new OpenLayers.Geometry.Point(i.right,i.bottom);this.useScales?this.scales=[]:this.resolutions=[],this.lods=[];for(var o in r.tileInfo.lods)if(r.tileInfo.lods.hasOwnProperty(o)){var u=r.tileInfo.lods[o];this.useScales?this.scales.push(u.scale):this.resolutions.push(u.resolution);var a=this.getContainingTileCoords(s,u.resolution);u.startTileCol=a.x,u.startTileRow=a.y,a=this.getContainingTileCoords(i,u.resolution),u.endTileCol=a.x,u.endTileRow=a.y,this.lods.push(u)}this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]),this.serverResolutions=this.resolutions,this.overrideDPI&&r.tileInfo.dpi&&(OpenLayers.DOTS_PER_INCH=r.tileInfo.dpi)}}},getContainingTileCoords:function(e,t){return new OpenLayers.Pixel(Math.max(Math.floor((e.x-this.tileOrigin.lon)/(this.tileSize.w*t)),0),Math.max(Math.floor((this.tileOrigin.lat-e.y)/(this.tileSize.h*t)),0))},calculateMaxExtentWithLOD:function(e){var t=this.tileOrigin.lon+e.startTileCol*this.tileSize.w*e.resolution,n=this.tileOrigin.lat-e.startTileRow*this.tileSize.h*e.resolution;return new OpenLayers.Bounds(t,n-(e.endTileRow-e.startTileRow+1)*this.tileSize.h*e.resolution,t+(e.endTileCol-e.startTileCol+1)*this.tileSize.w*e.resolution,n)},calculateMaxExtentWithExtent:function(e,t){var n=new OpenLayers.Geometry.Point(e.left,e.top),r=new OpenLayers.Geometry.Point(e.right,e.bottom),n=this.getContainingTileCoords(n,t),r=this.getContainingTileCoords(r,t);return this.calculateMaxExtentWithLOD({resolution:t,startTileCol:n.x,startTileRow:n.y,endTileCol:r.x,endTileRow:r.y})},getUpperLeftTileCoord:function(e){return this.getContainingTileCoords(new OpenLayers.Geometry.Point(this.maxExtent.left,this.maxExtent.top),e)},getLowerRightTileCoord:function(e){return this.getContainingTileCoords(new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom),e)},getMaxExtentForResolution:function(e){var t=this.getUpperLeftTileCoord(e),n=this.getLowerRightTileCoord(e),r=this.tileOrigin.lon+t.x*this.tileSize.w*e,i=this.tileOrigin.lat-t.y*this.tileSize.h*e;return new OpenLayers.Bounds(r,i-(n.y-t.y+1)*this.tileSize.h*e,r+(n.x-t.x+1)*this.tileSize.w*e,i)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},getMaxExtent:function(){return this.maxExtent=this.getMaxExtentForResolution(this.map.getResolution())},getTileOrigin:function(){var e=this.getMaxExtent();return new OpenLayers.LonLat(e.left,e.bottom)},getURL:function(e){var t=this.getResolution(),n=this.tileOrigin.lon+t*this.tileSize.w/2,r=this.tileOrigin.lat-t*this.tileSize.h/2,e=e.getCenterLonLat(),n=Math.round(Math.abs((e.lon-n)/(t*this.tileSize.w))),r=Math.round(Math.abs((r-e.lat)/(t*this.tileSize.h))),e=this.map.getZoom();if(this.lods){if(t=this.lods[this.map.getZoom()],n<t.startTileCol||n>t.endTileCol||r<t.startTileRow||r>t.endTileRow)return null}else{var i=this.getUpperLeftTileCoord(t),t=this.getLowerRightTileCoord(t);if(n<i.x||n>=t.x||r<i.y||r>=t.y)return null}return t=this.url,i=""+n+r+e,OpenLayers.Util.isArray(t)&&(t=this.selectUrl(i,t)),this.useArcGISServer?t+="/tile/${z}/${y}/${x}":(n="C"+this.zeroPad(n,8,16),r="R"+this.zeroPad(r,8,16),e="L"+this.zeroPad(e,2,16),t=t+"/${z}/${y}/${x}."+this.type),t=OpenLayers.String.format(t,{x:n,y:r,z:e}),OpenLayers.Util.urlAppend(t,OpenLayers.Util.getParameterString(this.params))},zeroPad:function(e,t,n){for(e=e.toString(n||10);e.length<t;)e="0"+e;return e},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"}),OpenLayers.Control.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,drillDown:!1,maxFeatures:10,clickCallback:"click",output:"features",layers:null,queryVisible:!1,url:null,layerUrls:null,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handlerOptions:null,handler:null,hoverRequest:null,initialize:function(e){e=e||{},e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),!0===this.drillDown&&(this.hover=!1),this.hover?this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250})):(e={},e[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,e,this.handlerOptions.click||{}))},getInfoForClick:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),this.request(e.xy,{})},getInfoForHover:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e=this.layers||this.map.layers,t=[],n,r,i=e.length-1;0<=i;--i)if(n=e[i],n instanceof OpenLayers.Layer.WMS&&(!this.queryVisible||n.getVisibility()))r=OpenLayers.Util.isArray(n.url)?n.url[0]:n.url,!1===this.drillDown&&!this.url&&(this.url=r),(!0===this.drillDown||this.urlMatches(r))&&t.push(n);return t},urlMatches:function(e){var t=OpenLayers.Util.isEquivalentUrl(this.url,e);if(!t&&this.layerUrls)for(var n=0,r=this.layerUrls.length;n<r;++n)if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[n],e)){t=!0;break}return t},buildWMSOptions:function(e,t,n,r){for(var i=[],s=[],o=0,u=t.length;o<u;o++)null!=t[o].params.LAYERS&&(i=i.concat(t[o].params.LAYERS),s=s.concat(this.getStyleNames(t[o])));return t=t[0],o=this.map.getProjection(),(u=t.projection)&&u.equals(this.map.getProjectionObject())&&(o=u.getCode()),r=OpenLayers.Util.extend({service:"WMS",version:t.params.VERSION,request:"GetFeatureInfo",exceptions:t.params.EXCEPTIONS,bbox:this.map.getExtent().toBBOX(null,t.reverseAxisOrder()),feature_count:this.maxFeatures,height:this.map.getSize().h,width:this.map.getSize().w,format:r,info_format:t.params.INFO_FORMAT||this.infoFormat},1.3<=parseFloat(t.params.VERSION)?{crs:o,i:parseInt(n.x),j:parseInt(n.y)}:{srs:o,x:parseInt(n.x),y:parseInt(n.y)}),0!=i.length&&(r=OpenLayers.Util.extend({layers:i,query_layers:i,styles:s},r)),OpenLayers.Util.applyDefaults(r,this.vendorParams),{url:e,params:OpenLayers.Util.upperCaseObject(r),callback:function(t){this.handleResponse(n,t,e)},scope:this}},getStyleNames:function(e){return e.params.STYLES?e.params.STYLES:OpenLayers.Util.isArray(e.params.LAYERS)?Array(e.params.LAYERS.length):e.params.LAYERS.replace(/[^,]/g,"")},request:function(e,t){var n=this.findLayers();if(0==n.length)this.events.triggerEvent("nogetfeatureinfo"),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait");else if(t=t||{},!1===this.drillDown){var n=this.buildWMSOptions(this.url,n,e,n[0].params.FORMAT),r=OpenLayers.Request.GET(n);!0===t.hover&&(this.hoverRequest=r)}else{this._numRequests=this._requestCount=0,this.features=[];for(var r={},i,s=0,o=n.length;s<o;s++){var u=n[s];i=OpenLayers.Util.isArray(u.url)?u.url[0]:u.url,i in r?r[i].push(u):(this._numRequests++,r[i]=[u])}for(i in r)n=r[i],n=this.buildWMSOptions(i,n,e,n[0].params.FORMAT),OpenLayers.Request.GET(n)}},triggerGetFeatureInfo:function(e,t,n){this.events.triggerEvent("getfeatureinfo",{text:e.responseText,features:n,request:e,xy:t}),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},handleResponse:function(e,t,n){var r=t.responseXML;if(!r||!r.documentElement)r=t.responseText;r=this.format.read(r),!1===this.drillDown?this.triggerGetFeatureInfo(t,e,r):(this._requestCount++,this._features="object"===this.output?(this._features||[]).concat({url:n,features:r}):(this._features||[]).concat(r),this._requestCount===this._numRequests&&(this.triggerGetFeatureInfo(t,e,this._features.concat()),delete this._features,delete this._requestCount,delete this._numRequests))},CLASS_NAME:"OpenLayers.Control.WMSGetFeatureInfo"}),OpenLayers.Format.WMSCapabilities.v1_3_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3,{version:"1.3.0",CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3_0"}),OpenLayers.Format.SOSGetFeatureOfInterest=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",sa:"http://www.opengis.net/sampling/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",defaultPrefix:"sos",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={features:[]};this.readNode(e,t);for(var e=[],n=0,r=t.features.length;n<r;n++){var i=t.features[n];this.internalProjection&&this.externalProjection&&i.components[0]&&i.components[0].transform(this.externalProjection,this.internalProjection),i=new OpenLayers.Feature.Vector(i.components[0],i.attributes),e.push(i)}return e},readers:{sa:{SamplingPoint:function(e,t){if(!t.attributes){var n={attributes:{}};t.features.push(n),t=n}t.attributes.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},position:function(e,t){this.readChildNodes(e,t)}},gml:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){this.readChildNodes(e,t)},featureMember:function(e,t){var n={attributes:{}};t.features.push(n),this.readChildNodes(e,n)},name:function(e,t){t.attributes.name=this.getChildValue(e)},pos:function(e,t){this.externalProjection||(this.externalProjection=new OpenLayers.Projection(e.getAttribute("srsName"))),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[e,t])}},OpenLayers.Format.GML.v3.prototype.readers.gml)},writers:{sos:{GetFeatureOfInterest:function(e){for(var t=this.createElementNSPlus("GetFeatureOfInterest",{attributes:{version:this.VERSION,service:"SOS","xsi:schemaLocation":this.schemaLocation}}),n=0,r=e.fois.length;n<r;n++)this.writeNode("FeatureOfInterestId",{foi:e.fois[n]},t);return t},FeatureOfInterestId:function(e){return this.createElementNSPlus("FeatureOfInterestId",{value:e.foi})}}},CLASS_NAME:"OpenLayers.Format.SOSGetFeatureOfInterest"}),OpenLayers.Format.SOSGetObservation=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows",gml:"http://www.opengis.net/gml",sos:"http://www.opengis.net/sos/1.0",ogc:"http://www.opengis.net/ogc",om:"http://www.opengis.net/om/1.0",sa:"http://www.opengis.net/sampling/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",defaultPrefix:"sos",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={measurements:[],observations:[]};return this.readNode(e,t),t},write:function(e){return e=this.writeNode("sos:GetObservation",e),e.setAttribute("xmlns:om",this.namespaces.om),e.setAttribute("xmlns:ogc",this.namespaces.ogc),this.setAttributeNS(e,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[e])},readers:{om:{ObservationCollection:function(e,t){t.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},member:function(e,t){this.readChildNodes(e,t)},Measurement:function(e,t){var n={};t.measurements.push(n),this.readChildNodes(e,n)},Observation:function(e,t){var n={};t.observations.push(n),this.readChildNodes(e,n)},samplingTime:function(e,t){var n={};t.samplingTime=n,this.readChildNodes(e,n)},observedProperty:function(e,t){t.observedProperty=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},procedure:function(e,t){t.procedure=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},featureOfInterest:function(e,t){var n={features:[]};t.fois=[],t.fois.push(n),this.readChildNodes(e,n);for(var r=[],i=0,s=n.features.length;i<s;i++){var o=n.features[i];r.push(new OpenLayers.Feature.Vector(o.components[0],o.attributes))}n.features=r},result:function(e,t){var n={};t.result=n,""!==this.getChildValue(e)?(n.value=this.getChildValue(e),n.uom=e.getAttribute("uom")):this.readChildNodes(e,n)}},sa:OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,gml:OpenLayers.Util.applyDefaults({TimeInstant:function(e,t){var n={};t.timeInstant=n,this.readChildNodes(e,n)},timePosition:function(e,t){t.timePosition=this.getChildValue(e)}},OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)},writers:{sos:{GetObservation:function(e){var t=this.createElementNSPlus("GetObservation",{attributes:{version:this.VERSION,service:"SOS"}});this.writeNode("offering",e,t),e.eventTime&&this.writeNode("eventTime",e,t);for(var n in e.procedures)this.writeNode("procedure",e.procedures[n],t);for(var r in e.observedProperties)this.writeNode("observedProperty",e.observedProperties[r],t);return e.foi&&this.writeNode("featureOfInterest",e.foi,t),this.writeNode("responseFormat",e,t),e.resultModel&&this.writeNode("resultModel",e,t),e.responseMode&&this.writeNode("responseMode",e,t),t},featureOfInterest:function(e){var t=this.createElementNSPlus("featureOfInterest");return this.writeNode("ObjectID",e.objectId,t),t},ObjectID:function(e){return this.createElementNSPlus("ObjectID",{value:e})},responseFormat:function(e){return this.createElementNSPlus("responseFormat",{value:e.responseFormat})},procedure:function(e){return this.createElementNSPlus("procedure",{value:e})},offering:function(e){return this.createElementNSPlus("offering",{value:e.offering})},observedProperty:function(e){return this.createElementNSPlus("observedProperty",{value:e})},eventTime:function(e){var t=this.createElementNSPlus("eventTime");return"latest"===e.eventTime&&this.writeNode("ogc:TM_Equals",e,t),t},resultModel:function(e){return this.createElementNSPlus("resultModel",{value:e.resultModel})},responseMode:function(e){return this.createElementNSPlus("responseMode",{value:e.responseMode})}},ogc:{TM_Equals:function(e){var t=this.createElementNSPlus("ogc:TM_Equals");return this.writeNode("ogc:PropertyName",{property:"urn:ogc:data:time:iso8601"},t),"latest"===e.eventTime&&this.writeNode("gml:TimeInstant",{value:"latest"},t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})}},gml:{TimeInstant:function(e){var t=this.createElementNSPlus("gml:TimeInstant");return this.writeNode("gml:timePosition",e,t),t},timePosition:function(e){return this.createElementNSPlus("gml:timePosition",{value:e.value})}}},CLASS_NAME:"OpenLayers.Format.SOSGetObservation"}),OpenLayers.Control.UTFGrid=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,layers:null,defaultHandlerOptions:{delay:300,pixelTolerance:4,stopMove:!1,single:!0,"double":!1,stopSingle:!1,stopDouble:!1},handlerMode:"click",setHandler:function(e){this.handlerMode=e,this.resetHandler()},resetHandler:function(){return this.handler&&(this.handler.deactivate(),this.handler.destroy(),this.handler=null),"hover"==this.handlerMode?this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.reset},this.handlerOptions):"click"==this.handlerMode?this.handler=new OpenLayers.Handler.Click(this,{click:this.handleEvent},this.handlerOptions):"move"==this.handlerMode&&(this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.handleEvent},this.handlerOptions)),this.handler?!0:!1},initialize:function(e){e=e||{},e.handlerOptions=e.handlerOptions||this.defaultHandlerOptions,OpenLayers.Control.prototype.initialize.apply(this,[e]),this.resetHandler()},handleEvent:function(e){if(null==e)this.reset();else{var t=this.map.getLonLatFromPixel(e.xy);if(t){var n=this.findLayers();if(0<n.length){for(var r={},i,s,o=0,u=n.length;o<u;o++)i=n[o],s=OpenLayers.Util.indexOf(this.map.layers,i),r[s]=i.getFeatureInfo(t);this.callback(r,t,e.xy)}}}},callback:function(){},reset:function(){this.callback(null)},findLayers:function(){for(var e=this.layers||this.map.layers,t=[],n,r=e.length-1;0<=r;--r)n=e[r],n instanceof OpenLayers.Layer.UTFGrid&&t.push(n);return t},CLASS_NAME:"OpenLayers.Control.UTFGrid"}),OpenLayers.Format.CQL=function(){function e(e){function t(){var e=i.pop();switch(e.type){case"LOGICAL":var n=t(),o=t();return new OpenLayers.Filter.Logical({filters:[o,n],type:s[e.text.toUpperCase()]});case"NOT":return n=t(),new OpenLayers.Filter.Logical({filters:[n],type:OpenLayers.Filter.Logical.NOT});case"BETWEEN":return i.pop(),o=t(),e=t(),n=t(),new OpenLayers.Filter.Comparison({property:n,lowerBoundary:e,upperBoundary:o,type:OpenLayers.Filter.Comparison.BETWEEN});case"COMPARISON":return o=t(),n=t(),new OpenLayers.Filter.Comparison({property:n,value:o,type:r[e.text.toUpperCase()]});case"VALUE":return/^'.*'$/.test(e.text)?e.text.substr(1,e.text.length-2):Number(e.text);case"SPATIAL":switch(e.text.toUpperCase()){case"BBOX":var n=t(),e=t(),o=t(),u=t(),a=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:a,value:OpenLayers.Bounds.fromArray([u,o,e,n])});case"INTERSECTS":return o=t(),n=t(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:n,value:o});case"WITHIN":return o=t(),n=t(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.WITHIN,property:n,value:o});case"CONTAINS":return o=t(),n=t(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.CONTAINS,property:n,value:o});case"DWITHIN":return e=t(),o=t(),n=t(),new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,value:o,property:n,distance:Number(e)})};case"GEOMETRY":return OpenLayers.Geometry.fromWKT(e.text);default:return e.text}}for(var n=[],i=[];e.length;){var o=e.shift();switch(o.type){case"PROPERTY":case"GEOMETRY":case"VALUE":i.push(o);break;case"COMPARISON":case"BETWEEN":case"LOGICAL":for(var a=u[o.type];0<n.length&&u[n[n.length-1].type]<=a;)i.push(n.pop());n.push(o);break;case"SPATIAL":case"NOT":case"LPAREN":n.push(o);break;case"RPAREN":for(;0<n.length&&"LPAREN"!=n[n.length-1].type;)i.push(n.pop());n.pop(),0<n.length&&"SPATIAL"==n[n.length-1].type&&i.push(n.pop());case"COMMA":case"END":break;default:throw Error("Unknown token type "+o.type)}}for(;0<n.length;)i.push(n.pop());e=t();if(0<i.length){e="Remaining tokens after building AST: \n";for(n=i.length-1;0<=n;n--)e+=i[n].type+": "+i[n].text+"\n";throw Error(e)}return e}var t={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('\w+'|\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var n=e.length,t=e.indexOf("(",t[0].length);if(-1<t)for(var r=1;t<n&&0<r;)switch(t++,e.charAt(t)){case"(":r++;break;case")":r--}return[e.substr(0,t+1)]}},END:/^$/},n={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA"],BETWEEN:["VALUE"],COMPARISON:["VALUE"],COMMA
:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},r={"=":OpenLayers.Filter.Comparison.EQUAL_TO,"<>":OpenLayers.Filter.Comparison.NOT_EQUAL_TO,"<":OpenLayers.Filter.Comparison.LESS_THAN,"<=":OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,">":OpenLayers.Filter.Comparison.GREATER_THAN,">=":OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,LIKE:OpenLayers.Filter.Comparison.LIKE,BETWEEN:OpenLayers.Filter.Comparison.BETWEEN},i={},s={AND:OpenLayers.Filter.Logical.AND,OR:OpenLayers.Filter.Logical.OR},o={},u={RPAREN:3,LOGICAL:2,COMPARISON:1},a;for(a in r)r.hasOwnProperty(a)&&(i[r[a]]=a);for(a in s)s.hasOwnProperty(a)&&(o[s[a]]=a);return OpenLayers.Class(OpenLayers.Format,{read:function(r){var i=r,r=[],s,o=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{e:{s=o;for(var u=void 0,o=void 0,a=s.length,u=0;u<a;u++){var o=s[u],f=t[o]instanceof RegExp?t[o].exec(i):(0,t[o])(i);if(f){s=f[0],i=i.substr(s.length).replace(/^\s*/,""),s={type:o,text:s,remainder:i};break e}}r="ERROR: In parsing: ["+i+"], expected one of: ";for(u=0;u<a;u++)o=s[u],r+="\n    "+o+": "+t[o];throw Error(r)}i=s.remainder,o=n[s.type];if("END"!=s.type&&!o)throw Error("No follows list for "+s.type);r.push(s)}while("END"!=s.type);return r=e(r),this.keepData&&(this.data=r),r},write:function(e){if(e instanceof OpenLayers.Geometry)return e.toString();switch(e.CLASS_NAME){case"OpenLayers.Filter.Spatial":switch(e.type){case OpenLayers.Filter.Spatial.BBOX:return"BBOX("+e.property+","+e.value.toBBOX()+")";case OpenLayers.Filter.Spatial.DWITHIN:return"DWITHIN("+e.property+", "+this.write(e.value)+", "+e.distance+")";case OpenLayers.Filter.Spatial.WITHIN:return"WITHIN("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.INTERSECTS:return"INTERSECTS("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.CONTAINS:return"CONTAINS("+e.property+", "+this.write(e.value)+")";default:throw Error("Unknown spatial filter type: "+e.type)};case"OpenLayers.Filter.Logical":if(e.type==OpenLayers.Filter.Logical.NOT)return"NOT ("+this.write(e.filters[0])+")";for(var t="(",n=!0,r=0;r<e.filters.length;r++)n?n=!1:t+=") "+o[e.type]+" (",t+=this.write(e.filters[r]);return t+")";case"OpenLayers.Filter.Comparison":return e.type==OpenLayers.Filter.Comparison.BETWEEN?e.property+" BETWEEN "+this.write(e.lowerBoundary)+" AND "+this.write(e.upperBoundary):e.property+" "+i[e.type]+" "+this.write(e.value);case void 0:if("string"==typeof e)return"'"+e+"'";if("number"==typeof e)return""+e;default:throw Error("Can't encode: "+e.CLASS_NAME+" "+e)}},CLASS_NAME:"OpenLayers.Format.CQL"})}(),OpenLayers.Control.Split=OpenLayers.Class(OpenLayers.Control,{layer:null,source:null,sourceOptions:null,tolerance:null,edge:!0,deferDelete:!1,mutual:!0,targetFilter:null,sourceFilter:null,handler:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.source&&this.setSource(this.options.source)},setSource:function(e){this.active?(this.deactivate(),this.handler&&(this.handler.destroy(),delete this.handler),this.source=e,this.activate()):this.source=e},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&(this.source?this.source.events&&this.source.events.on({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}):(this.handler||(this.handler=new OpenLayers.Handler.Path(this,{done:function(e){this.onSketchComplete({feature:new OpenLayers.Feature.Vector(e)})}},{layerOptions:this.sourceOptions})),this.handler.activate())),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.source&&this.source.events&&this.layer.events.un({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}),e},onSketchComplete:function(e){return this.feature=null,!this.considerSplit(e.feature)},afterFeatureModified:function(e){e.modified&&"function"==typeof e.feature.geometry.split&&(this.feature=e.feature,this.considerSplit(e.feature))},removeByGeometry:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n].geometry===t){e.splice(n,1);break}},isEligible:function(e){return e.geometry?e.state!==OpenLayers.State.DELETE&&"function"==typeof e.geometry.split&&this.feature!==e&&(!this.targetFilter||this.targetFilter.evaluate(e.attributes)):!1},considerSplit:function(e){var t=!1,n=!1;if(!this.sourceFilter||this.sourceFilter.evaluate(e.attributes)){for(var r=this.layer&&this.layer.features||[],i,s,o=[],u=[],a=this.layer===this.source&&this.mutual,f={edge:this.edge,tolerance:this.tolerance,mutual:a},l=[e.geometry],c,h,p,d=0,v=r.length;d<v;++d)if(c=r[d],this.isEligible(c)){h=[c.geometry];for(var m=0;m<l.length;++m){p=l[m];for(var g=0;g<h.length;++g)if(i=h[g],p.getBounds().intersectsBounds(i.getBounds())&&(i=p.split(i,f)))if(s=this.events.triggerEvent("beforesplit",{source:e,target:c}),!1!==s&&(a&&(s=i[0],1<s.length&&(s.unshift(m,1),Array.prototype.splice.apply(l,s),m+=s.length-3),i=i[1]),1<i.length))i.unshift(g,1),Array.prototype.splice.apply(h,i),g+=i.length-3}h&&1<h.length&&(this.geomsToFeatures(c,h),this.events.triggerEvent("split",{original:c,features:h}),Array.prototype.push.apply(o,h),u.push(c),n=!0)}l&&1<l.length&&(this.geomsToFeatures(e,l),this.events.triggerEvent("split",{original:e,features:l}),Array.prototype.push.apply(o,l),u.push(e),t=!0);if(t||n){if(this.deferDelete){r=[],d=0;for(v=u.length;d<v;++d)n=u[d],n.state===OpenLayers.State.INSERT?r.push(n):(n.state=OpenLayers.State.DELETE,this.layer.drawFeature(n));this.layer.destroyFeatures(r,{silent:!0}),d=0;for(v=o.length;d<v;++d)o[d].state=OpenLayers.State.INSERT}else this.layer.destroyFeatures(u,{silent:!0});this.layer.addFeatures(o,{silent:!0}),this.events.triggerEvent("aftersplit",{source:e,features:o})}}return t},geomsToFeatures:function(e,t){var n=e.clone();delete n.geometry;for(var r,i=0,s=t.length;i<s;++i)r=n.clone(),r.geometry=t[i],r.state=OpenLayers.State.INSERT,t[i]=r},destroy:function(){this.active&&this.deactivate(),OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Split"}),OpenLayers.Layer.WMTS=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,version:"1.0.0",requestEncoding:"KVP",url:null,layer:null,matrixSet:null,style:null,format:"image/jpeg",tileOrigin:null,tileFullExtent:null,formatSuffix:null,matrixIds:null,dimensions:null,params:null,zoomOffset:0,serverResolutions:null,formatSuffixMap:{"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"},matrix:null,initialize:function(e){var t={url:!0,layer:!0,style:!0,matrixSet:!0},n;for(n in t)if(!(n in e))throw Error("Missing property '"+n+"' in layer configuration.");e.params=OpenLayers.Util.upperCaseObject(e.params),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e.name,e.url,e.params,e]),this.formatSuffix||(this.formatSuffix=this.formatSuffixMap[this.format]||this.format.split("/").pop());if(this.matrixIds&&(e=this.matrixIds.length)&&"string"==typeof this.matrixIds[0]){t=this.matrixIds,this.matrixIds=Array(e);for(n=0;n<e;++n)this.matrixIds[n]={identifier:t[n]}}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.updateMatrixProperties()},updateMatrixProperties:function(){if(this.matrix=this.getMatrix())if(this.matrix.topLeftCorner&&(this.tileOrigin=this.matrix.topLeftCorner),this.matrix.tileWidth&&this.matrix.tileHeight&&(this.tileSize=new OpenLayers.Size(this.matrix.tileWidth,this.matrix.tileHeight)),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.top)),!this.tileFullExtent)this.tileFullExtent=this.maxExtent},moveTo:function(e,t,n){return(t||!this.matrix)&&this.updateMatrixProperties(),OpenLayers.Layer.Grid.prototype.moveTo.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMTS(this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getIdentifier:function(){return null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,this.getServerResolution()):this.getServerZoom()+this.zoomOffset},getMatrix:function(){var e;if(!this.matrixIds||0===this.matrixIds.length)e={identifier:this.getIdentifier()};else if("scaleDenominator"in this.matrixIds[0])for(var t=OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[this.units]*this.getServerResolution()/28e-5,n=Number.POSITIVE_INFINITY,r,i=0,s=this.matrixIds.length;i<s;++i)r=Math.abs(1-this.matrixIds[i].scaleDenominator/t),r<n&&(n=r,e=this.matrixIds[i]);else e=this.matrixIds[this.getIdentifier()];return e},getTileInfo:function(e){var t=this.getServerResolution(),n=(e.lon-this.tileOrigin.lon)/(t*this.tileSize.w),e=(this.tileOrigin.lat-e.lat)/(t*this.tileSize.h),t=Math.floor(n),r=Math.floor(e);return{col:t,row:r,i:Math.floor((n-t)*this.tileSize.w),j:Math.floor((e-r)*this.tileSize.h)}},getURL:function(e){var e=this.adjustBounds(e),t="";if(!this.tileFullExtent||this.tileFullExtent.intersectsBounds(e)){var n=this.getTileInfo(e.getCenterLonLat()),e=this.dimensions;if("REST"===this.requestEncoding.toUpperCase())if(t=this.params,"string"==typeof this.url&&-1!==this.url.indexOf("{")){var r=this.url.replace(/\{/g,"${"),n={style:this.style,Style:this.style,TileMatrixSet:this.matrixSet,TileMatrix:this.matrix.identifier,TileRow:n.row,TileCol:n.col};if(e){var i,s;for(s=e.length-1;0<=s;--s)i=e[s],n[i]=t[i.toUpperCase()]}t=OpenLayers.String.format(r,n)}else{r=this.version+"/"+this.layer+"/"+this.style+"/";if(e)for(s=0;s<e.length;s++)t[e[s]]&&(r=r+t[e[s]]+"/");r=r+this.matrixSet+"/"+this.matrix.identifier+"/"+n.row+"/"+n.col+"."+this.formatSuffix,t=OpenLayers.Util.isArray(this.url)?this.selectUrl(r,this.url):this.url,t.match(/\/$/)||(t+="/"),t+=r}else"KVP"===this.requestEncoding.toUpperCase()&&(t={SERVICE:"WMTS",REQUEST:"GetTile",VERSION:this.version,LAYER:this.layer,STYLE:this.style,TILEMATRIXSET:this.matrixSet,TILEMATRIX:this.matrix.identifier,TILEROW:n.row,TILECOL:n.col,FORMAT:this.format},t=OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,[t]))}return t},mergeNewParams:function(e){if("KVP"===this.requestEncoding.toUpperCase())return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,[OpenLayers.Util.upperCaseObject(e)])},CLASS_NAME:"OpenLayers.Layer.WMTS"}),OpenLayers.Protocol.SOS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol,{fois:null,formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),n=this.format,n=OpenLayers.Format.XML.prototype.write.apply(n,[n.writeNode("sos:GetFeatureOfInterest",{fois:this.fois})]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),data:n}),t},handleRead:function(e,t){if(t.callback){var n=e.priv;200<=n.status&&300>n.status?(e.features=this.parseFeatures(n),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e)}},parseFeatures:function(e){var t=e.responseXML;if(!t||!t.documentElement)t=e.responseText;return!t||0>=t.length?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.SOS.v1_0_0"}),OpenLayers.Layer.KaMapCache=OpenLayers.Class(OpenLayers.Layer.KaMap,{IMAGE_EXTENSIONS:{jpeg:"jpg",gif:"gif",png:"png",png8:"png",png24:"png",dithered:"png"},DEFAULT_FORMAT:"jpeg",initialize:function(e,t,n,r){OpenLayers.Layer.KaMap.prototype.initialize.apply(this,arguments),this.extension=this.IMAGE_EXTENSIONS[this.params.i.toLowerCase()||this.DEFAULT_FORMAT]},getURL:function(e){var e=this.adjustBounds(e),t=this.map.getResolution(),n=Math.round(1e4*this.map.getScale())/1e4,r=Math.round(e.left/t),e=-Math.round(e.top/t),t=Math.floor(r/this.tileSize.w/this.params.metaTileSize.w)*this.tileSize.w*this.params.metaTileSize.w,i=Math.floor(e/this.tileSize.h/this.params.metaTileSize.h)*this.tileSize.h*this.params.metaTileSize.h,n=["/",this.params.map,"/",n,"/",this.params.g.replace(/\s/g,"_"),"/def/t",i,"/l",t,"/t",e,"l",r,".",this.extension],r=this.url;return OpenLayers.Util.isArray(r)&&(r=this.selectUrl(n.join(""),r)),r+n.join("")},CLASS_NAME:"OpenLayers.Layer.KaMapCache"}),OpenLayers.Protocol.WFS.v1_1_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.1.0",initialize:function(e){OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this,arguments),this.outputFormat&&!this.readFormat&&("gml2"==this.outputFormat.toLowerCase()?this.readFormat=new OpenLayers.Format.GML.v2({featureType:this.featureType,featureNS:this.featureNS,geometryName:this.geometryName}):"json"==this.outputFormat.toLowerCase()&&(this.readFormat=new OpenLayers.Format.GeoJSON))},CLASS_NAME:"OpenLayers.Protocol.WFS.v1_1_0"}),OpenLayers.Format.WMSCapabilities.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.1",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1"}),OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1,{version:"1.1.1",profile:"WMSC",readers:{wms:OpenLayers.Util.applyDefaults({VendorSpecificCapabilities:function(e,t){t.vendorSpecific={tileSets:[]},this.readChildNodes(e,t.vendorSpecific)},TileSet:function(e,t){var n={srs:{},bbox:{},resolutions:[]};this.readChildNodes(e,n),t.tileSets.push(n)},Resolutions:function(e,t){for(var n=this.getChildValue(e).split(" "),r=0,i=n.length;r<i;r++)""!=n[r]&&t.resolutions.push(parseFloat(n[r]))},Width:function(e,t){t.width=parseInt(this.getChildValue(e))},Height:function(e,t){t.height=parseInt(this.getChildValue(e))},Layers:function(e,t){t.layers=this.getChildValue(e)},Styles:function(e,t){t.styles=this.getChildValue(e)}},OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"}),OpenLayers.Format.WMSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.0",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){for(var n=this.getChildValue(e).split(/ +/),r=0,i=n.length;r<i;r++)t.srs[n[r]]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_0"}),OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{roundedCorner:!1,roundedCornerColor:"darkblue",layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[],this.roundedCorner&&OpenLayers.Console.warn("roundedCorner option is deprecated")},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(e){e=e.buttonElement,e===this.minimizeDiv?this.minimizeControl():e===this.maximizeDiv?this.maximizeControl():e._layerSwitcher===this.id&&(e["for"]&&(e=document.getElementById(e["for"])),e.disabled||("radio"==e.type?(e.checked=!0,this.map.setBaseLayer(this.map.getLayer(e._layer))):(e.checked=!e.checked,this.updateMap())))},clearLayersArray:function(e){this[e+"LayersDiv"].innerHTML="",this[e+"Layers"]=[]},checkRedraw:function(){var e=!1;if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)e=!0;else for(var t=0,n=this.layerStates.length;t<n;t++){var r=this.layerStates[t],i=this.map.layers[t];if(r.name!=i.name||r.inRange!=i.inRange||r.id!=i.id||r.visibility!=i.visibility){e=!0;break}}return e},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var e=!1,t=!1,n=this.map.layers.length;this.layerStates=Array(n);for(var r=0;r<n;r++){var i=this.map.layers[r];this.layerStates[r]={name:i.name,visibility:i.visibility,inRange:i.inRange,id:i.id}}var s=this.map.layers.slice();this.ascending||s.reverse(),r=0;for(n=s.length;r<n;r++){var i=s[r],o=i.isBaseLayer;if(i.displayInLayerSwitcher){o?t=!0:e=!0;var u=o?i==this.map.baseLayer:i.getVisibility(),a=document.createElement("input");a.id=this.id+"_input_"+i.name,a.name=o?this.id+"_baseLayers":i.name,a.type=o?"radio":"checkbox",a.value=i.name,a.checked=u,a.defaultChecked=u,a.className="olButton",a._layer=i.id,a._layerSwitcher=this.id,!o&&!i.inRange&&(a.disabled=!0),u=document.createElement("label"),u["for"]=a.id,OpenLayers.Element.addClass(u,"labelSpan olButton"),u._layer=i.id,u._layerSwitcher=this.id,!o&&!i.inRange&&(u.style.color="gray"),u.innerHTML=i.name,u.style.verticalAlign=o?"bottom":"baseline";var f=document.createElement("br");(o?this.baseLayers:this.dataLayers).push({layer:i,inputElem:a,labelSpan:u}),i=o?this.baseLayersDiv:this.dataLayersDiv,i.appendChild(a),i.appendChild(u),i.appendChild(f)}}return this.dataLbl.style.display=e?"":"none",this.baseLbl.style.display=t?"":"none",this.div},updateMap:function(){for(var e=0,t=this.baseLayers.length;e<t;e++){var n=this.baseLayers[e];n.inputElem.checked&&this.map.setBaseLayer(n.layer,!1)}e=0;for(t=this.dataLayers.length;e<t;e++)n=this.dataLayers[e],n.layer.setVisibility(n.inputElem.checked)},maximizeControl:function(e){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=e&&OpenLayers.Event.stop(e)},showControls:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":"",this.layersDiv.style.display=e?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv),this.roundedCorner&&(OpenLayers.Rico.Corner.round(this.div,{corners:"tl bl",bgColor:"transparent",color:this.roundedCornerColor,blend:!1}),OpenLayers.Rico.Corner.changeOpacity(this.layersDiv,.75));var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),OpenLayers.Format.Atom=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{atom:"http://www.w3.org/2005/Atom",georss:"http://www.georss.org/georss"},feedTitle:"untitled",defaultEntryTitle:"untitled",gmlParser:null,xy:!1,read:function(e){return"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),this.parseFeatures(e)},write:function(e){var t;if(OpenLayers.Util.isArray(e)){t=this.createElementNSPlus("atom:feed"),t.appendChild(this.createElementNSPlus("atom:title",{value:this.feedTitle}));for(var n=0,r=e.length;n<r;n++)t.appendChild(this.buildEntryNode(e[n]))}else t=this.buildEntryNode(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},buildContentNode:function(e){var t=this.createElementNSPlus("atom:content",{attributes:{type:e.type||null}});if(e.src)t.setAttribute("src",e.src);else if("text"==e.type||null==e.type)t.appendChild(this.createTextNode(e.value));else if("html"==e.type){if("string"!=typeof e.value)throw"HTML content must be in form of an escaped string";t.appendChild(this.createTextNode(e.value))}else"xhtml"==e.type?t.appendChild(e.value):"xhtml"==e.type||e.type.match(/(\+|\/)xml$/)?t.appendChild(e.value):t.appendChild(this.createTextNode(e.value));return t},buildEntryNode:function(e){var t=e.attributes,n=t.atom||{},r=this.createElementNSPlus("atom:entry");if(n.authors)for(var i=OpenLayers.Util.isArray(n.authors)?n.authors:[n.authors],s=0,o=i.length;s<o;s++)r.appendChild(this.buildPersonConstructNode("author",i[s]));if(n.categories)for(var i=OpenLayers.Util.isArray(n.categories)?n.categories:[n.categories],u,s=0,o=i.length;s<o;s++)u=i[s],r.appendChild(this.createElementNSPlus("atom:category",{attributes:{term:u.term,scheme:u.scheme||null,label:u.label||null}}));n.content&&r.appendChild(this.buildContentNode(n.content));if(n.contributors){i=OpenLayers.Util.isArray(n.contributors)?n.contributors:[n.contributors],s=0;for(o=i.length;s<o;s++)r.appendChild(this.buildPersonConstructNode("contributor",i[s]))}e.fid&&r.appendChild(this.createElementNSPlus("atom:id",{value:e.fid}));if(n.links){i=OpenLayers.Util.isArray(n.links)?n.links:[n.links],s=0;for(o=i.length;s<o;s++)u=i[s],r.appendChild(this.createElementNSPlus("atom:link",{attributes:{href:u.href,rel:u.rel||null,type:u.type||null,hreflang:u.hreflang||null,title:u.title||null,length:u.length||null}}))}return n.published&&r.appendChild(this.createElementNSPlus("atom:published",{value:n.published})),n.rights&&r.appendChild(this.createElementNSPlus("atom:rights",{value:n.rights})),(n.summary||t.description)&&r.appendChild(this.createElementNSPlus("atom:summary",{value:n.summary||t.description})),r.appendChild(this.createElementNSPlus("atom:title",{value:n.title||t.title||this.defaultEntryTitle})),n.updated&&r.appendChild(this.createElementNSPlus("atom:updated",{value:n.updated})),e.geometry&&(t=this.createElementNSPlus("georss:where"),t.appendChild(this.buildGeometryNode(e.geometry)),r.appendChild(t)),r},initGmlParser:function(){this.gmlParser=new OpenLayers.Format.GML.v3({xy:this.xy,featureNS:"http://example.com#feature",internalProjection:this.internalProjection,externalProjection:this.externalProjection})},buildGeometryNode:function(e){return this.gmlParser||this.initGmlParser(),this.gmlParser.writeNode("feature:_geometry",e).firstChild},buildPersonConstructNode:function(e,t){var n=["uri","email"],r=this.createElementNSPlus("atom:"+e);r.appendChild(this.createElementNSPlus("atom:name",{value:t.name}));for(var i=0,s=n.length;i<s;i++)t[n[i]]&&r.appendChild(this.createElementNSPlus("atom:"+n[i],{value:t[n[i]]}));return r},getFirstChildValue:function(e,t,n,r){return(e=this.getElementsByTagNameNS(e,t,n))&&0<e.length?this.getChildValue(e[0],r):r},parseFeature:function(e){var t={},n=null,r=null,i=null,s=this.namespaces.atom;this.parsePersonConstructs(e,"author",t),r=this.getElementsByTagNameNS(e,s,"category"),0<r.length&&(t.categories=[]);for(var o=0,u=r.length;o<u;o++){n={},n.term=r[o].getAttribute("term");if(i=r[o].getAttribute("scheme"))n.scheme=i;if(i=r[o].getAttribute("label"))n.label=i;t.categories.push(n)}r=this.getElementsByTagNameNS(e,s,"content");if(0<r.length){n={};if(i=r[0].getAttribute("type"))n.type=i;(i=r[0].getAttribute("src"))?n.src=i:(n.value="text"==n.type||"html"==n.type||null==n.type?this.getFirstChildValue(e,s,"content",null):"xhtml"==n.type||n.type.match(/(\+|\/)xml$/)?this.getChildEl(r[0]):this.getFirstChildValue(e,s,"content",null),t.content=n)}this.parsePersonConstructs(e,"contributor",t),t.id=this.getFirstChildValue(e,s,"id",null),r=this.getElementsByTagNameNS(e,s,"link"),0<r.length&&(t.links=Array(r.length));for(var a=["rel","type","hreflang","title","length"],o=0,u=r.length;o<u;o++){n={},n.href=r[o].getAttribute("href");for(var f=0,l=a.length;f<l;f++)(i=r[o].getAttribute(a[f]))&&(n[a[f]]=i);t.links[o]=n}if(n=this.getFirstChildValue(e,s,"published",null))t.published=n;if(n=this.getFirstChildValue(e,s,"rights",null))t.rights=n;if(n=this.getFirstChildValue(e,s,"summary",null))t.summary=n;return t.title=this.getFirstChildValue(e,s,"title",null),t.updated=this.getFirstChildValue(e,s,"updated",null),n={title:t.title,description:t.summary,atom:t},e=this.parseLocations(e)[0],e=new OpenLayers.Feature.Vector(e,n),e.fid=t.id,e},parseFeatures:function(e){var t=[],n=this.getElementsByTagNameNS(e,this.namespaces.atom,"entry");0==n.length&&(n=[e]);for(var e=0,r=n.length;e<r;e++)t.push(this.parseFeature(n[e]));return t},parseLocations:function(e){var t=this.namespaces.georss,n={components:[]},r=this.getElementsByTagNameNS(e,t,"where");if(r&&0<r.length){this.gmlParser||this.initGmlParser();for(var i=0,s=r.length;i<s;i++)this.gmlParser.readChildNodes(r[i],n)}n=n.components;if((r=this.getElementsByTagNameNS(e,t,"point"))&&0<r.length){i=0;for(s=r.length;i<s;i++){var o=OpenLayers.String.trim(r[i].firstChild.nodeValue).split(/\s+/);2!=o.length&&(o=OpenLayers.String.trim(r[i].firstChild.nodeValue).split(/\s*,\s*/)),n.push(new OpenLayers.Geometry.Point(o[1],o[0]))}}var u=this.getElementsByTagNameNS(e,t,"line");if(u&&0<u.length)for(var a,i=0,s=u.length;i<s;i++){r=OpenLayers.String.trim(u[i].firstChild.nodeValue).split(/\s+/),a=[];for(var f=0,l=r.length;f<l;f+=2)o=new OpenLayers.Geometry.Point(r[f+1],r[f]),a.push(o);n.push(new OpenLayers.Geometry.LineString(a))}if((e=this.getElementsByTagNameNS(e,t,"polygon"))&&0<e.length){i=0;for(s=e.length;i<s;i++){r=OpenLayers.String.trim(e[i].firstChild.nodeValue).split(/\s+/),a=[],f=0;for(l=r.length;f<l;f+=2)o=new OpenLayers.Geometry.Point(r[f+1],r[f]),a.push(o);n.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(n)]))}}if(this.internalProjection&&this.externalProjection){i=0;for(s=n.length;i<s;i++)n[i]&&n[i].transform(this.externalProjection,this.internalProjection)}return n},parsePersonConstructs:function(e,t,n){for(var r=[],i=this.namespaces.atom,e=this.getElementsByTagNameNS(e,i,t),s=["uri","email"],o=0,u=e.length;o<u;o++){var a={};a.name=this.getFirstChildValue(e[o],i,"name",null);for(var f=0,l=s.length;f<l;f++){var c=this.getFirstChildValue(e[o],i,s[f],null);c&&(a[s[f]]=c)}r.push(a)}0<r.length&&(n[t+"s"]=r)},CLASS_NAME:"OpenLayers.Format.Atom"}),OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(e){var t,n=!0;switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:t=this.map.getSize(),this.map.pan(0,-0.75*t.h);break;case 34:t=this.map.getSize(),this.map.pan(0,.75*t.h);break;case 35:t=this.map.getSize(),this.map.pan(.75*t.w,0);break;case 36:t=this.map.getSize(),this.map.pan(-0.75*t.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:n=!1}n&&OpenLayers.Event.stop(e)},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),OpenLayers.Format.WMTSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0,{version:"1.0.0",namespaces:{ows:"http://www.opengis.net/ows/1.1",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink"},yx:null,defaultPrefix:"wmts",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e,e=OpenLayers.Util.extend({},OpenLayers.Format.WMTSCapabilities.prototype.yx),this.yx=OpenLayers.Util.extend(e,this.yx)},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t.version=this.version,t},readers:{wmts:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},t.contents.layers=[],t.contents.tileMatrixSets={},this.readChildNodes(e,t.contents)},Layer:function(e,t){var n={styles:[],formats:[],dimensions:[],tileMatrixSetLinks:[],layers:[]};this.readChildNodes(e,n),t.layers.push(n)},Style:function(e,t){var n={};n.isDefault="true"===e.getAttribute("isDefault"),this.readChildNodes(e,n),t.styles.push(n)},Format:function(e,t){t.formats.push(this.getChildValue(e))},TileMatrixSetLink:function(e,t){var n={};this.readChildNodes(e,n),t.tileMatrixSetLinks.push(n)},TileMatrixSet:function(e,t){if(t.layers){var n={matrixIds:[]};this.readChildNodes(e,n),t.tileMatrixSets[n.identifier]=n}else t.tileMatrixSet=this.getChildValue(e)},TileMatrix:function(e,t){var n={supportedCRS:t.supportedCRS};this.readChildNodes(e,n),t.matrixIds.push(n)},ScaleDenominator:function(e,t){t.scaleDenominator=parseFloat(this.getChildValue(e))},TopLeftCorner:function(e,t){var n=this.getChildValue(e).split(" "),r;t.supportedCRS&&(r=!!this.yx[t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/,"urn:ogc:def:crs:$1::$2")]),t.topLeftCorner=r?new OpenLayers.LonLat(n[1],n[0]):new OpenLayers.LonLat(n[0],n[1])},TileWidth:function(e,t){t.tileWidth=parseInt(this.getChildValue(e))},TileHeight:function(e,t){t.tileHeight=parseInt(this.getChildValue(e))},MatrixWidth:function(e,t){t.matrixWidth=parseInt(this.getChildValue(e))},MatrixHeight:function(e,t){t.matrixHeight=parseInt(this.getChildValue(e))},ResourceURL:function(e,t){t.resourceUrl=t.resourceUrl||{},t.resourceUrl[e.getAttribute("resourceType")]={format:e.getAttribute("format"),template:e.getAttribute("template")}},WSDL:function(e,t){t.wsdl={},t.wsdl.href=e.getAttribute("xlink:href")},ServiceMetadataURL:function(e,t){t.serviceMetadataUrl={},t.serviceMetadataUrl.href=e.getAttribute("xlink:href")},LegendURL:function(e,t){t.legend={},t.legend.href=e.getAttribute("xlink:href"),t.legend.format=e.getAttribute("format")},Dimension:function(e,t){var n={values:[]};this.readChildNodes(e,n),t.dimensions.push(n)},Default:function(e,t){t["default"]=this.getChildValue(e)},Value:function(e,t){t.values.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities.v1_0_0"}),Ext.define("Ux.InputTextMask",{constructor:function(e,t){t===undefined?this.clearWhenInvalid=!0:this.clearWhenInvalid=t,this.rawMask=e,this.viewMask="",this.maskArray=new Array;var n=0,r="";for(var i=0;i<e.length;i++)r?(r=="X"&&(r=""),e.charAt(i)=="X"?(this.maskArray[n]=r,n++,r=""):r+=e.charAt(i)):e.charAt(i)=="X"?(r+="X",this.viewMask+="_"):e.charAt(i)=="9"||e.charAt(i)=="L"||e.charAt(i)=="l"||e.charAt(i)=="A"?(this.viewMask+="_",this.maskArray[n]=e.charAt(i),n++):(this.viewMask+=e.charAt(i),this.maskArray[n]=RegExp.escape(e.charAt(i)),n++);return this.specialChars=this.viewMask.replace(/(L|l|9|A|_|X)/g,""),this},init:function(e){this.field=e,e.rendered?this.assignEl
():e.on("render",this.assignEl,this),e.on("blur",this.removeValueWhenInvalid,this),e.on("focus",this.processMaskFocus,this)},assignEl:function(){this.inputTextElement=this.field.inputEl.dom,this.field.inputEl.on("keypress",this.processKeyPress,this),this.field.inputEl.on("keydown",this.processKeyDown,this);if(Ext.isSafari||Ext.isIE)this.field.inputEl.on("paste",this.startTask,this),this.field.inputEl.on("cut",this.startTask,this);(Ext.isGecko||Ext.isOpera)&&this.field.inputEl.on("mousedown",this.setPreviousValue,this),Ext.isGecko&&this.field.inputEl.on("input",this.onInput,this),Ext.isOpera&&this.field.inputEl.on("input",this.onInputOpera,this)},onInput:function(){this.startTask(!1)},onInputOpera:function(){this.prevValueOpera?this.manageBackspaceAndDeleteOpera():this.startTask(!1)},manageBackspaceAndDeleteOpera:function(){this.inputTextElement.value=this.prevValueOpera.cursorPos.previousValue,this.manageTheText(this.prevValueOpera.keycode,this.prevValueOpera.cursorPos),this.prevValueOpera=null},setPreviousValue:function(e){this.oldCursorPos=this.getCursorPosition()},getValidatedKey:function(e,t){var n=this.maskArray[t.start];return n=="9"?e.pressedKey.match(/[0-9]/):n=="L"?e.pressedKey.match(/[A-Za-z]/)?e.pressedKey.toUpperCase():null:n=="l"?e.pressedKey.match(/[A-Za-z]/)?e.pressedKey.toLowerCase():null:n=="A"?e.pressedKey.match(/[A-Za-z0-9]/):n?e.pressedKey.match(new RegExp(n)):null},removeValueWhenInvalid:function(){this.clearWhenInvalid&&this.inputTextElement.value.indexOf("_")>-1&&(this.inputTextElement.value="")},managePaste:function(){if(this.oldCursorPos==null)return;var e=this.inputTextElement.value.substring(this.oldCursorPos.start,this.inputTextElement.value.length-(this.oldCursorPos.previousValue.length-this.oldCursorPos.end));this.oldCursorPos.start<this.oldCursorPos.end&&(this.oldCursorPos.previousValue=this.oldCursorPos.previousValue.substring(0,this.oldCursorPos.start)+this.viewMask.substring(this.oldCursorPos.start,this.oldCursorPos.end)+this.oldCursorPos.previousValue.substring(this.oldCursorPos.end,this.oldCursorPos.previousValue.length),e=e.substr(0,this.oldCursorPos.end-this.oldCursorPos.start)),this.inputTextElement.value=this.oldCursorPos.previousValue,keycode={unicode:"",isShiftPressed:!1,isTab:!1,isBackspace:!1,isLeftOrRightArrow:!1,isDelete:!1,pressedKey:""};var t=!1;for(var n=0;n<e.length;n++){keycode.pressedKey=e.substr(n,1),keycode.unicode=e.charCodeAt(n),this.oldCursorPos=this.skipMaskCharacters(keycode,this.oldCursorPos);if(this.oldCursorPos===!1)break;this.injectValue(keycode,this.oldCursorPos)&&(t=!0,this.moveCursorToPosition(keycode,this.oldCursorPos),this.oldCursorPos.previousValue=this.inputTextElement.value,this.oldCursorPos.start=this.oldCursorPos.start+1)}!t&&this.oldCursorPos!==!1&&this.moveCursorToPosition(null,this.oldCursorPos),this.oldCursorPos=null},processKeyDown:function(e){this.processMaskFormatting(e,"keydown")},processKeyPress:function(e){this.processMaskFormatting(e,"keypress")},startTask:function(e){this.task==undefined&&(this.task=new Ext.util.DelayedTask(this.managePaste,this)),e!==!1&&(this.oldCursorPos=this.getCursorPosition()),this.task.delay(0)},skipMaskCharacters:function(e,t){if(t.start!=t.end&&(e.isDelete||e.isBackspace))return t;while(this.specialChars.match(RegExp.escape(this.viewMask.charAt(e.isBackspace?t.start-1:t.start)))){e.isBackspace?t.dec():t.inc();if(t.start>=t.previousValue.length||t.start<0)return!1}return t},isManagedByKeyDown:function(e){return e.isDelete||e.isBackspace?!0:!1},processMaskFormatting:function(e,t){this.oldCursorPos=null;var n=this.getCursorPosition(),r=this.getKeyCode(e,t);if(r.unicode==0)return;if(r.unicode!=67&&r.unicode!=99||!e.ctrlKey){if(r.unicode!=88&&r.unicode!=120||!e.ctrlKey){if(r.unicode!=86&&r.unicode!=118||!e.ctrlKey){if((r.isBackspace||r.isDelete)&&Ext.isOpera){this.prevValueOpera={cursorPos:n,keycode:r};return}return t=="keydown"&&!this.isManagedByKeyDown(r)?!0:t=="keypress"&&this.isManagedByKeyDown(r)?!0:this.handleEventBubble(e,r,t)?!0:this.manageTheText(r,n)}this.startTask();return}this.startTask();return}return},manageTheText:function(e,t){return this.inputTextElement.value.length===0&&(this.inputTextElement.value=this.viewMask),t=this.skipMaskCharacters(e,t),t===!1?!1:(this.injectValue(e,t)&&this.moveCursorToPosition(e,t),!1)},processMaskFocus:function(){if(this.inputTextElement.value.length==0){var e=this.getCursorPosition();this.inputTextElement.value=this.viewMask,this.moveCursorToPosition(null,e)}},isManagedByBrowser:function(e,t,n){return(n!="keypress"||e.charCode!==0)&&n!="keydown"||t.unicode!=Ext.EventObject.TAB&&t.unicode!=Ext.EventObject.RETURN&&t.unicode!=Ext.EventObject.ENTER&&t.unicode!=Ext.EventObject.SHIFT&&t.unicode!=Ext.EventObject.CONTROL&&t.unicode!=Ext.EventObject.ESC&&t.unicode!=Ext.EventObject.PAGEUP&&t.unicode!=Ext.EventObject.PAGEDOWN&&t.unicode!=Ext.EventObject.END&&t.unicode!=Ext.EventObject.HOME&&t.unicode!=Ext.EventObject.LEFT&&t.unicode!=Ext.EventObject.UP&&t.unicode!=Ext.EventObject.RIGHT&&t.unicode!=Ext.EventObject.DOWN?!1:!0},handleEventBubble:function(e,t,n){try{return t&&this.isManagedByBrowser(e,t,n)?!0:(e.stopEvent(),!1)}catch(r){alert(r.message)}},getCursorPosition:function(){var e,t,n;return this.inputTextElement.createTextRange?(n=document.selection.createRange().duplicate(),n.moveEnd("character",this.inputTextElement.value.length),n.text===""?e=this.inputTextElement.value.length:e=this.inputTextElement.value.lastIndexOf(n.text),n=document.selection.createRange().duplicate(),n.moveStart("character",-this.inputTextElement.value.length),t=n.text.length):(e=this.inputTextElement.selectionStart,t=this.inputTextElement.selectionEnd),this.CursorPosition(e,t,n,this.inputTextElement.value)},moveCursorToPosition:function(e,t){var n=!e||e&&e.isBackspace?t.start:t.start+1;this.inputTextElement.createTextRange?(t.range.move("character",n),t.range.select()):(this.inputTextElement.selectionStart=n,this.inputTextElement.selectionEnd=n)},injectValue:function(e,t){if(!e.isDelete&&e.unicode==t.previousValue.charCodeAt(t.start))return!0;var n;return!e.isDelete&&!e.isBackspace?n=this.getValidatedKey(e,t):t.start==t.end?(n="_",e.isBackspace&&t.dec()):n=this.viewMask.substring(t.start,t.end),n?(this.inputTextElement.value=t.previousValue.substring(0,t.start)+n+t.previousValue.substring(t.start+n.length,t.previousValue.length),!0):!1},getKeyCode:function(e,t){var n={};return n.unicode=e.getKey(),n.isShiftPressed=e.shiftKey,n.isDelete=e.getKey()==Ext.EventObject.DELETE&&t=="keydown"||t=="keypress"&&e.charCode===0&&e.keyCode==Ext.EventObject.DELETE?!0:!1,n.isTab=e.getKey()==Ext.EventObject.TAB?!0:!1,n.isBackspace=e.getKey()==Ext.EventObject.BACKSPACE?!0:!1,n.isLeftOrRightArrow=e.getKey()==Ext.EventObject.LEFT||e.getKey()==Ext.EventObject.RIGHT?!0:!1,n.pressedKey=String.fromCharCode(n.unicode),n},CursorPosition:function(e,t,n,r){var i={};return i.start=isNaN(e)?0:e,i.end=isNaN(t)?0:t,i.range=n,i.previousValue=r,i.inc=function(){i.start++,i.end++},i.dec=function(){i.start--,i.end--},i}}),Ext.applyIf(RegExp,{escape:function(e){return(new String(e)).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}}),Ext.define("Ext.ux.grid.FilterRow",{init:function(e){this.grid=e,this.applyTemplate(),e.addClass("filter-row-grid"),e.on("staterestore",this.resetFilterRow,this),e.headerCt.on("columnresize",this.resizeFilterField,this),e.headerCt.on("columnmove",this.resetFilterRow,this),e.headerCt.on("columnshow",this.resetFilterRow,this),e.headerCt.on("columnhide",this.resetFilterRow,this)},applyTemplate:function(){var e=[];this.grid.checkboxModel==1&&e.push(this.createComponent(Ext.apply(this.addComponentItem(null)))),this.eachColumn(function(t){!t.filterField||t.dataIndex=="id"?(t.nofilter?t.filter1={}:t.addHeaderFilter&&!t.filter1&&t.dataIndex!="id"&&(t.filter1={},t.filter1.xtype=this.getFilterXtype(t.attrType)),t.filter1=Ext.apply(this.addComponentItem(t),t.filter1),t.filterField=this.createComponent(t.filter1)):t.hidden!=t.filterField.hidden&&t.filterField.setVisible(!t.hidden),t.filterField.xtype=="combo"||t.filterField.xtype=="datefield"?t.filterField.on("change",function(e){this.onChange(),e.lastValue=="right"?(e.removeCls("wrong").removeCls("play").removeCls("no-image"),e.addCls("right1")):e.lastValue=="wrong"?(e.removeCls("right").removeCls("play").removeCls("no-image"),e.addCls("wrong")):e.lastValue=="play"?(e.removeCls("wrong").removeCls("right").removeCls("no-image"),e.addCls("play")):(e.removeCls("wrong").removeCls("play").removeCls("right"),e.addCls("no-image"))},this):t.filterField.on("keypress",this.onKeyPress,this),t.filterField.xtype=="numberfield"&&this.numberfieldConfiguration(t),e.push(t.filterField)}),e.length>0&&this.renderSearchItems(e)},renderSearchItems:function(e){this.grid.addDocked(this.dockedFilter=Ext.create("Ext.container.Container",{id:this.grid.id+"docked-filter",weight:100,dock:"top",border:"1",baseCls:Ext.baseCSSPrefix+"grid-header-ct",items:e,layout:{type:"hbox"}}))},numberfieldConfiguration:function(e){e.filterField.hideTrigger=!0,e.filterField.keyNavEnabled=!1,e.filterField.mouseWheelEnabled=!1},addComponentItem:function(e){var t=!1,n=23,r="-1";e!=null&&(t=e.hidden,n=e.width,r=e.id);var i=this.getFilterDivId(r);return{id:i,hidden:t,xtype:"component",width:n,enableKeyEvents:!0,style:{margin:"0px"}}},createComponent:function(e){return Ext.ComponentManager.create(e)},resetFilterRow:function(){this.grid.removeDocked(this.grid.id+"docked-filter",!0),delete this.dockedFilter,this.applyTemplate()},onChange:function(){values=this.constructFilter(),this.loadGrid(values)},onKeyPress:function(e,t){t.getKey()==t.ENTER&&(values=this.constructFilter(),this.loadGrid(values))},resizeAllFilterFields:function(){this.eachFilterColumn(function(e,t){if(e.el)var n=e.getWidth();else var n=e.width;this.resizeFilterField(this.grid.headerCt,e,n)})},resizeFilterField:function(e,t,n){var r=t.filterField;r.setWidth(n)},scrollFilterField:function(e,t){var n=this.grid.headerCt.el.dom.firstChild.style.width;this.dockedFilter.el.dom.firstChild.style.width=n,this.dockedFilter.el.dom.scrollLeft=t.scrollLeft},getFilterDivId:function(e){return this.grid.id+"-filter-"+e},eachFilterColumn:function(e){this.eachColumn(function(t,n){t.filterField&&e.call(this,t,n)})},eachColumn:function(e){Ext.each(this.grid.columns,e,this)},constructFilter:function(){var e=[];return this.eachColumn(function(t){this.canAddFilterValue(t)&&e.push(this.getFilterQuery(t))}),e},canAddFilterValue:function(e){return e.filterField&&e.filterField.xtype!="component"&&e.filterField.getValue()!=""&&e.filterField.getValue()!=null},getFilterQuery:function(e,t){t=t||"eq";var n={};return n.type=this.getFilterType(e),n.field=e.dataIndex,n.comparison=t,n.value=this.getValue(e),n},loadGrid:function(e){this.grid.store.load({params:{filter1:JSON.stringify(e)}})},getFilterType:function(e){var t=e.filterField.xtype||e.attrType;switch(t){case"integer":case"nuberfield":t="numeric";break;case"datetime":case"xdatetime":t="datetime";break;case"date":case"datefield":t="date";break;case"string":case"textfield":case undefined:t="string"}return t},getFilterXtype:function(e){switch(e){case"integer":e="numberfield";break;case"datetime":case"date":e="datefield";break;case"string":case undefined:e="textfield"}return e},getValue:function(e){var t=e.filterField.xtype||e.attrType,n=e.filterField.getValue();switch(t){case"datetime":case"xdatetime":case"datefield":case"date":n=Ext.util.Format.date(n,"m/d/Y")}return n}}),Ext.ns("Netzke"),Ext.ns("Netzke.core"),Netzke.RelativeUrlRoot="",Netzke.RelativeExtUrl="/assets",Netzke.core.directMaxRetries=0,String.prototype.camelize||(String.prototype.camelize=function(e){var t=this,n=t.split("/");for(var r=0;r<n.length;r++){var i=n[r].split("_"),s=e&&r+1==n.length?1:0;for(var o=s;o<i.length;o++)i[o]=i[o].charAt(0).toUpperCase()+i[o].substring(1);n[r]=i.join("")}return t=n.join("::"),t}),String.prototype.capitalize||(String.prototype.capitalize=function(){var e=this.toLowerCase();return e=e.substring(0,1).toUpperCase()+e.substring(1),e}),String.prototype.humanize||(String.prototype.humanize=function(e){var t=this.toLowerCase();return t=t.replace(new RegExp("_id","g"),""),t=t.replace(new RegExp("_","g")," "),e||(t=t.capitalize()),t}),String.prototype.underscore||(String.prototype.underscore=function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}),Ext.ns("Ext.netzke"),Ext.ns("Netzke.page"),Ext.ns("Netzke.classes"),Ext.ns("Netzke.classes.Core"),Netzke.deprecationWarning=function(e){typeof console!="undefined"&&console.info("Netzke: "+e)},Netzke.warning=Netzke.deprecationWarning,Netzke.exception=function(e){throw"Netzke: "+e},Netzke.nLoadingFixRequests==undefined&&(Netzke.nLoadingFixRequests=0,Ext.Ajax.on("beforerequest",function(e,t){Netzke.nLoadingFixRequests+=1}),Ext.Ajax.on("requestcomplete",function(e,t){Netzke.nLoadingFixRequests-=1}),Ext.Ajax.on("requestexception",function(e,t){console.log("Exception"),Netzke.nLoadingFixRequests-=1}),Netzke.ajaxIsLoading=function(){return Netzke.nLoadingFixRequests>0}),Netzke.runningRequests=0,Netzke.isLoading=function(){return Netzke.runningRequests!=0},Netzke.chainApply=function(){var e={};return Ext.each(arguments,function(t){Ext.apply(e,t)}),e},Netzke.aliasMethodChain=function(e,t,n){e[t+"Without"+n.capitalize()]=e[t],e[t]=e[t+"With"+n.capitalize()]},Netzke.cache=[],Netzke.componentNotInSessionHandler=function(){window.location.reload()},Netzke.classes.Core.Mixin={},Netzke.componentMixin=Ext.applyIf(Netzke.classes.Core.Mixin,{isNetzke:!0,detectComponents:function(e){if(Ext.isObject(e))e.items&&this.detectComponents(e.items);else if(Ext.isArray(e)){var t=e;Ext.each(t,function(e,n){if(e.netzkeComponent){var r=e.netzkeComponent,i=this.netzkeComponents[r.camelize(!0)];if(!i)throw"Netzke: unknown component reference "+r;t[n]=Ext.apply(i,e),delete t[n].netzkeComponent}else e.items&&this.detectComponents(e.items)},this)}},evalCss:function(e){var t=Ext.fly(document.getElementsByTagName("head")[0]);Ext.core.DomHelper.append(t,{tag:"style",type:"text/css",html:e})},evalJs:function(code){eval(code)},localId:function(e){return this.id.replace(e.id+"__","")},bulkExecute:function(e){if(Ext.isArray(e))Ext.each(e,function(e){this.bulkExecute(e)},this);else for(var t in e)if(Ext.isFunction(this[t]))this[t].apply(this,[e[t]]);else{var n=this.getChildNetzkeComponent(t);if(!n)throw"Netzke: Unknown method or child component '"+t+"' in component '"+this.id+"'";n.bulkExecute(e[t])}},endpointUrl:function(e){return Netzke.RelativeUrlRoot+"/netzke/dispatcher?address="+this.id+"__"+e},callServer:function(e,t,n,r){Netzke.runningRequests++,t||(t={}),Ext.Ajax.request({params:t,url:this.endpointUrl(e),callback:function(e,t,i){t&&i.responseText&&(this.bulkExecute(Ext.decode(i.responseText)),typeof n=="function"&&(r||(r=this),n.apply(r,[this.latestResult]))),Netzke.runningRequests--},scope:this})},setResult:function(e){this.latestResult=e},componentNotInSession:function(){Netzke.componentNotInSessionHandler()}}),Ext.override(Ext.Container,{instantiateChild:function(e){Netzke.deprecationWarning("instantiateChild is deprecated");var t=Ext.createByAlias(e.alias,e);return this.insertNetzkeComponent(t),t},insertNetzkeComponent:function(e){this.removeChild(),this.add(e),this.isVisible()?this.doLayout():this.on("show",function(e){e.doLayout()},{single:!0})},getOwnerComponent:function(){return Netzke.deprecationWarning("getOwnerComponent is deprecated"),this.initialConfig.isNetzke?this:this.ownerCt?this.ownerCt.getOwnerComponent():null},getNetzkeComponent:function(){return Netzke.deprecationWarning("getNetzkeComponent is deprecated"),this.items?this.items.first():null},removeChild:function(){Netzke.deprecationWarning("removeChild is deprecated");var e=this.getNetzkeComponent();e&&this.remove(e)}}),Ext.Compat&&(Ext.Compat.showErrors=!0),Ext.TabPanel.prototype.idDelimiter="___",Ext.QuickTips.init(),Ext.state.Provider.prototype.set=Ext.emptyFn,function(){var e=4,t=1,n=Ext.getVersion("extjs"),r=n.getMajor(),i=n.getMinor(),s=""+e+"."+t+".x";(e!=r||t!=i)&&Netzke.warning("Ext JS "+s+" required (you have "+n.toString()+").")}(),Ext.define("Netzke.FeedbackGhost",{showFeedback:function(e){e||Netzke.exception("Netzke.FeedbackGhost#showFeedback: wrong number of arguments (0 for 1)"),Ext.isObject(e)?this.msg(e.level.camelize(),e.msg):Ext.isArray(e)?Ext.each(e,function(e){this.showFeedback(e)},this):this.msg(null,e)},msg:function(e,t){this.msgCt||(this.msgCt=Ext.core.DomHelper.insertFirst(document.body,{id:"msg-div"},!0));var n=Ext.String.format.apply(String,Array.prototype.slice.call(arguments,1)),r=Ext.core.DomHelper.append(this.msgCt,this.createBox(e,n),!0);r.hide(),r.slideIn("t").ghost("t",{delay:1e3,remove:!0})},createBox:function(e,t){return e?'<div class="msg"><h3>'+e+"</h3><p>"+t+"</p></div>":'<div class="msg"><p>'+t+"</p></div>"}}),Netzke.componentMixin.feedbackGhost=Ext.create("Netzke.FeedbackGhost"),Ext.define("Netzke.classes.NetzkeRemotingProvider",{extend:"Ext.direct.RemotingProvider",getCallData:function(e){return{act:e.action,method:e.method,data:e.data,type:"rpc",tid:e.id}},addAction:function(e,t){var n=this.namespace[e]||(this.namespace[e]={});for(var r=0,i=t.length;r<i;r++)method=Ext.create("Ext.direct.RemotingMethod",t[r]),n[method.name]=this.createHandler(e,method)},getTransaction:function(e){return e.$className=="Ext.direct.Transaction"?e:this.callParent([e])}}),Netzke.directProvider=new Netzke.classes.NetzkeRemotingProvider({type:"remoting",url:Netzke.RelativeUrlRoot+"/netzke/direct/",namespace:"Netzke.providers",actions:{},maxRetries:Netzke.core.directMaxRetries,enableBuffer:!0,timeout:3e4}),Ext.Direct.addProvider(Netzke.directProvider),Ext.apply(Netzke.classes.Core.Mixin,{componentLoadMask:!0,initComponentWithNetzke:function(){this.normalizeActions(),this.detectActions(this),this.detectComponents(this.items),this.normalizeTools(),this.processEndpoints(),this.processPlugins(),this.callbackHash={},this.componentsBeingLoaded={},this.mode==="config"?this.title?this.title=this.title+" ["+this.id+"]":this.title="["+this.id+"]":this.title||(this.title=this.id.humanize()),this.initComponentWithoutNetzke()},processEndpoints:function(){var e=this.endpoints||[];e.push("deliver_component");var t=[],n=this;Ext.each(e,function(e){t.push({name:e.camelize(!0),len:1}),this[e.camelize(!0)]=function(t,r,i){Netzke.runningRequests++,i=i||n,Netzke.providers[this.id][e.camelize(!0)].call(i,t,function(e,t){if(t.message)throw console.error("RPC event indicates an error: ",t),new Error(t.message);n.bulkExecute(e),typeof r=="function"&&r.call(i,n.latestResult),Netzke.runningRequests--})}},this),Netzke.directProvider.addAction(this.id,t)},normalizeTools:function(){if(this.tools){var e=[];Ext.each(this.tools,function(t){this.addEvents(t.id+"click");var n=Ext.Function.bind(this.toolActionHandler,this,[t]);e.push({type:t,handler:n,scope:this})},this),this.tools=e}},normalizeActions:function(){var e={};for(var t in this.actions){this.addEvents(t+"click");var n=Ext.apply({},this.actions[t]);n.customHandler=n.handler,n.handler=Ext.Function.bind(this.actionHandler,this),n.name=t,e[t]=new Ext.Action(n)}delete this.actions,this.actions=e},detectActions:function(e){if(Ext.isObject(e))typeof e.handler=="string"&&Ext.isFunction(this[e.handler.camelize(!0)])&&(e.handler=this[e.handler.camelize(!0)].createDelegate(this)),Ext.each(["bbar","tbar","fbar","menu","items","contextMenu","buttons","dockedItems"],function(t){if(e[t]){var n=[].concat(e[t]);delete e[t],e[t]=n,this.detectActions(e[t])}},this);else if(Ext.isArray(e)){var t=e;Ext.each(t,function(e,n){if(Ext.isObject(e))if(e.action){if(!this.actions[e.action.camelize(!0)])throw"Netzke: action '"+e.action+"' not defined";t[n]=this.actions[e.action.camelize(!0)],delete e}else this.detectActions(e)},this)}},loadNetzkeComponent:function(e){e.id&&(e.name=e.id,Netzke.deprecationWarning("Using 'id' in loadComponent is deprecated. Use 'name' instead.")),e.name=e.name.underscore();var t=e.params||{};t.name=e.name,t.cache=Netzke.cache.join();var n=this.componentsBeingLoaded[e.name]=e,r=e.container&&Ext.isString(e.container)?Ext.getCmp(e.container):e.container;n.container=r;var i=(r||this).getEl();this.componentLoadMask&&i&&(n.loadMaskCmp=new Ext.LoadMask(i,this.componentLoadMask),n.loadMaskCmp.show()),this.deliverComponent(t)},loadComponent:function(e){Netzke.deprecationWarning("loadComponent is deprecated in favor of loadNetzkeComponent"),e.container=e.container||this.getId(),this.loadNetzkeComponent(e)},componentDelivered:function(e){var t=this.componentsBeingLoaded[e.name]||{};delete this.componentsBeingLoaded[e.name],t.loadMaskCmp&&(t.loadMaskCmp.hide(),t.loadMaskCmp.destroy());var n=Ext.createByAlias(e.alias,e);if(t.container){var r=t.container;t.append||r.removeAll(),r.add(n),r.isVisible()?r.doLayout():r.on("show",function(e){e.doLayout()},{single:!0})}t.callback&&t.callback.call(t.scope||this,n),this.fireEvent("componentload",n)},componentDeliveryFailed:function(e){var t=this.componentsBeingLoaded[e.componentName]||{};delete this.componentsBeingLoaded[e.componentName],t.loadMaskCmp&&(t.loadMaskCmp.hide(),t.loadMaskCmp.destroy()),this.netzkeFeedback({msg:e.msg,level:"Error"})},instantiateAndRenderComponent:function(e,t){var n;if(t){var r=Ext.getCmp(t);n=r.instantiateChild(e)}else n=this.instantiateChild(e);return n},getParentNetzkeComponent:function(){var e=this.id.split("__");e.pop();var t=e.join("__");return t===""?null:Ext.getCmp(t)},getParent:function(){return Netzke.deprecationWarning("getParent is deprecated in favor of getParentNetzkeComponent"),this.getParentNetzkeComponent()},reload:function(){var e=this.getParentNetzkeComponent();e?e.loadNetzkeComponent({id:this.localId(e),container:this.ownerCt.id}):window.location.reload()},reconfigure:function(e){this.ownerCt.instantiateChild(e)},instantiateChildNetzkeComponent:function(e){return e=e.camelize(!0),Ext.createByAlias(this.netzkeComponents[e].alias,this.netzkeComponents[e])},getChildNetzkeComponent:function(e){if(e==="")return this;e=e.underscore();var t=e.split("__");if(t[0]==="parent"){t.shift();var n=t.join("__");return this.getParentNetzkeComponent().getChildNetzkeComponent(n)}return Ext.getCmp(this.id+"__"+e)},getChildComponent:function(e){return Netzke.deprecationWarning("getChildComponent is deprecated in favor of getChildNetzkeComponent"),this.getChildNetzkeComponent(e)},netzkeFeedback:function(e){if(this.initialConfig&&this.initialConfig.quiet)return!1;if(this.feedbackGhost)this.feedbackGhost.showFeedback(e);else if(typeof e=="string")alert(e);else{var t="";Ext.each(e,function(e){t+=e.msg+"\n"}),t!=""&&alert(t)}},feedback:function(e){Netzke.deprecationWarning("feedback is deprecated in favor of netzkeFeedback"),this.netzkeFeedback(e)},actionHandler:function(e){var t=e.name;if(this.fireEvent(t+"click",e)){var n=this.actions[t],r=n.initialConfig.customHandler,i=r&&r.camelize(!0)||"on"+t.camelize();if(!this[i])throw"Netzke: action handler '"+i+"' is undefined";this[i](e)}},toolActionHandler:function(e){if(this.fireEvent(e.id+"click")){var t="on"+e.camelize();if(!this[t])throw"Netzke: handler for tool '"+e+"' is undefined";this[t]()}},processPlugins:function(){this.netzkePlugins&&(this.plugins||(this.plugins=[]),Ext.each(this.netzkePlugins,function(e){this.plugins.push(this.instantiateChildNetzkeComponent(e))},this))},onComponentLoad:Ext.emptyFn}),Ext.define("Ext.ux.form.field.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.xdatetime",combineErrors:!0,msgTarget:"under",layout:"hbox",readOnly:!1,dateFormat:"Y-m-d",timeFormat:"H:i:s",dateConfig:{},timeConfig:{},dateValue:null,dateField:null,timeField:null,initComponent:function(){var e=this,t=0,n,r;e.items=e.items||[],e.dateField=Ext.create("Ext.form.field.Date",Ext.apply({format:e.dateFormat,flex:1,isFormField:!1,submitValue:!1},e.dateConfig)),e.items.push(e.dateField),e.timeField=Ext.create("Ext.form.field.Time",Ext.apply({format:e.timeFormat,flex:1,isFormField:!1,submitValue:!1},e.timeConfig)),e.items.push(e.timeField);for(;t<e.items.length;t++)e.items[t].on("focus",Ext.bind(e.onItemFocus,e)),e.items[t].on("blur",Ext.bind(e.onItemBlur,e)),e.items[t].on("specialkey",function(t,i){n=i.getKey(),r=n==i.TAB;if(r&&e.focussedItem==e.dateField){i.stopEvent(),e.timeField.focus();return}e.fireEvent("specialkey",t,i)});e.callParent(),e.initField()},focus:function(){this.callParent(arguments),this.dateField.focus()},onItemFocus:function(e){this.blurTask&&this.blurTask.cancel(),this.focussedItem=e},onItemBlur:function(e,t){var n=this;if(e!=n.focussedItem)return;n.blurTask=new Ext.util.DelayedTask(function(){n.fireEvent("blur",n,t)}),n.blurTask.delay(100)},getValue:function(){var e=null,t=this.dateField.getSubmitValue(),n=this.timeField.getSubmitValue(),r;return t&&(n?(r=this.getFormat(),e=Ext.Date.parse(t+" "+n,r)):e=this.dateField.getValue()),e},getSubmitValue:function(){var e=this,t=e.getFormat(),n=e.getValue();return n?Ext.Date.format(n,t):null},setValue:function(e){Ext.isString(e)&&(e=Ext.Date.parse(e,this.getFormat())),this.dateField.setValue(e),this.timeField.setValue(e)},getFormat:function(){return(this.dateField.submitFormat||this.dateField.format)+" "+(this.timeField.submitFormat||this.timeField.format)},getSubmitData:function(){var e=this,t=null;return!e.disabled&&e.submitValue&&!e.isFileUpload()&&(t={},t[e.getName()]=""+e.getSubmitValue()),t}}),Ext.ns("Netzke.pre"),Ext.ns("Netzke.pre.Basepack"),Ext.ns("Ext.ux.grid"),Ext.apply(Ext.History,new Ext.util.Observable),Ext.define("Ext.netzke.ComboBox",{extend:"Ext.form.field.ComboBox",alias:"widget.netzkeremotecombo",valueField:"field1",displayField:"field2",triggerAction:"all",initComponent:function(){var e=this.parentId+"_"+this.name;Ext.define(e,{extend:"Ext.data.Model",fields:["field1","field2"]});var t=new Ext.data.Store({model:e,proxy:{type:"direct",directFn:Netzke.providers[this.parentId].getComboboxOptions,reader:{type:"array",root:"data"}}});t.on("beforeload",function(e,t){t.params.column=this.name},this),t.on("load",function(t,n){t.insert(0,Ext.create(e,{field1:0,field2:this.emptyText}))},this),this.store&&t.loadData({data:this.store}),this.store=t,this.callParent()},collapse:function(){this.store.loading||this.callParent()}}),Ext.util.Format.mask=function(e){return"********"},Ext.define("Ext.ux.form.TriCheckbox",{extend:"Ext.form.field.ComboBox",alias:"widget.tricheckbox",store:[[!0,"Yes"],[!1,"No"]],forceSelection:!0}),Ext.override(Ext.form.field.Checkbox,{getSubmitValue:function(){return this.callOverridden()||!1}}),Ext.define("Netzke.classes.Plugin",Netzke.chainApply({extend:"Ext.Component",alias:"plugin.netzkeplugin",constructor:function(e){Netzke.aliasMethodChain(this,"initComponent","netzke"),Netzke.classes.Plugin.superclass.constructor.call(this,e)}},Netzke.componentMixin,{init:function(e){this.cmp=e}})),Netzke.cache.push("netzkeplugin"),Ext.define("Netzke.classes.UnloadComponentPlugin",Netzke.chainApply({init:function(e){var t=this;e.clearStateOnDestroy==undefined&&(e.clearStateOnDestroy=!0),this.cmp=e,this.cmp.clearStateOnDestroy&&(this.cmp.on("destroy",function(e,n){this.clearStateOnDestroy&&t.unloadNetzkeComponentInServer({global_id:this.id})},this.cmp),this.cmp.on("beforedestroy",function(e,n){this.clearStateOnDestroy&&t.turnOfUnloadComponent(this.items.items)},this.cmp))},turnOfUnloadComponent:function(e){Ext.each(e,function(e,t){e.items&&this.turnOfUnloadComponent(e.items.items),e.clearStateOnDestroy&&(e.clearStateOnDestroy=!1)},this)}},{extend:"Netzke.classes.Plugin",alias:"plugin.unloadcomponentplugin"})),Netzke.cache.push("unloadcomponentplugin"),Ext.ns("Netzke.classes.Basepack"),Ext.define("Netzke.classes.Basepack.Panel",Netzke.chainApply({extend:"Ext.panel.Panel",alias:"widget.netzkebasepackpanel",constructor:function(e){Netzke.aliasMethodChain(this,"initComponent","netzke"),Netzke.classes.Basepack.Panel.superclass.constructor.call(this,e)}},Netzke.componentMixin,{updateBodyHtml:function(e){this.body.update(e)}})),Netzke.cache.push("netzkebasepackpanel"),Ext.ns("Netzke.classes.Mahaswami"),Ext.define("Netzke.classes.Mahaswami.Panel",Netzke.chainApply({},{extend:"Netzke.classes.Basepack.Panel",alias:"widget.mahaswamipanel"})),Netzke.cache.push("mahaswamipanel"),Ext.define("Netzke.classes.PatientsListFilter",Netzke.chainApply({},{extend:"Netzke.classes.Mahaswami.Panel",alias:"widget.patientslistfilter"})),Netzke.cache.push("patientslistfilter"),Ext.define("Netzke.classes.PatientsListButtons",Netzke.chainApply({afterRender:function(){this.callParent(),this.list=this.up("#episodes_list_explorer").down("#episodes_list")},onViewPatientChart:function(){this.list.onViewPatientChart()},onViewPatientSchedule:function(){this.list.onViewPatientSchedule()},onWorksheet:function(){this.list.onWorksheet()},onAddPatient:function(){this.list.onAddPatient()},onAddReferral:function(){this.list.onAddReferral()},onCensusReport:function(){this.list.onCensusReport()}},{extend:"Netzke.classes.Mahaswami.Panel",alias:"widget.patientslistbuttons"})),Netzke.cache.push("patientslistbuttons"),Ext.override(Ext.ux.CheckColumn,{processEvent:function(){return this.editable===!1?!1:this.callOverridden(arguments)}}),Ext.ns("Netzke.classes.Basepack"),Ext.define("Netzke.classes.Basepack.GridPanel",Netzke.chainApply({extend:"Ext.grid.Panel",alias:"widget.netzkebasepackgridpanel",constructor:function(e){Netzke.aliasMethodChain(this,"initComponent","netzke"),Netzke.classes.Basepack.GridPanel.superclass.constructor.call(this,e)}},Netzke.componentMixin,{trackMouseOver:!0,loadMask:!0,autoScroll:!0,componentLoadMask:{msg:"Loading..."},deleteMaskMsg:"Deleting...",multiSelect:!0,initComponent:function(){var e,t=[];this.plugins=this.plugins||[],this.features=this.features||[],this.features.push({encode:!0,ftype:"filters"}),Ext.each(this.columns,function(n,r){this.normalizeRenderer(n);var i={name:n.name,defaultValue:n.defaultValue};n.name!=="_meta"&&(i.type=this.fieldTypeForAttrType(n.attrType)),n.attrType=="datetime"&&(i.dateFormat="Y-m-d H:i:s",n.renderer||(n.renderer=Ext.util.Format.dateRenderer(n.format||Ext.Date.defaultFormat+" H:i:s"))),t.push(i);if(n.meta){e=n;return}n.assoc&&(n.emptyText=n.emptyText||"---",n.editor=Ext.apply({parentId:this.id,emptyText:n.emptyText,name:n.name},n.editor),this.normalizeAssociationRenderer(n)),n.editor&&Ext.applyIf(n.editor,{selectOnFocus:!0}),n.filterable&&!n.filter&&(n.filter={type:this.fieldTypeForAttrType(n.attrType)}),n.dataIndex=n.name},this),Ext.define(this.id,{extend:"Ext.data.Model",idProperty:this.pri,fields:t}),Ext.Array.remove(this.columns,e);var n=[],r=this.columns;Ext.each(this.columnsOrder,function(e){var t;Ext.each(this.columns,function(n){if(e.name===n.name)return t=Ext.apply({},n),!1}),n.push(Ext.apply(t,e))},this),delete this.columns,this.columns=n;var i=Ext.create("Ext.data.reader.Array",{root:"data",totalProperty:"total"}),s=Ext.create("Ext.data.proxy.Direct",{directFn:Netzke.providers[this.id].getData,reader:i,listeners:{exception:{fn:this.loadExceptionHandler,scope:this},load:{fn:function(e,t,n){t=t.result,t&&(Ext.each(["data","total","success"],function(e){delete t[e]}),this.bulkExecute(t))},scope:this}}});this.store=Ext.create("Ext.data.Store",{model:this.id,proxy:s,pruneModifiedRecords:!0,remoteSort:!0,pageSize:this.rowsPerPage}),this.inlineData&&this.store.loadRawData(this.inlineData),this.enableRowsReordering&&(this.ddPlugin=new Ext.ux.dd.GridDragDropRowOrder({scrollable:!0}),this.plugins.push(this.ddPlugin)),this.prohibitUpdate||this.plugins.push(Ext.create("Ext.grid.plugin.CellEditing",{pluginId:"celleditor"})),this.plugins.push(Ext.create("Ext.grid.plugin.BufferedRenderer",{pluginId:"bufferedrenderer"})),this.dockedItems=this.dockedItems||[],this.enablePagination&&this.infiniteScroll?this.store=Ext.create("Ext.data.Store",{model:this.id,proxy:s,pruneModifiedRecords:!0,remoteSort:!0,pageSize:this.rowsPerPage,buffered:!0,autoLoad:!0,leadingBufferZone:this.rowsPerPage*2}):this.enablePagination&&this.dockedItems.push({xtype:"pagingtoolbar",dock:"bottom",store:this.store,displayInfo:!1,items:["->"],prependButtons:!0}),this.bbar&&this.dockedItems.push({xtype:"toolbar",dock:"top",items:["->"].concat(this.bbar)}),delete this.bbar,this.callParent(),this.contextMenu&&this.on("itemcontextmenu",this.onItemContextMenu,this),this.enableEditInForm&&!this.prohibitUpdate&&this.getSelectionModel().on("selectionchange",function(e,t){var n;t.length===0?n=!0:Ext.each(t,function(e){if(e.isNew)return n=!0,!1}),this.actions.editInForm.setDisabled(n)},this),this.getSelectionModel().on("selectionchange",function(e){this.actions.del&&this.actions.del.setDisabled(!e.hasSelection()||this.prohibitDelete),this.actions.edit&&
this.actions.edit.setDisabled(e.getCount()!=1||this.prohibitUpdate)},this),this.enableRowsReordering&&this.ddPlugin.on("afterrowmove",this.onAfterRowMove,this),this.getView().getRowClass=this.defaultGetRowClass,this.on("beforeedit",function(e,t){if(t.column.assoc&&t.record.get("_meta")){var n=t.column,r=n.getEditor(),i=r.store,s=t.record.get(t.field);s===0&&-1==i.find("field1",0)&&i.loadData([[0,n.emptyText]],!0),s&&-1==i.find("field1",s)&&i.loadData([[t.record.get(t.field),t.record.get("_meta").associationValues[t.field]]],!0)}},this),this.on("afterrender",function(){this.persistence&&(this.on("columnresize",this.onColumnResize,this),this.on("columnmove",this.onColumnMove,this),this.on("columnhide",this.onColumnHide,this),this.on("columnshow",this.onColumnShow,this))},this)},fieldTypeForAttrType:function(e){var t={integer:"int",decimal:"float",datetime:"date",date:"date",string:"string",text:"string","boolean":"boolean"};return t[e]||"string"},update:function(){this.store.load()},loadStoreData:function(e){var t=this.getStore().getProxy().getReader().read(e);this.getStore().loadData(t.records),Ext.each(["data","total","success"],function(t){delete e[t]},this),this.bulkExecute(e)},tryStartEditing:function(e){var t=0;Ext.each(this.initialConfig.columns,function(e){if(e.hidden!=1&&e.editable!=0&&!!e.editor&&e.attrType!="boolean")return!1;t++}),t<this.initialConfig.columns.length&&this.getPlugin("celleditor").startEdit(e,this.columns[t])},updateNewRecords:function(e){this.updateRecords(e)},updateModRecords:function(e){this.updateRecords(e,!0)},updateRecords:function(e,t){t||(t=!1);var n=[].concat(this.store.getUpdatedRecords());for(var r in e)e[r]=this.getStore().getProxy().getReader().read({data:[e[r]]}).records[0];Ext.each(n,function(n){if(t^n.isNew){var r=n.getId(),i=e[r];if(i){for(var s in i.data)n.set(s,i.get(s));n.isNew=!1,n.commit()}}},this),this.getSelectionModel().clearSelections();var i=this.store.getUpdatedRecords();i.length==0?(this.store.load(),this.getView().getRowClass=this.defaultGetRowClass):this.getView().getRowClass=function(e){return e.dirty?"grid-dirty-record":""},this.getView().refresh(),this.getSelectionModel().fireEvent("selectionchange",this.getSelectionModel())},defaultGetRowClass:function(e){return e.isNew?"grid-dirty-record":""},selectFirstRow:function(){this.getSelectionModel().suspendEvents(),this.getSelectionModel().selectRow(0),this.getSelectionModel().resumeEvents()},normalizeRenderer:function(c){if(!c.renderer)return;var name,args=[];"string"==typeof c.renderer?name=c.renderer.camelize(!0):(name=c.renderer[0],args=c.renderer.slice(1)),Ext.isFunction(Ext.util.Format[name])?c.renderer=Ext.Function.bind(Ext.util.Format[name],this,args,1):Ext.isFunction(this[name])?c.renderer=Ext.Function.bind(this[name],this,args,1):eval("c.renderer = "+c.renderer+";")},normalizeAssociationRenderer:function(e){e.scope=this;var t=e.renderer;e.renderer=function(n,r,i,s,o){var u=this.headerCt.items.getAt(o),a=u.getEditor&&u.getEditor(),f=a&&a.isXType("combobox")&&a.getStore().findRecord("field1",n),l;return f?l=f.get("field2"):e.assoc&&i.get("_meta")?l=i.get("_meta").associationValues[e.name]||e.emptyText:l=n,t?t.call(this,l):l}}},{onAddInline:function(){var e=Ext.ModelManager.create({},this.id);e.isNew=!0,this.getStore().add(e),this.tryStartEditing(e)},onDel:function(){Ext.Msg.confirm(this.i18n.confirmation,this.i18n.areYouSure,function(e){if(e=="yes"){var t=[];this.getSelectionModel().selected.each(function(e){e.isNew?this.store.remove(e):t.push(e.getId())},this),t.length>0&&(this.deleteMask||(this.deleteMask=new Ext.LoadMask(this.getEl(),{msg:this.deleteMaskMsg})),this.deleteMask.show(),this.deleteData({records:Ext.encode(t)},function(){this.deleteMask.hide()},this))}},this)},onApply:function(){if(this.fireEvent("apply")){var e=[],t=[],n=this.getStore();Ext.each(n.getUpdatedRecords().concat(n.getNewRecords()),function(n){n.isNew?e.push(n.data):t.push(Ext.apply(n.getChanges(),{id:n.getId()}))},this);if(e.length>0||t.length>0){var r={};e.length>0&&(r.created_records=Ext.encode(e)),t.length>0&&(r.updated_records=Ext.encode(t)),this.getStore().getProxy().extraParams!=={}&&(r.base_params=Ext.encode(this.getStore().getProxy().extraParams)),this.postData(r)}}this.fireEvent("afterApply",this)},onRefresh:function(){this.fireEvent("refresh",this)!==!1&&this.store.load()},onColumnResize:function(e,t,n){var r=e.items.findIndex("id",t.id);this.resizeColumn({index:r,size:n})},onColumnHide:function(e,t){var n=e.items.findIndex("id",t.id);this.hideColumn({index:n,hidden:!0})},onColumnShow:function(e,t){var n=e.items.findIndex("id",t.id);this.hideColumn({index:n,hidden:!1})},onColumnMove:function(e,t,n,r){this.moveColumn({old_index:n,new_index:r})},onItemContextMenu:function(e,t,n,r,i){i.stopEvent();var s=i.getXY();e.getSelectionModel().isSelected(r)||e.getSelectionModel().selectRow(r);var o=new Ext.menu.Menu({items:this.contextMenu});o.showAt(s)},onAfterRowMove:function(e,t,n,r){var i=[];Ext.each(r,function(e){i.push(e.id)}),this.moveRows({ids:Ext.encode(i),new_index:n})},loadExceptionHandler:function(e,t,n){this.netzkeFeedback(t.message)},onEdit:function(){var e=this.getSelectionModel().selected.first();e&&this.tryStartEditing(e)},onDestroy:function(){Netzke.classes.Basepack.GridPanel.superclass.onDestroy.call(this),this.searchWindow&&this.searchWindow.destroy()}},{onSearch:function(e){this.searchWindow?this.searchWindow.show():this.loadNetzkeComponent({name:"search_form",callback:function(t){this.searchWindow=t,t.show(),t.items.first().on("apply",function(){return t.onSearch(),!1},this),t.on("hide",function(){var n=t.getQuery();if(t.closeRes=="search"){var r=this.getStore(),i=r.getProxy();i.extraParams.query=Ext.encode(n),r.load()}e.toggle(n.length>0)},this)},scope:this})}},{onEditInForm:function(){var e=this.getSelectionModel();if(e.getCount()>1){var t=e.selected.first().getId();this.loadNetzkeComponent({name:"multi_edit_form",params:{record_id:t},callback:function(t){t.show();var n=t.items.first();n.on("apply",function(){var t=[];e.selected.each(function(e){t.push(e.getId())}),n.baseParams||(n.baseParams={}),n.baseParams.ids=Ext.encode(t)},this),t.on("close",function(){t.closeRes==="ok"&&this.store.load()},this)},scope:this})}else{var t=e.selected.first().getId();this.loadNetzkeComponent({name:"edit_form",params:{record_id:t},callback:function(e){e.show(),e.on("close",function(){e.closeRes==="ok"&&this.store.load()},this)},scope:this})}},onAddInForm:function(){this.loadNetzkeComponent({name:"add_form",callback:function(e){e.show(),e.on("close",function(){e.closeRes==="ok"&&this.store.load()},this)},scope:this})}},{})),Netzke.cache.push("netzkebasepackgridpanel"),Ext.override(Ext.ux.CheckColumn,{processEvent:function(){return this.editable===!1?!1:this.callOverridden(arguments)}}),Ext.ns("Netzke.classes.Mahaswami"),Ext.define("Netzke.classes.Mahaswami.GridPanel",Netzke.chainApply({rememberSelection:function(){if(this.doNotRememberAfterStoreReload){this.selectedRecordIds=[];return}var e=this.getSelectionModel().getSelection();this.clearUncheckedSelection(e),Ext.each(e,function(e,t){var n=e.getId();Ext.Array.contains(this.selectedRecordIds,n)==0&&this.selectedRecordIds.push(n)},this)},clearUncheckedSelection:function(e){Ext.each(this.selectedRecordIds,function(t,n){var r=this.store.findRecord("id",t);r&&Ext.Array.contains(e,r)==0&&Ext.Array.remove(this.selectedRecordIds,t)},this)},refreshSelection:function(){if(this.selectedRecordIds.length==0)return;var e=[];Ext.each(this.selectedRecordIds,function(t,n){var r=this.store.findRecord("id",t);r&&e.push(r)},this),this.getSelectionModel().select(e)},initComponent:function(){this.selectedRecordIds=[],this.checkboxModel&&(this.selModel=Ext.create("Ext.selection.CheckboxModel")),this.plugins.push(new Ext.ux.grid.FilterRow(this)),this.callParent();if(this.editOnDblClick===undefined||this.editOnDblClick==1)this.on("celldblclick",function(e,t,n,r,i,s,o,u){return this.fireEvent("itemdblclick",e,r,o),!1}),this.on("itemdblclick",function(e,t,n){this.onEditInForm()},this);this.checkboxModel&&(this.getView().on("refresh",this.refreshSelection,this),this.on("select",this.rememberSelection,this),this.on("deselect",this.rememberSelection,this)),this.store.on("beforeload",function(e,t,n){this.checkboxModel&&this.rememberSelection(),e.removeAll()},this)},performAction:function(e,t){this.triggerEvent({record_id:e,action:t})},refreshData:function(){this.getStore().load()},loadStoreData:function(e){this.store.load()}},{extend:"Netzke.classes.Basepack.GridPanel",alias:"widget.mahaswamigridpanel"})),Netzke.cache.push("mahaswamigridpanel"),Ext.override(Ext.ux.CheckColumn,{processEvent:function(){return this.editable===!1?!1:this.callOverridden(arguments)}}),Ext.define("Netzke.classes.EpisodesList",Netzke.chainApply({sendUpdatedReferralReceivedDate:function(e,t){var n=e.down("#date"),r=n.value;this.updateReferralReceivedDate({referral_id:t,ref_date:r}),e.close()},setStartOfCareDate:function(e,t){var n=e.down("#soc_date").value;this.updateSocDate({soc_date:n,referral_id:t},function(t){t?(e.close(),this.store.load()):Ext.MessageBox.alert("Status","Invalid Date. Please try again.")},this)},statusRenderer:function(e,t,n,r,i,s){return e=="P"?"<span style='color:#8B3AB2'>PE</span>":e=="A"?"<span style='color:#000000'>AC</span>":e=="D"?"<span style='color:#267FFF'>DC</span>":e=="O"?"<span style='color:#4F9FB2'>HD</span>":e},disciplinesRenderer:function(e,t,n,r,i,s){if(e=="")return;return data=JSON.parse(e),e="<div>",e+=Ext.Array.map(data,function(e){return color="#8B3AB2",e.s=="P"&&(color="#8B3AB2"),e.s=="A"&&(color="black"),e.s=="O"&&(color="#4F9FB2"),e.s=="D"&&(color="#267FFF"),"<span style='color:"+color+"'>"+e.d+"</span>"}).join(", "),e+="</div>",e},stateRenderer:function(e,t,n,r,i,s){var o=n.get("treatment_request_id"),u=n.get("patient_treatment_id"),a=n.get("e_id"),f="' treatment_request_id='"+o+"' treatment_id='"+u+"' episode_id='"+a+"' width=15 height=15";t.style="text-align:center";var l="unknown";i==7&&(l="eligibility"),i==8&&(l="staffing"),i==9&&(l="referral"),i==13&&(l="documents"),i==14&&(l="medical_order");var c=o+":"+u+":"+a+":"+l,h='Ext.ComponentQuery.query("#episodes_list")[0].displayWindow("'+c+'");',p=["staffing","medical_order","documents"];return p.indexOf(l)!=-1?e=="t"?"<div style='cursor:pointer;' onclick="+h+"><img class='checked_image_class'"+l+f+"/></div>":e=="f"?"<div style='cursor:pointer;' onclick="+h+"><img class='cross_image_class'"+l+f+"/></div>":e=="n"?"<div style='cursor:pointer;' onclick="+h+"><img class='progress_image_class'"+l+f+"/></div>":"-":e=="t"?"<img class='checked_image_class'"+l+f+"/>":e=="f"?"<img class='cross_image_class'"+l+f+"/>":e=="n"?"<img class='progress_image_class'"+l+f+"/>":"-"},displayWindow:function(e){var t=e.split(":"),n=t[0],r=t[1],i=t[2],s=t[3],o=this;s=="staffing"?r!=0?launchPatientWindow({component_class_name:"TreatmentStaffing",height:"80%",width:"90%",treatment_id:r,params:{episode_id:i},grid_item_id:o.itemId}):n!=0?launchPatientWindow({component_class_name:"Staffing",height:"80%",width:"90%",treatment_request_id:n,params:{treatment_request_id:n,treatment_id:null},grid_item_id:o.itemId}):Ext.MessageBox.alert("Status","Patient is yet to be admitted."):s=="medical_order"?r!=0?launchPatientWindow({component_class_name:"MedicalOrders",treatment_id:r,height:"60%",width:"60%",grid_item_id:this.itemId,params:{episode_id:i,episode_orders:!0}}):Ext.MessageBox.alert("Status","Patient is yet to be admitted."):s=="documents"&&(r!=0?launchPatientWindow({component_class_name:"Documents",treatment_id:r,height:"60%",width:"60%",grid_item_id:this.itemId,params:{parent_model:"PatientTreatment",association:"documents",treatment_id:r,episode_id:i,episode_docs:!0,item_id:"episode_documents"}}):Ext.MessageBox.alert("Status","Patient is yet to be admitted."))},initComponent:function(){this.callParent(),this.actions.viewPatientChart.setDisabled(!0),this.actions.viewPatientSchedule.setDisabled(!0),this.actions.worksheet.setDisabled(!0),this.on("itemclick",function(e,t){var n=this.getRecordType(t);this.actions.viewPatientChart.setDisabled(this.getSelectionModel().getCount()!=1),n==3||n==1?(this.actions.viewPatientSchedule.setDisabled(n!=1),this.actions.worksheet.setDisabled(this.getSelectionModel().getCount()!=1)):(this.actions.viewPatientSchedule.setDisabled(!0),this.actions.worksheet.setDisabled(!0))},this),this.on("itemdblclick",function(e,t,n){var r=this.up("#app"),i=this.up("#main_panel"),s=this.getRecordType(t);this.viewChart(t,s)},this)},getRecordType:function(e){var t=e.get("patient_record_type"),n=e.get("treatment_request_record_type"),r=e.get("patient_treatment_record_type");if(t)var i=t;else if(n)var i=n;else if(r)var i=r;return i},viewChart:function(e,t){var n=this.up("#app"),r=this.up("#main_panel");t==1?this.selectEpisode({episode_id:e.get("e_id")},function(e){e&&n.setContext(e,function(){launchComponent("PProfile","p_profile")})}):t==2?this.selectPatient({patient_id:e.get("patient_id")},function(e){e&&n.setContext(e,function(){launchComponent("PProfile","p_profile")})}):t==3&&this.selectReferral({referral_id:e.get("treatment_request_id")},function(e){e&&n.setContext(e,function(){launchComponent("PProfile","p_profile")})})},onViewPatientChart:function(){if(this.getSelectionModel().getCount()==1){var e=this.getSelectionModel().selected.items[0],t=this.getRecordType(e);this.viewChart(e,t)}else Ext.MessageBox.alert("Status","Please select episode to view chart.")},onViewPatientSchedule:function(){var e=this.getSelectionModel();if(e.getCount()==1&&e.selected.items[0].get("patient_treatment_record_type")==1){var t=e.selected.items[0].get("e_id");this.selectEpisode({episode_id:t},function(e){if(e){var t=this.up("#app");t.setContext(e,function(){var e=new Ext.window.Window({height:"80%",width:"85%",modal:!0,layout:"fit",buttons:[{text:"Close",listeners:{click:function(){e.close()}}}],title:"Patient Schedule"});e.show(),t.loadNetzkeComponent({name:"patient_schedules_with_patient_details",container:e,callback:function(e){e.show()}})},this)}else Ext.MessageBox.alert("Status","Patient is yet to be admitted.")})}else Ext.MessageBox.alert("Status","Please select episode to view schedule.")},onWorksheet:function(){var e=this.getSelectionModel();if(e.getCount()!=1){Ext.MessageBox.alert("Status","Please select record to view profile.");return}var t=e.selected.first(),n=t.data,r=n.patient_record_type,i=n.treatment_request_record_type,s=n.patient_treatment_record_type;r?this.recordType=r:i?this.recordType=i:s&&(this.recordType=s),this.recordType==1?recordId=t.get("e_id"):this.recordType==3&&(recordId=t.get("treatment_request_id")),this.viewWorksheet({record_id:recordId,record_type:this.recordType})},launchReport:function(e){this.loadNetzkeComponent({name:"launch_report_window",callback:function(e){e.show()},params:{component_params:e}})},onAddPatient:function(){this.createNewRecordAndReturnId({},function(e){var t=e.id;this.loadNetzkeComponent({name:"patient_edit_form",params:{record_id:t},callback:function(e){e.show(),e.on("close",function(){e.closeRes&&e.closeRes.status==="referral_no"?this.store.load():e.closeRes&&e.closeRes.status==="referral_yes"&&Ext.MessageBox.confirm("Confirm","Do you wish to create a staffing for this patient?",function(t){t=="yes"?this.selectReferralId({patient_id:e.closeRes.patient_id},function(t){launchPatientWindow({component_class_name:"Staffing",height:"80%",width:"90%",treatment_request_id:t,params:{treatment_request_id:t,treatment_id:null,episode_id:null,record_type:3,patient_id:e.closeRes.patient_id},grid_item_id:"episodes_list"})},this):this.store.load()},this)},this)},scope:this})})},onAddReferral:function(){this.loadNetzkeComponent({name:"referral_new_form",callback:function(e){e.show(),e.on("close",function(){e.closeRes==="ok"&&this.store.load()},this)},scope:this})},onCensusReport:function(){var e=this,t=new Ext.window.Window({width:"858px",height:"423px",modal:!0,layout:"fit",buttons:[{text:"",tooltip:"OK",iconCls:"ok_icon",listeners:{click:function(){t.down("#census_report").runCensusReport(t,e)}}},{text:"",tooltip:"Cancel",iconCls:"cancel_icon",listeners:{click:function(){t.close()}}}],title:"Census Report"});t.show(),this.loadNetzkeComponent({name:"census_report_form",container:t,callback:function(e){e.show()}})}},{extend:"Netzke.classes.Mahaswami.GridPanel",alias:"widget.episodeslist"})),Netzke.cache.push("episodeslist"),Ext.define("Netzke.classes.EpisodesListExplorer",Netzke.chainApply({initComponent:function(){this.callParent(),checkBoxList=this.down("#patients_list_filter").query("checkboxfield"),Ext.each(checkBoxList,function(e,t){e.on("change",function(t){var n=e.up("checkboxgroup").getValue().treatment_status;this.setTreatmentStatus({treatment_status:n})},this)},this)},refreshGrids:function(){this.down("#episodes_list").store.load()}},{extend:"Netzke.classes.Basepack.Panel",alias:"widget.episodeslistexplorer"})),Netzke.cache.push("episodeslistexplorer"),Ext.override(Ext.ux.StatusBar,{hideBusy:function(){return this.setStatus({text:this.defaultText,iconCls:this.defaultIconCls})}}),Ext.ns("Netzke.classes.Basepack"),Ext.define("Netzke.classes.Basepack.SimpleApp",Netzke.chainApply({extend:"Ext.container.Viewport",alias:"widget.netzkebasepacksimpleapp",constructor:function(e){Netzke.aliasMethodChain(this,"initComponent","netzke"),Netzke.classes.Basepack.SimpleApp.superclass.constructor.call(this,e)}},Netzke.componentMixin,{initComponent:function(){this.callParent(),this.mainPanel=this.down('panel[itemId="main_panel"]'),this.menuBar=this.down('container[itemId="menu_bar"]');var e=this.statusBar=this.down('container[itemId="status_bar"]');Ext.util.History.on("change",this.processHistory,this),Ext.Ajax.on("beforerequest",function(){e.showBusy()}),Ext.Ajax.on("requestcomplete",function(){e.hideBusy()}),Ext.Ajax.on("requestexception",function(){e.hideBusy()}),Ext.util.History.init()},afterRender:function(){this.callParent();var e=Ext.util.History.getToken();if(e!="")this.processHistory(e);else{var t=this.initialConfig.componentToLoad;t&&Ext.util.History.add(t)}},processHistory:function(e){e?(this.mainPanel.removeAll(),this.loadNetzkeComponent({name:e,container:this.mainPanel})):this.mainPanel.removeAll()},appLoadComponent:function(e){Ext.util.History.add(e)},loadNetzkeComponentByAction:function(e){var t=e.component||e.name;t&&this.appLoadComponent(t)},loadComponentByAction:function(e){Netzke.deprecationWarning("loadComponentByAction is deprecated in favor of loadNetzkeComponentByAction"),this.loadNetzkeComponentByAction(e)},onToggleConfigMode:function(e){this.toggleConfigMode()}},{layout:"border"})),Netzke.cache.push("netzkebasepacksimpleapp"),Ext.override(Ext.ux.StatusBar,{hideBusy:function(){return this.setStatus({text:this.defaultText,iconCls:this.defaultIconCls})}}),Ext.define("Netzke.classes.App",Netzke.chainApply({onSignOut:function(){window.location="/signout"},onAbout:function(e){var t=["","&copy; Copyright FasterNotes 2012.  All rights reserved."].join("<br/>");Ext.Msg.show({width:300,title:"About",msg:t,buttons:Ext.Msg.OK,animEl:e.getId()})},processHistory:function(e){return!0},loadPatientsList:function(){var e=this;this.clearPatientProfileInformation({},function(){this.setContext({},function(){e.loadNetzkeComponent({name:"EpisodesListExplorer",container:e.mainPanel,params:{}})},this)},this)}},{extend:"Netzke.classes.Basepack.SimpleApp",alias:"widget.app"})),Netzke.cache.push("app"),Ext.define("Ext.panel.PatientWoundType",{extend:"Ext.panel.Panel",alias:"widget.patientWoundType",items:[{xtype:"panel",height:615,itemId:"wound_description_",margin:"3px",border:0,layout:{align:"stretch",type:"vbox"},title:"Wound Description ",items:[{xtype:"panel",border:0,margin:"0 3 3 0",layout:{align:"middle",type:"hbox"},items:[{xtype:"textfield",name:"wound_type_",margin:"5px",fieldLabel:"Wound Type:",labelAlign:"right"},{xtype:"numberfield",name:"wound_age_",fieldLabel:"Age in Months:",labelAlign:"right",maxValue:1200,minValue:1},{xtype:"textfield",name:"wound_location_",fieldLabel:"Wound Location:",labelAlign:"right"}]},{xtype:"panel",flex:3,border:0,height:236,layout:{align:"stretch",type:"hbox"},items:[{xtype:"fieldset",flex:1,margin:3,items:[{xtype:"radiogroup",fieldLabel:"Is there eschar tissue present in the wound?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_tissue_present_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_tissue_present_",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"Has debridement been attempted in the last 10 days?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_debridement_attempted_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_debridement_attempted_",boxLabel:"No",inputValue:"no"}]},{xtype:"datefield",width:180,name:"wound_debridement_date_",fieldLabel:"If Yes, debridement date",labelAlign:"top"},{xtype:"textfield",width:161,name:"wound_debridement_type_",fieldLabel:"Debridement Type",labelAlign:"top"},{xtype:"radiogroup",height:43,fieldLabel:"Are serial debridements required?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_debridement_required_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_debridement_required_",boxLabel:"No",inputValue:"no"}]}]},{xtype:"fieldset",flex:1,margin:3,items:[{xtype:"datefield",name:"wound_measurement_date_",fieldLabel:"Measurement date:",labelAlign:"top"},{xtype:"textfield",name:"wound_length_",fieldLabel:"Length (cm)",labelAlign:"top"},{xtype:"textfield",name:"wound_width_",fieldLabel:"Width (cm)",labelAlign:"top"},{xtype:"textfield",name:"wound_depth_",fieldLabel:"Depth",labelAlign:"top"},{xtype:"textfield",name:"wound_appearance_of_wound_",fieldLabel:"Appearance of wound bed and color:",labelAlign:"top"}]},{xtype:"fieldset",flex:1,margin:3,title:"",items:[{xtype:"textfield",name:"wound_exudate_",fieldLabel:"Exudate (amount and color):",labelAlign:"top"},{xtype:"radiogroup",fieldLabel:"Is the wound full thickness?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_thickness_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_thickness_",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"Is muscle, tendon or bone exposed?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_muscle_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_muscle_",boxLabel:"No",inputValue:"no"}]}]}]},{xtype:"fieldset",flex:1.3,height:121,margin:3,layout:{type:"vbox"},items:[{xtype:"radiogroup",flex:1,width:400,fieldLabel:"Is there undermining?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_underminig_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_underminig_",boxLabel:"No",inputValue:"no"}]},{xtype:"panel",flex:.8,border:0,layout:{align:"middle",type:"hbox"},items:[{xtype:"textfield",name:"wound_undermining_location1_",fieldLabel:"Location #1 (cm)",labelAlign:"right"},{xtype:"timefield",name:"wound_undermining_from1_",fieldLabel:"From",labelAlign:"right"},{xtype:"timefield",name:"wound_undermining_to1_",fieldLabel:"To",labelAlign:"right"}]},{xtype:"panel",flex:.8,border:0,layout:{align:"middle",type:"hbox"},items:[{xtype:"textfield",name:"wound_undermining_location2_",fieldLabel:"Location #2 (cm)",labelAlign:"right"},{xtype:"timefield",name:"wound_undermining_from2_",fieldLabel:"From",labelAlign:"right"},{xtype:"timefield",name:"wound_undermining_to2_",fieldLabel:"To",labelAlign:"right"}]}]},{xtype:"fieldset",flex:1.3,height:125,margin:3,layout:{type:"vbox"},items:[{xtype:"radiogroup",flex:1,width:400,fieldLabel:"Is there tunneling/sinus?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_tunneling_",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_tunneling_",boxLabel:"No",inputValue:"no"}]},{xtype:"panel",flex:.8,border:0,layout:{align:"middle",type:"hbox"},items:[{xtype:"textfield",name:"wound_tunneling_location1_",fieldLabel:"Location #1 (cm)",labelAlign:"right"},{xtype:"timefield",name:"wound_tunneling_from1_",fieldLabel:"From",labelAlign:"right"},{xtype:"timefield",name:"wound_tunneling_to1_",fieldLabel:"To",labelAlign:"right"}]},{xtype:"panel",flex:.8,border:0,layout:{align:"middle",type:"hbox"},items:[{xtype:"textfield",name:"wound_tunneling_location2_",fieldLabel:"Location #2 (cm)",labelAlign:"right"},{xtype:"timefield",name:"wound_tunneling_from2_",fieldLabel:"From",labelAlign:"right"},{xtype:"timefield",name:"wound_tunneling_to2_",fieldLabel:"To",labelAlign:"right"}]}]}],tools:[{xtype:"tool",tooltip:"close",type:"close"}]}]}),Ext.define("Ext.panel.PatientPrimaryWoundType",{extend:"Ext.panel.Panel",alias:"widget.patientPrimaryWoundType",items:[{xtype:"panel",height:601,border:0,margin:"3px",autoScroll:!0,layout:{align:"stretch",type:"vbox"},title:"Patient Primary Wound Type",items:[{xtype:"panel",flex:1,border:0,width:967,autoScroll:!0,layout:{align:"stretch",type:"hbox"},manageHeight:!1,items:[{xtype:"panel",flex:1,border:0,height:900,layout:{align:"stretch",type:"vbox"},items:[{xtype:"fieldset",flex:1.7,margin:3,title:"PRESSURE ULCER",items:[{xtype:"radiogroup",fieldLabel:"",items:[{xtype:"radiofield",margin:"0 20px",name:"pressure_ulcer_stage",labelClsExtra:"heading",boxLabel:"Stage l",inputValue:"1"},{xtype:"radiofield",name:"pressure_ulcer_stage",labelClsExtra:"heading",boxLabel:"Stage ll",inputValue:"2"},{xtype:"radiofield",name:"pressure_ulcer_stage",labelClsExtra:"heading",boxLabel:"Stage lll",inputValue:"3"},{xtype:"radiofield",name:"pressure_ulcer_stage",labelClsExtra:"heading",boxLabel:"Stage lV",inputValue:"4"}]},{xtype:"radiogroup",fieldLabel:"1. Is the patient being turned/positioned?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"patient_turned",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"patient_turned",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"2. Has a group of 2 or 3 surface been used for ulcer located on the posterior trunk or pelvis?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"pelvis_surface",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"pelvis_surface",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"3. Are moisture and/or incontinence being managed?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"moisture",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"moisture",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"4. Is pressure ulcer greater than 30 days?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"pressure_gt_30_days",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"pressure_gt_30_days",boxLabel:"No",inputValue:"no"}]}]},{xtype:"fieldset",flex:.5,margin:3,title:"ARTERIAL ULCER/ARTERIAL INSUFFICIENCY",items:[{xtype:"radiogroup",fieldLabel:"1. Is pressure over the wound being relieved?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"arterial_ulcer",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"arterial_ulcer",boxLabel:"No",inputValue:"no"}]}]},{xtype:"fieldset",flex:1,height:164,title:"Please Complete if Applicable",items:[{xtype:"radiogroup",fieldLabel:"1. Is wound a direct result of an accident?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"wound_accident",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"wound_accident",boxLabel:"No",inputValue:"no"}]},{xtype:"label",text:"If Yes, complete the following:"},{xtype:"datefield",name:"date_of_accident",fieldLabel:"Date of accident",labelAlign:"top"},{xtype:"radiogroup",fieldLabel:"Accident Type",items:[{xtype:"radiofield",name:"accident_type",boxLabel:"Auto",inputValue:"auto"},{xtype:"radiofield",name:"accident_type",boxLabel:"Employment",inputValue:"employment"},{xtype:"radiofield",name:"accident_type",boxLabel:"Trauma",inputValue:"trauma"}]}]}]},{xtype:"panel",flex:1,border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"fieldset",flex:1,margin:"0 3px 0 3px",title:"DIABETIC ULCER/NEUROPATHIC ULCER",items:[{xtype:"radiogroup",height:49,fieldLabel:"1. Has a reduction of pressure on the foot ulcer been accomplished with appropriate modalities?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"diabetic_ulcer",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"diabetic_ulcer",boxLabel:"No",inputValue:"no"}]}]},{xtype:"fieldset",flex:1.5,margin:"0 3px 0 3px",title:"VENOUS STASIS ULCER/VENOUS INSUFFICIENCY",items:[{xtype:"radiogroup",height:51,fieldLabel:"1. Are compression bandages and/or garments being consistently applied?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"bandages_applied",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"bandages_applied",boxLabel:"No",inputValue:"no"}]},{xtype:"radiogroup",fieldLabel:"2. Is elevation/ambulation being encouraged?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"ambulation_encouraged",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"ambulation_encouraged",boxLabel:"No",inputValue:"no"}]}]},{xtype:"fieldset",flex:2,height:196,margin:"0 3px 3px 3px",title:"SURGICAL",items:[{xtype:"radiogroup",fieldLabel:"1. Wound surgically created and not represented by descriptions above?",labelAlign:"top",labelSeparator:" ",items:[{xtype:"radiofield",margin:"0 20px",name:"surgically_created",boxLabel:"Yes",inputValue:"yes"},{xtype:"radiofield",name:"surgically_created",boxLabel:"No",inputValue:"no"}]},{xtype:"textfield",anchor:"100%",name:"surgical_procedure",fieldLabel:"2. Description of surgical procedure:",labelAlign:"top"},{xtype:"datefield",anchor:"100%",name:"surgical_procedure_date",fieldLabel:"3. Date of surgical procedure involving wound:",labelAlign:"top"}]},{xtype:"fieldset",flex:1,margin:3,title:"OTHER WOUND TYPE (describe)",items:[{xtype:"textareafield",anchor:"100%",height:56,name:"other_wound_type",fieldLabel:""}]}]}]}]}]}),Ext.define("Ext.panel.NeuroEmotionalBehaviouralM17001730",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehaviouralM17001730",items:[{xtype:"panel",margin:5,border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1700) Cognitive Functioning: Patient's current (day of assessment) level of alertness, orientation, comprehension, concentration, and immediate memory for simple commands.",cls:"oasis_blue",itemId:"cog_functioning",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"0 - Alert/oriented, able to focus and shift attention, comprehends and recalls task directions independently.",inputValue:"00"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"1 - Requires prompting (cuing, repetition, reminders) only under stressful or unfamiliar conditions.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1700_cog_function",boxLabel:"2 - Requires assistance and some direction in specific situations (for example, on all tasks involving shifting of attention), or consistently requires low stimulus environment due to distractibility.",inputValue:"02"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"3 - Requires considerable assistance in routine situations. Is not alert and oriented or is unable to shift attention and recall directions more than half the time.",inputValue:"03"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"4 - Totally dependent due to disturbances such as constant disorientation, coma, persistent vegetative state, or delirium. ",inputValue:"04"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"hbox"},items:[{xtype:"radiogroup",flex:1,width:1024,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1710) When Confused (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",itemId:"when_confused",width:"98%",margin:"0 5 5 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"0 -  Never",inputValue:"00"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"1 - In new or complex situations only ",inputValue:"01"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"2 - On awakening or at night only",inputValue:"02"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"3 - During the day and evening, but not constantly",inputValue:"03"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"4 - Constantly",inputValue:"04"},{
xtype:"radiofield",name:"m1710_when_confused",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]},{xtype:"radiogroup",flex:1,width:1024,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1720) When Anxious (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",itemId:"when_anxious",width:"98%",margin:"0 0 5 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"0 -  None of the time",inputValue:"00"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"1 - Less often than daily",inputValue:"01"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"2 - Daily, but not constantly",inputValue:"02"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"3 - All of the time",inputValue:"03"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1730)Depression Screening: Has the patient been screened for depression, using a standardized, validated depression screening tool?",cls:"oasis_blue",itemId:"dep_screen",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"0 - No",inputValue:"00"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"1 - Yes, patient was screened using the PHQ-2©* scale.",inputValue:"01"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"2 - Yes, patient was screened with a different standardized, validated assessment-and the patient meets criteria for further evaluation for depression.",inputValue:"02"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"3 - Yes, patient was screened with a different standardized, validated assessment and the patient does not meet criteria for further evaluation for depression",inputValue:"03"}]},{xtype:"label",margin:"2px",text:"PHQ-2: Instructions for this two-question tool: Ask patient: Over the last two weeks, how often have you been bothered by any of the following problems?"},{xtype:"panel",border:!1,layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:6},defaults:{bodyStyle:"padding: 5px; background-color: #CCE6FF;"},items:[{html:"PHQ-2&copy;<sup>*</sup>",style:"text-align:center;font-weight:bold;",height:60,border:!1},{html:"Not at all 0 - 1 day",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"Several days 2 - 6 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"More than half of the days 7 - 11 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"Nearly every day 12 - 14 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"N/A Unable to respond",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"a) Little interest or pleasure in doing things",border:!1},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"03",boxLabel:"3",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"},{html:"b) Feeling down, depressed, or hopeless?",border:!1},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"03",boxLabel:"3",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"}]},{html:"<i><sup>* Copyright&copy; pizer Inc. All rights reserved. Reproduction with permission.</sup></i>",border:!1}]}],onValidate:function(e){var t=new Array,n=!1,r=!1;return m1730MainValue=e.down("[name=m1730_stdz_dprsn_scrng]").getGroupValue(),m1700Cognitive=e.down("radiofield[name=m1700_cog_function]").getGroupValue(),m1710Confused=e.down("radiofield[name=m1710_when_confused]").getGroupValue(),m1720Anxious=e.down("radiofield[name=m1720_when_anxious]").getGroupValue(),m1730Depression=e.down("radiofield[name=m1730_stdz_dprsn_scrng]").getGroupValue(),m1700Cognitive==null&&t.push(["M1700","Select one option from Cognitive Functioning."]),m1710Confused==null&&t.push(["M1710","Choose one option, when patient happened to be Confused within last 14 Days."]),m1720Anxious==null&&t.push(["M1720","Choose one option, when patient happened to be Anxious within last 14 Days."]),m1730Depression==null&&t.push(["M1730","Select how Depression Screening Assessment conducted."]),m1730MainValue=="01"&&(Ext.each(this.m1730_interest_value_group,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M1730","Do not leave the option Patient's 'Little interests and Pleasure' towards doing things empty, since 'Patient was screened using PHQ-2 scale' was selected in 'Depression Screening'."]),Ext.each(this.m1730_depression_value_group,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M1730","Do not leave the option patient is 'Feeling down, depressed, or hopelesss' empty, since 'Patient was screened using PHQ-2 scale' was selected in 'Depression Screening'."])),t},m1730FieldsEventHandling:function(e){this.query("[name=m1730_stdz_dprsn_scrng]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="00"||t.getGroupValue()=="02"||t.getGroupValue()=="03"?Ext.each(e,function(e,t){e.disable().setValue(!1)},this):Ext.each(e,function(e,t){e.enable()},this)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1730_interest_value_group=this.mainScope.query("radiofield[name=m1730_phq2_lack_intrst]"),this.m1730_depression_value_group=this.mainScope.query("radiofield[name=m1730_phq2_dprsn]"),this.m1730FieldsEventHandling(this.m1730_interest_value_group.concat(this.m1730_depression_value_group))}}),Ext.define("Ext.panel.NeuroEmotionalBehaviouralM1700M1730Poc",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehaviouralM1700M1730Poc",items:[{xtype:"fieldset",margin:"5px",title:"Neuro/Emotional/Behavioural",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"panel",border:!1,width:150,header:!1,title:"My Panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Headache:",inputValue:"1"},{xtype:"textfield",fieldLabel:"Location",labelAlign:"right",labelWidth:60,name:"headache_location"},{xtype:"textfield",fieldLabel:"Frequency",labelAlign:"right",labelWidth:70,name:"headache_frequency"}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"PERRLA",inputValue:"2"},{xtype:"checkboxfield",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Unequal pupils: R / L",inputValue:"3"},{xtype:"checkboxgroup",height:23,width:135,fieldLabel:"",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",flex:.6,name:"un_equal_pupils",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",flex:.6,name:"un_equal_pupils",boxLabel:"Left",inputValue:"2"}]}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Aphasia: Receptive / Expressive",inputValue:"4"},{xtype:"checkboxgroup",width:204,fieldLabel:"",items:[{xtype:"checkboxfield",name:"aphasia",boxLabel:"Receptive",inputValue:"1"},{xtype:"checkboxfield",name:"aphasia",boxLabel:"Expressive",inputValue:"2"}]}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Motor change: Fine / Gross",inputValue:"5"},{xtype:"checkboxgroup",width:126,fieldLabel:"",items:[{xtype:"checkboxfield",name:"motor_change",boxLabel:"Fine",inputValue:"F"},{xtype:"checkboxfield",name:"motor_change",boxLabel:"Gross",inputValue:"G"}]},{xtype:"textfield",fieldLabel:"Site",labelAlign:"right",name:"motor_change_site",labelWidth:60}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Dominant side: R / L",inputValue:"6"},{xtype:"checkboxgroup",height:23,width:135,fieldLabel:"",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",flex:.6,name:"dominant_side",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",flex:.6,name:"dominant_side",boxLabel:"Left",inputValue:"2"}]}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Weakness: UE / LE",inputValue:"7"},{xtype:"checkboxgroup",width:105,fieldLabel:"",items:[{xtype:"checkboxfield",name:"weakness_ue_le",boxLabel:"UE",inputValue:"UE"},{xtype:"checkboxfield",name:"weakness_ue_le",boxLabel:"LE",inputValue:"LE"}]},{xtype:"textfield",fieldLabel:"Location",labelAlign:"right",labelWidth:60,name:"weakness_location"}]},{xtype:"panel",border:!1,width:604,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch",padding:"5 0 5 0"},items:[{xtype:"checkboxgroup",width:450,fieldLabel:"",items:[{xtype:"checkboxfield",width:250,labelWidth:250,name:"neuro_emotional_behaviour",boxLabel:"Tremors: Fine / Gross / Paralysis",inputValue:"8",margin:"0 0 0 -5"},{xtype:"checkboxfield",name:"tremors",boxLabel:"Fine",inputValue:"F"},{xtype:"checkboxfield",name:"tremors",boxLabel:"Gross",inputValue:"G"},{xtype:"checkboxfield",name:"tremors",boxLabel:"Paralysis",inputValue:"P"}]},{xtype:"textfield",fieldLabel:"Site",labelAlign:"right",labelWidth:40,name:"termors_site"}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Stuporous/Hallucinations: Visual/ Auditory",inputValue:"9"},{xtype:"checkboxgroup",width:160,fieldLabel:"",items:[{xtype:"checkboxfield",name:"stuporous",boxLabel:"Visual",inputValue:"1"},{xtype:"checkboxfield",name:"stuporous",boxLabel:"Auditory",inputValue:"2"}]}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",items:[{xtype:"textfield",fieldLabel:"Hand grips: Equal / Unequal (specify)",labelWidth:220,name:"hand_grips_equal_or_unequal"},{xtype:"textfield",fieldLabel:"Strong / Weak (specify)",labelAlign:"right",labelWidth:220,name:"hand_grips_strong_or_weak"},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"neuro_emotional_behaviour",boxLabel:"Psychotropic drug use (specify)",inputValue:"10"},{xtype:"textfield",fieldLabel:"",labelAlign:"right",name:"psychotropic_drug"}]}]}]},{xtype:"panel",flex:1,border:!1,margin:"5px",width:150,header:!1,title:"My Panel",items:[{xtype:"textfield",fieldLabel:"Dose / Frequency",labelWidth:110,name:"dose_frequency"},{header:!1,border:!1,layout:"hbox",items:[{xtype:"checkboxfield",boxLabel:"Other (specify)",name:"neuro_emotional_behaviour",inputValue:"11"},{xtype:"textfield",fieldLabel:"",name:"neuro_emotional_behaviour_other"}]}]}]}],afterRender:function(){this.callParent();var e=this.query("[boxLabel=<b>No Problem</b>]")[0];e.on("change",function(t){var n=this.query("textfield, textareafield, datefield, numberfield, checkboxfield, radiofield, checkboxgroup, radiogroup, label");Ext.each(n,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)}}),Ext.define("Ext.panel.NeuroEmotionalBehavioural2M1740M1750",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehavioural2M1740M1750",items:[{xtype:"checkboxgroup",fieldLabel:"(M1740) Cognitive, behavioral, and psychiatric symptoms that are demonstrated at least once a week (Reported or Observed): (Mark all that apply.)",cls:"oasis_blue",itemId:"cog_beh_psyc1",width:"98%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m1740_bd_mem_deficit",inputValue:"1",margin:5,boxLabel:"1 - Memory deficit: failure to recognize familiar persons/places, inability to recall events of past 24 hours, significant memory loss so that supervision is required"},{xtype:"checkboxfield",name:"m1740_bd_imp_decisn",inputValue:"1",margin:5,boxLabel:"2 - Impaired decision-making: failure to perform usual ADLs or IADLs, inability to appropriately stop activities, jeopardizes safety through actions"},{xtype:"checkboxfield",name:"m1740_bd_verbal",inputValue:"1",margin:5,boxLabel:"3 - Verbal disruption: yelling, threatening, excessive profanity, sexual references, etc"},{xtype:"checkboxfield",name:"m1740_bd_physical",inputValue:"1",margin:5,boxLabel:"4 - Physical aggression: aggressive or combative to self and others (for example, hits self, throws objects, punches, dangerous maneuvers with wheelchair or other objects)"},{xtype:"checkboxfield",name:"m1740_bd_soc_inappro",inputValue:"1",margin:5,boxLabel:"5 - Disruptive, infantile, or socially inappropriate behavior (excludes verbal actions)"},{xtype:"checkboxfield",name:"m1740_bd_delusions",inputValue:"1",margin:5,boxLabel:"6 - Delusional, hallucinatory, or paranoid behavior"},{xtype:"checkboxfield",name:"m1740_bd_none",inputValue:"1",margin:5,boxLabel:"7 - None of the above behaviors demonstrated"}]},{xtype:"radiogroup",fieldLabel:"(M1745) Frequency of Disruptive Behavior Symptoms (Reported or Observed) Any physical, verbal, or other disruptive/dangerous symptoms that are injurious to self or others or jeopardize personal safety",cls:"oasis_blue",item_id:"fre_disrupt_beh_sysD",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"00",margin:5,boxLabel:"0 - Never"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"01",margin:5,boxLabel:"1 - Less than once a month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"02",margin:5,boxLabel:"2 - Once a month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"03",margin:5,boxLabel:"3 - Several times each month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"04",margin:5,boxLabel:"4 - Several times a week"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"05",margin:5,boxLabel:"5 - At least daily"}]},{xtype:"radiogroup",fieldLabel:"(M1750) Is this patient receiving Psychiatric Nursing Services at home provided by a qualified psychiatric nurse?",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1750_rec_psych_nurs",inputValue:"0",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m1750_rec_psych_nurs",inputValue:"1",margin:5,boxLabel:"1 - Yes"}]}],onValidate:function(e){var t=new Array;return m1745Behavior=e.down("radiofield[name=m1745_beh_prob_freq]").getGroupValue(),m1750Psychiatric=e.down("radiofield[name=m1750_rec_psych_nurs]").getGroupValue(),this.m1740Deficit.value==0&&this.m1740Decsin.value==0&&this.m1740Verbal.value==0&&this.m1740Physical.value==0&&this.m1740Inappro.value==0&&this.m1740Delusions.value==0&&this.m1740None.value==0&&t.push(["M1740","Select at least one Cognitive, behavioral, and psychiatric symptoms demonstrated once in a week."]),m1745Behavior==null&&t.push(["M1745","Select the patient's Frequency of Disruptive Behavior symptoms."]),m1750Psychiatric==null&&t.push(["M1750","Choose (Yes/No) whether the patient receiving Psychiatric Nursing Services at home."]),t},selectOtherValues:function(){Ext.each(this.fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1740None.setValue(!1)},this)},this)},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&Ext.each(this.fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.noneOfAbove=this.mainScope.down("checkbox[name=m1740_bd_none]"),this.fields=["m1740_bd_mem_deficit","m1740_bd_imp_decisn","m1740_bd_verbal","m1740_bd_physical","m1740_bd_soc_inappro","m1740_bd_delusions"],this.m1740Deficit=this.mainScope.down("[name=m1740_bd_mem_deficit]"),this.m1740Decsin=this.mainScope.down("[name=m1740_bd_imp_decisn]"),this.m1740Verbal=this.mainScope.down("[name=m1740_bd_verbal]"),this.m1740Physical=this.mainScope.down("[name=m1740_bd_physical]"),this.m1740Inappro=this.mainScope.down("[name=m1740_bd_soc_inappro]"),this.m1740Delusions=this.mainScope.down("[name=m1740_bd_delusions]"),this.m1740None=this.mainScope.down("[name=m1740_bd_none]"),this.selectNoneOfAbove(),this.selectOtherValues()}}),Ext.define("Ext.panel.NeuroEmotionalBehaviouralM1740M1750Poc",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehaviouralM1740M1750Poc",items:[{xtype:"fieldset",margin:5,checkboxName:"mental_status",title:"Mental Status",items:[{border:!1,header:!1,layout:{type:"table",columns:9},defaults:{margin:"5 5 5 0"},items:[{xtype:"checkboxfield",name:"mental_status",boxLabel:"1 - Oriented",inputValue:"1",width:125},{xtype:"checkboxfield",name:"mental_status",boxLabel:"2 - Comatose",inputValue:"2"},{xtype:"checkboxfield",name:"mental_status",boxLabel:"3 - Forgetful",inputValue:"3"},{xtype:"checkboxfield",name:"mental_status",boxLabel:"4 - Depressed",inputValue:"4"},{xtype:"checkboxfield",name:"mental_status",boxLabel:"5 - Disoriented",inputValue:"5"},{xtype:"checkboxfield",margin:"0 5 0 5",name:"mental_status",boxLabel:"6 - Lethargic",inputValue:"6"},{xtype:"checkboxfield",margin:"0 5 0 5",fieldLabel:"",name:"mental_status",boxLabel:"7 - Agitated",inputValue:"7"},{xtype:"checkboxfield",margin:"0 5 0 5",fieldLabel:"",name:"mental_status",boxLabel:"8 - Other",inputValue:"8"},{xtype:"textfield",fieldLabel:"",name:"other_mental_status",width:250}]}]},{xtype:"fieldset",height:580,margin:"5px",checkboxName:"mental_status",title:"Psychosocial",layout:{type:"hbox"},items:[{xtype:"panel",border:!1,header:!1,layout:{type:"vbox"},flex:1,items:[{xtype:"textfield",fieldLabel:"Primary Language",labelWidth:120,name:"psychosocial_primary_language"},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Language barrier",inputValue:"1",width:125,margin:"0 5 0 0"},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Needs interpreter",inputValue:"2",margin:"0 5 0 0"},{xtype:"textfield",fieldLabel:"",name:"psychosocial_interpreter"}]},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Learning barrier",inputValue:"3"},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",name:"learning_barrier",boxLabel:"Mental",inputValue:"1",margin:"0 5 0 10",width:116},{xtype:"checkboxfield",name:"learning_barrier",boxLabel:"Psychosocial",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"learning_barrier",boxLabel:"Physical",inputValue:"3",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"learning_barrier",boxLabel:"Functional",inputValue:"4",margin:"0 5 0 0"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",margin:"0 5 0 0",name:"psychosocial",boxLabel:"Unable to read",inputValue:"4",width:125},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Unable to write",inputValue:"5"}]},{xtype:"textfield",fieldLabel:"Educational level",labelWidth:105,name:"psychosocial_education_level"},{xtype:"checkboxfield",margin:"0 5 0 0",name:"psychosocial",boxLabel:"Spiritual / Cultural implications that impact care.",inputValue:"6"},{xtype:"textareafield",height:47,width:419,fieldLabel:"Explain",labelWidth:110,name:"spiritual_cultural_explain"},{xtype:"textareafield",height:47,width:419,fieldLabel:"Spiritual resource",labelWidth:110,name:"spiritual_resource"},{xtype:"textfield",fieldLabel:"Phone No.",name:"psychosocial_phone_number",labelWidth:110},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Sleep/Rest",inputValue:"7",width:125},{xtype:"radiofield",name:"sleep_rest",boxLabel:"Adequate",inputValue:"1",margin:"0 23 0 0"},{xtype:"radiofield",name:"sleep_rest",boxLabel:"Inadequate",inputValue:"2"}]},{xtype:"textareafield",height:47,width:419,fieldLabel:"Explain",labelAlign:"right",labelWidth:110,name:"sleep_rest_explain"},{xtype:"panel",border:!1,header:!1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"psychosocial",boxLabel:"Inappropriate responses to caregivers/clinician",inputValue:"8"},{xtype:"checkboxfield",margin:"0 2 0 2",fieldLabel:"",name:"inappropriate_responses",boxLabel:"Caregivers",inputValue:"1"},{xtype:"checkboxfield",fieldLabel:"",name:"inappropriate_responses",boxLabel:"Clinician",inputValue:"2"}]},{xtype:"checkboxfield",anchor:"100%",fieldLabel:"",name:"psychosocial",boxLabel:"Inappropriate follow-through in past",inputValue:"9"},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Angry",inputValue:"10",width:125},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Flat affect",inputValue:"11",margin:"0 23 0 0"},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Discouraged",inputValue:"12",margin:"0 5 0 0"},{xtype:"checkboxfield",fieldLabel:"",name:"psychosocial",boxLabel:"Disorganized",inputValue:"15",width:125},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Withdrawn",inputValue:"13",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"psychosocial",boxLabel:"Difficulty coping",inputValue:"14"}]}]},{xtype:"panel",border:!1,header:!1,layout:{type:"vbox"},flex:.8,items:[{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",margin:"0 5px 0 0",fieldLabel:"",name:"psychosocial",boxLabel:"Depressed: Recent/Long term",inputValue:"16",margin:"0 15 0 0"},{xtype:"radiogroup",width:223,fieldLabel:"",items:[{xtype:"radiofield",name:"depressed",boxLabel:"Recent",inputValue:"1"},{xtype:"radiofield",name:"depressed",boxLabel:"Long term",inputValue:"2"}]}]},{xtype:"textfield",width:258,fieldLabel:"Treatment",labelWidth:65,name:"psychosocial_treatment"},{xtype:"checkboxfield",fieldLabel:"",name:"psychosocial",boxLabel:"Inability to cope with altered health status as evidenced by:",inputValue:"17"},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",fieldLabel:"",name:"inability_to_cope",boxLabel:"Lack of motivation",inputValue:"1",margin:"0 5 0 10"},{xtype:"checkboxfield",fieldLabel:"",name:"inability_to_cope",boxLabel:"Unrealistic expectations",inputValue:"2"},{xtype:"checkboxfield",fieldLabel:"",name:"inability_to_cope",boxLabel:"Inability to recognize problems",inputValue:"3",margin:"0 5 0 10"},{xtype:"checkboxfield",fieldLabel:"",name:"inability_to_cope",boxLabel:"Denial of problems",inputValue:"4"}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkboxfield",fieldLabel:"",name:"psychosocial",boxLabel:"Evidence of abuse / neglect / exploitation:",inputValue:"18"},{xtype:"checkboxfield",margin:"0 5 0 5",fieldLabel:"",name:"evidence",boxLabel:"Abuse",inputValue:"1"},{xtype:"checkboxfield",margin:"0 5 0 0",fieldLabel:"",name:"evidence",boxLabel:"Neglect",inputValue:"2"},{xtype:"checkboxfield",fieldLabel:"",name:"evidence",boxLabel:"Exploitation",inputValue:"3"}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",fieldLabel:"",name:"evidence",boxLabel:"Potential",inputValue:"4",margin:"0 0 0 10",width:110},{xtype:"checkboxfield",width:100,fieldLabel:"",name:"evidence",boxLabel:"Actual",inputValue:"5"},{xtype:"checkboxfield",margin:"0 5 0 0",fieldLabel:"",name:"evidence",boxLabel:"Verbal",inputValue:"6",width:108},{xtype:"checkboxfield",fieldLabel:"",name:"evidence",boxLabel:"Emotional",inputValue:"7",margin:"0 5 0 0"},{xtype:"checkboxfield",margin:"0 5 0 10",fieldLabel:"",name:"evidence",boxLabel:"Physical",inputValue:"8"},{xtype:"checkboxfield",margin:"0 5 0 0",fieldLabel:"",name:"evidence",boxLabel:"Financial",inputValue:"9"},{xtype:"checkboxfield",margin:"0 5 0 0",fieldLabel:"",name:"evidence",boxLabel:"Intervention",inputValue:"10"}]},{xtype:"textareafield",height:49,width:419,fieldLabel:"Describe",labelWidth:70,name:"psychosocial_describe"},{xtype:"textareafield",height:49,width:419,fieldLabel:"Comments",labelWidth:70,name:"psychosocial_comments"}]}]}]}),Ext.define("Ext.panel.AdlIadls1M1800M1830",{extend:"Ext.panel.Panel",alias:"widget.adlIadls1M1800M1830",items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1800) Grooming: Current ability to tend safely to personal hygiene needs (specifically: washing face and hands, hair care, shaving or make up, teeth or denture care, fingernail care). ",cls:"oasis_blue",itemId:"grooming1",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"0 - Able to groom self unaided, with or without the use of assistive devices or adapted methods.",inputValue:"00"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"1 - Grooming utensils must be placed within reach before able to complete grooming activities.",inputValue:"01"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"2 - Someone must assist the patient to groom self.",inputValue:"02"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"3 - Patient depends entirely upon someone else for grooming needs.",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1810) Current Ability to Dress Upper Body safely (with or without dressing aids) including undergarments, pullovers, front-opening shirts and blouses, managing zippers, buttons, and snaps",cls:"oasis_pink",itemId:"dress_upr_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"0 - Able to get clothes out of closets and drawers, put them on and remove them from the upper body without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"1 - Able to dress upper body without assistance if clothing is laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"2 - Someone must help the patient put on upper body clothing.",inputValue:"02"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"3 - Patient depends entirely upon another person to dress the upper body.",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1820) Current Ability to Dress Lower Body safely (with or without dressing aids) including undergarments, slacks, socks or nylons, shoes",cls:"oasis_pink",itemId:"dress_lwr_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"0 - Able to obtain, put on, and remove clothing and shoes without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"1 - Able to dress lower body without assistance if clothing and shoes are laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"2 - Someone must help the patient put on undergarments, slacks, socks or nylons, and shoes.",inputValue:"02"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"3 - Patient depends entirely upon another person to dress lower body. ",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1830) Bathing: Current ability to wash entire body safely. Excludes grooming (washing face, washing hands, and shampooing hair).",cls:"oasis_pink",itemId:"wash_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"0 - Able to bathe self in shower or tub independently, including getting in and out of tub/shower.",inputValue:"00"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"1 - With the use of devices, is able to bathe self in shower or tub independently, including getting in and out of the tub/shower.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"2 - Able to bathe in shower or tub with the intermittent assistance of another person: (a) for intermittent supervision or encouragement or reminders, OR (b) to get in and out of the shower or tub, OR (c) for washing difficult to reach areas.",inputValue:"02"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"3 - Able to participate in bathing self in shower or tub, but requires presence of another person throughout the bath for assistance or supervision.",inputValue:"03"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"4 - Unable to use the shower or tub, but able to bathe self independently with or without the use of devices at the sink, in chair, or on commode.",inputValue:"04"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"5 - Unable to use the shower or tub, but able to participate in bathing self in bed, at the sink, in bedside chair, or on commode, with the assistance or supervision of another person.",inputValue:"05"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"6 - Unable to participate effectively in bathing and is bathed totally by another person.",inputValue:"06"}]}],onValidate:function(e){var t=new Array;return m1800Grooming=e.down("radiofield[name=m1800_crnt_grooming]").getGroupValue(),m1810Upper=e.down("radiofield[name=m1810_crnt_dress_upper]").getGroupValue(),m1820Lower=e.down("radiofield[name=m1820_crnt_dress_lower]").getGroupValue(),m1830Bathing=e.down("radiofield[name=m1830_crnt_bathg]").getGroupValue(),m1800Grooming==null&&t.push(["M1800","Select the patient's dependency or Level of Grooming."]),m1810Upper==null&&t.push(["M1810","Select the patient's current ability to dress upper body safely."]),m1820Lower==null&&t.push(["M1820","Select the patient's current ability to dress lower body safely."]),m1830Bathing==null&&t.push(["M1830","Select the patient's current ability to wash entire body safely(Bathing)."]),t}}),Ext.define("Ext.panel.AdlIadls2M1840M1870",{extend:"Ext.panel.Panel",alias:"widget.adlIadls2M1840M1870",items:[{xtype:"radiogroup",fieldLabel:"(M1840) Toilet Transferring: Current ability to get to and from the toilet or bedside commode safely and transfer on and off toilet/commode",cls:"oasis_pink",itemId:"toilet_transfer",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"00",margin:5,boxLabel:"0 - Able to get to and from the toilet and transfer independently with or without a device"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"01",margin:5,boxLabel:"1 - When reminded, assisted, or supervised by another person, able to get to and from the toilet and transfer"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"02",margin:5,boxLabel:"2 - Unable to get to and from the toilet but is able to use a bedside commode (with or without assistance)"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"03",margin:5,boxLabel:"3 - Unable to get to and from the toilet or bedside commode but is able to use a bedpan/urinal independently"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"04",margin:5,boxLabel:"4 - Is totally dependent in toileting"}]},{xtype:"radiogroup",fieldLabel:"(M1845) Toileting Hygiene: Current ability to maintain perineal hygiene safely, adjust clothes and/or incontinence pads before and after using toilet, commode, bedpan, urinal. If managing ostomy, includes cleaning area around stoma, but not managing equipment",cls:"oasis_blue",itemId:"toileting_hyg",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1845_crnt_toiltg_hygn",inputValue:"00",margin:5,boxLabel:"0 - Able to manage toileting hygiene and clothing management without assistance"},{xtype:"radiofield",name:"m1845_crnt_toiltg_hygn",inputValue:"01",margin:5,boxLabel:"1 - Able to manage toileting hygiene and clothing management without assistance if supplies/implements are laid out for the patient"
},{xtype:"radiofield",name:"m1845_crnt_toiltg_hygn",inputValue:"02",margin:5,boxLabel:"2 - Someone must help the patient to maintain toileting hygiene and/or adjust clothing"},{xtype:"radiofield",name:"m1845_crnt_toiltg_hygn",inputValue:"03",margin:5,boxLabel:"3 - Patient depends entirely upon another person to maintain toileting hygiene"}]},{xtype:"radiogroup",fieldLabel:"(M1850) Transferring: Current ability to move safely from bed to chair, or ability to turn and position self in bed if patient is bedfast",cls:"oasis_pink",itemId:"move_safely",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"00",margin:5,boxLabel:"0 - Able to independently transfer"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"01",margin:5,boxLabel:"1 - Able to transfer with minimal human assistance or with use of an assistive device"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"02",margin:5,boxLabel:"2 - Able to bear weight and pivot during the transfer process but unable to transfer self"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"03",margin:5,boxLabel:"3 - Unable to transfer self and is unable to bear weight or pivot when transferred by another person"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"04",margin:5,boxLabel:"4 - Bedfast, unable to transfer but is able to turn and position self in bed"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"05",margin:5,boxLabel:"5 - Bedfast, unable to transfer and is unable to turn and position self"}]},{xtype:"radiogroup",fieldLabel:"(M1860) Ambulation/Locomotion: Current ability to walk safely, once in a standing position, or use a wheelchair, once in a seated position, on a variety of surfaces",cls:"oasis_pink",itemId:"ambulation_loco",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"00",margin:5,boxLabel:"0 - Able to independently walk on even and uneven surfaces and negotiate stairs with or without railings (specifically: needs no human assistance or assistive device)"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"01",margin:5,boxLabel:"1 - With the use of a one-handed device (for example, cane, single crutch, hemi-walker), able to independently walk on even and uneven surfaces and negotiate stairs with or without railings"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"02",margin:5,boxLabel:"2 - Requires use of a two-handed device (for example, walker or crutches) to walk alone on a level surface and/or requires human supervision or assistance to negotiate stairs or steps or uneven surfaces"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"03",margin:5,boxLabel:"3 - Able to walk only with the supervision or assistance of another person at all times"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"04",margin:5,boxLabel:"4 - Chairfast, unable to ambulate but is able to wheel self independently"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"05",margin:5,boxLabel:"5 - Chairfast, unable to ambulate and is unable to wheel self"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"06",margin:5,boxLabel:"6 - Bedfast, unable to ambulate or be up in a chair"}]},{xtype:"radiogroup",fieldLabel:"(M1870) Feeding or Eating: Current ability to feed self meals and snacks safely. Note: This refers only to the process of eating, chewing, and swallowing, not preparing the food to be eaten",cls:"oasis_blue",itemId:"feeding_or_eating",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"00",margin:5,boxLabel:"0 - Able to independently feed self"},{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"01",margin:5,boxLabel:"1 - Able to feed self independently but requires:<br /> (a) meal set-up; OR<br /> (b) intermittent assistance or supervision from another person; OR<br /> (c) a liquid, pureed or ground meat diet"},{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"02",margin:5,boxLabel:"2 - Unable to feed self and must be assisted or supervised throughout the meal/snack"},{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"03",margin:5,boxLabel:"3 - Able to take in nutrients orally and receives supplemental nutrients through a nasogastric tube or gastrostomy"},{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"04",margin:5,boxLabel:"4 - Unable to take in nutrients orally and is fed nutrients through a nasogastric tube or gastrostomy"},{xtype:"radiofield",name:"m1870_crnt_feeding",inputValue:"05",margin:5,boxLabel:"5 - Unable to take in nutrients orally or by tube feeding"}]}],onValidate:function(e){var t=new Array;return m1840Field=e.down("#adl_iadls2_m1840_m1870").query("[xtype=radiogroup]")[0],m1845Field=e.down("#adl_iadls2_m1840_m1870").query("[xtype=radiogroup]")[1],m1850Field=e.down("#adl_iadls2_m1840_m1870").query("[xtype=radiogroup]")[2],m1860Field=e.down("#adl_iadls2_m1840_m1870").query("[xtype=radiogroup]")[3],m1870Field=e.down("#adl_iadls2_m1840_m1870").query("[xtype=radiogroup]")[4],m1840Field.down("[name = m1840_crnt_toiltg]").getGroupValue()==null&&t.push(["M1840","Select the patient's current ability of Toilet Transferring."]),m1845Field.down("[name = m1845_crnt_toiltg_hygn]").getGroupValue()==null&&t.push(["M1845","Select the patient's current ability of Toileting Hygiene."]),m1850Field.down("[name = m1850_crnt_trnsfrng]").getGroupValue()==null&&t.push(["M1850","Select the patient's current ability of self Transferring."]),m1860Field.down("[name = m1860_crnt_ambltn]").getGroupValue()==null&&t.push(["M1860","Select the patient's current ability of Ambulation/Locomotion."]),m1870Field.down("[name = m1870_crnt_feeding]").getGroupValue()==null&&t.push(["M1870","Select the patient's current ability of self Feeding or Eating."]),t}}),Ext.define("Ext.panel.AdlIadls3M1880M1890",{extend:"Ext.panel.Panel",alias:"widget.adlIadls3M1880M1890",items:[{xtype:"panel",border:0,margin:5,layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1880) Current Ability to Plan and Prepare Light Meals (for example, cereal, sandwich) or reheat delivered meals safely. ",cls:"oasis_blue",itemId:"plan_prep_meals",width:"90%",labelAlign:"top",items:[{xtype:"radiofield",height:30,name:"m1880_crnt_prep_lt_meals",boxLabel:"0 - a) Able to independently plan and prepare all light meals for self or reheat delivered meals; OR (b) Is physically, cognitively, and mentally able to prepare light meals on a regular basis but has not routinely performed light meal preparation in the past (specifically: prior to this home care admission).",inputValue:"00"},{xtype:"radiofield",name:"m1880_crnt_prep_lt_meals",boxLabel:"1 - Unable to prepare light meals on a regular basis due to physical, cognitive, or mental limitations.",inputValue:"01"},{xtype:"radiofield",name:"m1880_crnt_prep_lt_meals",boxLabel:"2 - Unable to prepare any light meals or reheat any delivered meals.",inputValue:"02"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1890) Ability to Use Telephone: Current ability to answer the phone safely, including dialing numbers, and effectively using the telephone to communicate.",cls:"oasis_blue",item_id:"telephone_use",width:"90%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"0 - Able to dial numbers and answer calls appropriately and as desired.",inputValue:"00"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"1 - Able to use a specially adapted telephone (for example, large numbers on the dial, teletype phone for the deaf) and call essential numbers.",inputValue:"01"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"2 - Able to answer the telephone and carry on a normal conversation but has difficulty with placing calls.",inputValue:"02"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"3 - Able to answer the telephone only some of the time or is able to carry on only a limited conversation.",inputValue:"03"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"4 - Unable to answer the telephone at all but can listen if assisted with equipment.",inputValue:"04"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"5 - Totally unable to use the telephone.",inputValue:"05"},{xtype:"radiofield",name:"m1890_crnt_phone_use",boxLabel:"NA - Patient does not have a telephone.",inputValue:"NA"}]}]}],onValidate:function(e){var t=new Array;return m1880Value=e.down("#adl_iadls3_m1880_m1890").query("[xtype=radiogroup]")[0],m1890Value=e.down("#adl_iadls3_m1880_m1890").query("[xtype=radiogroup]")[1],m1880Value.down("[name = m1880_crnt_prep_lt_meals]").getGroupValue()==null&&t.push(["M1880","Select patient's ability to Plan and Prepare Light Meals also reheat delivered meals safely."]),m1890Value.down("[name = m1890_crnt_phone_use]").getGroupValue()==null&&t.push(["M1890","Select patient's current ability to Use Telephone."]),t}}),Ext.define("Ext.panel.AdlIadls4M1900M1910",{extend:"Ext.panel.Panel",alias:"widget.adlIadls4M1900M1910",items:[{xtype:"panel",layout:"vbox",border:!1,margin:"5 5 10 5",items:[{xtype:"panel",layout:"vbox",border:!1,margin:5,items:[{xtype:"label",margin:5,html:"(M1900) Prior Functioning ADL/IADL: Indicate the patient's usual ability with everyday activities prior to this current illness, exacerbation, or injury. Check only <u>one</u> box in each row."},{xtype:"panel",border:!1,margin:"20 50 20 20",layout:{type:"table",tableAttrs:{border:1},columns:4},defaults:{bodyStyle:"padding:5px"},items:[{html:"Functional Area",style:"text-align:center;font-weight:bold;",height:38,width:270,border:!1},{html:"Independent",style:"text-align:center;font-weight:bold;",width:110,height:38,border:!1},{html:"Needed Some Help",style:"text-align:center;font-weight:bold;",width:110,height:43,border:!1},{html:"Dependent",style:"text-align:center;font-weight:bold;",width:110,height:38,border:!1},{html:"a. Self-care (specifically: grooming, dressing, bathing and toileting hygiene)",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"b. Ambulation",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"c. Transfer",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"d. Household tasks (specifically: light meal preparation, laundry, shopping and phone use)",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"}]}]},{xtype:"panel",border:!1,width:"93%",height:300,items:[{xtype:"radiogroup",fieldLabel:"(M1910) Has this patient had a multi-factor Fall Risk Assessment (such as falls history, use of multiple medications, mental impairment, toileting frequency, general mobility/transferring impairment, environmental hazards)?",cls:"oasis_blue",item_id:"mult_fac_fall",width:"98%",margin:"10 0 0 5",labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"00",margin:5,boxLabel:"0 - No multi-factor falls risk assessment conducted"},{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"01",margin:5,boxLabel:"1 - Yes, and it does not indicate a risk for falls"},{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"02",margin:5,boxLabel:"2 - Yes, and it indicates a risk for falls"}]}]}]}],onValidate:function(e){var t=new Array,n=!1,r=!1,i=!1,s=!1;return m1910Value=e.down("#adl_iadls4_m1900_m1910").query("[xtype=radiogroup]")[0],Ext.each(this.adliadl_self_group,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M1900","a. Select the patient's ability of Self-Care."]),Ext.each(this.adliadl_ambltn_group,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M1900","b. Select the patient's ability of Ambulation."]),Ext.each(this.adliadl_trnsfr_group,function(e,t){e.checked==1&&(i=!0)},this),i==0&&t.push(["M1900","c. Select the patient's ability of self Transfer."]),Ext.each(this.adliadl_hsehold_group,function(e,t){e.checked==1&&(s=!0)},this),s==0&&t.push(["M1900","d. Select the patient's ability to do Household tasks."]),m1910Value.down("[name = m1910_mlt_fctr_fall_risk_asmt]").getGroupValue()==null&&t.push(["M1910","Choose (Yes/No) whether the patient had a Multi-factor Fall Assessment."]),t},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.adliadl_self_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_self]"),this.adliadl_ambltn_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_ambltn]"),this.adliadl_trnsfr_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_trnsfr]"),this.adliadl_hsehold_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_hsehold]")}}),Ext.define("Ext.panel.FallRiskManagement",{extend:"Ext.panel.Panel",alias:"widget.fallRiskManagement",items:[{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1},columns:2},items:[{height:20,width:600,border:!1,style:"text-align:center;",colspan:2,html:"<b>MAHC 10 - FALL RISK ASSESSMENT TOOL</b>"},{height:80,width:600,border:!1,style:"text-align:center;",html:"<b>REQUIRED CORE ELEMENTS</br>Assess one point for each core element 'yes'.</br></b> Information may be gathered from medical record, assessment and if applicable, the patient/caregiver. Beyond protocols listed below, scoring should be based on your clinical judgment. "},{html:"<b>Points</b>",height:55,width:100,style:"text-align:center;",border:!1},{html:"<b>Age 65+</b>",margin:5,height:30,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"age",style:"align:center;",boxLabel:"1",inputValue:1},{html:"<b>Diagnosis (3 or more co-existing)</b></br>Includes only documented medical diagnosis.",margin:5,height:40,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"diagnosis",boxLabel:"1",inputValue:1},{html:"<b>Prior history of falls within 3 months</br></b>A unintentional change in position resulting in coming to rest on the ground or at a lower level.",margin:5,height:40,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"position",boxLabel:"1",inputValue:1},{html:"<b>Incontinence</b></br>Inability to make it to the bathroom or commode in timely manner.</br> Includes frequency, urgency, and/or nocturia.",margin:5,height:60,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",boxLabel:"1",inputValue:1,name:"incontinence"},{html:"<b>Visual impairment</b></br>Includes but not limited to, macular degeneration, diabetic retinopathies, visual field loss,</br> age related changes, decline in visual acuity,accommodation, glare tolerance, depth perception,</br> and night vision or not wearing prescribed glasses or having the correct prescription.",margin:5,height:80,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"visual_impairment",boxLabel:"1",inputValue:1},{html:"<b>Impaired functional mobility</b></br>May include patients who need help with IADLs or ADLs or have gait or transfer problems, </br>arthritis, pain, fear of falling, foot problems, impaired sensation, impaired coordination or</br> improper use of assistive devices.",margin:5,height:80,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",boxLabel:"1",inputValue:1,name:"impaired_functional_mobility"},{html:"<b>Environmental hazards</b></br>May include but not limited to, poor illumination, equipment tubing, inappropriate footwear,</br> pets, hard to reach items, floor surfaces that are uneven or cluttered, or outdoor entry and exits.",margin:5,height:60,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"environmental_hazards",boxLabel:"1",inputValue:1},{html:"<b>Poly Pharmacy (4 or more prescriptions - any type)</b></br>All PRESCRIPTIONS including prescriptions for OTC meds. Drugs highlyassociated with fall risk</br> include but not limited to, sedatives, anti-depressants, tranquilizers, narcotics, antihypertensives,</br> cardiac meds,corticosteriods, anti-anxiety drugs, anticholinergic drugs, and hypoglycemic</br> drugs.",margin:5,height:100,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"poly_pharmacy",boxLabel:"1",inputValue:1},{html:"<b>Pain affecting level of function</b></br>Pain often affects an individual's desire or ability to move or pain can be a factor in depression or </br> compliance with safety recommendations.",margin:5,height:60,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",boxLabel:"1",inputValue:1,name:"pain_affecting_level"},{html:"<b>Cognitive impairment</b></br>Could include patients with dementia, Alzheimer's or stroke patients or patients who are confused,</br> use poor judgment, have decreased comprehension, impulsivity, memory deficits. Consider</br> patient's ability to adhere to the plan of care.",margin:5,height:80,border:!1},{xtype:"checkboxfield",margin:"0 0 0 55",name:"cognitive_impairment",boxLabel:"1",inputValue:1},{html:"<b>A score of 4 or more is considered at risk for falling <span style=padding-left:200px>TOTAL</b>",margin:5,height:20,border:!1},{xtype:"numberfield",margin:5,readOnly:!0,itemId:"fall_risk_assessment_total",name:"fall_risk_assessment_total"},{html:"MAHC 10 reprinted with permission from <b> Missouri Alliance for HOME CARE</b>",margin:5,height:20,colspan:2,border:!1}]}],afterRender:function(){this.callParent();var e=this.down("#fall_risk_assessment_total"),t=e.up("panel").query("checkboxfield");Ext.each(t,function(t){t.on("change",function(t){t.checked?e.setValue(e.value+t.inputValue):e.setValue(e.value-t.inputValue)},this)},this)}}),Ext.define("Ext.panel.FunctionalLimitations",{extend:"Ext.panel.Panel",alias:"widget.functionalLimitations",items:[{xtype:"checkboxgroup",columns:3,defaults:{width:300,margin:"3px"},items:[{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"1-Amputation",inputValue:"1"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"2-Bowel/Bladder (Incontinence)",inputValue:"2"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"3-Contracture",inputValue:"3"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"4-Hearing",inputValue:"4"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"5-Paralysis",inputValue:"5"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"6-Endurance",inputValue:"6"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"7-Ambulation",inputValue:"7"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"8-Speech",inputValue:"8"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"9-Legally blind",inputValue:"9"},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"A-Dyspnea with minimal exertion",inputValue:"10"}]},{xtype:"checkboxfield",name:"functional_limitations",boxLabel:"B-Other (specify)",inputValue:"11",margin:"0 0 0 8"},{xtype:"textareafield",name:"functional_limitations_other",margin:"0 0 0 8",cols:50}]}),Ext.define("Ext.panel.SuppliesEquipment",{extend:"Ext.panel.Panel",alias:"widget.suppliesEquipment",items:[{xtype:"checkboxgroup",margin:"5px",columns:4,items:[{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Bathbench",inputValue:"1",width:200},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Cane",inputValue:"2",width:200},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Commode",inputValue:"3",width:200},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Eggcrate",inputValue:"4",width:200},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Hospital bed",inputValue:"5"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Hoyer lift",inputValue:"6"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Enteral feeding pump",inputValue:"7"},{xtype:"checkboxfield",name:"supplies_equipment",inputValue:"8",boxLabel:"Nebulizer"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Oxygen concentrator",inputValue:"9"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Suction machine",inputValue:"10"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Ventilator",inputValue:"11"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Walker",inputValue:"12"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Wheelchair",inputValue:"13"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Tens unit",inputValue:"14"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Special mattress overlay",inputValue:"15"},{xtype:"textfield",name:"special_mattress_overlay"},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Pressure relieving device",inputValue:"16"},{xtype:"textfield",name:"pressure_relieving_device"}]},{xtype:"checkboxfield",name:"supplies_equipment",boxLabel:"Other",inputValue:"17",margin:"0 0 0 10"},{xtype:"textareafield",name:"other_supplies_equipment",margin:"0 0 0 10",cols:30}]}),Ext.define("Ext.panel.ActivitiesPermitted",{extend:"Ext.panel.Panel",alias:"widget.activitiesPermitted",items:[{xtype:"checkboxgroup",margin:"5px",columns:4,items:[{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"1-Complete bedrest",inputValue:"1",width:200},{xtype:"checkboxfield",name:"activities_permitted",width:250,boxLabel:"2-Bedrest/BRP",inputValue:"2"},{xtype:"checkboxfield",name:"activities_permitted",width:200,boxLabel:"3-Up as tolerated",inputValue:"3"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"4-Transfer bed/chair",inputValue:"4",width:200},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"5-Exercises prescribed",inputValue:"5"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"6-Partial weight bearing",inputValue:"6"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"7-Independent in home",inputValue:"7"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"8-Crutches",inputValue:"8"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"9-Cane",inputValue:"9"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"A-Wheelchair",inputValue:"10"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"B-Walker",inputValue:"11"},{xtype:"checkboxfield",name:"activities_permitted",boxLabel:"C-No restrictions",inputValue:"12"}]},{xtype:"checkboxfield",margin:"0 0 0 10",name:"activities_permitted",boxLabel:"D-Other(specify)",inputValue:"13"},{xtype:"textareafield",margin:"0 0 0 10",name:"other_activities_permitted",cols:40}]}),Ext.define("Ext.panel.Musculoskeletal",{extend:"Ext.panel.Panel",alias:"widget.musculoskeletal",items:[{xtype:"checkboxfield",margin:"5 0 0 5",name:"musculoskeletal",boxLabel:"<b>No Problem</b>",inputValue:"NP",width:100},{xtype:"panel",layout:"hbox",border:!1,header:!1,items:[{xtype:"panel",layout:"vbox",border:!1,header:!1,flex:1,items:[{xtype:"fieldcontainer",margin:"5 5 0 5",layout:"hbox",items:[{xtype:"checkboxfield",name:"musculoskeletal",boxLabel:"Hemiplegia",inputValue:"1",width:132},{xtype:"checkboxfield",name:"musculoskeletal",boxLabel:"Paraplegia",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"musculoskeletal",boxLabel:"Quadriplegia",inputValue:"3"}]},{border:!1,header:!1,layout:{type:"table",columns:2},margin:5,items:[{xtype:"checkboxfield",boxLabel:"Fracture(location)",inputValue:"7",width:130,name:"musculoskeletal",isHeader:!1},{xtype:"textfield",margin:"0 0 0 5",isHeader:!1,name:"fracture",width:180},{xtype:"checkboxfield",boxLabel:"Atrophy",inputValue:"9",width:130,name:"musculoskeletal",isHeader:!1},{xtype:"textfield",name:"antrophy",margin:"0 0 0 5",width:180},{xtype:"checkboxfield",width:130,boxLabel:"Paresthesia",inputValue:"11",name:"musculoskeletal",isHeader:!1},{xtype:"textfield",name:"paresthesia",margin:"0 0 0 5",width:180}]},{xtype:"fieldcontainer",layout:{type:"vbox"},items:[{xtype:"checkboxfield",margin:5,boxLabel:"Contractures",inputValue:"13",name:"musculoskeletal",isHeader:!1},{xtype:"textfield",fieldLabel:"Joint",name:"contractures_joint",margin:"0 0 0 20",isHeader:!1,labelWidth:115,width:300},{xtype:"textfield",fieldLabel:"Location",name:"contractures_location",margin:"3 0 0 20",isHeader:!1,labelWidth:115,width:300}]},{xtype:"fieldcontainer",margin:5,layout:"vbox",items:[{xtype:"checkboxfield",name:"musculoskeletal",boxLabel:"Other(specify)",inputValue:"15",width:120},{xtype:"textareafield",name:"musculoskeletal_other",margin:"0 0 0 15",labelWidth:50,cols:39}]}]},{xtype:"panel",border:!1,header:!1,flex:1,items:[{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",margin:"0 0 0 5",width:130,boxLabel:"Poor conditioning",inputValue:"4",name:"musculoskeletal",isHeader:!1},{xtype:"checkboxfield",width:120,margin:"0 0 0 3",boxLabel:"Shuffling",inputValue:"5",name:"musculoskeletal",isHeader:!1},{xtype:"checkboxfield",width:120,margin:"0 0 0 5",boxLabel:"Wide-based gait",inputValue:"6",name:"musculoskeletal",isHeader:!1}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",boxLabel:"Swollen, painful joints(specify)",inputValue:"8",margin:"0 0 5 5",width:200,name:"musculoskeletal",isHeader:!1},{xtype:"textfield",name:"swollon_painful_joints",margin:"0 0 5 5",isHeader:!1,width:180},{xtype:"checkboxfield",width:200,margin:"0 0 5 5",boxLabel:"Decreased ROM",inputValue:"10",name:"musculoskeletal",isHeader:!1},{xtype:"textfield",name:"decreased_rom",margin:"0 0 5 5",width:180},{xtype:"checkboxfield",width:200,margin:"0 0 0 5",boxLabel:"Weakness",inputValue:"12",name:"musculoskeletal",isHeader:!1},{xtype:"textfield",name:"weakness",margin:"0 0 5 5",width:180}]},{xtype:"fieldcontainer",layout:"vbox",margin:"5px",items:[{xtype:"checkboxfield",xmargin:"3px",boxLabel:"Amputation",inputValue:"14",name:"musculoskeletal",isHeader:!1},{xtype:"fieldcontainer",margin:"0 0 0 20",layout:"hbox",items:[{xtype:"checkboxfield",name:"amputation",boxLabel:"BK",inputValue:"BK",width:60},{xtype:"checkboxfield",name:"amputation",boxLabel:"AK",inputValue:"AK",width:60},{xtype:"checkboxfield",name:"amputation",boxLabel:"UE",inputValue:"UE",width:60}]},{xtype:"fieldcontainer",margin:"0 0 0 20",layout:"hbox",items:[{xtype:"checkboxfield",name:"amputation",boxLabel:"Right",inputValue:"Right",width:60},{xtype:"checkboxfield",name:"amputation",boxLabel:"Left",inputValue:"Left",width:60}]},{xtype:"textareafield",fieldLabel:"(specify)",margin:"0 0 0 20",name:"amputation_specify",labelWidth:50,labelAlign:"top",cols:47}]}]}]}],afterRender:function(){this.callParent();var e=this.query("[boxLabel=<b>No Problem</b>]")[0];e.on("change",function(t){var n=this.query("textfield, textareafield, datefield, numberfield, checkboxgroup, radiogroup, checkboxfield, radiofield");Ext.each(n,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)}}),Ext.define("Ext.panel.MedicationsM2000M2030",{extend:"Ext.panel.Panel",alias:"widget.medicationsM2000M2030",border:0,height:1300,items:[{xtype:"panel",layout:{align:"stretch",type:"hbox"},items:[{xtype:"panel",flex:1.55,border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiogroup",height:180,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2000) Drug Regimen Review: Does a complete drug regimen review indicate potential clinically significant medication issues (for example, adverse drug reactions, ineffective drug therapy, significant side effects, drug interactions, duplicate therapy, omissions, dosage errors, or noncompliance [non-adherence])?",labelAlign:"top",items:[{xtype:"radiofield",name:"m2000_drug_rgmn_rvw",boxLabel:"0 - Not assessed/reviewed",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2010]</text>'},{xtype:"radiofield",name:"m2000_drug_rgmn_rvw",boxLabel:"1 - No problems found during review",inputValue:"01",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2010]</text>'},{xtype:"radiofield",name:"m2000_drug_rgmn_rvw",boxLabel:"2 - Problems found during review",inputValue:"02"},{xtype:"radiofield",name:"m2000_drug_rgmn_rvw",boxLabel:"NA - Patient is not taking any medications",inputValue:"NA",afterBoxLabelTpl:' <text class="oasis_yellow"> [Go to M2040]</text>'}]},{xtype:"radiogroup",height:110,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2002) Medication Follow-up: Was a physician or the physician-designee contacted within one calendar day to resolve clinically significant medication issues, including reconciliation?",cls:"oasis_blue",itemId:"med_follow_up",width:"98%",margin:"0 5 5 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m2002_mdctn_flwp",boxLabel:"0 - No",inputValue:"0"},{xtype:"radiofield",name:"m2002_mdctn_flwp",boxLabel:"1 - Yes",inputValue:"1"}]},{xtype:"radiogroup",height:170,width:470,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2010) Patient/Caregiver High Risk Drug Education: Has the patient/caregiver received instruction on special precautions for all high-risk medications (such as hypoglycemics, anticoagulants, etc.) and how and when to report problems that may occur?",cls:"oasis_blue",itemId:"drug_edu",width:"98%",margin:"0 5 0 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m2010_high_risk_drug_edctn",boxLabel:"0 - No",inputValue:"00"},{xtype:"radiofield",name:"m2010_high_risk_drug_edctn",boxLabel:"1 - Yes",inputValue:"01"},{xtype:"radiofield",name:"m2010_high_risk_drug_edctn",boxLabel:"NA - Patient not taking any high risk drugs OR patient/caregiver fully knowledgeable about special precautions associated with all high-risk medications",inputValue:"NA"}]}]},{xtype:"panel",flex:1.6,border:0,height:586,layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiogroup",height:241,width:580,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2020) Management of Oral Medications: Patient's current ability to prepare and take all oral medications reliably and safely, including administration of the correct dosage at the appropriate times/intervals. Excludes injectable and IV medications. (NOTE: This refers to ability, not compliance or willingness.)",cls:"oasis_blue",itemId:"mgmt_orl_med",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",flex:.1,name:"m2020_crnt_mgmt_oral_mdctn",boxLabel:"0 - Able to independently take the correct oral medication(s) and proper dosage(s) at the correct times.",inputValue:"00"},{xtype:"radiofield",flex:.1,name:"m2020_crnt_mgmt_oral_mdctn",boxLabel:"1 - Able to take medication(s) at the correct times if: (a) individual dosages are prepared in advance by another person; OR (b) another person develops a drug diary or chart.",inputValue:"01"},{xtype:"radiofield",flex:.1,name:"m2020_crnt_mgmt_oral_mdctn",boxLabel:"2 - Able to take medication(s) at the correct times if given reminders by another person at the appropriate times",inputValue:"02"},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",boxLabel:"3 - Unable to take medication unless administered by another person. ",inputValue:"03"},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",boxLabel:"NA - No oral medications prescribed.",inputValue:"NA"}]},{xtype:"radiogroup",width:558,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2030) Management of Injectable Medications: Patient's current ability to prepare and take all prescribed injectable medications reliably and safely, including administration of correct dosage at the appropriate times/intervals. Excludes IV medications.",cls:"oasis_green",itemId:"inj_medications",labelAlign:"top",items:[{xtype:"radiofield",height:30,name:"m2030_crnt_mgmt_injctn_mdctn",boxLabel:"0 - Able to independently take the correct medication(s) and proper dosage(s) at the correct times.",inputValue:"00"},{xtype:"radiofield",height:45,name:"m2030_crnt_mgmt_injctn_mdctn",boxLabel:"1 - Able to take injectable medication(s) at the correct times if:    (a) individual syringes are prepared in advance by another person; OR (b) another person develops a drug diary or chart."
,inputValue:"01"},{xtype:"radiofield",height:50,name:"m2030_crnt_mgmt_injctn_mdctn",boxLabel:"2 - Able to take medication(s) at the correct times if given reminders by another person based on the frequency of the injection",inputValue:"02"},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",boxLabel:"3 - Unable to take injectable medication unless administered by another person. ",inputValue:"03"},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",boxLabel:"NA - No injectable medications prescribed.",inputValue:"NA"}]}]}]}],onValidate:function(e){var t=new Array;m2000Value=e.down("[name=m2000_drug_rgmn_rvw]").getGroupValue(),m2002Value=e.down("[name=m2002_mdctn_flwp]").getGroupValue(),m2010Value=e.down("[name=m2010_high_risk_drug_edctn]").getGroupValue(),m2020Value=e.down("[name=m2020_crnt_mgmt_oral_mdctn]").getGroupValue(),m2030Value=e.down("[name=m2030_crnt_mgmt_injctn_mdctn]").getGroupValue(),m2000Value==null&&t.push(["M2000","Choose the option whether Drug Regimen Review accomplished."]);if(m2000Value=="00"||m2000Value=="01")m2010Value==null&&t.push(["M2010","Patient/Caregiver High Risk Drug Education can't be blank."]),m2020Value==null&&t.push(["M2020","Management of Oral Medications can't be blank."]),m2030Value==null&&t.push(["M2030","Management of Injectable Medications can't be blank."]);return m2000Value=="02"&&(m2002Value==null&&t.push(["M2002","Medication Follow-up can't be blank."]),m2010Value==null&&t.push(["M2010","Patient/Caregiver High Risk Drug Education can't be blank."]),m2020Value==null&&t.push(["M2020","Management of Oral Medications can't be blank."]),m2030Value==null&&t.push(["M2030","Management of Injectable Medications can't be blank."])),t},m2000ToM2030FieldsEventHandling:function(e){this.query("[name=m2000_drug_rgmn_rvw]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="NA"?(e[1].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)}),e[2].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)}),e[3].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)}),e[4].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})):t.getGroupValue()=="00"||t.getGroupValue()=="01"?(e[1].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)}),e[2].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}),e[3].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}),e[4].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})):(e[1].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}),e[2].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}),e[3].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}),e[4].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)}))},this)},this)},initComponent:function(){this.callParent(),radio_group_array=this.query("[xtype=radiogroup]"),this.m2000ToM2030FieldsEventHandling(radio_group_array)}}),Ext.define("Ext.panel.MedicationsPocMedicationalStatus",{extend:"Ext.panel.Panel",alias:"widget.medicationsPocMedicationalStatus",border:0,layout:{type:"vbox"},items:[{xtype:"radiogroup",margin:"5px",layout:{align:"stretch",type:"hbox"},labelWidth:300,width:700,height:30,items:[{xtype:"radiofield",name:"medication_status",boxLabel:"Medication regimen completed",inputValue:"1",margin:"3px"},{xtype:"radiofield",name:"medication_status",boxLabel:"Medication regimen reviewed ",inputValue:"2 ",margin:"3px"},{xtype:"radiofield",name:"medication_status",boxLabel:"No change",inputValue:"3",margin:"3px"},{xtype:"radiofield",name:"medication_status",boxLabel:"Order obtained",inputValue:"4",margin:"3px"}]},{xtype:"checkboxgroup",margin:"7px",columns:3,fieldLabel:"Check if any of the following were identified",labelAlign:"top",defaults:{width:290},height:100,items:[{xtype:"checkboxfield",name:"identification",margin:"0 0 0 20",boxLabel:"Potential adverse effects/drug reactions",inputValue:"1"},{xtype:"checkboxfield",name:"identification",boxLabel:"Ineffective drug therapy",inputValue:"3"},{xtype:"checkboxfield",name:"identification",boxLabel:"Significant side effects",inputValue:"4"},{xtype:"checkboxfield",name:"identification",margin:"0 0 0 20",boxLabel:"Significant drug interactions",inputValue:"5"},{xtype:"checkboxfield",name:"identification",boxLabel:"Duplicate drug therapy",inputValue:"6"},{xtype:"checkboxfield",name:"identification",boxLabel:"Non-compliance with drug therapy",inputValue:"7"}]},{xtype:"fieldset",border:0,layout:{type:"vbox"},margin:"3px",items:[{xtype:"radiogroup",margin:"2px",layout:{align:"stretch",type:"hbox"},labelWidth:300,width:600,height:20,fieldLabel:"Financial ability to pay for medications",xlabelAlign:"top",items:[{xtype:"radiofield",name:"medication_financial_ability",boxLabel:"Yes",inputValue:"Y",width:100},{xtype:"radiofield",name:"medication_financial_ability",boxLabel:"No ",inputValue:"N",width:100}]},{xtype:"radiogroup",margin:"2px",layout:{align:"stretch",type:"hbox"},labelWidth:300,width:900,height:50,fieldLabel:"If no, was MSW referral made?",xlabelAlign:"top",items:[{xtype:"radiofield",name:"msw_referral",boxLabel:"Yes",inputValue:"Y",width:100},{xtype:"radiofield",name:"msw_referral",boxLabel:"No ",inputValue:"N",width:100},{xtype:"textareafield",name:"msw_referral_comment",isHeader:!1,fieldLabel:"Comment",labelWidth:80,height:70,cols:30}]}]}]}),Ext.define("Ext.panel.MedicationsPocIvSupplies",{extend:"Ext.panel.Panel",alias:"widget.medicationsPocIvSupplies",border:0,layout:{type:"vbox"},items:[{xtype:"checkboxgroup",columns:5,defaults:{width:160,margin:"3px"},items:[{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"IV start kit",inputValue:"1"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"IV pole",inputValue:"2"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"IV tubing",inputValue:"3"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Alcohol swabs",inputValue:"4"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Tape",inputValue:"5"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Injection caps",inputValue:"6"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Central line dressing",inputValue:"7"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Angiocatheter size",inputValue:"8"},{xtype:"textfield",name:"angiocatheter_size"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Extension tubings",inputValue:"9"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Batteries size",inputValue:"10"},{xtype:"textfield",name:"batteries_size"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Syringes size",inputValue:"11"},{xtype:"textfield",name:"syringes_size"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Infusion pump",inputValue:"12"},{xtype:"checkboxfield",name:"iv_supplies",boxLabel:"Other",inputValue:"13"},{xtype:"textfield",name:"other_iv_supplies"}]}]}),Ext.define("Ext.panel.MedicationsPocInfusion",{extend:"Ext.panel.Panel",alias:"widget.medicationsPocInfusion",border:0,layout:{type:"vbox"},items:[{xtype:"checkboxfield",name:"infusion",margin:"3px",boxLabel:"<b>N/A</b>",inputValue:"NA",width:80},{xtype:"panel",border:!1,header:!1,layout:"hbox",items:[{xtype:"panel",border:!1,header:!1,layout:"hbox",items:[{xtype:"panel",border:!1,header:!1,layout:"vbox",margin:5,items:[{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"infusion",boxLabel:"Peripheral line",inputValue:"1",width:170},{xtype:"checkboxfield",name:"infusion",boxLabel:"Midline catheter",inputValue:"2",width:170},{xtype:"checkboxfield",name:"infusion",boxLabel:"Central line",inputValue:"3"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"textfield",fieldLabel:"Type/brand",isHeader:!1,name:"infusion_type",labelWidth:165},{xtype:"textfield",fieldLabel:"Size/gauge/length",margin:"0 0 0 5",isHeader:!1,labelWidth:210,labelAlign:"right",name:"infusion_length"}]},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",name:"infusion",boxLabel:"Groshong",inputValue:"4",width:170},{xtype:"checkboxfield",name:"infusion",boxLabel:"Non-Groshong ",inputValue:"5 ",width:170},{xtype:"checkboxfield",name:"infusion",boxLabel:"Tunneled",inputValue:"6",width:150},{xtype:"checkboxfield",name:"infusion",boxLabel:"Non-Tunneled ",inputValue:"7",width:120}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"textfield",isHeader:!1,fieldLabel:"Insertion site",name:"insertion_site",labelWidth:165},{xtype:"datefield",isHeader:!1,fieldLabel:"Insertion date",margin:"0 0 0 5",labelWidth:210,name:"insertion_site_date",labelAlign:"right"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},width:600,height:20,fieldLabel:"Lumens",labelWidth:165,items:[{xtype:"radiofield",name:"lumens",boxLabel:"Single",inputValue:"S",width:170},{xtype:"radiofield",name:"lumens",boxLabel:"Double ",inputValue:"D ",width:150},{xtype:"radiofield",name:"lumens",boxLabel:"Triple ",inputValue:"T "}]},{xtype:"fieldcontainer",margin:"3px",layout:{type:"hbox"},items:[{xtype:"textfield",isHeader:!1,fieldLabel:"Flush solution/frequency",name:"flush_solution_frequency",labelWidth:165},{xtype:"textfield",isHeader:!1,fieldLabel:"Injection cap change frequency",labelWidth:210,labelAlign:"right",name:"injection_frequency"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},width:350,height:20,fieldLabel:"Patient",labelWidth:165,defaults:{width:100},items:[{xtype:"radiofield",name:"patient",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"patient",boxLabel:"No ",inputValue:"N "}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"textfield",name:"dressing_change_frequency",fieldLabel:"Dressing change frequency",labelWidth:168,margin:"0 5 0 0"},{xtype:"checkboxfield",name:"dressing_frequency",boxLabel:"Sterile",inputValue:"1",width:150},{xtype:"checkboxfield",name:"dressing_frequency",boxLabel:"Clean",inputValue:"2",width:80}]},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Performed by",defaults:{width:80},labelWidth:165,items:[{xtype:"radiofield",name:"performed_by",boxLabel:"Self",inputValue:"SF",width:100},{xtype:"radiofield",name:"performed_by",boxLabel:"RN ",inputValue:"RN ",width:70},{xtype:"radiofield",name:"performed_by",boxLabel:"Caregiver",inputValue:"CG",width:150},{xtype:"radiofield",name:"performed_by",boxLabel:"Other ",inputValue:"OTH ",width:62},{xtype:"textfield",name:"other_performed_by",width:161}]},{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",isHeader:!1,fieldLabel:"Site/skin condition",name:"site_skin_condition",labelWidth:168},{xtype:"textfield",isHeader:!1,fieldLabel:"External catheter length",labelWidth:210,labelAlign:"right",name:"external_catheter_length"}]},{xtype:"textareafield",fieldLabel:"Other",isHeader:!1,labelWidth:169,name:"other_infusion",height:30,width:719},{xtype:"checkboxgroup",columns:4,fieldLabel:"Purpose of intravenous access",labelAlign:"top",height:50,items:[{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Antibiotic therapy",margin:"0 0 0 5",inputValue:"1",width:165},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Pain control",inputValue:"2",width:170},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Chemotherapy",inputValue:"4",width:150},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Maintain venous access",width:165,inputValue:"5"}]},{border:!1,header:!1,layout:{type:"table",columns:5},items:[{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Hydration",margin:"0 0 0 10",inputValue:"6",width:165},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Parenteral nutrition",inputValue:"7",width:170},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Lab draws",inputValue:"3",width:150},{xtype:"checkboxfield",name:"purpose_of_intravenous_access",boxLabel:"Other",inputValue:"8",margin:"0 5 0 0"},{xtype:"textfield",name:"purpose_of_intravenous_access_other",inputValue:"Other",labelWidth:60}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"fieldcontainer",margin:"3px",layout:{type:"vbox"},items:[{xtype:"checkboxfield",name:"infusion",boxLabel:"Infusion care provided during visit",inputValue:"11"},{xtype:"textareafield",margin:"0 0 0 20",name:"infusion_care_provided_during_visit",cols:37}]},{xtype:"textareafield",margin:"10 0 0 40",name:"interventions",isHeader:!1,fieldLabel:"Interventions / Instructions /Comments ",labelAlign:"top",cols:47}]}]}]},{border:!1,header:!1,xtype:"panel",items:[{border:!1,header:!1,xtype:"panel",items:[{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"panel",border:0,layout:"vbox",items:[{xtype:"fieldset",margin:"3px",layout:{type:"vbox"},width:500,height:130,title:"PICC Specific",items:[{xtype:"textfield",isHeader:!1,fieldLabel:"Circumference of arm",labelWidth:133,name:"circumference_of_arm",width:263},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},labelWidth:130,fieldLabel:"X-ray verification",items:[{xtype:"radiofield",name:"financial_ability",boxLabel:"Yes",inputValue:"Y",width:60},{xtype:"radiofield",name:"financial_ability",boxLabel:"No ",inputValue:"N ",width:50}]}]},{xtype:"fieldset",margin:"3px",flex:1,layout:{type:"vbox"},width:500,height:130,title:"IVAD Port Specific",items:[{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},labelWidth:130,fieldLabel:"Reservoir",xlabelAlign:"top",items:[{xtype:"radiofield",name:"reservoir",boxLabel:"Single",inputValue:"S",width:60},{xtype:"radiofield",name:"reservoir",boxLabel:"Double ",inputValue:"D ",width:70}]},{xtype:"textfield",fieldLabel:"Huber gauge/length",isHeader:!1,labelWidth:133,name:"huber_gauge_length",width:263},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},labelWidth:130,fieldLabel:"Accessed",items:[{xtype:"radiofield",name:"accessed",boxLabel:"No",inputValue:"N",width:60},{xtype:"radiofield",name:"accessed",boxLabel:"Yes,",inputValue:"Y,",width:60},{xtype:"datefield",name:"accessed_date",isHeader:!1,fieldLabel:"date ",labelWidth:35,align:"right",width:160}]}]},{xtype:"fieldset",margin:"3px",layout:{type:"vbox"},width:500,title:"Epidural/Intrathecal access",items:[{xtype:"fieldcontainer",layout:"vbox",items:[{xtype:"textfield",name:"epidural_site_skin_condition",isHeader:!1,fieldLabel:"Site/skin condition",labelWidth:250},{xtype:"textfield",name:"infusion_solution",isHeader:!1,fieldLabel:"Infusion solution (type/volume/rate)",labelWidth:250},{xtype:"textfield",name:"dressing",isHeader:!1,fieldLabel:"Dressing",labelWidth:250},{xtype:"textareafield",name:"other_epidural_intrathecal_access",isHeader:!1,fieldLabel:"Other",labelWidth:133,height:50,cols:36}]}]}]},{xtype:"panel",border:0,layout:"vbox",margin:"5px",items:[{xtype:"fieldcontainer",margin:"3 3 3 30",layout:{type:"vbox"},items:[{xtype:"checkboxfield",margin:"3px",boxLabel:"Medication(s) administered:",inputValue:"8",name:"infusion"},{xtype:"textfield",fieldLabel:"(name of drug)",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"name_of_drug"},{xtype:"textfield",fieldLabel:"Dose",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"dose"},{xtype:"textfield",fieldLabel:"Route",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"route"},{xtype:"textfield",fieldLabel:"Frequency",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"frequency"},{xtype:"textfield",isHeader:!1,fieldLabel:"Duration of therapy",margin:"3 0 0 30",labelWidth:150,name:"therapy_duration"}]},{xtype:"fieldcontainer",margin:"3 3 3 30",layout:{type:"vbox"},items:[{xtype:"checkboxfield",margin:"3px",boxLabel:"Medication(s) administered:",inputValue:"9",name:"infusion"},{xtype:"textfield",fieldLabel:"(name of drug)",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"name_of_drug1"},{xtype:"textfield",isHeader:!1,fieldLabel:"Dose",margin:"3 0 0 30",labelWidth:150,name:"dose1"},{xtype:"textfield",fieldLabel:"Route",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"route1"},{xtype:"textfield",fieldLabel:"Frequency",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"frequency1"},{xtype:"textfield",fieldLabel:"Duration of therapy",isHeader:!1,margin:"3 0 0 30",labelWidth:150,name:"therapy_duration1"}]},{xtype:"fieldcontainer",margin:"3px",layout:{type:"hbox"},items:[{xtype:"checkboxfield",margin:"3 3 3 30",boxLabel:"Pump:",inputValue:"10",name:"infusion"},{xtype:"textfield",fieldLabel:"(type, specify)",isHeader:!1,margin:"3 0 0 27",labelWidth:90,name:"pump_type"}]},{xtype:"radiogroup",margin:"0 0 0 40",layout:{align:"stretch",type:"hbox"},width:440,height:50,fieldLabel:"Administered by",labelAlign:"top",defaults:{width:50},items:[{xtype:"radiofield",name:"administered_by",margin:"0 0 0 5",boxLabel:"Self",inputValue:"SF",width:50},{xtype:"radiofield",name:"administered_by",boxLabel:"RN ",inputValue:"RN",width:40},{xtype:"radiofield",name:"administered_by",boxLabel:"Caregiver",inputValue:"CG",width:80},{xtype:"radiofield",name:"administered_by",boxLabel:"Other ",inputValue:"OTH",width:55},{xtype:"textfield",name:"administered_by_other",width:105}]}]}]}]}]}]}]}),Ext.define("Ext.panel.MedicationsPocAllergies",{extend:"Ext.panel.Panel",alias:"widget.medicationsPocAllergies",border:0,layout:{type:"vbox"},items:[{xtype:"checkboxgroup",margin:"5px",columns:5,defaults:{width:120},items:[{xtype:"checkboxfield",name:"allergies",boxLabel:"None Known",inputValue:"1"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Aspirin",inputValue:"2"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Penicillin",inputValue:"3"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Sulfa",inputValue:"4"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Pollen",inputValue:"5"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Eggs",inputValue:"6"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Milk products",inputValue:"7"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Insect bites",inputValue:"8"},{xtype:"checkboxfield",name:"allergies",boxLabel:"Other",inputValue:"9"},{xtype:"textfield",name:"other_allergies"}]}]}),Ext.define("Ext.panel.Medications2M2040",{extend:"Ext.panel.Panel",alias:"widget.medications2M2040",border:0,items:[{xtype:"label",margin:5,html:"(M2040) Prior Medication Management: Indicate the patient's usual ability with managing oral and injectable medications prior to this current illness, exacerbation, or injury. Check only <b><u>one</u></b> box in each row."},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1},columns:5},defaults:{bodyStyle:"padding: 5px"},items:[{html:"Functional Area",style:"text-align:center;font-weight:bold;",height:36,border:!1},{html:"Independent",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"Needed Some Help",style:"text-align:center;font-weight:bold;",width:110,height:40,border:!1},{html:"Dependent",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"Not Applicable",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"a. Oral medications",border:!1},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"},{html:"b. Injectable medications",border:!1},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"}]}],onValidate:function(e){var t=new Array,n=!1,r=!1,i=e.query("radiofield[name=m2040_prior_mgmt_oral_mdctn]"),s=e.query("radiofield[name=m2040_prior_mgmt_injctn_mdctn]");return Ext.each(i,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M2040","Select the patient's ability to intake Oral Medications."]),Ext.each(s,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M2040","Select the patient's ability to intake Injectable Medications."]),t}}),Ext.define("Ext.panel.Medications2M2040C1",{extend:"Ext.panel.Panel",alias:"widget.medications2M2040C1",border:0,items:[{xtype:"label",margin:5,html:"(M2040) Prior Medication Management: Indicate the patient's usual ability with managing oral and injectable medications prior to his/her most recent illness, exacerbation, or injury. Check only <b><u>one</u></b> box in each row."},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1},columns:5},defaults:{bodyStyle:"padding: 5px"},items:[{html:"Functional Area",style:"text-align:center;font-weight:bold;",height:36,border:!1},{html:"Independent",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"Needed Some Help",style:"text-align:center;font-weight:bold;",width:110,height:40,border:!1},{html:"Dependent",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"Not Applicable",style:"text-align:center;font-weight:bold;",width:110,height:36,border:!1},{html:"a. Oral medications",border:!1},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_oral_mdctn",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 45px"},{html:"b. Injectable medications",border:!1},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m2040_prior_mgmt_injctn_mdctn",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 45px"}]}],onValidate:function(e){var t=new Array,n=!1,r=!1,i=e.query("radiofield[name=m2040_prior_mgmt_oral_mdctn]"),s=e.query("radiofield[name=m2040_prior_mgmt_injctn_mdctn]");return Ext.each(i,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M2040","Select the patient's ability to intake Oral Medications."]),Ext.each(s,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M2040","Select the patient's ability to intake Injectable Medications."]),t}}),Ext.define("Ext.panel.TypesSourcesOfAssistancem2100",{extend:"Ext.panel.Panel",alias:"widget.typesSourcesOfAssistancem2100",border:0,items:[{xtype:"label",margin:5,html:"(M2100) Types and Sources of Assistance: Determine the level of caregiver ability and willingness to provide assistance for the following activities, if assistance is needed. (Check only <u>one</u> box in each row.)"},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1},columns:7},defaults:{bodyStyle:"padding: 5px"},items:[{xtype:"label",text:"Type of Assistance",height:100,width:420,style:"vertical-align:middle;margin-left:150px;margin-right:auto"},{html:"No assistance needed in this area",height:100,width:100,style:"text-align:center;",border:!1},{html:"Caregiver(s) currently provides assistance",height:100,width:100,style:"text-align:center;",border:!1},{html:"Caregiver(s) need training/ supportive services to provide assistance",height:100,width:100,style:"text-align:center;",border:!1},{html:"Caregiver(s) <u>not likely</u> to provide assistance",height:100,width:100,style:"text-align:center;",border:!1},{html:"Unclear if Caregiver(s) will provide assistance",height:100,width:100,style:"text-align:center;",border:!1},{html:"Assistance needed, but no Caregiver(s) available",height:100,width:100,style:"text-align:center;",border:!1},{html:"a. <b>ADL assistance</b> (e.g.,  transfer/ ambulation,  bathing, dressing,  toileting,  eating/feeding)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_adl",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"b. <b>IADL assistance</b> (e.g.,  meals, housekeeping,  laundry, telephone,  shopping, finances)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_iadl",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"c. <b>Medication  administration</b> (e.g.,  oral, inhaled or  injectable)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_mdctn",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"d. <b>Medical procedures/  treatments</b> (e.g.,  changing wound  dressing)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_prcdr",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"e. <b>Management of  Equipment</b> (includes  oxygen, IV/infusion  equipment, enteral/parenteral nutrition,  ventilator therapy  equipment or supplies)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_equip",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"f. <b>Supervision and safety</b> (e.g., due to  cognitive impairment)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_sprvsn",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"},{html:"g. <b>Advocacy or facilitation</b> of patient's participation in appropriate medical care (includes transportation to or from appointments)",width:420,border:!1},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2100_care_type_src_advcy",inputValue:"05",boxLabel:"5",padding:"0 0 0 30px"}]}],findValueIsSelected:function(e){var t=!1;return Ext.each(e,function(e,n){e.checked==1&&(t=!0)},this),t},onValidate:function(e){var t=new Array;return this.adl_assistance_group=e.query("radiofield[name=m2100_care_type_src_adl]"),this.iadl_assistance_group=e.query("radiofield[name=m2100_care_type_src_iadl]"),this.med_administration_group=e.query("radiofield[name=m2100_care_type_src_mdctn]"),this.med_procedures_group=e.query("radiofield[name=m2100_care_type_src_prcdr]"),this.equip_mgmnt_group=e.query("radiofield[name=m2100_care_type_src_equip]"),this.sprvsn_and_safety_group=e.query("radiofield[name=m2100_care_type_src_sprvsn]"),this.advocacy_group=e.query("radiofield[name=m2100_care_type_src_advcy]"),this.findValueIsSelected(this.adl_assistance_group)==0&&t.push(["M2100","Select the level of Assistance required for ADL."]),this.findValueIsSelected(this.iadl_assistance_group)==0&&t.push(["M2100","Select the level of Assistance required for IADL."]),this.findValueIsSelected(this.med_administration_group)==0&&t.push(["M2100","Select the level of Assistance required for Medical Administration."]),this.findValueIsSelected(this.med_procedures_group)==0&&t.push(["M2100","Select the level of Assistance required for Medical Procedures/treatments."]),this.findValueIsSelected(this.equip_mgmnt_group)==0&&t.push(["M2100","Select the level of Assistance required for Management of Equipment."]),this.findValueIsSelected(this.sprvsn_and_safety_group)==0&&t.push(["M2100","Select the level of Assistance required for Supervision and Safety."]),this.findValueIsSelected(this.advocacy_group)==0&&t.push(["M2100","Select the level of Assistance required for Advocacy or Facilitation."]),t}}),Ext.define("Ext.panel.TypesSourcesOfAssistanceM2102C1",{extend:"Ext.panel.Panel",alias:"widget.typesSourcesOfAssistanceM2102C1",border:0,margin:"0 5 0 5",items:[{xtype:"label",html:"(M2102) Types and Sources of Assistance: Determine the ability and willingness of non-agency caregivers (such as family members , friends , or privately paid caregivers) to provide assistance for the following activities, if assistance is needed. EXCLUDES all care by your agency staff.(Check only <u>one</u> box in each row.)"},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1},columns:6},defaults:{bodyStyle:"padding: 5px"},items:[{xtype:"label",text:"Type of Assistance",height:150,width:420,style:"vertical-align:middle;margin-left:150px;margin-right:auto"},{html:"No assistance needed - patient is independent or does not have needs in this area",height:150,width:150,style:"text-align:center;",border:!1},{html:"Non-agency caregiver(s) currently provides assistance",height:150,width:150,style:"text-align:center;",border:!1},{html:"Non-agency caregiver(s) need training/ supportive services to provide assistance",height:150,width:150,style:"text-align:center;",border:!1},{html:"Non-agency caregivers(s) are not likely to provide assistance OR it is UNCLEAR if they will provide assistance",height:150,width:150,style:"text-align:center;",border:!1},{html:"Assistance needed, but no non-agency caregiver(s) available",height:150,width:150,style:"text-align:center;",border:!1},{html:"a. <b>ADL assistance</b> (for example:  transfer/ ambulation,  bathing, dressing,  toileting,  eating/feeding)"
,width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_adl",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_adl",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_adl",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_adl",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_adl",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"b. <b>IADL assistance</b> (for example:  meals, housekeeping,  laundry, telephone,  shopping, finances)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_iadl",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_iadl",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_iadl",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_iadl",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_iadl",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"c. <b>Medication  administration</b> (for example:  oral, inhaled or  injectable)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_mdctn",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_mdctn",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_mdctn",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_mdctn",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_mdctn",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"d. <b>Medical procedures/  treatments</b> (for example:  changing wound  dressing, home exercise program)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_prcdr",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_prcdr",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_prcdr",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_prcdr",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_prcdr",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"e. <b>Management of  Equipment</b> (for example, oxygen,IV/infusion equipment, enteral/ parenteral nutrition, ventilator therapy equipment or supplies)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_equip",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_equip",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_equip",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_equip",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_equip",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"f. <b>Supervision and safety</b> (for example: due to  cognitive impairment)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_sprvsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_sprvsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_sprvsn",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_sprvsn",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_sprvsn",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"},{html:"g. <b>Advocacy or facilitation</b> of patient's participation in appropriate medical care (for example,transportation to or from appointments)",width:420,border:!1},{xtype:"radiofield",name:"m2102_care_type_src_advcy",inputValue:"00",boxLabel:"0",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_advcy",inputValue:"01",boxLabel:"1",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_advcy",inputValue:"02",boxLabel:"2",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_advcy",inputValue:"03",boxLabel:"3",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m2102_care_type_src_advcy",inputValue:"04",boxLabel:"4",padding:"0 0 0 30px"}]}],findValueIsSelected:function(e){var t=!1;return Ext.each(e,function(e,n){e.checked==1&&(t=!0)},this),t},onValidate:function(e){var t=new Array;return this.adl_assistance_group=e.query("radiofield[name=m2102_care_type_src_adl]"),this.iadl_assistance_group=e.query("radiofield[name=m2102_care_type_src_iadl]"),this.med_administration_group=e.query("radiofield[name=m2102_care_type_src_mdctn]"),this.med_procedures_group=e.query("radiofield[name=m2102_care_type_src_prcdr]"),this.equip_mgmnt_group=e.query("radiofield[name=m2102_care_type_src_equip]"),this.sprvsn_and_safety_group=e.query("radiofield[name=m2102_care_type_src_sprvsn]"),this.advocacy_group=e.query("radiofield[name=m2102_care_type_src_advcy]"),this.findValueIsSelected(this.adl_assistance_group)==0&&t.push(["m2102","Select the level of Assistance required for ADL."]),this.findValueIsSelected(this.iadl_assistance_group)==0&&t.push(["m2102","Select the level of Assistance required for IADL."]),this.findValueIsSelected(this.med_administration_group)==0&&t.push(["m2102","Select the level of Assistance required for Medical Administration."]),this.findValueIsSelected(this.med_procedures_group)==0&&t.push(["m2102","Select the level of Assistance required for Medical Procedures/treatments."]),this.findValueIsSelected(this.equip_mgmnt_group)==0&&t.push(["m2102","Select the level of Assistance required for Management of Equipment."]),this.findValueIsSelected(this.sprvsn_and_safety_group)==0&&t.push(["m2102","Select the level of Assistance required for Supervision and Safety."]),this.findValueIsSelected(this.advocacy_group)==0&&t.push(["m2102","Select the level of Assistance required for Advocacy or Facilitation."]),t}}),Ext.define("Ext.panel.TypesSourcesOfAssistance",{extend:"Ext.panel.Panel",alias:"widget.typesSourcesOfAssistance",layout:{type:"table",columns:1,tableAttrs:{style:{width:"98%",height:"100%"}}},items:[{xtype:"fieldset",margin:"3px",height:"100%",layout:{type:"hbox",align:"stretch"},title:"APPLIANCES / SPECIAL EQUIPMENT/ORGANIZATIONS",items:[{xtype:"panel",border:0,flex:1,layout:{type:"vbox"},margin:"3px",items:[{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Brace/orthotics(specify)",inputValue:"1",width:200},{xtype:"textareafield",name:"brace_orthotics",cols:57,height:70,margin:"0 0 0 24"},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Transfer equipment:",inputValue:"2"},{xtype:"radiogroup",margin:"0 0 0 20",layout:{align:"stretch",type:"hbox"},labelWidth:50,items:[{xtype:"radiofield",name:"transfer_equipment",boxLabel:"Board",inputValue:"1",width:115},{xtype:"radiofield",name:"transfer_equipment",boxLabel:"Lift",inputValue:"2",width:75},{xtype:"radiofield",name:"transfer_equipment",boxLabel:"Bedside Commode",inputValue:"3",width:160}]},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Prosthesis",inputValue:"3",width:100},{xtype:"checkboxgroup",columns:3,height:60,margin:"0 0 0 20",items:[{xtype:"checkboxfield",name:"prosthesis",boxLabel:"RUE",inputValue:"RUE",width:115},{xtype:"checkboxfield",name:"prosthesis",boxLabel:"RLE",inputValue:"RLE",width:75},{xtype:"checkboxfield",name:"prosthesis",boxLabel:"LUE",inputValue:"LUE",width:160},{xtype:"checkboxfield",name:"prosthesis",boxLabel:"LLE",inputValue:"LLE",width:115},{xtype:"checkboxfield",name:"prosthesis",boxLabel:"Other",inputValue:"Other",width:75},{xtype:"textfield",name:"prosthesis_other",width:240}]},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Grab bars",inputValue:"4",width:80},{xtype:"checkboxgroup",columns:3,height:40,margin:"0 0 0 20",items:[{xtype:"checkboxfield",name:"grab_bars",boxLabel:"Bathroom",inputValue:"1",width:115},{xtype:"checkboxfield",name:"grab_bars",boxLabel:"Other",inputValue:"2",width:75},{xtype:"textfield",name:"grab_bars_other",width:240}]},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Hospital bed",inputValue:"5",width:100},{xtype:"checkboxgroup",layout:"hbox",height:40,margin:"0 0 0 20",items:[{xtype:"checkboxfield",name:"hospital_bed",boxLabel:"Semi-electric",inputValue:"1",width:115},{xtype:"checkboxfield",name:"hospital_bed",boxLabel:"Crank",inputValue:"2",width:75},{xtype:"checkboxfield",name:"hospital_bed",boxLabel:"Special",inputValue:"3",width:75},{xtype:"textfield",name:"hospital_bed_text"}]},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Medical Alert",inputValue:"6"},{xtype:"textareafield",name:"medical_alert",margin:"0 0 0 20",cols:40,height:70}]},{xtype:"panel",border:0,flex:1,layout:{type:"vbox"},margin:"3px",items:[{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Needs (specify)",inputValue:"9"},{xtype:"textareafield",name:"needs",margin:"0 0 0 20",cols:41,height:70},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Oxygen",inputValue:"7",width:100},{xtype:"textfield",name:"oxygen_hme_co",margin:"3 0 0 20",fieldLabel:"HME Co",isHeader:!1},{xtype:"textfield",name:"oxygen_hme_rep",margin:"3 0 0 20",fieldLabel:"HME Rep",isHeader:!1},{xtype:"textfield",name:"oxygen_phone",margin:"3 0 0 20",fieldLabel:"Phone",isHeader:!1},{xtype:"checkboxfield",name:"source_of_assistance",boxLabel:"Organizations providing equipment",inputValue:"8"},{xtype:"textareafield",name:"organizations_providing_equipment",margin:"0 0 0 20",cols:41,height:70}]}]}]}),Ext.define("Ext.panel.AdliadlAssistanceM2110",{extend:"Ext.panel.Panel",alias:"widget.adliadlAssistanceM2110",border:0,items:[{xtype:"radiogroup",fieldLabel:"(M2110) How Often does the patient receive ADL or IADL assistance from any caregiver(s) (other than home health agency staff)?",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"01",margin:5,boxLabel:"1 - At least daily"},{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"02",margin:5,boxLabel:"2 - Three or more times per week"},{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"03",margin:5,boxLabel:"3 - One to two times per week"},{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"04",margin:5,boxLabel:"4 - Received, but less often than weekly"},{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"05",margin:5,boxLabel:"5 - No assistance received"},{xtype:"radiofield",name:"m2110_adl_iadl_astnc_freq",inputValue:"UK",margin:5,boxLabel:"UK - Unknown"}]}],onValidate:function(e){var t=new Array,n=e.down("#adl_iadl_assistance_m2110").query("[xtype=radiogroup]"),r=e.down("[name=m0100_assmt_reason]"),i=n[0].down("[name = m2110_adl_iadl_astnc_freq]").getGroupValue();return i==null&&t.push(["M2110","Select the level of Assistance receives by patient for ADL and IADL from any caregiver(s)."]),r&&r.value=="09"&&i=="UK"&&t.push(["M2110","For this Assessment level of Assistance receives by patient for ADL and IADL from any caregiver(s) can't be UK."]),t}}),Ext.define("Ext.panel.TherapyNeedm2200",{extend:"Ext.panel.Panel",alias:"widget.therapyNeedm2200",border:0,items:[{xtype:"panel",border:0,height:200,items:[{xtype:"textfield",fieldLabel:"(M2200) Therapy Need: In the home health plan of care for the Medicare payment episode for which this assessment will define a case mix group, what is the indicated need for therapy visits (total of reasonable and necessary physical, occupational, and speech-language pathology visits combined)? (Enter zero [ '000' ] if no therapy visits indicated.)",cls:"oasis_green",itemId:"therapy_need",afterLabelTpl:"<br> (__ __ __) Number of therapy visits indicated (total of physical, occupational and speech-language pathology combined)",name:"m2200_ther_need_nbr",labelAlign:"top",margin:"0 0 0 5px",width:"46%"},{xtype:"checkbox",fieldLabel:" ",labelSeparator:" ",cls:"oasis_green",labelAlign:"top",margin:"0 0 0 5px",inputValue:"1",name:"m2200_ther_need_na",boxLabel:"NA - Not Applicable: No case mix group defined by this assessment",width:"46%"}]}],onValidate:function(e){var t=new Array,n=e.down("[name=m2200_ther_need_nbr]").value,r=e.down("[name=m2200_ther_need_na]").value;return(n==undefined||n.trim()=="")&&r==0&&t.push(["M2200","Enter Therapy Need visit count or select 'NOT Applicable'."]),n.trim()!=""&&/^-?[\d.]+(?:e-?\d+)?$/.test(n)==0&&t.push(["M2200","Therapy Need should be a number."]),t},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],num=this.super_main.down("[name=m2200_ther_need_nbr]"),na=this.super_main.down("[name=m2200_ther_need_na]"),num.on("change",function(){num.value.trim()!=""&&na.value&&na.setValue(!1)},this),na.on("change",function(){na.value&&na.initialTrue!="1"&&Ext.MessageBox.confirm("Confirmation","Beware the HIPPS Code cannot be generated, since 'Not Applicable' is selected.",function(e){e=="yes"?num.setValue():na.setValue(!1)},this),na.initialTrue=!1},this)}}),Ext.define("Ext.panel.PlanOfCareM2250",{extend:"Ext.panel.Panel",alias:"widget.PlanOfCareM2250",border:0,items:[{xtype:"label",html:"(M2250) Plan of Care Synopsis: (Check only <u>one</u> box in each row.)  Does the physician-ordered plan of care include the following:",cls:"oasis_blue",itemId:"poc_synopsis",margin:"10 5"},{xtype:"panel",border:!1,margin:"10 5 5 30",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:5},defaults:{bodyStyle:"padding:2px;background-color:#CCE6FF;"},items:[{html:"Plan / Intervention",width:400,style:"text-align:center;font-weight:bold;",border:!1},{html:"No",width:60,style:"text-align:center;font-weight:bold;",border:!1},{html:"Yes",width:60,style:"text-align:center;font-weight:bold;",border:!1},{xtype:"label",text:"Not Applicable",width:440,colspan:"2",padding:"0 0 0 5px",border:!1},{html:"<b>a.</b> Patient-specific parameters for notifying physician of changes in vital signs or other clinical findings",width:460,height:57,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"NA",boxLabel:"na",width:60,padding:"0 0 0 10px"},{html:"Physician has chosen not to establish patient-specific parameters for this patient. Agency will use standardized clinical guidelines accessible for all care providers to reference",width:400,height:57,border:!1},{html:"<b>b.</b> Diabetic foot care including monitoring for the presence of skin lesions on the lower extremities and patient/caregiver education on proper foot care",width:460,height:40,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"NA",boxLabel:"na",padding:"0 0 0 10px"},{html:"Patient is not diabetic or is bilateral amputee",width:400,height:40,border:!1},{html:"<b>c.</b> Falls prevention interventions",width:460,height:23,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"NA",boxLabel:"na",width:60,padding:"0 0 0 10px"},{html:"Patient is not assessed to be at risk for falls",width:400,height:23,border:!1},{html:"<b>d.</b> Depression intervention(s) such as medication, referral for other treatment, or a monitoring plan for current treatment",width:460,height:40,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"NA",boxLabel:"na",width:60,padding:"0 0 0 10px"},{html:"Patient has no diagnosis or symptoms of depression",width:400,height:40,border:!1},{html:"<b>e.</b> Intervention(s) to monitor and mitigate pain",width:460,height:23,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"NA",boxLabel:"na",width:60,padding:"0 0 0 10px"},{html:"No pain identified",width:400,height:23,border:!1},{html:"<b>f.</b> Intervention(s) to prevent pressure ulcers",width:460,height:23,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"NA",boxLabel:"na",padding:"0 0 0 10px"},{html:"Patient is not assessed to be at risk for pressure ulcers",width:400,height:23,border:!1},{html:"<b>g.</b> Pressure ulcer treatment based on principles of moist wound healing OR order for treatment based on moist wound healing has been requested from physician",width:460,height:60,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"NA",boxLabel:"na",padding:"0 0 0 10px"},{html:"Patient has no pressure ulcers with need for moist wound healing",width:400,height:60,border:!1}]}],onValidate:function(e){var t=new Array;return m2250PlanSmryPtntSpecf=e.down("radiofield[name=m2250_plan_smry_ptnt_specf]").getGroupValue(),m2250PlanSmryDbtsFtCare=e.down("radiofield[name=m2250_plan_smry_dbts_ft_care]").getGroupValue(),m2250PlanSmryFallPrvnt=e.down("radiofield[name=m2250_plan_smry_fall_prvnt]").getGroupValue(),m2250PlanSmryDprsnIntrvtn=e.down("radiofield[name=m2250_plan_smry_dprsn_intrvtn]").getGroupValue(),m2250PlanSmryPrsulcPainIntrvtn=e.down("radiofield[name=m2250_plan_smry_pain_intrvtn]").getGroupValue(),m2250PlanSmryPrsulcPrvnt=e.down("radiofield[name=m2250_plan_smry_prsulc_prvnt]").getGroupValue(),m2250PlanSmryPrsulcTrtmt=e.down("radiofield[name=m2250_plan_smry_prsulc_trtmt]").getGroupValue(),m2250PlanSmryPtntSpecf==null&&t.push(["M2250","Choose (Yes/No/NA) for Patient-specific parameters in order to notify the physician on changes in vital signs."]),m2250PlanSmryDbtsFtCare==null&&t.push(["M2250","Diabetic Foot care should be Yes/No/NA."]),m2250PlanSmryFallPrvnt==null&&t.push(["M2250","Falls prevention Interventions should be Yes/No/NA."]),m2250PlanSmryDprsnIntrvtn==null&&t.push(["M2250","Depression intervention(s) should be Yes/No/NA."]),m2250PlanSmryPrsulcPainIntrvtn==null&&t.push(["M2250","Intervention(s) to monitor and mitigate Pain should be Yes/No/NA."]),m2250PlanSmryPrsulcPrvnt==null&&t.push(["M2250","Intervention(s) to prevent Pressure Ulcers should be Yes/No/NA."]),m2250PlanSmryPrsulcTrtmt==null&&t.push(["M2250","Pressure Ulcer Treatment should be Yes/No/NA."]),t}}),Ext.define("Ext.panel.PlanOfCareM2250C1",{extend:"Ext.panel.Panel",alias:"widget.planOfCareM2250C1",border:0,items:[{xtype:"label",html:"(M2250) Plan of Care Synopsis: (Check only <u>one</u> box in each row.)  Does the physician-ordered plan of care include the following:",cls:"oasis_blue",cls:"oasis_blue",itemId:"poc_synopsis",margin:"10 5"},{xtype:"panel",border:!1,margin:"10 5 5 30",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:5},defaults:{bodyStyle:"padding:2px;background-color:#CCE6FF;"},items:[{html:"Plan / Intervention",width:400,style:"text-align:center;font-weight:bold;",border:!1},{html:"No",width:60,style:"text-align:center;font-weight:bold;",border:!1},{html:"Yes",width:60,style:"text-align:center;font-weight:bold;",border:!1},{xtype:"label",text:"Not Applicable",width:440,colspan:"2",padding:"0 0 0 5px",border:!1},{html:"<b>a.</b> Patient-specific parameters for notifying physician of changes in vital signs or other clinical findings",width:460,height:57,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_ptnt_specf",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Physician has chosen not to establish patient-specific parameters for this patient. Agency will use standardized clinical guidelines accessible for all care providers to reference",width:400,height:57,border:!1},{html:"<b>b.</b> Diabetic foot care including monitoring for the presence of skin lesions on the lower extremities and patient/caregiver education on proper foot care",width:460,height:40,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dbts_ft_care",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Patient is not diabetic or is missing lower legs due to congenital or acquired condition (bilateral amputee).",width:400,height:40,border:!1},{html:"<b>c.</b> Falls prevention interventions",width:460,height:23,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_fall_prvnt",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Falls risk assessment indicates patient has no risk for falls.",width:400,height:23,border:!1},{html:"<b>d.</b> Depression intervention(s) such as medication, referral for other treatment, or a monitoring plan for current treatment and/or  physician notified that patient screened positive for depression",width:460,height:70,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_dprsn_intrvtn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Patient has no diagnosis of depression AND depression screening indicates patient has: 1) no symptoms of depression; or 2) has some symptoms of depression but does not meet criteria for further evaluation of depression screening tool used.",width:400,height:80,border:!1},{html:"<b>e.</b> Intervention(s) to monitor and mitigate pain",width:460,height:23,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_pain_intrvtn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Pain assessment indicates patient has no pain.",width:400,height:23,border:!1},{html:"<b>f.</b> Intervention(s) to prevent pressure ulcers",width:460,height:45,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_prvnt",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Pressure ulcer risk assessment (clinical or formal) indicates patient is not at risk of developing pressure ulcers.",width:400,height:40,border:!1},{html:"<b>g.</b> Pressure ulcer treatment based on principles of moist wound healing OR order for treatment based on moist wound healing has been requested from physician",width:460,height:60,border:!1},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2250_plan_smry_prsulc_trtmt",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Patient has no pressure ulcers OR has no pressure ulcers for which moist wound healing is indicated.",width:400,height:60,border:!1}]}],onValidate:function(e){var t=new Array;return m2250PlanSmryPtntSpecf=e.down("radiofield[name=m2250_plan_smry_ptnt_specf]").getGroupValue(),m2250PlanSmryDbtsFtCare=e.down("radiofield[name=m2250_plan_smry_dbts_ft_care]").getGroupValue(),m2250PlanSmryFallPrvnt=e.down("radiofield[name=m2250_plan_smry_fall_prvnt]").getGroupValue(),m2250PlanSmryDprsnIntrvtn=e.down("radiofield[name=m2250_plan_smry_dprsn_intrvtn]").getGroupValue(),m2250PlanSmryPrsulcPainIntrvtn=e.down("radiofield[name=m2250_plan_smry_pain_intrvtn]").getGroupValue(),m2250PlanSmryPrsulcPrvnt=e.down("radiofield[name=m2250_plan_smry_prsulc_prvnt]").getGroupValue(),m2250PlanSmryPrsulcTrtmt=e.down("radiofield[name=m2250_plan_smry_prsulc_trtmt]").getGroupValue(),m2250PlanSmryPtntSpecf==null&&t.push(["M2250","Choose (Yes/No/NA) for Patient-specific parameters in order to notify the physician on changes in vital signs."]),m2250PlanSmryDbtsFtCare==null&&t.push(["M2250","Diabetic Foot care should be Yes/No/NA."]),m2250PlanSmryFallPrvnt==null&&t.push(["M2250","Falls prevention Interventions should be Yes/No/NA."]),m2250PlanSmryDprsnIntrvtn==null&&t.push(["M2250","Depression intervention(s) should be Yes/No/NA."]),m2250PlanSmryPrsulcPainIntrvtn==null&&t.push(["M2250","Intervention(s) to monitor and mitigate Pain should be Yes/No/NA."]),m2250PlanSmryPrsulcPrvnt==null&&t.push(["M2250","Intervention(s) to prevent Pressure Ulcers should be Yes/No/NA."]),m2250PlanSmryPrsulcTrtmt==null&&t.push(["M2250","Pressure Ulcer Treatment should be Yes/No/NA."]),t}}),Ext.define("Ext.panel.poc",{extend:"Ext.tab.Panel",alias:"widget.poc",border:0,items:[{autoScroll:!0,title:"Care Coordination And Plan",border:0,layout:{type:"table",columns:1,tableAttrs:{style:{width:"96%",height:"100%"}}},border:0,width:500,margin:5,items:[{xtype:"fieldset",layout:{type:"vbox"},xflex:1,title:"Care Coordination",items:[{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},items:[{xtype:"checkboxfield",name:"care_coordination",boxLabel:"Physician",inputValue:"1",width:80},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"SN",inputValue:"2",width:65},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"PT",inputValue:"3",width:65},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"OT",inputValue:"4",width:65},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"ST",inputValue:"5",width:65},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"MSW",inputValue:"6",width:80},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"CHHA",inputValue:"7",width:70},{xtype:"checkboxfield",name:"care_coordination",boxLabel:"Other(specify)",inputValue:"8",width:120},{xtype:"textfield",name:"other_care_coordination"}]},{xtype:"label",text:"Was a referral made to MSW for assistance with community resources/assistance with a living will /counseling needs (depression /suicidal ideation) and/or unsafe environment?",width:400,margin:"3px"},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},items:[{xtype:"datefield",name:"care_coord_referral_date",fieldLabel:"Date",labelWidth:35},{xtype:"radiofield",name:"referral",boxLabel:"Yes",inputValue:"Y",margin:"0 0 0 7",width:63},{xtype:"radiofield",name:"referral",boxLabel:"No",inputValue:"N",width:65},{xtype:"radiofield",name:"referral",boxLabel:"Refused",inputValue:"R",width:80},{xtype:"radiofield",name:"referral",boxLabel:"N/A",inputValue:"NA",width:72},{xtype:"textfield",name:"referral_comment",fieldLabel:"Comment",labelWidth:114}]},{xtype:"radiogroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Verbal Order obtained",labelAlign:"top",items:[{xtype:"radiofield",name:"verbal_order",boxLabel:"Yes ",inputValue:"Y ",width:50},{xtype:"radiofield",name:"verbal_order",boxLabel:"No",inputValue:"N",margin:"0 0 0 20",width:60},{xtype:"datefield",name:"verbal_order_date",fieldLabel:"specify date",labelWidth:100}]}]},{xtype:"fieldset",title:"Care Plan",items:[{xtype:"checkboxfield",name:"care_plan",boxLabel:"Reviewed with patient involvement",inputValue:"1"}]}]},{autoScroll:!0,border:0,title:"Goals",layout:"vbox",items:[{xtype:"checkboxgroup",margin:"5px",layout:{type:"vbox"},defaults:{margin:"0 0 0 20"},fieldLabel:"DISCHARGE PLANS",labelAlign:"top",items:[{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Return to an independent level of care(self-care)",inputValue:"1"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Able to remain in residence with assistance of primary caregiver/ support from community agencies",inputValue:"2"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"When patient knowledgeable about when to notify physician",inputValue:"3"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Able to understand medication regime and care related to diagnoses",inputValue:"4"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Medical condition stabilizes",inputValue:"5"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"When maximum functional potential reached",inputValue:"6"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Discharge at the end of episode if the patient is hospitalized",inputValue:"7"},{xtype:"checkboxfield",name:"discharge_plans",boxLabel:"Other",inputValue:"8"},{xtype:"textarea",cols:80,name:"other_discharge_plans"}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"radiogroup",fieldLabel:"DISCUSSED WITH PATIENT",margin:"5px",layout:{align:"stretch",type:"hbox"},labelWidth:200,items:[{xtype:"radiofield",name:"goals_discussed_with_patient",boxLabel:"Yes",inputValue:"Y",width:60},{xtype:"radiofield",name:"goals_discussed_with_patient",boxLabel:"No",inputValue:"N",width:60}]},{xtype:"radiogroup",fieldLabel:"REHAB POTENTIAL",margin:"5px",layout:{align:"stretch",type:"hbox"},labelWidth:150,items:[{xtype:"radiofield",name:"rehab_potential",boxLabel:"Poor",inputValue:"P",width:60},{xtype:"radiofield",name:"rehab_potential",boxLabel:"Fair",inputValue:"F",width:60},{xtype:"radiofield",name:"rehab_potential",boxLabel:"Good",inputValue:"G",width:60},{xtype:"radiofield",name:"discussion",boxLabel:"Excellent",inputValue:"E",width:100}]}]}]}]}),Ext.define("Ext.panel.GeneralPatientInformationM0010M0140",{extend:"Ext.panel.Panel",alias:"widget.generalPatientInformationM0010M0140",border:!1,margin:5,layout:"hbox",items:[{xtype:"panel",border:!1,flex:1,items:[{xtype:"panel",layout:{type:"table",columns:2},border:!1,items:[{xtype:"textfield",fieldLabel:"(M0010) CMS Certification Number",name:"m0010_ccn",labelAlign:"top",readOnly:!0},{xtype:"button",text:"",icon:"/assets/icons/refresh.png",margin:"-40 0 0 -7",tooltip:"Refresh Agency Information",name:"refresh_agency_info"}]},{xtype:"textfield",fieldLabel:"(M0014) Branch State",name:"m0014_branch_state",labelAlign:"top",readOnly:!0},{xtype:"textfield",fieldLabel:"(M0016) Branch ID Number",name:"m0016_branch_id",labelAlign:"top",readOnly:!0},{xtype:"textfield",fieldLabel:"(M0018) National Provider Identifier (NPI) for the attending physician who has signed the plan of care",name:"m0018_physician_id",labelAlign:"top",readOnly:!0},{xtype:"checkbox",fieldLabel:"(M0018) National Provider Identifier (NPI) for the attending physician who has signed the plan of care: UK",inputValue:"1",cls:"oasis_heading",name:"m0018_physician_uk",labelAlign:"top",readOnly:!0}]},{xtype:"panel",border:!1,flex:1,items:[{xtype:"textfield",fieldLabel:"(M0020) Patient ID Number",name:"m0020_pat_id",labelAlign:"top",readOnly:!0},{xtype:"datefield",fieldLabel:"(M0030) Start of Care Date",name:"m0030_start_care_dt",labelAlign:"top"},{xtype:"datefield",fieldLabel:"(M0032) Resumption of Care Date",name:"m0032_roc_dt",labelAlign:"top",readOnly:!1},{xtype:"checkbox",fieldLabel:"(M0032) Resumption of Care Date: NA",cls:"oasis_heading",inputValue:"1",name:"m0032_roc_dt_na",labelAlign:"top"}]
},{xtype:"panel",border:!1,flex:3,items:[{xtype:"label",text:"(M0040) Patient Name:"},{xtype:"panel",layout:"hbox",border:!1,items:[{xtype:"textfield",fieldLabel:"First",name:"m0040_pat_fname",labelAlign:"top"},{xtype:"textfield",fieldLabel:"MI",name:"m0040_pat_mi",labelAlign:"top"},{xtype:"textfield",fieldLabel:"Last",name:"m0040_pat_lname",labelAlign:"top"},{xtype:"textfield",fieldLabel:"Suffix",name:"m0040_pat_suffix",labelAlign:"top"}]},{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",flex:.9,border:!1,items:[{xtype:"textfield",fieldLabel:"(M0050) Patient State of Residence",name:"m0050_pat_st",labelAlign:"top"},{xtype:"textfield",fieldLabel:"(M0060) Patient Zip Code",name:"m0060_pat_zip",inputMask:"99999-999999-99",labelAlign:"top",maxLength:11},{xtype:"textfield",fieldLabel:"(M0063) Medicare Number",name:"m0063_medicare_num",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0063) Medicare Number: NA",cls:"oasis_heading",name:"m0063_medicare_na",inputValue:"1",labelAlign:"top"},{xtype:"textfield",fieldLabel:"(M0064) Social Security Number",name:"m0064_ssn",inputMask:"999-99-9999",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0064) Social Security Number: UK",margin:"0 0 20px 0",cls:"oasis_heading",name:"m0064_ssn_uk",inputValue:"1",labelAlign:"top"}]},{xtype:"panel",flex:.9,border:!1,items:[{xtype:"textfield",fieldLabel:"(M0065) Medicaid Number",name:"m0065_medicaid_num",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0065) Medicaid Number: NA",cls:"oasis_heading",name:"m0065_medicaid_na",inputValue:"1",labelAlign:"top"},{xtype:"datefield",fieldLabel:"(M0066) Birth Date",name:"m0066_pat_birth_dt",labelAlign:"top"},{xtype:"combo",fieldLabel:"(M0069) Gender",name:"m0069_pat_gender",labelAlign:"top",store:[[1,"Male"],[2,"Female"]],editable:!1}]},{xtype:"panel",flex:1.2,border:!1,height:350,items:[{xtype:"checkboxgroup",fieldLabel:"(M0140) Race/Ethnicity: (Mark all that apply.)",cls:"oasis_blue",itemId:"race_ethn",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m0140_ethnic_ai_an",inputValue:"1",boxLabel:"1 - American Indian or Alaska Native"},{xtype:"checkboxfield",name:"m0140_ethnic_asian",inputValue:"1",boxLabel:"2 - Asian"},{xtype:"checkboxfield",name:"m0140_ethnic_black",inputValue:"1",boxLabel:"3 - Black or African-American"},{xtype:"checkboxfield",name:"m0140_ethnic_hisp",inputValue:"1",boxLabel:"4 - Hispanic or Latino"},{xtype:"checkboxfield",name:"m0140_ethnic_nh_pi",inputValue:"1",boxLabel:"5 - Native Hawaiian or Pacific Islander"},{xtype:"checkboxfield",name:"m0140_ethnic_white",inputValue:"1",boxLabel:"6 - White"}]}]}]}]}],afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m0018NpiId=this.mainScope.down("textfield[name=m0018_physician_id]"),this.m0018NpiUk=this.mainScope.down("checkbox[name=m0018_physician_uk]"),this.m0063MedNum=this.mainScope.down("textfield[name=m0063_medicare_num]"),this.m0063MedNa=this.mainScope.down("checkbox[name=m0063_medicare_na]"),this.m0064Ssn=this.mainScope.down("textfield[name=m0064_ssn]"),this.m0064SsnNa=this.mainScope.down("checkbox[name=m0064_ssn_uk]"),this.m0065MedNum=this.mainScope.down("textfield[name=m0065_medicaid_num]"),this.m0065MedNa=this.mainScope.down("checkbox[name=m0065_medicaid_na]"),this.m0032Date=this.mainScope.down("datefield[name=m0032_roc_dt]"),this.m0032Na=this.mainScope.down("checkbox[name=m0032_roc_dt_na]"),this.m0014BranchState=this.mainScope.down("[name=m0014_branch_state]"),this.m0016_branchId=this.mainScope.down("[name=m0016_branch_id]"),this.m0140EthnicityAiAn=this.mainScope.down("[name=m0140_ethnic_ai_an]"),this.m0140EthnicityAsian=this.mainScope.down("[name=m0140_ethnic_asian]"),this.m0140EthnicityBlack=this.mainScope.down("[name=m0140_ethnic_black]"),this.m0140EthnicityHisp=this.mainScope.down("[name=m0140_ethnic_hisp]"),this.m0140EthnicityPi=this.mainScope.down("[name=m0140_ethnic_nh_pi]"),this.m0140EthnicityWhite=this.mainScope.down("[name=m0140_ethnic_white]"),this.m0100AsstReason=this.mainScope.down("[name=m0100_assmt_reason]"),this.m0010CCN=this.mainScope.down("[name=m0010_ccn]"),this.m0014BranchState=this.mainScope.down("[name=m0014_branch_state]"),this.m0016BranchId=this.mainScope.down("[name=m0016_branch_id]"),this.refreshAgencyInfo=this.mainScope.down("[name=refresh_agency_info]"),this.m0030SocDate=this.mainScope.down("[name=m0030_start_care_dt]"),this.m0040PatFname=this.mainScope.down("[name=m0040_pat_fname]"),this.m0040PatLname=this.mainScope.down("[name=m0040_pat_lname]"),this.m0066PatBirthDt=this.mainScope.down("[name=m0066_pat_birth_dt]"),this.m0069PatGender=this.mainScope.down("[name=m0069_pat_gender]"),this.selectNpiId(),this.selectNpiUk(),this.selectMedNum(),this.selectMedNa(),this.selectSsn(),this.selectSsnNa(),this.selectMediNum(),this.selectMediNa(),this.selectDate(),this.selectDateNa(),this.disableRocIfRequired(),this.mainScope.hideRefreshAgencyInfo&&this.refreshAgencyInfo.hide(),this.mainScope.socDateKeyField&&this.m0030SocDate.setReadOnly(!0),this.mainScope.rocDateKeyField&&this.m0032Date.setReadOnly(!0),this.mainScope.nonKeyFieldCorrection&&(this.m0040PatFname.setReadOnly(!0),this.m0040PatLname.setReadOnly(!0),this.m0064Ssn.setReadOnly(!0),this.m0066PatBirthDt.setReadOnly(!0),this.m0069PatGender.setReadOnly(!0)),this.refreshAgencyInfo.on("click",function(){this.mainScope.getAgencyInfo({},function(e){this.m0010CCN.setValue(e[0]),this.m0014BranchState.setValue(e[1]),this.m0016BranchId.setValue(e[2])},this)},this)},serverValidationRequiredFields:function(){return["m0032_roc_dt"]},serverValidationRequiredFieldsSuffix:function(){return[""]},onValidate:function(e){var t=new Array;m0018NpiIdValue=e.down("[name=m0018_physician_id]").value,m0018NpiUkValue=e.down("[name=m0018_physician_uk]").value,m0040PatLname=e.down("[name=m0040_pat_lname]").value,m0060PatZip=e.down("[name=m0060_pat_zip]"),m0020PidValue=e.down("[name=m0020_pat_id]").value,m0032Date=e.down("[name=m0032_roc_dt]"),m0032DateNaValue=e.down("[name=m0032_roc_dt_na]").value,m0063MedNum=e.down("[name=m0063_medicare_num]"),m0063MedNA=e.down("[name=m0063_medicare_na]"),m0064SSN=e.down("[name=m0064_ssn]"),m0064SSNUK=e.down("[name=m0064_ssn_uk]"),m0065MediNumValue=e.down("[name=m0065_medicaid_num]").value,m0065MediNaValue=e.down("[name=m0065_medicaid_na]").value,m0065MediNaValue=e.down("[name=m0065_medicaid_na]").value,m0030StartCareDt=e.down("[name=m0030_start_care_dt]"),m0903LastHomeVisitDt=e.down("[name=m0903_last_home_visit]"),m0906DCTranDthDt=e.down("[name=m0906_dc_tran_dth_dt]"),m0090InfoCompletedDt=e.down("[name=m0090_info_completed_dt]"),m1005InpDischargeDt=e.down("[name=m1005_inp_discharge_dt]"),m0040PatFname=e.down("[name=m0040_pat_fname]"),m0040PatMi=e.down("[name=m0040_pat_mi]"),m0040PatSuffix=e.down("[name=m0040_pat_suffix]"),m0050PatSt=e.down("[name=m0050_pat_st]"),m0066PatBirthDt=e.down("[name=m0066_pat_birth_dt]"),m0069PatGender=e.down("[name=m0069_pat_gender]");var n=["111111111","333333333","999999999","123456789"],r=!0;m0018NpiIdValue==""&&m0018NpiUkValue==0?t.push(["M0018","Enter the NPI of the Physician who will sign the Plan of Care OR select Physician NPI Unknown."]):m0018NpiIdValue&&m0018NpiIdValue.match(/([0-9]){10}/)==null&&t.push(["M0018","Primary Referring Physician National Provider ID (NPI) it must consist of 10 digits with no embedded spaces or blanks."]),m0040PatFname.value!=null&&m0040PatFname.value.length>12&&t.push(["M0040","Patient first name should not be more than 12 characters"]),m0040PatMi.value!=null&&m0040PatMi.value.length>1&&t.push(["M0040","Patient Middle initial should not be more than 1 character"]),(m0040PatLname==null||m0040PatLname=="")&&t.push(["M0040","Enter the patient's full name."]),m0040PatLname!=null&&m0040PatLname.length>18&&t.push(["M0040","Patient last name should not be more than 18 characters"]),m0040PatSuffix.value!=null&&m0040PatSuffix.value.length>3&&t.push(["M0040","Patient suffix should not be more than 3 characters"]),(m0069PatGender.value==null||m0069PatGender.value=="")&&t.push(["M0069","Enter the patient gender"]),m0050PatSt.value==null||m0050PatSt.value==""?t.push(["M0050","Enter the patient state code"]):m0050PatSt.value!=null&&m0050PatSt.value.length!=2?t.push(["M0050","State code should  be 2 characters"]):m0050PatSt.value!=null&&m0050PatSt.value.toUpperCase()!=m0050PatSt.value?t.push(["M0050","State code should be in upper case"]):m0050PatSt.value!=null&&m0050PatSt.value.length==2&&m0050PatSt.value.toUpperCase()==m0050PatSt.value&&this.mainScope.checkForProperState({state_code:m0050PatSt.value},function(e){e&&t.push(["M0050","Enter the valid state code"])},this),m0060PatZip.value==null||m0060PatZip.value==""?t.push(["M0060","Enter the Patient Zip Code."]):m0060PatZip.value!=null&&m0060PatZip.value.match(/^([0-9]){5}([0-9\s]){0,4}(\s){0,2}$/)==null?t.push(["M0060","Patient Zip Code: Bytes 1 through 5 must contain numbers (0 through 9). Bytes 6 through 9 must contain numbers (0 through 9) or blanks. Bytes 10 through 11 must contain blanks."]):m0060PatZip.value!=null&&m0060PatZip.value.match(/^([0-9]){5}([0-9\s]){0,4}(\s){0,2}$/)!=null&&this.mainScope.checkForProperZipCode({zip_code:m0060PatZip.value},function(e){e&&t.push(["M0060","Enter the valid zip code"])},this),!m0066PatBirthDt||m0066PatBirthDt.value!=null&&m0066PatBirthDt.value!=""?m0066PatBirthDt&&m0066PatBirthDt.value!=null&&m0066PatBirthDt.isValid()==0&&t.push(["M0066","Enter the valid date of birth"]):t.push(["M0066","Enter the birth date"]),m0063MedNum&&(m0063MedNum.value==null||m0063MedNum.value=="")&&m0063MedNA&&m0063MedNA.value==0?t.push(["M0063","Enter Medicare number or select Not Applicable(NA)."]):m0063MedNum&&m0063MedNum.value&&(m0063MedNum.value.length>12&&t.push(["M0063","Medicare number should not be more than 12 characters"]),m0063MedNum.value.match(/[-\s]/)&&t.push(["M0063","Medicare number must be alphanumeric with no embedded dashes or spaces."]),m0063MedNum.value.match(/^([0-9]){1}/)&&m0063MedNum.value.match(/^([0-9]){9}/)==null&&t.push(["M0063","Medicare number: If the first character is numeric (0 through 9), then the first 9 characters must be numeric."]),m0063MedNum.value.match(/^[a-zA-z]{1}/)&&m0063MedNum.value.match(/^([a-zA-Z]){3}([0-9]){6,9}(\s){0,3}/)==null&&t.push(["M0063","Medicare number: If the first character is a letter, then there must be 1 to 3 alphabetic characters followed by 6 or 9 numbers followed by spaces up to the field length of 12."]),r=!0,Ext.each(n,function(e,t){e==m0063MedNum.value&&(r=!1)},e),r||t.push(["M0063","Medicare number: It must not equal any of the following values: 111111111, 333333333, 999999999, 123456789."])),m0064SSN&&m0064SSN.value==""&&m0064SSNUK&&m0064SSNUK.value==0?t.push(["M0064","Enter Patient's Social Security Number or select UK."]):m0064SSN&&m0064SSN.value&&(m0064SSN.value.length!=9&&t.push(["M0064","Patient's Social Security Number: It must contain 9 digits (0 through 9)."]),m0064SSN.value.match(/^000/)&&t.push(["M0064","Patient's Social Security Number: It cannot start with 000."]),m0064SSN.value.match(/[-\s]/)&&t.push(["M0064","Patient's Social Security Number: There must be no embedded dashes or spaces."]),r=!0,Ext.each(n,function(e,t){e==m0064SSN.value&&(r=!1)},e),r||t.push(["M0064","Patient's Social Security Number: It must not equal any of the following values: 111111111, 333333333, 999999999, 123456789."])),(m0020PidValue==null||m0020PidValue=="")&&t.push(["M0020","Enter the patient's medical record number."]),m0020PidValue!=null&&m0020PidValue.length>20&&t.push(["M0020","Patient's medical record number should be less than or equal to 20 characters."]);if(m0030StartCareDt.value==null)t.push(["M0030","Start of Care Date can't be blank."]);else if(m0030StartCareDt.value!=null&&m0030StartCareDt.isValid()){m0030StartCareDt.value>new Date&&t.push(["M0030","Start of care date must be less than or equal to the current date."]);var i=this.mainScope.down("[name=m0100_assmt_reason]");i.value=="01"&&m0030StartCareDt.value<new Date(99,6,19,0,0,0)&&t.push(["M0030","Start of Care date cannot precede 07/19/1999."]),m0032Date!=null&&m0032Date.isValid()&&m0032DateNaValue==0&&m0030StartCareDt.value>m0032Date.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Resumption of care date."]),m0903LastHomeVisitDt!=null&&m0903LastHomeVisitDt.isValid()&&m0030StartCareDt.value>m0903LastHomeVisitDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Date of Last Home Visit."]),m0906DCTranDthDt!=null&&m0906DCTranDthDt.isValid()&&m0030StartCareDt.value>m0906DCTranDthDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Discharge, Transfer, Death Date."]),m0090InfoCompletedDt!=null&&m0090InfoCompletedDt.isValid()&&m0030StartCareDt.value>m0090InfoCompletedDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Date Assessment Completed."])}var i=this.mainScope.down("[name=m0100_assmt_reason]");if(i.value=="03"){m0032DateNaValue&&t.push(["M0032","For main assessment Resumption of care date can't be NA."]);if(m0032Date.value&&m0032Date.isValid()&&m0090InfoCompletedDt&&m0090InfoCompletedDt.value){var s=(m0090InfoCompletedDt.value-m0032Date.value)/864e5;(s>2||s<0)&&t.push(["M0032","Info completed date minus Resumption of care date should be greater than or equal to zero and less than or equal to 2."])}if(m0032Date.value&&m0032Date.isValid()&&m1005InpDischargeDt&&m1005InpDischargeDt.value){var s=(m0032Date.value-m1005InpDischargeDt.value)/864e5;(s>14||s<0)&&t.push(["M0032","Resumption of care date minus Most Recent Inpatient Discharge Date should be greater than or equal to zero and less than or equal to 14."])}}m0032Date.value==null&&m0032DateNaValue==0?t.push(["M0032","Enter the resumption of care date."]):m0032Date.value!=null&&m0032Date.isValid()&&(m0032Date.value>new Date&&t.push(["M0032","Resumption of care date must be less than or equal to the current date."]),i.value=="03"&&m0032Date.value<new Date(99,6,19,0,0,0)&&t.push(["M0032","Resumption of care date cannot precede 07/19/1999."]),m0903LastHomeVisitDt!=null&&m0903LastHomeVisitDt.isValid()&&m0032Date.value>m0903LastHomeVisitDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Date of Last Home Visit."]),m0906DCTranDthDt!=null&&m0906DCTranDthDt.isValid()&&m0032Date.value>m0906DCTranDthDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Discharge, Transfer, Death Date."]),m0090InfoCompletedDt!=null&&m0090InfoCompletedDt.isValid()&&m0032Date.value>m0090InfoCompletedDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Date Assessment Completed."]));var o="Enter a valid branch ID number, OR enter 'N' for none and 'P' for parent.",u=new RegExp(/^[N,P]{1}$/),a=new RegExp(/^([A-Z0-9]){2}Q([A-Z0-9]){4}([0-9]){3}$/);return this.m0016_branchId.value==null?t.push(["M0016","Enter a valid branch ID number, OR enter 'N' for none and 'P' for parent."]):this.m0016_branchId.value.length==1&&!u.test(this.m0016_branchId.value)?t.push(["M0016",o]):this.m0016_branchId.value.length!=1&&(this.m0016_branchId.value.length<10||this.m0016_branchId.value.length>10)?t.push(["M0016",o]):this.m0016_branchId.value.length==10&&!a.test(this.m0016_branchId.value)&&t.push(["M0016",o]),this.m0016_branchId.value.length==10&&a.test(this.m0016_branchId.value)&&this.m0014BranchState.value==""&&t.push(["M0014","If a standard branch ID (i.e., not N or P) is submitted, then Branch State cannot be blank."]),this.m0140EthnicityAiAn.checked||this.m0140EthnicityAsian.checked||this.m0140EthnicityBlack.checked||this.m0140EthnicityHisp.checked||this.m0140EthnicityPi.checked||this.m0140EthnicityWhite.checked||t.push(["M0140","Select at least one Race/Ethnicity."]),m0065MediNumValue!=null&&m0065MediNumValue!=""||m0065MediNaValue!=0?m0065MediNumValue!=null&&m0065MediNumValue.length>14&&t.push(["M0065","Medicaid Number should not be more than 14 characters"]):t.push(["M0065","At least select one item from either Medicaid Number_NA or Medicaid Number"]),t},disableRocIfRequired:function(){this.m0100AsstReason.on("change",function(e){e.value=="01"?(this.m0032Date.disable().setValue(),this.m0032Na.disable().setValue(!0)):e.value=="03"&&this.m0032Na.disable().setValue(!1)},this)},disableRocIfRequired:function(){this.m0100AsstReason.on("change",function(e){e.value=="01"?(this.m0032Date.disable().setValue(),this.m0032Na.disable().setValue(!0)):e.value=="03"&&this.m0032Na.disable().setValue(!1)},this)},selectNpiId:function(){this.m0018NpiId.on("change",function(e){e.value&&this.m0018NpiUk.setValue(!1)},this)},selectNpiUk:function(){this.m0018NpiUk.on("change",function(e){e.value&&this.m0018NpiId.setValue(null)},this)},selectMedNum:function(){this.m0063MedNum.on("change",function(e){e.value&&(this.m0063MedNa.setValue(!1),medicare1=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),medicare2=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),medicare1.setValue(!1).enable(),medicare2.setValue(!1).enable())},this)},selectMedNa:function(){this.m0063MedNa.on("change",function(e){e.value&&(this.m0063MedNum.setValue(null),medicare1=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),medicare2=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),medicare1.setValue(!1).disable(),medicare2.setValue(!1).disable())},this)},selectSsn:function(){this.m0064Ssn.on("change",function(e){e.value&&this.m0064SsnNa.setValue(!1)},this)},selectSsnNa:function(){this.m0064SsnNa.on("change",function(e){e.value&&this.m0064Ssn.setValue(null)},this)},selectMediNum:function(){this.m0065MedNum.on("change",function(e){e.value&&(this.m0065MedNa.setValue(!1),medicaid1=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),medicaid2=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),medicaid1.setValue(!1).enable(),medicaid2.setValue(!1).enable())},this)},selectMediNa:function(){this.m0065MedNa.on("change",function(e){e.value&&(this.m0065MedNum.setValue(null),medicaid1=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),medicaid2=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),medicaid1.setValue(!1).disable(),medicaid2.setValue(!1).disable())},this)},selectDate:function(){this.m0032Date.on("change",function(e){e.value&&this.m0032Na.setValue(!1)},this)},selectDateNa:function(){this.m0032Na.on("change",function(e){e.value&&this.m0032Date.setValue(null)},this)}}),Ext.define("Ext.panel.PaymentSourceM0150",{extend:"Ext.panel.Panel",alias:"widget.paymentSourceM0150",border:!1,margin:5,items:[{xtype:"checkboxgroup",fieldLabel:"(M0150) Current Payment Sources for Home Care: (Mark all that apply.)",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m0150_cpay_none",inputValue:"1",boxLabel:"0 - None; no charge for current services"},{xtype:"checkboxfield",name:"m0150_cpay_mcare_ffs",inputValue:"1",boxLabel:"1 - Medicare (traditional fee-for-service)"},{xtype:"checkboxfield",name:"m0150_cpay_mcare_hmo",inputValue:"1",boxLabel:"2 - Medicare (HMO/managed care/Advantage plan)"},{xtype:"checkboxfield",name:"m0150_cpay_mcaid_ffs",inputValue:"1",boxLabel:"3 - Medicaid (traditional fee-for-service)"},{xtype:"checkboxfield",name:"m0150_cpay_mcaid_hmo",inputValue:"1",boxLabel:"4 - Medicaid (HMO/managed care)"},{xtype:"checkboxfield",name:"m0150_cpay_wrkcomp",inputValue:"1",boxLabel:"5 - Worker`s compensation"},{xtype:"checkboxfield",name:"m0150_cpay_titlepgms",inputValue:"1",boxLabel:"6 - Title programs (e.g., Title III, V, or XX)"},{xtype:"checkboxfield",name:"m0150_cpay_oth_govt",inputValue:"1",boxLabel:"7 - Other government (e.g., TriCare, VA, etc.)"},{xtype:"checkboxfield",name:"m0150_cpay_priv_ins",inputValue:"1",boxLabel:"8 - Private insurance"},{xtype:"checkboxfield",name:"m0150_cpay_priv_hmo",inputValue:"1",boxLabel:"9 - Private HMO/managed care"},{xtype:"checkboxfield",name:"m0150_cpay_selfpay",inputValue:"1",boxLabel:"10 - Self-pay"},{xtype:"checkboxfield",name:"m0150_cpay_other",inputValue:"1",boxLabel:"11 - Other (specify)"},{xtype:"checkboxfield",name:"m0150_cpay_uk",inputValue:"1",boxLabel:"UK Unknown"}]},{xtype:"textfield",name:"m0150_other_cpay",labelAlign:"top",width:"50%",margin:"5px",disabled:!0,fieldLabel:"If 11- Other is checked for M0150. Then specify the Other Payment Source. (NOTE: This field is not transmitted to the OASIS State System.)"}],afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.mcareFFS=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),this.mcareHMO=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),this.mcaidFFS=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),this.mcaidHMO=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),this.cpayNone=this.mainScope.down("[name=m0150_cpay_none]"),this.cpayUk=this.mainScope.down("[name=m0150_cpay_uk]"),this.cpayOther=this.mainScope.down("[name=m0150_cpay_other]"),this.otherCpay=this.mainScope.down("[name=m0150_other_cpay]"),this.m0063MedNa=this.mainScope.down("checkbox[name=m0063_medicare_na]"),this.m0065MedNa=this.mainScope.down("checkbox[name=m0065_medicaid_na]"),this.otherCpay.value==1?this.otherCpay.setValue("").enable():this.otherCpay.setValue("").disable(),this.cpayUk.on("change",function(e){if(e.value==1){var t=this.query("checkboxfield");Ext.each(t,function(e,t){e.name!="m0150_cpay_uk"&&e.setValue(!1).disable()})}else{var t=this.query("checkboxfield");Ext.each(t,function(e,t){e.name!="m0150_cpay_uk"&&e.setValue(!1).enable()})}},this);var e=this.query("checkboxfield");Ext.each(e,function(e,t){e.on("change",function(e){e.name=="m0150_cpay_other"&&(e.value==1?this.otherCpay.setValue("").enable():this.otherCpay.setValue("").disable())},this)},this),this.cpayUk.on("change",function(e){this.m0065MedNa.value==1&&(medicaid1=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),medicaid2=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),medicaid1.setValue(!1).disable(),medicaid2.setValue(!1).disable()),this.m0063MedNa.value==1&&(medicare1=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),medicare2=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),medicare1.setValue(!1).disable(),medicare2.setValue(!1).disable())},this)},onValidate:function(e){var t=new Array;return this.private_insurance==0&&this.mcareFFS.value==0&&this.mcareHMO.value==0&&this.mcaidFFS.value==0&&this.mcaidHMO.value==0&&t.push(["M0150","Select at least one payment source."]),(this.cpayNone.value==1||this.cpayUk.value==1)&&t.push(["M0150","Both Current Payment: None and Current Payment: UK(Unknown) should be blank."]),t}}),Ext.define("Ext.panel.ClinicalRecordItemsM0080M0110",{extend:"Ext.panel.Panel",alias:"widget.clinicalRecordItemsM0080M0110",border:!1,margin:5,items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",border:!1,height:400,margin:5,flex:1,items:[{xtype:"radiogroup",fieldLabel:"(M0080) Discipline of Person Completing Assessment",labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"01",margin:5,boxLabel:"1 - RN"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"02",margin:5,boxLabel:"2 - PT"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"03",margin:5,boxLabel:"3 - SLP/ST"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"04",margin:5,boxLabel:"4 - OT"}]},{xtype:"datefield",fieldLabel:"(M0090) Date Assessment Completed",name:"m0090_info_completed_dt",labelAlign:"top",width:"100%"},{xtype:"combo",fieldLabel:"(M0100) This Assessment is Currently Being Completed for the Following Reason",labelAlign:"top",name:"m0100_assmt_reason",store:[["01","Start of Care - further visits planned"],["03","Resumption of Care(after inpatient stay)"],["04","Recertification (follow-up) reassessment"],["05","Other follow-up"],["06","Transferred to an inpatient facility - patient not discharged from agency"],["07","Transferred to an inpatient facility - patient discharged from agency"],["08","Death at home"],["09","Discharge from agency"]],width:430,hidden:!0,readOnly:!1},{xtype:"datefield",fieldLabel:"(M0102) Date of Physician-ordered Start of Care (Resumption of Care): If the physician indicated a specific start of care (resumption of care) date when the patient was referred for home health services, record the date specified",cls:"oasis_blue",itemId:"date_of_phy_soc",afterLabelTpl:' <text class="oasis_yellow">[Go to M0110, if date entered]</text>',name:"m0102_physn_ordrd_socroc_dt",labelAlign:"top",margin:0,width:"100%"},{xtype:"checkbox",fieldLabel:" ",labelSeparator:" ",cls:"oasis_blue",afterLabelTextTpl:"<b>(M0102) Date of Physician-ordered Start of Care (Resumption of Care): NA</b>",labelAlign:"top",inputValue:"1",name:"m0102_physn_ordrd_socroc_dt_na",boxLabel:"NA - No specific SOC date ordered by physician",width:"100%"}]},{xtype:"panel",border:!1,margin:5,height:400,flex:1,items:[{xtype:"datefield",fieldLabel:"(M0104) Date of Referral: Indicate the date that the written or verbal referral for initiation or resumption of care was received by the HHA",cls:"oasis_blue",itemId:"date_of_ref",name:"m0104_physn_rfrl_dt",labelAlign:"top",width:"100%"},{xtype:"radiogroup",fieldLabel:'(M0110) Episode Timing: Is the Medicare home health payment episode for which  this assessment will define a case mix group an "early" episode or a "later" episode in the patient`s current sequence of adjacent Medicare home health payment episodes?',labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"01",margin:5,boxLabel:"1 - Early"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"02",margin:5,boxLabel:"2 - Later"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"UK",margin:5,boxLabel:"UK - Unknown"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"NA",margin:5,boxLabel:"NA - Not Applicable: No Medicare case mix group to be defined by this assessment"}]}]}]}],serverValidationRequiredFields:function(){return["m0090_info_completed_dt"]},serverValidationRequiredFieldsSuffix:function(){return[""]},onInfoCompletedDate:function(){this.infoCompletedDt.value!=null&&this.infoCompletedDt.isValid()==1?(this.physicianSocRocDt.enable(),this.physicianSocRocDtNa.enable(),this.physicianReferralDt.enable()):(this.physicianSocRocDt.disable().setValue(),this.physicianSocRocDtNa.disable().setValue(!1),this.physicianReferralDt.disable().setValue())},onValidate:function(e){var t=new Array;return m0080Assessor=this.mainScope.down("radiofield[name=m0080_assessor_discipline]").getGroupValue(),m0110Episode=this.mainScope.down("radiofield[name=m0110_episode_timing]").getGroupValue(),m1005Value=this.mainScope.down("[name=m1005_inp_discharge_dt]").value,m0080Assessor==null&&t.push(["M0080","Select the discipline of the person completing the assessment."]),this.infoCompletedDt.value==null?t.push(["M0090","Enter the date this assessment was completed."]):this.infoCompletedDt.value!=null&&this.infoCompletedDt.isValid()==0?t.push(["M0090","The assessment completed date should be in the 'mm/dd/yyyy' format."]):(this.infoCompletedDt.value>=new Date&&t.push(["M0090","The assessment completed date cannot be after the current date."]),this.infoCompletedDt.value<new Date("01/01/2010")&&t.push(["M0090","The assessment completed date cannot be before 01/01/2010."]),this.assessmentReason.value==1&&(days=Math.floor(this.infoCompletedDt.value-this.startCareDate.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=5||t.push(["M0090","The assessment completed date cannot be before the start of care date or more than 5 days after the start of care date."]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the start of care date."])),this.assessmentReason.value==3&&(days=Math.floor(this.infoCompletedDt.value-this.rocDate.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=2||t.push(["M0090","The assessment completed date cannot be before the resumption of care date or more than 2 days after the resumption of care date."]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the resumption of care date."])),this.assessmentReason.value==9&&this.m0906DcTranDthDt!=null&&this.m0906DcTranDthDt.value!=null&&this.m0906DcTranDthDt.isValid()==1&&(days=Math.floor(this.infoCompletedDt.value-this.m0906DcTranDthDt.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=2||t.push(["M0090","The assessment completed date should not be more than 2 days after the discharge/transfer/death date."]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the discharge/transfer/death date."])),this.physicianSocRocDt.value!=null?(this.physicianSocRocDt.value>new Date&&t.push(["M0102","The date of the physician-ordered SOC/ROC date cannot be after the current date."]),this.startCareDate.value!=null&&this.physicianSocRocDt.value>this.startCareDate.value&&t.push(["M0102","The date of the physician-ordered SOC/ROC date cannot be after the start of care date."]),this.rocDate.value!=null&&this.physicianSocRocDt.value>this.rocDate.value&&t.push(["M0102","The date of the physician-ordered SOC/ROC date cannot be after the resumption of care date."]),this.infoCompletedDt.value!=null&&this.physicianSocRocDt.value>this.infoCompletedDt.value&&t.push(["M0102","The date of the physician-ordered SOC/ROC date cannot be after the assessment completed date."]),m1005Value!=null&&this.physicianSocRocDt.value<m1005Value&&t.push(["M0102","The date of the physician-ordered SOC/ROC date cannot be before the inpatient discharge date."])):this.physicianSocRocDt.value==null&&this.physicianSocRocDtNa.value==0&&t.push(["M0102","Enter the date of the physician-ordered start of care or resumption of care, OR select 'NA'."]),this.physicianReferralDt.value!=null&&this.physicianReferralDt.isValid()?(this.physicianReferralDt.value>new Date&&t.push(["M0104","Physician Date Of Referral must be less than or equal to the current date"]),this.startCareDate.value!=null&&this.physicianReferralDt.value>this.startCareDate.value&&this.assessmentReason.value=="01"&&t.push(["M0104","Physician Date Of Referral must be less than or equal to the Start of Care Date(M0030)"]),this.rocDate.value!=null&&this.physicianReferralDt.value>this.rocDate.value&&this.assessmentReason.value=="03"&&t.push(["M0104","Physician Date Of Referral must be earlier than or equal to Resumption of Care Date(M0032)"]),this.infoCompletedDt.value!=null&&this.physicianSocRocDt.value>this.infoCompletedDt.value&&t.push(["M0104","Physician Date Of Referral must be earlier than or equal to Date Assessment Completed(M0090)"])):this.physicianSocRocDt.value==null&&this.physicianSocRocDtNa.value==1&&t.push(["M0104","Enter the referral date."])),this.assessmentReason.value==null&&t.push(["M0100","Select the reason for this assessment."]),m0110Episode==null&&t.push(["M0110","Select the episode timing."]),t},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.startCareDate=this.mainScope.down("datefield[name=m0030_start_care_dt]"),this.assessmentReason=this.mainScope.down("textfield[name=m0100_assmt_reason]"),this.physicianSocRocDt=this.mainScope.down("datefield[name=m0102_physn_ordrd_socroc_dt]"),this.physicianSocRocDtNa=this.mainScope.down("[name=m0102_physn_ordrd_socroc_dt_na]"),this.physicianReferralDt=this.mainScope.down("[name=m0104_physn_rfrl_dt]"),this.rocDate=this.mainScope.down("datefield[name=m0032_roc_dt]"),this.m0906DcTranDthDt=this.mainScope.down("datefield[name=m0906_dc_tran_dth_dt]"),this.mainScope.infoCompletedDateKeyField&&this.infoCompletedDt.setReadOnly(!0)},initComponent:function(){this.callParent();var e=this.down("datefield[name=m0102_physn_ordrd_socroc_dt]"),t=this.down("[name=m0102_physn_ordrd_socroc_dt_na]"),n=this.down("datefield[name=m0104_physn_rfrl_dt]"),r=this.down("[name=m0090_info_completed_dt]");e.on("select",function(r){e.value!=null&&e.isValid()&&r.value&&(t.setValue(!1),n.setValue(null).disable())},this),t.on("change",function(t){t.value&&(e.setValue(null),n.setValue(null).enable())},this),r.value==null&&(e.disable(),t.disable(),n.disable()),r.on("change",function(e){e.value&&this.onInfoCompletedDate()},this)}}),Ext.define("Ext.panel.InPatientDischargeM1000M1005",{extend:"Ext.panel.Panel",alias:"widget.inPatientDischargeM1000M1005",border:!1,margin:5,items:[{xtype:"checkboxgroup",fieldLabel:"(M1000) From which of the following Inpatient Facilities was the patient discharged within the past 14 days? (Mark all that apply.)",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m1000_dc_ltc_14_da"
,inputValue:"1",boxLabel:"1 - Long-term nursing facility ( N F )"},{xtype:"checkboxfield",name:"m1000_dc_snf_14_da",inputValue:"1",boxLabel:"2 - Skilled nursing facility ( S N F / T C U )"},{xtype:"checkboxfield",name:"m1000_dc_ipps_14_da",inputValue:"1",boxLabel:"3 - Short-stay acute hospital ( I P P S )"},{xtype:"checkboxfield",name:"m1000_dc_ltch_14_da",inputValue:"1",boxLabel:"4 - Long-term care hospital ( L T C H )"},{xtype:"checkboxfield",name:"m1000_dc_irf_14_da",inputValue:"1",boxLabel:"5 - Inpatient rehabilitation hospital or unit ( I R F )"},{xtype:"checkboxfield",name:"m1000_dc_psych_14_da",inputValue:"1",boxLabel:"6 - Psychiatric hospital or unit"},{xtype:"checkboxfield",name:"m1000_dc_oth_14_da",inputValue:"1",boxLabel:"7 - Other (specify)"},{xtype:"checkboxfield",name:"m1000_dc_none_14_da",inputValue:"1",boxLabel:"NA - Patient was not discharged from an inpatient facility",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1016]</text>'}]},{xtype:"textfield",name:"m1000_other_dc",labelAlign:"top",width:"50%",margin:"5px",fieldLabel:"Other"},{xtype:"datefield",name:"m1005_inp_discharge_dt",labelAlign:"top",width:"50%",margin:"10 5 5 5",fieldLabel:"(M1005) Inpatient Discharge Date (most recent)"},{xtype:"label",text:"(M1005) Inpatient Discharge Date (most recent): UK",margin:"0 0 0 5"},{xtype:"checkboxfield",name:"m1005_inp_dschg_unknown",labelAlign:"top",margin:"0 0 5 5",inputValue:"1",fieldLabel:"",boxLabel:"UK: Unknown"}],onValidate:function(e){var t=new Array,n=e.down("checkboxfield[name=m1005_inp_dschg_unknown]");return this.m1000_dc_ltc_14_da.value==0&&this.m1000_dc_snf_14_da.value==0&&this.m1000_dc_ipps_14_da.value==0&&this.m1000_dc_ltch_14_da.value==0&&this.m1000_dc_irf_14_da.value==0&&this.m1000_dc_psych_14_da.value==0&&this.m1000_dc_oth_14_da.value==0&&this.m1000_dc_none_14_da.value==0&&t.push(["M1000","Select at least one inpatient facility from which the patient has been discharged within the last 14 days OR select 'NA'."]),this.dischargeDate.value==null&&this.m1000_dc_none_14_da.value==0&&n.value==0?t.push(["M1005","Enter the inpatient facility discharge date OR select 'Unknown'."]):(this.dischargeDate.isValid()==0&&t.push(["M1005","The inpatient facility discharge date must be in the 'mm/dd/yyyy' format."]),this.dischargeDate.value>new Date&&t.push(["M1005","The inpatient facility discharge date must be less than or equal to current date."]),this.assessmentReason.value=="01"&&this.startCareDate.value!=null&&this.dischargeDate.value!=null&&(days=Math.floor(this.startCareDate.value-this.dischargeDate.value)/864e5,(days<0||days>=0&&days>14)&&t.push(["M1005","The inpatient facility discharge date must be within 14 days prior to the start of care date, with the start of care date counting as day 0."])),this.assessmentReason.value=="03"&&this.rocDate.value!=null&&this.dischargeDate.value!=null&&(days=Math.floor(this.rocDate.value-this.dischargeDate.value)/864e5,(days<0||days>=0&&days>14)&&t.push(["M1005","The inpatient facility discharge date must be within 14 days prior to the resumption of care date, with the resumption of care date counting as day 0."])),this.rocDate.value==null&&this.dischargeDate.isValid()==1?(this.startCareDate.value<this.dischargeDate.value||this.infoCompletedDate.value<this.dischargeDate.value)&&t.push(["M1005","The inpatient facility discharge date cannot be after the start of care and assessment completed date."]):this.rocDate.value&&this.rocDate.isValid()&&(this.infoCompletedDate.value<this.dischargeDate.value||this.rocDate.value<this.dischargeDate.value)&&t.push(["M1005","The inpatient facility discharge date cannot be after the resumption of care date and assessment completed date."])),t},checkDate:function(e){if(this.assessmentReason.value==1){var t=Ext.Date.add(this.startCareDate.value,Ext.Date.DAY,-14);days=Math.floor(this.startCareDate.value-e.value)/864e5,e.value-t<=14?alert("hey i am discharging"):alert("days should be grater than equal to zero and less than 14 days ")}else alert("hey i am terminating")},notApplicableChecked:function(e,t,n,r,i){Ext.each(e,function(e,t){this.query("checkbox[name="+e+"]")[0].setValue(!1)},this),n.disable().setValue(),i.disable().setValue(!1),t.value==0&&t.setValue(!0),Ext.each(r,function(e){var t=this.up("#super_main").query("[name="+e+"]")[0];t.disable(),t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.setValue(!1):t.setValue()},this)},notApplicableUnchecked:function(e,t,n){e.enable(),t.enable(),Ext.each(n,function(e){this.up("#super_main").query("[name="+e+"]")[0].enable()},this)},selectNotApplicable:function(e,t,n,r,i){e.on("change",function(s){s.value?this.notApplicableChecked(t,e,n,r,i):this.notApplicableUnchecked(n,i,r)},this)},initComponent:function(){this.callParent();var e=["m1000_dc_ltc_14_da","m1000_dc_snf_14_da","m1000_dc_ipps_14_da","m1000_dc_ltch_14_da","m1000_dc_irf_14_da","m1000_dc_psych_14_da","m1000_dc_oth_14_da"],t=["m1010_14_day_inp1_icd","m1010_14_day_inp3_icd","m1010_14_day_inp5_icd","m1010_14_day_inp2_icd","m1010_14_day_inp4_icd","m1010_14_day_inp6_icd","m1012_inp_prcdr1_icd","m1012_inp_prcdr3_icd","m1012_inp_na_icd","m1012_inp_prcdr2_icd","m1012_inp_prcdr4_icd","m1012_inp_uk_icd"],n=this.down("checkbox[name=m1000_dc_none_14_da]"),r=this.down("textfield[name=m1000_other_dc]"),i=this.down("datefield[name=m1005_inp_discharge_dt]"),s=this.down("checkboxfield[name=m1005_inp_dschg_unknown]");r.disable(),this.selectNotApplicable(n,e,i,t,s),i.on("select",function(e){i.value&&i.isValid()&&e.value&&s.setValue(!1)},this),s.on("change",function(e){e.value&&i.setValue(null)},this),Ext.each(e,function(e){this.query("checkbox[name="+e+"]")[0].on("change",function(e){e.name=="m1000_dc_oth_14_da"&&(e.value?r.enable():r.disable().setValue()),n.value&&n.setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.assessmentReason=this.mainScope.down("textfield[name=m0100_assmt_reason]"),this.startCareDate=this.mainScope.down("datefield[name=m0030_start_care_dt]"),this.dischargeDate=this.mainScope.down("datefield[name=m1005_inp_discharge_dt]"),this.rocDate=this.mainScope.down("datefield[name=m0032_roc_dt]"),this.infoCompletedDate=this.mainScope.down("datefield[name=m0090_info_completed_dt]"),this.m1000_dc_ltc_14_da=this.mainScope.down("[name=m1000_dc_ltc_14_da]"),this.m1000_dc_snf_14_da=this.mainScope.down("[name=m1000_dc_snf_14_da]"),this.m1000_dc_ipps_14_da=this.mainScope.down("[name=m1000_dc_ipps_14_da]"),this.m1000_dc_ltch_14_da=this.mainScope.down("[name=m1000_dc_ltch_14_da]"),this.m1000_dc_irf_14_da=this.mainScope.down("[name=m1000_dc_irf_14_da]"),this.m1000_dc_psych_14_da=this.mainScope.down("[name=m1000_dc_psych_14_da]"),this.m1000_dc_oth_14_da=this.mainScope.down("[name=m1000_dc_oth_14_da]"),this.m1000_dc_none_14_da=this.mainScope.down("[name=m1000_dc_none_14_da]")}}),Ext.define("Ext.panel.InPatientDischargeM1000M1005C1",{extend:"Ext.panel.Panel",alias:"widget.inPatientDischargeM1000M1005C1",border:!1,margin:5,items:[{xtype:"checkboxgroup",fieldLabel:"(M1000) From which of the following Inpatient Facilities was the patient discharged within the past 14 days? (Mark all that apply.)",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m1000_dc_ltc_14_da",inputValue:"1",boxLabel:"1 - Long-term nursing facility ( N F )"},{xtype:"checkboxfield",name:"m1000_dc_snf_14_da",inputValue:"1",boxLabel:"2 - Skilled nursing facility ( S N F / T C U )"},{xtype:"checkboxfield",name:"m1000_dc_ipps_14_da",inputValue:"1",boxLabel:"3 - Short-stay acute hospital ( I P P S )"},{xtype:"checkboxfield",name:"m1000_dc_ltch_14_da",inputValue:"1",boxLabel:"4 - Long-term care hospital ( L T C H )"},{xtype:"checkboxfield",name:"m1000_dc_irf_14_da",inputValue:"1",boxLabel:"5 - Inpatient rehabilitation hospital or unit ( I R F )"},{xtype:"checkboxfield",name:"m1000_dc_psych_14_da",inputValue:"1",boxLabel:"6 - Psychiatric hospital or unit"},{xtype:"checkboxfield",name:"m1000_dc_oth_14_da",inputValue:"1",boxLabel:"7 - Other (specify)"},{xtype:"checkboxfield",name:"m1000_dc_none_14_da",inputValue:"1",boxLabel:"NA - Patient was not discharged from an inpatient facility",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1016]</text>'}]},{xtype:"textfield",name:"m1000_other_dc",labelAlign:"top",width:"50%",margin:"5px",fieldLabel:"Other"},{xtype:"datefield",name:"m1005_inp_discharge_dt",labelAlign:"top",width:"50%",margin:"10 5 5 5",fieldLabel:"(M1005) Inpatient Discharge Date (most recent)"},{xtype:"label",text:"(M1005) Inpatient Discharge Date (most recent): UK",margin:"0 0 0 5"},{xtype:"checkboxfield",name:"m1005_inp_dschg_unknown",labelAlign:"top",margin:"0 0 5 5",inputValue:"1",fieldLabel:"",boxLabel:"UK: Unknown"}],onValidate:function(e){var t=new Array,n=e.down("checkboxfield[name=m1005_inp_dschg_unknown]");return this.m1000_dc_ltc_14_da.value==0&&this.m1000_dc_snf_14_da.value==0&&this.m1000_dc_ipps_14_da.value==0&&this.m1000_dc_ltch_14_da.value==0&&this.m1000_dc_irf_14_da.value==0&&this.m1000_dc_psych_14_da.value==0&&this.m1000_dc_oth_14_da.value==0&&this.m1000_dc_none_14_da.value==0&&t.push(["M1000","Select at least one inpatient facility from which the patient has been discharged within the last 14 days OR select 'NA'."]),this.dischargeDate.value==null&&this.m1000_dc_none_14_da.value==0&&n.value==0?t.push(["M1005","Enter the inpatient facility discharge date OR select 'Unknown'."]):(this.dischargeDate.isValid()==0&&t.push(["M1005","The inpatient facility discharge date must be in the 'mm/dd/yyyy' format."]),this.dischargeDate.value>new Date&&t.push(["M1005","The inpatient facility discharge date must be less than or equal to current date."]),this.assessmentReason.value=="01"&&this.startCareDate.value!=null&&this.dischargeDate.value!=null&&(days=Math.floor(this.startCareDate.value-this.dischargeDate.value)/864e5,(days<0||days>=0&&days>14)&&t.push(["M1005","The inpatient facility discharge date must be within 14 days prior to the start of care date, with the start of care date counting as day 0."])),this.assessmentReason.value=="03"&&this.rocDate.value!=null&&this.dischargeDate.value!=null&&(days=Math.floor(this.rocDate.value-this.dischargeDate.value)/864e5,(days<0||days>=0&&days>14)&&t.push(["M1005","The inpatient facility discharge date must be within 14 days prior to the resumption of care date, with the resumption of care date counting as day 0."])),this.rocDate.value==null&&this.dischargeDate.isValid()==1?(this.startCareDate.value<this.dischargeDate.value||this.infoCompletedDate.value<this.dischargeDate.value)&&t.push(["M1005","The inpatient facility discharge date cannot be after the start of care and assessment completed date."]):this.rocDate.value&&this.rocDate.isValid()&&(this.infoCompletedDate.value<this.dischargeDate.value||this.rocDate.value<this.dischargeDate.value)&&t.push(["M1005","The inpatient facility discharge date cannot be after the resumption of care date and assessment completed date."])),t},checkDate:function(e){if(this.assessmentReason.value==1){var t=Ext.Date.add(this.startCareDate.value,Ext.Date.DAY,-14);days=Math.floor(this.startCareDate.value-e.value)/864e5,e.value-t<=14?alert("hey i am discharging"):alert("days should be grater than equal to zero and less than 14 days ")}else alert("hey i am terminating")},notApplicableChecked:function(e,t,n,r,i,s){Ext.each(e,function(e,t){this.query("checkbox[name="+e+"]")[0].setValue(!1)},this),n.disable().setValue(),s.disable().setValue(!1),t.value==0&&t.setValue(!0),Ext.each(r,function(e){var t=this.up("#super_main").query("[name="+e+"]")[0];t.disable(),t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.setValue(!1):t.setValue()},this),Ext.each(i,function(e){var t=this.up("#super_main").query("[name="+e+"]")[0];t.disable(),t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.setValue(!1):t.setValue()},this)},notApplicableUnchecked:function(e,t,n,r){e.enable(),t.enable(),Ext.each(n,function(e){this.up("#super_main").query("[name="+e+"]")[0].enable()},this),Ext.each(r,function(e){this.up("#super_main").query("[name="+e+"]")[0].enable()},this)},selectNotApplicable:function(e,t,n,r,i,s){e.on("change",function(o){this.infoCompletedDt.value<this.fromDate?o.value?this.notApplicableChecked(t,e,n,r,i,s):this.notApplicableUnchecked(n,s,r,i):this.infoCompletedDt.value>=this.fromDate&&(o.value?this.notApplicableChecked(t,e,n,r,i,s):this.notApplicableUnchecked(n,s,r,i))},this)},initComponent:function(){this.callParent();var e=["m1000_dc_ltc_14_da","m1000_dc_snf_14_da","m1000_dc_ipps_14_da","m1000_dc_ltch_14_da","m1000_dc_irf_14_da","m1000_dc_psych_14_da","m1000_dc_oth_14_da"],t=["m1010_14_day_inp1_icd","m1010_14_day_inp3_icd","m1010_14_day_inp5_icd","m1010_14_day_inp2_icd","m1010_14_day_inp4_icd","m1010_14_day_inp6_icd"],n=["m1011_14_day_inp1_icd","m1011_14_day_inp2_icd","m1011_14_day_inp3_icd","m1011_14_day_inp4_icd","m1011_14_day_inp5_icd","m1011_14_day_inp6_icd"],r=this.down("checkbox[name=m1000_dc_none_14_da]"),i=this.down("textfield[name=m1000_other_dc]"),s=this.down("datefield[name=m1005_inp_discharge_dt]"),o=this.down("checkboxfield[name=m1005_inp_dschg_unknown]");i.disable(),this.selectNotApplicable(r,e,s,t,n,o),s.on("select",function(e){s.value&&s.isValid()&&e.value&&o.setValue(!1)},this),o.on("change",function(e){e.value&&s.setValue(null)},this),Ext.each(e,function(e){this.query("checkbox[name="+e+"]")[0].on("change",function(e){e.name=="m1000_dc_oth_14_da"&&(e.value?i.enable():i.disable().setValue()),r.value&&r.setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.fromDate=new Date("October 1, 2015"),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.assessmentReason=this.mainScope.down("textfield[name=m0100_assmt_reason]"),this.startCareDate=this.mainScope.down("datefield[name=m0030_start_care_dt]"),this.dischargeDate=this.mainScope.down("datefield[name=m1005_inp_discharge_dt]"),this.rocDate=this.mainScope.down("datefield[name=m0032_roc_dt]"),this.infoCompletedDate=this.mainScope.down("datefield[name=m0090_info_completed_dt]"),this.m1000_dc_ltc_14_da=this.mainScope.down("[name=m1000_dc_ltc_14_da]"),this.m1000_dc_snf_14_da=this.mainScope.down("[name=m1000_dc_snf_14_da]"),this.m1000_dc_ipps_14_da=this.mainScope.down("[name=m1000_dc_ipps_14_da]"),this.m1000_dc_ltch_14_da=this.mainScope.down("[name=m1000_dc_ltch_14_da]"),this.m1000_dc_irf_14_da=this.mainScope.down("[name=m1000_dc_irf_14_da]"),this.m1000_dc_psych_14_da=this.mainScope.down("[name=m1000_dc_psych_14_da]"),this.m1000_dc_oth_14_da=this.mainScope.down("[name=m1000_dc_oth_14_da]"),this.m1000_dc_none_14_da=this.mainScope.down("[name=m1000_dc_none_14_da]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]")}}),Ext.define("Ext.panel.DiagnosisAndProcedureCodesM1010M1012",{extend:"Ext.panel.Panel",alias:"widget.diagnosisAndProcedureCodesM1010M1012",border:!1,margin:5,items:[{xtype:"label",text:"(M1010) List each Inpatient Diagnosis and ICD-9-CM code at the level of highest specificity for only those conditions treated during an inpatient stay within the last 14 days (no E-codes, or V-codes): "},{xtype:"panel",border:0,height:105,layout:{columns:3,type:"table"},items:[{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp1_icd",fieldLabel:"a",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp3_icd",fieldLabel:"c",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp5_icd",fieldLabel:"e",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp2_icd",fieldLabel:"b",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp4_icd",fieldLabel:"d",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp6_icd",fieldLabel:"f",labelAlign:"top",store:[]}]},{xtype:"label",text:"(M1012) List each Inpatient Procedure and the associated ICD-9-CM procedure code relevant to the plan of care."},{xtype:"panel",border:0,height:105,layout:{columns:3,type:"table"},items:[{xtype:"netzkeremotecombo",padding:2,name:"m1012_inp_prcdr1_icd",fieldLabel:"a",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1012_inp_prcdr3_icd",fieldLabel:"c",labelAlign:"top",store:[]},{xtype:"checkbox",padding:2,name:"m1012_inp_na_icd",fieldLabel:"",boxLabel:"NA - Not applicable",inputValue:"1"},{xtype:"netzkeremotecombo",padding:2,name:"m1012_inp_prcdr2_icd",fieldLabel:"b",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1012_inp_prcdr4_icd",fieldLabel:"d",labelAlign:"top",store:[]},{xtype:"checkbox",padding:2,name:"m1012_inp_uk_icd",fieldLabel:"",boxLabel:"UK - Unknown",inputValue:"1"}]}],onValidate:function(){var e=new Array,t=["m1000_dc_ltc_14_da","m1000_dc_snf_14_da","m1000_dc_ipps_14_da","m1000_dc_ltch_14_da","m1000_dc_irf_14_da","m1000_dc_psych_14_da","m1000_dc_oth_14_da"];return Ext.each(t,function(t){this.mainScope.down("[name="+t+"]").value==1&&this.inp1Icd.value==null&&e.push(["M1010","Enter at least one inpatient facility diagnosis code OR select 'NA' for M1000."]),this.mainScope.down("[name="+t+"]").value==1&&this.prcdr1.value==null&&this.prcdr2.value==null&&this.prcdr3.value==null&&this.prcdr4.value==null&&this.inpNa.value==0&&this.inpUk.value==0&&e.push(["M1012","Enter at least one inpatient procedure code OR select 'NA' or 'Unknown'. "])},this),this.prcdr1.value==null&this.prcdr2.value!=null&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'a' is blank then 'b' also should be blank."]),this.prcdr1.value&&this.prcdr2.value&&this.prcdr1.value==this.prcdr2.value&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'b' value can't equal to 'a'."]),this.prcdr2.value==null&this.prcdr3.value!=null&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'b' is blank then 'c' also should be blank."]),this.prcdr2.value&&this.prcdr3.value&&this.prcdr2.value==this.prcdr3.value&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'c' value can't equal to 'b'."]),this.prcdr3.value==null&this.prcdr4.value!=null&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'c' is blank then 'd' also should be blank."]),this.prcdr3.value&&this.prcdr4.value&&this.prcdr3.value==this.prcdr4.value&&e.push(["M1012","Inpatient Procedure and the associated ICD-9-CM: 'd' value can't equal to 'c'."]),this.inp1Icd.value==null&&this.inp2Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'a' is blank then inpatient diagnosis 'b' must also be blank."]):this.inp2Icd.value!=null&&this.inp1Icd.value==this.inp2Icd.value&&e.push(["M1010","Inpatient diagnosis 'b' cannot be the same as inpatient diagnosis 'a'."]),this.inp2Icd.value==null&&this.inp3Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'b' is blank then inpatient diagnosis 'c' must also be blank."]):this.inp3Icd.value!=null&&this.inp2Icd.value==this.inp3Icd.value&&e.push(["M1010","Inpatient diagnosis 'c' cannot be the same as inpatient diagnosis 'b'."]),this.inp3Icd.value==null&&this.inp4Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'c' is blank then inpatient diagnosis 'd' must also be blank."]):this.inp4Icd.value!=null&&this.inp3Icd.value==this.inp4Icd.value&&e.push(["M1010","Inpatient diagnosis 'd' cannot be the same as inpatient diagnosis 'c'."]),this.inp4Icd.value==null&&this.inp5Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'd' is blank then inpatient diagnosis 'e' must also be blank."]):this.inp5Icd.value!=null&&this.inp4Icd.value==this.inp5Icd.value&&e.push(["M1010","Inpatient diagnosis 'e' cannot be the same as inpatient diagnosis 'd'."]),this.inp5Icd.value==null&&this.inp6Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'e' is blank then inpatient diagnosis 'f' must also be blank."]):this.inp6Icd.value!=null&&this.inp5Icd.value==this.inp6Icd.value&&e.push(["M1010","Inpatient diagnosis 'f' cannot be the same as inpatient diagnosis 'e'."]),e},serverValidationRequiredFields:function(){return["m1010_14_day_inp1_icd","m1010_14_day_inp2_icd","m1010_14_day_inp3_icd","m1010_14_day_inp4_icd","m1010_14_day_inp5_icd","m1010_14_day_inp6_icd","m1012_inp_prcdr1_icd","m1012_inp_prcdr2_icd","m1012_inp_prcdr3_icd","m1012_inp_prcdr4_icd"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f","a","b","c","d"]},changeOnNaOrUk:function(e){Ext.each(e,function(e){this.down("[name="+e+"]").setValue(null)},this)},initComponent:function(){this.callParent();var e=["m1012_inp_prcdr1_icd","m1012_inp_prcdr3_icd","m1012_inp_prcdr2_icd","m1012_inp_prcdr4_icd"];Ext.each(e,function(e){this.down("[name="+e+"]").on("select",function(e){e.value&&(this.inpNa.setValue(!1),this.inpUk.setValue(!1))},this)},this);var t=this.down("[name=m1012_inp_na_icd]"),n=this.down("[name=m1012_inp_uk_icd]");t.on("change",function(t){t.value&&(this.changeOnNaOrUk(e),this.inpUk.setValue(!1))},this),n.on("change",function(t){t.value&&(this.changeOnNaOrUk(e),this.inpNa.setValue(!1))},this)},afterRender:function(){this.callParent();var e=this.query("netzkeremotecombo");Ext.each(e,function(e,t){},this),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.inp1Icd=this.mainScope.down("[name=m1010_14_day_inp1_icd]"),this.inp2Icd=this.mainScope.down("[name=m1010_14_day_inp2_icd]"),this.inp3Icd=this.mainScope.down("[name=m1010_14_day_inp3_icd]"),this.inp4Icd=this.mainScope.down("[name=m1010_14_day_inp4_icd]"),this.inp5Icd=this.mainScope.down("[name=m1010_14_day_inp5_icd]"),this.inp6Icd=this.mainScope.down("[name=m1010_14_day_inp6_icd]"),this.prcdr1=this.mainScope.down("[name=m1012_inp_prcdr1_icd]"),this.prcdr2=this.mainScope.down("[name=m1012_inp_prcdr2_icd]"),this.prcdr3=this.mainScope.down("[name=m1012_inp_prcdr3_icd]"),this.prcdr4=this.mainScope.down("[name=m1012_inp_prcdr4_icd]"),this.inpNa=this.mainScope.down("[name=m1012_inp_na_icd]"),this.inpUk=this.mainScope.down("[name=m1012_inp_uk_icd]")}}),Ext.define("Ext.panel.DiagnosisAndProcedureCodesM1010M1012C1",{extend:"Ext.panel.Panel",alias:"widget.diagnosisAndProcedureCodesM1010M1012C1",border:!1,margin:5,items:[{xtype:"label",text:"(M1010) List each Inpatient Diagnosis and ICD-9-CM code at the level of highest specificity for only those conditions treated during an inpatient stay within the last 14 days (no E-codes, or V-codes): "},{xtype:"panel",border:0,height:105,layout:{columns:3,type:"table"},items:[{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp1_icd",fieldLabel:"a",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp3_icd",fieldLabel:"c",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp5_icd",fieldLabel:"e",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp2_icd",fieldLabel:"b",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp4_icd",fieldLabel:"d",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1010_14_day_inp6_icd",fieldLabel:"f",labelAlign:"top",store:[]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;return!s&&this.infoCompletedDt.value<t&&(o=!0),(this.m1000_dc_ltc_14_da.value==1||this.m1000_dc_snf_14_da.value==1||this.m1000_dc_ipps_14_da.value==1||this.m1000_dc_ltch_14_da.value==1||this.m1000_dc_irf_14_da.value==1||this.m1000_dc_psych_14_da.value==1||this.m1000_dc_oth_14_da.value==1)&&this.inp1Icd.value==null&&o&&e.push(["M1010","Enter at least one inpatient facility diagnosis code OR select 'NA' for M1000."]),this.inp1Icd.value==null&&this.inp2Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'a' is blank then inpatient diagnosis 'b' must also be blank."]):this.inp2Icd.value!=null&&this.inp1Icd.value==this.inp2Icd.value&&e.push(["M1010","Inpatient diagnosis 'b' cannot be the same as inpatient diagnosis 'a'."]),this.inp2Icd.value==null&&this.inp3Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'b' is blank then inpatient diagnosis 'c' must also be blank."]):this.inp3Icd.value!=null&&this.inp2Icd.value==this.inp3Icd.value&&e.push(["M1010","Inpatient diagnosis 'c' cannot be the same as inpatient diagnosis 'b'."]),this.inp3Icd.value==null&&this.inp4Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'c' is blank then inpatient diagnosis 'd' must also be blank."]):this.inp4Icd.value!=null&&this.inp3Icd.value==this.inp4Icd.value&&e.push(["M1010","Inpatient diagnosis 'd' cannot be the same as inpatient diagnosis 'c'."]),this.inp4Icd.value==null&&this.inp5Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'd' is blank then inpatient diagnosis 'e' must also be blank."]):this.inp5Icd.value!=null&&this.inp4Icd.value==this.inp5Icd.value&&e.push(["M1010","Inpatient diagnosis 'e' cannot be the same as inpatient diagnosis 'd'."]),this.inp5Icd.value==null&&this.inp6Icd.value!=null?e.push(["M1010","If inpatient diagnosis 'e' is blank then inpatient diagnosis 'f' must also be blank."]):this.inp6Icd.value!=null&&this.inp5Icd.value==this.inp6Icd.value&&e.push(["M1010","Inpatient diagnosis 'f' cannot be the same as inpatient diagnosis 'e'."]),e},serverValidationRequiredFields:function(){return["m1010_14_day_inp1_icd","m1010_14_day_inp2_icd","m1010_14_day_inp3_icd","m1010_14_day_inp4_icd","m1010_14_day_inp5_icd","m1010_14_day_inp6_icd"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f"]},changeOnNaOrUk:function(e){Ext.each(e,function(e){this.down("[name="+e+"]").setValue(null)},this)},afterRender:function(){this.callParent();var e=this.query("netzkeremotecombo");Ext.each(e,function(e,t){},this),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.inp1Icd=this.mainScope.down("[name=m1010_14_day_inp1_icd]"),this.inp2Icd=this.mainScope.down("[name=m1010_14_day_inp2_icd]"),this.inp3Icd=this.mainScope.down("[name=m1010_14_day_inp3_icd]"),this.inp4Icd=this.mainScope.down("[name=m1010_14_day_inp4_icd]"),this.inp5Icd=this.mainScope.down("[name=m1010_14_day_inp5_icd]"),this.inp6Icd=this.mainScope.down("[name=m1010_14_day_inp6_icd]"),this.m1000_dc_ltc_14_da=this.mainScope.down("[name=m1000_dc_ltc_14_da]"),this.m1000_dc_snf_14_da=this.mainScope.down("[name=m1000_dc_snf_14_da]"),this.m1000_dc_ipps_14_da=this.mainScope.down("[name=m1000_dc_ipps_14_da]"),this.m1000_dc_ltch_14_da=this.mainScope.down("[name=m1000_dc_ltch_14_da]"),this.m1000_dc_irf_14_da=this.mainScope.down("[name=m1000_dc_irf_14_da]"),this.m1000_dc_psych_14_da=this.mainScope.down("[name=m1000_dc_psych_14_da]"),this.m1000_dc_oth_14_da=this.mainScope.down("[name=m1000_dc_oth_14_da]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0]}}),Ext.define("Ext.panel.DiagnosesRegimenChangeM1016M1018",{extend:"Ext.panel.Panel",alias:"widget.diagnosesRegimenChangeM1016M1018",border:!1,margin:5,layout:{type:"table",columns:2},items:[{border:!1,flex:1,items:[{xtype:"label",columns:1,text:"(M1016) Diagnoses Requiring Medical or Treatment Regimen Change Within Past 14 Days: List the patient's Medical Diagnoses and ICD-9-CM codes at the level of highest specificity for those conditions requiring changed medical or treatment regimen within the past 14 days.(no surgical, E codes, or V codes):"},{xtype:"netzkeremotecombo",fieldLabel:"a",name:"m1016_chgreg_icd1",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"b",name:"m1016_chgreg_icd2",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"c",name:"m1016_chgreg_icd3",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"d",name:"m1016_chgreg_icd4",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"e",name:"m1016_chgreg_icd5",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"f",name:"m1016_chgreg_icd6",labelAlign:"right"},{xtype:"checkboxfield",fieldLabel:"NA",name:"m1016_chgreg_icd_na",labelAlign:"right",boxLabel:"NA - Not applicable (no medical or treatment regimen changes within the past 14 days)",inputValue:"1"}]},{xtype:"checkboxgroup",fieldLabel:"(M1018) Conditions Prior to Medical or Treatment Regimen Change or Inpatient Stay Within Past 14 Days: If this patient experienced an inpatient facility discharge or change in medical or treatment regimen within the past 14 days, indicate any conditions that existed prior to the inpatient stay or change in medical or treatment regimen. (Mark all that apply.)",labelAlign:"top",columns:1,flex:1,margin:5,items:[{xtype:"checkboxfield",name:"m1018_prior_ur_incon",boxLabel:"1 - Urinary incontinence",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_cath",boxLabel:"2 - Indwelling/suprapubic catheter",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_intract_pain",boxLabel:"3 - Intractable pain",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_impr_decsn",boxLabel:"4 - Impaired decision-making",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_disruptive",boxLabel:"5 - Disruptive or socially inappropriate behavior",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_mem_loss",boxLabel:"6-Memory loss to the extent that supervision required",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_none",boxLabel:"7 - None of the above",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_nochg_14d",boxLabel:"NA - No inpatient facility discharge and no change in medical or treatment regimen in past 14 days ",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_unknown",boxLabel:"UK - Unknown",inputValue:"1"}]}],serverValidationRequiredFields:function(){return["m1016_chgreg_icd1","m1016_chgreg_icd2","m1016_chgreg_icd3","m1016_chgreg_icd4","m1016_chgreg_icd5","m1016_chgreg_icd6"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f"]},selectOtherValues:function(){Ext.each(this.m1018Fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&(this.noneOfAbove.setValue(!1),this.notAvilable.setValue(!1),this.unknown.setValue(!1))},this)},this)},selectUnknown:function(){this.unknown.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.noneOfAbove.setValue(!1),this.notAvilable.setValue(!1))},this)},selectNotAvailable:function(){this.notAvilable.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.noneOfAbove.setValue(!1),this.unknown.setValue(!1))},this)},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.notAvilable.setValue(!1),this.unknown.setValue(!1))},this)},selectCombo:function(){Ext.each(this.m1016Fields,function(e){this.down("[name="+e+"]").on("select",function(e){e.value!=null&&this.chgregIcdNa.setValue(!1)},this)},this)},selectChgregIcdNa:function(){this.chgregIcdNa.on("change",function(e){e.value&&Ext.each(this.m1016Fields,function(e){this.query("[name="+e+"]")[0].setValue(null)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1016ChgregIcd1=this.mainScope.down("[name=m1016_chgreg_icd1]"),this.m1016ChgregIcd2=this.mainScope.down("[name=m1016_chgreg_icd2]"),this.m1016ChgregIcd3=this.mainScope.down("[name=m1016_chgreg_icd3]"),this.m1016ChgregIcd4=this.mainScope.down("[name=m1016_chgreg_icd4]"),this.m1016ChgregIcd5=this.mainScope.down("[name=m1016_chgreg_icd5]"),this.m1016ChgregIcd6=this.mainScope.down("[name=m1016_chgreg_icd6]"),this.m1016Fields=["m1016_chgreg_icd1","m1016_chgreg_icd2","m1016_chgreg_icd3","m1016_chgreg_icd4","m1016_chgreg_icd5","m1016_chgreg_icd6"],this.m1018Fields=["m1018_prior_ur_incon","m1018_prior_cath","m1018_prior_intract_pain","m1018_prior_impr_decsn","m1018_prior_disruptive","m1018_prior_mem_loss"],this.chgregIcdNa=this.mainScope.down("checkboxfield[name=m1016_chgreg_icd_na]"),this.noneOfAbove=this.mainScope.down("checkbox[name=m1018_prior_none]"),this.notAvilable=this.mainScope.down("checkbox[name=m1018_prior_nochg_14d]"),this.unknown=this.mainScope.down("checkbox[name=m1018_prior_unknown]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.selectChgregIcdNa(),this.selectCombo(),this.selectNoneOfAbove(),this.selectNotAvailable(),this.selectUnknown(),this.selectOtherValues()},onValidate:function(e){var t=new Array,n=new Date("October 1, 2015"),r=new Date("October 5, 2015"),i=this.episodeDate.getRawValue(),s=new Date(i.split(" ")[0]),o=s>r,u=!1;!o&&this.infoCompletedDt.value<n&&(u=!0),m1016ChgregIcdNa=this.mainScope
.down("[name=m1016_chgreg_icd_na]").value,m1016ChgregIcd1=this.mainScope.down("[name=m1016_chgreg_icd1]").value,m1016ChgregIcd2=this.mainScope.down("[name=m1016_chgreg_icd2]").value,m1016ChgregIcd3=this.mainScope.down("[name=m1016_chgreg_icd3]").value,m1016ChgregIcd4=this.mainScope.down("[name=m1016_chgreg_icd4]").value,m1016ChgregIcd5=this.mainScope.down("[name=m1016_chgreg_icd5]").value,m1016ChgregIcd6=this.mainScope.down("[name=m1016_chgreg_icd6]").value,m1018PriorIncon=this.mainScope.down("[name=m1018_prior_ur_incon]").value,m1018PriorCath=this.mainScope.down("[name=m1018_prior_cath]").value,m1018PriorPain=this.mainScope.down("[name=m1018_prior_intract_pain]").value,m1018PriorDecsn=this.mainScope.down("[name=m1018_prior_impr_decsn]").value,m1018PriorDisruptive=this.mainScope.down("[name=m1018_prior_disruptive]").value,m1018PriorLoss=this.mainScope.down("[name=m1018_prior_mem_loss]").value,m1018PriorNone=this.mainScope.down("[name=m1018_prior_none]").value,m1018PriorNochg=this.mainScope.down("[name=m1018_prior_nochg_14d]").value,m1018PriorUnknown=this.mainScope.down("[name=m1018_prior_unknown]").value,m1000InPatientFacility=this.mainScope.down("[name=m1000_dc_none_14_da]").value,m1016ChgregIcdNa==0&&m1016ChgregIcd1==null&&m1016ChgregIcd2==null&&m1016ChgregIcd3==null&&m1016ChgregIcd4==null&&m1016ChgregIcd5==null&&m1016ChgregIcd6==null&&u&&t.push(["M1016","Enter at least one diagnosis requiring medical or treatment regimen change within the past 14 days OR select 'NA'."]),m1016ChgregIcd2&&(diag_b=[this.m1016ChgregIcd1],Ext.each(diag_b,function(e){m1016ChgregIcd2==e.value&&t.push(["M1016","The  diagnosis code 'b' cannot be the same as the "+this.getMessage(e.name)])},this)),m1016ChgregIcd3&&(diag_c=[this.m1016ChgregIcd1,this.m1016ChgregIcd2],Ext.each(diag_c,function(e){m1016ChgregIcd3==e.value&&t.push(["M1016","The  diagnosis code 'c' cannot be the same as the "+this.getMessage(e.name)])},this)),m1016ChgregIcd4&&(diag_d=[this.m1016ChgregIcd1,this.m1016ChgregIcd2,this.m1016ChgregIcd3],Ext.each(diag_d,function(e){m1016ChgregIcd4==e.value&&t.push(["M1016","The  diagnosis code 'd' cannot be the same as the "+this.getMessage(e.name)])},this)),m1016ChgregIcd5&&(diag_e=[this.m1016ChgregIcd1,this.m1016ChgregIcd2,this.m1016ChgregIcd3,this.m1016ChgregIcd4],Ext.each(diag_e,function(e){m1016ChgregIcd5==e.value&&t.push(["M1016","The  diagnosis code 'e' cannot be the same as the "+this.getMessage(e.name)])},this)),m1016ChgregIcd6&&(diag_f=[this.m1016ChgregIcd1,this.m1016ChgregIcd2,this.m1016ChgregIcd3,this.m1016ChgregIcd4,this.m1016ChgregIcd5],Ext.each(diag_f,function(e){m1016ChgregIcd6==e.value&&t.push(["M1016","The  diagnosis code 'f' cannot be the same as the "+this.getMessage(e.name)])},this)),m1018PriorIncon==0&&m1018PriorCath==0&&m1018PriorPain==0&&m1018PriorDecsn==0&&m1018PriorDisruptive==0&&m1018PriorLoss==0&&m1018PriorNone==0&&m1018PriorNochg==0&&m1018PriorUnknown==0&&u&&t.push(["M1018","Select at least one conditions that existed prior to the medical or treatment regimen change OR select 'NA' or 'Unknown'."]),m1016ChgregIcdNa==1&&m1000InPatientFacility==1&&m1018PriorNochg==0&&u&&t.push(["M1018","If M1000 is 'NA' and M1016 is 'NA' then M1018 must be 'NA'."]),m1000Fields=["m1000_dc_ltc_14_da","m1000_dc_snf_14_da","m1000_dc_ipps_14_da","m1000_dc_ltch_14_da","m1000_dc_irf_14_da","m1000_dc_psych_14_da","m1000_dc_oth_14_da"];var a=!1;return Ext.each(m1000Fields,function(e,t){this.mainScope.down("[name="+e+"]").value&&(a=!0)},this),(a||m1016ChgregIcdNa==0)&&m1018PriorNochg==1&&u&&t.push(["M1018","M1000 is 'NA' OR M1016 is not 'NA' then M1018 can't be 'NA'."]),t},getMessage:function(e){return icd_codes={},icd_codes.m1016_chgreg_icd1=" diagnosis code 'a'.",icd_codes.m1016_chgreg_icd2=" diagnosis code 'b'.",icd_codes.m1016_chgreg_icd3=" diagnosis code 'c'.",icd_codes.m1016_chgreg_icd4=" diagnosis code 'd'.",icd_codes.m1016_chgreg_icd5=" diagnosis code 'e'.",icd_codes.m1016_chgreg_icd6=" diagnosis code 'f'.",icd_codes[e]}}),Ext.define("Ext.panel.DiagnosesRegimenChangeM1017M1018",{extend:"Ext.panel.Panel",alias:"widget.diagnosesRegimenChangeM1017M1018",border:!1,margin:5,itemID:"diagnosis",layout:{type:"table",columns:2},items:[{border:!1,flex:1,items:[{xtype:"label",columns:1,text:"(M1017) Diagnoses Requiring Medical or Treatment Regimen Change Within Past 14 Days: List the patient's Medical Diagnoses and ICD-10-CM codes at the level of highest specificity for those conditions requiring changed medical or treatment regimen within the past 14 days (no V, W, X, Y, or Z codes or surgical codes):"},{xtype:"netzkeremotecombo",fieldLabel:"a",name:"m1017_chgreg_icd1",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"b",name:"m1017_chgreg_icd2",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"c",name:"m1017_chgreg_icd3",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"d",name:"m1017_chgreg_icd4",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"e",name:"m1017_chgreg_icd5",labelAlign:"right"},{xtype:"netzkeremotecombo",fieldLabel:"f",name:"m1017_chgreg_icd6",labelAlign:"right"},{xtype:"checkboxfield",fieldLabel:"NA",name:"m1017_chgreg_icd_na",labelAlign:"right",boxLabel:"NA - Not applicable (no medical or treatment regimen changes within the past 14 days)",inputValue:"1"}]},{xtype:"checkboxgroup",fieldLabel:"(M1018) Conditions Prior to Medical or Treatment Regimen Change or Inpatient Stay Within Past 14 Days: If this patient experienced an inpatient facility discharge or change in medical or treatment regimen within the past 14 days, indicate any conditions that existed prior to the inpatient stay or change in medical or treatment regimen. (Mark all that apply.)",labelAlign:"top",columns:1,flex:1,margin:5,items:[{xtype:"checkboxfield",name:"m1018_prior_ur_incon_icd10",boxLabel:"1 - Urinary incontinence",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_cath_icd10",boxLabel:"2 - Indwelling/suprapubic catheter",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_intract_pain_icd10",boxLabel:"3 - Intractable pain",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_impr_decsn_icd10",boxLabel:"4 - Impaired decision-making",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_disruptive_icd10",boxLabel:"5 - Disruptive or socially inappropriate behavior",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_mem_loss_icd10",boxLabel:"6-Memory loss to the extent that supervision required",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_none_icd10",boxLabel:"7 - None of the above",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_nochg_14d_icd10",boxLabel:"NA - No inpatient facility discharge and no change in medical or treatment regimen in past 14 days ",inputValue:"1"},{xtype:"checkboxfield",name:"m1018_prior_unknown_icd10",boxLabel:"UK - Unknown",inputValue:"1"}]}],serverValidationRequiredFields:function(){return["m1017_chgreg_icd1","m1017_chgreg_icd2","m1017_chgreg_icd3","m1017_chgreg_icd4","m1017_chgreg_icd5","m1017_chgreg_icd6"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f"]},selectOtherValues:function(){Ext.each(this.m1018Fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&(this.noneOfAbove.setValue(!1),this.notAvilable.setValue(!1),this.unknown.setValue(!1))},this)},this)},selectUnknown:function(){this.unknown.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.noneOfAbove.setValue(!1),this.notAvilable.setValue(!1))},this)},selectNotAvailable:function(){this.notAvilable.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.noneOfAbove.setValue(!1),this.unknown.setValue(!1))},this)},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&(Ext.each(this.m1018Fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.notAvilable.setValue(!1),this.unknown.setValue(!1))},this)},selectCombo:function(){Ext.each(this.m1017Fields,function(e){this.down("[name="+e+"]").on("select",function(e){e.value!=null&&this.chgregIcdNa.setValue(!1)},this)},this)},selectChgregIcdNa:function(){this.chgregIcdNa.on("change",function(e){e.value&&Ext.each(this.m1017Fields,function(e){this.query("[name="+e+"]")[0].setValue(null)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1017ChgregIcdNa=this.mainScope.down("[name=m1017_chgreg_icd_na]"),this.m1017ChgregIcd1=this.mainScope.down("[name=m1017_chgreg_icd1]"),this.m1017ChgregIcd2=this.mainScope.down("[name=m1017_chgreg_icd2]"),this.m1017ChgregIcd3=this.mainScope.down("[name=m1017_chgreg_icd3]"),this.m1017ChgregIcd4=this.mainScope.down("[name=m1017_chgreg_icd4]"),this.m1017ChgregIcd5=this.mainScope.down("[name=m1017_chgreg_icd5]"),this.m1017ChgregIcd6=this.mainScope.down("[name=m1017_chgreg_icd6]"),this.m1017Fields=["m1017_chgreg_icd1","m1017_chgreg_icd2","m1017_chgreg_icd3","m1017_chgreg_icd4","m1017_chgreg_icd5","m1017_chgreg_icd6"],this.m1018Fields=["m1018_prior_ur_incon_icd10","m1018_prior_cath_icd10","m1018_prior_intract_pain_icd10","m1018_prior_impr_decsn_icd10","m1018_prior_disruptive_icd10","m1018_prior_mem_loss_icd10"],this.chgregIcdNa=this.mainScope.down("checkboxfield[name=m1017_chgreg_icd_na]"),this.noneOfAbove=this.mainScope.down("checkbox[name=m1018_prior_none_icd10]"),this.notAvilable=this.mainScope.down("checkbox[name=m1018_prior_nochg_14d_icd10]"),this.unknown=this.mainScope.down("checkbox[name=m1018_prior_unknown_icd10]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.selectChgregIcdNa(),this.selectCombo(),this.selectNoneOfAbove(),this.selectNotAvailable(),this.selectUnknown(),this.selectOtherValues()},onValidate:function(e){var t=new Array,n=new Date("October 1, 2015"),r=new Date("October 5, 2015"),i=this.episodeDate.getRawValue(),s=new Date(i.split(" ")[0]),o=s>r,u=!1;if(o||this.infoCompletedDt.value>=n)u=!0;m1017ChgregIcdNa=this.mainScope.down("[name=m1017_chgreg_icd_na]").value,m1017ChgregIcd1=this.mainScope.down("[name=m1017_chgreg_icd1]").value,m1017ChgregIcd2=this.mainScope.down("[name=m1017_chgreg_icd2]").value,m1017ChgregIcd3=this.mainScope.down("[name=m1017_chgreg_icd3]").value,m1017ChgregIcd4=this.mainScope.down("[name=m1017_chgreg_icd4]").value,m1017ChgregIcd5=this.mainScope.down("[name=m1017_chgreg_icd5]").value,m1017ChgregIcd6=this.mainScope.down("[name=m1017_chgreg_icd6]").value,m1018PriorIncon=this.mainScope.down("[name=m1018_prior_ur_incon_icd10]").value,m1018PriorCath=this.mainScope.down("[name=m1018_prior_cath_icd10]").value,m1018PriorPain=this.mainScope.down("[name=m1018_prior_intract_pain_icd10]").value,m1018PriorDecsn=this.mainScope.down("[name=m1018_prior_impr_decsn_icd10]").value,m1018PriorDisruptive=this.mainScope.down("[name=m1018_prior_disruptive_icd10]").value,m1018PriorLoss=this.mainScope.down("[name=m1018_prior_mem_loss_icd10]").value,m1018PriorNone=this.mainScope.down("[name=m1018_prior_none_icd10]").value,m1018PriorNochg=this.mainScope.down("[name=m1018_prior_nochg_14d_icd10]").value,m1018PriorUnknown=this.mainScope.down("[name=m1018_prior_unknown_icd10]").value,m1000InPatientFacility=this.mainScope.down("[name=m1000_dc_none_14_da]").value,m1017ChgregIcdNa==0&&u&&m1017ChgregIcd1==null&&m1017ChgregIcd2==null&&m1017ChgregIcd3==null&&m1017ChgregIcd4==null&&m1017ChgregIcd5==null&&m1017ChgregIcd6==null&&t.push(["M1017","Enter at least one diagnosis requiring medical or treatment regimen change within the past 14 days OR select 'NA'."]),m1017ChgregIcd2&&(diagno_b=[this.m1017ChgregIcd1],Ext.each(diagno_b,function(e){m1017ChgregIcd2==e.value&&t.push(["M1017","The  diagnosis code 'b' cannot be the same as the "+this.getMessage(e.name)])},this)),m1017ChgregIcd3&&(diagno_c=[this.m1017ChgregIcd1,this.m1017ChgregIcd2],Ext.each(diagno_c,function(e){m1017ChgregIcd3==e.value&&t.push(["M1017","The  diagnosis code 'c' cannot be the same as the "+this.getMessage(e.name)])},this)),m1017ChgregIcd4&&(diagno_d=[this.m1017ChgregIcd1,this.m1017ChgregIcd2,this.m1017ChgregIcd3],Ext.each(diagno_d,function(e){m1017ChgregIcd4==e.value&&t.push(["M1017","The  diagnosis code 'd' cannot be the same as the "+this.getMessage(e.name)])},this)),m1017ChgregIcd5&&(diagno_e=[this.m1017ChgregIcd1,this.m1017ChgregIcd2,this.m1017ChgregIcd3,this.m1017ChgregIcd4],Ext.each(diagno_e,function(e){m1017ChgregIcd5==e.value&&t.push(["M1017","The  diagnosis code 'e' cannot be the same as the "+this.getMessage(e.name)])},this)),m1017ChgregIcd6&&(diagno_f=[this.m1017ChgregIcd1,this.m1017ChgregIcd2,this.m1017ChgregIcd3,this.m1017ChgregIcd4,this.m1017ChgregIcd5],Ext.each(diagno_f,function(e){m1017ChgregIcd6==e.value&&t.push(["M1017","The  diagnosis code 'f' cannot be the same as the "+this.getMessage(e.name)])},this)),m1018PriorIncon==0&&m1018PriorCath==0&&m1018PriorPain==0&&m1018PriorDecsn==0&&m1018PriorDisruptive==0&&m1018PriorLoss==0&&m1018PriorNone==0&&m1018PriorNochg==0&&m1018PriorUnknown==0&&u&&t.push(["M1018","Select at least one conditions that existed prior to the medical or treatment regimen change OR select 'NA' or 'Unknown'."]),m1017ChgregIcdNa==1&&m1000InPatientFacility==1&&m1018PriorNochg==0&&u&&t.push(["M1018","If M1000 is 'NA' and M1017 is 'NA' then M1018 must be 'NA'."]),m1000Fields=["m1000_dc_ltc_14_da","m1000_dc_snf_14_da","m1000_dc_ipps_14_da","m1000_dc_ltch_14_da","m1000_dc_irf_14_da","m1000_dc_psych_14_da","m1000_dc_oth_14_da"];var a=!1;return Ext.each(m1000Fields,function(e,t){this.mainScope.down("[name="+e+"]").value&&(a=!0)},this),(a||m1017ChgregIcdNa==0)&&m1018PriorNochg==1&&u&&t.push(["M1018","M1000 is 'NA' OR M1017 is not 'NA' then M1018 can't be 'NA'."]),t},getMessage:function(e){return icd_codes={},icd_codes.m1017_chgreg_icd1=" diagnosis code 'a'.",icd_codes.m1017_chgreg_icd2=" diagnosis code 'b'.",icd_codes.m1017_chgreg_icd3=" diagnosis code 'c'.",icd_codes.m1017_chgreg_icd4=" diagnosis code 'd'.",icd_codes.m1017_chgreg_icd5=" diagnosis code 'e'.",icd_codes.m1017_chgreg_icd6=" diagnosis code 'f'.",icd_codes[e]}}),Ext.define("Ext.panel.PatientHistoryAndDiagnosis",{extend:"Ext.panel.Panel",alias:"widget.patientHistoryAndDiagnosis",border:!1,margin:5,items:[{xtype:"panel",border:0,layout:"hbox",margin:"5px",items:[{xtype:"panel",border:0,margin:"5px",layout:{type:"vbox"},items:[{xtype:"label",text:"PHYSICIAN:"},{xtype:"datefield",margin:"10 0 0 20",fieldLabel:"Date last contacted",name:"date_last_contacted",labelWidth:150,isHeader:!1},{xtype:"datefield",margin:"10 0 0 20",labelWidth:150,name:"date_last_visited",fieldLabel:"Date last visited",isHeader:!1}]},{xtype:"textareafield",margin:"3 3 3 5",padding:" ",fieldLabel:"PRIMARY REASON FOR HOME HEALTH ",name:"primary_reason_for_home_health",labelAlign:"top",cols:50,isHeader:!1}]},{xtype:"checkboxgroup",fieldLabel:"HOMEBOUND REASON",labelWidth:160,labelAlign:"top",height:150,columns:2,items:[{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Needs assistance for all activities",inputValue:"1"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Residual weakness",inputValue:"2"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Requires assistance to ambulate",inputValue:"3"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Confusion, unable to go out of home alone",inputValue:"4",width:280},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Unable to safely leave home unassisted",inputValue:"5",width:280},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Severe SOB, SOB upon exertion",inputValue:"6"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Dependent upon adaptive device(s)",inputValue:"7"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Medical restrictions",inputValue:"8"},{xtype:"checkboxfield",name:"homebound_reason",boxLabel:"Other(specify)",inputValue:"9"},{xtype:"textfield",xmargin:"25 5 5 5",name:"homebound_reason_other"}]},{xtype:"panel",margin:"3px",layout:{type:"vbox"},border:0,items:[{xtype:"label",text:"PERTINENT HISTORY AND/OR PREVIOUS OUTCOMES: (note: dates of onset, exacerbation when known)"},{xtype:"label",text:"(Reference M1000, M1005, M1010 and M1012)"},{xtype:"checkboxgroup",columns:5,fieldLabel:"",width:800,items:[{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Hypertension",inputValue:"1",width:120},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Cardiac",inputValue:"2",width:150},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Diabetes",inputValue:"3",width:120},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Cancer",inputValue:"4",width:150},{xtype:"textfield",name:"cancer_site",fieldLabel:"Site",isHeader:!1,labelWidth:20,width:170},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Respiratory",inputValue:"5"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Osteoporosis",inputValue:"6"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Fractures",inputValue:"7"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Surgeries",inputValue:"8"},{xtype:"textfield",name:"surgeries_type",margin:"3 0 0 25"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Infection",inputValue:"9"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Immunosuppressed",inputValue:"10"},{xtype:"checkboxfield",name:"pertinent_history_and_outcomes",boxLabel:"Open Wound",inputValue:"11"}]},{xtype:"checkboxfield",margin:"0 0 0 3px",name:"pertinent_history_and_outcomes",boxLabel:"Other",inputValue:"12"},{xtype:"textareafield",margin:"0 0 0 3px",name:"pertinent_history_and_outcomes_other",fieldLabel:"",cols:50}]},{xtype:"panel",border:0,margin:"5px",layout:{type:"vbox"},items:[{xtype:"label",text:"IMMUNIZATIONS"},{xtype:"checkboxgroup",margin:"0 0 0 40",layout:"vbox",labelWidth:300,fieldLabel:"Check if current: Within the past 12 months",isHeader:!1,items:[{xtype:"checkboxfield",name:"influenza",boxLabel:"Influenza",inputValue:"1"}]},{xtype:"checkboxgroup",margin:"0 0 0 40",layout:"hbox",labelWidth:250,fieldLabel:"According to immunization guidelines",isHeader:!1,items:[{xtype:"checkboxfield",name:"immunization_guidelines",boxLabel:"Pneumonia",inputValue:"1",width:100},{xtype:"checkboxfield",name:"immunization_guidelines",boxLabel:"Tetanus",inputValue:"2",width:100},{xtype:"checkboxfield",name:"immunization_guidelines",boxLabel:"Other",inputValue:"3",width:100},{xtype:"textfield",name:"immunization_guidelines",fieldLabel:"",xwidth:150}]},{xtype:"textfield",margin:"5 0 0 40",name:"needs",fieldLabel:"Needs",labelWidth:40,isHeader:!1}]},{xtype:"panel",border:0,margin:"5px",layout:{type:"hbox"},items:[{xtype:"panel",border:0,margin:"5px",layout:{type:"vbox"},items:[{xtype:"radiogroup",xmargin:"5px",layout:{align:"stretch",type:"hbox"},width:400,height:20,labelWidth:180,fieldLabel:"PRIOR HOSPITALIZATIONS",items:[{xtype:"radiofield",name:"hospitalizations",boxLabel:"No",inputValue:"1",width:60},{xtype:"radiofield",name:"hospitalizations",boxLabel:"Yes",inputValue:"2",width:60}]},{xtype:"textfield",margin:"5px",name:"number_of_times",fieldLabel:"Number of times",labelWidth:150,isHeader:!1}]},{xtype:"textareafield",name:"reasons",fieldLabel:"Reason(s)/Date(s)",labelAlign:"top",margin:"3px",isHeader:!1,cols:50}]},{xtype:"radiogroup",fieldLabel:"PROGNOSIS",labelWidth:160,labelAlign:"top",width:500,layout:{type:"hbox"},defaults:{width:100},items:[{xtype:"radiofield",name:"prognosis",boxLabel:"1-Poor",inputValue:"1"},{xtype:"radiofield",name:"prognosis",boxLabel:"2-Guarded",inputValue:"2"},{xtype:"radiofield",name:"prognosis",boxLabel:"3-Fair",inputValue:"3"},{xtype:"radiofield",name:"prognosis",boxLabel:"4-Good",inputValue:"4"},{xtype:"radiofield",name:"prognosis",boxLabel:"5-Excellent",inputValue:"5"}]}]}),Ext.define("Ext.panel.diagnosissymptompayment",{extend:"Ext.panel.Panel",alias:"widget.diagnosissymptompayment",border:!1,margin:5,items:[{xtype:"displayfield",margin:5,value:"<b>(M1020/1022/1024)Diagnoses, Symptom Control, and Payment Diagnoses:</b> List each diagnosis for which the patient <br/>is receiving home care (Column 1) and enter its ICD-9-CM code at the level of highest specificity (no surgical/<br/>procedure codes)  (Column 2). Diagnoses are listed in the order that best reflect the seriousness of each condition  </br>and support the disciplines and services provided. Rate the degree of symptom control for each condition (condition2). </br>Choose one value that represents the degree of symptom control appropriate<br/>for each diagnosis: V codes (for M1020 or M1022) or E codes (for M1022 only) may be used. ICD-9-CM sequencing<br/>requirements must be followed if multiple coding is indicated for any diagnoses. If a V code is reported in place<br/>of a case mix diagnosis, then optional item M1024 Payment Diagnoses (Columns 3 and 4) may be completed. A case mix<br/>diagnosis is a diagnosis that determines the Medicare PPS case mix group. Do not assign symptom control ratings for<br/>V or E codes.<br/><br /><b>Code each row according to the following directions for each column:</b><br /><br />Column 1: Enter the description of the diagnosis.<br/><br /><br />Column 2: Enter the ICD-9-CM code for the diagnosis described in Column 1; Rate the degree of the symptom control for<br/><div style='margin-left: 10px'>the condition listed in Column 1 using the following scale:</div><div style='margin-left: 10px'>&nbsp;&nbsp;0 - Asymptomatic, no treatment needed at this time</div><div style='margin-left: 10px'>&nbsp;&nbsp;1 - Symptoms well controlled with current therapy</div><div style='margin-left: 10px'>&nbsp;&nbsp;2 - Symptoms controlled with difficulty, affecting daily functioning: patient needs ongoing monitoring</div><div style='margin-left: 10px'>&nbsp;&nbsp;3 - Symptoms poorly controlled; patient needs frequent adjustment in treatment and dose monitoring</div><div style='margin-left: 10px'>&nbsp;&nbsp;4 - Symptoms poorly controlled; history of re-hospitalizations</div><br/><br/>Note that in Column 2 the severity rating for symptom control of each diagnosis should not be used to determine the sequencing<br/>of the diagnoses listed in Column 1. These are separate items and sequencing may not coincide. Sequencing of diagnoses should<br/>reflect the seriousness of each condition and support the disciplines and services provided.<br/><br/>Column 3: (OPTIONAL) If a V code is assigned to any row in Column 2, in place of a case mix diagnosis, it may be necessary<br/><div style='margin-left: 10px'>to complete optional item M1024 Payment Diagnoses (Columns 3 and 4). See OASIS manual and Coding Guidance.</div><br/>Column 4: (OPTIONAL) If a V code in Column 2 is reported in place of a case mix diagnosis that requires multiple diagnosis<br/><div style='margin-left: 10px'>codes under ICD-9-CM coding guidelines, enter the diagnosis descriptions and the -ICD-9-CM codes in the same row in</div><div style='margin-left: 10px'>Columns 3 and 4. For example, if the case mix diagnosis is a manifestation code, record the diagnosis description and ICD-9-CM</div><div style='margin-left: 10px'>code for the underlying condition in Column 3 of that row and the diagnosis description and ICD-9-CM code for the</div>  <div style='margin-left: 10px'>manifestation in Column 4 of that row. Otherwise, leave Column 4 blank in that row.</div>"}]}),Ext.define("Ext.panel.diagnosissymptompaymenticd10",{extend:"Ext.panel.Panel",alias:"widget.diagnosissymptompaymenticd10",border:!1,margin:5,items:[{xtype:"displayfield",margin:5,value:"<b>(M1021/1023/1025) Diagnoses, Symptom Control and Optional Diagnoses:</b> List each diagnosis for which the <br/>patient is receiving home care in Column 1, and enter its ICD-10-CM code at the level of highest specificity in Column<br/>2 (diagnosis codes only - no surgical or procedure codes allowed). Diagnoses are listed in the order that best reflects<br/>the seriousness of each condition and supports the disciplines and services provided. Rate the degree of symptom</br>control for each condition in Column 2. ICD-10-CM sequencing requirements must be followed if multiple coding is </br>indicated for any diagnoses. If a Z-code is reported in Column 2 in place of a diagnosis that is no longer active (a </br>resolved condition), then optional item M1025 (Optional Diagnoses - Columns 3 and 4) may be completed. Diagnoses </br>reported in M1025 will not impact payment.<br/><br/><b>Code each row according to the following directions for each column.</b> Review the OASIS Guidance Manual for </br>additional directions on how to complete M1021, M1023 and M1025. <br /><br />Column 1:&nbsp;&nbsp;&nbsp;&nbsp;Enter the description of the diagnosis. Sequencing of diagnoses should reflect the seriousness of <br/><div style='margin-left: 75px'>each condition and support the disciplines and services provided.</div><br/>Column 2:&nbsp;&nbsp;&nbsp;&nbsp;Enter the ICD-10-CM code for the condition described in Column 1 - no surgical or procedure codes<br><div style='margin-left: 75px'>allowed. Codes must be entered at the level of highest specificity and ICD-10-CM coding rules and</div><div style='margin-left: 75px'>sequencing requirements must be followed. Note that external cause codes (ICD-10-CM codes beginning</div><div style='margin-left: 75px'>with V, W, X, or Y) may not be reported in M1021 (Primary Diagnosis) but may be reported in M1023</div><div style='margin-left: 75px'>(Secondary Diagnoses). Also note that when a Z-code is reported in Column 2, the code for the</div><div style='margin-left: 75px'>underlying condition can often be entered in Column 2, as long as it is an active on-going condition</div><div style='margin-left: 75px'>impacting home health care.</div><br /><div style='margin-left: 75px'>Rate the degree of symptom control for the condition listed in Column 1. Choose one value that </div><div style='margin-left: 75px'>represents the degree of symptom control appropriate for each diagnosis using the following scale:</div><div style='margin-left: 100px'>0 - Asymptomatic, no treatment needed at this time</div><div style='margin-left: 100px'>1 - Symptoms well controlled with current therapy</div><div style='margin-left: 100px'>2 - Symptoms controlled with difficulty, affecting daily functioning: patient needs ongoing monitoring</div><div style='margin-left: 100px'>3 - Symptoms poorly controlled; patient needs frequent adjustment in treatment and dose monitoring</div><div style='margin-left: 100px'>4 - Symptoms poorly controlled; history of re-hospitalizations</div><br/><div style='margin-left: 75px'>Note that the rating for symptom control in Column 2 should not be used to determine the sequencing</div><div style='margin-left: 75px'>of the diagnoses listed in Column 1. These are separate items and sequencing may not coincide.</div><br/><br/><br/>Column 3:&nbsp;&nbsp;&nbsp;&nbsp;(OPTIONAL) There is no requirement that HHAs enter a diagnosis code in M1025 (Columns 3 and 4).<br/><div style='margin-left: 75px'>Diagnoses reported in M1025 will not impact payment.</div><br/><div style='margin-left: 75px'>Agencies may choose to report an underlying condition in M1025 (Columns 3 and 4) when:</div><div style='margin-left: 75px'><ul><li>&nbsp;&nbsp;a Z-code is reported in Column 2 AND</li><li>&nbsp;&nbsp;the underlying condition for the Z-code in Column 2 is a resolved condition . An example of a<br/>&nbsp;&nbsp;resolved condition is uterine cancer that is no longer being treated following a hysterectomy.</li></ul></div>Column 4:&nbsp;&nbsp;&nbsp;&nbsp;(OPTIONAL) If a Z-code is reported in M1021/M1023 (Column 2) and the agency chooses to report a <br/><div style='margin-left: 75px'>resolved underlying condition that requires multiple diagnosis codes under ICD-10-CM coding </div><div style='margin-left: 75px'>guidelines, enter the diagnosis descriptions and the ICD-10-CM codes in the same row in Columns 3</div><div style='margin-left: 75px'>and 4. For example, if the resolved condition is a manifestation code, record the diagnosis description</div><div style='margin-left: 75px'>and ICD-10-CM code for the underlying condition in Column 3 of that row and the diagnosis description</div><div style='margin-left: 75px'>and ICD-10-CM code for the manifestation in Column 4 of that row. Otherwise, leave Column 4 blank</div><div style='margin-left: 75px'>in that row.</div>"}]}),Ext.define("Ext.panel.PrimaryPaymentM1020M1024",{extend:"Ext.panel.Panel",alias:"widget.primaryPaymentM1020M1024",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:5,width:753,layout:{align:"stretch",type:"hbox"},items:[{xtype:"label",flex:1.2,width:376,text:"(M1020) Primary Diagnosis & (M1022) Other Diagnoses"},{xtype:"label",flex:1,width:747,text:"(M1024) Payment Diagnoses (OPTIONAL)"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"panel",border:0,disabled:!1,floating:!1,width:1027,layout:{align:"middle",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:"Column 1"},{xtype:"label",padding:"10px",width:203,text:"Column 2"},{xtype:"label",padding:"10px",width:208,text:"Column 3"},{xtype:"label",padding:"10px",width:337,text:"Column 4"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:" Diagnoses (Sequencing of diagnoses should reflect the seriousness of each condition and support the disciplines and services provided.) "},{xtype:"label",padding:"10px",width:203,text:"ICD-9-C M and symptom  control rating for each  condition.  Note that the sequencing of  these ratings may not match  the sequencing of the  diagnoses  "},{xtype:"label",padding:"10px",width:208,text:"Complete if a V-code is  assigned under certain  circumstances to Column 2  in place of a case mix  diagnosis.  "},{xtype:"label",padding:"10px",width:337,text:"Complete only if the V-code in Column 2 is reported in place of a case mix diagnosis that is a multiple coding situation (for example: a manifestation code). "}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:"Description "},{xtype:"label",padding:"10px",width:203,text:"ICD-9-C M /  Symptom Control Rating"},{xtype:"label",padding:"10px",width:208,text:"Description/  ICD-9-C M "},{xtype:"label",padding:"10px",width:337,text:"Description/ ICD-9-C M"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,margin:5,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1020_primary_diag_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1020) Primary Diagnoses (v-codes are allowed) a1.",labelStyle:"width: 150px",cls:"oasis_green",itemId:"pri_diag",labelAlign:"top"},{xtype:"radiogroup",padding:2,margin:"10 0 0 5",width:214,fieldLabel:"(M1020) Severity rating a2.",cls:"oasis_green",itemId:"sev_rate",labelAlign:"top",items:[{xtype:"radiofield",name:"m1020_primary_diag_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1020_primary_diag_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1020_primary_diag_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1020_primary_diag_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1020_primary_diag_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1020_primary_diag_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_a3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) a3.",cls:"oasis_green",itemId:"pmt_diag_a3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_a4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) a4.",cls:"oasis_green",itemId:"pmt_diag_a4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1022_oth_diag1_icd",padding:2,margin:"10 0 0 0",width:197,fieldLabel:"(M1022) Other Diagnoses (v-codes and E-codes are allowed) b1.",cls:"oasis_green",itemId:"oth_diag_b1",labelAlign:"top"},{xtype:"radiogroup",padding:2,width:214,margin:"10 0 0 5",fieldLabel:"(M1022) Severity rating b2.",cls:"oasis_green",itemId:"sev_rate_b2",labelAlign:"top"
,items:[{xtype:"radiofield",name:"m1022_oth_diag1_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1022_oth_diag1_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1022_oth_diag1_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1022_oth_diag1_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1022_oth_diag1_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1022_oth_diag1_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_b3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) b3.",cls:"oasis_green",itemId:"pmt_diag_b3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_b4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) b4.",cls:"oasis_green",itemId:"pmt_diag_b4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1022_oth_diag2_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1022) Other Diagnoses (v-codes and E-codes are allowed) c1.",cls:"oasis_green",itemId:"oth_diag_c1",labelAlign:"top"},{xtype:"radiogroup",margin:"10 0 0 5",padding:2,width:214,fieldLabel:"(M1022) Severity rating c2.",cls:"oasis_green",itemId:"oth_diag_c2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1022_oth_diag2_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1022_oth_diag2_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1022_oth_diag2_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1022_oth_diag2_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1022_oth_diag2_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1022_oth_diag2_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_c3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) c3.",cls:"oasis_green",itemId:"pmt_diag_c3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_c4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) c4.",cls:"oasis_green",itemId:"pmt_diag_c4",labelAlign:"top"}]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;return!s&&this.infoCompletedDt.value<t&&(o=!0),this.m1020PrimaryDiagIcd.value==null&&o&&e.push(["M1020","Enter the primary diagnosis code."]),this.m1020PrimaryDiagIcd.value&&o&&(this.m1020PrimaryDiagIcd.value[0]!="V"&&this.m1020PrimaryDiagSeverity.getGroupValue()==" "?e.push(["M1020","Select the primary diagnosis severity."]):this.m1020PrimaryDiagIcd.value[0]=="V"&&this.m1020PrimaryDiagSeverity.getGroupValue()!=" "&&e.push(["M1020","If the primary diagnosis is blank then the primary diagnosis severity must also be blank."]),this.m1020PrimaryDiagSeverity.getGroupValue()=="00"&&e.push(["M1020","The primary diagnosis severity must be between 01 and 04."])),this.m1022_oth_diag1_icd.value&&o?(otherDiags=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag2_icd,this.m1022_oth_diag3_icd,this.m1022_oth_diag4_icd,this.m1022_oth_diag5_icd],Ext.each(otherDiags,function(t){this.m1022_oth_diag1_icd.value==t.value&&e.push(["M1022","The other diagnosis code 'B1' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1022_oth_diag1_icd.value[0]=="E"&&this.m1022_oth_diag1_severity.getGroupValue()!=" "&&e.push(["M1022","If the first character of the other diagnosis code 'B1' is 'E' (i.e., E-code), then the other diagnosis 'B1' severity must be blank."]),this.m1022_oth_diag1_icd.value[0]=="V"&&this.m1022_oth_diag1_severity.getGroupValue()!=" "&&e.push(["M1022","If the first character of the other diagnosis code 'B1' is 'V' (i.e., E-code), then the other diagnosis 'B1' severity must be blank."]),this.m1022_oth_diag1_icd.value[0]!="V"&&this.m1022_oth_diag1_icd.value[0]!="E"&&this.m1022_oth_diag1_severity.getGroupValue()==" "&&e.push(["M1022","Select the other diagnosis code 'B1' severity."])):(this.m1022_oth_diag1_icd.value==null&&this.m1022_oth_diag1_severity.getGroupValue()!=" "&&e.push(["M1022","If the other diagnosis 'B1' is blank then the other diagnosis 'B1' severity must also be blank."]),this.m1022_oth_diag1_icd.value==null&&this.m1022_oth_diag2_icd.value!=null&&e.push(["M1022","Since Other diagnoses 1 ICD code is blank, then Other diagnoses 2 ICD code must be blank."])),this.m1022_oth_diag2_icd.value&&o?(otherDiags2=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag1_icd,this.m1022_oth_diag3_icd,this.m1022_oth_diag4_icd,this.m1022_oth_diag5_icd],Ext.each(otherDiags2,function(t){this.m1022_oth_diag2_icd.value==t.value&&e.push(["M1022","The other diagnosis code 'C1' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1022_oth_diag2_icd.value[0]=="E"&&this.m1022_oth_diag2_severity.getGroupValue()!=" "&&e.push(["M1022","If the first character of the other diagnosis code 'C1' is 'E' (i.e., E-code), then the other diagnosis 'C1' severity must be blank."]),this.m1022_oth_diag2_icd.value[0]=="V"&&this.m1022_oth_diag2_severity.getGroupValue()!=" "&&e.push(["M1022","If the first character of the other diagnosis code 'C1' is 'V' (i.e., E-code), then the other diagnosis 'C1' severity must be blank."]),this.m1022_oth_diag2_icd.value[0]!="V"&&this.m1022_oth_diag2_icd.value[0]!="E"&&this.m1022_oth_diag2_severity.getGroupValue()==" "&&e.push(["M1022","Select the other diagnosis code 'C1' severity."])):this.m1022_oth_diag2_icd.value==null&&this.m1022_oth_diag2_severity.getGroupValue()!=" "&&e.push(["M1022","If the other diagnosis 'C1' is blank then the other diagnosis 'C1' severity must also be blank."]),this.m1024_pmt_diag_icd_a3.value?this.m1020PrimaryDiagIcd.value!=null&&this.m1020PrimaryDiagIcd.value[0]!="V"&&e.push(["M1020","If the payment diagnosis code 'A3' is not blank, then Primary Diagnoses code should be a V-code."]):this.m1024_pmt_diag_icd_a3.value==null&&this.m1024_pmt_diag_icd_a4.value!==null&&e.push(["M1024","If the payment diagnosis code 'A3' is blank then the payment diagnosis code 'A4' must also be blank."]),this.m1024_pmt_diag_icd_b3.value&&(this.m1024_pmt_diag_icd_b3.value==this.m1024_pmt_diag_icd_a3.value&&e.push(["M1024","The payment diagnosis code 'B3' cannot be same as the payment diagnosis code 'A3'."]),this.m1022_oth_diag1_icd.value==null?e.push(["M1024","If the other diagnosis code 'B1' is blank then the payment diagnosis code 'B3' must also be blank."]):this.m1022_oth_diag1_icd&&this.m1022_oth_diag1_icd.value[0]!="V"&&e.push(["M1022","If the payment diagnosis code 'B3' is not blank, then Other diagnoses 1 ICD code must be a V-code."])),this.m1024_pmt_diag_icd_b4.value&&this.m1024_pmt_diag_icd_b4.value==this.m1024_pmt_diag_icd_a4.value&&e.push(["M1024","The payment diagnosis code 'B4' cannot be same as the payment diagnosis code 'A4'."]),this.m1024_pmt_diag_icd_b3.value==null&&this.m1024_pmt_diag_icd_b4.value!=null&&e.push(["M1024","If the payment diagnosis code 'B3' is blank then the payment diagnosis code 'B4' must also be blank."]),this.m1024_pmt_diag_icd_c3.value&&(this.m1022_oth_diag2_icd.value==null?e.push(["M1024","If the other diagnosis code 'C1' is blank then the payment diagnosis code 'C3' must also be blank."]):this.m1022_oth_diag2_icd&&this.m1022_oth_diag2_icd.value[0]!="V"&&e.push(["M1022","If the payment diagnosis code 'C3' is not balnk, then other diagnoses 2 ICD code must be a V-code."]),paymentDiagsC3=[this.m1024_pmt_diag_icd_a3,this.m1024_pmt_diag_icd_b3],Ext.each(paymentDiagsC3,function(t){this.m1024_pmt_diag_icd_c3.value==t.value&&e.push(["M1024","The payment diagnosis code 'C3' cannot be same as the "+this.getMessage(t.name)])},this)),this.m1024_pmt_diag_icd_c4.value&&(paymentDiagsC4=[this.m1024_pmt_diag_icd_a4,this.m1024_pmt_diag_icd_b4],Ext.each(paymentDiagsC4,function(t){this.m1024_pmt_diag_icd_c4.value==t.value&&e.push(["M1024","The optional diagnosis 'C4' cannot be same as the "+this.getMessage(t.name)])},this)),this.m1024_pmt_diag_icd_c3.value==null&&this.m1024_pmt_diag_icd_c4.value!=null&&e.push(["M1024","If the payment diagnosis code 'C3' is blank then the payment diagnosis code 'C4' must also be blank."]),e},getMessage:function(e){return icd_codes={},icd_codes.m1020_primary_diag_icd="primary diagnosis code 'A1'",icd_codes.m1022_oth_diag1_icd="other diagnosis code 'B1'",icd_codes.m1022_oth_diag2_icd="other diagnosis code 'C1'",icd_codes.m1022_oth_diag3_icd="other diagnosis code 'D1'",icd_codes.m1022_oth_diag4_icd="other diagnosis code 'E1'",icd_codes.m1022_oth_diag5_icd="other diagnosis code 'F1'",icd_codes.m1024_pmt_diag_icd_a3="payment diagnosis code 'A3'.",icd_codes.m1024_pmt_diag_icd_b3="payment diagnosis code 'B3'.",icd_codes.m1024_pmt_diag_icd_a4="payment diagnosis code 'A4'.",icd_codes.m1024_pmt_diag_icd_b4="payment diagnosis code 'B4'.",icd_codes[e]},pmtDiagIcdCodes:function(e){this.m1024_pmt_diag_icd_a3.value?this.m1020PrimaryDiagIcd.value[0]!="V"&&e.push(["M1020","Primary Diagnoses code should be a V-code."]):this.m1024_pmt_diag_icd_a3.value==null&&this.m1024_pmt_diag_icd_a4.value!==null&&e.push(["M1024","If the payment diagnosis code 'A3' is blank then the payment diagnosis code 'A4' must also be blank."])},disableSeverityAndPaymentDiagnoses:function(){Ext.each(this.M1024SeverityAndPriFieldsName,function(e,t){Ext.each(e,function(e,t){fields=this.mainScope.query("[name="+e+"]"),Ext.each(fields,function(e,t){e.disable()},this)},this)},this)},resetM1022OthDiag2Severity:function(){this.m1022_oth_diag2_icd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1022_oth_diag2_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1022_oth_diag2_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1022_oth_diag2_icd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1022_oth_diag2_severity]").forEach(function(e){e.setValue(" ")})},this)},resetM1022OthDiag1Severity:function(){this.m1022_oth_diag1_icd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1022_oth_diag1_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1022_oth_diag1_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1022_oth_diag1_icd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1022_oth_diag1_severity]").forEach(function(e){e.setValue(" ")})},this)},resetPrimaryDiagSeverity:function(){this.m1020PrimaryDiagIcd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1020_primary_diag_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1020_primary_diag_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1020PrimaryDiagIcd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1020_primary_diag_severity]").forEach(function(e){e.setValue(" ")})},this)},enableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.enable()},this)},this)},disableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.disable()},this)},this)},serverValidationRequiredFields:function(){return["m1020_primary_diag_icd","m1022_oth_diag1_icd","m1022_oth_diag2_icd","m1024_pmt_diag_icd_a3","m1024_pmt_diag_icd_a4","m1024_pmt_diag_icd_b3","m1024_pmt_diag_icd_b4","m1024_pmt_diag_icd_c3","m1024_pmt_diag_icd_c4"]},serverValidationRequiredFieldsSuffix:function(){return["a1","b1","c1","a3","a4","b3","b4","c3","c4"]},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1020PrimaryDiagIcd=this.mainScope.down("[name=m1020_primary_diag_icd]"),this.m1020PrimaryDiagSeverity=this.mainScope.down("[name=m1020_primary_diag_severity]"),this.m1022_oth_diag1_icd=this.mainScope.down("[name=m1022_oth_diag1_icd]"),this.m1022_oth_diag2_icd=this.mainScope.down("[name=m1022_oth_diag2_icd]"),this.m1022_oth_diag3_icd=this.mainScope.down("[name=m1022_oth_diag3_icd]"),this.m1022_oth_diag4_icd=this.mainScope.down("[name=m1022_oth_diag4_icd]"),this.m1022_oth_diag5_icd=this.mainScope.down("[name=m1022_oth_diag5_icd]"),this.m1022_oth_diag1_severity=this.mainScope.down("[name=m1022_oth_diag1_severity]"),this.m1022_oth_diag2_severity=this.mainScope.down("[name=m1022_oth_diag2_severity]"),this.m1022_oth_diag3_severity=this.mainScope.down("[name=m1022_oth_diag3_severity]"),this.m1022_oth_diag4_severity=this.mainScope.down("[name=m1022_oth_diag4_severity]"),this.m1022_oth_diag5_severity=this.mainScope.down("[name=m1022_oth_diag5_severity]"),this.m1024_pmt_diag_icd_a3=this.mainScope.down("[name=m1024_pmt_diag_icd_a3]"),this.m1024_pmt_diag_icd_a4=this.mainScope.down("[name=m1024_pmt_diag_icd_a4]"),this.m1024_pmt_diag_icd_b3=this.mainScope.down("[name=m1024_pmt_diag_icd_b3]"),this.m1024_pmt_diag_icd_b4=this.mainScope.down("[name=m1024_pmt_diag_icd_b4]"),this.m1024_pmt_diag_icd_c3=this.mainScope.down("[name=m1024_pmt_diag_icd_c3]"),this.m1024_pmt_diag_icd_c4=this.mainScope.down("[name=m1024_pmt_diag_icd_c4]"),this.m1024_pmt_diag_icd_d3=this.mainScope.down("[name=m1024_pmt_diag_icd_d3]"),this.m1024_pmt_diag_icd_d4=this.mainScope.down("[name=m1024_pmt_diag_icd_d4]"),this.m1024_pmt_diag_icd_e3=this.mainScope.down("[name=m1024_pmt_diag_icd_e3]"),this.m1024_pmt_diag_icd_e4=this.mainScope.down("[name=m1024_pmt_diag_icd_e4]"),this.m1024_pmt_diag_icd_f3=this.mainScope.down("[name=m1024_pmt_diag_icd_f3]"),this.m1024_pmt_diag_icd_f4=this.mainScope.down("[name=m1024_pmt_diag_icd_f4]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.resetPrimaryDiagSeverity(),this.resetM1022OthDiag1Severity(),this.resetM1022OthDiag2Severity(),this.m1022ICDs=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag1_icd,this.m1022_oth_diag2_icd],this.M1024SeverityAndPriFieldsName=[["m1020_primary_diag_severity","m1024_pmt_diag_icd_a3","m1024_pmt_diag_icd_a4"],["m1022_oth_diag1_severity","m1024_pmt_diag_icd_b3","m1024_pmt_diag_icd_b4"],["m1022_oth_diag2_severity","m1024_pmt_diag_icd_c3","m1024_pmt_diag_icd_c4"]],this.codeIsVcodeDisableFields=[["m1020_primary_diag_severity"],["m1022_oth_diag1_severity"],["m1022_oth_diag2_severity"]],Ext.each(this.m1022ICDs,function(e,t){e.on("select",function(e){e.value==null&&e.value==""?this.disableFields(this.M1024SeverityAndPriFieldsName[t]):e.value[0]!="V"&&e.value[0]!="E"?this.enableFields(this.M1024SeverityAndPriFieldsName[t]):(e.value[0]=="V"||e.value[0]=="E")&&this.disableFields(this.codeIsVcodeDisableFields[t])},this)},this)}}),Ext.define("Ext.panel.PrimaryPaymentM1021M1025",{extend:"Ext.panel.Panel",alias:"widget.primaryPaymentM1021M1025",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:5,width:873,layout:{align:"stretch",type:"hbox"},items:[{xtype:"label",flex:1,width:400,text:"(M1021) Primary Diagnosis & (M1023) Other Diagnoses"},{xtype:"label",flex:1,width:400,text:"(M1025) Optional Diagnoses (OPTIONAL) (not used for payment)"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"panel",border:0,disabled:!1,floating:!1,width:1027,layout:{align:"middle",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:207,text:"Column 1"},{xtype:"label",padding:"10px",width:224,text:"Column 2"},{xtype:"label",padding:"10px",width:207,text:"Column 3"},{xtype:"label",padding:"10px",width:337,text:"Column 4"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:207,text:" Diagnoses (Sequencing of diagnoses should reflect the seriousness of each condition and support the disciplines and services provided)."},{xtype:"label",padding:"10px",width:224,text:"ICD-10-CM and symptom  control rating for each  condition.  Note that the sequencing of  these ratings may not match  the sequencing of the  diagnoses."},{xtype:"label",padding:"10px",width:207,text:"May be completed if a Z-code is assigned to column 2 and underlying diagnosis is resolved."},{xtype:"label",padding:"10px",width:337,text:"Complete only if the Optional Diagnosis is a multiple coding situation (for example: a manifestation code)."}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:207,text:"Description "},{xtype:"label",padding:"10px",width:224,text:"ICD-10-CM /  Symptom Control Rating"},{xtype:"label",padding:"10px",width:207,text:"Description /  ICD-10-CM "},{xtype:"label",padding:"10px",width:337,text:"Description / ICD-10-CM"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,margin:5,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1021_primary_diag_icd",margin:"10 0 0 0",padding:2,width:207,fieldLabel:"(M1021) Primary Diagnoses (V, W, X, Y codes NOT allowed) a1.",cls:"oasis_green",itemId:"pri_diag",labelAlign:"top"},{xtype:"radiogroup",padding:2,margin:"10 0 0 5",width:214,fieldLabel:"(M1021) Severity rating a2.",cls:"oasis_green",itemId:"sev_rate",labelAlign:"top",items:[{xtype:"radiofield",name:"m1021_primary_diag_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1021_primary_diag_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1021_primary_diag_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1021_primary_diag_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1021_primary_diag_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1021_primary_diag_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_a3",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) a3.",cls:"oasis_green",itemId:"opt_diag_a3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_a4",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) a4.",cls:"oasis_green",itemId:"opt_diag_a4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1023_oth_diag1_icd",padding:2,margin:"10 0 0 0",width:207,fieldLabel:"(M1023) Other Diagnoses (All ICD-10-CM codes allowed) b1.",cls:"oasis_green",itemId:"oth_diag_b1",labelAlign:"top"},{xtype:"radiogroup",padding:2,width:214,margin:"10 0 0 5",fieldLabel:"(M1023) Severity rating b2.",cls:"oasis_green",itemId:"sev_rate_b2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1023_oth_diag1_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1023_oth_diag1_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1023_oth_diag1_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1023_oth_diag1_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1023_oth_diag1_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1023_oth_diag1_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_b3",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) b3.",cls:"oasis_green",itemId:"opt_diag_b3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_b4",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) b4.",cls:"oasis_green",itemId:"opt_diag_b4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1023_oth_diag2_icd",margin:"10 0 0 0",padding:2,width:207,fieldLabel:"(M1023) Other Diagnoses (All ICD-10-CM codes allowed) c1.",cls:"oasis_green",itemId:"oth_diag_c1",labelAlign:"top"},{xtype:"radiogroup",margin:"10 0 0 5",padding:2,width:214,fieldLabel:"(M1023) Severity rating c2.",cls:"oasis_green",itemId:"oth_diag_c2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1023_oth_diag2_severity",boxLabel:"NA",checked:!0,width:"41px",inputValue:" "},{xtype:"radiofield",name:"m1023_oth_diag2_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1023_oth_diag2_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1023_oth_diag2_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1023_oth_diag2_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1023_oth_diag2_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_c3",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) c3.",cls:"oasis_green",itemId:"opt_diag_c3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_c4",padding:2,margin:"10 0 0 5",width:209,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) c4.",cls:"oasis_green",itemId:"opt_diag_c4",labelAlign:"top"}]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;if(s||this.infoCompletedDt.value>=t)o=!0;return this.m1021PrimaryDiagIcd.value==null&&o&&e.push(["M1021","Enter the primary diagnosis code."]),this.m1021PrimaryDiagIcd.value&&o&&(res=this.checkCodeForSeverity(this.m1021PrimaryDiagIcd.value[0]),res&&this.m1021PrimaryDiagSeverity.getGroupValue()==" "?e.push(["M1021","Select the primary diagnosis severity."]):this.m1021PrimaryDiagIcd.value[0]=="Z"&&this.m1021PrimaryDiagSeverity.getGroupValue()!=" "&&e.push(["M1021","If the primary diagnosis is blank then the primary diagnosis severity must also be blank."]),this.m1021PrimaryDiagSeverity.getGroupValue()=="00"&&e.push(["M1021","The primary diagnosis severity must be between 01 and 04."])),this.m1023_oth_diag1_icd.value&&o?(this.m1023_oth_diag1_icd.value==this.m1021PrimaryDiagIcd.value&&e.push(["M1023","The other diagnosis code 'b1' cannot be the same as the primary diagnosis code 'a1'."]),res=this.checkCodeForSeverity(this.m1023_oth_diag1_icd.value[0]),res&&this.m1023_oth_diag1_severity.getGroupValue()==" "&&e.push(["M1023","Select the other diagnosis code 'b2' severity."])):(this.m1023_oth_diag1_icd.value==null&&this.m1023_oth_diag1_severity.getGroupValue()!=" "&&e.push(["M1023","If the other diagnosis 'b1' is blank then the other diagnosis 'b2' severity must also be blank."]),this.m1023_oth_diag1_icd.value==null&&this.m1023_oth_diag2_icd.value!=null&&e.push(["M1023","Since other diagnoses code 'b1' is blank, then other diagnoses code 'c1' must be blank."])),this.m1023_oth_diag2_icd.value&&o?(otherDiags2=[this.m1021PrimaryDiagIcd,this.m1023_oth_diag1_icd],Ext.each(otherDiags2,function(t){this.m1023_oth_diag2_icd.value==t.value&&e.push(["M1023","The other diagnosis code 'c1' cannot be the same as the "+this.getMessage(t.name)])},this),res=this.checkCodeForSeverity(this.m1023_oth_diag2_icd.value[0]),res&&this.m1023_oth_diag2_severity.getGroupValue()==" "&&e.push(["M1023","Select the other diagnosis code 'c2' severity."])):this.m1023_oth_diag2_icd.value==null&&this.m1023_oth_diag2_severity.getGroupValue()!=" "&&e.push(["M1023","If the other diagnosis 'c1' is blank then the other diagnosis 'c2' severity must also be blank."]),this.m1025_opt_diag_icd_a3.value?this.m1021PrimaryDiagIcd.value!=null&&this.m1021PrimaryDiagIcd.value[0]!="Z"&&e.push(["M1021","If the optional diagnosis code 'a3' is not blank, then primary diagnoses code should be a 'Z' code."]):this.m1025_opt_diag_icd_a3.value==null&&this.m1025_opt_diag_icd_a4.value!=null&&e.push(["M1025","If the optional diagnosis code 'a3' is blank then the optional diagnosis code 'a4' must also be blank."]),this.m1025_opt_diag_icd_a4.value&&this.m1021PrimaryDiagIcd.value!=null&&this.m1021PrimaryDiagIcd.value[0]!="Z"&&e.push(["M1021","If the optional diagnosis code 'a4' is not blank, then primary diagnoses code should be a 'Z' code."]),this.m1025_opt_diag_icd_b3.value&&(this.m1025_opt_diag_icd_b3.value==this.m1025_opt_diag_icd_a3.value&&e.push(["M1025","The optional diagnosis code 'b3' cannot be same as the optional diagnosis code 'a3'."]),this.m1023_oth_diag1_icd.value==null?e.push(["M1025","If the other diagnosis code 'b1' is blank then the optional diagnosis code 'b3' must also be blank."]):this.m1023_oth_diag1_icd&&this.m1023_oth_diag1_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'b3' is not blank, then other diagnoses code 'b1' should be a 'Z' code."])),this.m1025_opt_diag_icd_b4.value&&(this.m1023_oth_diag1_icd.value!=null&&this.m1023_oth_diag1_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'b4' is not blank, then other diagnoses code 'b1' should be a 'Z' code."]),this.m1025_opt_diag_icd_b3.value==null&&e.push(["M1025","If the optional diagnosis code 'b3' is blank then the optional diagnosis code 'b4' must also be blank."]),this.m1025_opt_diag_icd_b4.value==this.m1025_opt_diag_icd_a4.value&&e.push(["M1025","The optional diagnosis 'b4' cannot be same as the optional diagnosis code 'a4'."])),this.m1025_opt_diag_icd_c3.value&&(this.m1023_oth_diag2_icd.value==null?e.push(["M1025","If the other diagnosis code 'c1' is blank then the optional diagnosis code 'c3' must also be blank."]):this.m1023_oth_diag2_icd&&this.m1023_oth_diag2_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'c3' is not blank, then other diagnoses code 'c1' should be a 'Z' code."]),optionalDiagsC3=[this.m1025_opt_diag_icd_a3,this.m1025_opt_diag_icd_b3],Ext.each(optionalDiagsC3,function(t){this.m1025_opt_diag_icd_c3.value==t.value&&e.push(["M1025","The optional diagnosis code 'c3' cannot be same as the "+this.getMessage(t.name)])},this)),this.m1025_opt_diag_icd_c4.value&&(this.m1023_oth_diag2_icd.value!=null&&this.m1023_oth_diag2_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'c4' is not blank, then other diagnoses code 'c1' should be a 'Z' code."]),this.m1025_opt_diag_icd_c3.value==null&&e.push(["M1025","If the optional diagnosis code 'c3' is blank then the optional diagnosis code 'c4' must also be blank."]),optionalDiagsC4=[this.m1025_opt_diag_icd_a4,this.m1025_opt_diag_icd_b4],Ext.each(optionalDiagsC4,function(t){this.m1025_opt_diag_icd_c4.value==t.value&&e.push(["M1025","The optional diagnosis 'c4' cannot be same as the "+this.getMessage(t.name)])},this)),e},getMessage:function(e){return icd_codes={},icd_codes.m1021_primary_diag_icd="primary diagnosis code 'a1'.",icd_codes.m1023_oth_diag1_icd="other diagnosis code 'b1'.",icd_codes.m1023_oth_diag2_icd="other diagnosis code 'c1'.",icd_codes.m1023_oth_diag3_icd="other diagnosis code 'd1'.",icd_codes.m1023_oth_diag4_icd="other diagnosis code 'e1'.",icd_codes.m1023_oth_diag5_icd="other diagnosis code 'f1'.",icd_codes.m1025_opt_diag_icd_a3="optional diagnosis code 'a3'.",icd_codes.m1025_opt_diag_icd_b3="optional diagnosis code 'b3'.",icd_codes.m1025_opt_diag_icd_a4="optional diagnosis code 'a4'.",icd_codes.m1025_opt_diag_icd_b4="optional diagnosis code 'b4'.",icd_codes[e]},checkCodeForSeverity:function(e){if(e!="V"&&e!="W"&&e!="X"&&e!="Y"&&e!="Z")return!0},resetDiagSeverity:function(e){Ext.each(e,function(e){e[0].on("select",function(t){(t.value[0]=="V"||t.value[0]=="W"||t.value[0]=="X"||t.value[0]=="Y"||t.value[0]=="Z")&&this.query("[name="+e[1].name+"]").forEach(function(e){e.setValue(" ")})},this),e[0].on("change",function(t){(t.value==" "||t.value==null)&&this.query("[name="+e[1].name+"]").forEach(function(e){e.setValue(" ")})},this)},this)},enableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.enable()},this)},this)},disableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.disable()},this)},this)},serverValidationRequiredFields:function(){return["m1021_primary_diag_icd","m1025_opt_diag_icd_a3","m1025_opt_diag_icd_a4","m1025_opt_diag_icd_b3","m1025_opt_diag_icd_b4","m1025_opt_diag_icd_c3","m1025_opt_diag_icd_c4"]},serverValidationRequiredFieldsSuffix:function(){return["a1","a3","a4","b3","b4","c3","c4"]},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1021PrimaryDiagIcd=this.mainScope.down("[name=m1021_primary_diag_icd]"),this.m1021PrimaryDiagSeverity=this.mainScope.down("[name=m1021_primary_diag_severity]"),this.m1023_oth_diag1_icd=this.mainScope.down("[name=m1023_oth_diag1_icd]"),this.m1023_oth_diag2_icd=this.mainScope.down("[name=m1023_oth_diag2_icd]"),this.m1023_oth_diag3_icd=this.mainScope.down("[name=m1023_oth_diag3_icd]"),this.m1023_oth_diag4_icd=this.mainScope.down("[name=m1023_oth_diag4_icd]"),this.m1023_oth_diag5_icd=this.mainScope.down("[name=m1023_oth_diag5_icd]"),this.m1023_oth_diag1_severity=this.mainScope.down("[name=m1023_oth_diag1_severity]"),this.m1023_oth_diag2_severity=this.mainScope.down("[name=m1023_oth_diag2_severity]"),this.m1025_opt_diag_icd_a3=this.mainScope.down("[name=m1025_opt_diag_icd_a3]"),this.m1025_opt_diag_icd_a4=this.mainScope.down("[name=m1025_opt_diag_icd_a4]"),this.m1025_opt_diag_icd_b3=this.mainScope.down("[name=m1025_opt_diag_icd_b3]"),this.m1025_opt_diag_icd_b4=this.mainScope.down("[name=m1025_opt_diag_icd_b4]"),this.m1025_opt_diag_icd_c3=this.mainScope.down("[name=m1025_opt_diag_icd_c3]"),this.m1025_opt_diag_icd_c4=this.mainScope.down("[name=m1025_opt_diag_icd_c4]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.m1023ICDs=[this.m1021PrimaryDiagIcd,this.m1023_oth_diag1_icd,this.m1023_oth_diag2_icd],this.icdsAndSeverity=[[this.m1021PrimaryDiagIcd,this.m1021PrimaryDiagSeverity],[this.m1023_oth_diag1_icd,this.m1023_oth_diag1_severity],[this.m1023_oth_diag2_icd,this.m1023_oth_diag2_severity]],this.resetDiagSeverity(this.icdsAndSeverity),this.m1025SeverityAndPriFieldsName=[["m1021_primary_diag_severity","m1025_opt_diag_icd_a3","m1025_opt_diag_icd_a4"],["m1023_oth_diag1_severity","m1025_opt_diag_icd_b3","m1025_opt_diag_icd_b4"],["m1023_oth_diag2_severity","m1025_opt_diag_icd_c3","m1025_opt_diag_icd_c4"]],this.codeIsInvalidCodeDisableFields=[["m1021_primary_diag_severity"],["m1023_oth_diag1_severity"],["m1023_oth_diag2_severity"]],Ext.each(this.m1023ICDs,function(e,t){e.on("select",function(e){e.value[0]=="V"||e.value[0]=="W"||e.value[0]=="X"||e.value[0]=="Y"||e.value[0]=="Z"?this.disableFields(this.codeIsInvalidCodeDisableFields[t]):(e.value[0]!="V"||e.value[0]!="W"||e.value[0]!="X"||e.value[0]!="Y"||e.value[0]!="Z")&&this.enableFields(this.m1025SeverityAndPriFieldsName[t])},this)},this)}}),Ext.define("Ext.panel.PrimaryPaymentM1022M1024",{extend:"Ext.panel.Panel",alias:"widget.primaryPaymentM1022M1024",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:5,width:753,layout:{align:"stretch",type:"hbox"},items:[{xtype:"label",flex:1.2,width:376,text:"(M1020) Primary Diagnosis & (M1022) Other Diagnoses"},{xtype:"label",flex:1,width:747,text:"(M1024) Payment Diagnoses (OPTIONAL)"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"panel",border:0,disabled:!1,floating:!1,width:1027,layout:{align:"middle",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:"Column 1"},{xtype:"label",padding:"10px",width:203,text:"Column 2"},{xtype:"label",padding:"10px",width:208,text:"Column 3"},{xtype:"label",padding:"10px",width:337,text:"Column 4"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:"Diagnoses (Sequencing of diagnoses should reflect the seriousness of each condition and support the disciplines and services provided.) "},{xtype:"label",padding:"10px",width:203,text:"ICD-9-C M and symptom  control rating for each  condition.  Note that the sequencing of  these ratings may not match  the sequencing of the  diagnoses  "},{xtype:"label",padding:"10px",width:208,text:"Complete if a V-code is  assigned under certain  circumstances to Column 2  in place of a case mix  diagnosis**.  "
},{xtype:"label",padding:"10px",width:337,text:"Complete only if the V-code in Column 2 is reported in place of a case mix diagnosis that is a multiple coding situation (e.g., a manifestation code). "}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:208,text:"Description "},{xtype:"label",padding:"10px",width:203,text:"ICD-9-C M /  Symptom Control Rating"},{xtype:"label",padding:"10px",width:208,text:"Description/  ICD-9-C M "},{xtype:"label",padding:"10px",width:337,text:"Description/ ICD-9-C M"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,margin:5,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1022_oth_diag3_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1022) Other Diagnoses (v-codes and E-codes are allowed) d1.",cls:"oasis_green",itemId:"oth_diag_d1",labelAlign:"top"},{xtype:"radiogroup",padding:2,margin:"10 0 0 5",width:214,fieldLabel:"(M1022) Severity rating d2.",cls:"oasis_green",itemId:"sev_rate_d2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1022_oth_diag3_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1022_oth_diag3_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1022_oth_diag3_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1022_oth_diag3_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1022_oth_diag3_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1022_oth_diag3_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_d3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) d3.",cls:"oasis_green",itemId:"pmt_diag_d3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_d4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) d4.",cls:"oasis_green",itemId:"pmt_diag_d4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1022_oth_diag4_icd",padding:2,margin:"10 0 0 0",width:197,fieldLabel:"(M1022) Other Diagnoses (v-codes and E-codes are allowed) e1.",cls:"oasis_green",itemId:"oth_diag_e1",labelAlign:"top"},{xtype:"radiogroup",padding:2,width:214,margin:"10 0 0 5",fieldLabel:"(M1022) Severity rating e2.",cls:"oasis_green",itemId:"oth_diag_e2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1022_oth_diag4_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1022_oth_diag4_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1022_oth_diag4_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1022_oth_diag4_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1022_oth_diag4_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1022_oth_diag4_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_e3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) e3.",cls:"oasis_green",itemId:"pmt_diag_e3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_e4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) e4.",cls:"oasis_green",itemId:"pmt_diag_e4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1022_oth_diag5_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1022) Other Diagnoses (v-codes and E-codes are allowed) f1.",cls:"oasis_green",itemId:"oth_diag_f1",labelAlign:"top"},{xtype:"radiogroup",margin:"10 0 0 5",padding:2,width:214,fieldLabel:"(M1022) Severity rating f2.",cls:"oasis_green",itemId:"oth_diag_f2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1022_oth_diag5_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1022_oth_diag5_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1022_oth_diag5_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1022_oth_diag5_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1022_oth_diag5_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1022_oth_diag5_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_f3",padding:2,margin:"10 0 0 5",width:202,fieldLabel:"(M1024) Payment Diagnoses (OPTIONAL V or E codes not allowed) f3.",cls:"oasis_green",itemId:"pmt_diag_f3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1024_pmt_diag_icd_f4",padding:2,margin:"10 0 0 5",width:197,fieldLabel:"(M1024) Payment Diagnoses 2 (OPTIONAL V or E - codes not allowed) f4.",cls:"oasis_green",itemId:"pmt_diag_f4",labelAlign:"top"}]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;return!s&&this.infoCompletedDt.value<t&&(o=!0),this.m1022_oth_diag3_icd.value&&o?(otherDiags3=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag1_icd,this.m1022_oth_diag2_icd,this.m1022_oth_diag4_icd,this.m1022_oth_diag5_icd],Ext.each(otherDiags3,function(t){this.m1022_oth_diag3_icd.value==t.value&&e.push(["M1022","M1022_OTH_DIAG3_ICD cannot be equal to "+t.name])},this),this.m1022_oth_diag3_icd.value[0]=="E"&&this.m1022_oth_diag3_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 3 ICD code first character is 'E'(i.e.,E-Code), then other Diagnoses 3 severity must be blank."]),this.m1022_oth_diag3_icd.value[0]=="V"&&this.m1022_oth_diag3_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 3 ICD first character is 'V(i.e., V-Code)', then other Diagnoses 2 severity must be blank."]),this.m1022_oth_diag3_icd.value[0]!="V"&&this.m1022_oth_diag3_icd.value[0]!="E"&&this.m1022_oth_diag3_severity.getGroupValue()==" "&&e.push(["M1022","Other diagnoses 3 severity cannot be blank."])):this.m1022_oth_diag3_icd.value==null&&this.m1022_oth_diag3_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other diagnoses 3 ICD code is blank, then Other diagnoses 3 severity 'd2' must be blank."]),this.m1022_oth_diag4_icd.value&&o?(otherDiags4=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag1_icd,this.m1022_oth_diag3_icd,this.m1022_oth_diag2_icd,this.m1022_oth_diag5_icd],this.m1022_oth_diag3_icd.value==null&&e.push(["M1022","Since Other diagnoses 3 ICD code is blank, then Other diagnoses 4 ICD code must be blank."]),Ext.each(otherDiags4,function(t){this.m1022_oth_diag4_icd.value==t.value&&e.push(["M1022","M1022_OTH_DIAG4_ICD cannot be equal to "+t.name])},this),this.m1022_oth_diag4_icd.value[0]=="E"&&this.m1022_oth_diag4_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 4 ICD code first character is 'E'(i.e.,E-Code), then other Diagnoses 4 severity 'e2' must be blank."]),this.m1022_oth_diag4_icd.value[0]=="V"&&this.m1022_oth_diag4_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 4 ICD first character is 'V(i.e., V-Code)', then other Diagnoses 4 severity 'e2' must be blank."]),this.m1022_oth_diag4_icd.value[0]!="V"&&this.m1022_oth_diag4_icd.value[0]!="E"&&this.m1022_oth_diag4_severity.getGroupValue()==" "&&e.push(["M1022","Other diagnoses 4 severity 'e2' cannot be blank."])):this.m1022_oth_diag4_icd.value==null&&this.m1022_oth_diag4_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other diagnoses 4 ICD code is blank, then Other diagnoses 4 severity 'e2' must be blank."]),this.m1022_oth_diag5_icd.value&&o?(otherDiags5=[this.m1020PrimaryDiagIcd,this.m1022_oth_diag1_icd,this.m1022_oth_diag3_icd,this.m1022_oth_diag2_icd,this.m1022_oth_diag4_icd],this.m1022_oth_diag4_icd.value==null&&this.m1022_oth_diag5_icd.value!=null&&e.push(["M1022","Since Other diagnoses 4 ICD code is blank, then Other diagnoses 5 ICD code must be blank."]),Ext.each(otherDiags5,function(t){this.m1022_oth_diag5_icd.value==t.value&&e.push(["M1022","M1022_OTH_DIAG5_ICD cannot be equal to "+t.name])},this),this.m1022_oth_diag5_icd.value[0]=="E"&&this.m1022_oth_diag5_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 5 ICD code first character is 'E'(i.e.,E-Code), then Other Diagnoses 5 severity 'f2' must be blank."]),this.m1022_oth_diag5_icd.value[0]=="V"&&this.m1022_oth_diag5_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other Diagnoses 5 ICD first character is 'V(i.e., V-Code)', then other Diagnoses 5 severity 'f2' must be blank."]),this.m1022_oth_diag5_icd.value[0]!="V"&&this.m1022_oth_diag5_icd.value[0]!="E"&&this.m1022_oth_diag5_severity.getGroupValue()==" "&&e.push(["M1022","Other diagnoses 5 severity 'f2' cannot be blank."])):this.m1022_oth_diag5_icd.value==null&&this.m1022_oth_diag5_severity.getGroupValue()!=" "&&e.push(["M1022","Since Other diagnoses 5 ICD code is blank, then Other diagnoses 5 severity 'f2' must be blank."]),this.m1024_pmt_diag_icd_d3.value&&(pmtDiagsd3=[this.m1024_pmt_diag_icd_a3,this.m1024_pmt_diag_icd_b3,this.m1024_pmt_diag_icd_c3],Ext.each(pmtDiagsd3,function(t){this.m1024_pmt_diag_icd_d3.value==t.value&&e.push(["M1024","The payment diagnosis code 'd3' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1022_oth_diag3_icd.value==null?e.push(["M1024","Since Other diagnoses 3 ICD is blank, then payment diagnoses 'd3' ICD must be blank."]):this.m1022_oth_diag3_icd.value[0]!="V"&&e.push(["M1022","If the payment diagnoses 'd3' is not blank, then other diagnosis 3 ICD should be a V-code"])),this.m1024_pmt_diag_icd_d3.value==null&&this.m1024_pmt_diag_icd_d4.value!=null&&e.push(["M1024","Since Payment diagnoses 'd3' is blank, then payment diagnoses 'd4' must be blank."]),this.m1024_pmt_diag_icd_d4.value&&(pmtDiagsd4=[this.m1024_pmt_diag_icd_a4,this.m1024_pmt_diag_icd_b4,this.m1024_pmt_diag_icd_c4],Ext.each(pmtDiagsd4,function(t){this.m1024_pmt_diag_icd_d4.value==t.value&&e.push(["M1024","The payment diagnosis code 'd4' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1024_pmt_diag_icd_e3.value&&(pmtDiagse3=[this.m1024_pmt_diag_icd_a3,this.m1024_pmt_diag_icd_b3,this.m1024_pmt_diag_icd_c3,this.m1024_pmt_diag_icd_d3],Ext.each(pmtDiagse3,function(t){this.m1024_pmt_diag_icd_e3.value==t.value&&e.push(["M1024","The payment diagnosis code 'e3' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1022_oth_diag4_icd.value==null?e.push(["M1024","Since Other diagnoses 4 ICD is blank, then payment diagnoses 'e3' ICD must be blank."]):this.m1022_oth_diag4_icd.value[0]!="V"&&e.push(["M1022","If the payment diagnoses 'e3' is not blank, then other diagnosis 4 ICD should be a V-code"])),this.m1024_pmt_diag_icd_e3.value==null&&this.m1024_pmt_diag_icd_e4.value!=null&&e.push(["M1024","Since Payment diagnoses 'e3' is blank, then payment diagnoses 'e4' must be blank."]),this.m1024_pmt_diag_icd_e4.value&&(pmtDiagse4=[this.m1024_pmt_diag_icd_a4,this.m1024_pmt_diag_icd_b4,this.m1024_pmt_diag_icd_c4,this.m1024_pmt_diag_icd_d4],Ext.each(pmtDiagse4,function(t){this.m1024_pmt_diag_icd_e4.value==t.value&&e.push(["M1024","The payment diagnosis code 'e4' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1024_pmt_diag_icd_f3.value&&(pmtDiagsf3=[this.m1024_pmt_diag_icd_a3,this.m1024_pmt_diag_icd_b3,this.m1024_pmt_diag_icd_c3,this.m1024_pmt_diag_icd_d3,this.m1024_pmt_diag_icd_e3],Ext.each(pmtDiagsf3,function(t){this.m1024_pmt_diag_icd_f3.value==t.value&&e.push(["M1024","The payment diagnosis code 'f3' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1022_oth_diag5_icd.value==null?e.push(["M1024","Since Other diagnoses 5 ICD is blank, then payment diagnoses 'f3' ICD must be blank."]):this.m1022_oth_diag5_icd.value[0]!="V"&&e.push(["M1022","If the payment diagnoses 'f3' is not blank, then other diagnosis 5 ICD should be a V-code"])),this.m1024_pmt_diag_icd_f3.value==null&&this.m1024_pmt_diag_icd_f4.value!=null&&e.push(["M1024","Since Payment diagnoses 'f3' is blank, then payment diagnoses 'f4' must be blank."]),this.m1024_pmt_diag_icd_f4.value&&(pmtDiagsf4=[this.m1024_pmt_diag_icd_a4,this.m1024_pmt_diag_icd_b4,this.m1024_pmt_diag_icd_c4,this.m1024_pmt_diag_icd_d4,this.m1024_pmt_diag_icd_e4],Ext.each(pmtDiagsf4,function(t){this.m1024_pmt_diag_icd_f4.value==t.value&&e.push(["M1024","The payment diagnosis code 'f4' cannot be the same as the "+this.getMessage(t.name)])},this)),e},getMessage:function(e){return icd_codes={},icd_codes.m1020_primary_diag_icd="primary diagnosis code 'a1'.",icd_codes.m1022_oth_diag1_icd="other diagnosis code 'b1'.",icd_codes.m1022_oth_diag2_icd="other diagnosis code 'c1'.",icd_codes.m1022_oth_diag3_icd="other diagnosis code 'd1'.",icd_codes.m1022_oth_diag4_icd="other diagnosis code 'e1'.",icd_codes.m1022_oth_diag5_icd="other diagnosis code 'f1'.",icd_codes.m1024_pmt_diag_icd_a3="payment diagnosis code 'a3'.",icd_codes.m1024_pmt_diag_icd_b3="payment diagnosis code 'b3'.",icd_codes.m1024_pmt_diag_icd_c3="payment diagnosis code 'c3'.",icd_codes.m1024_pmt_diag_icd_d3="payment diagnosis code 'd3'.",icd_codes.m1024_pmt_diag_icd_e3="payment diagnosis code 'e3'.",icd_codes.m1024_pmt_diag_icd_a4="payment diagnosis code 'a4'.",icd_codes.m1024_pmt_diag_icd_b4="payment diagnosis code 'b4'.",icd_codes.m1024_pmt_diag_icd_c4="payment diagnosis code 'c4'.",icd_codes.m1024_pmt_diag_icd_d4="payment diagnosis code 'd4'.",icd_codes.m1024_pmt_diag_icd_e4="payment diagnosis code 'e4'.",icd_codes[e]},pmtDiagIcdCodes:function(e){this.m1024_pmt_diag_icd_a3.value?this.m1020PrimaryDiagIcd.value[0]!="V"&&e.push(["M1024","Primary Diagnoses code should be a V-code."]):this.m1024_pmt_diag_icd_a3.value==null&&this.m1024_pmt_diag_icd_a4.value!==null&&e.push(["M1024","If the payment diagnosis code 'A3' is blank then the payment diagnosis code 'A4' must also be blank."])},serverValidationRequiredFields:function(){return["m1022_oth_diag3_icd","m1022_oth_diag4_icd","m1022_oth_diag5_icd","m1024_pmt_diag_icd_d3","m1024_pmt_diag_icd_d4","m1024_pmt_diag_icd_e3","m1024_pmt_diag_icd_e4","m1024_pmt_diag_icd_f3","m1024_pmt_diag_icd_f4"]},serverValidationRequiredFieldsSuffix:function(){return["d1","e1","f1","d3","d4","e3","e4","f3","f4"]},disableSeverity:function(){Ext.each(this.M1024SeverityAndPmtFieldsName,function(e,t){Ext.each(e,function(e,t){fields=this.mainScope.query("[name="+e+"]"),Ext.each(fields,function(e,t){e.disable()},this)},this)},this)},resetM1022OthDiag5Severity:function(){this.m1022_oth_diag5_icd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1022_oth_diag5_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1022_oth_diag5_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1022_oth_diag5_icd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1022_oth_diag5_severity]").forEach(function(e){e.setValue(" ")})},this)},resetM1022OthDiag4Severity:function(){this.m1022_oth_diag4_icd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1022_oth_diag4_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1022_oth_diag4_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1022_oth_diag4_icd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1022_oth_diag4_severity]").forEach(function(e){e.setValue(" ")})},this)},resetM1022OthDiag3Severity:function(){this.m1022_oth_diag3_icd.on("select",function(e){e.value==" "||e.value==null?this.query("[name=m1022_oth_diag3_severity]").forEach(function(e){e.setValue(" ")}):(e.value[0]=="V"||e.value[0]=="E")&&this.query("[name=m1022_oth_diag3_severity]").forEach(function(e){e.setValue(" ")})},this),this.m1022_oth_diag3_icd.on("change",function(e){(e.value==" "||e.value==null)&&this.query("[name=m1022_oth_diag3_severity]").forEach(function(e){e.setValue(" ")})},this)},enableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.enable()},this)},this)},disableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.disable()},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1020PrimaryDiagIcd=this.mainScope.down("[name=m1020_primary_diag_icd]"),this.m1020PrimaryDiagSeverity=this.mainScope.down("[name=m1020_primary_diag_severity]"),this.m1022_oth_diag1_icd=this.mainScope.down("[name=m1022_oth_diag1_icd]"),this.m1022_oth_diag2_icd=this.mainScope.down("[name=m1022_oth_diag2_icd]"),this.m1022_oth_diag3_icd=this.mainScope.down("[name=m1022_oth_diag3_icd]"),this.m1022_oth_diag4_icd=this.mainScope.down("[name=m1022_oth_diag4_icd]"),this.m1022_oth_diag5_icd=this.mainScope.down("[name=m1022_oth_diag5_icd]"),this.m1022_oth_diag1_severity=this.mainScope.down("[name=m1022_oth_diag1_severity]"),this.m1022_oth_diag2_severity=this.mainScope.down("[name=m1022_oth_diag2_severity]"),this.m1022_oth_diag3_severity=this.mainScope.down("[name=m1022_oth_diag3_severity]"),this.m1022_oth_diag4_severity=this.mainScope.down("[name=m1022_oth_diag4_severity]"),this.m1022_oth_diag5_severity=this.mainScope.down("[name=m1022_oth_diag5_severity]"),this.m1024_pmt_diag_icd_a3=this.mainScope.down("[name=m1024_pmt_diag_icd_a3]"),this.m1024_pmt_diag_icd_a4=this.mainScope.down("[name=m1024_pmt_diag_icd_a4]"),this.m1024_pmt_diag_icd_b3=this.mainScope.down("[name=m1024_pmt_diag_icd_b3]"),this.m1024_pmt_diag_icd_b4=this.mainScope.down("[name=m1024_pmt_diag_icd_b4]"),this.m1024_pmt_diag_icd_c3=this.mainScope.down("[name=m1024_pmt_diag_icd_c3]"),this.m1024_pmt_diag_icd_c4=this.mainScope.down("[name=m1024_pmt_diag_icd_c4]"),this.m1024_pmt_diag_icd_d3=this.mainScope.down("[name=m1024_pmt_diag_icd_d3]"),this.m1024_pmt_diag_icd_d4=this.mainScope.down("[name=m1024_pmt_diag_icd_d4]"),this.m1024_pmt_diag_icd_e3=this.mainScope.down("[name=m1024_pmt_diag_icd_e3]"),this.m1024_pmt_diag_icd_e4=this.mainScope.down("[name=m1024_pmt_diag_icd_e4]"),this.m1024_pmt_diag_icd_f3=this.mainScope.down("[name=m1024_pmt_diag_icd_f3]"),this.m1024_pmt_diag_icd_f4=this.mainScope.down("[name=m1024_pmt_diag_icd_f4]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.resetM1022OthDiag3Severity(),this.resetM1022OthDiag4Severity(),this.resetM1022OthDiag5Severity(),this.m1022ICDs=[this.m1022_oth_diag3_icd,this.m1022_oth_diag4_icd,this.m1022_oth_diag5_icd],this.M1024SeverityAndPmtFieldsName=[["m1022_oth_diag3_severity","m1024_pmt_diag_icd_d3","m1024_pmt_diag_icd_d4"],["m1022_oth_diag4_severity","m1024_pmt_diag_icd_e3","m1024_pmt_diag_icd_e4"],["m1022_oth_diag5_severity","m1024_pmt_diag_icd_f3","m1024_pmt_diag_icd_f4"]],this.codeIsVcodeDisableFieldsList=[["m1022_oth_diag3_severity"],["m1022_oth_diag4_severity"],["m1022_oth_diag5_severity"]],Ext.each(this.m1022ICDs,function(e,t){e.on("select",function(e){e.value==null&&e.value==""?this.disableFields(this.M1024SeverityAndPmtFieldsName[t]):e.value[0]!="V"&&e.value[0]!="E"?this.enableFields(this.M1024SeverityAndPmtFieldsName[t]):(e.value[0]=="V"||e.value[0]=="E")&&this.disableFields(this.codeIsVcodeDisableFieldsList[t])},this)},this)}}),Ext.define("Ext.panel.PrimaryPaymentM1023M1025",{extend:"Ext.panel.Panel",alias:"widget.primaryPaymentM1023M1025",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:5,width:853,layout:{align:"stretch",type:"hbox"},items:[{xtype:"label",flex:1,width:376,text:"(M1021) Primary Diagnosis & (M1023) Other Diagnoses"},{xtype:"label",flex:1,width:787,text:"(M1025) Optional Diagnoses (OPTIONAL) (not used for payment)"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"panel",border:0,disabled:!1,floating:!1,width:1027,layout:{align:"middle",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:218,text:"Column 1"},{xtype:"label",padding:"10px",width:203,text:"Column 2"},{xtype:"label",padding:"10px",width:218,text:"Column 3"},{xtype:"label",padding:"10px",width:337,text:"Column 4"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:218,text:"Diagnoses (Sequencing of diagnoses should reflect the seriousness of each condition and support the disciplines and services provided). "},{xtype:"label",padding:"10px",width:203,text:"ICD-10-CM and symptom  control rating for each  condition.  Note that the sequencing of  these ratings may not match  the sequencing of the  diagnoses."},{xtype:"label",padding:"10px",width:218,text:"May be completed if a Z-code is  assigned to Column 2  and the underlying diagnosis is resolved."},{xtype:"label",padding:"10px",width:337,text:"Complete only if the Optional Diagnoses is a multiple coding situation (for example: a manifestation code). "}]},{xtype:"panel",border:0,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"label",padding:"10px",width:218,text:"Description "},{xtype:"label",padding:"10px",width:203,text:"ICD-10-CM /  Symptom Control Rating"},{xtype:"label",padding:"10px",width:212,text:"Description /  ICD-10-CM "},{xtype:"label",padding:"10px",width:337,text:"Description / ICD-10-CM"}]},{xtype:"panel",border:0,disabled:!1,floating:!1,margin:5,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1023_oth_diag3_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1023) Other Diagnoses (All ICD-10-CM codes allowed) d1.",cls:"oasis_green",itemId:"oth_diag_d1",labelAlign:"top"},{xtype:"radiogroup",padding:2,margin:"10 0 0 5",width:214,fieldLabel:"(M1023) Severity rating d2.",cls:"oasis_green",itemId:"sev_rate_d2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1023_oth_diag3_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1023_oth_diag3_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1023_oth_diag3_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1023_oth_diag3_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1023_oth_diag3_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1023_oth_diag3_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_d3",padding:2,margin:"10 0 0 5",width:212,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) d3.",cls:"oasis_green",itemId:"opt_diag_d3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_d4",padding:2,margin:"10 0 0 5",width:208,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) d4.",cls:"oasis_green",itemId:"opt_diag_d4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1023_oth_diag4_icd",padding:2,margin:"10 0 0 0",width:197,fieldLabel:"(M1023) Other Diagnoses (All ICD-10-CM codes allowed) e1.",cls:"oasis_green",itemId:"oth_diag_e1",labelAlign:"top"},{xtype:"radiogroup",padding:2,width:214,margin:"10 0 0 5",fieldLabel:"(M1023) Severity rating e2.",cls:"oasis_green",itemId:"oth_diag_e2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1023_oth_diag4_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1023_oth_diag4_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1023_oth_diag4_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1023_oth_diag4_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1023_oth_diag4_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1023_oth_diag4_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_e3",padding:2,margin:"10 0 0 5",width:212,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) e3.",cls:"oasis_green",itemId:"opt_diag_e3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_e4",padding:2,margin:"10 0 0 5",width:207,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) e4.",cls:"oasis_green",itemId:"opt_diag_e4",labelAlign:"top"}]},{xtype:"panel",border:0,margin:5,disabled:!1,floating:!1,width:1049,layout:{align:"stretch",type:"hbox"},suspendLayout:!1,items:[{xtype:"netzkeremotecombo",name:"m1023_oth_diag5_icd",margin:"10 0 0 0",padding:2,width:197,fieldLabel:"(M1023) Other Diagnoses (All ICD-10-CM codes allowed) f1.",cls:"oasis_green",itemId:"oth_diag_f1",labelAlign:"top"},{xtype:"radiogroup",margin:"10 0 0 5",padding:2,width:214,fieldLabel:"(M1023) Severity rating f2.",cls:"oasis_green",itemId:"oth_diag_f2",labelAlign:"top",items:[{xtype:"radiofield",name:"m1023_oth_diag5_severity",boxLabel:"NA",width:"41px",checked:!0,inputValue:" "},{xtype:"radiofield",name:"m1023_oth_diag5_severity",inputValue:"00",boxLabel:"0"},{xtype:"radiofield",name:"m1023_oth_diag5_severity",inputValue:"01",boxLabel:"1"},{xtype:"radiofield",name:"m1023_oth_diag5_severity",inputValue:"02",boxLabel:"2"},{xtype:"radiofield",name:"m1023_oth_diag5_severity",inputValue:"03",boxLabel:"3"},{xtype:"radiofield",name:"m1023_oth_diag5_severity",inputValue:"04",boxLabel:"4"}]},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_f3",padding:2,margin:"10 0 0 5",width:212,fieldLabel:"(M1025) Optional Diagnoses (V, W, X, Y, Z codes NOT allowed) f3.",cls:"oasis_green",itemId:"opt_diag_f3",labelAlign:"top"},{xtype:"netzkeremotecombo",name:"m1025_opt_diag_icd_f4",padding:2,margin:"10 0 0 5",width:207,fieldLabel:"(M1025) Optional Diagnoses 2 (V, W, X, Y, Z codes NOT allowed) f4.",cls:"oasis_green",itemId:"opt_diag_f4",labelAlign:"top"}]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;if(s||this.infoCompletedDt.value>=t)o=!0;return this.m1023_oth_diag3_icd.value&&o?(otherDiags3=[this.m1021PrimaryDiagIcd,this.m1023_oth_diag1_icd,this.m1023_oth_diag2_icd],this.m1023_oth_diag2_icd.value==null&&e.push(["M1023","Since other diagnosis code 'c1' is blank, then other diagnosis code 'd1' must also be blank."]),Ext.each(otherDiags3,function(t){this.m1023_oth_diag3_icd.value==t.value&&e.push(["M1023","The other diagnosis code 'd1' cannot be the same as the "+this.getMessage(t.name)])},this),this.checkValue(this.m1023_oth_diag3_icd)&&this.m1023_oth_diag3_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnosis code 'd1' first character is 'V or W or X or Y or Z (i.e., V-Code)', then other diagnosis severity 'd2' must also be blank."]),!this.checkValue(this.m1023_oth_diag3_icd)&&this.m1023_oth_diag3_severity.getGroupValue()==" "&&e.push(["M1023","Select the other diagnosis 'd2' severity."])):this.m1023_oth_diag3_icd.value==null&&this.m1023_oth_diag3_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnosis code 'd1' is blank, then other diagnosis severity 'd2' must also be blank."]),this.m1023_oth_diag4_icd.value&&o?(otherDiags4=[this.m1021PrimaryDiagIcd,this.m1023_oth_diag1_icd,this.m1023_oth_diag3_icd,this.m1023_oth_diag2_icd],this.m1023_oth_diag3_icd.value==null&&e.push(["M1023","Since other diagnosis code 'd1' is blank, then other diagnosis code 'e1' must also be blank."]),Ext.each(otherDiags4,function(t){this.m1023_oth_diag4_icd.value==t.value&&e.push(["M1023","The other diagnosis code 'e1' cannot be the same as the "+this.getMessage(t.name)])},this),this.checkValue(this.m1023_oth_diag4_icd)&&this.m1023_oth_diag4_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnosis code 'e1' first character is 'V or W or X or Y or Z(i.e., V-Code)', then other diagnosis severity 'e2' must also be blank."]),!this.checkValue(this.m1023_oth_diag4_icd)&&this.m1023_oth_diag4_severity.getGroupValue()==" "&&e.push(["M1023","Select the other diagnosis 'e2' severity."])):this.m1023_oth_diag4_icd.value==null&&this.m1023_oth_diag4_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnosis code 'e1' is blank, then other diagnosis severity 'e2' must also be blank."]),this.m1023_oth_diag5_icd.value&&o?(otherDiags5=[this.m1021PrimaryDiagIcd,this.m1023_oth_diag1_icd,this.m1023_oth_diag3_icd,this.m1023_oth_diag2_icd,this.m1023_oth_diag4_icd],this.m1023_oth_diag4_icd.value==null&&this.m1023_oth_diag5_icd.value!=null&&e.push(["M1023","Since other diagnosis code 'e1' is blank, then other diagnosis code 'f1' must also be blank."]),Ext.each(otherDiags5,function(t){this.m1023_oth_diag5_icd.value==t.value&&e.push(["M1023","The other diagnosis code 'f1' cannot be the same as the "+this.getMessage(t.name)])},this),this.checkValue(this.m1023_oth_diag5_icd)&&this.m1023_oth_diag5_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnoses code 'f1' first character is 'V or W or X or Y or Z(i.e., V-Code)', then other diagnosis severity 'f2' must also be blank."]),!this.checkValue(this.m1023_oth_diag5_icd)&&this.m1023_oth_diag5_severity.getGroupValue()==" "&&e.push(["M1023","Select the other diagnosis code 'f2' severity."])):this.m1023_oth_diag5_icd.value==null&&this.m1023_oth_diag5_severity.getGroupValue()!=" "&&e.push(["M1023","Since other diagnosis code 'f1' is blank, then other diagnosis severity 'f2' must also be blank."]),this.m1025_opt_diag_icd_d3.value&&(optDiagsd3=[this.m1025_opt_diag_icd_a3,this.m1025_opt_diag_icd_b3,this.m1025_opt_diag_icd_c3],this.m1023_oth_diag3_icd.value==null?e.push(["M1025","Since other diagnosis code 'd1' is blank, then optional diagnosis code 'd3' must also be blank."]):this.m1023_oth_diag3_icd&&this.m1023_oth_diag3_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'd3' is not blank, then other diagnosis code 'd1' should be a 'Z' code"]),Ext.each(optDiagsd3,function(t){this.m1025_opt_diag_icd_d3.value==t.value&&e.push(["M1025","The optional diagnosis code 'd3' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1025_opt_diag_icd_d4.value&&(optDiagsd4=[this.m1025_opt_diag_icd_a4,this.m1025_opt_diag_icd_b4,this.m1025_opt_diag_icd_c4],this.m1025_opt_diag_icd_d3.value==null?e.push(["M1025","Since optional diagnosis code 'd3' is blank, then optional diagnosis code 'd4' must also be blank."]):this.m1023_oth_diag3_icd.value&&this.m1023_oth_diag3_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'd4' is not blank, then other diagnosis code 'd1' should be a 'Z' code"]),Ext.each(optDiagsd4,function(t){this.m1025_opt_diag_icd_d4.value==t.value&&e.push(["M1025","The optional diagnosis code 'd4' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1025_opt_diag_icd_e3.value&&(optDiagse3=[this.m1025_opt_diag_icd_a3,this.m1025_opt_diag_icd_b3,this.m1025_opt_diag_icd_c3,this.m1025_opt_diag_icd_d3],this.m1023_oth_diag4_icd.value==null?e.push(["M1025","Since other diagnosis code 'e1' is blank, then optional diagnosis code 'e3' must also be blank."]):this.m1023_oth_diag4_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'e3' is not blank, then other diagnosis code 'e1' should be a 'Z' code"]),Ext.each(optDiagse3,function(t){this.m1025_opt_diag_icd_e3.value==t.value&&e.push(["M1025","The optional diagnosis code 'e3' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1025_opt_diag_icd_e4.value&&(optDiagse4=[this.m1025_opt_diag_icd_a4,this.m1025_opt_diag_icd_b4,this.m1025_opt_diag_icd_c4,this.m1025_opt_diag_icd_d4],this.m1025_opt_diag_icd_e3.value==null?e.push(["M1025","Since optional diagnosis code 'e3' is blank, then optional diagnosis code 'e4' must also be blank."]):this.m1023_oth_diag4_icd.value&&this.m1023_oth_diag4_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'e4' is not blank, then other diagnosis code 'e1' should be a 'Z' code"]),Ext.each(optDiagse4,function(t){this.m1025_opt_diag_icd_e4.value==t.value&&e.push(["M1025","The optional diagnosis code 'e4' cannot be the same as the "+this.getMessage(t.name)])},this)),this.m1025_opt_diag_icd_f3.value&&(optDiagsf3=[this.m1025_opt_diag_icd_a3,this.m1025_opt_diag_icd_b3,this.m1025_opt_diag_icd_c3,this.m1025_opt_diag_icd_d3,this.m1025_opt_diag_icd_e3],Ext.each(optDiagsf3,function(t){this.m1025_opt_diag_icd_f3.value==t.value&&e.push(["M1025","The optional diagnosis code 'f3' cannot be the same as the "+this.getMessage(t.name)])},this),this.m1023_oth_diag5_icd
.value==null?e.push(["M1025","Since other diagnosis code 'f1' is blank, then optional diagnosis code 'f3' must also be blank."]):this.m1023_oth_diag5_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'f3' is not blank, then other diagnosis code 'f1' should be a 'Z' code"])),this.m1025_opt_diag_icd_f4.value&&(optDiagsf4=[this.m1025_opt_diag_icd_a4,this.m1025_opt_diag_icd_b4,this.m1025_opt_diag_icd_c4,this.m1025_opt_diag_icd_d4,this.m1025_opt_diag_icd_e4],this.m1025_opt_diag_icd_f3.value==null?e.push(["M1025","Since optional diagnosis code 'f3' is blank, then optional diagnosis code 'f4' must also be blank."]):this.m1023_oth_diag5_icd.value&&this.m1023_oth_diag5_icd.value[0]!="Z"&&e.push(["M1023","If the optional diagnosis code 'f4' is not blank, then other diagnosis code 'f1' should be a 'Z' code"]),Ext.each(optDiagsf4,function(t){this.m1025_opt_diag_icd_f4.value==t.value&&e.push(["M1025","The optional diagnosis code 'f4' cannot be the same as the "+this.getMessage(t.name)])},this)),e},getMessage:function(e){return icd_codes={},icd_codes.m1021_primary_diag_icd="primary diagnosis code 'a1'.",icd_codes.m1023_oth_diag1_icd="other diagnosis code 'b1'.",icd_codes.m1023_oth_diag2_icd="other diagnosis code 'c1'.",icd_codes.m1023_oth_diag3_icd="other diagnosis code 'd1'.",icd_codes.m1023_oth_diag4_icd="other diagnosis code 'e1'.",icd_codes.m1023_oth_diag5_icd="other diagnosis code 'f1'.",icd_codes.m1025_opt_diag_icd_a3="optional diagnosis code 'a3'.",icd_codes.m1025_opt_diag_icd_b3="optional diagnosis code 'b3'.",icd_codes.m1025_opt_diag_icd_c3="optional diagnosis code 'c3'.",icd_codes.m1025_opt_diag_icd_d3="optional diagnosis code 'd3'.",icd_codes.m1025_opt_diag_icd_e3="optional diagnosis code 'e3'.",icd_codes.m1025_opt_diag_icd_a4="optional diagnosis code 'a4'.",icd_codes.m1025_opt_diag_icd_b4="optional diagnosis code 'b4'.",icd_codes.m1025_opt_diag_icd_c4="optional diagnosis code 'c4'.",icd_codes.m1025_opt_diag_icd_d4="optional diagnosis code 'd4'.",icd_codes.m1025_opt_diag_icd_e4="optional diagnosis code 'e4'.",icd_codes[e]},serverValidationRequiredFields:function(){return["m1025_opt_diag_icd_d3","m1025_opt_diag_icd_d4","m1025_opt_diag_icd_e3","m1025_opt_diag_icd_e4","m1025_opt_diag_icd_f3","m1025_opt_diag_icd_f4"]},serverValidationRequiredFieldsSuffix:function(){return["d3","d4","e3","e4","f3","f4"]},resetSeverity:function(e){Ext.each(e,function(e){e[0].on("select",function(t){t.value==" "||t.value==null?this.query("[name="+e[1].name+"]").forEach(function(e){e.setValue(" ")}):this.checkValue(t)&&this.query("[name="+e[1].name+"]").forEach(function(e){e.setValue(" ")}),e[0].on("change",function(t){(t.value==" "||t.value==null)&&this.query("[name="+e[1].name+"]").forEach(function(e){e.setValue(" ")})},this)},this)},this)},enableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.enable()},this)},this)},disableFields:function(e){Ext.each(e,function(e,t){var n=this.mainScope.query("[name="+e+"]");Ext.each(n,function(e,t){e.disable()},this)},this)},checkValue:function(e){return e.value[0]=="V"||e.value[0]=="W"||e.value[0]=="X"||e.value[0]=="Y"||e.value[0]=="Z"?!0:!1},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1021PrimaryDiagIcd=this.mainScope.down("[name=m1021_primary_diag_icd]"),this.m1021PrimaryDiagSeverity=this.mainScope.down("[name=m1021_primary_diag_severity]"),this.m1023_oth_diag1_icd=this.mainScope.down("[name=m1023_oth_diag1_icd]"),this.m1023_oth_diag2_icd=this.mainScope.down("[name=m1023_oth_diag2_icd]"),this.m1023_oth_diag3_icd=this.mainScope.down("[name=m1023_oth_diag3_icd]"),this.m1023_oth_diag4_icd=this.mainScope.down("[name=m1023_oth_diag4_icd]"),this.m1023_oth_diag5_icd=this.mainScope.down("[name=m1023_oth_diag5_icd]"),this.m1023_oth_diag1_severity=this.mainScope.down("[name=m1023_oth_diag1_severity]"),this.m1023_oth_diag2_severity=this.mainScope.down("[name=m1023_oth_diag2_severity]"),this.m1023_oth_diag3_severity=this.mainScope.down("[name=m1023_oth_diag3_severity]"),this.m1023_oth_diag4_severity=this.mainScope.down("[name=m1023_oth_diag4_severity]"),this.m1023_oth_diag5_severity=this.mainScope.down("[name=m1023_oth_diag5_severity]"),this.m1025_opt_diag_icd_a3=this.mainScope.down("[name=m1025_opt_diag_icd_a3]"),this.m1025_opt_diag_icd_a4=this.mainScope.down("[name=m1025_opt_diag_icd_a4]"),this.m1025_opt_diag_icd_b3=this.mainScope.down("[name=m1025_opt_diag_icd_b3]"),this.m1025_opt_diag_icd_b4=this.mainScope.down("[name=m1025_opt_diag_icd_b4]"),this.m1025_opt_diag_icd_c3=this.mainScope.down("[name=m1025_opt_diag_icd_c3]"),this.m1025_opt_diag_icd_c4=this.mainScope.down("[name=m1025_opt_diag_icd_c4]"),this.m1025_opt_diag_icd_d3=this.mainScope.down("[name=m1025_opt_diag_icd_d3]"),this.m1025_opt_diag_icd_d4=this.mainScope.down("[name=m1025_opt_diag_icd_d4]"),this.m1025_opt_diag_icd_e3=this.mainScope.down("[name=m1025_opt_diag_icd_e3]"),this.m1025_opt_diag_icd_e4=this.mainScope.down("[name=m1025_opt_diag_icd_e4]"),this.m1025_opt_diag_icd_f3=this.mainScope.down("[name=m1025_opt_diag_icd_f3]"),this.m1025_opt_diag_icd_f4=this.mainScope.down("[name=m1025_opt_diag_icd_f4]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.m1023ICDs=[this.m1023_oth_diag3_icd,this.m1023_oth_diag4_icd,this.m1023_oth_diag5_icd],this.codeEnableDisableList=[["m1023_oth_diag3_severity"],["m1023_oth_diag4_severity"],["m1023_oth_diag5_severity"]],this.resetIcdList=[[this.m1023_oth_diag3_icd,this.m1023_oth_diag3_severity],[this.m1023_oth_diag4_icd,this.m1023_oth_diag4_severity],[this.m1023_oth_diag5_icd,this.m1023_oth_diag5_severity]],this.resetSeverity(this.resetIcdList),Ext.each(this.m1023ICDs,function(e,t){e.on("select",function(e){this.checkValue(e)?this.disableFields(this.codeEnableDisableList[t]):this.checkValue(e)||this.enableFields(this.codeEnableDisableList[t])},this)},this)}}),Ext.define("Ext.panel.StatusRiskVaccineM1030M1036",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1030M1036",border:!1,margin:5,items:[{layout:"table",columns:2,auto_scroll:!0,border:!1,items:[{columns:1,height:450,border:!1,items:[{xtype:"checkboxgroup",fieldLabel:"(M1030) Therapies the patient receives at home: (Mark all that apply.)",cls:"oasis_green",itemId:"home_therapy",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1030_thh_iv_infusion",inputValue:"1",margin:5,boxLabel:"1 - Intravenous or infusion therapy (excludes TPN)"},{xtype:"checkboxfield",name:"m1030_thh_par_nutrition",inputValue:"1",margin:5,boxLabel:"2 - Parenteral nutrition (TPN or lipids)"},{xtype:"checkboxfield",name:"m1030_thh_ent_nutrition",inputValue:"1",margin:5,boxLabel:"3 - Enteral nutrition (nasogastric, gastrostomy, jejunostomy, or any other artificial entry into the alimentary canal)"},{xtype:"checkboxfield",name:"m1030_thh_none_above",inputValue:"1",margin:5,boxLabel:"4 - None of the above"}]},{xtype:"checkboxgroup",fieldLabel:"(M1032) Risk for Hospitalization: Which of the following signs or symptoms characterize this patient as at risk for hospitalization? (Mark all that apply.)",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1032_hosp_risk_rcnt_dcln",inputValue:"1",margin:5,boxLabel:"1 - Recent decline in mental, emotional, or behavioral status"},{xtype:"checkboxfield",name:"m1032_hosp_risk_mltpl_hospztn",inputValue:"1",margin:5,boxLabel:"2 - Multiple hospitalizations (2 or more) in the past 12 months"},{xtype:"checkboxfield",name:"m1032_hosp_risk_hstry_falls",inputValue:"1",margin:5,boxLabel:"3 - History of falls (2 or more falls - or any fall with an injury - in the past year)"},{xtype:"checkboxfield",name:"m1032_hosp_risk_5plus_mdctn",inputValue:"1",margin:5,boxLabel:"4 - Taking five or more medications"},{xtype:"checkboxfield",name:"m1032_hosp_risk_frailty",inputValue:"1",margin:5,boxLabel:"5 - Frailty indicators, e.g., weight loss, self-reported exhaustion"},{xtype:"checkboxfield",name:"m1032_hosp_risk_othr",inputValue:"1",margin:5,boxLabel:"6 - Other"},{xtype:"checkboxfield",name:"m1032_hosp_risk_none_above",inputValue:"1",margin:5,boxLabel:"7 - None of the above"}]}]},{columns:1,height:450,border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1034) Overall Status: Which description best fits the patient`s overall status? (Check one )",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"00",margin:5,boxLabel:"0 - The patient is stable with no heightened risk(s) for serious complications and death (beyond those typical of the patient`s age)."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"01",margin:5,boxLabel:"1 - The patient is temporarily facing high health risk(s) but is likely to return to being stable without heightened risk(s) for serious complications and death (beyond those typical of the patient`s age)."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"02",margin:5,boxLabel:"2 - The patient is likely to remain in fragile health and have ongoing high risk(s) of serious complications and death."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"03",margin:5,boxLabel:"3 - The patient has serious progressive conditions that could lead to death within a year."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"UK",margin:5,boxLabel:"UK - The patient`s situation is unknown or unclear."}]},{xtype:"checkboxgroup",fieldLabel:"(M1036) Risk Factors, either present or past, likely to affect current health status and/or outcome: (Mark all that apply.)",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1036_rsk_smoking",inputValue:"1",margin:5,boxLabel:"1 - Smoking"},{xtype:"checkboxfield",name:"m1036_rsk_obesity",inputValue:"1",margin:5,boxLabel:"2 - Obesity"},{xtype:"checkboxfield",name:"m1036_rsk_alcoholism",inputValue:"1",margin:5,boxLabel:"3 - Alcohol dependency"},{xtype:"checkboxfield",name:"m1036_rsk_drugs",inputValue:"1",margin:5,boxLabel:"4 - Drug dependency"},{xtype:"checkboxfield",name:"m1036_rsk_none",inputValue:"1",margin:5,boxLabel:"5 - None of the above"},{xtype:"checkboxfield",name:"m1036_rsk_unknown",margin:5,inputValue:"1",boxLabel:"UK - Unknown"}]}]}]}],onValidate:function(){var e=new Array;return m1034OvralStus=this.mainScope.down("radiofield[name=m1034_ptnt_ovral_stus]").getGroupValue(),this.m1030Infusion.value==0&&this.m1030ParNutrition.value==0&&this.m1030EntNutrition.value==0&&this.m1030NoneOfAbove.value==0&&e.push(["M1030","Select at least one Therapy that patient receives at home"]),this.m1032Dcln.value==0&&this.m1032Hosptztn.value==0&&this.m1032Falls.value==0&&this.m1032Mdctn.value==0&&this.m1032Frailty.value==0&&this.m1032Othr.value==0&&this.m1032NoneOfAbove.value==0&&e.push(["M1032","Select at least one item from Risk for Hospitalization"]),m1034OvralStus==null&&e.push(["M1034","Choose one option which describes the patient's overall status."]),this.m1036Smoking.value==0&&this.m1036Obesity.value==0&&this.m1036Alcoholism.value==0&&this.m1036Drugs.value==0&&this.m1036NoneOfAbove.value==0&&this.m1036Unknown.value==0&&e.push(["M1036","Select at least one Risk Factor which affect current health status."]),e},selectUnknownM1036:function(){this.m1036Unknown.on("change",function(e){e.value&&(Ext.each(this.m1036fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.m1036NoneOfAbove.setValue(!1))},this)},selectOtherValuesM1036:function(){Ext.each(this.m1036fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&(this.m1036NoneOfAbove.setValue(!1),this.m1036Unknown.setValue(!1))},this)},this)},selectNoneOfAboveM1036:function(){this.m1036NoneOfAbove.on("change",function(e){e.value&&(Ext.each(this.m1036fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.m1036Unknown.setValue(!1))},this)},selectOtherValuesM1032:function(){Ext.each(this.m1032fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1032NoneOfAbove.setValue(!1)},this)},this)},selectNoneOfAboveM1032:function(){this.m1032NoneOfAbove.on("change",function(e){e.value&&Ext.each(this.m1032fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectOtherValuesM1030:function(){Ext.each(this.m1030fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1030NoneOfAbove.setValue(!1)},this)},this)},selectNoneOfAboveM1030:function(){this.m1030NoneOfAbove.on("change",function(e){e.value&&Ext.each(this.m1030fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1030Infusion=this.mainScope.down("[name=m1030_thh_iv_infusion]"),this.m1030ParNutrition=this.mainScope.down("[name=m1030_thh_par_nutrition]"),this.m1030EntNutrition=this.mainScope.down("[name=m1030_thh_ent_nutrition]"),this.m1030NoneOfAbove=this.mainScope.down("[name=m1030_thh_none_above]"),this.m1030fields=["m1030_thh_iv_infusion","m1030_thh_par_nutrition","m1030_thh_ent_nutrition"],this.selectNoneOfAboveM1030(),this.selectOtherValuesM1030(),this.m1032NoneOfAbove=this.mainScope.down("[name=m1032_hosp_risk_none_above]"),this.m1032fields=["m1032_hosp_risk_rcnt_dcln","m1032_hosp_risk_mltpl_hospztn","m1032_hosp_risk_hstry_falls","m1032_hosp_risk_5plus_mdctn","m1032_hosp_risk_frailty","m1032_hosp_risk_othr"],this.m1032Dcln=this.mainScope.down("[name=m1032_hosp_risk_rcnt_dcln]"),this.m1032Hosptztn=this.mainScope.down("[name=m1032_hosp_risk_mltpl_hospztn]"),this.m1032Falls=this.mainScope.down("[name=m1032_hosp_risk_hstry_falls]"),this.m1032Mdctn=this.mainScope.down("[name=m1032_hosp_risk_5plus_mdctn]"),this.m1032Frailty=this.mainScope.down("[name=m1032_hosp_risk_frailty]"),this.m1032Othr=this.mainScope.down("[name=m1032_hosp_risk_othr]"),this.selectNoneOfAboveM1032(),this.selectOtherValuesM1032(),this.m1036NoneOfAbove=this.mainScope.down("[name=m1036_rsk_none]"),this.m1036Unknown=this.mainScope.down("[name=m1036_rsk_unknown]"),this.m1036fields=["m1036_rsk_smoking","m1036_rsk_obesity","m1036_rsk_alcoholism","m1036_rsk_drugs"],this.m1036Smoking=this.mainScope.down("[name=m1036_rsk_smoking]"),this.m1036Obesity=this.mainScope.down("[name=m1036_rsk_obesity]"),this.m1036Alcoholism=this.mainScope.down("[name=m1036_rsk_alcoholism]"),this.m1036Drugs=this.mainScope.down("[name=m1036_rsk_drugs]"),this.selectNoneOfAboveM1036(),this.selectOtherValuesM1036(),this.selectUnknownM1036()}}),Ext.define("Ext.panel.StatusRiskVaccineM1030M1036C1",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1030M1036C1",border:!1,margin:5,items:[{layout:"table",columns:2,autoScroll:!0,border:!1,items:[{columns:1,height:540,border:!1,items:[{xtype:"checkboxgroup",fieldLabel:"(M1030) Therapies the patient receives at home: (Mark all that apply.)",cls:"oasis_green",itemId:"home_therapy",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1030_thh_iv_infusion",inputValue:"1",margin:5,boxLabel:"1 - Intravenous or infusion therapy (excludes TPN)"},{xtype:"checkboxfield",name:"m1030_thh_par_nutrition",inputValue:"1",margin:5,boxLabel:"2 - Parenteral nutrition (TPN or lipids)"},{xtype:"checkboxfield",name:"m1030_thh_ent_nutrition",inputValue:"1",margin:5,boxLabel:"3 - Enteral nutrition (nasogastric, gastrostomy, jejunostomy, or any other artificial entry into the alimentary canal)"},{xtype:"checkboxfield",name:"m1030_thh_none_above",inputValue:"1",margin:5,boxLabel:"4 - None of the above"}]},{xtype:"checkboxgroup",fieldLabel:"(M1033) Risk for Hospitalization: Which of the following signs or symptoms characterize this patient as at risk for hospitalization? (Mark all that apply.)",labelAlign:"top",itemId:"m1033_risk_hospitalization",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1033_hosp_risk_hstry_falls",inputValue:"1",margin:5,boxLabel:"1 - History of falls (2 or more falls - or any fall with an injury - in the past 12 months)"},{xtype:"checkboxfield",name:"m1033_hosp_risk_weight_loss",inputValue:"1",margin:5,boxLabel:"2 - Unintentional weight loss of a total of 10 pounds or more in the past 12 months"},{xtype:"checkboxfield",name:"m1033_hosp_risk_mltpl_hospztn",inputValue:"1",margin:5,boxLabel:"3 - Multiple hospitalizations (2 or more) in the past 6 months"},{xtype:"checkboxfield",name:"m1033_hosp_risk_mltpl_ed_visit",inputValue:"1",margin:5,boxLabel:"4 - Multiple emergency department visits (2 or more) in the past 6 months"},{xtype:"checkboxfield",name:"m1033_hosp_risk_mntl_bhv_dcln",inputValue:"1",margin:5,boxLabel:"5 - Decline in mental, emotional, or behavioral status in the past 3 months"},{xtype:"checkboxfield",name:"m1033_hosp_risk_compliance",inputValue:"1",margin:5,boxLabel:"6 - Reported or observed history of difficulty complying with any medical instructions (for example, medications, diet, exercise) in the past 3 months"},{xtype:"checkboxfield",name:"m1033_hosp_risk_5plus_mdctn",inputValue:"1",margin:5,boxLabel:"7 - Currently taking 5 or more medications"},{xtype:"checkboxfield",name:"m1033_hosp_risk_crnt_exhstn",inputValue:"1",margin:5,boxLabel:"8 - Currently reports exhaustion"},{xtype:"checkboxfield",name:"m1033_hosp_risk_othr_risk",inputValue:"1",margin:5,boxLabel:"9 - Other risk(s) not listed in 1 - 8"},{xtype:"checkboxfield",name:"m1033_hosp_risk_none_above",inputValue:"1",margin:5,boxLabel:"10 - None of the above"}]}]},{columns:1,height:540,border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1034) Overall Status: Which description best fits the patient`s overall status? (Check one )",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"00",margin:5,boxLabel:"0 - The patient is stable with no heightened risk(s) for serious complications and death (beyond those typical of the patient`s age)."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"01",margin:5,boxLabel:"1 - The patient is temporarily facing high health risk(s) but is likely to return to being stable without heightened risk(s) for serious complications and death (beyond those typical of the patient`s age)."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"02",margin:5,boxLabel:"2 - The patient is likely to remain in fragile health and have ongoing high risk(s) of serious complications and death."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"03",margin:5,boxLabel:"3 - The patient has serious progressive conditions that could lead to death within a year."},{xtype:"radiofield",name:"m1034_ptnt_ovral_stus",inputValue:"UK",margin:5,boxLabel:"UK - The patient`s situation is unknown or unclear."}]},{xtype:"checkboxgroup",fieldLabel:"(M1036) Risk Factors, either present or past, likely to affect current health status and/or outcome: (Mark all that apply.)",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1036_rsk_smoking",inputValue:"1",margin:5,boxLabel:"1 - Smoking"},{xtype:"checkboxfield",name:"m1036_rsk_obesity",inputValue:"1",margin:5,boxLabel:"2 - Obesity"},{xtype:"checkboxfield",name:"m1036_rsk_alcoholism",inputValue:"1",margin:5,boxLabel:"3 - Alcohol dependency"},{xtype:"checkboxfield",name:"m1036_rsk_drugs",inputValue:"1",margin:5,boxLabel:"4 - Drug dependency"},{xtype:"checkboxfield",name:"m1036_rsk_none",inputValue:"1",margin:5,boxLabel:"5 - None of the above"},{xtype:"checkboxfield",name:"m1036_rsk_unknown",margin:5,inputValue:"1",boxLabel:"UK - Unknown"}]}]}]}],onValidate:function(){var e=new Array;return m1034OvralStus=this.mainScope.down("radiofield[name=m1034_ptnt_ovral_stus]").getGroupValue(),this.m1030Infusion.value==0&&this.m1030ParNutrition.value==0&&this.m1030EntNutrition.value==0&&this.m1030NoneOfAbove.value==0&&e.push(["M1030","Select at least one Therapy that patient receives at home."]),this.m1033HospRiskHstryFalls.value==0&&this.m1033HospRiskWeightLoss.value==0&&this.m1033HospRiskMltplHospztn.value==0&&this.m1033HospRiskMltplEdVisit.value==0&&this.m1033HospRiskRcntDcln.value==0&&this.m1033HospRiskReptdHstry.value==0&&this.m1033HospRisk5plusMdctn.value==0&&this.m1033HospRiskReportsExhaustion.value==0&&this.m1033HospRiskOther.value==0&&this.m1033HospRiskNoneAbove.value==0&&e.push(["M1033","Select at least one item from Risk for Hospitalization."]),m1034OvralStus==null&&e.push(["M1034","Choose one option which describes the patient's overall status."]),this.m1036Smoking.value==0&&this.m1036Obesity.value==0&&this.m1036Alcoholism.value==0&&this.m1036Drugs.value==0&&this.m1036NoneOfAbove.value==0&&this.m1036Unknown.value==0&&e.push(["M1036","Select at least one Risk Factor which affect current health status."]),e},selectUnknownM1036:function(){this.m1036Unknown.on("change",function(e){e.value&&(Ext.each(this.m1036fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.m1036NoneOfAbove.setValue(!1))},this)},selectOtherValuesM1036:function(){Ext.each(this.m1036fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&(this.m1036NoneOfAbove.setValue(!1),this.m1036Unknown.setValue(!1))},this)},this)},selectNoneOfAboveM1036:function(){this.m1036NoneOfAbove.on("change",function(e){e.value&&(Ext.each(this.m1036fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this),this.m1036Unknown.setValue(!1))},this)},selectOtherValuesM1030:function(){Ext.each(this.m1030fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1030NoneOfAbove.setValue(!1)},this)},this)},selectNoneOfAboveM1030:function(){this.m1030NoneOfAbove.on("change",function(e){e.value&&Ext.each(this.m1030fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectNoneOfAboveM1033:function(){this.m1033HospRiskNoneAbove.on("change",function(e){e.value&&Ext.each(this.m1033fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectOtherValuesM1033:function(){Ext.each(this.m1033fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1033HospRiskNoneAbove.setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1030Infusion=this.mainScope.down("[name=m1030_thh_iv_infusion]"),this.m1030ParNutrition=this.mainScope.down("[name=m1030_thh_par_nutrition]"),this.m1030EntNutrition=this.mainScope.down("[name=m1030_thh_ent_nutrition]"),this.m1030NoneOfAbove=this.mainScope.down("[name=m1030_thh_none_above]"),this.m1033HospRiskHstryFalls=this.mainScope.down("[name = m1033_hosp_risk_hstry_falls]"),this.m1033HospRiskWeightLoss=this.mainScope.down("[name = m1033_hosp_risk_weight_loss]"),this.m1033HospRiskMltplHospztn=this.mainScope.down("[name = m1033_hosp_risk_mltpl_hospztn]"),this.m1033HospRiskMltplEdVisit=this.mainScope.down("[name = m1033_hosp_risk_mltpl_ed_visit]"),this.m1033HospRiskRcntDcln=this.mainScope.down("[name = m1033_hosp_risk_mntl_bhv_dcln]"),this.m1033HospRiskReptdHstry=this.mainScope.down("[name = m1033_hosp_risk_compliance]"),this.m1033HospRisk5plusMdctn=this.mainScope.down("[name = m1033_hosp_risk_5plus_mdctn]"),this.m1033HospRiskReportsExhaustion=this.mainScope.down("[name = m1033_hosp_risk_crnt_exhstn]"),this.m1033HospRiskOther=this.mainScope.down("[name = m1033_hosp_risk_othr_risk]"),this.m1033HospRiskNoneAbove=this.mainScope.down("[name = m1033_hosp_risk_none_above]"),this.m1030fields=["m1030_thh_iv_infusion","m1030_thh_par_nutrition","m1030_thh_ent_nutrition"],this.m1033fields=["m1033_hosp_risk_hstry_falls","m1033_hosp_risk_weight_loss","m1033_hosp_risk_mltpl_hospztn","m1033_hosp_risk_mltpl_ed_visit","m1033_hosp_risk_mntl_bhv_dcln","m1033_hosp_risk_compliance","m1033_hosp_risk_5plus_mdctn","m1033_hosp_risk_crnt_exhstn","m1033_hosp_risk_othr_risk"],this.selectNoneOfAboveM1030(),this.selectOtherValuesM1030(),this.selectNoneOfAboveM1033(),this.selectOtherValuesM1033(),this.m1036NoneOfAbove=this.mainScope.down("[name=m1036_rsk_none]"),this.m1036Unknown=this.mainScope.down("[name=m1036_rsk_unknown]"),this.m1036fields=["m1036_rsk_smoking","m1036_rsk_obesity","m1036_rsk_alcoholism","m1036_rsk_drugs"],this.m1036Smoking=this.mainScope.down("[name=m1036_rsk_smoking]"),this.m1036Obesity=this.mainScope.down("[name=m1036_rsk_obesity]"),this.m1036Alcoholism=this.mainScope.down("[name=m1036_rsk_alcoholism]"),this.m1036Drugs=this.mainScope.down("[name=m1036_rsk_drugs]"),this.selectNoneOfAboveM1036(),this.selectOtherValuesM1036(),this.selectUnknownM1036()}}),Ext.define("Ext.panel.livingarrangmentm1100",{extend:"Ext.panel.Panel",alias:"widget.livingarrangmentm1100",border:!1,margin:5,items:[{xtype:"label",margin:5,html:"(M1100) Patient Living Situation: Which of the following best describes the patient's residential circumstance and availability of assistance? (Check <u>one</u> box only.) ",cls:"oasis_blue",itemId:"pat_living_sit"},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:6},defaults:{bodyStyle:"padding: 5px; background-color: #CCE6FF;"},items:[{xtype:"label",text:"Living Arrangement",rowspan:2,style:"font-weight:bold;vertical-align:middle; margin-left:20px;margin-right:auto",height:75,width:180,border:!1},{html:"Availability of Assistance",colspan:5,style:"font-weight:bold;text-align:center",border:!1},{html:"Around the clock",style:"text-align:center;",width:88,height:58,border:!1},{html:"Regular daytime",style:"text-align:center;",width:88,height:58,border:!1},{html:"Regular nighttime",style:"text-align:center;",width:88,height:58,border:!1},{html:"Occasional / short-term assistance",style:"text-align:center;",width:88,height:58,border:!1},{html:"No assistance available",style:"text-align:center;",width:88,height:58,border:!1},{html:"<b>a.</b> Patient lives alone",width:180,border:!1},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"01",boxLabel:"01",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"02",boxLabel:"02",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"03",boxLabel:"03",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"04",boxLabel:"04",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"05",boxLabel:"05",padding:"0 0 0 30px"},{html:"<b>b.</b> Patient lives with other person(s) in the home",width:180,border:!1},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"06",boxLabel:"06",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"07",boxLabel:"07",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"08",boxLabel:"08",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"09",boxLabel:"09",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"10",boxLabel:"10",padding:"0 0 0 30px"},{html:"<b>c.</b> Patient lives in congregate situation (for example, assisted living, residential care home)",width:180,border:!1},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"11",boxLabel:"11",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"12",boxLabel:"12",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"13",boxLabel:"13",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"14",boxLabel:"14",padding:"0 0 0 30px"},{xtype:"radiofield",name:"m1100_ptnt_lvg_stutn",inputValue:"15",boxLabel:"15",padding:"0 0 0 30px"}]}],onValidate:function(){var e=new Array,t=!1;return Ext.each(this.patient_living_stutn_group,function(e,n){e.checked==1&&(t=!0)},this),t==0&&e.push(["M1100","Patient Living Situation is required."]),e},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.patient_living_stutn_group=this.mainScope.query("radiofield[name=m1100_ptnt_lvg_stutn]")}}),Ext.define("Ext.panel.LivingArrangementsPoc",{extend:"Ext.panel.Panel",alias:"widget.livingArrangementsPoc",layout:"hbox",items:[{flex:1,xtype:"fieldset",minWidth:400,title:"Caregiver(s)",height:650,margin:5,items:[{xtype:"textfield",labelAlign:"top",isHeader:!1,name:"living_arrangement_caregiver_name",fieldLabel:"Primary Caregiver (name)"},{xtype:"textfield",labelAlign:"top",isHeader:!1,name:"living_arrangement_caregiver_phone_number",fieldLabel:"Phone Number (if different from patient)"},{xtype:"textfield",labelAlign:"top",isHeader:!1,name:"living_arrangement_relationship",fieldLabel:"Relationship"},{xtype:"textarea",labelAlign:"top",isHeader:!1,cols:50,name:"living_arrangement_other_caregivers",fieldLabel:"List name/relationship of other caregiver(s) (other than home health staff) and the specific assistance they give with medical cares, ADLs, and/or IADLs"},{xtype:"checkboxgroup",labelAlign:"top",isHeader:!1,fieldLabel:"Able to safely care for patient",items:[{xtype:"checkboxfield",name:"living_arrangement_safely_care",boxLabel:"Yes",inputValue:"Y"},{xtype:"checkboxfield",name:"living_arrangement_safely_care",boxLabel:"No",inputValue:"N"}]},{xtype:"textarea",labelAlign:"top",cols:50,isHeader:!1,name:"living_arrangement_comments",fieldLabel:"Comments"},{xtype:"textarea",labelAlign:"top",cols:50,isHeader:!1,name:"living_arrangement_other_agencies",fieldLabel:"Other agencies/co-ordination of care"}]},{margin:5,flex:1,minWidth:700,height:650,border:!1,items:[{header:!1,layout:"hbox",border:!1,items:[{xtype:"fieldset",title:"Safety Measures",flex:1,margin:3,items:[{xtype:"checkboxgroup",fieldLabel:"",labelAlign:"top",flex:1,columns:2,items:[{xtype:"checkboxfield",name:"safety_measures",boxLabel:"1 - Bleeding precautions",inputValue:"1"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"2 - O2 precautions",inputValue:"2"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"3 - Seizure precautions",inputValue:"3"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"4 - Fall precautions",inputValue:"4"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"5 - Aspiration precautions",inputValue:"5"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"6 - Siderails up",inputValue:"6"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"7 - Elevate head of bed",inputValue:"7"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"8 - 24 hr. supervision",inputValue:"8"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"9 - Clear pathways",inputValue:"9"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"10 - Lock w/c with transfers",inputValue:"10"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"11 - Walker",inputValue:"11"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"12 - Infection control measures",inputValue:"12"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"13 - cane",inputValue:"13"},{xtype:"checkboxfield",name:"safety_measures",boxLabel:"14 - Other",inputValue:"14"},{xtype:"textfield",fieldLabel:"Other",labelWidth:40,isHeader:!1,name:"other_safety_measures"}]}]},{flex:1,xtype:"fieldset",margin:3,title:"Emergency planning/fire safety",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",text:""},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Fire extinguisher",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_fire_extinguisher",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_fire_extinguisher",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Smoke detectors on all levels of home",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_smoke_detectors",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_smoke_detectors",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Tested and functioning",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_tested_and_functioning",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_tested_and_functioning",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"More than one exit",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_more_than_one_exit",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_more_than_one_exit",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Plan for exit",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_plan_for_exit",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_plan_for_exit",boxLabel:"N"
,margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Plan for power failure",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"emergency_plan_for_power_failure",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"emergency_plan_for_power_failure",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]}]}]},{header:!1,layout:"hbox",border:!1,items:[{flex:1,xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:"Safety hazards in the home",margin:3,items:[{xtype:"label",text:""},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Unsound structure",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"unsound_structure",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"unsound_structure",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Inadequate heating/cooling/electricity",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"inadequate_heating_cooling_electricity",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"inadequate_heating_cooling_electricity",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Inadequate sanitation/plumbing",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"inadequate_plumbing",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"inadequate_plumbing",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Inadequate refrigeration",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"inadequate_refrigeration",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"inadequate_refrigeration",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Unsafe gas/electrical appliances or outlets",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"unsafe_gas_electrical_outlets",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"unsafe_gas_electrical_outlets",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Inadequate running water",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"inadequate_running_water",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"inadequate_running_water",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Unsafe storage of supplies/equipment",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"unsafe_storage_of_equipment",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"unsafe_storage_of_equipment",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"No telephone available and/or unable to use phone",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"unable_to_use_phone",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"unable_to_use_phone",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Insects/rodents",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"insects",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"insects",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Medications stored safely",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"medications_stored_safely",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"medications_stored_safely",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]}]},{flex:1,xtype:"fieldset",title:"Oxygen Use",layout:{type:"vbox",align:"stretch"},margin:3,items:[{xtype:"label",text:""},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Signs posted",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"oxygen_use_sign_posted",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"oxygen_use_sign_posted",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"radiogroup",labelWidth:200,fieldLabel:"Handles smoking/flammables safely",isHeader:!1,layout:"hbox",items:[{xtype:"radiofield",name:"oxygen_use_handles_smoing_safely",boxLabel:"Y",margin:"0 5 0 0",inputValue:"Y"},{xtype:"radiofield",name:"oxygen_use_handles_smoing_safely",boxLabel:"N",margin:"0 0 0 5",inputValue:"N"}]},{xtype:"checkboxgroup",fieldLabel:"Oxygen back-up",isHeader:!1,labelAlign:"top",columns:3,items:[{xtype:"checkboxfield",name:"living_arrangement_oxygen_backup",boxLabel:"Available",inputValue:"1"},{xtype:"checkboxfield",name:"living_arrangement_oxygen_backup",boxLabel:"Knows how to use",inputValue:"2"},{xtype:"checkboxfield",name:"living_arrangement_oxygen_backup",boxLabel:"Electrical /fire safety",inputValue:"3"}]},{xtype:"textarea",cols:50,isHeader:!1,labelAlign:"top",fieldLabel:"Plan/Comments",name:"oxygen_use_plan_comments"}]}]}]}]}),Ext.define("Ext.panel.SensoryStatusM1200M1230",{extend:"Ext.panel.Panel",alias:"widget.sensoryStatusM1200M1230",border:!1,margin:5,items:[{xtype:"radiogroup",fieldLabel:"(M1200) Vision (with corrective lenses if the patient usually wears them)",width:"91%",cls:"oasis_green",itemId:"pat_vision",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1200_vision",inputValue:"00",margin:5,boxLabel:"0 - Normal vision: sees adequately in most situations; can see medication labels, newsprint."},{xtype:"radiofield",name:"m1200_vision",inputValue:"01",margin:5,boxLabel:"1 - Partially impaired: cannot see medication labels or newsprint, but can see obstacles in path, and the surrounding layout; can count fingers at arm`s length."},{xtype:"radiofield",name:"m1200_vision",inputValue:"02",margin:5,boxLabel:"2 - Severely impaired: cannot locate objects without hearing or touching them or patient nonresponsive."}]},{xtype:"radiogroup",fieldLabel:"(M1210) Ability to hear (with hearing aid or hearing appliance if normally used)",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1210_hearg_ablty",inputValue:"00",margin:5,boxLabel:"0 - Adequate: hears normal conversation without difficulty."},{xtype:"radiofield",name:"m1210_hearg_ablty",inputValue:"01",margin:5,boxLabel:"1 - Mildly to Moderately Impaired: difficulty hearing in some environments or speaker may need to increase volume or speak distinctly."},{xtype:"radiofield",name:"m1210_hearg_ablty",inputValue:"02",margin:5,boxLabel:"2 - Severely Impaired: absence of useful hearing."},{xtype:"radiofield",name:"m1210_hearg_ablty",inputValue:"UK",margin:5,boxLabel:"UK - Unable to assess hearing."}]},{xtype:"radiogroup",fieldLabel:"(M1220) Understanding of Verbal Content in patient's own language (with hearing aid or device if used)",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1220_undrstg_verbal_cntnt",inputValue:"00",margin:5,boxLabel:"0 - Understands: clear comprehension without cues or repetitions."},{xtype:"radiofield",name:"m1220_undrstg_verbal_cntnt",inputValue:"01",margin:5,boxLabel:"1 - Usually Understands: understands most conversations, but misses some part/intent of message. Requires cues at times to understand."},{xtype:"radiofield",name:"m1220_undrstg_verbal_cntnt",inputValue:"02",margin:5,boxLabel:"2 - Sometimes Understands: understands only basic conversations or simple, direct phrases. Frequently requires cues to understand."},{xtype:"radiofield",name:"m1220_undrstg_verbal_cntnt",inputValue:"03",margin:5,boxLabel:"3 - Rarely/Never Understands"},{xtype:"radiofield",name:"m1220_undrstg_verbal_cntnt",inputValue:"UK",margin:5,boxLabel:"UK - Unable to assess understanding."}]},{xtype:"radiogroup",fieldLabel:"(M1230) Speech and Oral (Verbal) Expression of Language (in patient`s own language)",labelAlign:"top",cls:"oasis_blue",width:"92%",itemId:"pat_speech_and_oral",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1230_speech",inputValue:"00",margin:5,boxLabel:"0 - Expresses complex ideas, feelings, and needs clearly, completely, and easily in all situations with no observable impairment."},{xtype:"radiofield",name:"m1230_speech",inputValue:"01",margin:5,boxLabel:"1 - Minimal difficulty in expressing ideas and needs (may take extra time; makes occasional errors in word choice, grammar or speech intelligibility; needs minimal prompting or assistance)."},{xtype:"radiofield",name:"m1230_speech",inputValue:"02",margin:5,boxLabel:"2 - Expresses simple ideas or needs with moderate difficulty (needs prompting or assistance,errors in word choice, organization or speech intelligibility). Speaks in phrases or short sentences."},{xtype:"radiofield",name:"m1230_speech",inputValue:"03",margin:5,boxLabel:"3 - Has severe difficulty expressing basic ideas or needs and requires maximal assistance or guessing by listener. Speech limited to single words or short phrases."},{xtype:"radiofield",name:"m1230_speech",inputValue:"04",margin:5,boxLabel:"4 - Unable to express basic needs even with maximal prompting or assistance but is not comatose or unresponsive (for example, speech is nonsensical or unintelligible)."},{xtype:"radiofield",name:"m1230_speech",inputValue:"05",margin:5,boxLabel:"5 - Patient nonresponsive or unable to speak."}]}],onValidate:function(e){var t=new Array;return m1200Vision=e.down("radiofield[name=m1200_vision]").getGroupValue(),m1210Hearg=e.down("radiofield[name=m1210_hearg_ablty]").getGroupValue(),m1220Verbal=e.down("radiofield[name=m1220_undrstg_verbal_cntnt]").getGroupValue(),m1230Speech=e.down("radiofield[name=m1230_speech]").getGroupValue(),m1200Vision==null&&t.push(["M1200","Select one item from Vision"]),m1210Hearg==null&&t.push(["M1210","Select one option from Patient's ability to hear."]),m1220Verbal==null&&t.push(["M1220","Select one mode of understanding the patient's Verbal Content."]),m1230Speech==null&&t.push(["M1230","Select at least one way how the patient is able to convey the Speech and Oral Communication."]),t}}),Ext.define("Ext.panel.SensoryStatusPoc",{extend:"Ext.panel.Panel",alias:"widget.sensoryStatusPoc",border:!1,margin:5,items:[{xtype:"panel",flex:1,border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"panel",flex:1,border:!1,margin:"5 3 5 5",header:!1,title:"My Panel",itemId:"eyes_panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",margin:"5 0 0 0",text:"EYES"},{xtype:"checkboxfield",margin:"5px",fieldLabel:"",name:"eyes",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"checkboxgroup",padding:"",fieldLabel:"",columns:3,items:[{xtype:"checkboxfield",name:"eyes",boxLabel:"Glasses",inputValue:"1"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Glaucoma",inputValue:"2"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Jaundice",inputValue:"3"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Contacts: R / L",inputValue:"4"},{xtype:"checkboxfield",name:"eyes_contacts",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"eyes_contacts",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Blurred vision",inputValue:"5"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Ptosis",inputValue:"6"}]},{xtype:"checkboxgroup",fieldLabel:"",columns:3,items:[{xtype:"checkboxfield",padding:"0 5 0 0",width:120,name:"eyes",boxLabel:"Prosthesis: R / L",inputValue:"7"},{xtype:"checkboxfield",name:"eyes_prosthesis",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"eyes_prosthesis",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",name:"eyes",boxLabel:"Blind R / L",inputValue:"8"},{xtype:"checkboxfield",name:"eyes_blind",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"eyes_blind",boxLabel:"Left",inputValue:"2"}]},{xtype:"panel",border:!1,margin:"0 0 0 5",header:!1,title:"My Panel",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"eyes",boxLabel:"Other",inputValue:"9"},{xtype:"textfield",fieldLabel:"",name:"eyes_other"},{xtype:"checkboxfield",fieldLabel:"",name:"eyes",boxLabel:"Infections",inputValue:"10"},{xtype:"textfield",fieldLabel:"",name:"infections_text"},{xtype:"checkboxfield",padding:"0 5 0 0",fieldLabel:"",name:"eyes",boxLabel:"Cataract surgery: Site",inputValue:"11"},{xtype:"textfield",fieldLabel:"",name:"cataract_surgery_site"},{xtype:"datefield",width:150,fieldLabel:"Date",labelWidth:30,name:"cataract_surgery_date"}]},{xtype:"label",text:"How does the impaired vision interfere/impact their function/safety?(explain)"},{xtype:"textareafield",margin:"5px",fieldLabel:"",name:"impaired_vision"}]},{xtype:"panel",flex:1,border:!1,margin:"5px 3px 5px 3px",header:!1,title:"My Panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,border:!1,margin:"5px",header:!1,title:"My Panel",itemId:"nose_panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",text:"NOSE"},{xtype:"checkboxfield",margin:"5px",fieldLabel:"",name:"nose",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"checkboxgroup",padding:"",fieldLabel:"",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"nose",boxLabel:"Congestion",inputValue:"1"},{xtype:"checkboxfield",name:"nose",boxLabel:"Epistaxis",inputValue:"2"},{xtype:"checkboxfield",name:"nose",boxLabel:"Loss of smell",inputValue:"3"},{xtype:"checkboxfield",name:"nose",boxLabel:"Sinus problem",inputValue:"4"},{xtype:"checkboxfield",name:"nose",boxLabel:"Other(specify)",inputValue:"5"}]},{xtype:"textareafield",fieldLabel:"",name:"nose_other",cols:15}]},{xtype:"panel",flex:1,border:!1,margin:"5px",header:!1,title:"My Panel",itemId:"throat_panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",text:"THROAT"},{xtype:"checkboxfield",margin:"5px",fieldLabel:"",name:"throat",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"checkboxgroup",border:!1,padding:"",fieldLabel:"",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"throat",boxLabel:"Dysphagia",inputValue:"1"},{xtype:"checkboxfield",name:"throat",boxLabel:"Hoarseness",inputValue:"2"},{xtype:"checkboxfield",name:"throat",boxLabel:"Lesions",inputValue:"3"},{xtype:"checkboxfield",name:"throat",boxLabel:"Sore throat",inputValue:"4"},{xtype:"checkboxfield",name:"throat",boxLabel:"Other(specify)",inputValue:"5"}]},{xtype:"textareafield",fieldLabel:"",name:"other_throat"}]}]},{xtype:"panel",flex:1,border:!1,margin:"5px 0 0 0",width:336,header:!1,title:"My Panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",border:!1,margin:"5 5 0 5",header:!1,title:"My Panel",itemId:"mouth_panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",text:"MOUTH"},{xtype:"checkboxfield",margin:"5px",fieldLabel:"",name:"mouth",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"checkboxgroup",padding:"",fieldLabel:"",columns:4,items:[{xtype:"checkboxfield",name:"mouth",boxLabel:"Dentures:",inputValue:"1"},{xtype:"checkboxfield",name:"dentures",boxLabel:"Upper",inputValue:"1"},{xtype:"checkboxfield",name:"dentures",boxLabel:"Lower",inputValue:"2"},{xtype:"checkboxfield",name:"dentures",boxLabel:"Partial",inputValue:"3"},{xtype:"checkboxfield",name:"mouth",boxLabel:"Masses",inputValue:"2"},{xtype:"checkboxfield",name:"mouth",boxLabel:"Tumors",inputValue:"3"},{xtype:"checkboxfield",name:"mouth",boxLabel:"Gingivitis",inputValue:"4"}]},{xtype:"checkboxgroup",margin:"0 5 0 5",width:336,fieldLabel:"",columns:2,items:[{xtype:"checkboxfield",name:"mouth",boxLabel:"Ulcerations",inputValue:"5"},{xtype:"checkboxfield",name:"mouth",boxLabel:"Toothache",inputValue:"6"},{xtype:"checkboxfield",width:150,name:"mouth",boxLabel:"Other(specify)",inputValue:"7"}]},{xtype:"textareafield",margin:"0 5 0 5",fieldLabel:"",name:"mouth_other"}]},{xtype:"panel",flex:1,border:!1,margin:"5px",header:!1,title:"My Panel",itemId:"ears_panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"label",text:"EARS"},{xtype:"checkboxfield",margin:"5px",fieldLabel:"",name:"ears",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"checkboxgroup",padding:"",fieldLabel:"",columns:3,items:[{xtype:"checkboxfield",name:"ears",boxLabel:"HOH: R / L",inputValue:"1"},{xtype:"checkboxfield",name:"hoh",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"hoh",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",name:"ears",boxLabel:"Deaf: R / L",inputValue:"2"},{xtype:"checkboxfield",name:"deaf",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"deaf",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",width:150,name:"ears",boxLabel:"Hearing aid: R / L",inputValue:"3"},{xtype:"checkboxfield",name:"hearing_aid",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"hearing_aid",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",name:"ears",boxLabel:"Tinnitus: R / L",inputValue:"4"},{xtype:"checkboxfield",name:"tinnitus",boxLabel:"Right",inputValue:"1"},{xtype:"checkboxfield",name:"tinnitus",boxLabel:"Left",inputValue:"2"},{xtype:"checkboxfield",name:"ears",boxLabel:"Vertigo",inputValue:"5"}]},{xtype:"checkboxfield",flex:1,margin:"0 5 0 5",name:"ears",boxLabel:"Other(specify)",inputValue:"6"},{xtype:"textareafield",margin:"0 5 0 5",fieldLabel:"",name:"ears_other"}]}]}]}],afterRender:function(){this.callParent();var e=this.query("[boxLabel=<b>No Problem</b>]");Ext.each(e,function(e){e.on("change",function(t){var n=t.up("#"+e.name+"_panel"),r=n.query("textfield, textarea, datefield, numberfield, checkboxgroup, radiogroup, checkboxfield, radiofield");Ext.each(r,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)},this)}}),Ext.define("Ext.panel.PainCarePlanM1240M1242",{extend:"Ext.panel.Panel",alias:"widget.painCarePlanM1240M1242",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1240) Has this patient had a formal Pain Assessment using a standardized, validated pain assessment tool (appropriate to the patient`s ability to communicate the severity of pain)?",labelAlign:"top",width:"92%",cls:"oasis_blue",itemId:"formal_pain_assesment",columns:1,margin:5,items:[{xtype:"radiofield",name:"m1240_frml_pain_asmt",inputValue:"00",margin:5,boxLabel:"0 - No standardized, validated assessment conducted"},{xtype:"radiofield",name:"m1240_frml_pain_asmt",inputValue:"01",margin:5,boxLabel:"1 - Yes, and it does not indicate severe pain"},{xtype:"radiofield",name:"m1240_frml_pain_asmt",inputValue:"02",margin:5,boxLabel:"2 - Yes, and it indicates severe pain"}]},{xtype:"radiogroup",fieldLabel:"(M1242) Frequency of Pain Interfering with patient`s activity or movement",labelAlign:"top",cls:"oasis_pink",width:"92%",itemId:"freq_of_pain",columns:1,margin:5,items:[{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"00",margin:5,boxLabel:"0 - Patient has no pain"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"01",margin:5,boxLabel:"1 - Patient has pain that does not interfere with activity or movement"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"02",margin:5,boxLabel:"2 - Less often than daily"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"03",margin:5,boxLabel:"3 - Daily, but not constantly"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"04",margin:5,boxLabel:"4 - All of the time"}]}],onValidate:function(e){var t=new Array;return m1240Pain=e.down("radiofield[name=m1240_frml_pain_asmt]").getGroupValue(),m1242Actvty=e.down("radiofield[name=m1242_pain_freq_actvty_mvmt]").getGroupValue(),m1240Pain==null&&t.push(["M1240","Select at least one Formal Pain Assessment using pain assessment Tool."]),m1242Actvty==null&&t.push(["M1242","Select at least one Frequency of Pain."]),t}}),Ext.define("Ext.panel.CarePlanPoc",{extend:"Ext.panel.Panel",alias:"widget.carePlanPoc",border:!1,margin:5,items:[{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,margin:"5px",title:"Intensity: (using scales below)",items:[{xtype:"label",margin:"150 5 5 150",padding:"5px",shrinkWrap:3,text:"Wong-Baker FACES Pain Rating Scale"},{xtype:"image",border:!1,height:140,width:500,src:"/assets/wong1.jpg"},{xtype:"slider",margin:"0 0 0 50",width:395,fieldLabel:"",name:"pain_scale",value:0,increment:1,maxValue:10},{xtype:"image",margin:"5px",width:470,src:"/assets/copy_rights.png"},{xtype:"checkboxgroup",width:571,fieldLabel:"Collected using",layout:{type:"checkboxgroup",autoFlex:!1},items:[{xtype:"checkboxfield",name:"intensity_scale",boxLabel:"FACES Scale",inputValue:"1"},{xtype:"checkboxfield",margin:"0 0 0 5",name:"intensity_scale",boxLabel:"0 - 10 Scale (subjective reporting)",inputValue:"2"}]}]},{xtype:"fieldset",flex:1,margin:"5px",title:"Patient Pain",items:[{xtype:"checkboxfield",anchor:"100%",fieldLabel:"",name:"patient_pain",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{xtype:"radiogroup",fieldLabel:"Is patient experiencing pain?",labelSeparator:" ",labelWidth:180,layout:{type:"hbox",align:"stretch"},items:[{xtype:"radiofield",name:"patient_experiencing",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",margin:"0 0 0 5px",name:"patient_experiencing",boxLabel:"No",inputValue:"N"}]},{xtype:"checkboxfield",anchor:"100%",fieldLabel:"",name:"patient_pain",boxLabel:"Unable to communicate",inputValue:"1"},{xtype:"checkboxgroup",fieldLabel:"Non -  verbals demonstrated",labelWidth:180,items:[{xtype:"checkboxfield",name:"patient_pain",boxLabel:"Diaphoresis",inputValue:"2"},{xtype:"checkboxfield",name:"patient_pain",boxLabel:"Grimacing",inputValue:"3"}]},{xtype:"panel",border:!1,layout:"column",header:!1,title:"My Panel",items:[{xtype:"checkboxfield",width:75,fieldLabel:"",name:"patient_pain",boxLabel:"Moaning",inputValue:"4"},{xtype:"checkboxfield",fieldLabel:"",name:"patient_pain",boxLabel:"Crying",inputValue:"5"},{xtype:"checkboxfield",margin:"0 5 0 5",fieldLabel:"",name:"patient_pain",boxLabel:"Guarding",inputValue:"6"},{xtype:"checkboxfield",margin:"0 5 0 0",fieldLabel:"",name:"patient_pain",boxLabel:"Irritability",inputValue:"7"},{xtype:"checkboxfield",margin:"0 10 0 0",fieldLabel:"",name:"patient_pain",boxLabel:"Anger",inputValue:"8"},{xtype:"checkboxfield",fieldLabel:"",name:"patient_pain",boxLabel:"Tense",inputValue:"9"},{xtype:"checkboxfield",width:100,fieldLabel:"",name:"patient_pain",boxLabel:"Restlessness",inputValue:"10"},{xtype:"checkboxfield",margin:"0 5 0 5",width:140,fieldLabel:"",name:"patient_pain",boxLabel:"Change in vital signs",inputValue:"11"},{xtype:"checkboxfield",margin:"0 5 0 0",width:120,fieldLabel:"",name:"patient_pain",boxLabel:"Self-assessment",inputValue:"12"}]},{xtype:"panel",border:!1,header:!1,title:"My Panel",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",fieldLabel:"",name:"patient_pain",boxLabel:"Other",inputValue:"13"},{xtype:"textfield",margin:"0 0 0 5px",fieldLabel:"",name:"other_patient_pain"},{xtype:"checkboxfield",fieldLabel:"",labelWidth:150,name:"patient_pain",boxLabel:"Implications",inputValue:"14"},{xtype:"textareafield",height:56,margin:"0 0 0 5px",width:376,fieldLabel:"",name:"implications_patient_pain"}]},{xtype:"textareafield",anchor:"100%",height:78,fieldLabel:"How does the pain interfere/impact their functional/activity level? (explain)",labelAlign:"top",name:"pain_interfere"}]}]},{xtype:"panel",flex:1,border:!1,height:396,shrinkWrapDock:3,header:!1,title:"My Panel",items:[{xtype:"tabpanel",deferredRender:!1,plain:!0,items:[{xtype:"panel",title:"Pain Assessment",items:[{xtype:"fieldset",margin:"5px",title:"Pain Assessment",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",border:!1,height:36,layout:"column",header:!1,title:"My Panel",items:[{xtype:"label",height:13,margin:"0 0 0 20px",shrinkWrap:3,width:34},{xtype:"label",height:16,width:148,text:"Location"},{xtype:"label",height:16,width:140,text:"Onset"},{xtype:"label",height:16,width:61,text:"Intensity (0-10)"},{xtype:"label",height:16,width:75,text:"Worst Pain Gets (0-10)"},{xtype:"label",height:16,width:75,text:"Best Pain Gets (0-10)"},{xtype:"label",height:16,width:132,text:"Description"},{xtype:"label",height:16,width:149,text:"Aggravating Factors"},{xtype:"label",height:16,width:75,text:"Relieving Factors"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:1,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location1"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset1"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity1",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst1",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best1",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description1"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors1"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors1"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:2,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location2"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset2"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity2",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst2",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best2",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description2"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors2"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors2"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:3,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location3"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset3"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity3",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst3",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best3",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description3"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors3"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors3"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:4,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location4"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset4"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity4",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst4",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best4",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description4"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors4"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors4"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:5,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location5"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset5"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity5",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst5",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best5",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description5"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors5"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors5"}]},{xtype:"panel",border:!1,layout:"table",header:!1,title:"My Panel",items:[{xtype:"textfield",width:42,fieldLabel:"",labelAlign:"top",value:6,readOnly:!0,emptyText:""},{xtype:"textfield",fieldLabel:"",labelAlign:"top",labelWidth:50,name:"pain_location6"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_onset6"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_intensity6",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_worst6",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:74,labelAlign:"right",name:"pain_best6",value:"/10",fieldStyle:"text-align: right"},{xtype:"textfield",width:126,fieldLabel:"",labelAlign:"top",name:"pain_description6"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_aggravating_factors6"},{xtype:"textfield",fieldLabel:"",labelAlign:"top",name:"pain_relieving_factors6"}]}]}]},{xtype:"panel",title:"Frequency",items:[{xtype:"fieldset",margin:"5px",title:"Frequency",items:[{xtype:"checkboxgroup",fieldLabel:"Frequency",columns:"auto",layout:{type:"checkboxgroup",autoFlex:!1},items:[{xtype:"checkboxfield",name:"pain_frequency",boxLabel:"Occassionally",inputValue:"1"},{xtype:"checkboxfield",margin:"0 5 0 5",name:"pain_frequency",boxLabel:"Continuous",inputValue:"2"},{xtype:"checkboxfield",name:"pain_frequency",boxLabel:"Intermittent",inputValue:"3"}]},{xtype:"checkboxgroup",width:738,fieldLabel:"What makes pain better?",labelWidth:180,items:[{xtype:"checkboxfield",name:"pain_better",boxLabel:"Movement",inputValue:"1"},{xtype:"checkboxfield",name:"pain_better",boxLabel:"Ambulation",inputValue:"2"},{xtype:"checkboxfield",name:"pain_better",boxLabel:"Immobility",inputValue:"3"},{xtype:"checkboxfield",name:"pain_better",boxLabel:"Other",inputValue:"4"},{xtype:"textfield",fieldLabel:"",name:"pain_better_other"}]},{xtype:"textfield",width:605,fieldLabel:"Is there a pattern to the pain? (explain)",labelWidth:230,name:"pain_pattern"},{xtype:"checkboxgroup",fieldLabel:"How often is breakthrough medication needed?",labelWidth:280,layout:{type:"checkboxgroup",autoFlex:!1},items:[{xtype:"checkboxfield",name:"medication_needed",boxLabel:"Never",inputValue:"1"},{xtype:"checkboxfield",margin:"0 5 0 5",name:"medication_needed",boxLabel:"Less than daily",inputValue:"2"},{xtype:"checkboxfield",name:"medication_needed",boxLabel:"2-3 times/day",inputValue:"3"},{xtype:"checkboxfield",margin:"0 5 0 5",name:"medication_needed",boxLabel:"More than 3 times/day",inputValue:"4"}]},{xtype:"checkboxgroup",width:472,fieldLabel:"Does the pain radiate?",labelWidth:150,items:[{xtype:"checkboxfield",name:"pain_radiate",boxLabel:"Occasionally",inputValue:"1"},{xtype:"checkboxfield",name:"pain_radiate",boxLabel:"Continuously",inputValue:"2"},{xtype:"checkboxfield",name:"pain_radiate",boxLabel:"Intermittent",inputValue:"3"}]},{xtype:"radiogroup",width:417,fieldLabel:"Current pain control medications adequate",labelWidth:280,items:[{xtype:"radiofield",name:"medication_adequate",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"medication_adequate",boxLabel:"No",inputValue:"N"}]},{xtype:"textfield",width:603,fieldLabel:"Comment",name:"comment"},{xtype:"radiogroup",width:307,fieldLabel:"Implications Care Plan",labelWidth:180,items:[{xtype:"radiofield",name:"implications_care_plan",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"implications_care_plan",boxLabel:"No",inputValue:"N"}]},{xtype:"checkboxgroup",width:399,fieldLabel:"Has the physician been notified by the",labelWidth:235,items:[{xtype:"checkboxfield",name:"notified_by",boxLabel:"Patient",inputValue:"1"},{xtype:"checkboxfield",name:"notified_by",boxLabel:"Staff",inputValue:"2"}]},{xtype:"textfield",anchor:"100%",fieldLabel:"What was the outcome?",labelWidth:150,name:"outcome"}]}]}]}]}],afterRender:function(){this.callParent();var e=this.query("[title=Patient Pain]")[0],t=e.query("[boxLabel=<b>No Problem</b>]")[0];t.on("change",function(n){var r=e.query("textfield, textareafield, datefield, numberfield, checkboxgroup, radiogroup, checkboxfield, radiofield");Ext.each(r,function(e){t!=e&&t.checked==1?
e.xtype=="radiofield"||e.xtype=="checkboxfield"?e.disable().setValue(!1):e.disable().setValue():e.enable()},this)},this)}}),Ext.define("Ext.panel.IntegumentaryStatusM1300M1306",{extend:"Ext.panel.Panel",alias:"widget.integumentaryStatusM1300M1306",border:!1,margin:5,items:[{xtype:"radiogroup",width:822,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1300) Pressure Ulcer Assessment: Was this patient assessed for Risk of Developing Pressure Ulcers?",cls:"oasis_blue",itemId:"pre_ulcr_assmnt",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"0 - No assessment conducted",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1306]</text>'},{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"1 - Yes, based on an evaluation of clinical factors, (for example: mobility, incontinence, nutrition, etc.,    without use of standardized tool",inputValue:"01"},{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"2 - Yes, using a standardized, validated tool (for example: Braden Scale, Norton Scale)",inputValue:"02"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1302) Does this patient have a Risk of Developing Pressure Ulcers?",cls:"oasis_blue",itemId:"rsk_dev_pres_ulcr",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1302_risk_of_prsr_ulcr",boxLabel:"0 - No ",inputValue:"0"},{xtype:"radiofield",name:"m1302_risk_of_prsr_ulcr",boxLabel:"1- Yes",inputValue:"1"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:'(M1306) Does this patient have at least one Unhealed Pressure Ulcer at Stage II or Higher or designated as "unstageable"?',cls:"oasis_blue",itemId:"unhealed_pre_ulcr",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"0 - No ",inputValue:"0",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1322]</text>'},{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"1 - Yes",inputValue:"1"}]}],onValidate:function(e){var t=new Array;return m1300_value=e.down("[name=m1300_prsr_ulcr_risk_asmt]").getGroupValue(),m1302_value=e.down("[name=m1302_risk_of_prsr_ulcr]").getGroupValue(),m1306_value=e.down("[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),m1308_numberfields=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),m1300Risk=e.down("radiofield[name=m1300_prsr_ulcr_risk_asmt]").getGroupValue(),m1306Unhold=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),m1300Risk==null&&t.push(["M1300","Select how Pressure Ulcer Assessment conducted."]),m1306Unhold==null&&t.push(["M1306","Please choose (Yes/No) whether the patient has one Unhealed Pressure Ulcer at stage II or treated as 'unstageable'."]),(m1300_value=="01"||m1300_value=="02")&&m1302_value==null&&t.push(["M1302","Please choose (Yes/No) whether the patient has risk of developing pressure ulcers."]),m1306_value=="01"&&m1308_numberfields.every(function(e){if(e.value==null)return t.push(["M1308","M1308_NBR_PRSULC_STG2 through M1308_NSTG_DEEP_TISUE_SOC_ROC cannot be blank."]),!1}),t},applyM1306UnhealedPressureUlcerRules:function(){this.super_main.down("#integumentarystatus2_m1308").query("[xtype=numberfield]").forEach(function(e){e.enable()}),this.super_main.down("#pressure_ulcer_m1310_m1324").query("[xtype=numberfield]").forEach(function(e){e.enable()}),this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]").forEach(function(e){e.enable()})},skipM1307ToM1320:function(){this.super_main.down("#integumentarystatus2_m1308").query("[xtype=numberfield]").forEach(function(e){e.disable().setValue()}),this.super_main.down("#pressure_ulcer_m1310_m1324").query("[xtype=numberfield]").forEach(function(e){e.disable().setValue()}),this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]").forEach(function(e){e.disable().setValue(!1)})},m1306UnhealedPressure:function(){this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[0].on("change",function(e){e.value&&this.skipM1307ToM1320()},this),this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[1].on("change",function(e){e.value&&this.applyM1306UnhealedPressureUlcerRules()},this)},m1300PressureUlcerAssessment:function(){this.query("[name=m1300_prsr_ulcr_risk_asmt]")[0].on("change",function(e){e.value?this.query("[name=m1302_risk_of_prsr_ulcr]").forEach(function(e){e.disable().setValue(!1)}):this.query("[name=m1302_risk_of_prsr_ulcr]").forEach(function(e){e.enable()})},this)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},initComponent:function(){this.callParent(),this.m1300PressureUlcerAssessment(),this.m1306UnhealedPressure()}}),Ext.define("Ext.panel.IntegumentaryPocComponent",{extend:"Ext.panel.Panel",alias:"widget.integumentaryPocComponent",border:!1,margin:5,items:[{xtype:"panel",layout:{align:"stretch",type:"vbox"},items:[{xtype:"panel",border:0,padding:"3px",layout:{align:"stretch",type:"hbox"},items:[{xtype:"fieldset",flex:.65,margin:"3px",layout:{type:"vbox"},title:"Integumentary",itemId:"integumentary_fieldset",items:[{xtype:"checkboxgroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"checkboxfield",anchor:"100%",fieldLabel:"",name:"integumentary",boxLabel:"<b>No Problem</b>",inputValue:"NP"}]},{xtype:"label",text:"Check all applicable conditions below"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Turgor",inputValue:"1"},{xtype:"radiogroup",width:218,margin:"0 0 0 10",items:[{xtype:"radiofield",name:"turgor",boxLabel:"Good",inputValue:"G"},{xtype:"radiofield",name:"turgor",boxLabel:"Poor",inputValue:"P"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"checkboxfield",name:"integumentary",boxLabel:"Itch",inputValue:"2"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Rash",inputValue:"3"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Dry",inputValue:"4"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Scaling",inputValue:"5"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Redness",inputValue:"6"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Bruises",inputValue:"7"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Ecchymosis",inputValue:"8"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Pallor",inputValue:"9"},{xtype:"checkboxfield",name:"integumentary",boxLabel:"Jaundice",inputValue:"10"}]},{xtype:"textfield",name:"other_integumentary",fieldLabel:"Other (specify)",labelWidth:90}]},{xtype:"fieldset",flex:.9,margin:"3px",layout:{type:"vbox"},title:"WOUND CARE: (Check all that apply)",items:[{xtype:"radiogroup",height:28,width:350,fieldLabel:"Wound care done during this visit",labelWidth:200,items:[{xtype:"radiofield",floating:!1,name:"wound_care",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"wound_care",boxLabel:"No",inputValue:"N"}]},{xtype:"textfield",fieldLabel:"Location(s) wound site",labelWidth:180,name:"wound_care_location"},{xtype:"label",text:"Soiled dressing removed by"},{border:!1,header:!1,layout:{type:"table",columns:2},fieldLabel:"Soiled dressing removed by",labelAlign:"top",items:[{xtype:"radiofield",name:"soiled_dressing",boxLabel:"Patient",inputValue:"PA",width:100},{xtype:"radiofield",name:"soiled_dressing",boxLabel:"RN",inputValue:"RN"},{xtype:"radiofield",name:"soiled_dressing",boxLabel:"Caregiver(name)",inputValue:"CG",width:120,margin:"5 0 5 0"},{xtype:"textfield",name:"soiled_dressing_cargiver",fieldLabel:"",width:120,margin:"5 0 5 0"}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"radiofield",name:"soiled_dressing",boxLabel:"PT",inputValue:"PT",margin:"0 16 0 0"},{xtype:"radiofield",name:"soiled_dressing",boxLabel:"Other",inputValue:"OTH",margin:"0 16 0 0"},{xtype:"textfield",name:"other_soiled_dressing",fieldLabel:"",width:120}]},{xtype:"checkboxgroup",layout:{type:"table",tableAttrs:{border:0},columns:2,width:150},margin:"10px 0 0 0",fieldLabel:"Technique",labelWidth:70,items:[{xtype:"checkboxfield",name:"wound_care_technique",boxLabel:"Sterile",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"wound_care_technique",boxLabel:"Clean",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{type:"table",tableAttrs:{border:0},columns:2},margin:"10px 0 0 0",fieldLabel:"",items:[{xtype:"checkboxfield",name:"wound_cleaned",boxLabel:"Wound cleaned with (specify)",inputValue:"1",margin:"2px"},{xtype:"textfield",name:"wound_cleaned_with",fieldLabel:"",width:120,margin:"0 0 0 5px"}]},{xtype:"checkboxgroup",layout:{type:"table",tableAttrs:{border:0},columns:2},margin:"10px 0 0 0",fieldLabel:"",items:[{xtype:"checkboxfield",name:"wound_irrigated",boxLabel:"Wound irrigated with (specify)",inputValue:"1",margin:"2px"},{xtype:"textfield",name:"wound_irrigated_with",fieldLabel:"",width:120,margin:"0 0 0 5px"}]},{xtype:"checkboxgroup",layout:{type:"table",tableAttrs:{border:0},columns:2},margin:"10px 0 0 0",fieldLabel:"",items:[{xtype:"checkboxfield",name:"wound_packed",boxLabel:"Wound packed with (specify)",inputValue:"1",margin:"2px"},{xtype:"textfield",name:"wound_packed_with",fieldLabel:"",width:120,margin:"0 0 0 5px"}]},{xtype:"checkboxgroup",layout:{type:"table",tableAttrs:{border:0},columns:2},margin:"10px 0 0 0",fieldLabel:"",items:[{xtype:"checkboxfield",name:"wound_dressing",boxLabel:"Wound dressing applied (specify)",inputValue:"1",labelWidth:400,margin:"2px"},{xtype:"textfield",name:"wound_dressing_applied",fieldLabel:"",width:100,margin:"0 0 0 5px"}]},{xtype:"radiogroup",height:28,width:350,fieldLabel:"Patient tolerated procedure well",labelWidth:200,items:[{xtype:"radiofield",floating:!1,name:"patient_tolerate",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"patient_tolerate",boxLabel:"No",inputValue:"N"}]},{xtype:"textfield",name:"wound_care_comments",fieldLabel:"Comments"}]},{xtype:"fieldset",flex:1,margin:"3px",layout:{type:"vbox"},title:"DIABETIC FOOT EXAM: (Check all that apply)",items:[{xtype:"textfield",fieldLabel:"Frequency of diabetic foot exam",labelWidth:220,name:"foot_diabetic_exam"},{xtype:"radiogroup",layout:{type:"table",tableAttrs:{border:0},columns:4},fieldLabel:"Done by",labelAlign:"top",items:[{xtype:"radiofield",name:"done_by",boxLabel:"Patient",inputValue:"PA",width:100},{xtype:"radiofield",name:"done_by",boxLabel:"RN ",inputValue:"RN"},{xtype:"radiofield",name:"done_by",boxLabel:"Caregiver(name)",inputValue:"CG",width:120},{xtype:"textfield",name:"care_giver_name",fieldLabel:"",width:120},{xtype:"radiofield",name:"done_by",boxLabel:"PT",inputValue:"PT"},{xtype:"radiofield",name:"done_by",boxLabel:"Other",inputValue:"OTH"},{xtype:"textfield",name:"other_done_by",fieldLabel:"",width:120}]},{xtype:"radiogroup",width:350,fieldLabel:"Exam by clinician this visit",labelWidth:200,margin:"10px 0 0 0",items:[{xtype:"radiofield",name:"exam_by_clinician",boxLabel:"Yes",inputValue:"Y"},{xtype:"radiofield",name:"exam_by_clinician",boxLabel:"No",inputValue:"N"}]},{xtype:"textfield",fieldLabel:"Integument findings",labelWidth:220,name:"integument_findings",margin:"10px 0 0 0"},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Pedal pulses",labelWidth:80,items:[{xtype:"checkboxfield",name:"pedal_pulses",boxLabel:"Present right/left",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"warm_pedal_pulses",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"warm_pedal_pulses",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"",margin:"0, 0, 0, 85",items:[{xtype:"checkboxfield",name:"pedal_pulses",boxLabel:"Absent right/left",inputValue:"2",margin:"2px"},{xtype:"checkboxfield",name:"absent",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"absent",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"textfield",name:"diabetic_comments",fieldLabel:"Comment"},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Loss of sense of",labelWidth:100,items:[{xtype:"checkboxfield",name:"loss_of_sense",boxLabel:"Warm right/left",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"loss_of_sense_warm",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"loss_of_sense_warm",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"",margin:"0 0 0 105",items:[{xtype:"checkboxfield",name:"loss_of_sense",boxLabel:"Cold right/left",inputValue:"2",margin:"2px"},{xtype:"checkboxfield",name:"loss_of_sense_cold",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"loss_of_sense_cold",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"textfield",name:"loss_of_sense_comments",fieldLabel:"Comment"},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Neuropathy",labelWidth:80,items:[{xtype:"checkboxfield",name:"neuropathy",boxLabel:"Tingling right/left",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"tingling",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"tingling",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"",margin:"0 0 0 85",items:[{xtype:"checkboxfield",name:"neuropathy",boxLabel:"Burning right/left",inputValue:"2",margin:"2px"},{xtype:"checkboxfield",name:"burning",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"burning",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"Leg hair",labelWidth:80,items:[{xtype:"checkboxfield",name:"leg_hair",boxLabel:"Present right/left",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"present",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"present",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"checkboxgroup",layout:{align:"stretch",type:"hbox"},fieldLabel:"",margin:"0 0 0 85",items:[{xtype:"checkboxfield",name:"leg_hair",boxLabel:"Absent right/left",inputValue:"2",margin:"2px"},{xtype:"checkboxfield",name:"absent",boxLabel:"Right",inputValue:"1",margin:"2px"},{xtype:"checkboxfield",name:"absent",boxLabel:"Left",inputValue:"2",margin:"2px"}]},{xtype:"label",text:"Complete LEAP Diabetic Foot Screening per organizational guideline"}]}]},{xtype:"panel",border:0,padding:"3px",layout:{align:"stretch",type:"hbox"},items:[{xtype:"fieldset",flex:.7,margin:"3px",layout:{type:"vbox"},title:"WOUND CARE:",items:[{xtype:"checkboxgroup",layout:{align:"stretch",type:"vbox"},fieldLabel:""},{xtype:"checkboxgroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"2X2's",inputValue:"1"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"4X4's",inputValue:"2"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"ABD's",inputValue:"3"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Cotton tipped applicators",inputValue:"4"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Wound cleanser",inputValue:"5"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Wound gel",inputValue:"6"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Drain sponges",inputValue:"7"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Gloves",inputValue:"8"},{xtype:"radiogroup",width:250,height:20,margin:"0 0 5px 10px",fieldLabel:"",items:[{xtype:"radiofield",name:"wound_care_dme",boxLabel:"Sterile",inputValue:"9"},{xtype:"radiofield",name:"wound_care_dme",boxLabel:"Non-Sterile",inputValue:"10"}]},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Hydrocolloids",inputValue:"11"},{xtype:"numberfield",name:"kerlix_size",fieldLabel:"Kerlix Size",labelWidth:75,maxWidth:250},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Nu-gauze",inputValue:"12"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Saline",inputValue:"13"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Tape",inputValue:"14"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Transparent Dressing",inputValue:"15"},{xtype:"checkboxfield",name:"wound_care_dme",boxLabel:"Other",inputValue:"16"}]},{xtype:"textareafield",name:"other_wound_care_dme",fieldLabel:"",cols:15,width:350}]},{xtype:"fieldset",flex:.7,margin:"3px",layout:{type:"vbox"},title:"ENDOCRINE/HEMATOLOGY",itemId:"endocrine_fieldset",items:[{xtype:"checkboxgroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"<b>No Problem</b>",inputValue:"NP",align:"center"}]},{header:!1,border:!1,layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"label",text:"(Check all applicable items)"},{xtype:"checkboxfield",name:"endocrine",boxLabel:"Diabetes:",inputValue:"1"},{xtype:"panel",layout:"hbox",border:0,items:[{xtype:"radiofield",margin:"0 0 0 5",name:"diabetes",boxLabel:"Type I Juvenile",inputValue:"1"},{xtype:"radiofield",name:"diabetes",boxLabel:"Type II",inputValue:"2"}]},{xtype:"datefield",name:"diabetes_date",fieldLabel:"Date of onset"},{xtype:"checkboxfield",name:"endocrine",boxLabel:"Diet/Oral Control",inputValue:"2"},{xtype:"textfield",name:"other_diet_control",fieldLabel:"specify",margin:"0 0 0 5",labelAlign:"top"},{xtype:"checkboxfield",name:"endocrine",boxLabel:"Insulin dose/ frequency (specify)",inputValue:"4"},{xtype:"textareafield",name:"insulin_dose_frequency",fieldLabel:""},{xtype:"datefield",name:"insulin_since",fieldLabel:"On insulin since"},{xtype:"label",text:"Administered by:"},{xtype:"radiogroup",width:250,margin:"0 0 5px 10px",fieldLabel:"",columns:3,items:[{xtype:"radiofield",name:"endocrine_administered_by",boxLabel:"Self",inputValue:"SF"},{xtype:"radiofield",name:"endocrine_administered_by",boxLabel:"Caregiver",inputValue:"CG"},{xtype:"radiofield",name:"endocrine_administered_by",boxLabel:"Nurse",inputValue:"NR"},{xtype:"radiofield",name:"endocrine_administered_by",boxLabel:"Other",inputValue:"OTH"},{xtype:"textfield",name:"endocrine_administered_by_other",boxLabel:""}]},{xtype:"fieldcontainer",layout:"vbox",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"Hyperglycemia",inputValue:"5"},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"hyperglycemia",boxLabel:"Glycosuria",inputValue:"1",width:120},{xtype:"checkboxfield",name:"hyperglycemia",boxLabel:"Polyuria",inputValue:"2",width:120},{xtype:"checkboxfield",name:"hyperglycemia",boxLabel:"Polydipsia",inputValue:"3",width:120}]}]},{xtype:"fieldcontainer",layout:"vbox",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"Hypoglycemia",inputValue:"3"},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"hypoglycemia",boxLabel:"Sweats",inputValue:"1",width:120},{xtype:"checkboxfield",name:"hypoglycemia",boxLabel:"Polyphagia",inputValue:"2",width:120},{xtype:"checkboxfield",name:"hypoglycemia",boxLabel:"Weak",inputValue:"3",width:120},{xtype:"checkboxfield",name:"hypoglycemia",boxLabel:"Faint",inputValue:"4",width:120},{xtype:"checkboxfield",name:"hypoglycemia",boxLabel:"Stupor",inputValue:"5",width:120}]}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"textfield",fieldLabel:"A1c",name:"a1c",margin:"0 5 0 0",labelWidth:40},{xtype:"label",text:"%"}]},{xtype:"checkboxgroup",width:250,margin:"0 0 0 10px",fieldLabel:"",columns:2,items:[{xtype:"checkboxfield",name:"a1c_found",boxLabel:"Today's Visit",inputValue:"1"},{xtype:"checkboxfield",name:"a1c_found",boxLabel:"Patient Reported",inputValue:"2"},{xtype:"checkboxfield",name:"a1c_found",boxLabel:"Lab slip",inputValue:"3"}]},{header:!1,border:!1,layout:"hbox",width:320,items:[{xtype:"textfield",fieldLabel:"BS",name:"bs_weight",labelWidth:20,value:"mg/dL",fieldStyle:"text-align: right",flex:1},{xtype:"datefield",fieldLabel:"Date",name:"bs_date",labelWidth:40,flex:1},{xtype:"timefield",fieldLabel:"Time",name:"bs_time",labelWidth:40,flex:1}]},{xtype:"checkboxgroup",width:250,margin:"0 0 5px 10px",fieldLabel:"",columns:2,items:[{xtype:"checkboxfield",name:"bs",boxLabel:"FBS",inputValue:"1"},{xtype:"checkboxfield",name:"bs",boxLabel:"Before Meal",inputValue:"2"},{xtype:"checkboxfield",name:"bs",boxLabel:"Postprandial",inputValue:"3"},{xtype:"checkboxfield",name:"bs",boxLabel:"Random HS",inputValue:"4"}]},{xtype:"checkboxgroup",width:250,fieldLabel:"",layout:"hbox",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"Blood sugar ranges",inputValue:"6"},{xtype:"textfield",name:"blood_sugar_ranges"}]},{xtype:"radiogroup",width:280,height:40,margin:"0 0 5px 5px",labelAlign:"top",columns:2,items:[{xtype:"radiofield",margin:"0 0 0 5px",name:"blood_sugar_report",boxLabel:"Patient Report",inputValue:"1"},{xtype:"radiofield",margin:"0 0 0 5px",name:"blood_sugar_report",boxLabel:"Caregiver Report",inputValue:"2"}]},{xtype:"radiogroup",width:280,height:80,margin:"0 0 5px 5px",fieldLabel:"Monitored By",labelAlign:"top",columns:3,items:[{xtype:"radiofield",name:"monitored_by",boxLabel:"Self",inputValue:"SF"},{xtype:"radiofield",name:"monitored_by",boxLabel:"Caregiver",inputValue:"CG"},{xtype:"radiofield",name:"monitored_by",boxLabel:"Nurse",inputValue:"NR"},{xtype:"radiofield",name:"monitored_by",boxLabel:"Other",inputValue:"OTH"},{xtype:"textfield",name:"other_monitored_by",boxLabel:"",inputValue:"other"}]},{xtype:"textfield",margin:"0 0 0 5",name:"frequency_of_monitoring",fieldLabel:"Frequency of Monitoring",labelAlign:"top"},{xtype:"textfield",margin:"0 0 0 5",name:"competency",fieldLabel:"Competency with use of Glucometer",labelAlign:"top"},{xtype:"checkboxfield",boxLabel:"Disease Management Problems (explain)",name:"endocrine",inputValue:"9"},{xtype:"textareafield",BoxLabel:"",name:"disease_mgmt_text",inputValue:"disease_mgmt"},{border:!1,header:!1,layout:{type:"table",columns:2},margin:"0 0 5px 10px",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"Enlarged Thyroid",inputValue:"10",margin:"0 5 0 0",width:160},{xtype:"checkboxfield",name:"disease_effect",boxLabel:"Fatigue",inputValue:"1"}]},{border:!1,header:!1,layout:{type:"table",columns:3},margin:"0 0 5px 10px",items:[{xtype:"checkboxfield",name:"disease_effect",boxLabel:"Intolerance to heat/cold",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"disease_effect",boxLabel:"Other",inputValue:"3",margin:"0 5 0 0"},{xtype:"textfield",name:"other_disease_effect",fieldLabel:"",cols:20}]},{xtype:"checkboxfield",name:"endocrine",boxLabel:"Anemia (specify if known)",inputValue:"11"},{xtype:"textfield",name:"other_anaemia",fieldLabel:"",inputValue:"anaemia"},{xtype:"panel",margin:"0 0 5px 0",border:0,layout:"vbox",items:[{xtype:"checkboxfield",name:"endocrine",boxLabel:"Secondary bleed:",inputValue:"12"},{xtype:"checkboxgroup",layout:"hbox",width:350,items:[{xtype:"checkboxfield",margin:"0 0 0 10",name:"secondary",boxLabel:"GI",inputValue:"1"},{xtype:"checkboxfield",name:"secondary",boxLabel:"GU",inputValue:"2"},{xtype:"checkboxfield",name:"secondary",boxLabel:"GYN",inputValue:"3"},{xtype:"checkboxfield",name:"secondary",boxLabel:"Unknown",inputValue:"4",width:90},{xtype:"checkboxfield",name:"secondary",boxLabel:"Hemophilia",inputValue:"5"}]}]},{header:!1,border:!1,layout:"hbox",items:[{xtype:"checkboxfield",name:"secondary",margin:"0 0 0 10",boxLabel:"Other",inputValue:"6"},{xtype:"textfield",name:"secondary_other",margin:"0 0 5px 0"}]}]}]},{xtype:"fieldset",flex:.4,margin:"3px",title:"DIABETIC",items:[{xtype:"checkboxgroup",layout:{type:"vbox"},width:250,margin:"0 0 5px 10px",fieldLabel:"",items:[{xtype:"checkboxfield",name:"diabetic_supplies",boxLabel:"Chemstrips",inputValue:"1"},{xtype:"checkboxfield",name:"diabetic_supplies",boxLabel:"Syringes",inputValue:"2"},{xtype:"checkboxfield",name:"diabetic_supplies",boxLabel:"Other",inputValue:"3"},{xtype:"textareafield",name:"other_diabetic_supplies",fieldLabel:"",inputValue:"other"}]}]}]}]}],afterRender:function(){this.callParent();var e=this.query("[boxLabel=<b>No Problem</b>]");Ext.each(e,function(e){e.on("change",function(t){var n="#"+e.name+"_fieldset",r=t.up(n),i=r.query("textfield, textarea, datefield, numberfield, radiogroup, checkboxfield, radiofield");Ext.each(i,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)},this)}}),Ext.define("Ext.panel.IntegumentaryStatusM1306M1307",{extend:"Ext.panel.Panel",alias:"widget.integumentaryStatusM1306M1307",border:!1,margin:5,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:'(M1306) Does this patient have at least one Unhealed Pressure Ulcer at Stage II or Higher or designated as "unstageable"?',cls:"oasis_blue",item_id:"one_unhealed_prsr_ulcer1",width:"98%",margin:"2px",labelAlign:"top",items:[{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"0 - No ",itemId:"m1306_no",inputValue:"0",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1322]</text>'},{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"1 - Yes",itemId:"m1306_yes",inputValue:"1"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1307) The Oldest Non-epithelialized Stage II Pressure Ulcer that is present at discharge",cls:"oasis_blue",item_id:"non_epi_stg_2",width:"98%",margin:"2px",labelAlign:"top",items:[{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"1 - Was present at the most recent SOC/ROC assessment",inputValue:"01"},{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"2 - Developed since the most recent SOC/ROC assessment: record date pressure ulcer first identified",inputValue:"02"},{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"NA - No non-epithelialized Stage II pressure ulcers are present at discharge",inputValue:"NA"}]},{xtype:"panel",layout:{align:"stretch",type:"vbox"},margin:"2px",cls:"oasis_blue",items:[{xtype:"datefield",fieldLabel:"(M1307) Date pressure ulcer first identified",cls:"oasis_blue",labelWidth:"95%",name:"m1307_oldst_stg2_onst_dt",labelAlign:"top"}]}],initComponent:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1306UnhealedPressure()},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0];var e=this.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(e,function(e,t){e.on("change",function(e){var t=this.down("radiofield[name=m1307_oldst_stg2_at_dschrg]").getGroupValue();t=="02"?this.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!1):this.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!0).setValue()},this)},this)},m1306UnhealedPressure:function(){this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[0].on("change",function(e){e.value&&this.skipM1307ToM1320()},this),this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[1].on("change",function(e){e.value&&this.applyM1306UnhealedPressureUlcerRules()},this)},skipM1307ToM1320:function(){var e=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue"];Ext.each(e,function(e){this.super_main.down("numberfield[name="+e+"]").disable().setValue()},this);var t=this.super_main.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(t,function(e,t){e.disable().setValue(!1)},this),this.super_main.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!0).setValue();var n=["m1310_prsr_ulcr_lngth","m1312_prsr_ulcr_wdth","m1314_prsr_ulcr_depth"];Ext.each(n,function(e){this.super_main.down("textfield[name="+e+"]").disable().setValue()},this);var r=this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]");Ext.each(r,function(e,t){e.disable().setValue(!1)},this)},applyM1306UnhealedPressureUlcerRules:function(){var e=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue"];Ext.each(e,function(e){this.super_main.down("numberfield[name="+e+"]").enable()},this);var t=this.super_main.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(t,function(e,t){e.enable()},this),this.super_main.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!1);var n=["m1310_prsr_ulcr_lngth","m1312_prsr_ulcr_wdth","m1314_prsr_ulcr_depth"];Ext.each(n,function(e,t){this.super_main.down("[name="+e+"]").enable()},this);var r=this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]");Ext.each(r,function(e,t){e.enable()},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue();n==null&&t.push(["M1306","Does this patient have at least one Unhealed Pressure Ulcer at Stage II is required."]);var r=this.super_main.down("radiofield[name=m1307_oldst_stg2_at_dschrg]").getGroupValue(),i=this.super_main.down("[name=m1307_oldst_stg2_onst_dt]").value;return r==null&&n=="1"&&t.push(["M1307","The Oldest Non-epithelialized Stage II Pressure Ulcer that is present at discharge."]),r=="02"&&i==null&&t.push(["M1307","Date pressure ulcer first identified can't be blank."]),t}}),Ext.define("Ext.panel.IntegumentryStatus2M1308SocRoc",{extend:"Ext.panel.Panel",alias:"widget.integumentryStatus2M1308SocRoc",border:!1,margin:5,items:[{xtype:"label",margin:5,text:"(M1308) Current Number of Unhealed (non epithelialized) Pressure Ulcers at Each Stage:",html:'<i>(Enter "0" if none; excludes Stage I pressure ulcers )</i>',cls:"oasis_pink",itemId:"ne_pres_ulcr"},{html:'<i>(Enter "0" if none; excludes Stage I pressure ulcers )</i>',margin:"0 0 0 50",border:0},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:2},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},items:[{html:"",height:55,width:300,border:!1},{html:"<b>COLUMN 1</b></br>Complete at</br> <b>SOC/ROC/FU & D/C</b>",height:55,width:200,style:"text-align:center;",border:!1},{html:"Stage Description - unhealed pressure ulcers",height:65,border:!1},{html:"<u>Number Currently Present</u>",height:65,style:"text-align:center;",border:!1},{html:"<b>a</b>. <b>Stage II:</b> Partial thickness loss of dermis presenting as a shallow open ulcer with red  pink wound bed, without slough. May also present as an intact or open/ruptured serum-filled blister.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg2",itemId:"loss_of_dermis"},{html:"<b>b</b>. <b>Stage III:</b> Full thickness tissue loss. Subcutaneous fat may be visible but bone,tendon, or muscles are not exposed. Slough may be present but does not obscure thedepth of tissue loss. May include undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg3",itemId:"tissue_loss"},{html:"<b>c</b>. <b>Stage IV:</b> Full thickness tissue loss with visible bone, tendon, or muscle. Slough or eschar may be present on some parts of the wound bed. Often includes undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg4",itemId:"tissue_loss_with_vis_bone"},{html:"<b>d.1</b> Unstageable: Known or likely but unstageable due to non-removable dressing or device.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_drsg",itemId:"unstageable_nstg_drsg"},{html:"<b>d.2</b> Unstageable: Known or likely but unstageable due to coverage of wound bed by slough and/or eschar.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_cvrg",itemId:"unstageable_nstg_cvrg"},{html:"<b>d.3</b> Unstageable: Suspected deep tissue injury in evolution.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_deep_tisue",itemId:"unstageable_nstg_deep_tisue"}]}],field1308SocRocValidation:function(e){return e&&(e.value==0||e.value==null)},onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),r=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),i=e.down("[name=m1308_nbr_prsulc_stg2]").value,s=e.down("[name=m1308_nbr_prsulc_stg3]").value,o=e.down("[name=m1308_nbr_prsulc_stg4]").value,u=e.down("[name=m1308_nstg_drsg]").value,a=e.down("[name=m1308_nstg_cvrg]").value,f=e.down("[name=m1308_nstg_deep_tisue]").value,l=e.down("[name=m1308_nbr_stg2_at_soc_roc]"),c=e.down("[name=m1308_nbr_stg3_at_soc_roc]"),h=e.down("[name=m1308_nbr_stg4_at_soc_roc]"),p=e.down("[name=m1308_nstg_drsg_soc_roc]"),d=e.down("[name=m1308_nstg_cvrg_soc_roc]"),v=e.down("[name=m1308_nstg_deep_tisue_soc_roc]"),m=e.down("textfield[name=m0100_assmt_reason]");return Ext.each(r,function(e,r){n=="1"&&e.value==null&&(e.name=="m1308_nbr_prsulc_stg2"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg3"?
t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg4"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1, cannot be blank."]):e.name=="m1308_nstg_drsg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1, cannot be blank."]):e.name=="m1308_nstg_cvrg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1, cannot be blank."]):e.name=="m1308_nstg_deep_tisue"&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1, cannot be blank."]))}),n=="1"&&(m.value==1||m.value==3?i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]):(m.value==4||m.value==5||m.value==9)&&i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&this.field1308SocRocValidation(l)&&this.field1308SocRocValidation(c)&&this.field1308SocRocValidation(h)&&this.field1308SocRocValidation(p)&&this.field1308SocRocValidation(d)&&this.field1308SocRocValidation(v)&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]),l&&l.value!=null&&i<l.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1 must be grater than column 2"]),c&&c.value!=null&&s<c.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1 must be grater than column 2"]),h&&h.value!=null&&o<h.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1 must be grater than column 2"]),p&&p.value!=null&&u<p.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1 must be grater than column 2"]),d&&d.value!=null&&a<d.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1 must be grater than column 2"]),v&&v.value!=null&&f<v.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1 must be grater than column 2"])),t}}),Ext.define("Ext.panel.IntegumentryStatus2M1308",{extend:"Ext.panel.Panel",alias:"widget.integumentryStatus2M1308",border:!1,margin:5,items:[{xtype:"label",margin:5,text:"(M1308) Current Number of Unhealed (non epithelialized) Pressure Ulcers at Each Stage:",html:'<i>(Enter "0" if none; excludes Stage I pressure ulcers )</i>',cls:"oasis_pink",itemId:"ne_pres_ulcr"},{html:'<i>(Enter "0" if none; excludes Stage I pressure ulcers )</i>',margin:"0 0 0 50",border:0},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:3},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},items:[{html:"",height:55,width:300,border:!1},{html:"<b>COLUMN 1</b></br>Complete at</br> <b>SOC/ROC/FU & D/C</b>",height:55,width:200,style:"text-align:center;",border:!1},{html:"<b>COLUMN 2</b></br>Complete at</br> <b>FU & D/C</b>",height:55,width:200,style:"text-align:center;",border:!1},{html:"Stage Description - unhealed pressure ulcers",height:65,border:!1},{html:"<u>Number Currently Present</u>",height:65,style:"text-align:center;",border:!1},{html:"<u>Number of those listed in column 1 that were present on admission (most recent SOC/ROC)</u>",height:78,width:200,style:"text-align:center;",border:!1},{html:"<b>a</b>. <b>Stage II:</b> Partial thickness loss of dermis presenting as a shallow open ulcer with red  pink wound bed, without slough. May also present as an intact or open/ruptured serum-filled blister.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg2",itemId:"loss_of_dermis"},{xtype:"numberfield",name:"m1308_nbr_stg2_at_soc_roc",readOnly:!0,margin:"0 0 0 10px"},{html:"<b>b</b>. <b>Stage III:</b> Full thickness tissue loss. Subcutaneous fat may be visible but bone,tendon, or muscles are not exposed. Slough may be present but does not obscure thedepth of tissue loss. May include undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg3",itemId:"tissue_loss"},{xtype:"numberfield",name:"m1308_nbr_stg3_at_soc_roc",readOnly:!0,margin:"0 0 0 10px"},{html:"<b>c</b>. <b>Stage IV:</b> Full thickness tissue loss with visible bone, tendon, or muscle. Slough or eschar may be present on some parts of the wound bed. Often includes undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg4",itemId:"tissue_loss_with_vis_bone"},{xtype:"numberfield",name:"m1308_nbr_stg4_at_soc_roc",readOnly:!0,margin:"0 0 0 10px"},{html:"<b>d.1</b> Unstageable: Known or likely but unstageable due to non-removable dressing or device.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_drsg",itemId:"unstageable_nstg_drsg"},{xtype:"numberfield",name:"m1308_nstg_drsg_soc_roc",readOnly:!0,margin:"0 0 0 10px"},{html:"<b>d.2</b> Unstageable: Known or likely but unstageable due to coverage of wound bed by slough and/or eschar.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_cvrg",itemId:"unstageable_nstg_cvrg"},{xtype:"numberfield",name:"m1308_nstg_cvrg_soc_roc",readOnly:!0,margin:"0 0 0 10px"},{html:"<b>d.3</b> Unstageable: Suspected deep tissue injury in evolution.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_deep_tisue",itemId:"unstageable_nstg_deep_tisue"},{xtype:"numberfield",name:"m1308_nstg_deep_tisue_soc_roc",readOnly:!0,margin:"0 0 0 10px"}]}],field1308SocRocValidation:function(e){return e&&(e.value==0||e.value==null)},onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),r=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),i=e.down("[name=m1308_nbr_prsulc_stg2]").value,s=e.down("[name=m1308_nbr_prsulc_stg3]").value,o=e.down("[name=m1308_nbr_prsulc_stg4]").value,u=e.down("[name=m1308_nstg_drsg]").value,a=e.down("[name=m1308_nstg_cvrg]").value,f=e.down("[name=m1308_nstg_deep_tisue]").value,l=e.down("[name=m1308_nbr_stg2_at_soc_roc]"),c=e.down("[name=m1308_nbr_stg3_at_soc_roc]"),h=e.down("[name=m1308_nbr_stg4_at_soc_roc]"),p=e.down("[name=m1308_nstg_drsg_soc_roc]"),d=e.down("[name=m1308_nstg_cvrg_soc_roc]"),v=e.down("[name=m1308_nstg_deep_tisue_soc_roc]"),m=e.down("textfield[name=m0100_assmt_reason]");return Ext.each(r,function(e,r){n=="1"&&e.value==null&&(e.name=="m1308_nbr_prsulc_stg2"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg3"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg4"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1, cannot be blank."]):e.name=="m1308_nstg_drsg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1, cannot be blank."]):e.name=="m1308_nstg_cvrg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1, cannot be blank."]):e.name=="m1308_nstg_deep_tisue"&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1, cannot be blank."]))}),n=="1"&&(m.value==1||m.value==3?i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]):(m.value==4||m.value==5||m.value==9)&&i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&this.field1308SocRocValidation(l)&&this.field1308SocRocValidation(c)&&this.field1308SocRocValidation(h)&&this.field1308SocRocValidation(p)&&this.field1308SocRocValidation(d)&&this.field1308SocRocValidation(v)&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]),l&&l.value!=null&&i<l.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1 must be grater than column 2"]),c&&c.value!=null&&s<c.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1 must be grater than column 2"]),h&&h.value!=null&&o<h.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1 must be grater than column 2"]),p&&p.value!=null&&u<p.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1 must be grater than column 2"]),d&&d.value!=null&&a<d.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1 must be grater than column 2"]),v&&v.value!=null&&f<v.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1 must be grater than column 2"])),t}}),Ext.define("Ext.panel.PressureUlserM1310M1324",{extend:"Ext.panel.Panel",alias:"widget.pressureUlserM1310M1324",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:"5px 0 0 0",width:1200,layout:{align:"stretch",type:"hbox"},items:[{xtype:"label",margin:"2px",width:250,text:"(M1310) Pressure Ulcer Length: Longest length `head-to-toe` in (cm) "},{xtype:"label",width:275,text:"(M1312) Pressure Ulcer Width: Width of the same pressure ulcer; greatest width perpendicular to the length in (cm)",labelAlign:"top"},{xtype:"label",width:270,text:"(M1314) Pressure Ulcer Depth: Depth of the same pressure ulcer; from visible surface to the deepest area in (cm)",labelAlign:"top"},{xtype:"label",width:280,text:"(M1320) Status of Most Problematic (Observable) Pressure Ulcer",labelAlign:"top"}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"panel",border:0,height:117,margin:"5px 0 0 2px",width:746,layout:{columns:3,type:"table"},items:[{xtype:"numberfield",padding:"0 20 20 0",width:210,name:"m1310_prsr_ulcr_lngth",fieldLabel:""},{xtype:"numberfield",padding:"0 20 20 20",width:210,name:"m1312_prsr_ulcr_wdth",fieldLabel:""},{xtype:"numberfield",padding:"0 20 20 0",margin:"0 0 0 50px",width:210,name:"m1314_prsr_ulcr_depth",fieldLabel:""}]},{xtype:"radiogroup",width:1200,margin:"0 0 0 50px",layout:{align:"stretch",type:"vbox"},fieldLabel:"",items:[{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"0 - Newly epithelialized",inputValue:"00"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"1 - Fully granulating ",inputValue:"01"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"2 - Early/partial granulation",inputValue:"02"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"3 - Not healing ",inputValue:"03"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"NA - No observable pressure ulcer  ",inputValue:"NA"}]}]},{xtype:"panel",border:0,height:229,layout:{columns:2,type:"table"},items:[{xtype:"radiogroup",height:230,margin:"0 5 0 0",width:400,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1322) Current Number of Stage I Pressure Ulcers: Intact skin with non-blanchable redness of a localized area usually over a bony prominence. The area may be painful, firm, soft, warmer, or cooler as compared to adjacent tissue. ",cls:"oasis_green",itemId:"stg_1_ulcer",labelAlign:"top",items:[{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"0",inputValue:"00"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"1",inputValue:"01"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"2",inputValue:"02"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"3",inputValue:"03"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"4 or more",inputValue:"04"}]},{xtype:"radiogroup",height:230,width:405,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1324) Stage of Most Problematic Unhealed (Observable) Pressure Ulcer",cls:"oasis_pink",itemId:"stg_pres_ulcer",labelAlign:"top",items:[{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"1 - Stage I ",inputValue:"01"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"2 - Stage II",inputValue:"02"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"3 - Stage III",inputValue:"03"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"4 - Stage IV",inputValue:"04"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"NA - No observable pressure ulcer or unhealed pressure ulcer",inputValue:"NA"}]}]}],onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1322_nbr_prsulc_stg1]").getGroupValue(),r=e.down("[name=m1308_nbr_prsulc_stg2]"),i=e.down("[name=m1308_nbr_prsulc_stg3]"),s=e.down("[name=m1308_nbr_prsulc_stg4]"),o=e.down("[name=m1308_nstg_deep_tisue]"),u=e.down("[name=m1308_nstg_cvrg]"),a=e.down("[name=m1320_stus_prblm_prsr_ulcr]").getGroupValue(),f=i.value>0||s.value>0||u.value>0,l=e.down("radiofield[name=m1324_stg_prblm_ulcer]").getGroupValue(),c=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue();return n==null&&t.push(["M1322","Select the Number of Stage I Pressure Ulcers."]),l==null?t.push(["M1324","Do not leave stage of Most Problematic Unhealed Pressure Ulcer empty."]):n=="00"&&this.fieldIsZeroOrNull(r)&&this.fieldIsZeroOrNull(i)&&this.fieldIsZeroOrNull(s)&&l!="NA"?t.push(["M1324","Current Number of Unhealed (non epithelialized) Pressure Ulcers stage 2, stage 3, stage4 and Current Number of Stage I Pressure Ulcers stage is '0', then Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is must be equal to NA"]):l=="01"?n=="00"&&t.push(["M1322","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 1 then Current Number of Stage I Pressure Ulcers must be greater than 0"]):l=="02"?this.fieldIsZeroOrNull(r)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 2 then Current Number of unhealed Pressure Ulcers  stage 2 must be greater than 0"]):l=="03"?this.fieldIsZeroOrNull(i)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 3 then Current Number of unhealed Pressure Ulcers  stage 3 must be greater than 0"]):l=="04"&&this.fieldIsZeroOrNull(s)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 4 then Current Number of unhealed Pressure Ulcers  stage 4 must be greater than 0"]),c=="1"&&(a==null?t.push(["M1320","Select the status of Most Problematic Pressure Ulcer."]):a!="NA"&&r.value==0&&i.value==0&&s.value==0&&u.value==0?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be 'NA'."]):a!="03"&&(o>0||r.value>0)&&i.value==0&&s.value==0&&u.value==0?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '3'."]):a=="NA"&&(i.value>0||s.value>0)?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '0', '1', '2', or '3'."]):a!="02"&&a!="03"&&o.value==0&&r.value==0&&i.value==0&&s.value==0&&u.value>0&&t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '2' or '3'."])),t},fieldIsZeroOrNull:function(e){return e.value==null||e.value==0},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1308stg3=this.mainScope.down("[name=m1308_nbr_prsulc_stg3]"),this.m1308stg4=this.mainScope.down("[name=m1308_nbr_prsulc_stg4]"),this.m1308nstg=this.mainScope.down("[name=m1308_nstg_cvrg]"),this.m1310ulser=this.mainScope.down("[name=m1310_prsr_ulcr_lngth]"),this.m1312ulser=this.mainScope.down("[name=m1312_prsr_ulcr_wdth]"),this.m1314ulser=this.mainScope.down("[name=m1314_prsr_ulcr_depth]"),this.m1308stg3.on("change",function(){this.skipM1310ToM1314()},this),this.m1308stg4.on("change",function(){this.skipM1310ToM1314()},this),this.m1308nstg.on("change",function(){this.skipM1310ToM1314()},this)},skipM1310ToM1314:function(){list=[this.m1310ulser,this.m1312ulser,this.m1314ulser],this.m1308stg3&&this.m1308stg3.value==0&&this.m1308stg4&&this.m1308stg4.value==0&&this.m1308nstg&&this.m1308nstg.value==0?list.forEach(function(e){e.disable().reset()}):list.forEach(function(e){e&&e.enable()})}}),Ext.define("Ext.panel.StasisUlcerWoundM1330M1350",{extend:"Ext.panel.Panel",alias:"widget.stasisUlcerWoundM1330M1350",border:!1,items:[{xtype:"panel",layout:"hbox",width:"98%",items:[{xtype:"panel",border:!1,flex:1,height:475,items:[{xtype:"radiogroup",fieldLabel:"(M1330) Does this patient have a Stasis Ulcer?",cls:"oasis_green",itemId:"statsis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1340]</text>'},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has BOTH observable and unobservable stasis ulcers"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Yes, patient has observable stasis ulcers ONLY"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"03",margin:5,boxLabel:"3 - Yes, patient has unobservable stasis ulcers ONLY (known but not observable due to non-removable dressing/device)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1340]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1332) Current Number of (Observable) Stasis Ulcer(s)",cls:"oasis_green",itemId:"obs_num_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - One"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Two"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Three"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"04",margin:5,boxLabel:"4 - Four or more"}]},{xtype:"radiogroup",fieldLabel:"(M1334)  Status of Most Problematic Stasis Ulcer that is Observable",cls:"oasis_green",itemId:"obs_status_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"00",margin:5,boxLabel:"0 - Newly epithelialized"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]}]},{xtype:"panel",border:!1,flex:1,height:450,items:[{xtype:"radiogroup",fieldLabel:"(M1340) Does this patient have a Surgical Wound?",cls:"oasis_blue",itemId:"surg_wound",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:'<text style="background-color:yellow">[Go to M1350]</text>'},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has at least one (observable) surgical wound"},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Surgical wound known but not observable due to non-removable dressing",afterBoxLabelTpl:'<text style="background-color:yellow">[Go to M1350]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1342) Status of Most Problematic (Observable) Surgical Ulcer",cls:"oasis_pink",itemId:"Stat_surg_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"00",margin:5,boxLabel:"0 - Newly epithelialized"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]},{xtype:"radiogroup",fieldLabel:"(M1350) Does this patient have a Skin Lesion or Open Wound, excluding bowel ostomy, other than those described above that is receiving intervention by the home health agency?",labelAlign:"top",columns:1,width:"98%",margin:"10 5",items:[{xtype:"radiofield",name:"m1350_lesion_open_wnd",inputValue:"0",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m1350_lesion_open_wnd",inputValue:"1",margin:5,boxLabel:"1 - Yes"}]}]}]}],onValidate:function(e){var t=new Array;return m1330Value=e.down("[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1332Value=e.down("[name=m1332_nbr_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1340Value=e.down("[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1342Value=e.down("[name=m1342_stus_prblm_srgcl_wnd]").getGroupValue(),m1330Stasis=e.down("radiofield[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1340surgical=e.down("radiofield[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1350Lesion=e.down("radiofield[name=m1350_lesion_open_wnd]").getGroupValue(),m1330Stasis==null&&t.push(["M1330","Choose (Yes/No), whether patient have a Stasis Ulcer."]),m1340surgical==null&&t.push(["M1340","Choose (Yes/No) whether the patient have Surgical Wound."]),m1350Lesion==null&&t.push(["M1350","Choose (Yes/No) whether the patient have Skin Lesion or Open Wound."]),(m1330Value=="01"||m1330Value=="02")&&(m1332Value==null||m1334Value==null)&&t.push(["m1330_1332_1334","Do not Leave 'Number of Stasis Ulcer(s)' and 'Status of Most Problematic Stasis Ulcer' Empty, since 'Stasis Ulcer' has been selected 'Yes'."]),m1340Value=="01"&&m1342Value==null&&t.push(["m1340_1342","Do not Leave Problematic Surgical Ulcer empty, since 'Surgical Wound' has been selected 'Yes'."]),t},m1340SrgclWndPrsnt01:function(e,t){t[1].on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})},this)},m1340SrgclWndPrsnt00R02:function(e,t){[t[0],t[2]].forEach(function(t){t.on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})},this)},this)},m1340SurgicalWound:function(e){surgicalWoundRadioButtons=this.query("[name=m1340_srgcl_wnd_prsnt]"),this.m1340SrgclWndPrsnt00R02(e,surgicalWoundRadioButtons),this.m1340SrgclWndPrsnt01(e,surgicalWoundRadioButtons)},m1330StasUlcrPrsnt01R02:function(e,t){[t[1],t[2]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})})},this)},this)},m1330StasUlcrPrsnt00R03:function(e,t){[t[0],t[3]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})})},this)},this)},m1330StasisUlcer:function(e){stasisUlcerRadioButtons=this.query("[name=m1330_stas_ulcr_prsnt]"),this.m1330StasUlcrPrsnt00R03(e,stasisUlcerRadioButtons),this.m1330StasUlcrPrsnt01R02(e,stasisUlcerRadioButtons)},initComponent:function(){this.callParent(),radioGroups=this.query("[xtype=radiogroup]"),this.m1330StasisUlcer(radioGroups),this.m1340SurgicalWound(radioGroups)}}),Ext.define("Ext.panel.StasisUlcerWoundM1330M1350C1",{extend:"Ext.panel.Panel",alias:"widget.stasisUlcerWoundM1330M1350C1",border:!1,items:[{xtype:"panel",layout:"hbox",width:"98%",items:[{xtype:"panel",border:!1,flex:1,height:475,items:[{xtype:"radiogroup",fieldLabel:"(M1330) Does this patient have a Stasis Ulcer?",cls:"oasis_green",itemId:"statsis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1340]</text>'},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has BOTH observable and unobservable stasis ulcers"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Yes, patient has observable stasis ulcers ONLY"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"03",margin:5,boxLabel:"3 - Yes, patient has unobservable stasis ulcers ONLY (known but not observable due to non-removable dressing/device)",afterBoxLabelTpl:' <text class="oasis_yellow"> [Go to M1340]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1332) Current Number of Stasis Ulcer(s) that are Observable",cls:"oasis_green",itemId:"obs_num_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - One"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Two"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Three"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"04",margin:5,boxLabel:"4 - Four or more"}]},{xtype:"radiogroup",fieldLabel:"(M1334) Status of Most Problematic Stasis Ulcer that is Observable",cls:"oasis_green",itemId:"obs_status_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]}]},{xtype:"panel",border:!1,flex:1,height:450,items:[{xtype:"radiogroup",fieldLabel:"(M1340) Does this patient have a Surgical Wound?",cls:"oasis_blue",itemId:"surg_wound",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:'<text style="background-color:yellow"> [go to M1350 ]</text>'},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has at least one (observable) surgical wound"},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Surgical wound known but not observable due to non-removable dressing/device",afterBoxLabelTpl:'<text style="background-color:yellow">[go to M1350 ]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1342) Status of Most Problematic Surgical Wound that is Observable",cls:"oasis_pink",itemId:"Stat_surg_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"00",margin:5,boxLabel:"0 - Newly epithelialized"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]},{xtype:"radiogroup",fieldLabel:"(M1350) Does this patient have a Skin Lesion or Open Wound (excluding bowel ostomy), other than those described above, that is receiving intervention by the home health agency?",labelAlign:"top",columns:1,width:"98%",margin:"10 5",items:[{xtype:"radiofield",name:"m1350_lesion_open_wnd",inputValue:"0",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m1350_lesion_open_wnd",inputValue:"1",margin:5,boxLabel:"1 - Yes"}]}]}]}],onValidate:function(e){var t=new Array;return m1330Value=e.down("[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1332Value=e.down("[name=m1332_nbr_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1340Value=e.down("[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1342Value=e.down("[name=m1342_stus_prblm_srgcl_wnd]").getGroupValue(),m1330Stasis=e.down("radiofield[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1340surgical=e.down("radiofield[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1350Lesion=e.down("radiofield[name=m1350_lesion_open_wnd]").getGroupValue(),m1330Stasis==null&&t.push(["M1330","Choose (Yes/No), whether patient have a Stasis Ulcer."]),m1340surgical==null&&t.push(["M1340","Choose (Yes/No) whether the patient have Surgical Wound."]),m1350Lesion==null&&t.push(["M1350","Choose (Yes/No) whether the patient have Skin Lesion or Open Wound."]),(m1330Value=="01"||m1330Value=="02")&&(m1332Value==null||m1334Value==null)&&t.push(["m1330_1332_1334","Do not Leave 'Number of Stasis Ulcer(s)' and 'Status of Most Problematic Stasis Ulcer' Empty, since 'Stasis Ulcer' has been selected 'Yes'."]),m1340Value=="01"&&m1342Value==null&&t.push(["m1340_1342","Do not Leave Problematic Surgical Ulcer empty, since 'Surgical Wound' has been selected 'Yes'."]),t},m1340SrgclWndPrsnt01:function(e,t){t[1].on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})},this)},m1340SrgclWndPrsnt00R02:function(e,t){[t[0],t[2]].forEach(function(t){t.on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})},this)},this)},m1340SurgicalWound:function(e){surgicalWoundRadioButtons=this.query("[name=m1340_srgcl_wnd_prsnt]"),this.m1340SrgclWndPrsnt00R02(e,surgicalWoundRadioButtons),this.m1340SrgclWndPrsnt01(e,surgicalWoundRadioButtons)},m1330StasUlcrPrsnt01R02:function(e,t){[t[1],t[2]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})})},this)},this)},m1330StasUlcrPrsnt00R03:function(e,t){[t[0],t[3]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})})},this)},this)},m1330StasisUlcer:function(e){stasisUlcerRadioButtons=this.query("[name=m1330_stas_ulcr_prsnt]"),this.m1330StasUlcrPrsnt00R03(e,stasisUlcerRadioButtons),this.m1330StasUlcrPrsnt01R02(e,stasisUlcerRadioButtons)},initComponent:function(){this.callParent(),radioGroups=this.query("[xtype=radiogroup]"),this.m1330StasisUlcer(radioGroups),this.m1340SurgicalWound(radioGroups)}}),Ext.define("Ext.panel.RespiratoryCardacM1400M1410",{extend:"Ext.panel.Panel",alias:"widget.respiratoryCardacM1400M1410",border:!1,margin:5,items:[{xtype:"radiogroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1400) When is the patient dyspneic or noticeably Short of Breath?",cls:"oasis_pink",itemId:"shrt_of_breath",width:"58%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"0 - Patient is not short of breath ",inputValue:"00"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"1 - When walking more than 20 feet, climbing stairs",inputValue:"01"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"2 - With moderate exertion (for example, while dressing, using commode or bedpan, walking distances less than 20 feet) ",inputValue:"02"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"3 - With minimal exertion (for example, while eating, talking, or performing other ADLs) or with agitation",inputValue:"03"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"4 - At rest (during day or night)",inputValue:"04"}]},{xtype:"checkboxgroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1410) Respiratory Treatments utilized at home: (Mark all that apply.)",labelAlign:"top",items:[{xtype:"checkboxfield",name:"m1410_resptx_oxygen",boxLabel:"1 - Oxygen (intermittent or continuous)",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_ventilator",boxLabel:"2 - Ventilator (continually or at night)",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_airpress",boxLabel:"3 - Continuous / Bi-level positive airway pressure ",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_none",boxLabel:"4 - None of the above ",inputValue:"1"}]}],onValidate:function(e){var t=new Array;return m1400Dyspneic=e.down("radiofield[name=m1400_when_dyspneic]").getGroupValue(),m1400Dyspneic==null&&t.push(["M1400","Select the reason when patient feel noticeably Short of Breath."]),this.m1410Oxygen.value==0&&this.m1410Ventilator.value==0&&this.m1410AirPress.value==0&&this.m1410None.value==0&&t.push(["M1410","Select at least one mode of treatment from 'Respiratory Treatments utilized at home'."]),t},selectOtherValues:function(){Ext.each(this.fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1410None.setValue(!1)},this)},this)},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&Ext.each(this.fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.noneOfAbove=this.super_main.down("checkbox[name=m1410_resptx_none]"),this.fields=["m1410_resptx_oxygen","m1410_resptx_ventilator"
,"m1410_resptx_airpress"],this.m1410Oxygen=this.super_main.down("[name=m1410_resptx_oxygen]"),this.m1410Ventilator=this.super_main.down("[name=m1410_resptx_ventilator]"),this.m1410AirPress=this.super_main.down("[name=m1410_resptx_airpress]"),this.m1410None=this.super_main.down("[name=m1410_resptx_none]"),this.selectNoneOfAbove(),this.selectOtherValues()}}),Ext.define("Ext.panel.BreathSounds",{extend:"Ext.panel.Panel",alias:"widget.breathSounds",border:!1,margin:5,items:[{xtype:"fieldset",margin:"3px",width:500,height:800,layout:{type:"vbox"},flex:1,title:"Breath Sounds",items:[{xtype:"label",text:"(Clear, crackles/rales, wheezes/rhonchi, diminished, absent)"},{xtype:"checkboxfield",name:"breath_sounds",boxLabel:"<b>No Problem</b>",inputValue:"NP",width:100},{xtype:"panel",layout:"hbox",border:0,items:[{xtype:"panel",border:0,defaults:{xtype:"textfield",labelWidth:40},margin:"3px",layout:"vbox",items:[{xtype:"label",text:"Anterior:"},{fieldLabel:"Right",name:"anterior_right",isHeader:!1},{fieldLabel:"Left",name:"anterior_left",isHeader:!1}]},{xtype:"panel",border:0,margin:"3px",defaults:{xtype:"textfield",labelWidth:80},layout:"vbox",items:[{xtype:"label",text:"Posterior:"},{fieldLabel:"Right Upper",name:"posterior_right_upper",isHeader:!1},{fieldLabel:"Right Lower",name:"posterior_right_lower",isHeader:!1},{fieldLabel:"Left Upper",name:"posterior_left_upper",isHeader:!1},{fieldLabel:"Left Lower",name:"posterior_left_lower",isHeader:!1}]}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"textfield",fieldLabel:"O2 @ (LPM via cannula, mask, trach)",labelAlign:"top",name:"oxygen_lpm",isHeader:!1},{xtype:"textfield",fieldLabel:"O2 saturation(%)",name:"oxygen_saturation",labelAlign:"top",padding:"0 0 0 10",labelWidth:150,isHeader:!1}]},{xtype:"textfield",fieldLabel:"Trach size/type",name:"trach_size",labelWidth:150,margin:"5px"},{xtype:"radiogroup",margin:"0 0 0 20",fieldLabel:"Who manages?",layout:{type:"hbox",align:"stretch"},items:[{xtype:"radiofield",name:"who_manages",boxLabel:"Self",inputValue:"SF"},{xtype:"radiofield",name:"who_manages",boxLabel:"RN",inputValue:"RN"},{xtype:"radiofield",name:"who_manages",boxLabel:"Caregiver",inputValue:"CG"},{xtype:"radiofield",name:"who_manages",boxLabel:"Family",inputValue:"FY"}]},{xtype:"textareafield",name:"who_manages_text",margin:"0 0 0 20",fieldLabel:"",height:50,cols:60},{xtype:"radiogroup",margin:"5px",layout:{align:"stretch",type:"hbox"},label_width:180,fieldLabel:"Intermittent treatments (C&DB, medicated inhalation treatments, etc.,)",labelAlign:"top",items:[{xtype:"radiofield",name:"intermittent_treatments",boxLabel:"No",inputValue:"N",width:60},{xtype:"radiofield",name:"intermittent_treatments",boxLabel:"Yes, ",inputValue:"Y",width:60},{xtype:"textareafield",name:"intermittent_treatments_explain",fieldLabel:"explain",labelWidth:50,height:50,cols:30}]},{xtype:"panel",layout:"vbox",border:0,items:[{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"checkboxfield",margin:"5px",boxLabel:"Cough",inputValue:"1",name:"breath_sounds"},{xtype:"radiogroup",margin:"5px",layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiofield",name:"cough",boxLabel:"No",inputValue:"N",width:60},{xtype:"radiofield",name:"cough",boxLabel:"Yes:",inputValue:"Y",width:60}]}]},{xtype:"radiogroup",width:250,margin:"0 0 0 80",items:[{xtype:"radiofield",name:"productive",boxLabel:"Productive",inputValue:"PR"},{xtype:"radiofield",name:"productive",boxLabel:"Non-Productive",inputValue:"NPR"}]},{xtype:"textareafield",fieldLabel:"Describe:",name:"productive_describe",labelWidth:50,margin:"0 0 0 90",height:50,cols:30}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"checkboxfield",margin:"5px",boxLabel:"Dyspnea",inputValue:"2",name:"breath_sounds"},{xtype:"checkboxgroup",margin:"5px",layout:{align:"stretch",type:"hbox"},items:[{xtype:"checkboxfield",name:"dyspnea",boxLabel:"Rest",inputValue:"1",width:60},{xtype:"checkboxfield",name:"dyspnea",boxLabel:"During ADL's",inputValue:"2",width:100}]}]},{xtype:"textareafield",fieldLabel:"Comments",name:"dyspnea_comments",margin:"0 0 0 60",labelWidth:70,height:50,cols:30},{xtype:"radiogroup",margin:"5px",layout:{align:"stretch",type:"hbox"},label_width:180,fieldLabel:"Positioning necessary for improved breathing",labelAlign:"top",items:[{xtype:"radiofield",name:"positioning",boxLabel:"No",inputValue:"N",width:60},{xtype:"radiofield",name:"positioning",boxLabel:"Yes, ",inputValue:"Y",width:60},{xtype:"textareafield",fieldLabel:"Describe:",labelWidth:50,name:"positioning_describe",margin:"0 0 0 20",height:50,cols:30}]}]}],afterRender:function(){this.callParent();var e=this.down("[boxLabel=<b>No Problem</b>]");e.on("change",function(t){var n=this.query("textfield, textareafield, datefield, numberfield, checkboxgroup, radiogroup, checkboxfield, radiofield");Ext.each(n,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)}}),Ext.define("Ext.panel.heartsounds",{extend:"Ext.panel.Panel",alias:"widget.heartsounds",border:!1,margin:5,items:[{xtype:"fieldset",margin:"3px",width:650,height:800,layout:{type:"vbox"},title:"Heart Sounds",items:[{xtype:"checkboxfield",name:"heart_sounds",boxLabel:"<b>No Problem</b>",inputValue:"NP",margin:"3px",width:100},{xtype:"checkboxgroup",margin:"3px",layout:{align:"stretch",type:"hbox"},fieldLabel:"Heart Sounds",items:[{xtype:"checkboxfield",name:"heart_sounds",boxLabel:"Regular",inputValue:"1",width:150},{xtype:"checkboxfield",name:"heart_sounds",boxLabel:"Irregular",inputValue:"2",width:150},{xtype:"checkboxfield",name:"heart_sounds",boxLabel:"Murmur",inputValue:"3",width:100}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"checkboxfield",boxLabel:"Pacemaker",inputValue:"4",name:"heart_sounds",margin:"3px"},{xtype:"fieldcontainer",layout:{type:"table",columns:2},items:[{xtype:"datefield",fieldLabel:"Date",name:"pacemaker_date",labelAlign:"right",isHeader:!1},{xtype:"textfield",fieldLabel:"Type",labelWidth:40,name:"pacemaker_type",labelAlign:"right",isHeader:!1},{xtype:"datefield",fieldLabel:"Last date checked",name:"pacemaker_last_date_checked",labelAlign:"right",isHeader:!1}]}]},{xtype:"checkboxfield",boxLabel:"Chest Pain",inputValue:"5",name:"heart_sounds"},{xtype:"checkboxgroup",columns:5,defaults:{width:100,margin:"0 0 0 5"},items:[{xtype:"checkboxfield",boxLabel:"Anginal",inputValue:"1",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Postural",inputValue:"2",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Localized",inputValue:"3",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Substernal",inputValue:"4",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Radiating",inputValue:"5",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Dull",inputValue:"6",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Ache",inputValue:"7",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Sharp",inputValue:"8",name:"chest_pain"},{xtype:"checkboxfield",boxLabel:"Vise-like",inputValue:"9",name:"chest_pain"}]},{xtype:"checkboxgroup",fieldLabel:"Associated With",margin:"8px",columns:3,defaults:{width:150},items:[{xtype:"checkboxfield",boxLabel:"Shortness of breath",inputValue:"1",name:"associated_with"},{xtype:"checkboxfield",boxLabel:"Activity",inputValue:"2",name:"associated_with"},{xtype:"checkboxfield",boxLabel:"Sweats",inputValue:"3",name:"associated_with"},{xtype:"checkboxfield",boxLabel:"Palpitations",inputValue:"4",name:"associated_with"},{xtype:"checkboxfield",boxLabel:"Fatigue",inputValue:"5",name:"associated_with"}]},{xtype:"textfield",fieldLabel:"Frequency/duration",name:"associated_with_frequency",labelWidth:130,margin:"7 3 3 120"},{xtype:"textareafield",fieldLabel:"How relieved",name:"associated_with_how_relieved",labelWidth:130,margin:"7 3 3 120",height:50,cols:40},{xtype:"checkboxfield",boxLabel:"Edema",inputValue:"6",name:"heart_sounds"},{xtype:"checkboxgroup",columns:3,defaults:{width:150,margin:"0 0 0 5"},items:[{xtype:"checkboxfield",boxLabel:"Pedal",inputValue:"1",name:"edema"},{xtype:"checkboxfield",boxLabel:"Right",inputValue:"1",name:"pedal"},{xtype:"checkboxfield",boxLabel:"Left",inputValue:"2",name:"pedal"},{xtype:"checkboxfield",boxLabel:"Sacral",inputValue:"2",name:"edema"},{xtype:"checkboxfield",boxLabel:"Dependent",inputValue:"3",name:"edema"},{xtype:"textfield",name:"edema_dependent"}]},{xtype:"panel",border:0,layout:"hbox",items:[{xtype:"panel",border:0,layout:"vbox",items:[{xtype:"radiofield",name:"edema_pitting",margin:"0 0 0 10",boxLabel:"Pitting",inputValue:"1"},{xtype:"checkboxgroup",columns:4,defaults:{width:60,margin:"0 0 0 40"},items:[{xtype:"checkboxfield",boxLabel:"+1",inputValue:"+1",name:"pitting"},{xtype:"checkboxfield",boxLabel:"+2",inputValue:"+2",name:"pitting"},{xtype:"checkboxfield",boxLabel:"+3",inputValue:"+3",name:"pitting"},{xtype:"checkboxfield",boxLabel:"+4",inputValue:"+4",name:"pitting"}]}]},{xtype:"radiofield",name:"edema_pitting",boxLabel:"Non-Pitting",inputValue:"2"}]},{xtype:"textfield",name:"edema_site",fieldLabel:"Site",labelWidth:50,margin:"5 0 8 10"},{xtype:"fieldcontainer",defaultType:"checkboxfield",layout:"hbox",items:[{boxLabel:"Cramps",inputValue:"7",name:"heart_sounds",width:100},{boxLabel:"Claudication",inputValue:"8",name:"heart_sounds",width:100}]},{xtype:"panel",border:0,layout:"vbox",items:[{xtype:"checkboxfield",margin:"0 0 0 3",boxLabel:"Capillary refill",inputValue:"9",labelWidth:300,name:"heart_sounds"},{xtype:"radiogroup",columns:4,defaults:{width:140,margin:"0 0 0 40"},items:[{xtype:"radiofield",boxLabel:"Less than 3 sec ",inputValue:"1",name:"capillary_refill"},{xtype:"radiofield",boxLabel:"Greater than 3 sec",inputValue:"2",name:"capillary_refill"}]}]},{xtype:"checkboxfield",boxLabel:"Disease Management Problems(explain)",inputValue:"10",name:"heart_sounds"},{xtype:"textareafield",name:"disease_management_explain",xheight:50,cols:50}]}],afterRender:function(){this.callParent();var e=this.query("[boxLabel=<b>No Problem</b>]")[0];e.on("change",function(t){var n=this.query("textfield, textareafield, datefield, numberfield, checkboxgroup, radiogroup, checkboxfield, radiofield");Ext.each(n,function(t){e!=t&&e.checked==1?t.xtype=="radiofield"||t.xtype=="checkboxfield"?t.disable().setValue(!1):t.disable().setValue():t.enable()},this)},this)}}),Ext.define("Ext.panel.EliminationM1600M1630",{extend:"Ext.panel.Panel",alias:"widget.eliminationM1600M1630",border:!1,margin:5,items:[{xtype:"panel",border:!1,flex:1,height:500,items:[{xtype:"radiogroup",fieldLabel:"(M1600) Has this patient been treated for a Urinary Tract Infection in the past 14 days?",cls:"oasis_blue",itemId:"uri_tract_inf",width:"99%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1600_uti",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m1600_uti",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m1600_uti",inputValue:"NA",margin:5,boxLabel:"NA - Patient on prophylactic treatment"},{xtype:"radiofield",name:"m1600_uti",inputValue:"UK",margin:5,boxLabel:"Unknown "}]},{xtype:"radiogroup",fieldLabel:"(M1610) Urinary Incontinence or Urinary Catheter Presence",cls:"oasis_pink",itemId:"uri_cath_pres",width:"99%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"00",margin:5,boxLabel:"0 - No incontinence or catheter (includes anuria or ostomy for urinary drainage)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"01",margin:5,boxLabel:"1 - Patient is incontinent"},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"02",margin:5,boxLabel:"2 - Patient requires a urinary catheter (specifically: external, indwelling, intermittent, suprapubic)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1615) When does Urinary Incontinence occur?",cls:"oasis_blue",itemId:"urin_incotinence",width:"99%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"00",margin:5,boxLabel:"0 - Timed-voiding defers incontinence"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"01",margin:5,boxLabel:"1 - Occasional stress incontinence"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"02",margin:5,boxLabel:"2 - During the night only"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"03",margin:5,boxLabel:"3 - During the day only"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"04",margin:5,boxLabel:"4 - During the day and night"}]}]},{xtype:"panel",border:!1,flex:1,height:500,items:[{xtype:"radiogroup",fieldLabel:"(M1620) Bowel Incontinence Frequency",cls:"oasis_pink",itemId:"bowel_incontinence_fre",width:"99%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"00",margin:5,boxLabel:"0 - Very rarely or never has bowel incontinence"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"01",margin:5,boxLabel:"1 - Less than once weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"02",margin:5,boxLabel:"2 - One to three times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"03",margin:5,boxLabel:"3 - Four to six times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"04",margin:5,boxLabel:"4 - On a daily basis"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"05",margin:5,boxLabel:"5 - More often than once daily"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"NA",margin:5,boxLabel:"NA - Patient has ostomy for bowel elimination"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"UK",margin:5,boxLabel:"Unknown [ Omit “UK” option on FU, DC ]"}]},{xtype:"radiogroup",fieldLabel:"(M1630) Ostomy for Bowel Elimination: Does this patient have an ostomy for bowel elimination that (within the last 14 days): a) was related to an inpatient facilitystay, or b) necessitated a change in medical or treatment regimen?",cls:"oasis_green",itemId:"bowel_elimination",width:"99%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1630_ostomy",inputValue:"00",margin:5,boxLabel:"0 - Patient does not have an ostomy for bowel elimination"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"01",margin:5,boxLabel:"1 - Patient`s ostomy was not related to an inpatient stay and did not necessitate change in medical or treatment regimen"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"02",margin:5,boxLabel:"2 - The ostomy was related to an inpatient stay or did necessitate change in medical or treatment regimen"}]}]}],onValidate:function(e){var t=new Array;return m1610Value=e.down("[name=m1610_ur_incont]").getGroupValue(),m1615Value=e.down("[name=m1615_incntnt_timing]").getGroupValue(),m1620Value=e.down("[name=m1620_bwl_incont]").getGroupValue(),m1630Value=e.down("[name=m1630_ostomy]").getGroupValue(),m1600Urinary=e.down("radiofield[name=m1600_uti]").getGroupValue(),m1610Catheter=e.down("radiofield[name=m1610_ur_incont]").getGroupValue(),m1620Bowel=e.down("radiofield[name=m1620_bwl_incont]").getGroupValue(),m1630Elimination=e.down("radiofield[name=m1630_ostomy]").getGroupValue(),assessmentReason=e.down("textfield[name=m0100_assmt_reason]").value,m1600Urinary==null&&t.push(["M1600","Select a reason whether the patient has been treated for Urinary Tract Infection in the past 14 days."]),m1610Catheter==null&&t.push(["M1610","Select whether patient is 'Urinary Incontinence' or any 'Urinary Catheter Presence'."]),m1620Bowel==null&&t.push(["M1620","Select at least one frequency from Bowel Incontinence."]),m1630Elimination==null&&t.push(["M1630","Ostomy for Bowel Elimination is required."]),m1610Value=="01"&&m1615Value==null&&t.push(["M1615","Do not leave patient's 'Urinary Incontinence time of occurrence' field empty, since 'Patient is incontinent' has been selected in 'Urinary Incontinence' status."]),m1620Value=="NA"&&m1630Value==null&&t.push(["M1630","Do not leave 'Patient's ostomy was not related to an inpatient stay(Option #2)' or 'The ostomy was related to an inpatient stay (Option #3)' empty from 'Ostomy for Bowel Elimination' since 'Bowel Incontinence Frequency' set to 'Not Applicable'."]),(assessmentReason=="04"||assessmentReason=="05"||assessmentReason=="09")&&m1620Bowel=="UK"&&t.push(["M1620","For this assessment reason bowel incontinence frequency can not be 'UK'"]),t},m1620AndM1630FieldsEventHandling:function(e){this.query("[name=m1620_bwl_incont]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="NA"?(e[4].query("[name=m1630_ostomy]")[0].disable().setValue(!1),e[4].query("[name=m1630_ostomy]")[1].enable(),e[4].query("[name=m1630_ostomy]")[2].enable()):(e[4].query("[name=m1630_ostomy]")[0].enable().setValue("00"),e[4].query("[name=m1630_ostomy]")[1].disable().setValue(!1),e[4].query("[name=m1630_ostomy]")[2].disable().setValue(!1))},this)},this)},m1610AndM1615FieldsEventHandling:function(e){this.query("[name=m1610_ur_incont]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="00"||t.getGroupValue()=="02"?(e[2].disable(),radios=e[2].query("radiofield"),radios.forEach(function(e){e.setValue(!1)})):e[2].enable()},this)},this)},initComponent:function(){this.callParent(),radio_group_array=this.query("[xtype=radiogroup]"),this.m1610AndM1615FieldsEventHandling(radio_group_array),this.m1620AndM1630FieldsEventHandling(radio_group_array)}}),Ext.define("Ext.panel.genitourinary",{extend:"Ext.panel.Panel",alias:"widget.genitourinary",border:!1,margin:5,items:[{border:!1,header:!1,height:700,marign:5,items:[{xtype:"checkboxfield",name:"genitourinary_no_problem",boxLabel:"<b>No Problem</b>",margin:5,inputValue:"NP"},{header:!1,border:!1,layout:{type:"hbox"},items:[{header:!1,border:!1,flex:1,layout:{type:"vbox",align:"stretch"},margin:"0 5 5 5",items:[{header:!1,border:!1,layout:"vbox",items:[{header:!1,border:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Urgency",inputValue:"1",width:100},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Frequency",inputValue:"2",width:100},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Burning",inputValue:"3",width:100},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Pain",inputValue:"4"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Hesitancy",inputValue:"5"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Nocturia",inputValue:"6"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Hematuria",inputValue:"7"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Oliguria",inputValue:"8"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Anuria",inputValue:"9"},{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Diapers",inputValue:"11"}]},{header:!1,border:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Incontinence (details if applicable)",inputValue:"10"},{xtype:"textfield",name:"incontinence_details",isHeader:!1}]},{header:!1,border:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitourinary",boxLabel:"Other",inputValue:"12",margin:"0 5 0 0"},{xtype:"textfield",name:"other_genitourinary",width:326}]}]},{header:!1,border:!1,items:[{xtype:"label",text:"Urinary Catheter"},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"textfield",fieldLabel:"Type",name:"urinary_catheter_type",labelAlign:"top",isHeader:!1},{xtype:"datefield",fieldLabel:"Date last changed",name:"urinary_catheter_date",margin:"0 0 0 5",labelAlign:"top",isHeader:!1}]},{border:!1,header:!1,items:[{xtype:"datefield",fieldLabel:"Foley inserted (date)",name:"foly_inserted_date",margin:"5 0 5 0",isHeader:!1},{xtype:"textfield",fieldLabel:"French (size)",isHeader:!1,name:"french"},{xtype:"textfield",fieldLabel:"Inflated balloon with(ml)",isHeader:!1,name:"inflated_balloon_with"},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"genitourinary_difficulty",boxLabel:"Without difficulty",inputValue:"1",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_difficulty",boxLabel:"Suprapubic",inputValue:"2"}]}]},{xtype:"radiogroup",fieldLabel:"Patient tolerated procedure well",isHeader:!1,labelAlign:"top",layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"tolerated_procedure_well",boxLabel:"Yes",inputValue:"Y",margin:"0 5 0 0"},{xtype:"radiofield",name:"tolerated_procedure_well",boxLabel:"No",inputValue:"N"}]},{border:!1,header:!1,items:[{xtype:"label",isHeader:!1,text:"Irrigation solution"},{xtype:"textfield",fieldLabel:"Type",isHeader:!1,name:"irrigation_solution_type"},{xtype:"textfield",fieldLabel:"Amount(mL)",isHeader:!1,name:"irrigation_solution_amount"},{xtype:"textfield",fieldLabel:"Frequency",isHeader:!1,name:"irrigation_solution_frequency"},{xtype:"textfield",fieldLabel:"Returns",isHeader:!1,name:"irrigation_solution_returns"}]}]}]},{header:!1,border:!1,flex:1,items:[{header:!1,border:!1,layout:"hbox",margin:5,items:[{header:!1,border:!1,items:[{xtype:"radiogroup",fieldLabel:"Color",labelAlign:"top",layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Yellow",inputValue:"YE",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Straw",inputValue:"ST"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Amber",inputValue:"AM",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Brown",inputValue:"BR"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Gray",inputValue:"GR",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Blood-tinged",inputValue:"BT"},{xtype:"radiofield",name:"genitourinary_color",boxLabel:"Other",inputValue:"OTH",margin:"0 5 0 0"},{xtype:"textfield",name:"genitourinary_color_other",isHeader:!1,fieldLabel:"",labelWidth:50}]}]},{header:!1,border:!1,items:[{xtype:"radiogroup",fieldLabel:"Clarity",labelAlign:"top",layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"genitourinary_clarity",boxLabel:"Clear",margin:"0 5 0 0",inputValue:"CL"},{xtype:"radiofield",name:"genitourinary_clarity",boxLabel:"Cloudy",inputValue:"CD"},{xtype:"radiofield",name:"genitourinary_clarity",boxLabel:"Sediment",inputValue:"SD",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_clarity",boxLabel:"Mucous",inputValue:"MU"}]},{xtype:"radiogroup",fieldLabel:"Odor",labelAlign:"top",layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"genitourinary_odor",boxLabel:"Yes",inputValue:"Y",margin:"0 5 0 0"},{xtype:"radiofield",name:"genitourinary_odor",boxLabel:"No",inputValue:"N"}]}]}]},{header:!1,border:!1,margin:5,items:[{xtype:"checkboxfield",name:"urostomy",boxLabel:"Urostomy (describe skin around stoma)",isHeader:!1,margin:"0 0 0 5",inputValue:"13"},{xtype:"textarea",name:"genitourinary_urostomy",isHeader:!1,cols:55,margin:"0 0 0 5"},{xtype:"radiogroup",fieldLabel:"Ostomy care managed by",labelAlign:top,layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"ostomy_care_managed_by",boxLabel:"Self",inputValue:"SF",margin:"0 5 0 5"},{xtype:"radiofield",name:"ostomy_care_managed_by",boxLabel:"Caregiver",inputValue:"CG"}]},{xtype:"checkboxfield",name:"ostomy_care_managed_by",boxLabel:"Other(specify)",inputValue:"OTH",margin:"0 0 0 5"},{xtype:"textarea",labelAlign:"top",name:"other_ostomy_care_managed_by",cols:55,margin:"0 0 0 5"}]}]}]}]}]}),Ext.define("Ext.panel.UrinaryDMESupplies",{extend:"Ext.panel.Panel",alias:"widget.urinaryDMESupplies",border:0,items:[{xtype:"label",text:"Urinary/Ostomy"},{header:!1,border:!1,items:[{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Underpads",inputValue:"1"},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"External catheters",inputValue:"2"},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Urinary bag/pouch",inputValue:"3"},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Ostomy pouch(brand, size)",inputValue:"4"},{xtype:"textfield",name:"ostomy_pouch_size",fieldLabel:""},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Ostomy wafer(brand, size)",inputValue:"5"},{xtype:"textfield",name:"ostomy_wafer_size",fieldLabel:""},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Stoma adhesive tape",inputValue:"6"},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Skin protectant",inputValue:"7"},{xtype:"checkboxfield",name:"urinary_ostomy_supplies",boxLabel:"Other",isHeader:!1,inputValue:"8"},{xtype:"textarea",name:"other_urinary_ostomy_supplies",isHeader:!1,labelAlign:"top",cols:50,rows:6}]}]}),Ext.define("Ext.panel.Miscellaneous",{extend:"Ext.panel.Panel",alias:"widget.miscellaneous",border:0,items:[{xtype:"label",text:"Miscellaneous"},{xtype:"checkboxfield",boxLabel:"Enema supplies",name:"miscellaneous",inputValue:"1"},{xtype:"checkboxfield",boxLabel:"Feeding tube",name:"miscellaneous",inputValue:"2"},{xtype:"textfield",name:"feeding_tube_type",fieldLabel:"Type",isHeader:!1,labelWidth:50},{xtype:"textfield",name:"feeding_tube_size",fieldLabel:"Size",isHeader:!1,labelWidth:50},{xtype:"checkboxfield",boxLabel:"Suture removal kit",name:"miscellaneous",inputValue:"3"},{xtype:"checkboxfield",boxLabel:"Staple removal kit",name:"miscellaneous",inputValue:"4"},{xtype:"checkboxfield",boxLabel:"Steri strips",name:"miscellaneous",inputValue:"5"},{xtype:"checkboxfield",name:"miscellaneous",boxLabel:"Other",isHeader:!1,inputValue:"6"},{xtype:"textarea",name:"other_miscellaneous",isHeader:!1,cols:40,rows:6}]}),Ext.define("Ext.panel.FoleySupplies",{extend:"Ext.panel.Panel",alias:"widget.foleySupplies",border:0,items:[{header:!1,border:!1,items:[{xtype:"label",text:"FOLEY SUPPLIES"},{header:!1,border:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"foley_supplies",isHeader:!1,boxLabel:"French catheter kit (tray, bag, foley)",width:140,margin:"0 5 0 0"},{xtype:"textfield",name:"catheter_kit",isHeader:!1,fieldLabel:"Size",labelWidth:40}]},{xtype:"checkboxfield",name:"foley_supplies",boxLabel:"Straight catheter",inputValue:"1"},{xtype:"checkboxfield",name:"foley_supplies",boxLabel:"Irrigation tray",inputValue:"2"},{xtype:"checkboxfield",name:"foley_supplies",boxLabel:"Saline",inputValue:"3"},{xtype:"checkboxfield",name:"foley_supplies",boxLabel:"Acetic acid",inputValue:"4"},{xtype:"checkboxfield",name:"foley_supplies",boxLabel:"Other",isHeader:!1,inputValue:"5"},{xtype:"textarea",name:"other_foley_supplies",isHeader:!1,cols:50,rows:6}]}]}),Ext.define("Ext.panel.nutritionalstatus",{extend:"Ext.panel.Panel",alias:"widget.nutritionalstatus",border:!1,margin:5,items:[{border:!1,header:!1,items:[{xtype:"checkboxfield",name:"nutritional_status_no_problem",boxLabel:"<b>No Problem</b>",inputValue:"NP",margin:5},{border:!1,header:!1,layout:"hbox",items:[{border:!1,header:!1,margin:"0 5 5 5",items:[{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"NAS",inputValue:"1",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"NPO",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"Controlled Carbohydrate",inputValue:"3"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"Other",inputValue:"4",margin:"0 5 0 0"},{xtype:"textfield",name:"nutritional_status_other",width:210}]},{xtype:"textarea",name:"nutritional_requirements_diet",labelAlign:"top",isHeader:!1,fieldLabel:"Nutritional requirements (diet)",cols:80},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"Increase fluids (amount):",inputValue:"5",margin:"0 5 0 0"},{xtype:"textfield",name:"nutritional_fluids_amt",isHeader:!1,margin:"0 5 0 0",width:125},{xtype:"checkboxfield",name:"nutritional_status",boxLabel:"Restrict fluids (amount):",inputValue:"6",margin:"0 5 0 0"},{xtype:"textfield",name:"restrict_fluids_amt",isHeader:!1,width:125}]},{xtype:"radiogroup",fieldLabel:"Appetite",labelAlign:"top",layout:{type:"table",columns:4},items:[{xtype:"radiofield",name:"nutritional_appetite",boxLabel:"Good",inputValue:"G",margin:"0 5 0 0"},{xtype:"radiofield",name:"nutritional_appetite",boxLabel:"Fair",inputValue:"F",margin:"0 5 0 0"},{xtype:"radiofield",name:"nutritional_appetite",boxLabel:"Poor",inputValue:"P",margin:"0 5 0 0"},{xtype:"radiofield",name:"nutritional_appetite",boxLabel:"Anorexic",inputValue:"A",margin:"0 5 0 0"}]},{border:!1,header:!1,items:[{xtype:"checkboxfield",boxLabel:"Nausea/Vomiting",name:"appetite",inputValue:"1"},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"textfield",fieldLabel:"Frequency",isHeader:!1,name:"vomiting_frequency",labelWidth:70,margin:"0 5 0 5"},{xtype:"textfield",isHeader:!1,name:"vomiting_amount",fieldLabel:"Amount",labelWidth:70}]}]},{xtype:"checkboxfield",name:"appetite",boxLabel:"Heartburn(food intolerance)",inputValue:"2"},{xtype:"checkboxfield",name:"appetite",boxLabel:"Other",inputValue:"3"},{xtype:"textarea",cols:80,isHeader:!1,name:"appetite_other"}]},{xtype:"panel",layout:"vbox",border:!1,header:!1,margin:5,items:[{border:!1,header:!1,margin:5,layout:{type:"hbox"},items:[{xtype:"label",html:'<b>Directions:</b> Check each area with "yes" to assessment, then total score will determine additional risk.',isHeader:!1,width:400},{xtype:"label",text:"YES"}]},{border:!1,header:!1,defaults:{labelWidth:400},margin:5,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Has an illness or condition that changed the kind and/or amount of food eaten",boxLabel:"2",inputValue:1},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Eats fewer than 2 meals per day",boxLabel:"3",inputValue:2},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Eats few fruits, vegetables or milk products",boxLabel:"2",inputValue:3},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Has 3 or more drinks of beer, liquor or wine almost every day",boxLabel:"2",inputValue:4},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Has tooth or mouth problems that make it hard to eat",boxLabel:"2",inputValue:5},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Does not always have enough money to buy the food needed",boxLabel:"4",inputValue:6},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Eats alone most of the time",boxLabel:"1",inputValue:7},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Takes 3 or more different prescribed or over-the-counter drugs a day",boxLabel:"1",inputValue:8},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Without wanting to, has lost or gained 10 pounds in the last 6 months",boxLabel:"2",inputValue:9},{xtype:"checkboxfield",name:"heart_burn",fieldLabel:"Not always physically able to shop, cook and/or feed self",boxLabel:"2",inputValue:10}]},{xtype:"numberfield",itemId:"total_points",name:"nutritional_status_total",fieldLabel:"<b>TOTAL<b/>",margin:"0 0 0 335",labelWidth:50,readOnly:!0,width:120}]}]},{border:!1,header:!1,items:[{xtype:"label",margin:5,text:"Reprinted with permission by the Nutrition Screening Initiative, a project of  the American Academy of Family Physicians, the American Dietetic Association and the National Council on the Aging, Inc., and funded in part by a grant from Ros Products Division, Abbott Laboratories Inc."},{xtype:"fieldset",title:"INTERPRETATION",margin:5,items:[{html:"<b>0-2 Good.</b> As appropriate reassess and/or provide information based on situation. <br/><b>3-5 Moderate risk.</b> Educate, refer, monitor and reevaluate based on patient situation and organiza <br/><b>6 or more High risk.</b> Coordinate with physician, dietitian, social service professional or nurse about how to improve nutritional health. Reassess nutritional status and educate based on plan of care.",border:!1},{xtype:"textarea",isHeader:!1,fieldLabel:"Describe at risk intervention and plan",labelAlign:"top",cols:80,name:"risk_intervention_and_plan"}]}]}]}],afterRender:function(){this.callParent();var e=this.down("#total_points"),t=e.up("panel").query("checkboxfield");Ext.each(t,function(t){t.on("change",function(t){t.checked?e.setValue(e.value+parseInt(t.boxLabel)):e.setValue(e.value-parseInt(t.boxLabel))},this)},this)}}),Ext.define("Ext.panel.eternalfeedings",{extend:"Ext.panel.Panel",alias:"widget.eternalfeedings",border:!1,margin:5,items:[{xtype:"checkboxfield",name:"enteral_feedings_no_problem",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{header:!1,border:!1,layout:"hbox",items:[{border:!1,header:!1,layout:{type:"vbox"},items:[{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"enteral_feedings"
,boxLabel:"Nasogastric",inputValue:"1",margin:"0 8 0 0"},{xtype:"checkboxfield",name:"enteral_feedings",boxLabel:"Gastrostomy",inputValue:"2"}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"enteral_feedings",boxLabel:"Jejunostomy",inputValue:"3",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"enteral_feedings",boxLabel:"Other(specify):",inputValue:"4",margin:"0 5 0 0"},{xtype:"textfield",name:"enteral_feedings_other"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"enteral_feedings",boxLabel:"Pump",width:130,inputValue:"5"},{xtype:"textfield",fieldLabel:"Type/specify",name:"enteral_feedings_pump",isHeader:!1,labelWidth:75}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"enteral_feedings_pump_type",boxLabel:"Bolus",inputValue:"B",margin:"0 5 0 0"},{xtype:"radiofield",name:"enteral_feedings_pump_type",boxLabel:"Continuous",inputValue:"C"}]},{xtype:"textfield",name:"feedings_type_rate",isHeader:!1,fieldLabel:"Feedings: Type (amt/rate)"},{xtype:"textfield",name:"flush_protocol",isHeader:!1,fieldLabel:"Flush Protocol: (amt/rate)"},{xtype:"label",text:"Performed by:",isHeader:!1},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"enteral_feeding_performed_by",boxLabel:"Self",inputValue:"SF",margin:"0 5 0 0"},{xtype:"radiofield",name:"enteral_feeding_performed_by",boxLabel:"RN",inputValue:"RN"}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"radiofield",name:"enteral_feeding_performed_by",boxLabel:"Caregiver",inputValue:"CG",margin:"0 15 0 0"},{xtype:"radiofield",name:"enteral_feeding_performed_by",boxLabel:"Other:",inputValue:"OTH",margin:"0 5 0 0"},{xtype:"textfield",name:"enteral_feeding_performed_by_other"}]}]},{header:!1,border:!1,items:[{xtype:"textarea",fieldLabel:"Dressing /Site care (specify)",isHeader:!1,name:"dressing_site_care",labelAlign:"top",margin:"0 0 0 20",cols:80},{xtype:"textarea",fieldLabel:"Interventions /Instructions / Comments",isHeader:!1,labelAlign:"top",margin:"0 0 0 20",name:"enteral_feedings_interventions",cols:80}]}]}]}),Ext.define("Ext.panel.Elimination",{extend:"Ext.panel.Panel",alias:"widget.elimination",border:!1,items:[{xtype:"checkboxfield",name:"elimination_no_problem",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{header:!1,border:!1,layout:"hbox",items:[{border:!1,header:!1,flex:1,items:[{border:!1,header:!1,layout:{type:"table",columns:3},defaults:{margin:"0 5 0 0"},items:[{xtype:"checkboxfield",name:"elimination",boxLabel:"Flatulence",inputValue:"1"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Constipation",inputValue:"2"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Impaction",inputValue:"3"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Diarrhea",inputValue:"4"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Hemorrhoids",inputValue:"6"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Rectal bleeding",inputValue:"7"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"elimination",boxLabel:"Last BM",inputValue:"5",margin:"0 5 0 0"},{xtype:"textfield",isHeader:!1,name:"elimination_last_bm"},{xtype:"checkboxfield",name:"elimination",boxLabel:"Frequency of stools",inputValue:"8",margin:"0 5 0 0"},{xtype:"textfield",name:"frequency_of_stools"},{xtype:"label",text:"Bowel regime/program:",isHeader:!1,margin:"0 5 0 0"},{xtype:"textfield",name:"bowel_regime_program",isHeader:!1}]},{border:!1,header:!1,layout:"hbox",items:[{xtype:"checkboxfield",name:"elimination",boxLabel:"Laxative/Enema use:",inputValue:"9"}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"radiofield",name:"laxative_enema_use",margin:"0 0 0 5",boxLabel:"Daily",inputValue:"D"},{xtype:"radiofield",name:"laxative_enema_use",margin:"0 0 0 5",boxLabel:"Weekly",inputValue:"W"},{xtype:"radiofield",name:"laxative_enema_use",boxLabel:"Monthly",margin:"0 0 0 5",inputValue:"M"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"radiofield",name:"laxative_enema_use",boxLabel:"Other",margin:"0 5 0 5",inputValue:"O"},{xtype:"textfield",name:"other_laxative_enema_use",isHeader:!1,width:229}]},{xtype:"checkboxfield",name:"elimination",boxLabel:"Incontinence (details if applicable)",inputValue:"10"},{xtype:"textarea",name:"elimination_incontinence",margin:"0 0 0 5",cols:41,fieldLabel:""},{border:!1,header:!1,layout:"hbox",margin:"5 0 0 0",items:[{xtype:"checkboxfield",name:"elimination",boxLabel:"Diapers / Other: ",inputValue:"11"},{xtype:"textfield",name:"elimination_diapers",fieldLabel:"",margin:"0 0 0 5",width:171}]}]},{header:!1,border:!1,flex:1,items:[{border:!1,header:!1,items:[{xtype:"checkboxfield",name:"elimination",boxLabel:"Ileostomy/Colostomy site (describe skin around stoma):",inputValue:"12"},{xtype:"textarea",name:"skin_arround_stoma",isHeader:!1,labelAlign:"top",fieldLabel:"",cols:70},{xtype:"label",text:"Ostomy care managed by:",isHeader:!1},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"radiofield",name:"elimination_ostomy_care_managed_by",boxLabel:"Self",inputValue:"SF",margin:"0 0 0 5"},{xtype:"radiofield",name:"elimination_ostomy_care_managed_by",boxLabel:"Caregiver",inputValue:"CG",margin:"0 0 0 5"},{xtype:"radiofield",name:"elimination_ostomy_care_managed_by",isHeader:!1,boxLabel:"Other",margin:"0 0 0 5",inputValue:"OTH"},{xtype:"textfield",name:"elimination_ostomy_care_other",isHeader:!1,margin:"0 0 0 5",width:285}]}]}]}]}]}),Ext.define("Ext.panel.Abdomen",{extend:"Ext.panel.Panel",alias:"widget.abdomen",border:!1,items:[{xtype:"checkboxfield",name:"abdomen_no_problem",boxLabel:"<b>No Problem</b>",margin:5,inputValue:"NP"},{border:!1,header:!1,margin:"0 5 0 5",layout:{type:"hbox"},items:[{xtype:"checkboxfield",name:"abdomen",boxLabel:"Tenderness",inputValue:"1",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"abdomen",boxLabel:"Pain",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"abdomen",boxLabel:"Distention",inputValue:"3",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"abdomen",boxLabel:"Hard",inputValue:"4",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"abdomen",boxLabel:"Soft",inputValue:"5",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"abdomen",boxLabel:"Ascites",inputValue:"6",margin:"0 5 0 0"}]},{border:!1,header:!1,layout:{type:"table",columns:2},margin:"0 5 0 5",items:[{xtype:"checkboxfield",name:"abdomen",boxLabel:"Abdominal",inputValue:"7"},{xtype:"textfield",name:"girth",isHeader:!1,margin:"0 0 0 5",labelWidth:50,fieldLabel:"Girth (cm)"}]},{border:!1,header:!1,margin:"0 5 0 5",layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"abdomen",boxLabel:"Other",inputValue:"8",width:142},{xtype:"textfield",name:"abdomen_other",fieldLabel:"",width:250}]},{border:!1,header:!1,layout:{type:"hbox"},margin:"0 5 0 5",items:[{xtype:"checkboxfield",name:"abdomen",boxLabel:"Bowel sounds",inputValue:"9"}]},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"radiofield",name:"bowel_sounds",boxLabel:"Active",inputValue:"1",margin:"0 5 0 10"},{xtype:"radiofield",name:"bowel_sounds",boxLabel:"Absent",inputValue:"2",margin:"0 5 0 5"},{xtype:"radiofield",name:"bowel_sounds",boxLabel:"Hypo",inputValue:"3",margin:"0 5 0 0"},{xtype:"radiofield",name:"bowel_sounds",boxLabel:"Hyperactive",inputValue:"4",margin:"0 5 0 0"}]},{xtype:"textfield",name:"bowel_sounds_x_quadrants",isHeader:!1,fieldLabel:"Quadrants",margin:"0 5 0 10",labelWidth:134},{border:!1,header:!1,margin:5,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"bowel_sounds_other",boxLabel:"Other",inputValue:"5",width:142},{xtype:"textfield",name:"bowel_sounds_other_text",fieldLabel:"",width:250}]}]}),Ext.define("Ext.panel.Genitalia",{extend:"Ext.panel.Panel",alias:"widget.genitalia",border:!1,items:[{xtype:"checkboxfield",name:"genitalia_no_problem",boxLabel:"<b>No Problem</b>",inputValue:"NP"},{border:!1,header:!1,items:[{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Discharge",inputValue:"1",width:170},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Drainage",inputValue:"2"}]},{xtype:"textfield",isHeader:!1,labelWidth:60,name:"discharge_drainage",fieldLabel:"Describe"},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Lesions",inputValue:"3",width:170},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Blisters",inputValue:"4"},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Masses",inputValue:"5"},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Cysts",inputValue:"6"},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Inflammation",inputValue:"7"},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Surgical alteration",inputValue:"8"}]},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Prostate problem:",inputValue:"9",width:170},{xtype:"checkboxfield",name:"prostate_problem",isHeader:!1,boxLabel:"BPH",inputValue:"BPH",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"prostate_problem",isHeader:!1,boxLabel:"TURP",inputValue:"TURP",margin:"0 10 0 0"},{xtype:"datefield",name:"bph_turp_date",isHeader:!1,fieldLabel:"Date",labelWidth:32}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Self-testicular exam",inputValue:"10",width:242},{xtype:"textfield",name:"self_testicular_exam_freq",isHeader:!1,fieldLabel:"Frequency",labelWidth:70}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Menopause",inputValue:"11",width:170},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Hysterectomy",inputValue:"12",margin:"0 8 0 0"},{xtype:"datefield",name:"hysterectomy_date",isHeader:!1,labelWidth:30,fieldLabel:"Date"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"datefield",name:"hysterectomy_last_date",isHeader:!1,labelWidth:70,fieldLabel:"Date last PAP",margin:"0 37 0 0"},{xtype:"textfield",name:"hysterectomy_results",isHeader:!1,labelWidth:50,fieldLabel:"Results"}]},{border:!1,header:!1,layout:{type:"table",columns:2},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Breast self-exam",inputValue:"13",width:242},{xtype:"textfield",name:"breast_self_exam_freq",isHeader:!1,fieldLabel:"Frequency",labelWidth:70}]},{border:!1,header:!1,layout:{type:"table",columns:3},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Discharge (Left/Right)",inputValue:"14",width:170},{xtype:"checkboxfield",name:"genitalia_discharge",boxLabel:"Left",inputValue:"2",margin:"0 5 0 0 "},{xtype:"checkboxfield",name:"genitalia_discharge",boxLabel:"Right",inputValue:"1",margin:"0 5 0 0"}]},{border:!1,header:!1,layout:{type:"table",columns:4},items:[{xtype:"checkboxfield",name:"genitalia",boxLabel:"Mastectomy (Left/Right)",inputValue:"15",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"mastectomy",boxLabel:"Left",inputValue:"2",margin:"0 5 0 0"},{xtype:"checkboxfield",name:"mastectomy",boxLabel:"Right",inputValue:"1",margin:"0 10 0 0"},{xtype:"datefield",isHeader:!1,name:"mastectomy_date",fieldLabel:"Date",labelWidth:33}]},{xtype:"checkboxfield",name:"genitalia",boxLabel:"Other",inputValue:"16"},{xtype:"textarea",isHeader:!1,name:"genitalia_other",labelAlign:"top",fieldLabel:"Other(specify)",cols:90}]}]}),Ext.define("Ext.panel.GeneralPatientInformationM0010M0069",{extend:"Ext.panel.Panel",alias:"widget.generalPatientInformationM0010M0069",border:!1,items:[{xtype:"panel",border:!1,margin:5,layout:"hbox",items:[{xtype:"panel",border:!1,flex:1,items:[{xtype:"panel",layout:{type:"table",columns:2},border:!1,items:[{xtype:"textfield",fieldLabel:"(M0010) CMS Certification Number",name:"m0010_ccn",labelAlign:"top",readOnly:!0},{xtype:"button",text:"",icon:"/assets/icons/refresh.png",margin:"-40 0 0 -7",tooltip:"Refresh Agency Information",name:"refresh_agency_info"}]},{xtype:"textfield",fieldLabel:"(M0014) Branch State",name:"m0014_branch_state",labelAlign:"top",readOnly:!0},{xtype:"textfield",fieldLabel:"(M0016) Branch ID Number",name:"m0016_branch_id",labelAlign:"top",readOnly:!0},{xtype:"textfield",fieldLabel:"(M0018) National Provider Identifier (NPI) for the attending physician who has signed the plan of care",name:"m0018_physician_id",labelAlign:"top",readOnly:!0},{xtype:"checkbox",fieldLabel:"(M0018) National Provider Identifier (NPI) for the attending physician who has signed the plan of care: UK",cls:"oasis_heading",inputValue:"1",name:"m0018_physician_uk",labelAlign:"top",readOnly:!0}]},{xtype:"panel",border:!1,flex:1,items:[{xtype:"textfield",fieldLabel:"(M0020) Patient ID Number",name:"m0020_pat_id",labelAlign:"top",readOnly:!0},{xtype:"datefield",fieldLabel:"(M0030) Start of Care Date",name:"m0030_start_care_dt",labelAlign:"top"},{xtype:"datefield",fieldLabel:"(M0032) Resumption of Care Date",name:"m0032_roc_dt",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0032) Resumption of Care Date: NA",cls:"oasis_heading",inputValue:"1",name:"m0032_roc_dt_na",labelAlign:"top"}]},{xtype:"panel",border:!1,flex:3,items:[{xtype:"label",text:"(M0040) Patient Name:"},{xtype:"panel",layout:"hbox",border:!1,items:[{xtype:"textfield",fieldLabel:"First",name:"m0040_pat_fname",labelAlign:"top"},{xtype:"textfield",fieldLabel:"MI",name:"m0040_pat_mi",labelAlign:"top"},{xtype:"textfield",fieldLabel:"Last",name:"m0040_pat_lname",labelAlign:"top"},{xtype:"textfield",fieldLabel:"Suffix",name:"m0040_pat_suffix",labelAlign:"top"}]},{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",flex:.9,border:!1,items:[{xtype:"textfield",fieldLabel:"(M0050) Patient State of Residence",name:"m0050_pat_st",labelAlign:"top"},{xtype:"textfield",fieldLabel:"(M0060) Patient Zip Code",name:"m0060_pat_zip",inputMask:"99999-999999-99",labelAlign:"top",maxLength:11},{xtype:"textfield",fieldLabel:"(M0063) Medicare Number",name:"m0063_medicare_num",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0063) Medicare Number: NA",cls:"oasis_heading",name:"m0063_medicare_na",inputValue:"1",labelAlign:"top"},{xtype:"textfield",fieldLabel:"(M0064) Social Security Number",name:"m0064_ssn",inputMask:"999-99-9999",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0064) Social Security Number: UK",margin:"0 0 20px 0",cls:"oasis_heading",name:"m0064_ssn_uk",inputValue:"1",labelAlign:"top"}]},{xtype:"panel",flex:.9,border:!1,items:[{xtype:"textfield",fieldLabel:"(M0065) Medicaid Number",name:"m0065_medicaid_num",labelAlign:"top"},{xtype:"checkbox",fieldLabel:"(M0065) Medicaid Number: NA",cls:"oasis_heading",name:"m0065_medicaid_na",inputValue:"1",labelAlign:"top"},{xtype:"datefield",fieldLabel:"(M0066) Birth Date",name:"m0066_pat_birth_dt",labelAlign:"top"},{xtype:"combo",fieldLabel:"(M0069) Gender",name:"m0069_pat_gender",labelAlign:"top",store:[[1,"Male"],[2,"Female"]],editable:!1}]}]}]}]}],serverValidationRequiredFields:function(){return["m0032_roc_dt"]},serverValidationRequiredFieldsSuffix:function(){return[""]},selectNpiId:function(){this.m0018NpiId.on("change",function(e){e.value&&this.m0018NpiUk.setValue(!1)},this)},selectNpiUk:function(){this.m0018NpiUk.on("change",function(e){e.value&&this.m0018NpiId.setValue(null)},this)},selectMedNum:function(){this.m0063MedNum.on("change",function(e){e.value&&(this.m0063MedNa.setValue(!1),medicare1=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),medicare2=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),medicare1.setValue(!1).enable(),medicare2.setValue(!1).enable())},this)},selectMedNa:function(){this.m0063MedNa.on("change",function(e){e.value&&(this.m0063MedNum.setValue(null),medicare1=this.mainScope.down("[name=m0150_cpay_mcare_ffs]"),medicare2=this.mainScope.down("[name=m0150_cpay_mcare_hmo]"),medicare1.setValue(!1).disable(),medicare2.setValue(!1).disable())},this)},selectSsn:function(){this.m0064Ssn.on("change",function(e){e.value&&this.m0064SsnNa.setValue(!1)},this)},selectSsnNa:function(){this.m0064SsnNa.on("change",function(e){e.value&&this.m0064Ssn.setValue(null)},this)},selectMediNum:function(){this.m0065MedNum.on("change",function(e){e.value&&(this.m0065MedNa.setValue(!1),medicaid1=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),medicaid2=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),medicaid1.setValue(!1).enable(),medicaid2.setValue(!1).enable())},this)},selectMediNa:function(){this.m0065MedNa.on("change",function(e){e.value&&(this.m0065MedNum.setValue(null),medicaid1=this.mainScope.down("[name=m0150_cpay_mcaid_ffs]"),medicaid2=this.mainScope.down("[name=m0150_cpay_mcaid_hmo]"),medicaid1.setValue(!1).disable(),medicaid2.setValue(!1).disable())},this)},selectDate:function(){this.m0032Date.on("change",function(e){e.value&&this.m0032Na.setValue(!1)},this)},selectDateNa:function(){this.m0032Na.on("change",function(e){e.value&&this.m0032Date.setValue(null)},this)},onValidate:function(e){var t=new Array;m0018NpiIdValue=e.down("[name=m0018_physician_id]").value,m0018NpiUkValue=e.down("[name=m0018_physician_uk]").value,m0040PatLname=e.down("[name=m0040_pat_lname]").value,m0050PatState=e.down("[name=m0050_pat_st]").value,m0060PatZip=e.down("[name=m0060_pat_zip]"),m0020PidValue=e.down("[name=m0020_pat_id]").value,m0032Date=e.down("[name=m0032_roc_dt]"),m0032DateNaValue=e.down("[name=m0032_roc_dt_na]").value,m0063MedNum=e.down("[name=m0063_medicare_num]"),m0063MedNA=e.down("[name=m0063_medicare_na]"),m0064SSN=e.down("[name=m0064_ssn]"),m0064SSNUK=e.down("[name=m0064_ssn_uk]"),m0065MediNumValue=e.down("[name=m0065_medicaid_num]").value,m0065MediNaValue=e.down("[name=m0065_medicaid_na]").value,m0065MediNaValue=e.down("[name=m0065_medicaid_na]").value,m0030StartCareDt=e.down("[name=m0030_start_care_dt]"),m0903LastHomeVisitDt=e.down("[name=m0903_last_home_visit]"),m0906DCTranDthDt=e.down("[name=m0906_dc_tran_dth_dt]"),m0090InfoCompletedDt=e.down("[name=m0090_info_completed_dt]"),m1005InpDischargeDt=e.down("[name=m1005_inp_discharge_dt]"),m0040PatFname=e.down("[name=m0040_pat_fname]"),m0040PatMi=e.down("[name=m0040_pat_mi]"),m0040PatSuffix=e.down("[name=m0040_pat_suffix]"),m0050PatSt=e.down("[name=m0050_pat_st]"),m0066PatBirthDt=e.down("[name=m0066_pat_birth_dt]"),m0069PatGender=e.down("[name=m0069_pat_gender]");var n=["111111111","333333333","999999999","123456789"],r=!0;m0018NpiIdValue==""&&m0018NpiUkValue==0?t.push(["M0018","Enter the NPI of the Physician who will sign the Plan of Care OR select Physician NPI Unknown."]):m0018NpiIdValue&&m0018NpiIdValue.match(/([0-9]){10}/)==null&&t.push(["M0018","Primary Referring Physician National Provider ID (NPI) it must consist of 10 digits with no embedded spaces or blanks."]),m0040PatFname.value!=null&&m0040PatFname.value.length>12&&t.push(["M0040","Patient first name should not be more than 12 characters"]),m0040PatMi.value!=null&&m0040PatMi.value.length>1&&t.push(["M0040","Patient Middle initial should not be more than 1 character"]),(m0040PatLname==null||m0040PatLname=="")&&t.push(["M0040","Enter the patient's full name."]),m0040PatLname!=null&&m0040PatLname.length>18&&t.push(["M0040","Patient last name should not be more than 18 characters"]),m0040PatSuffix.value!=null&&m0040PatSuffix.value.length>3&&t.push(["M0040","Patient suffix should not be more than 3 characters"]),(m0069PatGender.value==null||m0069PatGender.value=="")&&t.push(["M0069","Enter the patient gender"]),m0050PatSt.value==null||m0050PatSt.value==""?t.push(["M0050","Enter the patient state code"]):m0050PatSt.value!=null&&m0050PatSt.value.length!=2?t.push(["M0050","State code should  be 2 characters"]):m0050PatSt.value!=null&&m0050PatSt.value.toUpperCase()!=m0050PatSt.value?t.push(["M0050","State code should be in upper case"]):m0050PatSt.value!=null&&m0050PatSt.value.length==2&&m0050PatSt.value.toUpperCase()==m0050PatSt.value&&e.checkForProperState({state_code:m0050PatSt.value},function(e){e&&t.push(["M0050","Enter the valid state code"])},this),m0060PatZip.value==null||m0060PatZip.value==""?t.push(["M0060","Enter the Patient Zip Code."]):m0060PatZip.value!=null&&m0060PatZip.value.match(/^([0-9]){5}([0-9\s]){0,4}(\s){0,2}$/)==null?t.push(["M0060","Patient Zip Code: Bytes 1 through 5 must contain numbers (0 through 9). Bytes 6 through 9 must contain numbers (0 through 9) or blanks. Bytes 10 through 11 must contain blanks."]):m0060PatZip.value!=null&&e.checkForProperZipCode({zip_code:m0060PatZip.value},function(e){e&&t.push(["M0060","Enter the valid zip code"])},this),!m0066PatBirthDt||m0066PatBirthDt.value!=null&&m0066PatBirthDt.value!=""?m0066PatBirthDt&&m0066PatBirthDt.value!=null&&m0066PatBirthDt.isValid()==0&&t.push(["M0066","Enter the valid date of birth"]):t.push(["M0066","Enter the birth date"]),m0063MedNum&&(m0063MedNum.value==null||m0063MedNum.value=="")&&m0063MedNA&&m0063MedNA.value==0?t.push(["M0063","Enter Medicare number or select Not Applicable(NA)."]):m0063MedNum&&m0063MedNum.value&&(m0063MedNum.value.length>12&&t.push(["M0063","Medicare number should not be more than 12 characters"]),m0063MedNum.value.match(/[-\s]/)&&t.push(["M0063","Medicare number must be alphanumeric with no embedded dashes or spaces."]),m0063MedNum.value.match(/^([0-9]){1}/)&&m0063MedNum.value.match(/^([0-9]){9}/)==null&&t.push(["M0063","Medicare number: If the first character is numeric (0 through 9), then the first 9 characters must be numeric."]),m0063MedNum.value.match(/^[a-zA-z]{1}/)&&m0063MedNum.value.match(/^([a-zA-Z]){3}([0-9]){6,9}(\s){0,3}/)==null&&t.push(["M0063","Medicare number: If the first character is a letter, then there must be 1 to 3 alphabetic characters followed by 6 or 9 numbers followed by spaces up to the field length of 12."]),r=!0,Ext.each(n,function(e,t){e==m0063MedNum.value&&(r=!1)},this),r||t.push(["M0063","Medicare number: It must not equal any of the following values: 111111111, 333333333, 999999999, 123456789."])),m0064SSN&&m0064SSN.value==""&&m0064SSNUK&&m0064SSNUK.value==0?t.push(["M0064","Enter Patient's Social Security Number or select UK."]):m0064SSN&&m0064SSN.value&&(m0064SSN.value.length!=9&&t.push(["M0064","Patient's Social Security Number: It must contain 9 digits (0 through 9)."]),m0064SSN.value.match(/^000/)&&t.push(["M0064","Patient's Social Security Number: It cannot start with 000."]),m0064SSN.value.match(/[-\s]/)&&t.push(["M0064","Patient's Social Security Number: There must be no embedded dashes or spaces."]),r=!0,Ext.each(n,function(e,t){e==m0064SSN.value&&(r=!1)},this),r||t.push(["M0064","Patient's Social Security Number: It must not equal any of the following values: 111111111, 333333333, 999999999, 123456789."])),(m0020PidValue==null||m0020PidValue=="")&&t.push(["M0020","Enter the patient's medical record number."]),m0020PidValue!=null&&m0020PidValue.length>20&&t.push(["M0020","Patient's medical record number should be less than or equal to 20 characters."]);if(m0030StartCareDt.value==null)t.push(["M0030","Start of Care Date can't be blank."]);else if(m0030StartCareDt.value!=null&&m0030StartCareDt.isValid()){m0030StartCareDt.value>new Date&&t.push(["M0030","Start of care date must be less than or equal to the current date."]);var i=this.mainScope.down("[name=m0100_assmt_reason]");i.value=="01"&&m0030StartCareDt.value<new Date(99,6,19,0,0,0)&&t.push(["M0030","Start of Care date cannot precede 07/19/1999."]),m0032Date!=null&&m0032Date.isValid()&&m0032DateNaValue==0&&m0030StartCareDt.value>m0032Date.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Resumption of care date."]),m0903LastHomeVisitDt!=null&&m0903LastHomeVisitDt.isValid()&&m0030StartCareDt.value>m0903LastHomeVisitDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Date of Last Home Visit."]),m0906DCTranDthDt!=null&&m0906DCTranDthDt.isValid()&&m0030StartCareDt.value>m0906DCTranDthDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Discharge, Transfer, Death Date."]),m0090InfoCompletedDt!=null&&m0090InfoCompletedDt.isValid()&&m0030StartCareDt.value>m0090InfoCompletedDt.value&&t.push(["M0030","Start of Care date should be earlier than or equal to Date Assessment Completed."])}var i=this.mainScope.down("[name=m0100_assmt_reason]");if(i.value=="03"){m0032DateNaValue&&t.push(["M0032","For this assessment Resumption of care date can't be NA."]);if(m0032Date.value&&m0032Date.isValid()&&m0090InfoCompletedDt&&m0090InfoCompletedDt.value){var s=(m0090InfoCompletedDt.value-m0032Date.value)/864e5;(s>2||s<0)&&t.push(["M0032","Info completed date minus Resumption of care date should be greater than or equal to zero and less than or equal to 2."])}if(m0032Date.value&&m0032Date.isValid()&&m1005InpDischargeDt&&m1005InpDischargeDt.value){var s=(m0032Date.value-m1005InpDischargeDt.value)/864e5;(s>14||s<0)&&t.push(["M0032","Resumption of care date minus Most Recent Inpatient Discharge Date should be greater than or equal to zero and less than or equal to 14."])}}m0032Date.value==null&&m0032DateNaValue==0?t.push(["M0032","Enter the resumption of care date or check resumption of care date 'NA'."]):m0032Date.value!=null&&m0032Date.isValid()&&(m0032Date.value>new Date&&t.push(["M0032","Resumption of care date must be less than or equal to the current date."]),i.value=="03"&&m0032Date.value<new Date(99,6,19,0,0,0)&&t.push(["M0032","Resumption of care date cannot precede 07/19/1999."]),m0903LastHomeVisitDt!=null&&m0903LastHomeVisitDt.isValid()&&m0032Date.value>m0903LastHomeVisitDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Date of Last Home Visit."]),m0906DCTranDthDt!=null&&m0906DCTranDthDt.isValid()&&m0032Date.value>m0906DCTranDthDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Discharge, Transfer, Death Date."]),m0090InfoCompletedDt!=null&&m0090InfoCompletedDt.isValid()&&m0032Date.value>m0090InfoCompletedDt.value&&t.push(["M0032","Resumption of care date should be earlier than or equal to Date Assessment Completed."]));var o="Enter a valid branch ID number, OR enter 'N' for none and 'P' for parent.",u=new RegExp(/^[N,P]{1}$/),a=new RegExp(/^([A-Z0-9]){2}Q([A-Z0-9]){4}([0-9]){3}$/);return this.m0016_branchId.value==null?t.push(["M0016","Enter a valid branch ID number, OR enter 'N' for none and 'P' for parent."]):this.m0016_branchId.value.length==1&&!u.test(this.m0016_branchId.value)?t.push(["M0016",o]):this.m0016_branchId.value.length!=1&&(this.m0016_branchId.value.length<10||this.m0016_branchId.value.length>10)?t.push(["M0016",o]):this.m0016_branchId.value.length==10&&!a.test(this.m0016_branchId.value)&&t.push(["M0016",o]),this.m0016_branchId.value.length==10&&a.test(this.m0016_branchId.value)&&this.m0014BranchState.value==""&&t.push(["M0014","If a standard branch ID (i.e., not N or P) is submitted, then Branch State cannot be blank."]),m0065MediNumValue!=null&&m0065MediNumValue!=""||m0065MediNaValue!=0?m0065MediNumValue!=null&&m0065MediNumValue.length>14&&t.push(["M0065","Medicaid Number should not be more than 14 characters"]):t.push(["M0065","At least select one item from either Medicaid Number_NA or Medicaid Number"]),t},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m0014BranchState=this.mainScope.down("[name=m0014_branch_state]"),this.m0018NpiId=this.mainScope.down("textfield[name=m0018_physician_id]"),this.m0018NpiUk=this.mainScope.down("checkbox[name=m0018_physician_uk]"),this.m0063MedNum=this.mainScope.down("textfield[name=m0063_medicare_num]"),this.m0063MedNa=this.mainScope.down("checkbox[name=m0063_medicare_na]"),this.m0064Ssn=this.mainScope.down("textfield[name=m0064_ssn]"),this.m0064SsnNa=this.mainScope.down("checkbox[name=m0064_ssn_uk]"),this.m0065MedNum=this.mainScope.down("textfield[name=m0065_medicaid_num]"),this.m0065MedNa=this.mainScope.down("checkbox[name=m0065_medicaid_na]"),this.m0032Date=this.mainScope.down("datefield[name=m0032_roc_dt]"),this.m0032Na=this.mainScope.down("checkbox[name=m0032_roc_dt_na]"),this.m0016_branchId=this.mainScope.down("[name=m0016_branch_id]"),this.m0010Ccn=this.mainScope.down("[name=m0010_ccn]"),this.m0014BranchState=this.mainScope.down("[name=m0014_branch_state]"),this.refreshAgencyInfo=this.mainScope.down("[name=refresh_agency_info]"),this.m0030SocDate=this.mainScope.down("[name=m0030_start_care_dt]"),this.m0040PatFname=this.mainScope.down("[name=m0040_pat_fname]"),this.m0040PatLname=this.mainScope.down("[name=m0040_pat_lname]"),this.m0066PatBirthDt=this.mainScope.down("[name=m0066_pat_birth_dt]"),this.m0069PatGender=this.mainScope.down("[name=m0069_pat_gender]"),this.selectNpiId(),this.selectNpiUk(),this.selectMedNum(),this.selectMedNa(),this.selectSsn(),this.selectSsnNa(),this.selectMediNum(),this.selectMediNa(),this.selectDate(),this.selectDateNa(),this.mainScope.hideRefreshAgencyInfo&&this.refreshAgencyInfo.hide(),this.mainScope.socDateKeyField&&this.m0030SocDate.setReadOnly(!0),this.mainScope.rocDateKeyField&&this.m0032Date.setReadOnly(!0),this.mainScope.nonKeyFieldCorrection&&(this.m0040PatFname.setReadOnly(!0),this.m0040PatLname.setReadOnly(!0),this.m0064Ssn.setReadOnly(!0),this.m0066PatBirthDt.setReadOnly(!0),this.m0069PatGender.setReadOnly(!0)),this.refreshAgencyInfo.on("click",function(){this.mainScope.getAgencyInfo({},function(e){this.m0010Ccn.setValue(e[0]),this.m0014BranchState.setValue(e[1]),this.m0016_branchId.setValue(e[2])},this)},this)}}),Ext.define("Ext.panel.ClinicalRecordItemsM0080M0100",{extend:"Ext.panel.Panel",alias:"widget.clinicalRecordItemsM0080M0100",border:!1,items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",border:!1,height:400,margin:5,flex:1,items:[{xtype:"radiogroup",fieldLabel:"(M0080) Discipline of Person Completing Assessment",labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"01",margin:5,boxLabel:"1 - RN"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"02",margin:5,boxLabel:"2 - PT"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"03",margin:5,boxLabel:"3 - SLP/ST"},{xtype:"radiofield",name:"m0080_assessor_discipline",inputValue:"04",margin:5,boxLabel:"4 - OT"}]},{xtype:"datefield",fieldLabel:"(M0090) Date Assessment Completed",name:"m0090_info_completed_dt",labelAlign:"top",width:"100%"},{xtype:"combo",fieldLabel:"(M0100) This Assessment is Currently Being Completed for the Following Reason",labelAlign:"top",name:"m0100_assmt_reason",store:[["01","Start of Care - further visits planned"],["03","Resumption of Care(after inpatient stay)"],["04","Recertification (follow-up) reassessment"],["05","Other follow-up"],["06","Transferred to an inpatient facility - patient not discharged from agency"],["07","Transferred to an inpatient facility - patient discharged from agency"],["08","Death at home"],["09","Discharge from agency"]],width:500,hidden:!0}]}]}],serverValidationRequiredFields:function(){return["m0090_info_completed_dt"]},serverValidationRequiredFieldsSuffix:function(){return[""]},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.startCareDate=this.mainScope.down("datefield[name=m0030_start_care_dt]"),this.assessmentReason=this.mainScope.down("textfield[name=m0100_assmt_reason]"),this.mainScope.infoCompletedDateKeyField&&this.infoCompletedDt.setReadOnly(!0)},onValidate:function(e){var t=new Array;return m0080Assessor=e.down("radiofield[name=m0080_assessor_discipline]").getGroupValue(),m0080Assessor==null&&t.push(["M0080","Select the discipline of the person completing the assessment."]),this.infoCompletedDt.value==null?t.push(["M0090","Enter the date this assessment was completed."]):this.infoCompletedDt.value!=null&&this.infoCompletedDt.isValid()==0?t.push(["M0090","The assessment completed date should be in the 'mm/dd/yyyy' format."]):(this.infoCompletedDt.value>=new Date&&t.push(["M0090","The assessment completed date cannot be after the current date."]),this.infoCompletedDt.value<new Date("01/01/2010")&&t.push(["M0090","The assessment completed date cannot be before 01/01/2010."]),this.assessmentReason.value==1&&(days=Math.floor(this.infoCompletedDt.value-this.startCareDate.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=5||t.push(["M0090","The assessment completed date cannot be before the start of care date or more than 5 days after the start of care date."]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the start of care date."])),this.assessmentReason.value==3&&(days=Math.floor(this.infoCompletedDt.value-this.rocDate.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=2||t.push(["M0090","The assessment completed date cannot be before the resumption of care date or more than 2 days after the resumption of care date."
]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the resumption of care date."])),this.assessmentReason.value==9&&this.m0906DcTranDthDt!=null&&this.m0906DcTranDthDt.value!=null&&this.m0906DcTranDthDt.isValid()==1&&(days=Math.floor(this.infoCompletedDt.value-this.m0906DcTranDthDt.value)/864e5,this.mainScope.nonKeyFieldCorrection==0?days>=0&&days<=2||t.push(["M0090","The assessment completed date should not be more than 2 days after the discharge/transfer/death date."]):this.mainScope.nonKeyFieldCorrection&&days<0&&t.push(["M0090","The assessment completed date cannot be before the discharge/transfer/death date."]))),this.assessmentReason.value==null&&t.push(["M0100","Select the reason for this assessment."]),t}}),Ext.define("Ext.panel.ClinicalRecordItemsM0110",{extend:"Ext.panel.Panel",alias:"widget.clinicalRecordItemsM0110",border:!1,items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",border:!1,margin:5,height:400,flex:1,items:[{xtype:"radiogroup",fieldLabel:'(M0110) Episode Timing: Is the Medicare home health payment episode for which this assessment will define a case mix group an "early" episode or a "later" episode in the patient`s current sequence of adjacent Medicare home health payment episodes?',labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"01",margin:5,boxLabel:"1 - Early"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"02",margin:5,boxLabel:"2 - Later"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"UK",margin:5,boxLabel:"UK - Unknown"},{xtype:"radiofield",name:"m0110_episode_timing",inputValue:"NA",margin:5,boxLabel:"NA - Not Applicable: No Medicare case mix group to be defined by this assessment"}]}]}]}],serverValidationRequiredFields:function(){return["m0090_info_completed_dt"]},serverValidationRequiredFieldsSuffix:function(){return[""]},onValidate:function(e){var t=new Array;return m0110Episode=e.down("radiofield[name=m0110_episode_timing]").getGroupValue(),m0110Episode==null&&t.push(["M0110","Select the episode timing."]),t}}),Ext.define("Ext.panel.StatusRiskVaccineM1030",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1030",border:!1,items:[{layout:"table",columns:2,auto_scroll:!0,border:!1,items:[{columns:1,height:400,border:!1,items:[{xtype:"checkboxgroup",fieldLabel:"(M1030) Therapies the patient receives at home: (Mark all that apply.)",cls:"oasis_green",item_id:"home_therapy1",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"checkboxfield",name:"m1030_thh_iv_infusion",inputValue:"1",margin:5,boxLabel:"1 - Intravenous or infusion therapy (excludes TPN)"},{xtype:"checkboxfield",name:"m1030_thh_par_nutrition",inputValue:"1",margin:5,boxLabel:"2 - Parenteral nutrition (TPN or lipids)"},{xtype:"checkboxfield",name:"m1030_thh_ent_nutrition",inputValue:"1",margin:5,boxLabel:"3 - Enteral nutrition (nasogastric, gastrostomy, jejunostomy, or any other artificial entry into the alimentary canal)"},{xtype:"checkboxfield",name:"m1030_thh_none_above",inputValue:"1",margin:5,boxLabel:"4 - None of the above"}]}]}]}],afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1030Infusion=this.mainScope.down("[name=m1030_thh_iv_infusion]"),this.m1030ParNutrition=this.mainScope.down("[name=m1030_thh_par_nutrition]"),this.m1030EntNutrition=this.mainScope.down("[name=m1030_thh_ent_nutrition]"),this.m1030NoneOfAbove=this.mainScope.down("[name=m1030_thh_none_above]"),this.m1030fields=["m1030_thh_iv_infusion","m1030_thh_par_nutrition","m1030_thh_ent_nutrition"],this.selectNoneOfAboveM1030(),this.selectOtherValuesM1030()},selectNoneOfAboveM1030:function(){this.m1030NoneOfAbove.on("change",function(e){e.value&&Ext.each(this.m1030fields,function(e){this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectOtherValuesM1030:function(){Ext.each(this.m1030fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1030NoneOfAbove.setValue(!1)},this)},this)},onValidate:function(e){var t=new Array;return this.m1030Infusion.value==0&&this.m1030ParNutrition.value==0&&this.m1030EntNutrition.value==0&&this.m1030NoneOfAbove.value==0&&t.push(["M1030","Select at least one Therapy that patient receives at home"]),t}}),Ext.define("Ext.panel.SensoryStatusM1200",{extend:"Ext.panel.Panel",alias:"widget.sensoryStatusM1200",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1200) Vision (with corrective lenses if the patient usually wears them)",width:"75%",cls:"oasis_green",item_id:"pat_vision1",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1200_vision",inputValue:"00",margin:5,boxLabel:"0 - Normal vision: sees adequately in most situations; can see medication labels, newsprint."},{xtype:"radiofield",name:"m1200_vision",inputValue:"01",margin:5,boxLabel:"1 - Partially impaired: cannot see medication labels or newsprint, but can see obstacles in path, and the surrounding layout; can count fingers at arm`s length."},{xtype:"radiofield",name:"m1200_vision",inputValue:"02",margin:5,boxLabel:"2 - Severely impaired: cannot locate objects without hearing or touching them or patient nonresponsive."}]},{xtype:"radiogroup",fieldLabel:"(M1242) Frequency of Pain Interfering with patient`s activity or movement",cls:"oasis_pink",item_id:"fre_of_pain2",width:"75%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"00",margin:5,boxLabel:"0 - Patient has no pain"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"01",margin:5,boxLabel:"1 - Patient has pain that does not interfere with activity or movement"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"02",margin:5,boxLabel:"2 - Less often than daily"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"03",margin:5,boxLabel:"3 - Daily, but not constantly"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"04",margin:5,boxLabel:"4 - All of the time"}]}],onValidate:function(e){var t=new Array;return m1200Vision=e.down("radiofield[name=m1200_vision]").getGroupValue(),m1242Actvty=e.down("radiofield[name=m1242_pain_freq_actvty_mvmt]").getGroupValue(),m1200Vision==null&&t.push(["M1200","Select one item from Vision."]),m1242Actvty==null&&t.push(["M1242","Select at least one Frequency of Pain."]),t}}),Ext.define("Ext.panel.IntegumentaryStatusM1306",{extend:"Ext.panel.Panel",alias:"widget.integumentaryStatusM1306",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:'(M1306) Does this patient have at least one Unhealed Pressure Ulcer at Stage II or Higher or designated as "unstageable"? (Excludes Stage I pressure ulcers and healed Stage II pressure ulcers)',cls:"oasis_blue",itemId:"one_uh_prs_ulcr",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"0 - No ",itemId:"m1306_no",inputValue:"0",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1322]</text>'},{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"1 - Yes",itemId:"m1306_yes",inputValue:"1"}]}],initComponent:function(){this.callParent(),this.m1306UnhealedPressure()},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},m1306UnhealedPressure:function(){this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[0].on("change",function(e){e.value&&this.skipM1307ToM1320()},this),this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[1].on("change",function(e){e.value&&this.applyM1306UnhealedPressureUlcerRules()},this)},skipM1307ToM1320:function(){numberFields=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue"],Ext.each(numberFields,function(e){this.super_main.down("numberfield[name="+e+"]").disable().setValue()},this)},applyM1306UnhealedPressureUlcerRules:function(){numberFields=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue"],Ext.each(numberFields,function(e){this.super_main.down("numberfield[name="+e+"]").enable()},this)},onValidate:function(e){var t=new Array;return m1306Unhold=this.super_main.down("[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),m1306Unhold==null&&t.push(["M1306","Does this patient have at least one Unhealed Pressure Ulcer at Stage II is required."]),t}}),Ext.define("Ext.panel.PressureUlserM1322M1324",{extend:"Ext.panel.Panel",alias:"widget.pressureUlserM1322M1324",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},margin:5,fieldLabel:"(M1322) Current Number of Stage I Pressure Ulcers: Intact skin with non-blanchable rednessof a localized area usually over a bony prominence. The area may be painful, firm, soft, warmer, orcooler as compared to adjacent tissue. ",cls:"oasis_green",item_id:"stg_1_ulcer",width:"95%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"0",inputValue:"00"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"1",inputValue:"01"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"2",inputValue:"02"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"3",inputValue:"03"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"4 or more",inputValue:"04"}]},{xtype:"radiogroup",height:160,width:405,layout:{align:"stretch",type:"vbox"},margin:5,fieldLabel:"(M1324) Stage of Most Problematic Unhealed (Observable) Pressure Ulcer",cls:"oasis_pink",itemId:"stg_prb_pre_ulcer",width:"95%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"1 - Stage I ",inputValue:"01"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"2 - Stage II",inputValue:"02"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"3 - Stage III",inputValue:"03"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"4 - Stage IV",inputValue:"04"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"NA - No observable pressure ulcer or unhealed pressure ulcer",inputValue:"NA"}]}],onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1322_nbr_prsulc_stg1]").getGroupValue(),r=e.down("radiofield[name=m1324_stg_prblm_ulcer]").getGroupValue(),i=e.down("[name=m1308_nbr_prsulc_stg2]"),s=e.down("[name=m1308_nbr_prsulc_stg3]"),o=e.down("[name=m1308_nbr_prsulc_stg4]"),u=e.down("[name=m1308_nstg_cvrg]");return n==null&&t.push(["M1322","Select the Number of Stage I Pressure Ulcers."]),r==null?t.push(["M1324","Do not leave stage of Most Problematic Unhealed Pressure Ulcer empty."]):n=="00"&&this.fieldIsZeroOrNull(i)&&this.fieldIsZeroOrNull(s)&&this.fieldIsZeroOrNull(o)&&r!="NA"?t.push(["M1324","Current Number of Unhealed (non epithelialized) Pressure Ulcers stage 2, stage 3, stage4 and Current Number of Stage I Pressure Ulcers stage is '0', then Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is must be equal to NA"]):r=="01"?n=="00"&&t.push(["M1322","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 1 then Current Number of Stage I Pressure Ulcers must be greater than 0"]):r=="02"?this.fieldIsZeroOrNull(i)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 2 then Current Number of unhealed Pressure Ulcers  stage 2 must be greater than 0"]):r=="03"?this.fieldIsZeroOrNull(s)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 3 then Current Number of unhealed Pressure Ulcers  stage 3 must be greater than 0"]):r=="04"&&this.fieldIsZeroOrNull(o)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 4 then Current Number of unhealed Pressure Ulcers  stage 4 must be greater than 0"]),t},fieldIsZeroOrNull:function(e){return e.value==null||e.value==0}}),Ext.define("Ext.panel.RespiratoryCardiacM1400",{extend:"Ext.panel.Panel",alias:"widget.respiratoryCardiacM1400",border:!1,items:[{xtype:"radiogroup",width:1e3,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1400) When is the patient dyspneic or noticeably Short of Breath?",cls:"oasis_pink",item_id:"pat_dyspensic",width:"55%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"0 - Patient is not short of breath ",inputValue:"00"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"1 - When walking more than 20 feet, climbing stairs",inputValue:"01"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"2 - With moderate exertion (for example, while dressing, using commode or bedpan, walking distances less than 20 feet) ",inputValue:"02"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"3 - With minimal exertion (for example, while eating, talking, or performing other ADLs) or with agitation",inputValue:"03"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"4 - At rest (during day or night)",inputValue:"04"}]}],onValidate:function(e){var t=new Array;return m1400Dyspneic=e.down("radiofield[name=m1400_when_dyspneic]").getGroupValue(),m1400Dyspneic==null&&t.push(["M1400","Select the reason when patient feel noticeably short of breath."]),t}}),Ext.define("Ext.panel.EliminationM1610M1630",{extend:"Ext.panel.Panel",alias:"widget.eliminationM1610M1630",border:!1,items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",border:!1,flex:1,height:480,items:[{xtype:"radiogroup",fieldLabel:"(M1610) Urinary Incontinence or Urinary Catheter Presence",cls:"oasis_pink",item_id:"urin_incontinence1",width:"98%",labelAlign:"top",columns:1,margin:5,items:[{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"00",margin:5,boxLabel:"0 - No incontinence or catheter (includes anuria or ostomy for urinary drainage)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"01",margin:5,boxLabel:"1 - Patient is incontinent"},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"02",margin:5,boxLabel:"2 - Patient requires a urinary catheter (specifically: external, indwelling, intermittent, suprapubic)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1620) Bowel Incontinence Frequency",cls:"oasis_pink",item_id:"bowel_incontinence1",width:"98%",labelAlign:"top",columns:1,margin:"5",items:[{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"00",margin:5,boxLabel:"0 - Very rarely or never has bowel incontinence"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"01",margin:5,boxLabel:"1 - Less than once weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"02",margin:5,boxLabel:"2 - One to three times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"03",margin:5,boxLabel:"3 - Four to six times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"04",margin:5,boxLabel:"4 - On a daily basis"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"05",margin:5,boxLabel:"5 - More often than once daily"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"NA",margin:5,boxLabel:"NA - Patient has ostomy for bowel elimination"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"UK",margin:5,boxLabel:"UK - Unknown"}]}]},{xtype:"panel",border:!1,flex:1,height:480,items:[{xtype:"radiogroup",fieldLabel:"(M1630) Ostomy for Bowel Elimination: Does this patient have an ostomy for bowel elimination that (within the last 14 days): a) was related to an inpatient facility stay, or b) necessitated a change in medical or treatment regimen?",cls:"oasis_green",item_id:"bowel_elimination",width:"98%",labelAlign:"top",columns:1,margin:"5",items:[{xtype:"radiofield",name:"m1630_ostomy",inputValue:"00",margin:5,boxLabel:"0 - Patient does not have an ostomy for bowel elimination"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"01",margin:5,boxLabel:"1 - Patient`s ostomy was not related to an inpatient stay and did not necessitate change in medical or treatment regimen"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"02",margin:5,boxLabel:"2 - The ostomy was related to an inpatient stay or did necessitate change in medical or treatment regimen"}]}]}]}],initComponent:function(){this.callParent(),radio_group_array=this.query("[xtype=radiogroup]"),this.m1620AndM1630FieldsEventHandling(radio_group_array)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},m1620AndM1630FieldsEventHandling:function(e){this.query("[name=m1620_bwl_incont]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="NA"?(this.query("[name=m1630_ostomy]")[0].disable().setValue(!1),this.query("[name=m1630_ostomy]")[1].enable(),this.query("[name=m1630_ostomy]")[2].enable()):(this.query("[name=m1630_ostomy]")[0].enable().setValue("00"),this.query("[name=m1630_ostomy]")[1].disable().setValue(!1),this.query("[name=m1630_ostomy]")[2].disable().setValue(!1))},this)},this)},onValidate:function(e){var t=new Array;return m1610Value=this.super_main.down("[name=m1610_ur_incont]").getGroupValue(),m1620Value=this.super_main.down("[name=m1620_bwl_incont]").getGroupValue(),m1630Value=this.super_main.down("[name=m1630_ostomy]").getGroupValue(),m1610Catheter=this.super_main.down("radiofield[name=m1610_ur_incont]").getGroupValue(),m1620Bowel=this.super_main.down("radiofield[name=m1620_bwl_incont]").getGroupValue(),m1630Elimination=this.super_main.down("radiofield[name=m1630_ostomy]").getGroupValue(),assessmentReason=this.super_main.down("textfield[name=m0100_assmt_reason]").value,m1610Catheter==null&&t.push(["M1610","Select whether patient is 'Urinary Incontinence' or any 'Urinary Catheter Presence'."]),m1620Bowel==null&&t.push(["M1620","Select at least one frequency from Bowel Incontinence."]),m1630Elimination==null&&t.push(["M1630","Ostomy for Bowel Elimination is required."]),m1620Value=="NA"&&m1630Value==null&&t.push(["M1630","Do not leave 'Patient's ostomy was not related to an inpatient stay(Option #2)' or 'The ostomy was related to an inpatient stay (Option #3)' empty from 'Ostomy for Bowel Elimination' since 'Bowel Incontinence Frequency' set to 'Not Applicable'."]),(assessmentReason=="04"||assessmentReason=="05"||assessmentReason=="09")&&m1620Bowel=="UK"&&t.push(["M1620","For this assessment reason bowel incontinence frequency can not be 'UK'"]),t}}),Ext.define("Ext.panel.EliminationM1610M1630C1",{extend:"Ext.panel.Panel",alias:"widget.eliminationM1610M1630C1",border:!1,items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"panel",border:!1,flex:1,height:480,items:[{xtype:"radiogroup",fieldLabel:"(M1610) Urinary Incontinence or Urinary Catheter Presence",cls:"oasis_pink",item_id:"urin_incontinence1",width:"98%",labelAlign:"top",columns:1,margin:5,items:[{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"00",margin:5,boxLabel:"0 - No incontinence or catheter (includes anuria or ostomy for urinary drainage)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"01",margin:5,boxLabel:"1 - Patient is incontinent"},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"02",margin:5,boxLabel:"2 - Patient requires a urinary catheter (specifically: external, indwelling, intermittent, suprapubic)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1620) Bowel Incontinence Frequency",cls:"oasis_pink",item_id:"bowel_incontinence1",width:"98%",labelAlign:"top",columns:1,margin:"5",items:[{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"00",margin:5,boxLabel:"0 - Very rarely or never has bowel incontinence"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"01",margin:5,boxLabel:"1 - Less than once weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"02",margin:5,boxLabel:"2 - One to three times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"03",margin:5,boxLabel:"3 - Four to six times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"04",margin:5,boxLabel:"4 - On a daily basis"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"05",margin:5,boxLabel:"5 - More often than once daily"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"NA",margin:5,boxLabel:"NA - Patient has ostomy for bowel elimination"}]}]},{xtype:"panel",border:!1,flex:1,height:480,items:[{xtype:"radiogroup",fieldLabel:"(M1630) Ostomy for Bowel Elimination: Does this patient have an ostomy for bowel elimination that (within the last 14 days): a) was related to an inpatient facility stay, or b) necessitated a change in medical or treatment regimen?",cls:"oasis_green",item_id:"bowel_elimination",width:"98%",labelAlign:"top",columns:1,margin:"5",items:[{xtype:"radiofield",name:"m1630_ostomy",inputValue:"00",margin:5,boxLabel:"0 - Patient does not have an ostomy for bowel elimination"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"01",margin:5,boxLabel:"1 - Patient`s ostomy was not related to an inpatient stay and did not necessitate change in medical or treatment regimen"},{xtype:"radiofield",name:"m1630_ostomy",inputValue:"02",margin:5,boxLabel:"2 - The ostomy was related to an inpatient stay or did necessitate change in medical or treatment regimen"}]}]}]}],initComponent:function(){this.callParent(),radio_group_array=this.query("[xtype=radiogroup]"),this.m1620AndM1630FieldsEventHandling(radio_group_array)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},m1620AndM1630FieldsEventHandling:function(e){this.query("[name=m1620_bwl_incont]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="NA"?(this.query("[name=m1630_ostomy]")[0].disable().setValue(!1),this.query("[name=m1630_ostomy]")[1].enable(),this.query("[name=m1630_ostomy]")[2].enable()):(this.query("[name=m1630_ostomy]")[0].enable().setValue("00"),this.query("[name=m1630_ostomy]")[1].disable().setValue(!1),this.query("[name=m1630_ostomy]")[2].disable().setValue(!1))},this)},this)},onValidate:function(e){var t=new Array;return m1610Value=this.super_main.down("[name=m1610_ur_incont]").getGroupValue(),m1620Value=this.super_main.down("[name=m1620_bwl_incont]").getGroupValue(),m1630Value=this.super_main.down("[name=m1630_ostomy]").getGroupValue(),m1610Catheter=this.super_main.down("radiofield[name=m1610_ur_incont]").getGroupValue(),m1620Bowel=this.super_main.down("radiofield[name=m1620_bwl_incont]").getGroupValue(),m1630Elimination=this.super_main.down("radiofield[name=m1630_ostomy]").getGroupValue(),assessmentReason=this.super_main.down("textfield[name=m0100_assmt_reason]").value,m1610Catheter==null&&t.push(["M1610","Select whether patient is 'Urinary Incontinence' or any 'Urinary Catheter Presence'."]),m1620Bowel==null&&t.push(["M1620","Select at least one frequency from Bowel Incontinence."]),m1630Elimination==null&&t.push(["M1630","Ostomy for Bowel Elimination is required."]),m1620Value=="NA"&&m1630Value==null&&t.push(["M1630","Do not leave 'Patient's ostomy was not related to an inpatient stay(Option #2)' or 'The ostomy was related to an inpatient stay (Option #3)' empty from 'Ostomy for Bowel Elimination' since 'Bowel Incontinence Frequency' set to 'Not Applicable'."]),(assessmentReason=="04"||assessmentReason=="05"||assessmentReason=="09")&&m1620Bowel=="UK"&&t.push(["M1620","For this assessment reason bowel incontinence frequency can not be 'UK'"]),t}}),Ext.define("Ext.panel.AdliadLs1M1810M1830",{extend:"Ext.panel.Panel",alias:"widget.adliadLs1M1810M1830",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1810) Current Ability to Dress Upper Body safely (with or without dressing aids) including undergarments, pullovers, front-opening shirts and blouses, managing zippers, buttons, and snaps",cls:"oasis_pink",itemId:"ability_drs_upper",width:"95%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"0 - Able to get clothes out of closets and drawers, put them on and remove them from the upper body without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"1 - Able to dress upper body without assistance if clothing is laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"2 - Someone must help the patient put on upper body clothing.",inputValue:"02"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"3 - Patient depends entirely upon another person to dress the upper body.",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1820) Current Ability to Dress Lower Body safely (with or without dressing aids) including undergarments, slacks, socks or nylons, shoes",cls:"oasis_pink",itemId:"ability_drs_lwr",width:"95%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"0 - Able to obtain, put on, and remove clothing and shoes without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"1 - Able to dress lower body without assistance if clothing and shoes are laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"2 - Someone must help the patient put on undergarments, slacks, socks or nylons, and shoes.",inputValue:"02"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"3 - Patient depends entirely upon another person to dress lower body. ",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1830) Bathing: Current ability to wash entire body safely. Excludes grooming (washing face, washing hands, and shampooing hair).",cls:"oasis_pink",itemId:"ability_wash_body",width:"95%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"0 - Able to bathe self in shower or tub independently, including getting in and out of tub/shower.",inputValue:"00"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"1 - With the use of devices, is able to bathe self in shower or tub independently, including getting in and out of the tub/shower.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"2 - Able to bathe in shower or tub with the intermittent assistance of another person: (a) for intermittent supervision or encouragement or reminders, OR (b) to get in and out of the shower or tub, OR (c) for washing difficult to reach areas.",inputValue:"02"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"3 - Able to participate in bathing self in shower or tub, but requires presence of another person throughout the bath for assistance or supervision.",inputValue:"03"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"4 - Unable to use the shower or tub, but able to bathe self independently with or without the use of devices at the sink, in chair, or on commode.",inputValue:"04"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"5 - Unable to use the shower or tub, but able to participate in bathing self in bed, at the sink, in bedside chair, or on commode, with the assistance or supervision of another person throughout the bath.",inputValue:"05"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"6 - Unable to participate effectively in bathing and is bathed totally by another person.",inputValue:"06"}]}],onValidate:function(e){var t=new Array;return m1810Upper=e.down("radiofield[name=m1810_crnt_dress_upper]").getGroupValue(),m1820Lower=e.down("radiofield[name=m1820_crnt_dress_lower]").getGroupValue(),m1830Bathing=e.down("radiofield[name=m1830_crnt_bathg]").getGroupValue(),m1810Upper==null&&t.push(["M1810","Current Ability to Dress Upper Body safely is required."]),m1820Lower==null&&t.push(["M1820","Current Ability to Dress Lower Body safely is required."]),m1830Bathing==null&&t.push(["M1830","Bathing is required."]),t}}),Ext.define("Ext.panel.AdliadLs2M1840M1860",{extend:"Ext.panel.Panel",alias:"widget.adliadLs2M1840M1860",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1840) Toilet Transferring: Current ability to get to and from the toilet or bedside commode safely and transfer on and off toilet/commode",cls:"oasis_pink",item_id:"toilet_trnsfr",width:"92%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"00",margin:5,boxLabel:"0 - Able to get to and from the toilet and transfer independently with or without a device"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"01",margin:5,boxLabel:"1 - When reminded, assisted, or supervised by another person, able to get to and from the toilet and transfer"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"02",margin:5,boxLabel:"2 - Unable to get to and from the toilet but is able to use a bedside commode (with or without assistance)"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"03",margin:5,boxLabel:"3 - Unable to get to and from the toilet or bedside commode but is able to use a bedpan/urinal independently"},{xtype:"radiofield",name:"m1840_crnt_toiltg",inputValue:"04",margin:5,boxLabel:"4 - Is totally dependent in toileting"}]},{xtype:"radiogroup",fieldLabel:"(M1850) Transferring: Current ability to move safely from bed to chair, or ability to turn and position self in bed if patient is bedfast",cls:"oasis_pink",item_id:"ability_move_safe",width:"92%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"00",margin:5,boxLabel:"0 - Able to independently transfer"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"01",margin:5,boxLabel:"1 - Able to transfer with minimal human assistance or with use of an assistive device"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"02",margin:5,boxLabel:"2 - Able to bear weight and pivot during the transfer process but unable to transfer self"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"03",margin:5,boxLabel:"3 - Unable to transfer self and is unable to bear weight or pivot when transferred by another person"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"04",margin:5,boxLabel:"4 - Bedfast, unable to transfer but is able to turn and position self in bed"},{xtype:"radiofield",name:"m1850_crnt_trnsfrng",inputValue:"05",margin:5,boxLabel:"5 - Bedfast, unable to transfer and is unable to turn and position self"}]},{xtype:"radiogroup",fieldLabel:"(M1860) Ambulation/Locomotion: Current ability to walk safely, once in a standing position, or use a wheelchair, once in a seated position, on a variety of surfaces",cls:"oasis_pink",item_id:"walk_safe",width:"92%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"00",margin:5,boxLabel:"0 - Able to independently walk on even and uneven surfaces and negotiate stairs with or without railings (specifically: needs no human assistance or assistive device)"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"01",margin:5,boxLabel:"1 - With the use of a one-handed device (for example. cane, single crutch, hemi-walker), able to independently walk on even and uneven surfaces and negotiate stairs with or without railings"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"02",margin:5,boxLabel:"2 - Requires use of a two-handed device (for example. walker or crutches) to walk alone on alevel surface and/or requires human supervision or assistance to negotiate stairs or steps or uneven surfaces"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"03",margin:5,boxLabel:"3 - Able to walk only with the supervision or assistance of another person at all times"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"04",margin:5,boxLabel:"4 - Chairfast, unable to ambulate but is able to wheel self independently"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"05",margin:5,boxLabel:"5 - Chairfast, unable to ambulate and is unable to wheel self"},{xtype:"radiofield",name:"m1860_crnt_ambltn",inputValue:"06",margin:5,boxLabel:"6 - Bedfast, unable to ambulate or be up in a chair"}]}],onValidate:function(e){var t=new Array;return m1840Field=e.down("radiofield[name=m1840_crnt_toiltg]").getGroupValue(),m1850Field=e.down("radiofield[name=m1850_crnt_trnsfrng]").getGroupValue(),m1860Field=e.down("radiofield[name=m1860_crnt_ambltn]").getGroupValue(),m1840Field==null&&t.push(["M1840","Select the patient's current ability of Toilet Transferring. "]),m1850Field==null&&t.push(["M1850","Select the patient's current ability of self Transferring."]),m1860Field==null&&t.push(["M1860","Select the patient's current ability of Ambulation/Locomotion."]),t}}),Ext.define
("Ext.panel.MedicationsM2030",{extend:"Ext.panel.Panel",alias:"widget.medicationsM2030",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M2030) Management of Injectable Medications: Patient's current ability to prepare and take all prescribedinjectable medications reliably and safely, including administration of correct dosage at the appropriatetimes/intervals. Excludes IV medications.",cls:"oasis_green",item_id:"inj_medications1",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"00",margin:5,boxLabel:"0 - Able to independently take the correct medication(s) and proper dosage(s) at the correct times."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"01",margin:5,boxLabel:"1 - Able to take injectable medication(s) at the correct times if: (a) individual syringes are prepared in advance by another person; OR(b) another person develops a drug diary or chart."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"02",margin:5,boxLabel:"2 - Able to take medication(s) at the correct times if given reminders by another person based on the frequency of the injection"},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"03",margin:5,boxLabel:"3 - Unable to take injectable medication unless administered by another person."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"NA",margin:5,boxLabel:"NA - No injectable medications prescribed."}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.assessmentReason=this.super_main.down("textfield[name=m0100_assmt_reason]")},onValidate:function(){var e=new Array,t=this.super_main.down("[name=m2030_crnt_mgmt_injctn_mdctn]").getGroupValue();return(this.assessmentReason.value==4||5||6)&&t==null&&e.push(["M2030","Management of injectable medications by patient field cannot be blank."]),e}}),Ext.define("Ext.panel.StatusRiskVaccineM1040M1055",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1040M1055",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1040) Influenza Vaccine: Did the patient receive the influenza vaccine from your agency for this year`s influenza season (October 1 through March 31) during this episode of care?",labelAlign:"top",cls:"oasis_blue",item_id:"flu_vacc",width:"99%",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1040_inflnz_rcvd_agncy",inputValue:"00",margin:5,boxLabel:"0 - No."},{xtype:"radiofield",name:"m1040_inflnz_rcvd_agncy",inputValue:"01",margin:5,boxLabel:"1 - Yes",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1050]</text>'},{xtype:"radiofield",name:"m1040_inflnz_rcvd_agncy",inputValue:"NA",margin:5,boxLabel:"NA - Does not apply because entire episode of care (SOC/ROC to Transfer/Discharge) is outside this influenza season.",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1050]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1045) Reason Influenza Vaccine not received: If the patient did not receive the influenza vaccine from your agency during this episode of care, state reason",cls:"oasis_blue",item_id:"flu_vacc_not_rec",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"01",margin:5,boxLabel:"1 - Received from another health care provider (e.g., physician)"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"02",margin:5,boxLabel:"2 - Received from your agency previously during this year`s flu season"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"03",margin:5,boxLabel:"3 - Offered and declined"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"04",margin:5,boxLabel:"4 - Assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"05",margin:5,boxLabel:"5 - Not indicated; patient does not meet age/condition guidelines for influenza vaccine"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"06",margin:5,boxLabel:"6 - Inability to obtain vaccine due to declared shortage"},{xtype:"radiofield",name:"m1045_inflnz_rsn_not_rcvd",inputValue:"07",margin:5,boxLabel:"7 - None of the above"}]},{xtype:"radiogroup",fieldLabel:"(M1050) Pneumococcal Vaccine: Did the patient receive pneumococcal polysaccharide vaccine (PPV) from your agency during this episode of care (SOC/ROC to Transfer/Discharge)?",cls:"oasis_blue",item_id:"pneumococcal_vacc",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1050_ppv_rcvd_agncy",inputValue:"0",margin:5,boxLabel:"0 - No."},{xtype:"radiofield",name:"m1050_ppv_rcvd_agncy",inputValue:"1",margin:5,boxLabel:"1 - Yes",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1500]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1055) Reason PPV not received: If patient did not receive the pneumococcal polysaccharide vaccine (PPV) from your agency during this episode of care (SOC/ROC to Transfer/Discharge), state reason",cls:"oasis_blue",item_id:"rea_ppv_not_received",labelAlign:"top",columns:1,margin:"10 5",width:"99%",items:[{xtype:"radiofield",name:"m1055_ppv_rsn_not_rcvd_agncy",inputValue:"01",margin:5,boxLabel:"1 - Patient has received PPV in the past"},{xtype:"radiofield",name:"m1055_ppv_rsn_not_rcvd_agncy",inputValue:"02",margin:5,boxLabel:"2 - Offered and declined"},{xtype:"radiofield",name:"m1055_ppv_rsn_not_rcvd_agncy",inputValue:"03",margin:5,boxLabel:"3 - Assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1055_ppv_rsn_not_rcvd_agncy",inputValue:"04",margin:5,boxLabel:"4 - Not indicated; patient does not meet age/condition guidelines for PPV"},{xtype:"radiofield",name:"m1055_ppv_rsn_not_rcvd_agncy",inputValue:"05",margin:5,boxLabel:"5 - None of the above"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1040InflnzRcvdAgncy=this.super_main.down("radiofield[name=m1040_inflnz_rcvd_agncy]").getGroupValue(),this.m1045InflnzRsnNotRcvd=this.super_main.down("radiofield[name=m1045_inflnz_rsn_not_rcvd]").getGroupValue(),this.super_main.query("[name = m1040_inflnz_rcvd_agncy]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="01"||e.getGroupValue()=="NA"?this.super_main.query("[name=m1045_inflnz_rsn_not_rcvd]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1045_inflnz_rsn_not_rcvd]").forEach(function(e){e.enable()},this)},this)},this),this.super_main.query("[name =m1050_ppv_rcvd_agncy]").forEach(function(e){e.on("change",function(e){var t=this.super_main.down("[name=m0100_assmt_reason]").value;e.getGroupValue()=="1"?this.super_main.query("[name=m1055_ppv_rsn_not_rcvd_agncy]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1055_ppv_rsn_not_rcvd_agncy]").forEach(function(e){e.enable()},this)},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m1040_inflnz_rcvd_agncy]"),n=this.super_main.down("radiofield[name=m1045_inflnz_rsn_not_rcvd]"),r=this.super_main.down("radiofield[name=m1050_ppv_rcvd_agncy]"),i=this.super_main.down("radiofield[name=m1055_ppv_rsn_not_rcvd_agncy]"),s=this.super_main.down("[name=m0100_assmt_reason]").value;return t.getGroupValue()==null&&e.push(["M1040","Please choose (Yes/No/NA) whether patient received influenza vaccine from your agency."]),t.getGroupValue()=="00"&&n.getGroupValue()==null&&e.push(["M1045","Select the reason of not receiving the Influenza vaccine by patient."]),r.getGroupValue()==null&&e.push(["M1050","Please choose (Yes/No/NA) whether patient received Pneumococcal vaccine from your agency."]),i.getGroupValue()==null&&r.getGroupValue()=="0"&&e.push(["M1055","Select the reason of not receiving the PPV vaccine by patient."]),e}}),Ext.define("Ext.panel.RespiratoryCardiacM1500M1510",{extend:"Ext.panel.Panel",alias:"widget.respiratoryCardiacM1500M1510",border:!1,items:[{xtype:"radiogroup",width:759,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1500) Symptoms in Heart Failure Patients: If patient has been diagnosed with heart failure, did the patient exhibit symptoms indicated by clinical heart failure guidelines (including dyspnea, orthopnea, edema, or weight gain) at the time of or at any time since the previous OASIS assessment?",cls:"oasis_blue",item_id:"symp_heart_failure",labelAlign:"top",items:[{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"0 - No",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2004]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"1 - Yes",inputValue:"01"},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"2 - Not assessed",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2004]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"NA - Patient does not have diagnosis of heart failure",inputValue:"NA",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2004]</text>'}]},{xtype:"checkboxgroup",width:759,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1510) Heart Failure Follow-up: If patient has been diagnosed with heart failure and has exhibited symptoms indicative of heart failure at the time of or any time since the previous OASIS assessment, what action(s) has (have) been taken to respond? (Mark all that apply.)",cls:"oasis_blue",item_id:"heart_failure_followup",labelAlign:"top",items:[{xtype:"checkboxfield",name:"m1510_hrt_failr_no_actn",boxLabel:"0 - No action taken",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_cntct",boxLabel:"1 - Patient`s physician (or other primary care practitioner) contacted the same day",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_er_trtmt",boxLabel:"2 - Patient advised to get emergency treatment (for example, call 911 or go to emergency room)",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_trtmt",boxLabel:"3 - Implemented physician-ordered patient-specific established parameters for treatment",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_clncl_intrvtn",boxLabel:"4 - Patient education or other clinical interventions",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_care_plan_chg",boxLabel:"5 - Obtained change in care plan orders (for example, increased monitoring by agency, change in visit frequency, telehealth.)",inputValue:"1"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1500SymtmHrtFailrPtnts=this.super_main.down("radiofield[name=m1500_symtm_hrt_failr_ptnts]").getGroupValue();var e=this.super_main.down("radiofie[name=m1500_symtm_hrt_failr_ptnts]");this.m1510HrtFailrNoActn=this.super_main.down("[name=m1510_hrt_failr_no_actn]"),this.m1510HrtFailrPhysnCntct=this.super_main.down("[name=m1510_hrt_failr_physn_cntct]"),this.m1510HrtFailrErTrtmt=this.super_main.down("[name=m1510_hrt_failr_er_trtmt]"),this.m1510HrtFailrPhysnTrtmt=this.super_main.down("[name=m1510_hrt_failr_physn_trtmt]"),this.m1510HrtFailrClnclIntrvtn=this.super_main.down("[name=m1510_hrt_failr_clncl_intrvtn]"),this.m1510HrtFailrCarePlanChg=this.super_main.down("[name=m1510_hrt_failr_care_plan_chg]");var t=["m1510_hrt_failr_no_actn","m1510_hrt_failr_physn_cntct","m1510_hrt_failr_er_trtmt","m1510_hrt_failr_physn_trtmt","m1510_hrt_failr_clncl_intrvtn","m1510_hrt_failr_care_plan_chg"];this.super_main.query("[name = m1500_symtm_hrt_failr_ptnts]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="00"||e.getGroupValue()=="02"||e.getGroupValue()=="NA"?Ext.each(t,function(e){this.super_main.down("checkbox[name="+e+"]").disable().reset()},this):Ext.each(t,function(e){this.super_main.down("checkbox[name="+e+"]").enable()},this)},this)},this);var n=[this.m1510HrtFailrPhysnCntct,this.m1510HrtFailrErTrtmt,this.m1510HrtFailrPhysnTrtmt,this.m1510HrtFailrClnclIntrvtn,this.m1510HrtFailrCarePlanChg];this.m1510HrtFailrNoActn.on("change",function(e){e.value=="1"?Ext.each(n,function(e,t){e.disable().reset()},this):Ext.each(n,function(e,t){e.enable().reset()},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m1500_symtm_hrt_failr_ptnts]");return t.getGroupValue()==null&&e.push(["M1500","Select one option, whether the patient's exhibiting the Symptoms in Heart Failure as per clinical guidelines."]),t.getGroupValue()=="01"&&this.m1510HrtFailrNoActn.value==0&&this.m1510HrtFailrPhysnCntct.value==0&&this.m1510HrtFailrPhysnTrtmt.value==0&&this.m1510HrtFailrClnclIntrvtn.value==0&&this.m1510HrtFailrCarePlanChg.value==0&&this.m1510HrtFailrErTrtmt.value==0&&e.push(["M1510","Do not leave Heart Failure Follow up empty, since Symptoms in Heart Failure is selected as 'Yes'."]),e}}),Ext.define("Ext.panel.EmergentCareM2300M2310",{extend:"Ext.panel.Panel",alias:"widget.emergentCareM2300M2310",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M2300) Emergent Care: At the time of or at any time since the previous OASIS assessment has the patient utilized a hospital emergency department (includes holding/observation status)?",cls:"oasis_blue",item_id:"emergent_care",width:"80%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2400]</text>'},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"01",margin:5,boxLabel:"1 - Yes, used hospital emergency department WITHOUT hospital admission"},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"02",margin:5,boxLabel:"2 - Yes, used hospital emergency department WITH hospital admission"},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"UK",margin:5,boxLabel:"UK - Unknown",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2400]</text>'}]},{xtype:"checkboxgroup",fieldLabel:"(M2310) Reason for Emergent Care: For what reason(s) did the patient seek and/or receive emergent care (with or without hospitalization)? (Mark all that apply.)",cls:"oasis_blue",item_id:"reason_emergent_care",width:"80%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m2310_ecr_medication",inputValue:"1",boxLabel:"1 - Improper medication administration, adverse drug reactions medication side effects, toxicity, anaphylaxis"},{xtype:"checkboxfield",name:"m2310_ecr_injry_by_fall",inputValue:"1",boxLabel:"2 - Injury caused by fall"},{xtype:"checkboxfield",name:"m2310_ecr_rsprtry_infctn",inputValue:"1",boxLabel:"3 - Respiratory infection (for example, pneumonia, bronchitis)"},{xtype:"checkboxfield",name:"m2310_ecr_rsprtry_othr",inputValue:"1",boxLabel:"4 - Other respiratory problem"},{xtype:"checkboxfield",name:"m2310_ecr_hrt_failr",inputValue:"1",boxLabel:"5 - Heart failure (for example, fluid overload)"},{xtype:"checkboxfield",name:"m2310_ecr_crdc_dsrthm",inputValue:"1",boxLabel:"6 - Cardiac dysrhythmia (irregular heartbeat)"},{xtype:"checkboxfield",name:"m2310_ecr_mi_chst_pain",inputValue:"1",boxLabel:"7 - Myocardial infarction or chest pain"},{xtype:"checkboxfield",name:"m2310_ecr_othr_hrt_dease",inputValue:"1",boxLabel:"8 - Other heart disease"},{xtype:"checkboxfield",name:"m2310_ecr_stroke_tia",inputValue:"1",boxLabel:"9 - Stroke (CVA) or TIA"},{xtype:"checkboxfield",name:"m2310_ecr_hypoglyc",inputValue:"1",boxLabel:"10 - Hypo/Hyperglycemia, diabetes out of control"},{xtype:"checkboxfield",name:"m2310_ecr_gi_prblm",inputValue:"1",boxLabel:"11 - GI bleeding, obstruction, constipation, impaction"},{xtype:"checkboxfield",name:"m2310_ecr_dhydrtn_malntr",inputValue:"1",boxLabel:"12 - Dehydration, malnutrition"},{xtype:"checkboxfield",name:"m2310_ecr_uti",inputValue:"1",boxLabel:"13 - Urinary tract infection"},{xtype:"checkboxfield",name:"m2310_ecr_cthtr_cmplctn",inputValue:"1",boxLabel:"14 - IV catheter-related infection or complication"},{xtype:"checkboxfield",name:"m2310_ecr_wnd_infctn_dtrortn",inputValue:"1",boxLabel:"15 - Wound infection or deterioration"},{xtype:"checkboxfield",name:"m2310_ecr_uncntld_pain",inputValue:"1",boxLabel:"16 - Uncontrolled pain"},{xtype:"checkboxfield",name:"m2310_ecr_mentl_bhvrl_prblm",inputValue:"1",boxLabel:"17 - Acute mental/behavioral health problem"},{xtype:"checkboxfield",name:"m2310_ecr_dvt_pulmnry",inputValue:"1",boxLabel:"18 - Deep vein thrombosis, pulmonary embolus"},{xtype:"checkboxfield",name:"m2310_ecr_other",inputValue:"1",boxLabel:"19 - Other than above reasons"},{xtype:"checkboxfield",name:"m2310_ecr_unknown",inputValue:"1",boxLabel:"UK - Reason unknown"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m2300EmerUseAftrLastAsmt=this.super_main.down("[name=m2300_emer_use_aftr_last_asmt]"),console.log(this.super_main.down("radiofield[name=m2300_emer_use_aftr_last_asmt]").getGroupValue()),this.m2310ecrMedication=this.super_main.down("[name=m2310_ecr_medication]"),this.m2310EcrInjryByFall=this.super_main.down("[name=m2310_ecr_injry_by_fall]"),this.m2310EcrRsprtryInfctn=this.super_main.down("[name=m2310_ecr_rsprtry_infctn]"),this.m2310EcrRsprtryOthr=this.super_main.down("[name=m2310_ecr_rsprtry_othr]"),this.m2310EcrHrtFailr=this.super_main.down("[name=m2310_ecr_hrt_failr]"),this.m2310EcrCrdcDsrthm=this.super_main.down("[name=m2310_ecr_crdc_dsrthm]"),this.m2310EcrMiChstPain=this.super_main.down("[name=m2310_ecr_mi_chst_pain]"),this.m2310EcrOthrHrtDease=this.super_main.down("[name=m2310_ecr_othr_hrt_dease]"),this.m2310EcrStrokeTia=this.super_main.down("[name=m2310_ecr_stroke_tia]"),this.m2310EcrHypoglyc=this.super_main.down("[name=m2310_ecr_hypoglyc]"),this.m2310EcrGiPrblm=this.super_main.down("[name=m2310_ecr_gi_prblm]"),this.m2310EcrDhydrtnMalntr=this.super_main.down("[name=m2310_ecr_dhydrtn_malntr]"),this.m2310EcrUti=this.super_main.down("[name=m2310_ecr_uti]"),this.m2310EcrCthtrCmplctn=this.super_main.down("[name=m2310_ecr_cthtr_cmplctn]"),this.m2310EcrWndInfctnDtrortn=this.super_main.down("[name=m2310_ecr_wnd_infctn_dtrortn]"),this.m2310EcrUncntldPain=this.super_main.down("[name=m2310_ecr_uncntld_pain]"),this.m2310EcrMentlBhvrlPrblm=this.super_main.down("[name=m2310_ecr_mentl_bhvrl_prblm]"),this.m2310EcrDvtPulmnry=this.super_main.down("[name=m2310_ecr_dvt_pulmnry]"),this.m2310EcrOther=this.super_main.down("[name=m2310_ecr_other]"),this.m2310EcrUnknown=this.super_main.down("[name=m2310_ecr_unknown]"),this.ecrMedications=[this.m2310ecrMedication,this.m2310EcrInjryByFall,this.m2310EcrRsprtryInfctn,this.m2310EcrRsprtryOthr,this.m2310EcrHrtFailr,this.m2310EcrCrdcDsrthm,this.m2310EcrMiChstPain,this.m2310EcrOthrHrtDease,this.m2310EcrStrokeTia,this.m2310EcrHypoglyc,this.m2310EcrGiPrblm,this.m2310EcrDhydrtnMalntr,this.m2310EcrUti,this.m2310EcrCthtrCmplctn,this.m2310EcrWndInfctnDtrortn,this.m2310EcrUncntldPain,this.m2310EcrMentlBhvrlPrblm,this.m2310EcrDvtPulmnry,this.m2310EcrOther,this.m2310EcrUnknown];var e=[this.m2310ecrMedication,this.m2310EcrInjryByFall,this.m2310EcrRsprtryInfctn,this.m2310EcrRsprtryOthr,this.m2310EcrHrtFailr,this.m2310EcrCrdcDsrthm,this.m2310EcrMiChstPain,this.m2310EcrOthrHrtDease,this.m2310EcrStrokeTia,this.m2310EcrHypoglyc,this.m2310EcrGiPrblm,this.m2310EcrDhydrtnMalntr,this.m2310EcrUti,this.m2310EcrCthtrCmplctn,this.m2310EcrWndInfctnDtrortn,this.m2310EcrUncntldPain,this.m2310EcrMentlBhvrlPrblm,this.m2310EcrDvtPulmnry,this.m2310EcrOther];this.super_main.query("[name=m2300_emer_use_aftr_last_asmt]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="00"||e.getGroupValue()=="UK"?Ext.each(this.ecrMedications,function(e){e.disable().setValue(!1)},this):Ext.each(this.ecrMedications,function(e){e.enable()},this)},this)},this),this.m2310EcrUnknown.on("change",function(t){t.value&&(Ext.each(e,function(e){e.setValue(!1)},this),t.value==0&&t.setValue(!0))},this),Ext.each(e,function(e){e.on("change",function(e){this.m2310EcrUnknown.value&&this.m2310EcrUnknown.setValue(!1)},this)},this)},selectFirstOrNone:function(){this.m2300EmerUseAftrLastAsmt.on("change",function(){this.m2300EmerUseAftrLastAsmt.getGroupValue()=="00"||this.m2300EmerUseAftrLastAsmt.getGroupValue()=="UK"?Ext.each(this.ecrMedications,function(e){e.setDisabled(!0)},this):Ext.each(this.ecrMedications,function(e){e.enable()},this)},this)},onValidate:function(){var e=new Array;return m2300EmerUseAftrLastAsmt=this.super_main.down("radiofield[name=m2300_emer_use_aftr_last_asmt]"),m2300EmerUseAftrLastAsmt.getGroupValue()==null&&e.push(["M2300","Select one option whether patient utilized emergency care since last OASIS."]),(m2300EmerUseAftrLastAsmt.getGroupValue()=="01"||m2300EmerUseAftrLastAsmt.getGroupValue()=="02")&&this.m2310ecrMedication.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310EcrRsprtryInfctn.value==0&&this.m2310EcrRsprtryOthr.value==0&&this.m2310EcrHrtFailr.value==0&&this.m2310EcrCrdcDsrthm.value==0&&this.m2310EcrMiChstPain.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310ecrMedication.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310EcrOthrHrtDease.value==0&&this.m2310EcrStrokeTia.value==0&&this.m2310EcrHypoglyc.value==0&&this.m2310EcrGiPrblm.value==0&&this.m2310EcrDhydrtnMalntr.value==0&&this.m2310EcrUti.value==0&&this.m2310EcrCthtrCmplctn.value==0&&this.m2310EcrWndInfctnDtrortn.value==0&&this.m2310EcrUncntldPain.value==0&&this.m2310EcrMentlBhvrlPrblm.value==0&&this.m2310EcrDvtPulmnry.value==0&&this.m2310EcrOther.value==0&&this.m2310EcrUnknown.value==0&&e.push(["M2310","Do not leave Reason for Emergent Care field empty, since 'Emergent Care' was selected to 'Yes'."]),e}}),Ext.define("Ext.panel.InterventionSynopsisM2400",{extend:"Ext.panel.Panel",alias:"widget.interventionSynopsisM2400",border:!1,items:[{xtype:"label",margin:"10 5",html:"(M2400) Intervention Synopsis: (Check only <u>one</u> box in each row.) At the time of or at any time since the previous OASIS assessment, were thefollowing interventions BOTH included in the physician-ordered plan of care AND implemented?",cls:"oasis_blue"},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:5},defaults:{bodyStyle:"padding: 5px;background-color:#CCE6FF;"},items:[{html:"Plan / Intervention",width:300,style:"text-align:center;font-weight:bold;",border:!1},{html:"No",width:60,style:"text-align:center;font-weight:bold;",border:!1},{html:"Yes",width:60,style:"text-align:center;font-weight:bold;",border:!1},{xtype:"label",text:"Not Applicable",width:240,colspan:"2",padding:"0 0 0 5px"},{html:"<b>a.</b> Diabetic foot care including monitoring for the presence of skin lesions on the lower extremities and patient/caregiver education on proper foot care",width:300,height:65,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Patient is not diabetic or is missing lower legs dut to congenital or acquired condition (bilateral amputee)",width:200,height:60,border:!1},{html:"<b>b.</b> Falls prevention interventions",width:300,height:70,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Formal multi-factor Fall Risk Assessment indicates the patient was not at risk for falls since the last OASIS assessment",width:200,height:80,border:!1},{html:"<b>c.</b> Depression intervention(s) such as medication, referral for other treatment, or a monitoring plan for current treatment ",width:300,height:85,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Formal assessment indicates patient did not meet criteria for depression AND patient did not have diagnosis of depression since the last OASIS assessment",width:200,height:95,border:!1},{html:"<b>d.</b> Intervention(s) to monitor and mitigate pain",width:300,height:60,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Formal assessment did not indicate pain since the last OASIS assessment",width:200,height:60,border:!1},{html:"<b>e.</b> Intervention(s) to prevent pressure ulcers",width:300,height:70,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Formal assessment indicates the patient was not at risk of pressure ulcers since the last OASIS assessment",width:200,height:80,border:!1},{html:"<b>f.</b> Pressure ulcer treatment based on principles of moist wound healing",width:300,height:100,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Dressings that support the principles of moist wound healing not indicated for this patient`s pressure ulcers <u>OR</u> patient has no pressure ulcers with need for moist wound healing",width:200,height:150,border:!1}]}],onValidate:function(e){var t=new Array;return m2400IntrvtnSmryDbtsFt=e.down("radiofield[name=m2400_intrvtn_smry_dbts_ft]").getGroupValue(),m2400IntrvtnSmryFallPrvnt=e.down("radiofield[name=m2400_intrvtn_smry_fall_prvnt]").getGroupValue(),m2400IntrvtnSmryDprsn=e.down("radiofield[name=m2400_intrvtn_smry_dprsn]").getGroupValue(),m2400IntrvtnSmryPainMntr=e.down("radiofield[name=m2400_intrvtn_smry_pain_mntr]").getGroupValue(),m2400IntrvtnSmryPrsulcPrvn=e.down("radiofield[name=m2400_intrvtn_smry_prsulc_prvn]").getGroupValue(),m2400IntrvtnSmryPrsulcWet=e.down("radiofield[name=m2400_intrvtn_smry_prsulc_wet]").getGroupValue(),m2400IntrvtnSmryDbtsFt==null&&t.push(["M2400","Select one option whether diabetic foot care education provided to patient/caregiver."]),m2400IntrvtnSmryFallPrvnt==null&&t.push(["M2400","Select one option for falls prevention interventions."]),m2400IntrvtnSmryDprsn==null&&t.push(["M2400","Select one option for depression intervention(s) for current treatment."]),m2400IntrvtnSmryPainMntr==null&&t.push(["M2400","Select one option for intervention(s) to monitor and mitigate pain."]),m2400IntrvtnSmryPrsulcPrvn==null&&t.push(["M2400","Select one option for interventions(s) to prevent pressure ulcers."]),m2400IntrvtnSmryPrsulcWet==null&&t.push(["M2400","Select one option for pressure ulcer treatment."]),t}}),Ext.define("Ext.panel.InterventionSynopsisM2400C1",{extend:"Ext.panel.Panel",alias:"widget.interventionSynopsisM2400C1",border:!1,items:[{xtype:"label",margin:"10 5",html:"(M2400) Intervention Synopsis: (Check only <u>one</u> box in each row.) At the time of or at any time since the previous OASIS assessment, were the following interventions BOTH included in the physician-ordered plan of care AND implemented?",cls:"oasis_blue"},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:5},defaults:{bodyStyle:"padding: 5px;background-color:#CCE6FF;"},items:[{html:"Plan / Intervention",width:300,style:"text-align:center;font-weight:bold;",border:!1},{html:"No",width:60,style:"text-align:center;font-weight:bold;",border:!1},{html:"Yes",width:60,style:"text-align:center;font-weight:bold;",border:!1},{xtype:"label",text:"Not Applicable",width:240,colspan:"2",padding:"0 0 0 5px"},{html:"<b>a.</b> Diabetic foot care including monitoring for the presence of skin lesions on the lower extremities and patient/caregiver education on proper foot care",width:300,height:100,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dbts_ft",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Patient is not diabetic or is missing lower legs due to congenital or acquired condition (bilateral amputee).",width:200,height:90,border:!1},{html:"<b>b.</b> Falls prevention interventions",width:300,height:70,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_fall_prvnt",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Every standardized, validated multi-factor fall risk assessment conducted at or since the last OASIS assessment indicates the patient has no risk for falls.",width:200,height:120,border:!1},{html:"<b>c.</b> Depression intervention(s) such as medication, referral for other treatment, or a monitoring plan for current treatment ",width:300,height:85,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_dprsn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Patient has no diagnosis of depression AND every standardized, validated depression screening conducted at or since the last OASIS assessment indicates the patient has: 1) no symptoms of depression; or 2) has some symptoms of depression but does not meet criteria for further evaluation of depression based on screening tool used.",width:220,height:210,border:!1},{html:"<b>d.</b> Intervention(s) to monitor and mitigate pain",width:300,height:60,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_pain_mntr",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Every standardized, validated pain assessment conducted at or since the last OASIS assessment indicates the patient has no pain",width:200,height:100,border:!1},{html:"<b>e.</b> Intervention(s) to prevent pressure ulcers",width:300,height:70,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_prvn",inputValue:"NA",boxLabel:"NA",width:60,padding:"0 0 0 10px"},{html:"Every standardized, validated pressure ulcer risk assessment conducted at or since the last OASIS assessment indicates the patient is not at risk of developing pressure ulcers.",width:200,height:120,border:!1},{html:"<b>f.</b> Pressure ulcer treatment based on principles of moist wound healing",width:300,height:100,border:!1},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"00",boxLabel:"0",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"01",boxLabel:"1",padding:"0 0 0 20px"},{xtype:"radiofield",name:"m2400_intrvtn_smry_prsulc_wet",inputValue:"NA",boxLabel:"NA",padding:"0 0 0 10px"},{html:"Patient has no pressure ulcers OR has no pressure ulcers for which moist wound healing is indicated.",width:200,height:150,border:!1}]}],onValidate:function(e){var t=new Array;return m2400IntrvtnSmryDbtsFt=e.down("radiofield[name=m2400_intrvtn_smry_dbts_ft]").getGroupValue(),m2400IntrvtnSmryFallPrvnt=e.down("radiofield[name=m2400_intrvtn_smry_fall_prvnt]").getGroupValue(),m2400IntrvtnSmryDprsn=e.down("radiofield[name=m2400_intrvtn_smry_dprsn]"
).getGroupValue(),m2400IntrvtnSmryPainMntr=e.down("radiofield[name=m2400_intrvtn_smry_pain_mntr]").getGroupValue(),m2400IntrvtnSmryPrsulcPrvn=e.down("radiofield[name=m2400_intrvtn_smry_prsulc_prvn]").getGroupValue(),m2400IntrvtnSmryPrsulcWet=e.down("radiofield[name=m2400_intrvtn_smry_prsulc_wet]").getGroupValue(),m2400IntrvtnSmryDbtsFt==null&&t.push(["M2400","Select one option whether diabetic foot care education provided to patient/caregiver."]),m2400IntrvtnSmryFallPrvnt==null&&t.push(["M2400","Select one option for falls prevention interventions."]),m2400IntrvtnSmryDprsn==null&&t.push(["M2400","Select one option for depression intervention(s) for current treatment."]),m2400IntrvtnSmryPainMntr==null&&t.push(["M2400","Select one option for intervention(s) to monitor and mitigate pain."]),m2400IntrvtnSmryPrsulcPrvn==null&&t.push(["M2400","Select one option for interventions(s) to prevent pressure ulcers."]),m2400IntrvtnSmryPrsulcWet==null&&t.push(["M2400","Select one option for pressure ulcer treatment."]),t}}),Ext.define("Ext.panel.InpatientFacilityM2410M2440",{extend:"Ext.panel.Panel",alias:"widget.inpatientFacilityM2410M2440",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2410) To which Inpatient Facility has the patient been admitted?",cls:"oasis_blue",item_id:"inpat_fac_adm",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"1 - Hospital",inputValue:"01",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2430]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"2 - Rehabilitation facility",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"3 - Nursing home",inputValue:"03",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2440]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"4 - Hospice",inputValue:"04",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"NA - No inpatient facility admission",inputValue:"NA"}]},{xtype:"checkboxgroup",fieldLabel:"(M2430) Reason for Hospitalization: For what reason(s) did the patient require hospitalization? (Mark all that apply.)",cls:"oasis_blue",item_id:"reason_for_hsptlztn",width:"60%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m2430_hosp_med",inputValue:"1",boxLabel:"1 - Improper medication administration, medication side effects, toxicity, anaphylaxis"},{xtype:"checkboxfield",name:"m2430_hosp_injry_by_fall",inputValue:"1",boxLabel:"2 - Injury caused by fall"},{xtype:"checkboxfield",name:"m2430_hosp_rsprtry_infctn",inputValue:"1",boxLabel:"3 - Respiratory infection (e.g., pneumonia, bronchitis)"},{xtype:"checkboxfield",name:"m2430_hosp_rsprtry_othr",inputValue:"1",boxLabel:"4 - Other respiratory problem"},{xtype:"checkboxfield",name:"m2430_hosp_hrt_failr",inputValue:"1",boxLabel:"5 - Heart failure (e.g., fluid overload)"},{xtype:"checkboxfield",name:"m2430_hosp_crdc_dsrthm",inputValue:"1",boxLabel:"6 - Cardiac dysrhythmia (irregular heartbeat)"},{xtype:"checkboxfield",name:"m2430_hosp_mi_chst_pain",inputValue:"1",boxLabel:"7 - Myocardial infarction or chest pain"},{xtype:"checkboxfield",name:"m2430_hosp_othr_hrt_dease",inputValue:"1",boxLabel:"8 - Other heart disease"},{xtype:"checkboxfield",name:"m2430_hosp_stroke_tia",inputValue:"1",boxLabel:"9 - Stroke (CVA) or TIA"},{xtype:"checkboxfield",name:"m2430_hosp_hypoglyc",inputValue:"1",boxLabel:"10 - Hypo/Hyperglycemia, diabetes out of control"},{xtype:"checkboxfield",name:"m2430_hosp_gi_prblm",inputValue:"1",boxLabel:"11 - GI bleeding, obstruction, constipation, impaction"},{xtype:"checkboxfield",name:"m2430_hosp_dhydrtn_malntr",inputValue:"1",boxLabel:"12 - Dehydration, malnutrition"},{xtype:"checkboxfield",name:"m2430_hosp_ur_tract",inputValue:"1",boxLabel:"13 - Urinary tract infection"},{xtype:"checkboxfield",name:"m2430_hosp_cthtr_cmplctn",inputValue:"1",boxLabel:"14 - IV catheter-related infection or complication"},{xtype:"checkboxfield",name:"m2430_hosp_wnd_infctn",inputValue:"1",boxLabel:"15 - Wound infection or deterioration"},{xtype:"checkboxfield",name:"m2430_hosp_pain",inputValue:"1",boxLabel:"16 - Uncontrolled pain"},{xtype:"checkboxfield",name:"m2430_hosp_mentl_bhvrl_prblm",inputValue:"1",boxLabel:"17 - Acute mental/behavioral health problem"},{xtype:"checkboxfield",name:"m2430_hosp_dvt_pulmnry",inputValue:"1",boxLabel:"18 - Deep vein thrombosis, pulmonary embolus"},{xtype:"checkboxfield",name:"m2430_hosp_schld_trtmt",inputValue:"1",boxLabel:"19 - Scheduled treatment or procedure"},{xtype:"checkboxfield",name:"m2430_hosp_other",inputValue:"1",boxLabel:"20 - Other than above reasons"},{xtype:"checkboxfield",name:"m2430_hosp_uk",inputValue:"1",boxLabel:"UK - Reason unknown",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]},{xtype:"checkboxgroup",fieldLabel:"(M2440) For what Reason(s) was the patient Admitted to a Nursing Home? (Mark all that apply.)",labelAlign:"top",columns:1,margin:"5px 5px 10px 5px",items:[{xtype:"checkboxfield",name:"m2440_nh_therapy",inputValue:"1",boxLabel:"1 - Therapy services"},{xtype:"checkboxfield",name:"m2440_nh_respite",inputValue:"1",boxLabel:"2 - Respite care"},{xtype:"checkboxfield",name:"m2440_nh_hospice",inputValue:"1",boxLabel:"3 - Hospice care"},{xtype:"checkboxfield",name:"m2440_nh_permanent",inputValue:"1",boxLabel:"4 - Permanent placement"},{xtype:"checkboxfield",name:"m2440_nh_unsafe_home",inputValue:"1",boxLabel:"5 - Unsafe for care at home"},{xtype:"checkboxfield",name:"m2440_nh_other",inputValue:"1",boxLabel:"6 - Other"},{xtype:"checkboxfield",name:"m2440_nh_unknown",inputValue:"1",boxLabel:"UK - Unknown",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m2430_hosp_med=this.super_main.down("[name=m2430_hosp_med]"),this.m2430_hosp_injry_by_fall=this.super_main.down("[name=m2430_hosp_injry_by_fall]"),this.m2430_hosp_rsprtry_infctn=this.super_main.down("[name=m2430_hosp_rsprtry_infctn]"),this.m2430_hosp_rsprtry_othr=this.super_main.down("[name=m2430_hosp_rsprtry_othr]"),this.m2430_hosp_hrt_failr=this.super_main.down("[name=m2430_hosp_hrt_failr]"),this.m2430_hosp_crdc_dsrthm=this.super_main.down("[name=m2430_hosp_crdc_dsrthm]"),this.m2430_hosp_mi_chst_pain=this.super_main.down("[name=m2430_hosp_mi_chst_pain]"),this.m2430_hosp_othr_hrt_dease=this.super_main.down("[name=m2430_hosp_othr_hrt_dease]"),this.m2430_hosp_stroke_tia=this.super_main.down("[name=m2430_hosp_stroke_tia]"),this.m2430_hosp_hypoglyc=this.super_main.down("[name=m2430_hosp_hypoglyc]"),this.m2430_hosp_gi_prblm=this.super_main.down("[name=m2430_hosp_gi_prblm]"),this.m2430_hosp_dhydrtn_malntr=this.super_main.down("[name=m2430_hosp_dhydrtn_malntr]"),this.m2430_hosp_ur_tract=this.super_main.down("[name=m2430_hosp_ur_tract]"),this.m2430_hosp_cthtr_cmplctn=this.super_main.down("[name=m2430_hosp_cthtr_cmplctn]"),this.m2430_hosp_wnd_infctn=this.super_main.down("[name=m2430_hosp_wnd_infctn]"),this.m2430_hosp_pain=this.super_main.down("[name=m2430_hosp_pain]"),this.m2430_hosp_mentl_bhvrl_prblm=this.super_main.down("[name=m2430_hosp_mentl_bhvrl_prblm]"),this.m2430_hosp_dvt_pulmnry=this.super_main.down("[name=m2430_hosp_dvt_pulmnry]"),this.m2430_hosp_schld_trtmt=this.super_main.down("[name=m2430_hosp_schld_trtmt]"),this.m2430_hosp_other=this.super_main.down("[name=m2430_hosp_other]"),this.m2430_hosp_uk=this.super_main.down("[name=m2430_hosp_uk]"),this.hospitals=["m2430_hosp_med","m2430_hosp_injry_by_fall","m2430_hosp_rsprtry_infctn","m2430_hosp_rsprtry_othr","m2430_hosp_hrt_failr","m2430_hosp_crdc_dsrthm","m2430_hosp_mi_chst_pain","m2430_hosp_othr_hrt_dease","m2430_hosp_stroke_tia","m2430_hosp_hypoglyc","m2430_hosp_gi_prblm","m2430_hosp_dhydrtn_malntr","m2430_hosp_ur_tract","m2430_hosp_cthtr_cmplctn","m2430_hosp_wnd_infctn","m2430_hosp_pain","m2430_hosp_mentl_bhvrl_prblm","m2430_hosp_dvt_pulmnry","m2430_hosp_schld_trtmt","m2430_hosp_other","m2430_hosp_uk"],this.reasons=["m2440_nh_therapy","m2440_nh_respite","m2440_nh_hospice","m2440_nh_permanent","m2440_nh_unsafe_home","m2440_nh_other","m2440_nh_unknown"],this.validReasons=["m2440_nh_therapy","m2440_nh_respite","m2440_nh_hospice","m2440_nh_permanent","m2440_nh_unsafe_home","m2440_nh_other"],this.reasonUK=this.down("[name=m2440_nh_unknown]"),Ext.each(this.validReasons,function(e,t){this.down("[name="+e+"]").on("change",function(e){e.value&&this.reasonUK.setValue(!1)},this)},this),this.reasonUK.on("change",function(e){Ext.each(this.validReasons,function(t,n){e.value&&this.down("[name="+t+"]").setValue(!1)},this)},this),this.super_main.query("[name = m2410_inpat_facility]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="02"||e.getGroupValue()=="04"?(Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this),Ext.each(this.reasons,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this)):(Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").enable()},this),Ext.each(this.reasons,function(e){this.super_main.down("[name="+e+"]").enable()},this)),e.getGroupValue()=="03"&&Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this),e.getGroupValue()=="01"&&(Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").enable()},this),Ext.each(this.reasons,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this))},this)},this);var e=["m2430_hosp_med","m2430_hosp_injry_by_fall","m2430_hosp_rsprtry_infctn","m2430_hosp_rsprtry_othr","m2430_hosp_hrt_failr","m2430_hosp_crdc_dsrthm","m2430_hosp_mi_chst_pain","m2430_hosp_othr_hrt_dease","m2430_hosp_stroke_tia","m2430_hosp_hypoglyc","m2430_hosp_gi_prblm","m2430_hosp_dhydrtn_malntr","m2430_hosp_ur_tract","m2430_hosp_cthtr_cmplctn","m2430_hosp_wnd_infctn","m2430_hosp_pain","m2430_hosp_mentl_bhvrl_prblm","m2430_hosp_dvt_pulmnry","m2430_hosp_schld_trtmt","m2430_hosp_other"];this.m2430_hosp_uk.on("change",function(t){t.value&&(Ext.each(e,function(e){this.super_main.down("[name="+e+"]").setValue(!1)},this),t.value==0&&t.setValue(!0))},this),Ext.each(e,function(e){this.super_main.down("[name="+e+"]").on("change",function(e){this.m2430_hosp_uk.value&&this.m2430_hosp_uk.setValue(!1)},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m2410_inpat_facility]");t.getGroupValue()==null&&e.push(["M2410","Select one option to which inpatient facility the patient been admitted."]),t.getGroupValue()=="01"&&this.m2430_hosp_med.value==0&&this.m2430_hosp_injry_by_fall.value==0&&this.m2430_hosp_rsprtry_infctn.value==0&&this.m2430_hosp_rsprtry_othr.value==0&&this.m2430_hosp_hrt_failr.value==0&&this.m2430_hosp_crdc_dsrthm.value==0&&this.m2430_hosp_mi_chst_pain.value==0&&this.m2430_hosp_othr_hrt_dease.value==0&&this.m2430_hosp_stroke_tia.value==0&&this.m2430_hosp_hypoglyc.value==0&&this.m2430_hosp_gi_prblm.value==0&&this.m2430_hosp_dhydrtn_malntr.value==0&&this.m2430_hosp_ur_tract.value==0&&this.m2430_hosp_cthtr_cmplctn.value==0&&this.m2430_hosp_wnd_infctn.value==0&&this.m2430_hosp_pain.value==0&&this.m2430_hosp_mentl_bhvrl_prblm.value==0&&this.m2430_hosp_dvt_pulmnry.value==0&&this.m2430_hosp_schld_trtmt.value==0&&this.m2430_hosp_other.value==0&&this.m2430_hosp_uk.value==0&&e.push(["M2430","Select at least one reason for patient hospitaliation, since option 'Hospital' has been selected in inpatient facility admission."]);var n=["m2440_nh_therapy","m2440_nh_respite","m2440_nh_hospice","m2440_nh_permanent","m2440_nh_unsafe_home","m2440_nh_other","m2440_nh_unknown"],r=!1;Ext.each(n,function(e,t){r=r||this.down("[name="+e+"]").value!=0},this);var i=this.super_main.down("[name=m0100_assmt_reason]").value;return(i=="06"||i=="07")&&t&&t.getGroupValue()=="03"&&!r&&e.push(["M2440","Select at least one option from the reason(s) the patient admitted to a Nursing Home."]),i=="09"&&t.getGroupValue()!="NA"&&e.push(["M2410","Inpatient Facility, the patient been admitted should be 'NA' since 'Discharge from Agency' has been selected in 'Clinical Record Items'."]),(i=="06"||i=="07")&&t.getGroupValue()=="NA"&&e.push(["M2410","Inpatient Facility, the patient been admitted should not be 'NA' since Transferred to an inpatient facility' has been selected in 'Clinical Record Items'. "]),e}}),Ext.define("Ext.panel.InpatientFacilityM2410M2430C1",{extend:"Ext.panel.Panel",alias:"widget.inpatientFacilityM2410M2430C1",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2410) To which Inpatient Facility has the patient been admitted?",cls:"oasis_blue",item_id:"inpat_fac_adm",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"1 - Hospital",inputValue:"01",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2430]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"2 - Rehabilitation facility",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"3 - Nursing home",inputValue:"03",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"4 - Hospice",inputValue:"04",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]},{xtype:"checkboxgroup",fieldLabel:"(M2430) Reason for Hospitalization: For what reason(s) did the patient require hospitalization? (Mark all that apply.)",cls:"oasis_blue",item_id:"reason_for_hsptlztn",width:"60%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m2430_hosp_med",inputValue:"1",boxLabel:"1 - Improper medication administration, adverse drug reactions, medication side effects, toxicity, anaphylaxis"},{xtype:"checkboxfield",name:"m2430_hosp_injry_by_fall",inputValue:"1",boxLabel:"2 - Injury caused by fall"},{xtype:"checkboxfield",name:"m2430_hosp_rsprtry_infctn",inputValue:"1",boxLabel:"3 - Respiratory infection (for example, pneumonia, bronchitis)"},{xtype:"checkboxfield",name:"m2430_hosp_rsprtry_othr",inputValue:"1",boxLabel:"4 - Other respiratory problem"},{xtype:"checkboxfield",name:"m2430_hosp_hrt_failr",inputValue:"1",boxLabel:"5 - Heart failure (for example, fluid overload)"},{xtype:"checkboxfield",name:"m2430_hosp_crdc_dsrthm",inputValue:"1",boxLabel:"6 - Cardiac dysrhythmia (irregular heartbeat)"},{xtype:"checkboxfield",name:"m2430_hosp_mi_chst_pain",inputValue:"1",boxLabel:"7 - Myocardial infarction or chest pain"},{xtype:"checkboxfield",name:"m2430_hosp_othr_hrt_dease",inputValue:"1",boxLabel:"8 - Other heart disease"},{xtype:"checkboxfield",name:"m2430_hosp_stroke_tia",inputValue:"1",boxLabel:"9 - Stroke (CVA) or TIA"},{xtype:"checkboxfield",name:"m2430_hosp_hypoglyc",inputValue:"1",boxLabel:"10 - Hypo/Hyperglycemia, diabetes out of control"},{xtype:"checkboxfield",name:"m2430_hosp_gi_prblm",inputValue:"1",boxLabel:"11 - GI bleeding, obstruction, constipation, impaction"},{xtype:"checkboxfield",name:"m2430_hosp_dhydrtn_malntr",inputValue:"1",boxLabel:"12 - Dehydration, malnutrition"},{xtype:"checkboxfield",name:"m2430_hosp_ur_tract",inputValue:"1",boxLabel:"13 - Urinary tract infection"},{xtype:"checkboxfield",name:"m2430_hosp_cthtr_cmplctn",inputValue:"1",boxLabel:"14 - IV catheter-related infection or complication"},{xtype:"checkboxfield",name:"m2430_hosp_wnd_infctn",inputValue:"1",boxLabel:"15 - Wound infection or deterioration"},{xtype:"checkboxfield",name:"m2430_hosp_pain",inputValue:"1",boxLabel:"16 - Uncontrolled pain"},{xtype:"checkboxfield",name:"m2430_hosp_mentl_bhvrl_prblm",inputValue:"1",boxLabel:"17 - Acute mental/behavioral health problem"},{xtype:"checkboxfield",name:"m2430_hosp_dvt_pulmnry",inputValue:"1",boxLabel:"18 - Deep vein thrombosis, pulmonary embolus"},{xtype:"checkboxfield",name:"m2430_hosp_schld_trtmt",inputValue:"1",boxLabel:"19 - Scheduled treatment or procedure"},{xtype:"checkboxfield",name:"m2430_hosp_other",inputValue:"1",boxLabel:"20 - Other than above reasons"},{xtype:"checkboxfield",name:"m2430_hosp_uk",inputValue:"1",boxLabel:"UK - Reason unknown",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m2430_hosp_med=this.super_main.down("[name=m2430_hosp_med]"),this.m2430_hosp_injry_by_fall=this.super_main.down("[name=m2430_hosp_injry_by_fall]"),this.m2430_hosp_rsprtry_infctn=this.super_main.down("[name=m2430_hosp_rsprtry_infctn]"),this.m2430_hosp_rsprtry_othr=this.super_main.down("[name=m2430_hosp_rsprtry_othr]"),this.m2430_hosp_hrt_failr=this.super_main.down("[name=m2430_hosp_hrt_failr]"),this.m2430_hosp_crdc_dsrthm=this.super_main.down("[name=m2430_hosp_crdc_dsrthm]"),this.m2430_hosp_mi_chst_pain=this.super_main.down("[name=m2430_hosp_mi_chst_pain]"),this.m2430_hosp_othr_hrt_dease=this.super_main.down("[name=m2430_hosp_othr_hrt_dease]"),this.m2430_hosp_stroke_tia=this.super_main.down("[name=m2430_hosp_stroke_tia]"),this.m2430_hosp_hypoglyc=this.super_main.down("[name=m2430_hosp_hypoglyc]"),this.m2430_hosp_gi_prblm=this.super_main.down("[name=m2430_hosp_gi_prblm]"),this.m2430_hosp_dhydrtn_malntr=this.super_main.down("[name=m2430_hosp_dhydrtn_malntr]"),this.m2430_hosp_ur_tract=this.super_main.down("[name=m2430_hosp_ur_tract]"),this.m2430_hosp_cthtr_cmplctn=this.super_main.down("[name=m2430_hosp_cthtr_cmplctn]"),this.m2430_hosp_wnd_infctn=this.super_main.down("[name=m2430_hosp_wnd_infctn]"),this.m2430_hosp_pain=this.super_main.down("[name=m2430_hosp_pain]"),this.m2430_hosp_mentl_bhvrl_prblm=this.super_main.down("[name=m2430_hosp_mentl_bhvrl_prblm]"),this.m2430_hosp_dvt_pulmnry=this.super_main.down("[name=m2430_hosp_dvt_pulmnry]"),this.m2430_hosp_schld_trtmt=this.super_main.down("[name=m2430_hosp_schld_trtmt]"),this.m2430_hosp_other=this.super_main.down("[name=m2430_hosp_other]"),this.m2430_hosp_uk=this.super_main.down("[name=m2430_hosp_uk]"),this.hospitals=["m2430_hosp_med","m2430_hosp_injry_by_fall","m2430_hosp_rsprtry_infctn","m2430_hosp_rsprtry_othr","m2430_hosp_hrt_failr","m2430_hosp_crdc_dsrthm","m2430_hosp_mi_chst_pain","m2430_hosp_othr_hrt_dease","m2430_hosp_stroke_tia","m2430_hosp_hypoglyc","m2430_hosp_gi_prblm","m2430_hosp_dhydrtn_malntr","m2430_hosp_ur_tract","m2430_hosp_cthtr_cmplctn","m2430_hosp_wnd_infctn","m2430_hosp_pain","m2430_hosp_mentl_bhvrl_prblm","m2430_hosp_dvt_pulmnry","m2430_hosp_schld_trtmt","m2430_hosp_other","m2430_hosp_uk"],this.super_main.query("[name = m2410_inpat_facility]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="02"||e.getGroupValue()=="04"?Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this):Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").enable()},this),e.getGroupValue()=="03"&&Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").disable().setValue(!1)},this),e.getGroupValue()=="01"&&Ext.each(this.hospitals,function(e){this.super_main.down("[name="+e+"]").enable()},this)},this)},this);var e=["m2430_hosp_med","m2430_hosp_injry_by_fall","m2430_hosp_rsprtry_infctn","m2430_hosp_rsprtry_othr","m2430_hosp_hrt_failr","m2430_hosp_crdc_dsrthm","m2430_hosp_mi_chst_pain","m2430_hosp_othr_hrt_dease","m2430_hosp_stroke_tia","m2430_hosp_hypoglyc","m2430_hosp_gi_prblm","m2430_hosp_dhydrtn_malntr","m2430_hosp_ur_tract","m2430_hosp_cthtr_cmplctn","m2430_hosp_wnd_infctn","m2430_hosp_pain","m2430_hosp_mentl_bhvrl_prblm","m2430_hosp_dvt_pulmnry","m2430_hosp_schld_trtmt","m2430_hosp_other"];this.m2430_hosp_uk.on("change",function(t){t.value&&(Ext.each(e,function(e){this.super_main.down("[name="+e+"]").setValue(!1)},this),t.value==0&&t.setValue(!0))},this),Ext.each(e,function(e){this.super_main.down("[name="+e+"]").on("change",function(e){this.m2430_hosp_uk.value&&this.m2430_hosp_uk.setValue(!1)},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m2410_inpat_facility]");t.getGroupValue()==null&&e.push(["M2410","Select one option to which inpatient facility the patient been admitted."]),t.getGroupValue()=="01"&&this.m2430_hosp_med.value==0&&this.m2430_hosp_injry_by_fall.value==0&&this.m2430_hosp_rsprtry_infctn.value==0&&this.m2430_hosp_rsprtry_othr.value==0&&this.m2430_hosp_hrt_failr.value==0&&this.m2430_hosp_crdc_dsrthm.value==0&&this.m2430_hosp_mi_chst_pain.value==0&&this.m2430_hosp_othr_hrt_dease.value==0&&this.m2430_hosp_stroke_tia.value==0&&this.m2430_hosp_hypoglyc.value==0&&this.m2430_hosp_gi_prblm.value==0&&this.m2430_hosp_dhydrtn_malntr.value==0&&this.m2430_hosp_ur_tract.value==0&&this.m2430_hosp_cthtr_cmplctn.value==0&&this.m2430_hosp_wnd_infctn.value==0&&this.m2430_hosp_pain.value==0&&this.m2430_hosp_mentl_bhvrl_prblm.value==0&&this.m2430_hosp_dvt_pulmnry.value==0&&this.m2430_hosp_schld_trtmt.value==0&&this.m2430_hosp_other.value==0&&this.m2430_hosp_uk.value==0&&e.push(["M2430","Select at least one reason for patient hospitaliation, since option 'Hospital' has been selected in inpatient facility admission."]);var n=this.super_main.down("[name=m0100_assmt_reason]").value;return n=="09"&&t.getGroupValue()!="NA"&&e.push(["M2410","Inpatient Facility, the patient been admitted should be 'NA' since 'Discharge from Agency' has been selected in 'Clinical Record Items'."]),(n=="06"||n=="07")&&t.getGroupValue()=="NA"&&e.push(["M2410","Inpatient Facility, the patient been admitted should not be 'NA' since Transferred to an inpatient facility' has been selected in 'Clinical Record Items'. "]),e}}),Ext.define("Ext.panel.MedicationsM2004M2015",{extend:"Ext.panel.Panel",alias:"widget.medicationsM2004M2015",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M2004) Medication Intervention: If there were any clinically significant medication issues since the previous OASIS assessment, was a physician or the physician-designee contacted within one calendar day of the assessmentto resolve clinically significant medication issues, including reconciliation?",cls:"oasis_blue",item_id:"med_interven",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - No clinically significant medication issues identified since the previous OASIS assessment"}]},{xtype:"radiogroup",fieldLabel:"(M2015) Patient/Caregiver Drug Education Intervention: Since the previous OASIS assessment, was thepatient/caregiver instructed by agency staff or other health care provider to monitor the effectiveness of drugtherapy, drug reactions, and side effects, and how and when to report problems that may occur?",cls:"oasis_blue",item_id:"drug_edu1",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - Patient not taking any drugs"}]}],onValidate:function(e){var t=new Array;return m2004MdctnIntrvtn=e.down("radiofield[name=m2004_mdctn_intrvtn]").getGroupValue(),m2015DrugEdctnIntrvtn=e.down("radiofield[name=m2015_drug_edctn_intrvtn]").getGroupValue(),m2004MdctnIntrvtn==null&&t.push(["M2004","Choose (Yes/No/NA), whether patient have medical interventions since previous OASIS assessment."]),m2015DrugEdctnIntrvtn==null&&t.push(["M2015","Choose (Yes/No/NA), whether patient/caregiver have drug education interventions."]),t}}),Ext.define("Ext.panel.SensoryStatusM1230M1242",{extend:"Ext.panel.Panel",alias:"widget.sensoryStatusM1230M1242",border:!1,margin:5,items:[{xtype:"radiogroup",fieldLabel:"(M1230) Speech and Oral (Verbal) Expression of Language (in patient`s own language)",cls:"oasis_blue",item_id:"speech_and_oral",width:"90%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1230_speech",inputValue:"00",margin:5,boxLabel:"0 - Expresses complex ideas, feelings, and needs clearly, completely, and easily in all situations with no observable impairment."},{xtype:"radiofield",name:"m1230_speech",inputValue:"01",margin:5,boxLabel:"1 - Minimal difficulty in expressing ideas and needs (may take extra time; makes occasional errors in word choice, grammar or speech intelligibility; needs minimalprompting or assistance)."},{xtype:"radiofield",name:"m1230_speech",inputValue:"02",margin:5,boxLabel:"2 - Expresses simple ideas or needs with moderate difficulty (needs prompting or assistance,errors in word choice, organization or speech intelligibility). Speaks in phrases or short sentences."},{xtype:"radiofield",name:"m1230_speech",inputValue:"03",margin:5,boxLabel:"3 - Has severe difficulty expressing basic ideas or needs and requires maximal assistance or guessing by listener. Speech limited to single words or short phrases."},{xtype:"radiofield",name:"m1230_speech",inputValue:"04",margin:5,boxLabel:"4 - Unable to express basic needs even with maximal prompting or assistance but is not comatose or unresponsive (for example: speech is nonsensical or unintelligible)."},{xtype:"radiofield",name:"m1230_speech",inputValue:"05",margin:5,boxLabel:"5 - Patient nonresponsive or unable to speak."}]},{xtype:"radiogroup",fieldLabel:"(M1242) Frequency of Pain Interfering with patient`s activity or movement",labelAlign:"top",cls:"oasis_pink",item_id:"fre_of_pain1",width:"90%",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"00",margin:5,boxLabel:"0 - Patient has no pain"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"01",margin:5,boxLabel:"1 - Patient has pain that does not interfere with activity or movement"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"02",margin:5,boxLabel:"2 - Less often than daily"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"03",margin:5,boxLabel:"3 - Daily, but not constantly"},{xtype:"radiofield",name:"m1242_pain_freq_actvty_mvmt",inputValue:"04",margin:5,boxLabel:"4 - All of the time"}]}],onValidate:function(e){var t=new Array;return m1230Speech=e.down("radiofield[name=m1230_speech]").getGroupValue(),m1242Actvty=e.down("radiofield[name=m1242_pain_freq_actvty_mvmt]").getGroupValue(),m1230Speech==null&&t.push(["M1230","Select at least one way how the patient is able to convey the Speech and Oral Communication."]),m1242Actvty==null&&t.push(["M1242","Select at least one Frequency of Pain."]),t}}),Ext.define("Ext.panel.RespiratoryCardiacM1400M1510",{extend:"Ext.panel.Panel",alias:"widget.respiratoryCardiacM1400M1510",border:!1,margin:5,items:[{xtype:"radiogroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1400) When is the patient dyspneic or noticeably Short of Breath?",cls:"oasis_pink",itemId:"pat_dysn1",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"0 - Patient is not short of breath ",inputValue:"00"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"1 - When walking more than 20 feet, climbing stairs",inputValue:"01"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"2 - With moderate exertion (e.g., while dressing, using commode or bedpan, walking distances less than 20 feet) ",inputValue:"02"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"3 - With minimal exertion (e.g., while eating, talking, or performing other ADLs) or with agitation",inputValue:"03"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"4 - At rest (during day or night)",inputValue:"04"}]},{xtype:"checkboxgroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1410) Respiratory Treatments utilized at home: (Mark all that apply.)",labelAlign:"top",items:[{xtype:"checkboxfield",name:"m1410_resptx_oxygen",boxLabel:"1 - Oxygen (intermittent or continuous)",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_ventilator",boxLabel:"2 - Ventilator (continually or at night)",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_airpress",boxLabel:"3 - Continuous / Bi-level positive airway pressure ",inputValue:"1"},{xtype:"checkboxfield",name:"m1410_resptx_none",boxLabel:"4 - None of the above ",inputValue:"1"}]},{xtype:"radiogroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1500) Symptoms in Heart Failure Patients: If patient has been diagnosed with heart failure, did the patient exhibitsymptoms indicated by clinical heart failure guidelines (including dyspnea, orthopnea, edema, or weight gain)at any point since the previous OASIS assessment?",cls:"oasis_blue",itemId:"symp_heart_failure2",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"0 - No",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"1 - Yes",inputValue:"01"},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"2 - Not assessed",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"NA - Patient does not have diagnosis of heart failure",inputValue:"NA",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'}]},{xtype:"checkboxgroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1510) Heart Failure Follow-up: If patient has been diagnosed with heart failure and has exhibited symptomsindicative of heart failure since the previous OASIS assessment, what action(s) has (have) been taken torespond? (Mark all that apply.)",cls:"oasis_blue",itemId:"symp_indicative_heart_failure2",width:"98%",labelAlign:"top",items:[{xtype:"checkboxfield",name:"m1510_hrt_failr_no_actn",boxLabel:"0 - No action taken",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_cntct",boxLabel:"1 - Patient`s physician (or other primary care practitioner) contacted the same day",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_er_trtmt",boxLabel:"2 - Patient advised to get emergency treatment (e.g., call 911 or go to emergency room)",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_trtmt",boxLabel:"3 - Implemented physician-ordered patient-specific established parameters for treatment",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_clncl_intrvtn",boxLabel:"4 - Patient education or other clinical interventions",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_care_plan_chg",boxLabel:"5 - Obtained change in care plan orders (e.g., increased monitoring by agency, change in visitfrequency, telehealth, etc.)",inputValue:"1"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.noneOfAbove=this.super_main.down("checkbox[name=m1410_resptx_none]"),this.fields=["m1410_resptx_oxygen","m1410_resptx_ventilator","m1410_resptx_airpress"],this.m1410Oxygen=this.super_main.down("[name=m1410_resptx_oxygen]"),this.m1410Ventilator=this.super_main.down("[name=m1410_resptx_ventilator]"),this.m1410AirPress=this.super_main.down("[name=m1410_resptx_airpress]"),this.m1410None=this.super_main.down("[name=m1410_resptx_none]"),this.selectNoneOfAbove(),this.selectOtherValues(),this.m1500SymtmHrtFailrPtnts=this.super_main.down("radiofield[name=m1500_symtm_hrt_failr_ptnts]").getGroupValue();var e=this.super_main.down("radiofie[name=m1500_symtm_hrt_failr_ptnts]");this.m1510HrtFailrNoActn=this.super_main.down("[name=m1510_hrt_failr_no_actn]"),this.m1510HrtFailrPhysnCntct=this.super_main.down("[name=m1510_hrt_failr_physn_cntct]"),this.m1510HrtFailrErTrtmt=this.super_main.down("[name=m1510_hrt_failr_er_trtmt]"),this.m1510HrtFailrPhysnTrtmt=this.super_main.down("[name=m1510_hrt_failr_physn_trtmt]"),this.m1510HrtFailrClnclIntrvtn=this.super_main.down("[name=m1510_hrt_failr_clncl_intrvtn]"),this.m1510HrtFailrCarePlanChg=this.super_main.down("[name=m1510_hrt_failr_care_plan_chg]"),heartFailures=["m1510_hrt_failr_no_actn","m1510_hrt_failr_physn_cntct","m1510_hrt_failr_er_trtmt","m1510_hrt_failr_physn_trtmt","m1510_hrt_failr_clncl_intrvtn","m1510_hrt_failr_care_plan_chg"],this.super_main.query("[name = m1500_symtm_hrt_failr_ptnts]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="00"||e.getGroupValue()=="02"||e.getGroupValue()=="NA"?
Ext.each(heartFailures,function(e){this.super_main.down("checkbox[name="+e+"]").disable().setValue(!1)},this):Ext.each(heartFailures,function(e){this.super_main.down("checkbox[name="+e+"]").enable().setValue(!1)},this)},this)},this);var t=[this.m1510HrtFailrPhysnCntct,this.m1510HrtFailrErTrtmt,this.m1510HrtFailrPhysnTrtmt,this.m1510HrtFailrClnclIntrvtn,this.m1510HrtFailrCarePlanChg];this.m1510HrtFailrNoActn.on("change",function(e){e.value=="1"?Ext.each(t,function(e,t){e.disable().setValue(!1)},this):Ext.each(t,function(e,t){e.enable().setValue(!1)},this)},this)},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&Ext.each(this.fields,function(e){console.log("element"+e),this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectOtherValues:function(){Ext.each(this.fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1410None.setValue(!1)},this)},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m1500_symtm_hrt_failr_ptnts]");return m1400Dyspneic=this.super_main.down("radiofield[name=m1400_when_dyspneic]").getGroupValue(),m1400Dyspneic==null&&t.push(["M1400","Select the reason when patient feel noticeably short of breath."]),this.m1410Oxygen.value==0&&this.m1410Ventilator.value==0&&this.m1410AirPress.value==0&&this.m1410None.value==0&&t.push(["M1410","Select at least one mode of treatment from 'Respiratory Treatments utilized at home'."]),n.getGroupValue()==null&&t.push(["M1500","Symptoms In Heart Failure Patients is required."]),n.getGroupValue()=="01"&&this.m1510HrtFailrNoActn.value==0&&this.m1510HrtFailrPhysnCntct.value==0&&this.m1510HrtFailrErTrtmt.value==0&&this.m1510HrtFailrPhysnTrtmt.value==0&&this.m1510HrtFailrClnclIntrvtn.value==0&&this.m1510HrtFailrCarePlanChg.value==0&&t.push(["M1510","Do not leave Heart Failure Follow up field empty, since Symptoms in Heart Failure is selected as 'Yes'."]),t}}),Ext.define("Ext.panel.EliminationM1600M1620",{extend:"Ext.panel.Panel",alias:"widget.eliminationM1600M1620",border:!1,items:[{xtype:"panel",layout:"hbox",items:[{xtype:"panel",border:!1,flex:1,height:600,items:[{xtype:"radiogroup",fieldLabel:"(M1600) Has this patient been treated for a Urinary Tract Infection in the past 14 days?",cls:"oasis_blue",item_id:"urinary_tract_infection",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1600_uti",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m1600_uti",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m1600_uti",inputValue:"NA",margin:5,boxLabel:"NA - Patient on prophylactic treatment"},{xtype:"radiofield",name:"m1600_uti",inputValue:"UK",margin:5,boxLabel:'UK - Unknown[Omit "UK" option on DC]'}]},{xtype:"radiogroup",fieldLabel:"(M1610) Urinary Incontinence or Urinary Catheter Presence",cls:"oasis_pink",item_id:"uri_tract_inf",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"00",margin:5,boxLabel:"0 - No incontinence or catheter (includes anuria or ostomy for urinary drainage)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"01",margin:5,boxLabel:"1 - Patient is incontinent"},{xtype:"radiofield",name:"m1610_ur_incont",inputValue:"02",margin:5,boxLabel:"2 - Patient requires a urinary catheter (specifically: external, indwelling, intermittent, suprapubic)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1620]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1615) When does Urinary Incontinence occur?",cls:"oasis_blue",item_id:"uri_incontinence",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"00",margin:5,boxLabel:"0 - Timed-voiding defers incontinence"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"01",margin:5,boxLabel:"1 - Occasional stress incontinence"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"02",margin:5,boxLabel:"2 - During the night only"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"03",margin:5,boxLabel:"3 - During the day only"},{xtype:"radiofield",name:"m1615_incntnt_timing",inputValue:"04",margin:5,boxLabel:"4 - During the day and night"}]}]},{xtype:"panel",border:!1,flex:1,height:400,items:[{xtype:"radiogroup",fieldLabel:"(M1620) Bowel Incontinence Frequency",cls:"oasis_pink",item_id:"bow_incontinence_fre",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"00",margin:5,boxLabel:"0 - Very rarely or never has bowel incontinence"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"01",margin:5,boxLabel:"1 - Less than once weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"02",margin:5,boxLabel:"2 - One to three times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"03",margin:5,boxLabel:"3 - Four to six times weekly"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"04",margin:5,boxLabel:"4 - On a daily basis"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"05",margin:5,boxLabel:"5 - More often than once daily"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"NA",margin:5,boxLabel:"NA - Patient has ostomy for bowel elimination"},{xtype:"radiofield",name:"m1620_bwl_incont",inputValue:"UK",margin:5,boxLabel:'UK - Unknown [omit "UK" option on FU, DC]'}]}]}]}],initComponent:function(){this.callParent(),radio_group_array=this.query("[xtype=radiogroup]"),this.m1610AndM1615FieldsEventHandling(radio_group_array)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},m1610AndM1615FieldsEventHandling:function(e){this.query("[name=m1610_ur_incont]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="00"||t.getGroupValue()=="02"?(e[2].disable(),radios=e[2].query("radiofield"),radios.forEach(function(e){e.setValue(!1)})):e[2].enable()},this)},this)},m1620AndM1630FieldsEventHandling:function(e){this.query("[name=m1620_bwl_incont]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="NA"?(e[4].query("[name=m1630_ostomy]")[0].disable().setValue(!1),e[4].query("[name=m1630_ostomy]")[1].enable(),e[4].query("[name=m1630_ostomy]")[2].enable()):(e[4].query("[name=m1630_ostomy]")[0].enable().setValue("00"),e[4].query("[name=m1630_ostomy]")[1].disable().setValue(!1),e[4].query("[name=m1630_ostomy]")[2].disable().setValue(!1))},this)},this)},onValidate:function(e){var t=new Array;return m1610Value=this.super_main.down("[name=m1610_ur_incont]").getGroupValue(),m1615Value=this.super_main.down("[name=m1615_incntnt_timing]").getGroupValue(),m1620Value=this.super_main.down("[name=m1620_bwl_incont]").getGroupValue(),m1600Urinary=this.super_main.down("radiofield[name=m1600_uti]").getGroupValue(),m1610Catheter=this.super_main.down("radiofield[name=m1610_ur_incont]").getGroupValue(),m1620Bowel=this.super_main.down("radiofield[name=m1620_bwl_incont]").getGroupValue(),assessmentReason=this.super_main.down("textfield[name=m0100_assmt_reason]").value,m1600Urinary==null?t.push(["M1600","Select a reason whether the patient has been treated for Urinary Tract Infection in the past 14 days."]):assessmentReason=="09"&&m1600Urinary=="UK"&&t.push(["M1600","Selected reason should not be 'UK', since the patient has been treated for Urinary Tract Infection in the past 14 days "]),m1610Catheter==null&&t.push(["M1610","Select whether patient is 'Urinary Incontinence' or any 'Urinary Catheter Presence'."]),m1620Bowel==null&&t.push(["M1620","Select at least one frequency from Bowel Incontinence."]),m1610Value=="01"&&m1615Value==null&&t.push(["M1615","Do not leave patient's 'Urinary Incontinence time of occurrence' field empty, since 'Patient is incontinent' has been selected in 'Urinary Incontinence' status."]),(assessmentReason=="04"||assessmentReason=="05"||assessmentReason=="09")&&m1620Bowel=="UK"&&t.push(["M1620","For this assessment reason bowel incontinence frequency can not be 'UK'"]),t}}),Ext.define("Ext.panel.NeuroEmotionalBehaviouralM17001720",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehaviouralM17001720",border:!1,margin:5,items:[{xtype:"panel",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1700) Cognitive Functioning: Patient's current (day of assessment) level of alertness, orientation, comprehension, concentration, and immediate memory for simple commands.",cls:"oasis_blue",item_id:"cogn_functioning1",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"0 - Alert/oriented, able to focus and shift attention, comprehends and recalls task directions independently.",inputValue:"00"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"1 - Requires prompting (cuing, repetition, reminders) only under stressful or unfamiliar conditions.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1700_cog_function",boxLabel:"2 - Requires assistance and some direction in specific situations (for example: on all tasks involving shifting of attention), or consistently requires low stimulus environment due to distractibility.",inputValue:"02"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"3 - Requires considerable assistance in routine situations. Is not alert and oriented or is unable to shift attention and recall directions more than half the time.",inputValue:"03"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"4 - Totally dependent due to disturbances such as constant disorientation, coma, persistent vegetative state, or delirium. ",inputValue:"04"}]}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"vbox"},width:"99%",items:[{xtype:"panel",border:!1,layout:"hbox",items:[{xtype:"radiogroup",flex:1,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1710) When Confused (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",item_id:"when_confused2",margin:"0 5 0 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"0 -  Never",inputValue:"00"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"1 - In new or complex situations only ",inputValue:"01"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"2 - On awakening or at night only",inputValue:"02"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"3 - During the day and evening, but not constantly",inputValue:"03"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"4 - Constantly",inputValue:"04"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]},{xtype:"radiogroup",flex:1,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1720) When Anxious (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",item_id:"when_anxious",labelAlign:"top",items:[{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"0 -  None of the time",inputValue:"00"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"1 - Less often than daily",inputValue:"01"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"2 - Daily, but not constantly",inputValue:"02"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"3 - All of the time",inputValue:"03"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]}]}]}],onValidate:function(e){var t=new Array;return m1700Cognitive=e.down("radiofield[name=m1700_cog_function]").getGroupValue(),m1710Confused=e.down("radiofield[name=m1710_when_confused]").getGroupValue(),m1720Anxious=e.down("radiofield[name=m1720_when_anxious]").getGroupValue(),m1700Cognitive==null&&t.push(["M1700","Cognitive Functioning is required."]),m1710Confused==null&&t.push(["M1710","When Confused (Reported or Observed Within the Last 14 Days) is required."]),m1720Anxious==null&&t.push(["M1720","When Anxious (Reported or Observed Within the Last 14 Days) is required."]),t}}),Ext.define("Ext.panel.NeuroEmotionalBehavioural2M1740M1745",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehavioural2M1740M1745",border:!1,margin:5,items:[{xtype:"checkboxgroup",fieldLabel:"(M1740) Cognitive, behavioral, and psychiatric symptoms that are demonstrated at least once a week (Reported or Observed): (Mark all that apply.)",cls:"oasis_blue",item_id:"cogn_behav_psych_symptoms",width:"98%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m1740_bd_mem_deficit",inputValue:"1",margin:5,boxLabel:"1 - Memory deficit: failure to recognize familiar persons/places, inability to recall events of past 24 hours, significant memory loss so that supervision is required"},{xtype:"checkboxfield",name:"m1740_bd_imp_decisn",inputValue:"1",margin:5,boxLabel:"2 - Impaired decision-making: failure to perform usual ADLs or IADLs, inability to appropriately stop activities, jeopardizes safety through actions"},{xtype:"checkboxfield",name:"m1740_bd_verbal",inputValue:"1",margin:5,boxLabel:"3 - Verbal disruption: yelling, threatening, excessive profanity, sexual references, etc"},{xtype:"checkboxfield",name:"m1740_bd_physical",inputValue:"1",margin:5,boxLabel:"4 - Physical aggression: aggressive or combative to self and others (for example, hits self, throws objects, punches, dangerous maneuvers with wheelchair or other objects)"},{xtype:"checkboxfield",name:"m1740_bd_soc_inappro",inputValue:"1",margin:5,boxLabel:"5 - Disruptive, infantile, or socially inappropriate behavior (excludes verbal actions)"},{xtype:"checkboxfield",name:"m1740_bd_delusions",inputValue:"1",margin:5,boxLabel:"6 - Delusional, hallucinatory, or paranoid behavior"},{xtype:"checkboxfield",name:"m1740_bd_none",inputValue:"1",margin:5,boxLabel:"7 - None of the above behaviors demonstrated"}]},{xtype:"radiogroup",fieldLabel:"(M1745) Frequency of Disruptive Behavior Symptoms (Reported or Observed) Any physical, verbal, or other disruptive/dangerous symptoms that are injurious to self or others or jeopardize personal safety",cls:"oasis_blue",item_id:"fre_disru_behavior_symp",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"00",margin:5,boxLabel:"0 - Never"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"01",margin:5,boxLabel:"1 - Less than once a month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"02",margin:5,boxLabel:"2 - Once a month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"03",margin:5,boxLabel:"3 - Several times each month"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"04",margin:5,boxLabel:"4 - Several times a week"},{xtype:"radiofield",name:"m1745_beh_prob_freq",inputValue:"05",margin:5,boxLabel:"5 - At least daily"}]}],afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.noneOfAbove=this.mainScope.down("checkbox[name=m1740_bd_none]"),this.fields=["m1740_bd_mem_deficit","m1740_bd_imp_decisn","m1740_bd_verbal","m1740_bd_physical","m1740_bd_soc_inappro","m1740_bd_delusions"],this.m1740Deficit=this.mainScope.down("[name=m1740_bd_mem_deficit]"),this.m1740Decsin=this.mainScope.down("[name=m1740_bd_imp_decisn]"),this.m1740Verbal=this.mainScope.down("[name=m1740_bd_verbal]"),this.m1740Physical=this.mainScope.down("[name=m1740_bd_physical]"),this.m1740Inappro=this.mainScope.down("[name=m1740_bd_soc_inappro]"),this.m1740Delusions=this.mainScope.down("[name=m1740_bd_delusions]"),this.m1740None=this.mainScope.down("[name=m1740_bd_none]"),this.selectNoneOfAbove(),this.selectOtherValues()},selectNoneOfAbove:function(){this.noneOfAbove.on("change",function(e){e.value&&Ext.each(this.fields,function(e){console.log(e),this.down("checkbox[name="+e+"]").setValue(!1)},this)},this)},selectOtherValues:function(){Ext.each(this.fields,function(e){this.down("[name="+e+"]").on("change",function(e){e.value&&this.m1740None.setValue(!1)},this)},this)},onValidate:function(){var e=new Array;return m1745Behavior=this.mainScope.down("radiofield[name=m1745_beh_prob_freq]").getGroupValue(),this.m1740Deficit.value==0&&this.m1740Decsin.value==0&&this.m1740Verbal.value==0&&this.m1740Physical.value==0&&this.m1740Inappro.value==0&&this.m1740Delusions.value==0&&this.m1740None.value==0&&e.push(["M1740","Select at least one Cognitive, behavioral, and psychiatric symptoms demonstrated once in a week."]),m1745Behavior==null&&e.push(["M1745","Select the patient's Frequency of Disruptive Behavior symptoms."]),e}}),Ext.define("Ext.panel.NeuroEmotionalBehaviouralM17001730C1",{extend:"Ext.panel.Panel",alias:"widget.neuroEmotionalBehaviouralM17001730C1",items:[{xtype:"panel",margin:5,border:0,layout:{align:"stretch",type:"vbox"},items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1700) Cognitive Functioning: Patient's current (day of assessment) level of alertness, orientation, comprehension, concentration, and immediate memory for simple commands.",cls:"oasis_blue",itemId:"cog_functioning",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"0 - Alert/oriented, able to focus and shift attention, comprehends and recalls task directions independently.",inputValue:"00"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"1 - Requires prompting (cuing, repetition, reminders) only under stressful or unfamiliar conditions.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1700_cog_function",boxLabel:"2 - Requires assistance and some direction in specific situations (for example, on all tasks involving shifting of attention), or consistently requires low stimulus environment due to distractibility.",inputValue:"02"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"3 - Requires considerable assistance in routine situations. Is not alert and oriented or is unable to shift attention and recall directions more than half the time.",inputValue:"03"},{xtype:"radiofield",name:"m1700_cog_function",boxLabel:"4 - Totally dependent due to disturbances such as constant disorientation, coma, persistent vegetative state, or delirium. ",inputValue:"04"}]},{xtype:"panel",border:0,layout:{align:"stretch",type:"hbox"},items:[{xtype:"radiogroup",flex:1,width:1024,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1710) When Confused (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",itemId:"when_confused",width:"98%",margin:"0 5 5 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"0 -  Never",inputValue:"00"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"1 - In new or complex situations only ",inputValue:"01"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"2 - On awakening or at night only",inputValue:"02"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"3 - During the day and evening, but not constantly",inputValue:"03"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"4 - Constantly",inputValue:"04"},{xtype:"radiofield",name:"m1710_when_confused",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]},{xtype:"radiogroup",flex:1,width:1024,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1720) When Anxious (Reported or Observed Within the Last 14 Days)",cls:"oasis_blue",itemId:"when_anxious",width:"98%",margin:"0 0 5 0",labelAlign:"top",items:[{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"0 -  None of the time",inputValue:"00"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"1 - Less often than daily",inputValue:"01"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"2 - Daily, but not constantly",inputValue:"02"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"3 - All of the time",inputValue:"03"},{xtype:"radiofield",name:"m1720_when_anxious",boxLabel:"NA - Patient nonresponsive",inputValue:"NA"}]}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1730)Depression Screening: Has the patient been screened for depression, using a standardized, validated depression screening tool?",cls:"oasis_blue",itemId:"dep_screen",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"0 - No",inputValue:"00"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"1 - Yes, patient was screened using the PHQ-2©* scale.",inputValue:"01"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"2 - Yes, patient was screened with a different standardized, validated assessment-and the patient meets criteria for further evaluation for depression.",inputValue:"02"},{xtype:"radiofield",name:"m1730_stdz_dprsn_scrng",boxLabel:"3 - Yes, patient was screened with a different standardized, validated assessment and the patient does not meet criteria for further evaluation for depression",inputValue:"03"}]},{xtype:"label",margin:"2px",text:"PHQ-2: Instructions for this two-question tool: Ask patient: Over the last two weeks, how often have you been bothered by any of the following problems?"},{xtype:"panel",border:!1,layout:{type:"table",tableAttrs:{border:1,cls:"oasis_blue"},columns:6},defaults:{bodyStyle:"padding: 5px; background-color: #CCE6FF;"},items:[{html:"PHQ-2&copy;<sup>*</sup>",style:"text-align:center;font-weight:bold;",height:60,border:!1},{html:"Not at all 0 - 1 day",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"Several days 2 - 6 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"More than half of the days 7 - 11 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"Nearly every day 12 - 14 days",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"N/A Unable to respond",style:"text-align:center;font-weight:bold;",width:110,height:60,border:!1},{html:"a) Little interest or pleasure in doing things",border:!1},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"03",boxLabel:"3",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_lack_intrst",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"},{html:"b) Feeling down, depressed, or hopeless?",border:!1},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"03",boxLabel:"3",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1730_phq2_dprsn",inputValue:"NA",boxLabel:"na",padding:"0 0 0 45px"}]},{html:"<i><sup>* Copyright&copy; pizer Inc. All rights reserved. Reproduced with permission.</sup></i>",border:!1}]}],onValidate:function(e){var t=new Array,n=!1,r=!1;return m1730MainValue=e.down("[name=m1730_stdz_dprsn_scrng]").getGroupValue(),m1700Cognitive=e.down("radiofield[name=m1700_cog_function]").getGroupValue(),m1710Confused=e.down("radiofield[name=m1710_when_confused]").getGroupValue(),m1720Anxious=e.down("radiofield[name=m1720_when_anxious]").getGroupValue(),m1730Depression=e.down("radiofield[name=m1730_stdz_dprsn_scrng]").getGroupValue(),m1700Cognitive==null&&t.push(["M1700","Select one option from Cognitive Functioning."]),m1710Confused==null&&t.push(["M1710","Choose one option, when patient happened to be Confused within last 14 Days."]),m1720Anxious==null&&t.push(["M1720","Choose one option, when patient happened to be Anxious within last 14 Days."]),m1730Depression==null&&t.push(["M1730","Select how Depression Screening Assessment conducted."]),m1730MainValue=="01"&&(Ext.each(this.m1730_interest_value_group,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M1730","Do not leave the option Patient's 'Little interests and Pleasure' towards doing things empty, since 'Patient was screened using PHQ-2 scale' was selected in 'Depression Screening'."]),Ext.each(this.m1730_depression_value_group,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M1730","Do not leave the option patient is 'Feeling down, depressed, or hopelesss' empty, since 'Patient was screened using PHQ-2 scale' was selected in 'Depression Screening'."])),t},m1730FieldsEventHandling:function(e){this.query("[name=m1730_stdz_dprsn_scrng]").forEach(function(t){t.on("change",function(t){t.getGroupValue()=="00"||t.getGroupValue()=="02"||t.getGroupValue()=="03"?Ext.each(e,function(e,t){e.disable().setValue(!1)},this):Ext.each(e,function(e,t){e.enable()},this)},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.m1730_interest_value_group=this.mainScope.query("radiofield[name=m1730_phq2_lack_intrst]"),this.m1730_depression_value_group=this.mainScope.query("radiofield[name=m1730_phq2_dprsn]"),this.m1730FieldsEventHandling(this.m1730_interest_value_group.concat(this.m1730_depression_value_group))}}),Ext.define("Ext.panel.MedicationsM2004M2030",{extend:"Ext.panel.Panel",alias:"widget.medicationsM2004M2030",border:!1,margin:5,items:[{xtype:"radiogroup",fieldLabel:"(M2004) Medication Intervention: If there were any clinically significant medication issues at the time of, or at any time since the previous OASIS assessment, was a physician or the physician-designee contacted within one calendar day to resolve any identical clinically significant medication issues, including reconciliation?",cls:"oasis_blue",item_id:"sign_medic_issues",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - Patient not taking any drugs"}]},{xtype:"radiogroup",fieldLabel:"(M2015) Patient/Caregiver Drug Education Intervention: At the time of, or at any time since the previous OASIS assessment, was the patient/caregiver instructed by agency staff or other health care provider to monitor the effectiveness of drug therapy,adverse drug reactions, and significant side effects, and how and when to report problems that may occur?",cls:"oasis_blue",item_id:"drug_edu_interven",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - Patient not taking any drugs"}]},{xtype:"radiogroup",fieldLabel:"(M2020) Management of Oral Medications: Patient's current ability to prepare and take all oral medications reliably and safely, including administration of the correct dosage at the appropriate times/intervals. Excludes injectable and IV medications. (NOTE: This refers to ability, not compliance or willingness.)",cls:"oasis_blue",item_id:"mgmt_oral_med",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",inputValue:"00",margin:5,boxLabel:"0 - Able to independently take the correct oral medication(s) and proper dosage(s) at the correct times."},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",inputValue:"01",margin:5,boxLabel:"1 - Able to take medication(s) at the correct times if:(a) individual dosages are prepared in advance by another person; OR(b) another person develops a drug diary or chart."},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",inputValue:"02",margin:5,boxLabel:"2 - Able to take medication(s) at the correct times if given reminders by another person at theappropriate times"},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",inputValue:"03",margin:5,boxLabel:"3 - Unable to take medication unless administered by another person"},{xtype:"radiofield",name:"m2020_crnt_mgmt_oral_mdctn",inputValue:"NA",margin:5,boxLabel:"NA - No oral medications prescribed."}]},{xtype:"radiogroup",fieldLabel:"(M2030) Management of Injectable Medications: Patient's current ability to prepare and take all prescribed injectable medications reliably and safely, including administration of correct dosage at the appropriate times/intervals. Excludes IV medications.",cls:"oasis_green",item_id:"inj_medications2",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"00",margin:5,boxLabel:"0 - Able to independently take the correct medication(s) and proper dosage(s) at the correct times."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"01",margin:5,boxLabel:"1 - Able to take injectable medication(s) at the correct times if:(a) individual syringes are prepared in advance by another person; OR(b) another person develops a drug diary or chart."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"02",margin:5,boxLabel:"2 - Able to take medication(s) at the correct times if given reminders by another person based on the frequency of the injection"},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"03",margin:5,boxLabel:"3 - Unable to take injectable medication unless administered by another person."},{xtype:"radiofield",name:"m2030_crnt_mgmt_injctn_mdctn",inputValue:"NA",margin:5,boxLabel:"NA - No injectable medications prescribed."}]}],onValidate:function(e){var t=new Array,n=e.down("[name=m2004_mdctn_intrvtn]").getGroupValue(),r=e.down("[name=m2015_drug_edctn_intrvtn]").getGroupValue(),i=e.down("[name=m2020_crnt_mgmt_oral_mdctn]").getGroupValue(),s=e.down("[name=m2030_crnt_mgmt_injctn_mdctn]").getGroupValue();return n==null&&t.push(["M2004","Choose (Yes/No/NA), whether patient have medical interventions since previous OASIS assessment."]),r==null&&t.push(["M2015","Patient/Caregiver Drug Education Intervention is required"]),i==null&&t.push(["M2020","Management of Oral Medications cannot be blank."]),s==null&&t.push(["M2030","Management of Injectable Medications cannot be blank."]),t}}),Ext.define("Ext.panel.InpatientFacilityM2410M2420",{extend:"Ext.panel.Panel",alias:"widget.inpatientFacilityM2410M2420",border:!1,margin:5,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2410) To which Inpatient Facility has the patient been admitted?",cls:"oasis_blue",itemId:"inpat_fac_adm",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"1 - Hospital",inputValue:"01",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2430]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"2 - Rehabilitation facility",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"3 - Nursing home",inputValue:"03",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"4 - Hospice",inputValue:"04",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"NA - No inpatient facility admission",inputValue:"NA"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2420) Discharge Disposition: Where is the patient after discharge from your agency? (Choose only oneanswer.)",cls:"oasis_blue",itemId:"discharge_disposition",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"1 - Patient remained in the community (without formal assistive services)",inputValue:"01"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"2 - Patient remained in the community (with formal assistive services)",inputValue:"02"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"3 - Patient transferred to a non-institutional hospice",inputValue:"03"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"4 - Unknown because patient moved to a geographic location not served by this agency",inputValue:"04"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"UK - Other unknown",inputValue:"UK",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.dischargeDispositions=this.super_main.down("#discharge_disposition").query("radiofield"),this.super_main.query("[name = m2410_inpat_facility]").forEach(function(e
){e.on("change",function(e){e.getGroupValue()=="NA"?Ext.each(this.dischargeDispositions,function(e){e.enable().setValue(!1)},this):Ext.each(this.dischargeDispositions,function(e){e.disable().setValue(!1)},this)},this)},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m2410_inpat_facility]"),r=this.super_main.down("[name=m2420_dschrg_disp]"),i=this.super_main.down("[name=m0100_assmt_reason]").value;return n.getGroupValue()==null&&t.push(["M2410","Select one option to which inpatient facility the patient been admitted."]),n.getGroupValue()=="NA"&&r.getGroupValue()==null&&t.push(["M2420","Do not leave discharge disposition blank since inpatient facility is 'NA'."]),r.getGroupValue()==null&&t.push(["M2420"," Discharge Disposition can't be blank."]),i=="09"&&n.getGroupValue()!="NA"&&t.push(["M2410","Inpatient Facility must be 'NA' for this assessment type. Refer to (M0100)."]),t}}),Ext.define("Ext.panel.DischargeDatesM0903M0906",{extend:"Ext.panel.Panel",alias:"widget.dischargeDatesM0903M0906",border:!1,items:[{name:"m0903_last_home_visit",fieldLabel:"(M0903) Date of Last(Most Recent) Home visit",labelAlign:"top",xtype:"datefield",width:"95%",margin:"5px"},{name:"m0906_dc_tran_dth_dt",fieldLabel:"(M0906) Discharge/Transfer/Death Date: Enter the date of the discharge, transfer, or death (at home) of the patient.",labelAlign:"top",xtype:"datefield",width:"95%",margin:"5px"}],serverValidationRequiredFields:function(){return["m0903_last_home_visit","m0906_dc_tran_dth_dt"]},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.m0903LastHomeVisit=this.mainScope.down("datefield[name=m0903_last_home_visit]"),this.m0906DcTranDthDt=this.mainScope.down("datefield[name=m0906_dc_tran_dth_dt]"),this.assessmentReason=this.mainScope.down("textfield[name=m0100_assmt_reason]"),this.mainScope.dcTrnasDthDateKeyField&&this.m0906DcTranDthDt.setReadOnly(!0)},onValidate:function(e){var t=new Array;return this.m0903LastHomeVisit.value==null?t.push(["M0903","Last Home visit date of patient can't be blank."]):(this.m0903LastHomeVisit.value>new Date&&t.push(["M0903","Last Home visit date should not exceed today."]),this.infoCompletedDt.value&&this.m0903LastHomeVisit.value>this.infoCompletedDt.value&&t.push(["M0903","Last Home visit date must be before or on the same dates of Assessment completed date."]),this.m0906DcTranDthDt.value&&this.m0903LastHomeVisit.value>this.m0906DcTranDthDt.value&&t.push(["M0903","Last Home visit date must be before or on the same dates of Discharge/Transfer/Death date of the patient."])),this.m0906DcTranDthDt.value==null?t.push(["M0906","Discharge/Transfer/Death date of the patient can't be blank."]):(this.m0906DcTranDthDt.value>new Date&&t.push(["M0906","Discharge/Transfer/Death date of the patient should not exceed today."]),this.m0906DcTranDthDt.value<new Date("07/19/1999")&&t.push(["M0906","Discharge/Transfer/Death date cannot precede 07-19-1999."]),this.infoCompletedDt.value&&this.m0906DcTranDthDt.value>this.infoCompletedDt.value&&t.push(["M0906","Discharge/Transfer/Death date should be earlier than or equal to Assessment completed date."]),this.assessmentReason.value=="09"&&this.m0906DcTranDthDt.value&&this.m0906DcTranDthDt.isValid()&&(days=Math.floor(this.infoCompletedDt.value-this.m0906DcTranDthDt.value)/864e5,(days<0||days>2)&&t.push(["M0090","ASSESSMENT COMPLETED DATE should be in between 2 days from DISCHARGE TRANSFER DEATH DATE in Discharge Dates panel."]))),t}}),Ext.define("Ext.panel.IntegumentaryStatusM1300M1306C1",{extend:"Ext.panel.Panel",alias:"widget.integumentaryStatusM1300M1306C1",border:!1,margin:5,items:[{xtype:"radiogroup",width:822,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1300) Pressure Ulcer Assessment: Was this patient assessed for Risk of Developing Pressure Ulcers?",cls:"oasis_blue",itemId:"pre_ulcr_assmnt",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"0 - No assessment conducted",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1306]</text>'},{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"1 - Yes, based on an evaluation of clinical factors, (for example: mobility, incontinence, nutrition, etc.) without use of standardized tool",inputValue:"01"},{xtype:"radiofield",name:"m1300_prsr_ulcr_risk_asmt",boxLabel:"2 - Yes, using a standardized, validated tool (for example: Braden Scale, Norton Scale)",inputValue:"02"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1302) Does this patient have a Risk of Developing Pressure Ulcers?",cls:"oasis_blue",itemId:"rsk_dev_pres_ulcr",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1302_risk_of_prsr_ulcr",boxLabel:"0 - No ",inputValue:"0"},{xtype:"radiofield",name:"m1302_risk_of_prsr_ulcr",boxLabel:"1- Yes",inputValue:"1"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1306) Does this patient have at least one Unhealed Pressure Ulcer at Stage II or Higher or designated as Unstageable? (Excludes Stage I pressure ulcers and healed Stage II pressure ulcers)",cls:"oasis_blue",itemId:"unhealed_pre_ulcr",width:"60%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"0 - No ",inputValue:"0",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1322]</text>'},{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"1 - Yes",inputValue:"1"}]}],onValidate:function(e){var t=new Array;return m1300_value=e.down("[name=m1300_prsr_ulcr_risk_asmt]").getGroupValue(),m1302_value=e.down("[name=m1302_risk_of_prsr_ulcr]").getGroupValue(),m1306_value=e.down("[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),m1308_numberfields=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),m1300Risk=e.down("radiofield[name=m1300_prsr_ulcr_risk_asmt]").getGroupValue(),m1306Unhold=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),m1300Risk==null&&t.push(["M1300","Select how Pressure Ulcer Assessment conducted."]),m1306Unhold==null&&t.push(["M1306","Please choose (Yes/No) whether the patient has one Unhealed Pressure Ulcer at stage II or treated as 'unstageable'."]),(m1300_value=="01"||m1300_value=="02")&&m1302_value==null&&t.push(["M1302","Please choose (Yes/No) whether the patient has risk of developing pressure ulcers."]),m1306_value=="01"&&m1308_numberfields.every(function(e){if(e.value==null)return t.push(["M1308","M1308_NBR_PRSULC_STG2 through M1308_NSTG_DEEP_TISUE_SOC_ROC cannot be blank."]),!1}),t},applyM1306UnhealedPressureUlcerRules:function(){this.super_main.down("#integumentarystatus2_m1308").query("[xtype=numberfield]").forEach(function(e){e.enable()}),this.super_main.down("#pressure_ulcer_m1310_m1324").query("[xtype=numberfield]").forEach(function(e){e.enable()}),this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]").forEach(function(e){e.enable()})},skipM1307ToM1320:function(){this.super_main.down("#integumentarystatus2_m1308").query("[xtype=numberfield]").forEach(function(e){e.disable().setValue()}),this.super_main.down("#pressure_ulcer_m1310_m1324").query("[xtype=numberfield]").forEach(function(e){e.disable().setValue()}),this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]").forEach(function(e){e.disable().setValue(!1)})},m1306UnhealedPressure:function(){this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[0].on("change",function(e){e.value&&this.skipM1307ToM1320()},this),this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[1].on("change",function(e){e.value&&this.applyM1306UnhealedPressureUlcerRules()},this)},m1300PressureUlcerAssessment:function(){this.query("[name=m1300_prsr_ulcr_risk_asmt]")[0].on("change",function(e){e.value?this.query("[name=m1302_risk_of_prsr_ulcr]").forEach(function(e){e.disable().setValue(!1)}):this.query("[name=m1302_risk_of_prsr_ulcr]").forEach(function(e){e.enable()})},this)},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0]},initComponent:function(){this.callParent(),this.m1300PressureUlcerAssessment(),this.m1306UnhealedPressure()}}),Ext.define("Ext.panel.IntegumentryStatus2M1308SocRocC1",{extend:"Ext.panel.Panel",alias:"widget.integumentryStatus2M1308SocRocC1",border:!1,margin:5,items:[{xtype:"label",margin:5,text:"(M1308) Current Number of Unhealed  Pressure Ulcers at Each Stage or Unstageable:",html:'<i>(Enter "0" if none; Excludes Stage I pressure ulcers and healed Stage II pressure ulcers )</i>',cls:"oasis_pink",itemId:"ne_pres_ulcr"},{html:'<i>(Enter "0" if none; Excludes Stage I pressure ulcers and healed Stage II pressure ulcers )</i>',margin:"0 0 0 50",border:0},{xtype:"panel",border:!1,margin:"10 5 5 60",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:2},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},items:[{html:"Stage Description - unhealed pressure ulcers",height:65,border:!1},{html:"<u>Number Currently Present</u>",height:65,style:"text-align:center;",border:!1},{html:"<b>a</b>. <b>Stage II:</b> Partial thickness loss of dermis presenting as a shallow open ulcer with red  pink wound bed, without slough. May also present as an intact or open/ruptured serum-filled blister.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg2",itemId:"loss_of_dermis"},{html:"<b>b</b>. <b>Stage III:</b> Full thickness tissue loss. Subcutaneous fat may be visible but bone,tendon, or muscles are not exposed. Slough may be present but does not obscure thedepth of tissue loss. May include undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg3",itemId:"tissue_loss"},{html:"<b>c</b>. <b>Stage IV:</b> Full thickness tissue loss with visible bone, tendon, or muscle. Slough or eschar may be present on some parts of the wound bed. Often includes undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg4",itemId:"tissue_loss_with_vis_bone"},{html:"<b>d.1</b> Unstageable: Known or likely but unstageable due to non-removable dressing or device.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_drsg",itemId:"unstageable_nstg_drsg"},{html:"<b>d.2</b> Unstageable: Known or likely but unstageable due to coverage of wound bed by slough and/or eschar.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_cvrg",itemId:"unstageable_nstg_cvrg"},{html:"<b>d.3</b> Unstageable: Suspected deep tissue injury in evolution.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_deep_tisue",itemId:"unstageable_nstg_deep_tisue"}]}],field1308SocRocValidation:function(e){return e&&(e.value==0||e.value==null)},onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),r=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),i=e.down("[name=m1308_nbr_prsulc_stg2]").value,s=e.down("[name=m1308_nbr_prsulc_stg3]").value,o=e.down("[name=m1308_nbr_prsulc_stg4]").value,u=e.down("[name=m1308_nstg_drsg]").value,a=e.down("[name=m1308_nstg_cvrg]").value,f=e.down("[name=m1308_nstg_deep_tisue]").value,l=e.down("[name=m1308_nbr_stg2_at_soc_roc]"),c=e.down("[name=m1308_nbr_stg3_at_soc_roc]"),h=e.down("[name=m1308_nbr_stg4_at_soc_roc]"),p=e.down("[name=m1308_nstg_drsg_soc_roc]"),d=e.down("[name=m1308_nstg_cvrg_soc_roc]"),v=e.down("[name=m1308_nstg_deep_tisue_soc_roc]"),m=e.down("textfield[name=m0100_assmt_reason]");return Ext.each(r,function(e,r){n=="1"&&e.value==null&&(e.name=="m1308_nbr_prsulc_stg2"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg3"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg4"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1, cannot be blank."]):e.name=="m1308_nstg_drsg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1, cannot be blank."]):e.name=="m1308_nstg_cvrg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1, cannot be blank."]):e.name=="m1308_nstg_deep_tisue"&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1, cannot be blank."]))}),n=="1"&&(m.value==1||m.value==3?i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]):(m.value==4||m.value==5||m.value==9)&&i==0&&s==0&&o==0&&u==0&&a==0&&f==0&&this.field1308SocRocValidation(l)&&this.field1308SocRocValidation(c)&&this.field1308SocRocValidation(h)&&this.field1308SocRocValidation(p)&&this.field1308SocRocValidation(d)&&this.field1308SocRocValidation(v)&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]),l&&l.value!=null&&i<l.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1 must be grater than column 2"]),c&&c.value!=null&&s<c.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1 must be grater than column 2"]),h&&h.value!=null&&o<h.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1 must be grater than column 2"]),p&&p.value!=null&&u<p.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1 must be grater than column 2"]),d&&d.value!=null&&a<d.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1 must be grater than column 2"]),v&&v.value!=null&&f<v.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1 must be grater than column 2"])),t}}),Ext.define("Ext.panel.IntegumentaryStatusM1306M1307C1",{extend:"Ext.panel.Panel",alias:"widget.integumentaryStatusM1306M1307C1",border:!1,margin:5,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1306) Does this patient have at least one Unhealed Pressure Ulcer at Stage II or Higher or designated as Unstageable? (Excludes Stage I pressure ulcers and healed Stage II pressure ulcers)",cls:"oasis_blue",item_id:"one_unhealed_prsr_ulcer1",width:"98%",margin:"2px",labelAlign:"top",items:[{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"0 - No ",itemId:"m1306_no",inputValue:"0",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1322]</text>'},{xtype:"radiofield",name:"m1306_unhld_stg2_prsr_ulcr",boxLabel:"1 - Yes",itemId:"m1306_yes",inputValue:"1"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1307) The Oldest Stage II Pressure Ulcer that is present at discharge: (Excludes healed Stage II Pressure ulcers)",cls:"oasis_blue",item_id:"non_epi_stg_2",width:"98%",margin:"2px",labelAlign:"top",items:[{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"1 - Was present at the most recent SOC/ROC assessment",inputValue:"01"},{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"2 - Developed since the most recent SOC/ROC assessment: record date pressure ulcer first identified",inputValue:"02"},{xtype:"radiofield",name:"m1307_oldst_stg2_at_dschrg",boxLabel:"NA -No Stage II pressure ulcers are present at discharge",inputValue:"NA"}]},{xtype:"panel",layout:{align:"stretch",type:"vbox"},margin:"2px",cls:"oasis_blue",items:[{xtype:"datefield",fieldLabel:"(M1307) Date pressure ulcer first identified",cls:"oasis_blue",labelWidth:"95%",name:"m1307_oldst_stg2_onst_dt",labelAlign:"top"}]}],initComponent:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1306UnhealedPressure()},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0];var e=this.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(e,function(e,t){e.on("change",function(e){var t=this.down("radiofield[name=m1307_oldst_stg2_at_dschrg]").getGroupValue();t=="02"?this.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!1):this.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!0).setValue()},this)},this)},m1306UnhealedPressure:function(){this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[0].on("change",function(e){e.value&&this.skipM1307ToM1320()},this),this.query("[name=m1306_unhld_stg2_prsr_ulcr]")[1].on("change",function(e){e.value&&this.applyM1306UnhealedPressureUlcerRules()},this)},skipM1307ToM1320:function(){var e=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue","m1309_nbr_new_wrs_prsulc_stg2","m1309_nbr_new_wrs_prsulc_stg3","m1309_nbr_new_wrs_prsulc_stg4","m1309_nbr_new_wrs_prsulc_nstg"];Ext.each(e,function(e){this.super_main.down("numberfield[name="+e+"]").disable().setValue()},this);var t=this.super_main.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(t,function(e,t){e.disable().setValue(!1)},this),this.super_main.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!0).setValue();var n=this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]");Ext.each(n,function(e,t){e.disable().setValue(!1)},this)},applyM1306UnhealedPressureUlcerRules:function(){var e=["m1308_nbr_prsulc_stg2","m1308_nbr_prsulc_stg3","m1308_nbr_prsulc_stg4","m1308_nstg_drsg","m1308_nstg_cvrg","m1308_nstg_deep_tisue","m1309_nbr_new_wrs_prsulc_stg2","m1309_nbr_new_wrs_prsulc_stg3","m1309_nbr_new_wrs_prsulc_stg4","m1309_nbr_new_wrs_prsulc_nstg"];Ext.each(e,function(e){this.super_main.down("numberfield[name="+e+"]").enable()},this);var t=this.super_main.query("[name=m1307_oldst_stg2_at_dschrg]");Ext.each(t,function(e,t){e.enable()},this),this.super_main.down("[name=m1307_oldst_stg2_onst_dt]").setDisabled(!1);var n=this.super_main.query("[name=m1320_stus_prblm_prsr_ulcr]");Ext.each(n,function(e,t){e.enable()},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue();n==null&&t.push(["M1306","Does this patient have at least one Unhealed Pressure Ulcer at Stage II is required."]);var r=this.super_main.down("radiofield[name=m1307_oldst_stg2_at_dschrg]").getGroupValue(),i=this.super_main.down("[name=m1307_oldst_stg2_onst_dt]");return r==null&&n=="1"&&t.push(["M1307","The Oldest Non-epithelialized Stage II Pressure Ulcer that is present at discharge."]),r=="02"&&i.value==null?t.push(["M1307","Date pressure ulcer first identified can't be blank."]):r=="02"&&i.value!=null&&(i.isValid()==0&&t.push(["M1307","Date pressure ulcer first identified must be enter proper date."]),i.isValid()&&i.value>new Date&&t.push(["M0032","Date pressure ulcer first identified must be less than or equal to current date."])),t}}),Ext.define("Ext.panel.IntegumentryStatus2M1308C1",{extend:"Ext.panel.Panel",alias:"widget.integumentryStatus2M1308C1",border:!1,margin:5,items:[{xtype:"panel",border:!1,layout:{align:"strech",type:"hbox"},items:[{xtype:"panel",border:!1,margin:5,itemId:"integumentarystatus2_m1308",layout:{type:"vbox"},items:[{xtype:"label",margin:5,text:"(M1308) Current Number of Unhealed Pressure Ulcers at Each Stage or Unstageable",html:"<i>(Enter “0” if none; Excludes Stage I pressure ulcers and healed Stage II pressure ulcers) </i>",cls:"oasis_pink",itemId:"ne_pres_ulcr"},{html:"<i>(Enter “0” if none; Excludes Stage I pressure ulcers and healed Stage II pressure ulcers) </i>",margin:"0 0 0 10",border:0},{xtype:"panel",border:!1,margin:"10 5 5 5",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:2},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},items:[{html:"Stage Description - unhealed pressure ulcers",height:65,border:!1},{html:"<u>Number Currently Present</u>",height:65,style:"text-align:center;",border:!1},{html:"<b>a</b>. <b>Stage II:</b> Partial thickness loss of dermis presenting as a shallow open ulcer with red  pink wound bed, without slough. May also present as an intact or open/ruptured serum-filled blister.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg2",itemId:"loss_of_dermis"},{html:"<b>b</b>. <b>Stage III:</b> Full thickness tissue loss. Subcutaneous fat may be visible but bone,tendon, or muscles are not exposed. Slough may be present but does not obscure thedepth of tissue loss. May include undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg3",itemId:"tissue_loss"},{html:"<b>c</b>. <b>Stage IV:</b> Full thickness tissue loss with visible bone, tendon, or muscle. Slough or eschar may be present on some parts of the wound bed. Often includes undermining and tunneling.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nbr_prsulc_stg4",itemId:"tissue_loss_with_vis_bone"},{html:"<b>d.1</b> Unstageable: Known or likely but unstageable due to non-removable dressing or device.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_drsg",itemId:"unstageable_nstg_drsg"},{html:"<b>d.2</b> Unstageable: Known or likely but unstageable due to coverage of wound bed by slough and/or eschar.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_cvrg",itemId:"unstageable_nstg_cvrg"},{html:"<b>d.3</b> Unstageable: Suspected deep tissue injury in evolution.",width:300,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1308_nstg_deep_tisue",itemId:"unstageable_nstg_deep_tisue"}]}]},{xtype:"panel",layout:{type:"vbox",align:"strech"},itemId:"integumentarystatus2_m1309",border:!1,margin:"20 5 5 10",items:[{xtype:"label",margin:5,text:"(M1309) Worsening in Pressure Ulcer Status since SOC/ROC: ",html:"<i>(Enter “0” if none; excludes Stage I pressure ulcers and healed Stage II pressure ulcers) </i>",cls:"oasis_pink",itemId:""},{xtype:"label",text:"Instructions for a – c: For Stage II, III and IV pressure ulcers, report the number that are new or have increased in  numerical stage since the most recent SOC/ROC",cls:"oasis_pink",margin:"0 0 0 10",width:750,border:!1},{xtype:"panel",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:2},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},margin:"10 5 5 5",items:[{html:"",width:150,border:!1},{html:"Enter Number (Enter “0” if there are no current Stage II, III or IV pressure ulcers OR if all current Stage II, III or IV pressure ulcers existed at the same numerical stage at most recent SOC/ROC)",width:400,border:!1},{html:"a. Stage II",width:150,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1309_nbr_new_wrs_prsulc_stg2",itemId:""},{html:"b. Stage III",width:150,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1309_nbr_new_wrs_prsulc_stg3",itemId:""},{html:"c. Stage IV",width:150,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1309_nbr_new_wrs_prsulc_stg4",itemId:""}]},{xtype:"label",text:"Instructions for d: For pressure ulcers that are unstageable due to slough/eschar, report the number that are new or were a Stage I or II at the most recent SOC/ROC.",margin:"0 0 0 10",labelWidth:30,width:750,cls:"oasis_pink"},{xtype:"panel",layout:{type:"table",tableAttrs:{border:1,cls:"oasis_pink"},columns:2},defaults:{bodyStyle:"padding: 5px; background-color: #FFDBDB;"},margin:"10 5 5 5",items:[{html:"",width:150,border:!1},{html:"Enter Number (Enter “0” if there are no unstageable pressure ulcers at discharge OR if all current unstageable pressure ulcers were Stage III or IV or were unstageable at most recent SOC/ROC)",width:400,border:!1},{html:"a. Unstageable due to coverage of wound bed by slough or eschar",width:150,border:!1},{xtype:"numberfield",margin:5,labelWidth:400,minValue:0,name:"m1309_nbr_new_wrs_prsulc_nstg",itemId:""}]}]}]}],field1308SocRocValidation:function(e){return e&&(e.value==0||e.value==null)},onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue(),r=e.down("#integumentarystatus2_m1308").query("[xtype=numberfield]"),i=e.down("#integumentarystatus2_m1309").query("[xtype=numberfield]"),s=e.down("[name=m1308_nbr_prsulc_stg2]").value,o=e.down("[name=m1308_nbr_prsulc_stg3]").value,u=e.down("[name=m1308_nbr_prsulc_stg4]").value,a=e.down("[name=m1308_nstg_drsg]").value,f=e.down("[name=m1308_nstg_cvrg]").value,l=e.down("[name=m1308_nstg_deep_tisue]").value,c=e.down("textfield[name=m0100_assmt_reason]"),h=e.down("[name=m1309_nbr_new_wrs_prsulc_stg2]"),p=e.down("[name=m1309_nbr_new_wrs_prsulc_stg3]"),d=e.down("[name=m1309_nbr_new_wrs_prsulc_stg4]"),v=e.down("[name=m1309_nbr_new_wrs_prsulc_nstg]");return Ext.each(r,function(e,r){n=="1"&&e.value==null&&(e.name=="m1308_nbr_prsulc_stg2"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'a', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg3"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'b', Column 1, cannot be blank."]):e.name=="m1308_nbr_prsulc_stg4"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'c', Column 1, cannot be blank."]):e.name=="m1308_nstg_drsg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd1', Column 1, cannot be blank."]):e.name=="m1308_nstg_cvrg"?t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd2', Column 1, cannot be blank."]):e.name=="m1308_nstg_deep_tisue"&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'd3', Column 1, cannot be blank."]))}),n=="1"&&(c.value==1||c.value==3?s==0&&o==0&&u==0&&a==0&&f==0&&l==0&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]):(c.value==4||c.value==5||c.value==9)&&s==0&&o==0&&u==0&&a==0&&f==0&&l==0&&this.field1308SocRocValidation(m1308NbrStg2AtSocRoc)&&this.field1308SocRocValidation(m1308NbrStg3AtSocRoc)&&this.field1308SocRocValidation(m1308NbrStg4AtSocRoc)&&this.field1308SocRocValidation(m1308NstgDrsgSocRoc)&&this.field1308SocRocValidation(m1308NstgCvrgSocRoc)&&this.field1308SocRocValidation(m1308NstgDeepTisueSocRoc)&&t.push(["M1308","At least one item between Stage Description - unhealed pressure ulcers column 1 and column2 must be grater than 0."]),h&&h.value!=null&&s<h.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'M1308 a', must be grater than Worsening in Pressure Ulcer 'M1309 a' "]),p&&p.value!=null&&o<p.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'M1308 b', must be grater than Worsening in Pressure Ulcer 'M1309 b'"]),d&&d.value!=null&&u<d.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'M1308 c', must be grater than Worsening in Pressure Ulcer 'M1309 c'"]),v&&v.value!=null&&f<v.value&&t.push(["M1308","Stage Description - Unhealed Pressure Ulcers 'm1308 d2', must be grater than Worsening in Pressure Ulcer coverage 'M1309"])),t}}),Ext.define("Ext.panel.PressureUlserM1310M1324C1",{extend:"Ext.panel.Panel",alias:"widget.pressureUlserM1310M1324C1",border:!1,margin:5,items:[{xtype:"panel",border:0,margin:"5px 0 0 0",layout:{align:"stretch",type:"hbox"},items:[{xtype:"panel",flex:1,border:!1,items:[{xtype:"radiogroup",margin:"0 10px 0 5px",labelAlign:"top",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1320) Status of Most Problematic Pressure Ulcer that is Observable: (Excludes pressure ulcer that cannot be observed due to a non-removable dressing/device)",items:[{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"0 - Newly epithelialized",inputValue:"00"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"1 - Fully granulating ",inputValue:"01"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"2 - Early/partial granulation",inputValue:"02"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"3 - Not healing ",inputValue:"03"},{xtype:"radiofield",name:"m1320_stus_prblm_prsr_ulcr",boxLabel:"NA - No observable pressure ulcer  ",inputValue:"NA"}]}]},{xtype:"panel",border:0,height:229,layout:{columns:2,type:"table"},items:[{xtype:"radiogroup",height:230,margin:"0 5 0 0",width:400,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1322) Current Number of Stage I Pressure Ulcers: Intact skin with non-blanchable redness of a localized area usually over a bony prominence. The area may be painful, firm, soft, warmer, or cooler as compared to adjacent tissue. ",cls:"oasis_green",itemId:"stg_1_ulcer",labelAlign:"top",items:[{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"0",inputValue:"00"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"1",inputValue:"01"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"2",inputValue:"02"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"3",inputValue:"03"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"4 or more",inputValue:"04"}]},{xtype:"radiogroup",height:230,width:405,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1324) Stage of Most Problematic Unhealed Pressure Ulcer that is Stageable: (Excludes pressure ulcer that cannot be staged due to a non-removable dressing/device, coverage of wound bed by slough and/or eschar, or suspected deep tissue injury.)",cls:"oasis_pink",itemId:"stg_pres_ulcer",labelAlign:"top",items:[{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"1 - Stage I ",inputValue:"01"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"2 - Stage II",inputValue:"02"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"3 - Stage III",inputValue:"03"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"4 - Stage IV",inputValue:"04"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"NA - Patient has no pressure ulcers or no stageable pressure ulcers",inputValue:"NA"}]}]}]}],onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1322_nbr_prsulc_stg1]").getGroupValue(),r=e.down("[name=m1308_nbr_prsulc_stg2]"),i=e.down("[name=m1308_nbr_prsulc_stg3]"),s=e.down("[name=m1308_nbr_prsulc_stg4]"),o=e.down("[name=m1308_nstg_deep_tisue]"),u=e.down("[name=m1308_nstg_cvrg]"),a=e.down("[name=m1320_stus_prblm_prsr_ulcr]").getGroupValue(),f=i.value>0||s.value>0||u.value>0,l=e.down("radiofield[name=m1324_stg_prblm_ulcer]").getGroupValue(),c=e.down("radiofield[name=m1306_unhld_stg2_prsr_ulcr]").getGroupValue();return n==null&&t.push(["M1322","Select the Number of Stage I Pressure Ulcers."]),l==null?t.push(["M1324","Do not leave stage of Most Problematic Unhealed Pressure Ulcer empty."]):n=="00"&&this.fieldIsZeroOrNull(r)&&this.fieldIsZeroOrNull(i)&&this.fieldIsZeroOrNull(s)&&l!="NA"?t.push(["M1324","Current Number of Unhealed (non epithelialized) Pressure Ulcers stage 2, stage 3, stage4 and Current Number of Stage I Pressure Ulcers stage is '0', then Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is must be equal to NA"]):l=="01"?n=="00"&&t.push(["M1322","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 1 then Current Number of Stage I Pressure Ulcers must be greater than 0"]):l=="02"?this.fieldIsZeroOrNull(r)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 2 then Current Number of unhealed Pressure Ulcers  stage 2 must be greater than 0"]):l=="03"?this.fieldIsZeroOrNull(i)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 3 then Current Number of unhealed Pressure Ulcers  stage 3 must be greater than 0"]):l=="04"&&this.fieldIsZeroOrNull(s)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 4 then Current Number of unhealed Pressure Ulcers  stage 4 must be greater than 0"]),c=="1"&&(a==null?t.push(["M1320","Select the status of Most Problematic Pressure Ulcer."]):a!="NA"&&r.value==0&&i.value==0&&s.value==0&&u.value==0?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be 'NA'."]):a!="03"&&(o>0||r.value>0)&&i.value==0&&s.value==0&&u.value==0?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '3'."]):a=="NA"&&(i.value>0||s.value>0)?t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '0', '1', '2', or '3'."]):a!="02"&&a!="03"&&o.value==0&&r.value==0&&i.value==0&&s.value==0&&u.value>0&&t.push(["M1320","Status of Most Problematic (Observable) Pressure Ulcer must be '2' or '3'."])),t},fieldIsZeroOrNull:function(e){return e.value==null||e.value==0},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery
.query("#super_main")[0],this.m1308stg3=this.mainScope.down("[name=m1308_nbr_prsulc_stg3]"),this.m1308stg4=this.mainScope.down("[name=m1308_nbr_prsulc_stg4]"),this.m1308nstg=this.mainScope.down("[name=m1308_nstg_cvrg]")}}),Ext.define("Ext.panel.PressureUlserM1322M1324C1",{extend:"Ext.panel.Panel",alias:"widget.pressureUlserM1322M1324C1",border:!1,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},margin:5,fieldLabel:"(M1322) Current Number of Stage I Pressure Ulcers: Intact skin with non-blanchable rednessof a localized area usually over a bony prominence. The area may be painful, firm, soft, warmer, orcooler as compared to adjacent tissue. ",cls:"oasis_green",item_id:"stg_1_ulcer",width:"95%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"0",inputValue:"00"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"1",inputValue:"01"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"2",inputValue:"02"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"3",inputValue:"03"},{xtype:"radiofield",name:"m1322_nbr_prsulc_stg1",boxLabel:"4 or more",inputValue:"04"}]},{xtype:"radiogroup",height:200,width:405,layout:{align:"stretch",type:"vbox"},margin:5,fieldLabel:"(M1324) Stage of Most Problematic Unhealed Pressure Ulcer that is Stageable: (Excludes pressure ulcer that cannot be staged due to a non-removable dressing/device, coverage of wound bed by slough and/or eschar, or suspected deep tissue injury.)",cls:"oasis_pink",itemId:"stg_prb_pre_ulcer",width:"95%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"1 - Stage I ",inputValue:"01"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"2 - Stage II",inputValue:"02"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"3 - Stage III",inputValue:"03"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"4 - Stage IV",inputValue:"04"},{xtype:"radiofield",name:"m1324_stg_prblm_ulcer",boxLabel:"NA - Patient has no pressure ulcers or no stageable pressure ulcers",inputValue:"NA"}]}],onValidate:function(e){var t=new Array,n=e.down("radiofield[name=m1322_nbr_prsulc_stg1]").getGroupValue(),r=e.down("radiofield[name=m1324_stg_prblm_ulcer]").getGroupValue(),i=e.down("[name=m1308_nbr_prsulc_stg2]"),s=e.down("[name=m1308_nbr_prsulc_stg3]"),o=e.down("[name=m1308_nbr_prsulc_stg4]"),u=e.down("[name=m1308_nstg_cvrg]");return n==null&&t.push(["M1322","Select the Number of Stage I Pressure Ulcers."]),r==null?t.push(["M1324","Do not leave stage of Most Problematic Unhealed Pressure Ulcer empty."]):n=="00"&&this.fieldIsZeroOrNull(i)&&this.fieldIsZeroOrNull(s)&&this.fieldIsZeroOrNull(o)&&r!="NA"?t.push(["M1324","Current Number of Unhealed (non epithelialized) Pressure Ulcers stage 2, stage 3, stage4 and Current Number of Stage I Pressure Ulcers stage is '0', then Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is must be equal to NA"]):r=="01"?n=="00"&&t.push(["M1322","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 1 then Current Number of Stage I Pressure Ulcers must be greater than 0"]):r=="02"?this.fieldIsZeroOrNull(i)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 2 then Current Number of unhealed Pressure Ulcers  stage 2 must be greater than 0"]):r=="03"?this.fieldIsZeroOrNull(s)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 3 then Current Number of unhealed Pressure Ulcers  stage 3 must be greater than 0"]):r=="04"&&this.fieldIsZeroOrNull(o)&&t.push(["M1308","Stage of Most Problematic Unhealed (Observable) Pressure Ulcer is stage 4 then Current Number of unhealed Pressure Ulcers  stage 4 must be greater than 0"]),t},fieldIsZeroOrNull:function(e){return e.value==null||e.value==0}}),Ext.define("Ext.panel.AdlIadls4M1900M1910C1",{extend:"Ext.panel.Panel",alias:"widget.adlIadls4M1900M1910C1",items:[{xtype:"panel",layout:"vbox",border:!1,margin:"5 5 10 5",items:[{xtype:"panel",layout:"vbox",border:!1,margin:5,items:[{xtype:"label",margin:5,html:"(M1900) Prior Functioning ADL/IADL: Indicate the patient's usual ability with everyday activities prior to his/her most recent illness, exacerbation, or injury. Check only <u>one</u> box in each row."},{xtype:"panel",border:!1,margin:"20 50 20 20",layout:{type:"table",tableAttrs:{border:1},columns:4},defaults:{bodyStyle:"padding:5px"},items:[{html:"Functional Area",style:"text-align:center;font-weight:bold;",height:38,width:270,border:!1},{html:"Independent",style:"text-align:center;font-weight:bold;",width:110,height:38,border:!1},{html:"Needed Some Help",style:"text-align:center;font-weight:bold;",width:110,height:43,border:!1},{html:"Dependent",style:"text-align:center;font-weight:bold;",width:110,height:38,border:!1},{html:"a. Self-care (specifically: grooming, dressing, bathing and toileting hyginene)",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_self",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"b. Ambulation",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_ambltn",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"c. Transfer",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_trnsfr",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"},{html:"d. Household tasks (specifically: light meal preparation, laundry, shopping and phone use)",width:270,border:!1},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"00",boxLabel:"0",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"01",boxLabel:"1",padding:"0 0 0 45px"},{xtype:"radiofield",name:"m1900_prior_adliadl_hsehold",inputValue:"02",boxLabel:"2",padding:"0 0 0 45px"}]}]},{xtype:"panel",border:!1,width:"93%",height:300,items:[{xtype:"radiogroup",fieldLabel:"(M1910) Has this patient had a multi-factor Falls Risk Assessment using a standardized, validated assessment tool?",cls:"oasis_blue",item_id:"mult_fac_fall",width:"98%",margin:"10 0 0 5",labelAlign:"top",columns:1,items:[{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"00",margin:5,boxLabel:"0 - No "},{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"01",margin:5,boxLabel:"1 - Yes, and it does not indicate a risk for falls"},{xtype:"radiofield",name:"m1910_mlt_fctr_fall_risk_asmt",inputValue:"02",margin:5,boxLabel:"2 - Yes, and it indicates a risk for falls"}]}]}]}],onValidate:function(e){var t=new Array,n=!1,r=!1,i=!1,s=!1;return m1910Value=e.down("#adl_iadls4_m1900_m1910").query("[xtype=radiogroup]")[0],Ext.each(this.adliadl_self_group,function(e,t){e.checked==1&&(n=!0)},this),n==0&&t.push(["M1900","a. Select the patient's ability of Self-Care."]),Ext.each(this.adliadl_ambltn_group,function(e,t){e.checked==1&&(r=!0)},this),r==0&&t.push(["M1900","b. Select the patient's ability of Ambulation."]),Ext.each(this.adliadl_trnsfr_group,function(e,t){e.checked==1&&(i=!0)},this),i==0&&t.push(["M1900","c. Select the patient's ability of self Transfer."]),Ext.each(this.adliadl_hsehold_group,function(e,t){e.checked==1&&(s=!0)},this),s==0&&t.push(["M1900","d. Select the patient's ability to do Household tasks."]),m1910Value.down("[name = m1910_mlt_fctr_fall_risk_asmt]").getGroupValue()==null&&t.push(["M1910","Choose (Yes/No) whether the patient had a Multi-factor Fall Assessment."]),t},afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.adliadl_self_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_self]"),this.adliadl_ambltn_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_ambltn]"),this.adliadl_trnsfr_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_trnsfr]"),this.adliadl_hsehold_group=this.super_main.query("radiofield[name=m1900_prior_adliadl_hsehold]")}}),Ext.define("Ext.panel.AdlIadls1M1800M1830C1",{extend:"Ext.panel.Panel",alias:"widget.adlIadls1M1800M1830C1",items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1800) Grooming: Current ability to tend safely to personal hygiene needs (specifically: washing face and hands, hair care, shaving or make up, teeth or denture care, or fingernail care).",cls:"oasis_blue",itemId:"grooming1",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"0 - Able to groom self unaided, with or without the use of assistive devices or adapted methods.",inputValue:"00"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"1 - Grooming utensils must be placed within reach before able to complete grooming activities.",inputValue:"01"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"2 - Someone must assist the patient to groom self.",inputValue:"02"},{xtype:"radiofield",name:"m1800_crnt_grooming",boxLabel:"3 - Patient depends entirely upon someone else for grooming needs.",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1810) Current Ability to Dress Upper Body safely (with or without dressing aids) including undergarments, pullovers, front-opening shirts and blouses, managing zippers, buttons, and snaps",cls:"oasis_pink",itemId:"dress_upr_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"0 - Able to get clothes out of closets and drawers, put them on and remove them from the upper body without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"1 - Able to dress upper body without assistance if clothing is laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"2 - Someone must help the patient put on upper body clothing.",inputValue:"02"},{xtype:"radiofield",name:"m1810_crnt_dress_upper",boxLabel:"3 - Patient depends entirely upon another person to dress the upper body.",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1820) Current Ability to Dress Lower Body safely (with or without dressing aids) including undergarments, slacks, socks or nylons, shoes",cls:"oasis_pink",itemId:"dress_lwr_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"0 - Able to obtain, put on, and remove clothing and shoes without assistance.",inputValue:"00"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"1 - Able to dress lower body without assistance if clothing and shoes are laid out or handed to the patient.",inputValue:"01"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"2 - Someone must help the patient put on undergarments, slacks, socks or nylons, and shoes.",inputValue:"02"},{xtype:"radiofield",name:"m1820_crnt_dress_lower",boxLabel:"3 - Patient depends entirely upon another person to dress lower body. ",inputValue:"03"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1830) Bathing: Current ability to wash entire body safely. Excludes grooming (washing face, washing hands, and shampooing hair).",cls:"oasis_pink",itemId:"wash_body",width:"90%",labelAlign:"top",margin:"10 5",items:[{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"0 - Able to bathe self in shower or tub independently, including getting in and out of tub/shower.",inputValue:"00"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"1 - With the use of devices, is able to bathe self in shower or tub independently, including getting in and out of the tub/shower.",inputValue:"01"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"2 - Able to bathe in shower or tub with the intermittent assistance of another person: (a) for intermittent supervision or encouragement or reminders, OR (b) to get in and out of the shower or tub, OR (c) for washing difficult to reach areas.",inputValue:"02"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"3 - Able to participate in bathing self in shower or tub, but requires presence of another person throughout the bath for assistance or supervision.",inputValue:"03"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"4 - Unable to use the shower or tub, but able to bathe self independently with or without the use of devices at the sink, in chair, or on commode.",inputValue:"04"},{xtype:"radiofield",height:30,name:"m1830_crnt_bathg",boxLabel:"5 - Unable to use the shower or tub, but able to participate in bathing self in bed, at the sink, in bedside chair, or on commode, with the assistance or supervision of another person.",inputValue:"05"},{xtype:"radiofield",name:"m1830_crnt_bathg",boxLabel:"6 - Unable to participate effectively in bathing and is bathed totally by another person.",inputValue:"06"}]}],onValidate:function(e){var t=new Array;return m1800Grooming=e.down("radiofield[name=m1800_crnt_grooming]").getGroupValue(),m1810Upper=e.down("radiofield[name=m1810_crnt_dress_upper]").getGroupValue(),m1820Lower=e.down("radiofield[name=m1820_crnt_dress_lower]").getGroupValue(),m1830Bathing=e.down("radiofield[name=m1830_crnt_bathg]").getGroupValue(),m1800Grooming==null&&t.push(["M1800","Select the patient's dependency or Level of Grooming."]),m1810Upper==null&&t.push(["M1810","Select the patient's current ability to dress upper body safely."]),m1820Lower==null&&t.push(["M1820","Select the patient's current ability to dress lower body safely."]),m1830Bathing==null&&t.push(["M1830","Select the patient's current ability to wash entire body safely(Bathing)."]),t}}),Ext.define("Ext.panel.InpatientFacilityM2410M2420C1",{extend:"Ext.panel.Panel",alias:"widget.inpatientFacilityM2410M2420C1",border:!1,margin:5,items:[{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2410) To which Inpatient Facility has the patient been admitted?",cls:"oasis_blue",itemId:"inpat_fac_adm",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"1 - Hospital",inputValue:"01",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2430]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"2 - Rehabilitation facility",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"3 - Nursing home",inputValue:"03",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"4 - Hospice",inputValue:"04",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'},{xtype:"radiofield",name:"m2410_inpat_facility",boxLabel:"NA - No inpatient facility admission",inputValue:"NA"}]},{xtype:"radiogroup",layout:{align:"stretch",type:"vbox"},fieldLabel:"(M2420) Discharge Disposition: Where is the patient after discharge from your agency?(Choose only oneanswer.)",cls:"oasis_blue",itemId:"discharge_disposition",width:"60%",labelAlign:"top",margin:5,items:[{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"1 - Patient remained in the community (without formal assistive services)",inputValue:"01"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"2 - Patient remained in the community (with formal assistive services)",inputValue:"02"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"3 - Patient transferred to a non-institutional hospice",inputValue:"03"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"4 - Unknown because patient moved to a geographic location not served by this agency",inputValue:"04"},{xtype:"radiofield",name:"m2420_dschrg_disp",boxLabel:"UK - Other unknown",inputValue:"UK",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M0903]</text>'}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.dischargeDispositions=this.super_main.down("#discharge_disposition").query("radiofield"),this.super_main.query("[name = m2410_inpat_facility]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="NA"?Ext.each(this.dischargeDispositions,function(e){e.enable().setValue(!1)},this):Ext.each(this.dischargeDispositions,function(e){e.disable().setValue(!1)},this)},this)},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m2410_inpat_facility]"),r=this.super_main.down("[name=m2420_dschrg_disp]"),i=this.super_main.down("[name=m0100_assmt_reason]").value;return n.getGroupValue()==null&&t.push(["M2410","Select one option to which inpatient facility the patient been admitted."]),n.getGroupValue()=="NA"&&r.getGroupValue()==null&&t.push(["M2420","Do not leave discharge disposition blank since inpatient facility is 'NA'."]),r.getGroupValue()==null&&t.push(["M2420"," Discharge Disposition can't be blank."]),i=="09"&&n.getGroupValue()!="NA"&&t.push(["M2410","Inpatient Facility must be 'NA' for this assessment type. Refer to (M0100)."]),t}}),Ext.define("Ext.panel.StatusRiskVaccineM1040M1055TrnC1",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1040M1055TrnC1",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1041) Influenza Vaccine Data Collection Period: Does this episode of care (SOC/ROC to Transfer/Discharge) include any dates on or between October 1 and March 31? ",labelAlign:"top",cls:"oasis_blue",item_id:"flu_vacc",width:"99%",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1041_in_inflnz_season",inputValue:"0",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1051]</text>'},{xtype:"radiofield",name:"m1041_in_inflnz_season",inputValue:"1",margin:5,boxLabel:"1 - Yes"}]},{xtype:"radiogroup",fieldLabel:"(M1046) Influenza Vaccine Received: Did the patient receive the influenza vaccine for this year’s flu season? ",cls:"oasis_blue",item_id:"flu_vacc_not_rec",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"01",margin:5,boxLabel:"1 - Yes; received from your agency during this episode of care (SOC/ROC to Transfer/Discharge)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"02",margin:5,boxLabel:"2 - Yes; received from your agency during a prior episode of care (SOC/ROC to Transfer/Discharge)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"03",margin:5,boxLabel:"3 - Yes; received from another health care provider (for example: physician, pharmacist)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"04",margin:5,boxLabel:"4 - No; patient offered and declined"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"05",margin:5,boxLabel:"5 - No; patient assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"06",margin:5,boxLabel:"6 - No; not indicated - patient does not meet age/condition guidelines for influenza vaccine"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"07",margin:5,boxLabel:"7 - No; inability to obtain vaccine due to declared shortage"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"08",margin:5,boxLabel:"8 - No; patient did not receive the vaccine due to reasons other than those listed in responses 4 – 7."}]},{xtype:"radiogroup",fieldLabel:"(M1051) Pneumococcal Vaccine: Has the patient ever received the pneumococcal vaccination (for example, pneumovax)? ",cls:"oasis_blue",item_id:"pneumococcal_vacc",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1051_pvx_rcvd_agncy",inputValue:"0",margin:5,boxLabel:"0 - No."},{xtype:"radiofield",name:"m1051_pvx_rcvd_agncy",inputValue:"1",margin:5,boxLabel:"1 - Yes",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1500]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1056) Reason Pneumococcal Vaccine not received: If patient has never received the pneumococcal vaccination (for example, pneumovax), state reason:",cls:"oasis_blue",item_id:"rea_ppv_not_received",labelAlign:"top",columns:1,margin:"10 5",width:"99%",items:[{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"01",margin:5,boxLabel:"1 - Offered and declined"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"02",margin:5,boxLabel:"2 - Assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"03",margin:5,boxLabel:"3 - Not indicated; patient does not meet age/condition guidelines for Pneumococcal Vaccine"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"04",margin:5,boxLabel:"4 - None of the above"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1041InflnzSeason=this.super_main.down("radiofield[name=m1041_in_inflnz_season]").getGroupValue(),this.m1046InflnzRecdcrntSeason=this.super_main.down("radiofield[name=m1046_inflnz_recd_crnt_season]").getGroupValue(),this.super_main.query("[name = m1041_in_inflnz_season]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="0"?this.super_main.query("[name=m1046_inflnz_recd_crnt_season]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1046_inflnz_recd_crnt_season]").forEach(function(e){e.enable()},this)},this)},this),this.super_main.query("[name =m1051_pvx_rcvd_agncy]").forEach(function(e){e.on("change",function(e){var t=this.super_main.down("[name=m0100_assmt_reason]").value;e.getGroupValue()=="1"?this.super_main.query("[name=m1056_pvx_rsn_not_rcvd_agncy]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1056_pvx_rsn_not_rcvd_agncy]").forEach(function(e){e.enable()},this)},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m1041_in_inflnz_season]"),n=this.super_main.down("radiofield[name=m1046_inflnz_recd_crnt_season]"),r=this.super_main.down("radiofield[name=m1051_pvx_rcvd_agncy]"),i=this.super_main.down("radiofield[name=m1056_pvx_rsn_not_rcvd_agncy]"),s=this.super_main.down("[name=m0100_assmt_reason]").value;return t.getGroupValue()==null&&e.push(["M1041","Please choose (Yes/No) whether patient received influenza vaccine from your agency."]),t.getGroupValue()=="1"&&n.getGroupValue()==null&&e.push(["M1046","Select the reason of not receiving the Influenza vaccine by patient."]),r.getGroupValue()==null&&e.push(["M1051","Please choose (Yes/No) whether patient received Pneumococcal vaccine from your agency."]),i.getGroupValue()==null&&r.getGroupValue()=="0"&&e.push(["M1056","Select the reason of not receiving the PPV vaccine by patient."]),e}}),Ext.define("Ext.panel.StasisUlcerWoundM1330M1342C1",{extend:"Ext.panel.Panel",alias:"widget.stasisUlcerWoundM1330M1342C1",border:!1,items:[{xtype:"panel",layout:"hbox",width:"98%",items:[{xtype:"panel",border:!1,flex:1,height:475,items:[{xtype:"radiogroup",fieldLabel:"(M1330) Does this patient have a Stasis Ulcer?",cls:"oasis_green",itemId:"statsis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1340]</text>'},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has BOTH observable and unobservable stasis ulcers"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Yes, patient has observable stasis ulcers ONLY"},{xtype:"radiofield",name:"m1330_stas_ulcr_prsnt",inputValue:"03",margin:5,boxLabel:"3 - Yes, patient has unobservable stasis ulcers ONLY (known but not observable due to non-removable dressing/device)",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1340]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1332) Current Number of Stasis Ulcer(s) that are Observable",cls:"oasis_green",itemId:"obs_num_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - One"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Two"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Three"},{xtype:"radiofield",name:"m1332_nbr_stas_ulcr",inputValue:"04",margin:5,boxLabel:"4 - Four or more"}]},{xtype:"radiogroup",fieldLabel:"(M1334) Status of Most Problematic Surgical Wound that is Observable",cls:"oasis_green",itemId:"obs_status_stasis_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1334_stus_prblm_stas_ulcr",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]}]},{xtype:"panel",border:!1,flex:1,height:450,items:[{xtype:"radiogroup",fieldLabel:"(M1340) Does this patient have a Surgical Wound?",cls:"oasis_blue",itemId:"surg_wound",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:'<text style="background-color:yellow"> [go to M1400]</text>'},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"01",margin:5,boxLabel:"1 - Yes, patient has at least one (observable) surgical wound"},{xtype:"radiofield",name:"m1340_srgcl_wnd_prsnt",inputValue:"02",margin:5,boxLabel:"2 - Surgical wound known but not observable due to non-removable dressing/device",afterBoxLabelTpl:'<text style="background-color:yellow"> [go to M1400]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1342)  Status of Most Problematic Surgical Wound that is Observable",cls:"oasis_pink",itemId:"Stat_surg_ulcr",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"00",margin:5,boxLabel:"0 - Newly epithelialized"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"01",margin:5,boxLabel:"1 - Fully granulating"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"02",margin:5,boxLabel:"2 - Early/partial granulation"},{xtype:"radiofield",name:"m1342_stus_prblm_srgcl_wnd",inputValue:"03",margin:5,boxLabel:"3 - Not healing"}]}]}]}],onValidate:function(e){var t=new Array;return m1330Value=e.down("[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1332Value=e.down("[name=m1332_nbr_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1334Value=e.down("[name=m1334_stus_prblm_stas_ulcr]").getGroupValue(),m1340Value=e.down("[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1342Value=e.down("[name=m1342_stus_prblm_srgcl_wnd]").getGroupValue(),m1330Stasis=e.down("radiofield[name=m1330_stas_ulcr_prsnt]").getGroupValue(),m1340surgical=e.down("radiofield[name=m1340_srgcl_wnd_prsnt]").getGroupValue(),m1330Stasis==null&&t.push(["M1330","Choose (Yes/No), whether patient have a Stasis Ulcer."]),m1340surgical==null&&t.push(["M1340","Choose (Yes/No) whether the patient have Surgical Wound."]),(m1330Value=="01"||m1330Value=="02")&&(m1332Value==null||m1334Value==null)&&t.push(["m1330_1332_1334","Do not Leave 'Number of Stasis Ulcer(s)' and 'Status of Most Problematic Stasis Ulcer' Empty, since 'Stasis Ulcer' has been selected 'Yes'."]),m1340Value=="01"&&m1342Value==null&&t.push(["m1340_1342","Do not Leave Problematic Surgical Ulcer empty, since 'Surgical Wound' has been selected 'Yes'."]),t},m1340SrgclWndPrsnt01:function(e,t){t[1].on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})},this)},m1340SrgclWndPrsnt00R02:function(e,t){[t[0],t[2]].forEach(function(t){t.on("change",function(t){t.value&&e[4].query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})},this)},this)},m1340SurgicalWound:function(e){surgicalWoundRadioButtons=this.query("[name=m1340_srgcl_wnd_prsnt]"),this.m1340SrgclWndPrsnt00R02(e,surgicalWoundRadioButtons),this.m1340SrgclWndPrsnt01(e,surgicalWoundRadioButtons)},m1330StasUlcrPrsnt01R02:function(e,t){[t[1],t[2]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.enable().setValue(!1)})})},this)},this)},m1330StasUlcrPrsnt00R03:function(e,t){[t[0],t[3]].forEach(function(t){t.on("change",function(t){t.value&&[e[1],e[2]].forEach(function(e){e.query("[xtype=radiofield]").forEach(function(e){e.disable().setValue(!1)})})},this)},this)},m1330StasisUlcer:function(e){stasisUlcerRadioButtons=this.query("[name=m1330_stas_ulcr_prsnt]"),this.m1330StasUlcrPrsnt00R03(e,stasisUlcerRadioButtons),this.m1330StasUlcrPrsnt01R02(e,stasisUlcerRadioButtons)},initComponent:function(){this.callParent(),radioGroups=this.query("[xtype=radiogroup]"),this.m1330StasisUlcer(radioGroups),this.m1340SurgicalWound(radioGroups)}}),Ext.define("Ext.panel.RespiratoryCardiacM1400M1510C1",{extend:"Ext.panel.Panel",alias:"widget.respiratoryCardiacM1400M1510C1",border:!1,margin:5,items:[{xtype:"radiogroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1400) When is the patient dyspneic or noticeably Short of Breath?",cls:"oasis_pink",itemId:"pat_dysn1",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"0 - Patient is not short of breath ",inputValue:"00"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"1 - When walking more than 20 feet, climbing stairs",inputValue:"01"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"2 - With moderate exertion (for example: while dressing, using commode or bedpan, walking distances less than 20 feet) ",inputValue:"02"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"3 - With minimal exertion (for example: while eating, talking, or performing other ADLs) or with agitation",inputValue:"03"},{xtype:"radiofield",name:"m1400_when_dyspneic",boxLabel:"4 - At rest (during day or night)",inputValue:"04"}]},{xtype:"radiogroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1500) Symptoms in Heart Failure Patients: If patient has been diagnosed with heart failure, did the patient exhibit symptoms indicated by clinical heart failure guidelines (including dyspnea, orthopnea, edema, or weight gain) at the time of or any point since the previous OASIS assessment?",cls:"oasis_blue",itemId:"symp_heart_failure2",width:"98%",labelAlign:"top",items:[{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"0 - No",inputValue:"00",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"1 - Yes",inputValue:"01"},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"2 - Not assessed",inputValue:"02",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'},{xtype:"radiofield",name:"m1500_symtm_hrt_failr_ptnts",boxLabel:"NA - Patient does not have diagnosis of heart failure",inputValue:"NA",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1600]</text>'}]},{xtype:"checkboxgroup",width:757,layout:{align:"stretch",type:"vbox"},fieldLabel:"(M1510) Heart Failure Follow-up: If patient has been diagnosed with heart failure and has exhibited symptoms indicative of heart failure at the time of or any time since the previous OASIS assessment, what action(s) has (have) been taken to respond? (Mark all that apply.)",cls:"oasis_blue",itemId:"symp_indicative_heart_failure2",width:"98%",labelAlign:"top",items:[{xtype:"checkboxfield",name:"m1510_hrt_failr_no_actn",boxLabel:"0 - No action taken",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_cntct",boxLabel:"1 - Patient`s physician (or other primary care practitioner) contacted the same day",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_er_trtmt",boxLabel:"2 - Patient advised to get emergency treatment (for example, call 911 or go to emergency room)",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_physn_trtmt",boxLabel:"3 - Implemented physician-ordered patient-specific established parameters for treatment"
,inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_clncl_intrvtn",boxLabel:"4 - Patient education or other clinical interventions",inputValue:"1"},{xtype:"checkboxfield",name:"m1510_hrt_failr_care_plan_chg",boxLabel:"5 - Obtained change in care plan orders (for example: increased monitoring by agency, change in visitfrequency, telehealth.)",inputValue:"1"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1510HrtFailrNoActn=this.super_main.down("[name=m1510_hrt_failr_no_actn]"),this.m1510HrtFailrPhysnCntct=this.super_main.down("[name=m1510_hrt_failr_physn_cntct]"),this.m1510HrtFailrErTrtmt=this.super_main.down("[name=m1510_hrt_failr_er_trtmt]"),this.m1510HrtFailrPhysnTrtmt=this.super_main.down("[name=m1510_hrt_failr_physn_trtmt]"),this.m1510HrtFailrClnclIntrvtn=this.super_main.down("[name=m1510_hrt_failr_clncl_intrvtn]"),this.m1510HrtFailrCarePlanChg=this.super_main.down("[name=m1510_hrt_failr_care_plan_chg]"),heartFailures=["m1510_hrt_failr_no_actn","m1510_hrt_failr_physn_cntct","m1510_hrt_failr_er_trtmt","m1510_hrt_failr_physn_trtmt","m1510_hrt_failr_clncl_intrvtn","m1510_hrt_failr_care_plan_chg"],this.super_main.query("[name = m1500_symtm_hrt_failr_ptnts]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="00"||e.getGroupValue()=="02"||e.getGroupValue()=="NA"?Ext.each(heartFailures,function(e){this.super_main.down("checkbox[name="+e+"]").disable().setValue(!1)},this):Ext.each(heartFailures,function(e){this.super_main.down("checkbox[name="+e+"]").enable().setValue(!1)},this)},this)},this);var e=[this.m1510HrtFailrPhysnCntct,this.m1510HrtFailrErTrtmt,this.m1510HrtFailrPhysnTrtmt,this.m1510HrtFailrClnclIntrvtn,this.m1510HrtFailrCarePlanChg];this.m1510HrtFailrNoActn.on("change",function(t){t.value=="1"?Ext.each(e,function(e,t){e.disable().setValue(!1)},this):Ext.each(e,function(e,t){e.enable().setValue(!1)},this)},this)},onValidate:function(e){var t=new Array,n=this.super_main.down("radiofield[name=m1500_symtm_hrt_failr_ptnts]");return m1400Dyspneic=this.super_main.down("radiofield[name=m1400_when_dyspneic]").getGroupValue(),m1400Dyspneic==null&&t.push(["M1400","Select the reason when patient feel noticeably short of breath."]),n.getGroupValue()==null&&t.push(["M1500","Symptoms In Heart Failure Patients is required."]),n.getGroupValue()=="01"&&this.m1510HrtFailrNoActn.value==0&&this.m1510HrtFailrPhysnCntct.value==0&&this.m1510HrtFailrErTrtmt.value==0&&this.m1510HrtFailrPhysnTrtmt.value==0&&this.m1510HrtFailrClnclIntrvtn.value==0&&this.m1510HrtFailrCarePlanChg.value==0&&t.push(["M1510","Do not leave Heart Failure Follow up field empty, since Symptoms in Heart Failure is selected as 'Yes'."]),t}}),Ext.define("Ext.panel.EmergentCareM2300M2310C1",{extend:"Ext.panel.Panel",alias:"widget.emergentCareM2300M2310C1",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M2300) Emergent Care: At the time of or at any time since the previous OASIS assessment has the patient utilized a hospital emergency department (includes holding/observation status)?",cls:"oasis_blue",item_id:"emergent_care",width:"80%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"00",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2400]</text>'},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"01",margin:5,boxLabel:"1 - Yes, used hospital emergency department WITHOUT hospital admission"},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"02",margin:5,boxLabel:"2 - Yes, used hospital emergency department WITH hospital admission"},{xtype:"radiofield",name:"m2300_emer_use_aftr_last_asmt",inputValue:"UK",margin:5,boxLabel:"UK - Unknown",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M2400]</text>'}]},{xtype:"checkboxgroup",fieldLabel:"(M2310)Reason for Emergent Care: For what reason(s) did the patient seek and/or receive emergent care (with or without hospitalization)? (Mark all that apply.)",cls:"oasis_blue",item_id:"reason_emergent_care",width:"80%",labelAlign:"top",columns:1,margin:"5px",items:[{xtype:"checkboxfield",name:"m2310_ecr_medication",inputValue:"1",boxLabel:"1 - Improper medication administration, adverse drug reactions, medication side effects, toxicity, anaphylaxis"},{xtype:"checkboxfield",name:"m2310_ecr_injry_by_fall",inputValue:"1",boxLabel:"2 - Injury caused by fall"},{xtype:"checkboxfield",name:"m2310_ecr_rsprtry_infctn",inputValue:"1",boxLabel:"3 - Respiratory infection (for example: pneumonia, bronchitis)"},{xtype:"checkboxfield",name:"m2310_ecr_rsprtry_othr",inputValue:"1",boxLabel:"4 - Other respiratory problem"},{xtype:"checkboxfield",name:"m2310_ecr_hrt_failr",inputValue:"1",boxLabel:"5 - Heart failure (for example: fluid overload)"},{xtype:"checkboxfield",name:"m2310_ecr_crdc_dsrthm",inputValue:"1",boxLabel:"6 - Cardiac dysrhythmia (irregular heartbeat)"},{xtype:"checkboxfield",name:"m2310_ecr_mi_chst_pain",inputValue:"1",boxLabel:"7 - Myocardial infarction or chest pain"},{xtype:"checkboxfield",name:"m2310_ecr_othr_hrt_dease",inputValue:"1",boxLabel:"8 - Other heart disease"},{xtype:"checkboxfield",name:"m2310_ecr_stroke_tia",inputValue:"1",boxLabel:"9 - Stroke (CVA) or TIA"},{xtype:"checkboxfield",name:"m2310_ecr_hypoglyc",inputValue:"1",boxLabel:"10 - Hypo/Hyperglycemia, diabetes out of control"},{xtype:"checkboxfield",name:"m2310_ecr_gi_prblm",inputValue:"1",boxLabel:"11 - GI bleeding, obstruction, constipation, impaction"},{xtype:"checkboxfield",name:"m2310_ecr_dhydrtn_malntr",inputValue:"1",boxLabel:"12 - Dehydration, malnutrition"},{xtype:"checkboxfield",name:"m2310_ecr_uti",inputValue:"1",boxLabel:"13 - Urinary tract infection"},{xtype:"checkboxfield",name:"m2310_ecr_cthtr_cmplctn",inputValue:"1",boxLabel:"14 - IV catheter-related infection or complication"},{xtype:"checkboxfield",name:"m2310_ecr_wnd_infctn_dtrortn",inputValue:"1",boxLabel:"15 - Wound infection or deterioration"},{xtype:"checkboxfield",name:"m2310_ecr_uncntld_pain",inputValue:"1",boxLabel:"16 - Uncontrolled pain"},{xtype:"checkboxfield",name:"m2310_ecr_mentl_bhvrl_prblm",inputValue:"1",boxLabel:"17 - Acute mental/behavioral health problem"},{xtype:"checkboxfield",name:"m2310_ecr_dvt_pulmnry",inputValue:"1",boxLabel:"18 - Deep vein thrombosis, pulmonary embolus"},{xtype:"checkboxfield",name:"m2310_ecr_other",inputValue:"1",boxLabel:"19 - Other than above reasons"},{xtype:"checkboxfield",name:"m2310_ecr_unknown",inputValue:"1",boxLabel:"UK - Reason unknown"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m2300EmerUseAftrLastAsmt=this.super_main.down("[name=m2300_emer_use_aftr_last_asmt]"),this.m2310ecrMedication=this.super_main.down("[name=m2310_ecr_medication]"),this.m2310EcrInjryByFall=this.super_main.down("[name=m2310_ecr_injry_by_fall]"),this.m2310EcrRsprtryInfctn=this.super_main.down("[name=m2310_ecr_rsprtry_infctn]"),this.m2310EcrRsprtryOthr=this.super_main.down("[name=m2310_ecr_rsprtry_othr]"),this.m2310EcrHrtFailr=this.super_main.down("[name=m2310_ecr_hrt_failr]"),this.m2310EcrCrdcDsrthm=this.super_main.down("[name=m2310_ecr_crdc_dsrthm]"),this.m2310EcrMiChstPain=this.super_main.down("[name=m2310_ecr_mi_chst_pain]"),this.m2310EcrOthrHrtDease=this.super_main.down("[name=m2310_ecr_othr_hrt_dease]"),this.m2310EcrStrokeTia=this.super_main.down("[name=m2310_ecr_stroke_tia]"),this.m2310EcrHypoglyc=this.super_main.down("[name=m2310_ecr_hypoglyc]"),this.m2310EcrGiPrblm=this.super_main.down("[name=m2310_ecr_gi_prblm]"),this.m2310EcrDhydrtnMalntr=this.super_main.down("[name=m2310_ecr_dhydrtn_malntr]"),this.m2310EcrUti=this.super_main.down("[name=m2310_ecr_uti]"),this.m2310EcrCthtrCmplctn=this.super_main.down("[name=m2310_ecr_cthtr_cmplctn]"),this.m2310EcrWndInfctnDtrortn=this.super_main.down("[name=m2310_ecr_wnd_infctn_dtrortn]"),this.m2310EcrUncntldPain=this.super_main.down("[name=m2310_ecr_uncntld_pain]"),this.m2310EcrMentlBhvrlPrblm=this.super_main.down("[name=m2310_ecr_mentl_bhvrl_prblm]"),this.m2310EcrDvtPulmnry=this.super_main.down("[name=m2310_ecr_dvt_pulmnry]"),this.m2310EcrOther=this.super_main.down("[name=m2310_ecr_other]"),this.m2310EcrUnknown=this.super_main.down("[name=m2310_ecr_unknown]"),this.ecrMedications=[this.m2310ecrMedication,this.m2310EcrInjryByFall,this.m2310EcrRsprtryInfctn,this.m2310EcrRsprtryOthr,this.m2310EcrHrtFailr,this.m2310EcrCrdcDsrthm,this.m2310EcrMiChstPain,this.m2310EcrOthrHrtDease,this.m2310EcrStrokeTia,this.m2310EcrHypoglyc,this.m2310EcrGiPrblm,this.m2310EcrDhydrtnMalntr,this.m2310EcrUti,this.m2310EcrCthtrCmplctn,this.m2310EcrWndInfctnDtrortn,this.m2310EcrUncntldPain,this.m2310EcrMentlBhvrlPrblm,this.m2310EcrDvtPulmnry,this.m2310EcrOther,this.m2310EcrUnknown];var e=[this.m2310ecrMedication,this.m2310EcrInjryByFall,this.m2310EcrRsprtryInfctn,this.m2310EcrRsprtryOthr,this.m2310EcrHrtFailr,this.m2310EcrCrdcDsrthm,this.m2310EcrMiChstPain,this.m2310EcrOthrHrtDease,this.m2310EcrStrokeTia,this.m2310EcrHypoglyc,this.m2310EcrGiPrblm,this.m2310EcrDhydrtnMalntr,this.m2310EcrUti,this.m2310EcrCthtrCmplctn,this.m2310EcrWndInfctnDtrortn,this.m2310EcrUncntldPain,this.m2310EcrMentlBhvrlPrblm,this.m2310EcrDvtPulmnry,this.m2310EcrOther];this.super_main.query("[name=m2300_emer_use_aftr_last_asmt]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="00"||e.getGroupValue()=="UK"?Ext.each(this.ecrMedications,function(e){e.disable().setValue(!1)},this):Ext.each(this.ecrMedications,function(e){e.enable()},this)},this)},this),this.m2310EcrUnknown.on("change",function(t){t.value&&(Ext.each(e,function(e){e.setValue(!1)},this),t.value==0&&t.setValue(!0))},this),Ext.each(e,function(e){e.on("change",function(e){this.m2310EcrUnknown.value&&this.m2310EcrUnknown.setValue(!1)},this)},this)},selectFirstOrNone:function(){this.m2300EmerUseAftrLastAsmt.on("change",function(){this.m2300EmerUseAftrLastAsmt.getGroupValue()=="00"||this.m2300EmerUseAftrLastAsmt.getGroupValue()=="UK"?Ext.each(this.ecrMedications,function(e){e.setDisabled(!0)},this):Ext.each(this.ecrMedications,function(e){e.enable()},this)},this)},onValidate:function(){var e=new Array;return m2300EmerUseAftrLastAsmt=this.super_main.down("radiofield[name=m2300_emer_use_aftr_last_asmt]"),m2300EmerUseAftrLastAsmt.getGroupValue()==null&&e.push(["M2300","Select one option whether patient utilized emergency care since last OASIS."]),(m2300EmerUseAftrLastAsmt.getGroupValue()=="01"||m2300EmerUseAftrLastAsmt.getGroupValue()=="02")&&this.m2310ecrMedication.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310EcrRsprtryInfctn.value==0&&this.m2310EcrRsprtryOthr.value==0&&this.m2310EcrHrtFailr.value==0&&this.m2310EcrCrdcDsrthm.value==0&&this.m2310EcrMiChstPain.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310ecrMedication.value==0&&this.m2310EcrInjryByFall.value==0&&this.m2310EcrOthrHrtDease.value==0&&this.m2310EcrStrokeTia.value==0&&this.m2310EcrHypoglyc.value==0&&this.m2310EcrGiPrblm.value==0&&this.m2310EcrDhydrtnMalntr.value==0&&this.m2310EcrUti.value==0&&this.m2310EcrCthtrCmplctn.value==0&&this.m2310EcrWndInfctnDtrortn.value==0&&this.m2310EcrUncntldPain.value==0&&this.m2310EcrMentlBhvrlPrblm.value==0&&this.m2310EcrDvtPulmnry.value==0&&this.m2310EcrOther.value==0&&this.m2310EcrUnknown.value==0&&e.push(["M2310","Do not leave Reason for Emergent Care field empty, since 'Emergent Care' was selected to 'Yes'."]),e}}),Ext.define("Ext.panel.MedicationsM2004M2015C1",{extend:"Ext.panel.Panel",alias:"widget.medicationsM2004M2015C1",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M2004) Medication Intervention: If there were any clinically significant medication issues at the time of, or at any time since the previous OASIS assessment, was a physician or the physician-designee contacted within one calendar to resolve any identified clinically significant medication issues, including reconciliation?",cls:"oasis_blue",item_id:"med_interven",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2004_mdctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - No clinically significant medication issues identified at the time of or at any time since the previous OASIS assessment"}]},{xtype:"radiogroup",fieldLabel:"(M2015) Patient/Caregiver Drug Education Intervention: At the time of, or at any time since the previous OASIS assessment, was the patient/caregiver instructed by agency staff or other health care provider to monitor the effectiveness of drug therapy, adverse drug reactions, and significant side effects, and how and when to report problems that may occur?",cls:"oasis_blue",item_id:"drug_edu1",width:"98%",labelAlign:"top",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"00",margin:5,boxLabel:"0 - No"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"01",margin:5,boxLabel:"1 - Yes"},{xtype:"radiofield",name:"m2015_drug_edctn_intrvtn",inputValue:"NA",margin:5,boxLabel:"NA - Patient not taking any drugs"}]}],onValidate:function(e){var t=new Array;return m2004MdctnIntrvtn=e.down("radiofield[name=m2004_mdctn_intrvtn]").getGroupValue(),m2015DrugEdctnIntrvtn=e.down("radiofield[name=m2015_drug_edctn_intrvtn]").getGroupValue(),m2004MdctnIntrvtn==null&&t.push(["M2004","Choose (Yes/No/NA), whether patient have medical interventions since previous OASIS assessment."]),m2015DrugEdctnIntrvtn==null&&t.push(["M2015","Choose (Yes/No/NA), whether patient/caregiver have drug education interventions."]),t}}),Ext.define("Ext.panel.StatusRiskVaccineM1040M1055DcC1",{extend:"Ext.panel.Panel",alias:"widget.statusRiskVaccineM1040M1055DcC1",border:!1,items:[{xtype:"radiogroup",fieldLabel:"(M1041) Influenza Vaccine Data Collection Period: Does this episode of care (SOC/ROC to Transfer/Discharge) include any dates on or between October 1 and March 31? ",labelAlign:"top",cls:"oasis_blue",item_id:"flu_vacc",width:"99%",columns:1,margin:"10 5",items:[{xtype:"radiofield",name:"m1041_in_inflnz_season",inputValue:"0",margin:5,boxLabel:"0 - No",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1051]</text>'},{xtype:"radiofield",name:"m1041_in_inflnz_season",inputValue:"1",margin:5,boxLabel:"1 - Yes"}]},{xtype:"radiogroup",fieldLabel:"(M1046) Influenza Vaccine Received: Did the patient receive the influenza vaccine for this year’s flu season? ",cls:"oasis_blue",item_id:"flu_vacc_not_rec",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"01",margin:5,boxLabel:"1 - Yes; received from your agency during this episode of care (SOC/ROC to Transfer/Discharge)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"02",margin:5,boxLabel:"2 - Yes; received from your agency during a prior episode of care (SOC/ROC to Transfer/Discharge)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"03",margin:5,boxLabel:"3 - Yes; received from another health care provider (for example: physician, pharmacist)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"04",margin:5,boxLabel:"4 - No; patient offered and declined"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"05",margin:5,boxLabel:"5 - No; patient assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"06",margin:5,boxLabel:"6 - No; not indicated - patient does not meet age/condition guidelines for influenza vaccine"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"07",margin:5,boxLabel:"7 - No; inability to obtain vaccine due to declared shortage"},{xtype:"radiofield",name:"m1046_inflnz_recd_crnt_season",inputValue:"08",margin:5,boxLabel:"8 - No; patient did not receive the vaccine due to reasons other than those listed in responses 4 – 7."}]},{xtype:"radiogroup",fieldLabel:"(M1051) Pneumococcal Vaccine: Has the patient ever received the pneumococcal vaccination (for example,pneumovax)? ",cls:"oasis_blue",item_id:"pneumococcal_vacc",labelAlign:"top",columns:1,width:"99%",margin:"10 5",items:[{xtype:"radiofield",name:"m1051_pvx_rcvd_agncy",inputValue:"0",margin:5,boxLabel:"0 - No."},{xtype:"radiofield",name:"m1051_pvx_rcvd_agncy",inputValue:"1",margin:5,boxLabel:"1 - Yes",afterBoxLabelTpl:' <text class="oasis_yellow">[Go to M1230]</text>'}]},{xtype:"radiogroup",fieldLabel:"(M1056) Reason Pneumococcal Vaccine not received: If patient has never received the pneumococcal vaccination (for example, pneumovax), state reason",cls:"oasis_blue",item_id:"rea_ppv_not_received",labelAlign:"top",columns:1,margin:"10 5",width:"99%",items:[{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"01",margin:5,boxLabel:"1 - Offered and declined"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"02",margin:5,boxLabel:"2 - Assessed and determined to have medical contraindication(s)"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"03",margin:5,boxLabel:"3 - Not indicated; patient does not meet age/condition guidelines for Pneumococcal Vaccine"},{xtype:"radiofield",name:"m1056_pvx_rsn_not_rcvd_agncy",inputValue:"04",margin:5,boxLabel:"4 - None of the above"}]}],afterRender:function(){this.callParent(),this.super_main=Ext.ComponentQuery.query("#super_main")[0],this.m1041InflnzSeason=this.super_main.down("radiofield[name=m1041_in_inflnz_season]").getGroupValue(),this.m1046InflnzRecdcrntSeason=this.super_main.down("radiofield[name=m1046_inflnz_recd_crnt_season]").getGroupValue(),this.super_main.query("[name = m1041_in_inflnz_season]").forEach(function(e){e.on("change",function(e){e.getGroupValue()=="0"?this.super_main.query("[name=m1046_inflnz_recd_crnt_season]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1046_inflnz_recd_crnt_season]").forEach(function(e){e.enable()},this)},this)},this),this.super_main.query("[name =m1051_pvx_rcvd_agncy]").forEach(function(e){e.on("change",function(e){var t=this.super_main.down("[name=m0100_assmt_reason]").value;e.getGroupValue()=="1"?this.super_main.query("[name=m1056_pvx_rsn_not_rcvd_agncy]").forEach(function(e){e.disable().setValue(!1)},this):this.super_main.query("[name=m1056_pvx_rsn_not_rcvd_agncy]").forEach(function(e){e.enable()},this)},this)},this)},onValidate:function(){var e=new Array,t=this.super_main.down("radiofield[name=m1041_in_inflnz_season]"),n=this.super_main.down("radiofield[name=m1046_inflnz_recd_crnt_season]"),r=this.super_main.down("radiofield[name=m1051_pvx_rcvd_agncy]"),i=this.super_main.down("radiofield[name=m1056_pvx_rsn_not_rcvd_agncy]"),s=this.super_main.down("[name=m0100_assmt_reason]").value;return t.getGroupValue()==null&&e.push(["M1041","Please choose (Yes/No) whether patient received influenza vaccine from your agency."]),t.getGroupValue()=="1"&&n.getGroupValue()==null&&e.push(["M1046","Select the reason of not receiving the Influenza vaccine by patient."]),r.getGroupValue()==null&&e.push(["M1051","Please choose (Yes/No) whether patient received Pneumococcal vaccine from your agency."]),i.getGroupValue()==null&&r.getGroupValue()=="0"&&e.push(["M1056","Select the reason of not receiving the PPV vaccine by patient."]),e}}),Ext.define("Ext.panel.DiagnosisAndProcedureCodesM1011",{extend:"Ext.panel.Panel",alias:"widget.diagnosisAndProcedureCodesM1011",border:!1,margin:5,items:[{xtype:"label",text:"(M1011) List each Inpatient Diagnosis and ICD-10-CM code at the level of highest specificity for only those conditions actively treated during an inpatient stay having a discharge date within the last 14 days (no V, W, X, Y or Z codes or surgical codes): "},{xtype:"panel",border:0,height:105,layout:{columns:3,type:"table"},defaults:{padding:2,labelAlign:"top"},items:[{xtype:"netzkeremotecombo",name:"m1011_14_day_inp1_icd",fieldLabel:"a",store:[]},{xtype:"netzkeremotecombo",name:"m1011_14_day_inp3_icd",fieldLabel:"c",store:[]},{xtype:"netzkeremotecombo",name:"m1011_14_day_inp5_icd",fieldLabel:"e",store:[]},{xtype:"netzkeremotecombo",name:"m1011_14_day_inp2_icd",fieldLabel:"b",store:[]},{xtype:"netzkeremotecombo",name:"m1011_14_day_inp4_icd",fieldLabel:"d",store:[]},{xtype:"netzkeremotecombo",name:"m1011_14_day_inp6_icd",fieldLabel:"f",store:[]}]}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;if(s||this.infoCompletedDt.value>=t)o=!0;return(this.m1000_dc_ltc_14_da.value==1||this.m1000_dc_snf_14_da.value==1||this.m1000_dc_ipps_14_da.value==1||this.m1000_dc_ltch_14_da.value==1||this.m1000_dc_irf_14_da.value==1||this.m1000_dc_psych_14_da.value==1||this.m1000_dc_oth_14_da.value==1)&&this.inp1Icd.value==null&&o&&e.push(["M1011","Enter at least one inpatient facility diagnosis code OR select 'NA' for M1000."]),this.inp2Icd.value&&this.inp2Icd.value==this.inp1Icd.value&&e.push(["M1011","Inpatient diagnosis 'b' cannot be the same as inpatient diagnosis 'a'."]),this.inp3Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd],Ext.each(DiagCodes,function(t){this.inp3Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'c' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp4Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd],Ext.each(DiagCodes,function(t){this.inp4Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'd' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp5Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd,this.inp4Icd],Ext.each(DiagCodes,function(t){this.inp5Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'e' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp6Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd,this.inp4Icd,this.inp5Icd],Ext.each(DiagCodes,function(t){this.inp6Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'f' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp1Icd.value==null&&this.inp2Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'a' is blank then inpatient diagnosis 'b' must also be blank."]),this.inp2Icd.value==null&&this.inp3Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'b' is blank then inpatient diagnosis 'c' must also be blank."]),this.inp3Icd.value==null&&this.inp4Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'c' is blank then inpatient diagnosis 'd' must also be blank."]),this.inp4Icd.value==null&&this.inp5Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'd' is blank then inpatient diagnosis 'e' must also be blank."]),this.inp5Icd.value==null&&this.inp6Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'e' is blank then inpatient diagnosis 'f' must also be blank."]),e},getMessage:function(e){return icd_codes={},icd_codes.m1011_14_day_inp1_icd="'a'",icd_codes.m1011_14_day_inp2_icd="'b'",icd_codes.m1011_14_day_inp3_icd="'c'",icd_codes.m1011_14_day_inp4_icd="'d'",icd_codes.m1011_14_day_inp5_icd="'e'",icd_codes.m1011_14_day_inp6_icd="'f'",icd_codes[e]},serverValidationRequiredFields:function(){return["m1011_14_day_inp1_icd","m1011_14_day_inp2_icd","m1011_14_day_inp3_icd","m1011_14_day_inp4_icd","m1011_14_day_inp5_icd","m1011_14_day_inp6_icd"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f"]},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.inp1Icd=this.mainScope.down("[name=m1011_14_day_inp1_icd]"),this.inp2Icd=this.mainScope.down("[name=m1011_14_day_inp2_icd]"),this.inp3Icd=this.mainScope.down("[name=m1011_14_day_inp3_icd]"),this.inp4Icd=this.mainScope.down("[name=m1011_14_day_inp4_icd]"),this.inp5Icd=this.mainScope.down("[name=m1011_14_day_inp5_icd]"),this.inp6Icd=this.mainScope.down("[name=m1011_14_day_inp6_icd]"),this.m1000_dc_ltc_14_da=this.mainScope.down("[name=m1000_dc_ltc_14_da]"),this.m1000_dc_snf_14_da=this.mainScope.down("[name=m1000_dc_snf_14_da]"),this.m1000_dc_ipps_14_da=this.mainScope.down("[name=m1000_dc_ipps_14_da]"),this.m1000_dc_ltch_14_da=this.mainScope.down("[name=m1000_dc_ltch_14_da]"),this.m1000_dc_irf_14_da=this.mainScope.down("[name=m1000_dc_irf_14_da]"),this.m1000_dc_psych_14_da=this.mainScope.down("[name=m1000_dc_psych_14_da]"),this.m1000_dc_oth_14_da=this.mainScope.down("[name=m1000_dc_oth_14_da]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0]}}),Ext.define("Ext.panel.DiagnosisAndProcedureCodesM1011OtherFollowUp",{extend:"Ext.panel.Panel",alias:"widget.diagnosisAndProcedureCodesM1011OtherFollowUp",border:!1,margin:5,items:[{xtype:"label",text:"(M1011) List each Inpatient Diagnosis and ICD-10-CM code at the level of highest specificity for only those conditions actively treated during an inpatient stay having a discharge date within the last 14 days (no V, W, X, Y or Z codes or surgical codes): "},{xtype:"panel",border:0,height:105,layout:{columns:3,type:"table"},items:[{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp1_icd",fieldLabel:"a",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp3_icd",fieldLabel:"c",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp5_icd",fieldLabel:"e",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp2_icd",fieldLabel:"b",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp4_icd",fieldLabel:"d",labelAlign:"top",store:[]},{xtype:"netzkeremotecombo",padding:2,name:"m1011_14_day_inp6_icd",fieldLabel:"f",labelAlign:"top",store:[]}]},{xtype:"checkboxfield",labelAlign:"right",name:"m1011_14_day_inp_na",margin:5,boxLabel:"NA - Not applicable (patient was not discharged from an inpatient facility) ",inputValue:"1"}],onValidate:function(){var e=new Array,t=new Date("October 1, 2015"),n=new Date("October 5, 2015"),r=this.episodeDate.getRawValue(),i=new Date(r.split(" ")[0]),s=i>n,o=!1;if(s||this.infoCompletedDt.value>=t)o=!0;return m1011IcdNa=this.mainScope.down("[name=m1011_14_day_inp_na]").value,m1011IcdNa==0&&this.inp1Icd.value==null&&this.inp2Icd.value==null&&this.inp3Icd.value==null&&this.inp4Icd.value==null&&this.inp5Icd.value==null&&this.inp6Icd.value==null&&o&&e.push(["M1011","Enter at least one inpatient facility diagnosis code OR select 'NA'."]),this.inp2Icd.value&&this.inp2Icd.value==this.inp1Icd.value&&e.push(["M1011","Inpatient diagnosis 'b' cannot be the same as inpatient diagnosis 'a'."]),this.inp3Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd],Ext.each(DiagCodes,function(t){this.inp3Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'c' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp4Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd],Ext.each(DiagCodes,function(t){this.inp4Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'd' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp5Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd,this.inp4Icd],Ext.each(DiagCodes,function(t){this.inp5Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'e' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp6Icd.value&&(DiagCodes=[this.inp1Icd,this.inp2Icd,this.inp3Icd,this.inp4Icd,this.inp5Icd],Ext.each(DiagCodes,function(t){this.inp6Icd.value==t.value&&e.push(["M1011","Inpatient diagnosis 'f' cannot be the same as inpatient diagnosis "+this.getMessage(t.name)+"."])},this)),this.inp1Icd.value==null&&this.inp2Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'a' is blank then inpatient diagnosis 'b' must also be blank."]),this.inp2Icd.value==null&&this.inp3Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'b' is blank then inpatient diagnosis 'c' must also be blank."]),this.inp3Icd.value==null&&this.inp4Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'c' is blank then inpatient diagnosis 'd' must also be blank."]),this.inp4Icd.value==null&&this.inp5Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'd' is blank then inpatient diagnosis 'e' must also be blank."]),this.inp5Icd.value==null&&this.inp6Icd.value!=null&&e.push(["M1011","If inpatient diagnosis 'e' is blank then inpatient diagnosis 'f' must also be blank."]),e},getMessage:function(e){return icd_codes={},icd_codes.m1011_14_day_inp1_icd="'a'",icd_codes.m1011_14_day_inp2_icd="'b'",icd_codes.m1011_14_day_inp3_icd="'c'",icd_codes.m1011_14_day_inp4_icd="'d'",icd_codes.m1011_14_day_inp5_icd="'e'",icd_codes.m1011_14_day_inp6_icd="'f'",icd_codes[e]},serverValidationRequiredFields:function(){return["m1011_14_day_inp1_icd","m1011_14_day_inp2_icd","m1011_14_day_inp3_icd","m1011_14_day_inp4_icd","m1011_14_day_inp5_icd","m1011_14_day_inp6_icd"]},serverValidationRequiredFieldsSuffix:function(){return["a","b","c","d","e","f"]},selectIcdNa:function(){this.inpNa.on("change",function(e){e.value?Ext.each(this.m1011Fields,function(e){this.query("[name="+e+"]")[0].setValue(null).disable()},this):Ext.each(this.m1011Fields,function(e){this.query("[name="+e+"]")[0].setValue(null).enable()},this)},this)},afterRender:function(){this.callParent(),this.mainScope=Ext.ComponentQuery.query("#super_main")[0],this.inp1Icd=this.mainScope.down("[name=m1011_14_day_inp1_icd]"),this.inp2Icd=this.mainScope.down("[name=m1011_14_day_inp2_icd]"),this.inp3Icd=this.mainScope.down("[name=m1011_14_day_inp3_icd]"),this.inp4Icd=this.mainScope.down("[name=m1011_14_day_inp4_icd]"),this.inp5Icd=this.mainScope.down("[name=m1011_14_day_inp5_icd]"),this.inp6Icd=this.mainScope.down("[name=m1011_14_day_inp6_icd]"),this.inpNa=this.mainScope.down("checkboxfield[name=m1011_14_day_inp_na]"),this.infoCompletedDt=this.mainScope.down("[name=m0090_info_completed_dt]"),this.episodeDate=Ext.ComponentQuery.query("#patient_treatment_episode")[0],this.m1011Fields=["m1011_14_day_inp1_icd","m1011_14_day_inp2_icd","m1011_14_day_inp3_icd","m1011_14_day_inp4_icd","m1011_14_day_inp5_icd","m1011_14_day_inp6_icd"],this.selectIcdNa()}}),jQuery(document).ready(function(){if(skipHasPageSignin())return;if(cookieExist("numberOfTabs")){var e=currentNumberOfTabs();if(e==1){var t=window.location.protocol+"//"+window.location.host+"/web/multiple_tab.html";window.location=t}var n=e+1;document.cookie="numberOfTabs="+n}else document.cookie="numberOfTabs=1"}),$(window).on("beforeunload",function(){if(skipHasPageSignin())return;var e=currentNumberOfTabs(),t=e-1;t==0&&Ext.Ajax.request({async:!1,url:"/may_be_logging_out",method:"GET"}),document.cookie="numberOfTabs="+t}),Ext.define("Ext.netzke.xFormPanel",{extend:"Ext.form.Panel",alias:"widget.borderlessFormPanel",border:!1}),Ext.define("Ext.window.Window",{extend:"Ext.window.Window",minButtonWidth:"25px",onEsc:function(){},listeners:{afterrender:function(e,t){e.alwaysOnTop&&(this.alwaysOnTopManager||(this.alwaysOnTopManager=Ext.create("Ext.ZIndexManager")),this.alwaysOnTopManager.register(e)),this.alwaysOnTopManager&&Ext.ZIndexManager.zBase>this.alwaysOnTopManager.zseed&&(this.alwaysOnTopManager.zseed=this.alwaysOnTopManager.getNextZSeed())}}}),Ext.define("Ext.button.Button",{extend:"Ext.button.Button",arrowCls:""}),Ext.define("Ext.netzke.ComboBox",{extend:"Ext.form.field.ComboBox",alias:"widget.netzkeremotecombo",valueField:"field1",displayField:"field2",triggerAction:"all",minChars:3,initComponent:function(){var e=this.parentId||Ext.documentFormId,t=e+"_"+this.name;Ext.define(t,{extend:"Ext.data.Model",fields:["field1","field2"]});var n=new Ext.data.Store({model:t,proxy:{type:"direct",directFn:Netzke.providers[e].getComboboxOptions,extraParams:{column:this.name},reader:{type:"array",root:"data"}}});n.on("beforeload",function(e,t){},this),n.on("load",function(e,n){this.emptyText||(this.emptyText="---"),e.insert(0,Ext.create(t,{field1:null,field2:this.emptyText}))},this),this.store&&n.loadData({data:this.store}),this.store=n,this.callParent()},collapse:function(){this.store.loading||this.callParent()}}),Ext.override(Ext.selection.Model,{storeHasSelected:function(e){var t=this.store,n,r,i,s,o;if(e.hasId())return t.getById(e.getId());if(t.buffered){n=[];for(o in t.data.map)n=n.concat(t.data.map[o].value)}else n=t.data.items;r=n.length,i=e.internalId;for(s=0;s<r;++s)if(i===n[s].internalId)return!0;return!1}}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.humanize=
function(){var e=this.split("_");for(i=0;i<e.length;i++)e[i]=e[i].capitalize();return e.join(" ")};var store=Ext.create("Ext.data.Store",{fields:["icdcode"],data:{items:[]},proxy:{type:"memory",reader:{type:"json",root:"items"}}});Ext.define("gemgrid",{extend:"Ext.grid.Panel",store:store,title:!1,header:!1,hideHeaders:!0,item_id:"mapping_grid_gem",columns:[{text:"Icdcode",dataIndex:"icdcode",width:"100%",tdCls:"wrap"}],initComponent:function(){this.callParent(),this.setHeight(this.height),this.setWidth(this.width),this.store.removeAll()}}),Ext.define("grouper",{extend:"Ext.panel.Panel",initComponent:function(){var e=this;grouperRes=this.data;var t=Ext.create("Ext.draw.Component",{});Ext.applyIf(e,{items:[t]}),e.callParent()},drawStuff:function(){console.log(this.items.items[0]),surface=this.items.items[0].surface,console.log("Grouper........"),console.log(surface),box1_y=50,box1_x=100,box2_x=200,box2_y=50,box1_width=75,box2_width=75,box3_x=300,box3_y=50,box3_width=75,box4_x=400,box4_y=50,box4_width=75,box5_x=500,box5_y=50,box5_width=75,box_height=120,box_2_height=150,data=grouperRes.b1,part_height=box_height/data.length,part_number=0;for(var e in data)part_number+=1,color="#ffffff",data[part_number-1][1]!=""&&(color="#34A1FB"),box_data={type:"path",stroke:"#7F7C7D",fill:color,"stroke-width":"1",path:"M"+box1_x+" "+(box1_y+part_number*part_height)+" v -30 h "+box1_width+" v 30  Z"},data[part_number-1][1]!=""&&(box_data.group="highlight"),console.log(box_data),surface.add(box_data).show(!0),surface.add({type:"text",x:105,y:30,width:40,height:30,font:"10px Open Sans",fillOpacity:.2,text:"Grouping Step"}).show(!0),surface.add({type:"text",x:30+box1_x,y:box1_y+part_number*part_height-15,width:40,height:30,fontWeight:"bold",font:"12px Open Sans",text:data[part_number-1][0]}).show(!0),data[part_number-1][1]!=""&&surface.add({type:"text",x:3+box1_x+box1_width,y:box1_y+part_number*part_height-15,width:40,height:30,alignTo:"center",text:data[part_number-1][1]==-1?0:data[part_number-1][1]}).show(!0),highlight=surface.getGroup("highlight");data=grouperRes.b2,part_height=box_height/data.length,part_number=0;for(var e in data)part_number+=1,color="#ffffff",data[part_number-1][1]!=""&&(color="#34A1FB"),box_data={type:"path",stroke:"#7F7C7D",fill:color,"stroke-width":"1",path:"M"+box2_x+" "+(box2_y+part_number*part_height)+" v -45 h "+box2_width+" v 45  Z"},data[part_number-1][1]!=""&&(box_data.group="highlight"),console.log(box_data),surface.add(box_data).show(!0),surface.add({type:"text",x:205,y:30,width:40,height:30,font:"10px Open Sans",fillOpacity:.3,text:"Clinical Points"}).show(!0),surface.add({type:"text",x:20+box2_x,y:box2_y+part_number*part_height-20,width:40,height:30,fontWeight:"bold",font:"12px Open Sans",text:data[part_number-1][0]}).show(!0),data[part_number-1][1]!=""&&surface.add({type:"text",x:3+box2_x+box2_width,y:box2_y+part_number*part_height-20,width:40,height:30,text:data[part_number-1][1]==-1?0:data[part_number-1][1]}).show(!0),highlight=surface.getGroup("highlight");data=grouperRes.b3,part_height=box_height/data.length,part_number=0;for(var e in data)part_number+=1,color="#ffffff",data[part_number-1][1]!=""&&(color="#34A1FB"),box_data={type:"path",stroke:"#7F7C7D",fill:color,"stroke-width":"1",path:"M"+box3_x+" "+(box3_y+part_number*part_height)+" v -45 h "+box3_width+" v 45  Z"},data[part_number-1][1]!=""&&(box_data.group="highlight"),console.log(box_data),surface.add(box_data).show(!0),surface.add({type:"text",x:305,y:30,width:80,height:30,font:"10px Open Sans",fillOpacity:.3,text:"Functional Points"}).show(!0),surface.add({type:"text",x:20+box3_x,y:box3_y+part_number*part_height-20,width:40,height:30,fontWeight:"bold",font:"12px Open Sans",text:data[part_number-1][0]}).show(!0),data[part_number-1][1]!=""&&surface.add({type:"text",x:3+box3_x+box3_width,y:box3_y+part_number*part_height-20,width:40,height:30,alignTo:"center",text:data[part_number-1][1]==-1?0:data[part_number-1][1]}).show(!0),highlight=surface.getGroup("highlight");data=grouperRes.b4,part_height=box_height/data.length,part_number=0;for(var e in data)part_number+=1,color="#ffffff",data[part_number-1][1]!=""&&(color="#34A1FB"),box_data={type:"path",stroke:"#7F7C7D",fill:color,"stroke-width":"1",path:"M"+box4_x+" "+(box4_y+part_number*part_height)+" v -30 h "+box4_width+" v 30  Z"},data[part_number-1][1]!=""&&(box_data.group="highlight"),console.log(box_data),surface.add(box_data).show(!0),surface.add({type:"text",x:405,y:30,width:120,height:30,font:"10px Open Sans",fillOpacity:.2,text:"Service Points"}).show(!0),surface.add({type:"text",x:20+box4_x,y:box4_y+part_number*part_height-15,width:40,height:30,fontWeight:"bold",font:"12px Open Sans",text:data[part_number-1][0]}).show(!0),data[part_number-1][1]!=""&&surface.add({type:"text",x:3+box4_x+box4_width,y:box4_y+part_number*part_height-15,width:40,height:30,text:data[part_number-1][1]==-1?0:data[part_number-1][1]}).show(!0),highlight=surface.getGroup("highlight");data=grouperRes.b5,part_height=box_height/data.length,part_number=0;for(var e in data)part_number+=1,color="#ffffff",data[part_number-1][1]!=""&&(color="#34A1FB"),box_data={type:"path",stroke:"#7F7C7D",fill:color,"stroke-width":"1",path:"M"+box5_x+" "+(box5_y+part_number*part_height)+" v -26 h "+box5_width+" v 26  Z"},data[part_number-1][1]!=""&&(box_data.group="highlight"),console.log(box_data),surface.add(box_data).show(!0),surface.add({type:"text",x:505,y:30,width:160,height:30,font:"10px Open Sans",fillOpacity:.2,text:"NRS Supply Points"}).show(!0),surface.add({type:"text",x:20+box5_x,y:box5_y+part_number*part_height-15,width:40,height:30,fontWeight:"bold",font:"12px Open Sans",text:data[part_number-1][0]}).show(!0),data[part_number-1][1]!=""&&surface.add({type:"text",x:3+box5_x+box5_width,y:box5_y+part_number*part_height-15,width:40,height:30,text:data[part_number-1][1]==-1?0:data[part_number-1][1]}).show(!0)}});